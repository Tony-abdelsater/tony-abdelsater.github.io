var Dht=Object.defineProperty;var Iht=(e,t,n)=>t in e?Dht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _i=(e,t,n)=>Iht(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const _q={context:void 0,registry:void 0},Lht=(e,t)=>e===t,Ri=Symbol("solid-proxy"),ty=Symbol("solid-track"),Pht=Symbol("solid-dev-component"),DM={equals:Lht};let xq=Tq;const gh=1,IM=2,bq={owned:null,cleanups:null,context:null,owner:null};var ur=null;let $2=null,Rht=null,zr=null,wa=null,Fc=null,$C=0;function Yp(e,t){const n=zr,r=ur,i=e.length===0,a=t===void 0?r:t,o=i?bq:{owned:null,cleanups:null,context:a?a.context:null,owner:a},s=i?e:()=>e(()=>$e(()=>jC(o)));ur=o,zr=null;try{return Nv(s,!0)}finally{zr=n,ur=r}}function rt(e,t){t=t?Object.assign({},DM,t):DM;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),wq(n,i));return[Sq.bind(n),r]}function mB(e,t,n){const r=XC(e,t,!0,gh);Zy(r)}function pr(e,t,n){const r=XC(e,t,!1,gh);Zy(r)}function Bt(e,t,n){xq=Fht;const r=XC(e,t,!1,gh);(!n||!n.render)&&(r.user=!0),Fc?Fc.push(r):Zy(r)}function mt(e,t,n){n=n?Object.assign({},DM,n):DM;const r=XC(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Zy(r),Sq.bind(r)}function li(e){return Nv(e,!1)}function $e(e){if(zr===null)return e();const t=zr;zr=null;try{return e()}finally{zr=t}}function la(e,t,n){const r=Array.isArray(e);let i,a=n&&n.defer;return o=>{let s;if(r){s=Array(e.length);for(let u=0;u<e.length;u++)s[u]=e[u]()}else s=e();if(a)return a=!1,o;const l=$e(()=>t(s,i,o));return i=s,l}}function ki(e){Bt(()=>$e(e))}function Pe(e){return ur===null||(ur.cleanups===null?ur.cleanups=[e]:ur.cleanups.push(e)),e}function eb(){return zr}function Oht(){return ur}function Nht(e,t){const n=ur,r=zr;ur=e,zr=null;try{return Nv(t,!0)}catch(i){yB(i)}finally{ur=n,zr=r}}function hr(e,t){const n=Symbol("context");return{id:n,Provider:Uht(n),defaultValue:e}}function Ln(e){return ur&&ur.context&&ur.context[e.id]!==void 0?ur.context[e.id]:e.defaultValue}function Er(e){const t=mt(e),n=mt(()=>WR(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Sq(){if(this.sources&&this.state)if(this.state===gh)Zy(this);else{const e=wa;wa=null,Nv(()=>PM(this),!1),wa=e}if(zr){const e=this.observers?this.observers.length:0;zr.sources?(zr.sources.push(this),zr.sourceSlots.push(e)):(zr.sources=[this],zr.sourceSlots=[e]),this.observers?(this.observers.push(zr),this.observerSlots.push(zr.sources.length-1)):(this.observers=[zr],this.observerSlots=[zr.sources.length-1])}return this.value}function wq(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Nv(()=>{for(let i=0;i<e.observers.length;i+=1){const a=e.observers[i],o=$2&&$2.running;o&&$2.disposed.has(a),(o?!a.tState:!a.state)&&(a.pure?wa.push(a):Fc.push(a),a.observers&&Mq(a)),o||(a.state=gh)}if(wa.length>1e6)throw wa=[],new Error},!1)),t}function Zy(e){if(!e.fn)return;jC(e);const t=$C;Bht(e,e.value,t)}function Bht(e,t,n){let r;const i=ur,a=zr;zr=ur=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=gh,e.owned&&e.owned.forEach(jC),e.owned=null),e.updatedAt=n+1,yB(o)}finally{zr=a,ur=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?wq(e,r):e.value=r,e.updatedAt=n)}function XC(e,t,n,r=gh,i){const a={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ur,context:ur?ur.context:null,pure:n};return ur===null||ur!==bq&&(ur.owned?ur.owned.push(a):ur.owned=[a]),a}function LM(e){if(e.state===0)return;if(e.state===IM)return PM(e);if(e.suspense&&$e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<$C);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===gh)Zy(e);else if(e.state===IM){const r=wa;wa=null,Nv(()=>PM(e,t[0]),!1),wa=r}}function Nv(e,t){if(wa)return e();let n=!1;t||(wa=[]),Fc?n=!0:Fc=[],$C++;try{const r=e();return kht(n),r}catch(r){n||(Fc=null),wa=null,yB(r)}}function kht(e){if(wa&&(Tq(wa),wa=null),e)return;const t=Fc;Fc=null,t.length&&Nv(()=>xq(t),!1)}function Tq(e){for(let t=0;t<e.length;t++)LM(e[t])}function Fht(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:LM(r)}for(t=0;t<n;t++)LM(e[t])}function PM(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===gh?r!==t&&(!r.updatedAt||r.updatedAt<$C)&&LM(r):i===IM&&PM(r,t)}}}function Mq(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=IM,n.pure?wa.push(n):Fc.push(n),n.observers&&Mq(n))}}function jC(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const a=i.pop(),o=n.observerSlots.pop();r<i.length&&(a.sourceSlots[o]=r,i[r]=a,n.observerSlots[r]=o)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)jC(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function zht(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function yB(e,t=ur){throw zht(e)}function WR(e){if(typeof e=="function"&&!e.length)return WR(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=WR(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Uht(e,t){return function(r){let i;return pr(()=>i=$e(()=>(ur.context={...ur.context,[e]:r.value},Er(()=>r.children))),void 0),i}}const Vht=Symbol("fallback");function t4(e){for(let t=0;t<e.length;t++)e[t]()}function _B(e,t,n={}){let r=[],i=[],a=[],o=0,s=t.length>1?[]:null;return Pe(()=>t4(a)),()=>{let l=e()||[],u,c;return l[ty],$e(()=>{let f=l.length,d,p,v,g,m,_,y,x,S;if(f===0)o!==0&&(t4(a),a=[],r=[],i=[],o=0,s&&(s=[])),n.fallback&&(r=[Vht],i[0]=Yp(b=>(a[0]=b,n.fallback())),o=1);else if(o===0){for(i=new Array(f),c=0;c<f;c++)r[c]=l[c],i[c]=Yp(h);o=f}else{for(v=new Array(f),g=new Array(f),s&&(m=new Array(f)),_=0,y=Math.min(o,f);_<y&&r[_]===l[_];_++);for(y=o-1,x=f-1;y>=_&&x>=_&&r[y]===l[x];y--,x--)v[x]=i[y],g[x]=a[y],s&&(m[x]=s[y]);for(d=new Map,p=new Array(x+1),c=x;c>=_;c--)S=l[c],u=d.get(S),p[c]=u===void 0?-1:u,d.set(S,c);for(u=_;u<=y;u++)S=r[u],c=d.get(S),c!==void 0&&c!==-1?(v[c]=i[u],g[c]=a[u],s&&(m[c]=s[u]),c=p[c],d.set(S,c)):a[u]();for(c=_;c<f;c++)c in v?(i[c]=v[c],a[c]=g[c],s&&(s[c]=m[c],s[c](c))):i[c]=Yp(h);i=i.slice(0,o=f),r=l.slice(0)}return i});function h(f){if(a[c]=f,s){const[d,p]=rt(c);return s[c]=p,t(l[c],d)}return t(l[c])}}}function O(e,t){return $e(()=>e(t||{}))}function xS(){return!0}const $R={get(e,t,n){return t===Ri?n:e.get(t)},has(e,t){return t===Ri?!0:e.has(t)},set:xS,deleteProperty:xS,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:xS,deleteProperty:xS}},ownKeys(e){return e.keys()}};function X2(e){return(e=typeof e=="function"?e():e)?e:{}}function Ght(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function G(...e){let t=!1;for(let o=0;o<e.length;o++){const s=e[o];t=t||!!s&&Ri in s,e[o]=typeof s=="function"?(t=!0,mt(s)):s}if(t)return new Proxy({get(o){for(let s=e.length-1;s>=0;s--){const l=X2(e[s])[o];if(l!==void 0)return l}},has(o){for(let s=e.length-1;s>=0;s--)if(o in X2(e[s]))return!0;return!1},keys(){const o=[];for(let s=0;s<e.length;s++)o.push(...Object.keys(X2(e[s])));return[...new Set(o)]}},$R);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const s=e[o];if(!s)continue;const l=Object.getOwnPropertyNames(s);for(let u=l.length-1;u>=0;u--){const c=l[u];if(c==="__proto__"||c==="constructor")continue;const h=Object.getOwnPropertyDescriptor(s,c);if(!r[c])r[c]=h.get?{enumerable:!0,configurable:!0,get:Ght.bind(n[c]=[h.get.bind(s)])}:h.value!==void 0?h:void 0;else{const f=n[c];f&&(h.get?f.push(h.get.bind(s)):h.value!==void 0&&f.push(()=>h.value))}}}const i={},a=Object.keys(r);for(let o=a.length-1;o>=0;o--){const s=a[o],l=r[s];l&&l.get?Object.defineProperty(i,s,l):i[s]=l?l.value:void 0}return i}function Yt(e,...t){if(Ri in e){const i=new Set(t.length>1?t.flat():t[0]),a=t.map(o=>new Proxy({get(s){return o.includes(s)?e[s]:void 0},has(s){return o.includes(s)&&s in e},keys(){return o.filter(s=>s in e)}},$R));return a.push(new Proxy({get(o){return i.has(o)?void 0:e[o]},has(o){return i.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!i.has(o))}},$R)),a}const n={},r=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(e)){const a=Object.getOwnPropertyDescriptor(e,i),o=!a.get&&!a.set&&a.enumerable&&a.writable&&a.configurable;let s=!1,l=0;for(const u of t)u.includes(i)&&(s=!0,o?r[l][i]=a.value:Object.defineProperty(r[l],i,a)),++l;s||(o?n[i]=a.value:Object.defineProperty(n,i,a))}return[...r,n]}let Hht=0;function Ys(){const e=_q.context;return e?`${e.id}${e.count++}`:`cl-${Hht++}`}const Aq=e=>`Stale read from <${e}>.`;function RM(e){const t="fallback"in e&&{fallback:()=>e.fallback};return mt(_B(()=>e.each,e.children,t||void 0))}function Xe(e){const t=e.keyed,n=mt(()=>e.when,void 0,{equals:(r,i)=>t?r===i:!r==!i});return mt(()=>{const r=n();if(r){const i=e.children;return typeof i=="function"&&i.length>0?$e(()=>i(t?r:()=>{if(!$e(n))throw Aq("Show");return e.when})):i}return e.fallback},void 0,void 0)}function Cq(e){let t=!1;const n=(a,o)=>(t?a[1]===o[1]:!a[1]==!o[1])&&a[2]===o[2],r=Er(()=>e.children),i=mt(()=>{let a=r();Array.isArray(a)||(a=[a]);for(let o=0;o<a.length;o++){const s=a[o].when;if(s)return t=!!a[o].keyed,[o,s,a[o]]}return[-1]},void 0,{equals:n});return mt(()=>{const[a,o,s]=i();if(a<0)return e.fallback;const l=s.children;return typeof l=="function"&&l.length>0?$e(()=>l(t?o:()=>{if($e(i)[0]!==a)throw Aq("Match");return s.when})):l},void 0,void 0)}function Mx(e){return e}const Wht=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],$ht=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Wht]),Xht=new Set(["innerHTML","textContent","innerText","children"]),jht=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Yht=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function qht(e,t){const n=Yht[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Kht=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Eq=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Zht={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Jht(e,t,n){let r=n.length,i=t.length,a=r,o=0,s=0,l=t[i-1].nextSibling,u=null;for(;o<i||s<a;){if(t[o]===n[s]){o++,s++;continue}for(;t[i-1]===n[a-1];)i--,a--;if(i===o){const c=a<r?s?n[s-1].nextSibling:n[a-s]:l;for(;s<a;)e.insertBefore(n[s++],c)}else if(a===s)for(;o<i;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[a-1]&&n[s]===t[i-1]){const c=t[--i].nextSibling;e.insertBefore(n[s++],t[o++].nextSibling),e.insertBefore(n[--a],c),t[i]=n[a]}else{if(!u){u=new Map;let h=s;for(;h<a;)u.set(n[h],h++)}const c=u.get(t[o]);if(c!=null)if(s<c&&c<a){let h=o,f=1,d;for(;++h<i&&h<a&&!((d=u.get(t[h]))==null||d!==c+f);)f++;if(f>c-s){const p=t[o];for(;s<c;)e.insertBefore(n[s++],p)}else e.replaceChild(n[s++],t[o++])}else o++;else t[o++].remove()}}}const e4="_$DX_DELEGATE";function Qht(e,t,n,r={}){let i;return Yp(a=>{i=a,t===document?e():le(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function ee(e,t,n){let r;const i=()=>{const o=document.createElement("template");return o.innerHTML=e,n?o.content.firstChild.firstChild:o.content.firstChild},a=t?()=>$e(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return a.cloneNode=a,a}function xB(e,t=window.document){const n=t[e4]||(t[e4]=new Set);for(let r=0,i=e.length;r<i;r++){const a=e[r];n.has(a)||(n.add(a),t.addEventListener(a,aft))}}function uv(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function tft(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function YC(e,t){t==null?e.removeAttribute("class"):e.className=t}function eft(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=a=>i.call(e,n[1],a))}else e.addEventListener(t,n)}function nft(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let a,o;for(a=0,o=i.length;a<o;a++){const s=i[a];!s||s==="undefined"||t[s]||(n4(e,s,!1),delete n[s])}for(a=0,o=r.length;a<o;a++){const s=r[a],l=!!t[s];!s||s==="undefined"||n[s]===l||!l||(n4(e,s,!0),n[s]=l)}return n}function ey(e,t,n){if(!t)return n?uv(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,a;for(a in n)t[a]==null&&r.removeProperty(a),delete n[a];for(a in t)i=t[a],i!==n[a]&&(r.setProperty(a,i),n[a]=i);return n}function Bv(e,t={},n,r){const i={};return r||pr(()=>i.children=nb(e,t.children,i.children)),pr(()=>t.ref&&t.ref(e)),pr(()=>rft(e,t,n,!0,i,!0)),i}function ny(e,t,n){return $e(()=>e(t,n))}function le(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return nb(e,t,r,n);pr(i=>nb(e,t(),i,n),r)}function rft(e,t,n,r,i={},a=!1){t||(t={});for(const o in i)if(!(o in t)){if(o==="children")continue;i[o]=r4(e,o,null,i[o],n,a)}for(const o in t){if(o==="children")continue;const s=t[o];i[o]=r4(e,o,s,i[o],n,a)}}function ift(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function n4(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,a=r.length;i<a;i++)e.classList.toggle(r[i],n)}function r4(e,t,n,r,i,a){let o,s,l,u,c;if(t==="style")return ey(e,n,r);if(t==="classList")return nft(e,n,r);if(n===r)return r;if(t==="ref")a||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r),n&&e.addEventListener(h,n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),f=Kht.has(h);if(!f&&r){const d=Array.isArray(r)?r[0]:r;e.removeEventListener(h,d)}(f||n)&&(eft(e,h,n,f),f&&xB([h]))}else if(t.slice(0,5)==="attr:")uv(e,t.slice(5),n);else if((c=t.slice(0,5)==="prop:")||(l=Xht.has(t))||!i&&((u=qht(t,e.tagName))||(s=$ht.has(t)))||(o=e.nodeName.includes("-")))c&&(t=t.slice(5),s=!0),t==="class"||t==="className"?YC(e,n):o&&!s&&!l?e[ift(t)]=n:e[u||t]=n;else{const h=i&&t.indexOf(":")>-1&&Zht[t.split(":")[0]];h?tft(e,h,t,n):uv(e,jht[t]||t,n)}return n}function aft(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function nb(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,a==="string"||a==="number")if(a==="number"&&(t=t.toString()),o){let s=n[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=Kv(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||a==="boolean")n=Kv(e,n,r);else{if(a==="function")return pr(()=>{let s=t();for(;typeof s=="function";)s=s();n=nb(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],l=n&&Array.isArray(n);if(XR(s,t,n,i))return pr(()=>n=nb(e,s,n,r,!0)),()=>n;if(s.length===0){if(n=Kv(e,n,r),o)return n}else l?n.length===0?i4(e,s,r):Jht(e,n,s):(n&&Kv(e),i4(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=Kv(e,n,r,t);Kv(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function XR(e,t,n,r){let i=!1;for(let a=0,o=t.length;a<o;a++){let s=t[a],l=n&&n[e.length],u;if(!(s==null||s===!0||s===!1))if((u=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))i=XR(e,s,l)||i;else if(u==="function")if(r){for(;typeof s=="function";)s=s();i=XR(e,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||i}else e.push(s),i=!0;else{const c=String(s);l&&l.nodeType===3&&l.data===c?e.push(l):e.push(document.createTextNode(c))}}return i}function i4(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Kv(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let a=!1;for(let o=t.length-1;o>=0;o--){const s=t[o];if(i!==s){const l=s.parentNode===e;!a&&!o?l?e.replaceChild(i,s):e.insertBefore(i,n):l&&s.remove()}else a=!0}}else e.insertBefore(i,n);return[i]}const oft="http://www.w3.org/2000/svg";function Dq(e,t=!1){return t?document.createElementNS(oft,e):document.createElement(e)}function Iq(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,i=Oht();let a,o=!!_q.context;return Bt(()=>{a||(a=Nht(i,()=>mt(()=>e.children)));const s=r();if(s instanceof HTMLHeadElement){const[l,u]=rt(!1),c=()=>u(!0);Yp(h=>le(s,()=>l()?h():a(),null)),Pe(c)}else{const l=Dq(e.isSVG?"g":"div",e.isSVG),u=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),le(u,a),s.appendChild(l),e.ref&&e.ref(l),Pe(()=>s.removeChild(l))}},void 0,{render:!o}),n}function ry(e){const[t,n]=Yt(e,["component"]),r=mt(()=>t.component);return mt(()=>{const i=r();switch(typeof i){case"function":return $e(()=>i(n));case"string":const a=Eq.has(i),o=Dq(i,a);return Bv(o,n,a),o}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jR=function(e,t){return jR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},jR(e,t)};function it(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jR(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var sft=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),lft=function(){function e(){this.browser=new sft,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),qe=new lft;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(qe.wxa=!0,qe.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?qe.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(qe.node=!0,qe.svgSupported=!0):uft(navigator.userAgent,qe);function uft(e,t){var n=t.browser,r=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),o=/micromessenger/i.test(e);r&&(n.firefox=!0,n.version=r[1]),i&&(n.ie=!0,n.version=i[1]),a&&(n.edge=!0,n.version=a[1],n.newEdge=+a[1].split(".")[0]>18),o&&(n.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,t.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||n.ie&&+n.version>=9}var bB=12,Lq="sans-serif",kf=bB+"px "+Lq,cft=20,hft=100,fft="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function dft(e){var t={};if(typeof JSON>"u")return t;for(var n=0;n<e.length;n++){var r=String.fromCharCode(n+32),i=(e.charCodeAt(n)-cft)/hft;t[r]=i}return t}var pft=dft(fft),Ff={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(n,r){if(!e){var i=Ff.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==r&&(t=e.font=r||kf),e.measureText(n);n=n||"",r=r||kf;var a=/(\d+)px/.exec(r),o=a&&+a[1]||bB,s=0;if(r.indexOf("mono")>=0)s=o*n.length;else for(var l=0;l<n.length;l++){var u=pft[n[l]];s+=u==null?o:u*o}return{width:s}}}(),loadImage:function(e,t,n){var r=new Image;return r.onload=t,r.onerror=n,r.src=e,r}},Pq=Pl(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),Rq=Pl(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Jy=Object.prototype.toString,qC=Array.prototype,vft=qC.forEach,gft=qC.filter,SB=qC.slice,mft=qC.map,a4=(function(){}).constructor,bS=a4?a4.prototype:null,wB="__proto__",yft=2311;function Oq(){return yft++}function TB(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function ce(e){if(e==null||typeof e!="object")return e;var t=e,n=Jy.call(e);if(n==="[object Array]"){if(!Ax(e)){t=[];for(var r=0,i=e.length;r<i;r++)t[r]=ce(e[r])}}else if(Rq[n]){if(!Ax(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var r=0,i=e.length;r<i;r++)t[r]=e[r]}}}else if(!Pq[n]&&!Ax(e)&&!iy(e)){t={};for(var o in e)e.hasOwnProperty(o)&&o!==wB&&(t[o]=ce(e[o]))}return t}function Xt(e,t,n){if(!se(t)||!se(e))return n?ce(t):e;for(var r in t)if(t.hasOwnProperty(r)&&r!==wB){var i=e[r],a=t[r];se(a)&&se(i)&&!ht(a)&&!ht(i)&&!iy(a)&&!iy(i)&&!o4(a)&&!o4(i)&&!Ax(a)&&!Ax(i)?Xt(i,a,n):(n||!(r in e))&&(e[r]=ce(t[r]))}return e}function MB(e,t){for(var n=e[0],r=1,i=e.length;r<i;r++)n=Xt(n,e[r],t);return n}function ut(e,t){if(Object.assign)Object.assign(e,t);else for(var n in t)t.hasOwnProperty(n)&&n!==wB&&(e[n]=t[n]);return e}function te(e,t,n){for(var r=Je(t),i=0;i<r.length;i++){var a=r[i];(n?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function Le(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n}return-1}function AB(e,t){var n=e.prototype;function r(){}r.prototype=t.prototype,e.prototype=new r;for(var i in n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);e.prototype.constructor=e,e.superClass=t}function ti(e,t,n){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(n?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else te(e,t,n)}function Aa(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function R(e,t,n){if(e&&t)if(e.forEach&&e.forEach===vft)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)}function yt(e,t,n){if(!e)return[];if(!t)return CB(e);if(e.map&&e.map===mft)return e.map(t,n);for(var r=[],i=0,a=e.length;i<a;i++)r.push(t.call(n,e[i],i,e));return r}function Pl(e,t,n,r){if(e&&t){for(var i=0,a=e.length;i<a;i++)n=t.call(r,n,e[i],i,e);return n}}function Gn(e,t,n){if(!e)return[];if(!t)return CB(e);if(e.filter&&e.filter===gft)return e.filter(t,n);for(var r=[],i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e)&&r.push(e[i]);return r}function _ft(e,t,n){if(e&&t){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return e[r]}}function Je(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function xft(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return function(){return e.apply(t,n.concat(SB.call(arguments)))}}var Vt=bS&&ae(bS.bind)?bS.call.bind(bS.bind):xft;function _e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){return e.apply(this,t.concat(SB.call(arguments)))}}function ht(e){return Array.isArray?Array.isArray(e):Jy.call(e)==="[object Array]"}function ae(e){return typeof e=="function"}function Ft(e){return typeof e=="string"}function YR(e){return Jy.call(e)==="[object String]"}function xn(e){return typeof e=="number"}function se(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function o4(e){return!!Pq[Jy.call(e)]}function To(e){return!!Rq[Jy.call(e)]}function iy(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function KC(e){return e.colorStops!=null}function bft(e){return e.image!=null}function Sft(e){return Jy.call(e)==="[object RegExp]"}function rb(e){return e!==e}function Qi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++)if(e[n]!=null)return e[n]}function xe(e,t){return e??t}function Du(e,t,n){return e??t??n}function CB(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return SB.apply(e,t)}function EB(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Wa(e,t){if(!e)throw new Error(t)}function Sl(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Nq="__ec_primitive__";function OM(e){e[Nq]=!0}function Ax(e){return e[Nq]}var wft=function(){function e(){this.data={}}return e.prototype.delete=function(t){var n=this.has(t);return n&&delete this.data[t],n},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,n){return this.data[t]=n,this},e.prototype.keys=function(){return Je(this.data)},e.prototype.forEach=function(t){var n=this.data;for(var r in n)n.hasOwnProperty(r)&&t(n[r],r)},e}(),Bq=typeof Map=="function";function Tft(){return Bq?new Map:new wft}var Mft=function(){function e(t){var n=ht(t);this.data=Tft();var r=this;t instanceof e?t.each(i):t&&R(t,i);function i(a,o){n?r.set(a,o):r.set(o,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,n){return this.data.set(t,n),n},e.prototype.each=function(t,n){this.data.forEach(function(r,i){t.call(n,r,i)})},e.prototype.keys=function(){var t=this.data.keys();return Bq?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function jt(e){return new Mft(e)}function ay(e,t){for(var n=new e.constructor(e.length+t.length),r=0;r<e.length;r++)n[r]=e[r];for(var i=e.length,r=0;r<t.length;r++)n[r+i]=t[r];return n}function ZC(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&ut(n,t),n}function kq(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function $t(e,t){return e.hasOwnProperty(t)}function Zr(){}var VT=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qR=function(e,t){return qR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},qR(e,t)};function gr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");qR(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function kv(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Na(e,t){return e[0]=t[0],e[1]=t[1],e}function zc(e){return[e[0],e[1]]}function Aft(e,t,n){return e[0]=t,e[1]=n,e}function s4(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function KR(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Ep(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ZR(e){return Math.sqrt(Cft(e))}function Cft(e){return e[0]*e[0]+e[1]*e[1]}function GT(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Qy(e,t){var n=ZR(t);return n===0?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function JR(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var gf=JR;function Eft(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var qp=Eft;function HT(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}function Oi(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function mf(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function yf(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Zv=function(){function e(t,n){this.target=t,this.topTarget=n&&n.topTarget}return e}(),Dft=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var n=t.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Zv(n,t),"dragstart",t.event))},e.prototype._drag=function(t){var n=this._draggingTarget;if(n){var r=t.offsetX,i=t.offsetY,a=r-this._x,o=i-this._y;this._x=r,this._y=i,n.drift(a,o,t),this.handler.dispatchToElement(new Zv(n,t),"drag",t.event);var s=this.handler.findHover(r,i,n).target,l=this._dropTarget;this._dropTarget=s,n!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Zv(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Zv(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Zv(n,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Zv(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}(),qs=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,n,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof n=="function"&&(i=r,r=n,n=null),!r||!t)return this;var o=this._$eventProcessor;n!=null&&o&&o.normalizeQuery&&(n=o.normalizeQuery(n)),a[t]||(a[t]=[]);for(var s=0;s<a[t].length;s++)if(a[t][s].h===r)return this;var l={h:r,query:n,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=a[t].length-1,c=a[t][u];return c&&c.callAtLast?a[t].splice(u,0,l):a[t].push(l),this},e.prototype.isSilent=function(t){var n=this._$handlers;return!n||!n[t]||!n[t].length},e.prototype.off=function(t,n){var r=this._$handlers;if(!r)return this;if(!t)return this._$handlers={},this;if(n){if(r[t]){for(var i=[],a=0,o=r[t].length;a<o;a++)r[t][a].h!==n&&i.push(r[t][a]);r[t]=i}r[t]&&r[t].length===0&&delete r[t]}else delete r[t];return this},e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=n.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(t,u.query)))switch(o){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,n[0]);break;case 2:u.h.call(u.ctx,n[0],n[1]);break;default:u.h.apply(u.ctx,n);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var o=n.length,s=n[o-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(t,c.query)))switch(o){case 0:c.h.call(s);break;case 1:c.h.call(s,n[0]);break;case 2:c.h.call(s,n[0],n[1]);break;default:c.h.apply(s,n.slice(1,o-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}(),Ift=Math.log(2);function QR(e,t,n,r,i,a){var o=r+"-"+i,s=e.length;if(a.hasOwnProperty(o))return a[o];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/Ift);return e[n][l]}for(var u=r|1<<n,c=n+1;r&1<<c;)c++;for(var h=0,f=0,d=0;f<s;f++){var p=1<<f;p&i||(h+=(d%2?-1:1)*e[n][f]*QR(e,t-1,c,u,i|p,a),d++)}return a[o]=h,h}function l4(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],r={},i=QR(n,8,0,0,0,r);if(i!==0){for(var a=[],o=0;o<8;o++)for(var s=0;s<8;s++)a[s]==null&&(a[s]=0),a[s]+=((o+s)%2?-1:1)*QR(n,7,o===0?1:0,1<<o,1<<s,r)/i*t[o];return function(l,u,c){var h=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/h,l[1]=(u*a[3]+c*a[4]+a[5])/h}}}var u4="___zrEVENTSAVED",j2=[];function Lft(e,t,n,r,i){return tO(j2,t,r,i,!0)&&tO(e,n,j2[0],j2[1])}function tO(e,t,n,r,i){if(t.getBoundingClientRect&&qe.domSupported&&!Fq(t)){var a=t[u4]||(t[u4]={}),o=Pft(t,a),s=Rft(o,a,i);if(s)return s(e,n,r),!0}return!1}function Pft(e,t){var n=t.markers;if(n)return n;n=t.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var o=document.createElement("div"),s=o.style,l=a%2,u=(a>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(o),n.push(o)}return n}function Rft(e,t,n){for(var r=n?"invTrans":"trans",i=t[r],a=t.srcCoords,o=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),h=2*u,f=c.left,d=c.top;o.push(f,d),l=l&&a&&f===a[h]&&d===a[h+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=o,t[r]=n?l4(s,o):l4(o,s))}function Fq(e){return e.nodeName.toUpperCase()==="CANVAS"}var Oft=/([&<>"'])/g,Nft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ti(e){return e==null?"":(e+"").replace(Oft,function(t,n){return Nft[n]})}var Bft=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Y2=[],kft=qe.browser.firefox&&+qe.browser.version.split(".")[0]<39;function eO(e,t,n,r){return n=n||{},r?c4(e,t,n):kft&&t.layerX!=null&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):t.offsetX!=null?(n.zrX=t.offsetX,n.zrY=t.offsetY):c4(e,t,n),n}function c4(e,t,n){if(qe.domSupported&&e.getBoundingClientRect){var r=t.clientX,i=t.clientY;if(Fq(e)){var a=e.getBoundingClientRect();n.zrX=r-a.left,n.zrY=i-a.top;return}else if(tO(Y2,e,r,i)){n.zrX=Y2[0],n.zrY=Y2[1];return}}n.zrX=n.zrY=0}function DB(e){return e||window.event}function gs(e,t,n){if(t=DB(t),t.zrX!=null)return t;var r=t.type,i=r&&r.indexOf("touch")>=0;if(i){var o=r!=="touchend"?t.targetTouches[0]:t.changedTouches[0];o&&eO(e,o,t,n)}else{eO(e,t,t,n);var a=Fft(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&Bft.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function Fft(e){var t=e.wheelDelta;if(t)return t;var n=e.deltaX,r=e.deltaY;if(n==null||r==null)return t;var i=Math.abs(r!==0?r:n),a=r>0?-1:r<0?1:n>0?-1:1;return 3*i*a}function nO(e,t,n,r){e.addEventListener(t,n,r)}function zft(e,t,n,r){e.removeEventListener(t,n,r)}var jc=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function h4(e){return e.which===2||e.which===3}var Uft=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,n,r){return this._doTrack(t,n,r),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,n,r){var i=t.touches;if(i){for(var a={points:[],touches:[],target:n,event:t},o=0,s=i.length;o<s;o++){var l=i[o],u=eO(r,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},e.prototype._recognize=function(t){for(var n in q2)if(q2.hasOwnProperty(n)){var r=q2[n](this._track,t);if(r)return r}},e}();function f4(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}function Vft(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var q2={pinch:function(e,t){var n=e.length;if(n){var r=(e[n-1]||{}).points,i=(e[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=f4(r)/f4(i);!isFinite(a)&&(a=1),t.pinchScale=a;var o=Vft(r);return t.pinchX=o[0],t.pinchY=o[1],{type:"pinch",target:e[0].target,event:t}}}}};function _o(){return[1,0,0,1,0,0]}function JC(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function IB(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Uc(e,t,n){var r=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],a=t[0]*n[2]+t[2]*n[3],o=t[1]*n[2]+t[3]*n[3],s=t[0]*n[4]+t[2]*n[5]+t[4],l=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e}function ku(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function Fv(e,t,n,r){r===void 0&&(r=[0,0]);var i=t[0],a=t[2],o=t[4],s=t[1],l=t[3],u=t[5],c=Math.sin(n),h=Math.cos(n);return e[0]=i*h+s*c,e[1]=-i*c+s*h,e[2]=a*h+l*c,e[3]=-a*c+h*l,e[4]=h*(o-r[0])+c*(u-r[1])+r[0],e[5]=h*(u-r[1])-c*(o-r[0])+r[1],e}function LB(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e}function zv(e,t){var n=t[0],r=t[2],i=t[4],a=t[1],o=t[3],s=t[5],l=n*o-a*r;return l?(l=1/l,e[0]=o*l,e[1]=-a*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-o*i)*l,e[5]=(a*i-n*s)*l,e):null}function Gft(e){var t=_o();return IB(t,e),t}var Me=function(){function e(t,n){this.x=t||0,this.y=n||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,n){return this.x=t,this.y=n,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,n){this.x+=t.x*n,this.y+=t.y*n},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var n=this.x-t.x,r=this.y-t.y;return Math.sqrt(n*n+r*r)},e.prototype.distanceSquare=function(t){var n=this.x-t.x,r=this.y-t.y;return n*n+r*r},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var n=this.x,r=this.y;return this.x=t[0]*n+t[2]*r+t[4],this.y=t[1]*n+t[3]*r+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,n,r){t.x=n,t.y=r},e.copy=function(t,n){t.x=n.x,t.y=n.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,n){return t.x*n.x+t.y*n.y},e.add=function(t,n,r){t.x=n.x+r.x,t.y=n.y+r.y},e.sub=function(t,n,r){t.x=n.x-r.x,t.y=n.y-r.y},e.scale=function(t,n,r){t.x=n.x*r,t.y=n.y*r},e.scaleAndAdd=function(t,n,r,i){t.x=n.x+r.x*i,t.y=n.y+r.y*i},e.lerp=function(t,n,r,i){var a=1-i;t.x=a*n.x+i*r.x,t.y=a*n.y+i*r.y},e}(),SS=Math.min,wS=Math.max,Ad=new Me,Cd=new Me,Ed=new Me,Dd=new Me,q0=new Me,K0=new Me,Ae=function(){function e(t,n,r,i){r<0&&(t=t+r,r=-r),i<0&&(n=n+i,i=-i),this.x=t,this.y=n,this.width=r,this.height=i}return e.prototype.union=function(t){var n=SS(t.x,this.x),r=SS(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=wS(t.x+t.width,this.x+this.width)-n:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=wS(t.y+t.height,this.y+this.height)-r:this.height=t.height,this.x=n,this.y=r},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var n=this,r=t.width/n.width,i=t.height/n.height,a=_o();return ku(a,a,[-n.x,-n.y]),LB(a,a,[r,i]),ku(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,n){if(!t)return!1;t instanceof e||(t=e.create(t));var r=this,i=r.x,a=r.x+r.width,o=r.y,s=r.y+r.height,l=t.x,u=t.x+t.width,c=t.y,h=t.y+t.height,f=!(a<l||u<i||s<c||h<o);if(n){var d=1/0,p=0,v=Math.abs(a-l),g=Math.abs(u-i),m=Math.abs(s-c),_=Math.abs(h-o),y=Math.min(v,g),x=Math.min(m,_);a<l||u<i?y>p&&(p=y,v<g?Me.set(K0,-v,0):Me.set(K0,g,0)):y<d&&(d=y,v<g?Me.set(q0,v,0):Me.set(q0,-g,0)),s<c||h<o?x>p&&(p=x,m<_?Me.set(K0,0,-m):Me.set(K0,0,_)):y<d&&(d=y,m<_?Me.set(q0,0,m):Me.set(q0,0,-_))}return n&&Me.copy(n,f?q0:K0),f},e.prototype.contain=function(t,n){var r=this;return t>=r.x&&t<=r.x+r.width&&n>=r.y&&n<=r.y+r.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,n){t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height},e.applyTransform=function(t,n,r){if(!r){t!==n&&e.copy(t,n);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],o=r[4],s=r[5];t.x=n.x*i+o,t.y=n.y*a+s,t.width=n.width*i,t.height=n.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Ad.x=Ed.x=n.x,Ad.y=Dd.y=n.y,Cd.x=Dd.x=n.x+n.width,Cd.y=Ed.y=n.y+n.height,Ad.transform(r),Dd.transform(r),Cd.transform(r),Ed.transform(r),t.x=SS(Ad.x,Cd.x,Ed.x,Dd.x),t.y=SS(Ad.y,Cd.y,Ed.y,Dd.y);var l=wS(Ad.x,Cd.x,Ed.x,Dd.x),u=wS(Ad.y,Cd.y,Ed.y,Dd.y);t.width=l-t.x,t.height=u-t.y},e}(),zq="silent";function Hft(e,t,n){return{type:e,event:n,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:Wft}}function Wft(){jc(this.event)}var $ft=function(e){gr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.handler=null,n}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(qs),Z0=function(){function e(t,n){this.x=t,this.y=n}return e}(),Xft=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],K2=new Ae(0,0,0,0),Uq=function(e){gr(t,e);function t(n,r,i,a,o){var s=e.call(this)||this;return s._hovered=new Z0(0,0),s.storage=n,s.painter=r,s.painterRoot=a,s._pointerSize=o,i=i||new $ft,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new Dft(s),s}return t.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(R(Xft,function(r){n.on&&n.on(r,this[r],this)},this),n.handler=this),this.proxy=n},t.prototype.mousemove=function(n){var r=n.zrX,i=n.zrY,a=Vq(this,r,i),o=this._hovered,s=o.target;s&&!s.__zr&&(o=this.findHover(o.x,o.y),s=o.target);var l=this._hovered=a?new Z0(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(o,"mouseout",n),this.dispatchToElement(l,"mousemove",n),u&&u!==s&&this.dispatchToElement(l,"mouseover",n)},t.prototype.mouseout=function(n){var r=n.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},t.prototype.resize=function(){this._hovered=new Z0(0,0)},t.prototype.dispatch=function(n,r){var i=this[n];i&&i.call(this,r)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(n){var r=this.proxy;r.setCursor&&r.setCursor(n)},t.prototype.dispatchToElement=function(n,r,i){n=n||{};var a=n.target;if(!(a&&a.silent)){for(var o="on"+r,s=Hft(r,n,i);a&&(a[o]&&(s.cancelBubble=!!a[o].call(a,s)),a.trigger(r,s),a=a.__hostTarget?a.__hostTarget:a.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(r,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[o]=="function"&&l[o].call(l,s),l.trigger&&l.trigger(r,s)}))}},t.prototype.findHover=function(n,r,i){var a=this.storage.getDisplayList(),o=new Z0(n,r);if(d4(a,o,n,r,i),this._pointerSize&&!o.target){for(var s=[],l=this._pointerSize,u=l/2,c=new Ae(n-u,r-u,l,l),h=a.length-1;h>=0;h--){var f=a[h];f!==i&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(K2.copy(f.getBoundingRect()),f.transform&&K2.applyTransform(f.transform),K2.intersect(c)&&s.push(f))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var _=n+g*Math.cos(m),y=r+g*Math.sin(m);if(d4(s,o,_,y,i),o.target)return o}}return o},t.prototype.processGesture=function(n,r){this._gestureMgr||(this._gestureMgr=new Uft);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var o=a.type;n.gestureEvent=o;var s=new Z0;s.target=a.target,this.dispatchToElement(s,o,a.event)}},t}(qs);R(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Uq.prototype[e]=function(t){var n=t.zrX,r=t.zrY,i=Vq(this,n,r),a,o;if((e!=="mouseup"||!i)&&(a=this.findHover(n,r),o=a.target),e==="mousedown")this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if(e==="mouseup")this._upEl=o;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||gf(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function jft(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var r=e,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var o=r.getClipPath();if(o&&!o.contain(t,n))return!1}r.silent&&(i=!0);var s=r.__hostTarget;r=s||r.parent}return i?zq:!0}return!1}function d4(e,t,n,r,i){for(var a=e.length-1;a>=0;a--){var o=e[a],s=void 0;if(o!==i&&!o.ignore&&(s=jft(o,n,r))&&(!t.topTarget&&(t.topTarget=o),s!==zq)){t.target=o;break}}}function Vq(e,t,n){var r=e.painter;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}var Gq=32,J0=7;function Yft(e){for(var t=0;e>=Gq;)t|=e&1,e>>=1;return e+t}function p4(e,t,n,r){var i=t+1;if(i===n)return 1;if(r(e[i++],e[t])<0){for(;i<n&&r(e[i],e[i-1])<0;)i++;qft(e,t,i)}else for(;i<n&&r(e[i],e[i-1])>=0;)i++;return i-t}function qft(e,t,n){for(n--;t<n;){var r=e[t];e[t++]=e[n],e[n--]=r}}function v4(e,t,n,r,i){for(r===t&&r++;r<n;r++){for(var a=e[r],o=t,s=r,l;o<s;)l=o+s>>>1,i(a,e[l])<0?s=l:o=l+1;var u=r-o;switch(u){case 3:e[o+3]=e[o+2];case 2:e[o+2]=e[o+1];case 1:e[o+1]=e[o];break;default:for(;u>0;)e[o+u]=e[o+u-1],u--}e[o]=a}}function Z2(e,t,n,r,i,a){var o=0,s=0,l=1;if(a(e,t[n+i])>0){for(s=r-i;l<s&&a(e,t[n+i+l])>0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}else{for(s=i+1;l<s&&a(e,t[n+i-l])<=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}for(o++;o<l;){var c=o+(l-o>>>1);a(e,t[n+c])>0?o=c+1:l=c}return l}function J2(e,t,n,r,i,a){var o=0,s=0,l=1;if(a(e,t[n+i])<0){for(s=i+1;l<s&&a(e,t[n+i-l])<0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=o;o=i-l,l=i-u}else{for(s=r-i;l<s&&a(e,t[n+i+l])>=0;)o=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),o+=i,l+=i}for(o++;o<l;){var c=o+(l-o>>>1);a(e,t[n+c])<0?l=c:o=c+1}return l}function Kft(e,t){var n=J0,r,i,a=0,o=[];r=[],i=[];function s(d,p){r[a]=d,i[a]=p,a+=1}function l(){for(;a>1;){var d=a-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;a>1;){var d=a-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=r[d],v=i[d],g=r[d+1],m=i[d+1];i[d]=v+m,d===a-3&&(r[d+1]=r[d+2],i[d+1]=i[d+2]),a--;var _=J2(e[g],e,p,v,0,t);p+=_,v-=_,v!==0&&(m=Z2(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?h(p,v,g,m):f(p,v,g,m)))}function h(d,p,v,g){var m=0;for(m=0;m<p;m++)o[m]=e[d+m];var _=0,y=v,x=d;if(e[x++]=e[y++],--g===0){for(m=0;m<p;m++)e[x+m]=o[_+m];return}if(p===1){for(m=0;m<g;m++)e[x+m]=e[y+m];e[x+g]=o[_];return}for(var S=n,b,w,A;;){b=0,w=0,A=!1;do if(t(e[y],o[_])<0){if(e[x++]=e[y++],w++,b=0,--g===0){A=!0;break}}else if(e[x++]=o[_++],b++,w=0,--p===1){A=!0;break}while((b|w)<S);if(A)break;do{if(b=J2(e[y],o,_,p,0,t),b!==0){for(m=0;m<b;m++)e[x+m]=o[_+m];if(x+=b,_+=b,p-=b,p<=1){A=!0;break}}if(e[x++]=e[y++],--g===0){A=!0;break}if(w=Z2(o[_],e,y,g,0,t),w!==0){for(m=0;m<w;m++)e[x+m]=e[y+m];if(x+=w,y+=w,g-=w,g===0){A=!0;break}}if(e[x++]=o[_++],--p===1){A=!0;break}S--}while(b>=J0||w>=J0);if(A)break;S<0&&(S=0),S+=2}if(n=S,n<1&&(n=1),p===1){for(m=0;m<g;m++)e[x+m]=e[y+m];e[x+g]=o[_]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[x+m]=o[_+m]}}function f(d,p,v,g){var m=0;for(m=0;m<g;m++)o[m]=e[v+m];var _=d+p-1,y=g-1,x=v+g-1,S=0,b=0;if(e[x--]=e[_--],--p===0){for(S=x-(g-1),m=0;m<g;m++)e[S+m]=o[m];return}if(g===1){for(x-=p,_-=p,b=x+1,S=_+1,m=p-1;m>=0;m--)e[b+m]=e[S+m];e[x]=o[y];return}for(var w=n;;){var A=0,T=0,M=!1;do if(t(o[y],e[_])<0){if(e[x--]=e[_--],A++,T=0,--p===0){M=!0;break}}else if(e[x--]=o[y--],T++,A=0,--g===1){M=!0;break}while((A|T)<w);if(M)break;do{if(A=p-J2(o[y],e,d,p,p-1,t),A!==0){for(x-=A,_-=A,p-=A,b=x+1,S=_+1,m=A-1;m>=0;m--)e[b+m]=e[S+m];if(p===0){M=!0;break}}if(e[x--]=o[y--],--g===1){M=!0;break}if(T=g-Z2(e[_],o,0,g,g-1,t),T!==0){for(x-=T,y-=T,g-=T,b=x+1,S=y+1,m=0;m<T;m++)e[b+m]=o[S+m];if(g<=1){M=!0;break}}if(e[x--]=e[_--],--p===0){M=!0;break}w--}while(A>=J0||T>=J0);if(M)break;w<0&&(w=0),w+=2}if(n=w,n<1&&(n=1),g===1){for(x-=p,_-=p,b=x+1,S=_+1,m=p-1;m>=0;m--)e[b+m]=e[S+m];e[x]=o[y]}else{if(g===0)throw new Error;for(S=x-(g-1),m=0;m<g;m++)e[S+m]=o[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function WT(e,t,n,r){n||(n=0),r||(r=e.length);var i=r-n;if(!(i<2)){var a=0;if(i<Gq){a=p4(e,n,r,t),v4(e,n,r,n+a,t);return}var o=Kft(e,t),s=Yft(i);do{if(a=p4(e,n,r,t),a<s){var l=i;l>s&&(l=s),v4(e,n,n+l,n+a,t),a=l}o.pushRun(n,a),o.mergeRuns(),i-=a,n+=a}while(i!==0);o.forceMergeRuns()}}var jo=1,Z_=2,em=4,g4=!1;function Q2(){g4||(g4=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function m4(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var Zft=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=m4}return e.prototype.traverse=function(t,n){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(t,n)},e.prototype.getDisplayList=function(t,n){n=n||!1;var r=this._displayList;return(t||!r.length)&&this.updateDisplayList(n),r},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var n=this._roots,r=this._displayList,i=0,a=n.length;i<a;i++)this._updateAndAddDisplayable(n[i],null,t);r.length=this._displayListLen,WT(r,m4)},e.prototype._updateAndAddDisplayable=function(t,n,r){if(!(t.ignore&&!r)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)n=null;else if(i){n?n=n.slice():n=[];for(var a=i,o=t;a;)a.parent=o,a.updateTransform(),n.push(a),o=a,a=a.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=jo),this._updateAndAddDisplayable(u,n,r)}t.__dirty=0}else{var c=t;n&&n.length?c.__clipPaths=n:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Q2(),c.z=0),isNaN(c.z2)&&(Q2(),c.z2=0),isNaN(c.zlevel)&&(Q2(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var h=t.getDecalElement&&t.getDecalElement();h&&this._updateAndAddDisplayable(h,n,r);var f=t.getTextGuideLine();f&&this._updateAndAddDisplayable(f,n,r);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,n,r)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var n=0,r=t.length;n<r;n++)this.delRoot(t[n]);return}var i=Le(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}(),cv;cv=qe.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};var Cx={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)))},elasticOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/r)+1)},elasticInOut:function(e){var t,n=.1,r=.4;return e===0?0:e===1?1:(!n||n<1?(n=1,t=r/4):t=r*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)):n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/r)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Cx.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Cx.bounceIn(e*2)*.5:Cx.bounceOut(e*2-1)*.5+.5}},TS=Math.pow,Df=Math.sqrt,NM=1e-8,Hq=1e-4,y4=Df(3),MS=1/3,fu=kv(),bs=kv(),Lm=kv();function _f(e){return e>-NM&&e<NM}function Wq(e){return e>NM||e<-NM}function Si(e,t,n,r,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*r+3*a*n)}function _4(e,t,n,r,i){var a=1-i;return 3*(((t-e)*a+2*(n-t)*i)*a+(r-n)*i*i)}function BM(e,t,n,r,i,a){var o=r+3*(t-n)-e,s=3*(n-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*o*l,h=s*l-9*o*u,f=l*l-3*s*u,d=0;if(_f(c)&&_f(h))if(_f(s))a[0]=0;else{var p=-l/s;p>=0&&p<=1&&(a[d++]=p)}else{var v=h*h-4*c*f;if(_f(v)){var g=h/c,p=-s/o+g,m=-g/2;p>=0&&p<=1&&(a[d++]=p),m>=0&&m<=1&&(a[d++]=m)}else if(v>0){var _=Df(v),y=c*s+1.5*o*(-h+_),x=c*s+1.5*o*(-h-_);y<0?y=-TS(-y,MS):y=TS(y,MS),x<0?x=-TS(-x,MS):x=TS(x,MS);var p=(-s-(y+x))/(3*o);p>=0&&p<=1&&(a[d++]=p)}else{var S=(2*c*s-3*o*h)/(2*Df(c*c*c)),b=Math.acos(S)/3,w=Df(c),A=Math.cos(b),p=(-s-2*w*A)/(3*o),m=(-s+w*(A+y4*Math.sin(b)))/(3*o),T=(-s+w*(A-y4*Math.sin(b)))/(3*o);p>=0&&p<=1&&(a[d++]=p),m>=0&&m<=1&&(a[d++]=m),T>=0&&T<=1&&(a[d++]=T)}}return d}function $q(e,t,n,r,i){var a=6*n-12*t+6*e,o=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(_f(o)){if(Wq(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(_f(c))i[0]=-a/(2*o);else if(c>0){var h=Df(c),u=(-a+h)/(2*o),f=(-a-h)/(2*o);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function zf(e,t,n,r,i,a){var o=(t-e)*i+e,s=(n-t)*i+t,l=(r-n)*i+n,u=(s-o)*i+o,c=(l-s)*i+s,h=(c-u)*i+u;a[0]=e,a[1]=o,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=r}function Xq(e,t,n,r,i,a,o,s,l,u,c){var h,f=.005,d=1/0,p,v,g,m;fu[0]=l,fu[1]=u;for(var _=0;_<1;_+=.05)bs[0]=Si(e,n,i,o,_),bs[1]=Si(t,r,a,s,_),g=qp(fu,bs),g<d&&(h=_,d=g);d=1/0;for(var y=0;y<32&&!(f<Hq);y++)p=h-f,v=h+f,bs[0]=Si(e,n,i,o,p),bs[1]=Si(t,r,a,s,p),g=qp(bs,fu),p>=0&&g<d?(h=p,d=g):(Lm[0]=Si(e,n,i,o,v),Lm[1]=Si(t,r,a,s,v),m=qp(Lm,fu),v<=1&&m<d?(h=v,d=m):f*=.5);return c&&(c[0]=Si(e,n,i,o,h),c[1]=Si(t,r,a,s,h)),Df(d)}function Jft(e,t,n,r,i,a,o,s,l){for(var u=e,c=t,h=0,f=1/l,d=1;d<=l;d++){var p=d*f,v=Si(e,n,i,o,p),g=Si(t,r,a,s,p),m=v-u,_=g-c;h+=Math.sqrt(m*m+_*_),u=v,c=g}return h}function Ki(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}function rO(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}function Qft(e,t,n,r,i){var a=e-2*t+n,o=2*(t-e),s=e-r,l=0;if(_f(a)){if(Wq(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(_f(c)){var u=-o/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var h=Df(c),u=(-o+h)/(2*a),f=(-o-h)/(2*a);u>=0&&u<=1&&(i[l++]=u),f>=0&&f<=1&&(i[l++]=f)}}return l}function jq(e,t,n){var r=e+n-2*t;return r===0?.5:(e-t)/r}function ib(e,t,n,r,i){var a=(t-e)*r+e,o=(n-t)*r+t,s=(o-a)*r+a;i[0]=e,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function Yq(e,t,n,r,i,a,o,s,l){var u,c=.005,h=1/0;fu[0]=o,fu[1]=s;for(var f=0;f<1;f+=.05){bs[0]=Ki(e,n,i,f),bs[1]=Ki(t,r,a,f);var d=qp(fu,bs);d<h&&(u=f,h=d)}h=1/0;for(var p=0;p<32&&!(c<Hq);p++){var v=u-c,g=u+c;bs[0]=Ki(e,n,i,v),bs[1]=Ki(t,r,a,v);var d=qp(bs,fu);if(v>=0&&d<h)u=v,h=d;else{Lm[0]=Ki(e,n,i,g),Lm[1]=Ki(t,r,a,g);var m=qp(Lm,fu);g<=1&&m<h?(u=g,h=m):c*=.5}}return l&&(l[0]=Ki(e,n,i,u),l[1]=Ki(t,r,a,u)),Df(h)}function tdt(e,t,n,r,i,a,o){for(var s=e,l=t,u=0,c=1/o,h=1;h<=o;h++){var f=h*c,d=Ki(e,n,i,f),p=Ki(t,r,a,f),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var edt=/cubic-bezier\(([0-9,\.e ]+)\)/;function PB(e){var t=e&&edt.exec(e);if(t){var n=t[1].split(","),r=+Sl(n[0]),i=+Sl(n[1]),a=+Sl(n[2]),o=+Sl(n[3]);if(isNaN(r+i+a+o))return;var s=[];return function(l){return l<=0?0:l>=1?1:BM(0,r,a,1,l,s)&&Si(0,i,o,1,s[0])}}}var ndt=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Zr,this.ondestroy=t.ondestroy||Zr,this.onrestart=t.onrestart||Zr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,n){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var r=this._life,i=t-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var o=this.easingFunc,s=o?o(a):a;if(this.onframe(s),a===1)if(this.loop){var l=i%r;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=ae(t)?t:Cx[t]||PB(t)},e}(),qq=function(){function e(t){this.value=t}return e}(),rdt=function(){function e(){this._len=0}return e.prototype.insert=function(t){var n=new qq(t);return this.insertEntry(n),n},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var n=t.prev,r=t.next;n?n.next=r:this.head=r,r?r.prev=n:this.tail=n,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),t0=function(){function e(t){this._list=new rdt,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,n){var r=this._list,i=this._map,a=null;if(i[t]==null){var o=r.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}s?s.value=n:s=new qq(n),s.key=t,r.insertEntry(s),i[t]=s}return a},e.prototype.get=function(t){var n=this._map[t],r=this._list;if(n!=null)return n!==r.tail&&(r.remove(n),r.insertEntry(n)),n.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}(),x4={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Al(e){return e=Math.round(e),e<0?0:e>255?255:e}function idt(e){return e=Math.round(e),e<0?0:e>360?360:e}function ab(e){return e<0?0:e>1?1:e}function tD(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Al(parseFloat(t)/100*255):Al(parseInt(t,10))}function Kp(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?ab(parseFloat(t)/100):ab(parseFloat(t))}function eD(e,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function xf(e,t,n){return e+(t-e)*n}function ds(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function iO(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var Kq=new t0(20),AS=null;function Jv(e,t){AS&&iO(AS,t),AS=Kq.put(e,AS||t.slice())}function Va(e,t){if(e){t=t||[];var n=Kq.get(e);if(n)return iO(t,n);e=e+"";var r=e.replace(/ /g,"").toLowerCase();if(r in x4)return iO(t,x4[r]),Jv(e,t),t;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){ds(t,0,0,0,1);return}return ds(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),Jv(e,t),t}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){ds(t,0,0,0,1);return}return ds(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),Jv(e,t),t}return}var o=r.indexOf("("),s=r.indexOf(")");if(o!==-1&&s+1===i){var l=r.substr(0,o),u=r.substr(o+1,s-(o+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?ds(t,+u[0],+u[1],+u[2],1):ds(t,0,0,0,1);c=Kp(u.pop());case"rgb":if(u.length>=3)return ds(t,tD(u[0]),tD(u[1]),tD(u[2]),u.length===3?c:Kp(u[3])),Jv(e,t),t;ds(t,0,0,0,1);return;case"hsla":if(u.length!==4){ds(t,0,0,0,1);return}return u[3]=Kp(u[3]),aO(u,t),Jv(e,t),t;case"hsl":if(u.length!==3){ds(t,0,0,0,1);return}return aO(u,t),Jv(e,t),t;default:return}}ds(t,0,0,0,1)}}function aO(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=Kp(e[1]),i=Kp(e[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return t=t||[],ds(t,Al(eD(o,a,n+1/3)*255),Al(eD(o,a,n)*255),Al(eD(o,a,n-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function adt(e){if(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-t)/6+o/2)/o,h=((a-n)/6+o/2)/o,f=((a-r)/6+o/2)/o;t===a?l=f-h:n===a?l=1/3+c-f:r===a&&(l=2/3+h-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function oy(e,t){var n=Va(e);if(n){for(var r=0;r<3;r++)t<0?n[r]=n[r]*(1-t)|0:n[r]=(255-n[r])*t+n[r]|0,n[r]>255?n[r]=255:n[r]<0&&(n[r]=0);return Vc(n,n.length===4?"rgba":"rgb")}}function nD(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){n=n||[];var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=t[i],s=t[a],l=r-i;return n[0]=Al(xf(o[0],s[0],l)),n[1]=Al(xf(o[1],s[1],l)),n[2]=Al(xf(o[2],s[2],l)),n[3]=ab(xf(o[3],s[3],l)),n}}function odt(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=Va(t[i]),s=Va(t[a]),l=r-i,u=Vc([Al(xf(o[0],s[0],l)),Al(xf(o[1],s[1],l)),Al(xf(o[2],s[2],l)),ab(xf(o[3],s[3],l))],"rgba");return n?{color:u,leftIndex:i,rightIndex:a,value:r}:u}}function Ex(e,t,n,r){var i=Va(e);if(e)return i=adt(i),t!=null&&(i[0]=idt(t)),n!=null&&(i[1]=Kp(n)),r!=null&&(i[2]=Kp(r)),Vc(aO(i),"rgba")}function kM(e,t){var n=Va(e);if(n&&t!=null)return n[3]=ab(t),Vc(n,"rgba")}function Vc(e,t){if(!(!e||!e.length)){var n=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(n+=","+e[3]),t+"("+n+")"}}function FM(e,t){var n=Va(e);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*t:0}var b4=new t0(100);function oO(e){if(Ft(e)){var t=b4.get(e);return t||(t=oy(e,-.1),b4.put(e,t)),t}else if(KC(e)){var n=ut({},e);return n.colorStops=yt(e.colorStops,function(r){return{offset:r.offset,color:oy(r.color,-.1)}}),n}return e}var zM=Math.round;function ob(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var n=Va(e);n&&(e="rgb("+n[0]+","+n[1]+","+n[2]+")",t=n[3])}return{color:e,opacity:t??1}}var S4=1e-4;function bf(e){return e<S4&&e>-S4}function CS(e){return zM(e*1e3)/1e3}function sO(e){return zM(e*1e4)/1e4}function sdt(e){return"matrix("+CS(e[0])+","+CS(e[1])+","+CS(e[2])+","+CS(e[3])+","+sO(e[4])+","+sO(e[5])+")"}var ldt={left:"start",right:"end",center:"middle",middle:"middle"};function udt(e,t,n){return n==="top"?e+=t/2:n==="bottom"&&(e-=t/2),e}function cdt(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function hdt(e){var t=e.style,n=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function Zq(e){return e&&!!e.image}function fdt(e){return e&&!!e.svgElement}function RB(e){return Zq(e)||fdt(e)}function Jq(e){return e.type==="linear"}function Qq(e){return e.type==="radial"}function tK(e){return e&&(e.type==="linear"||e.type==="radial")}function QC(e){return"url(#"+e+")"}function eK(e){var t=e.getGlobalScale(),n=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function nK(e){var t=e.x||0,n=e.y||0,r=(e.rotation||0)*VT,i=xe(e.scaleX,1),a=xe(e.scaleY,1),o=e.skewX||0,s=e.skewY||0,l=[];return(t||n)&&l.push("translate("+t+"px,"+n+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(o||s)&&l.push("skew("+zM(o*VT)+"deg, "+zM(s*VT)+"deg)"),l.join(" ")}var ddt=function(){return qe.hasGlobalWindow&&ae(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),lO=Array.prototype.slice;function bc(e,t,n){return(t-e)*n+e}function rD(e,t,n,r){for(var i=t.length,a=0;a<i;a++)e[a]=bc(t[a],n[a],r);return e}function pdt(e,t,n,r){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=bc(t[o][s],n[o][s],r)}return e}function ES(e,t,n,r){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+n[a]*r;return e}function w4(e,t,n,r){for(var i=t.length,a=i&&t[0].length,o=0;o<i;o++){e[o]||(e[o]=[]);for(var s=0;s<a;s++)e[o][s]=t[o][s]+n[o][s]*r}return e}function vdt(e,t){for(var n=e.length,r=t.length,i=n>r?t:e,a=Math.min(n,r),o=i[a-1]||{color:[0,0,0,0],offset:0},s=a;s<Math.max(n,r);s++)i.push({offset:o.offset,color:o.color.slice()})}function gdt(e,t,n){var r=e,i=t;if(!(!r.push||!i.push)){var a=r.length,o=i.length;if(a!==o){var s=a>o;if(s)r.length=o;else for(var l=a;l<o;l++)r.push(n===1?i[l]:lO.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(n===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function Dx(e){if(Aa(e)){var t=e.length;if(Aa(e[0])){for(var n=[],r=0;r<t;r++)n.push(lO.call(e[r]));return n}return lO.call(e)}return e}function $T(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function mdt(e){return Aa(e&&e[0])?2:1}var DS=0,XT=1,rK=2,J_=3,uO=4,cO=5,T4=6;function M4(e){return e===uO||e===cO}function IS(e){return e===XT||e===rK}var Q0=[0,0,0,0],ydt=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,n,r){this._needsSort=!0;var i=this.keyframes,a=i.length,o=!1,s=T4,l=n;if(Aa(n)){var u=mdt(n);s=u,(u===1&&!xn(n[0])||u===2&&!xn(n[0][0]))&&(o=!0)}else if(xn(n)&&!rb(n))s=DS;else if(Ft(n))if(!isNaN(+n))s=DS;else{var c=Va(n);c&&(l=c,s=J_)}else if(KC(n)){var h=ut({},l);h.colorStops=yt(n.colorStops,function(d){return{offset:d.offset,color:Va(d.color)}}),Jq(n)?s=uO:Qq(n)&&(s=cO),l=h}a===0?this.valType=s:(s!==this.valType||s===T4)&&(o=!0),this.discrete=this.discrete||o;var f={time:t,value:l,rawValue:n,percent:0};return r&&(f.easing=r,f.easingFunc=ae(r)?r:Cx[r]||PB(r)),i.push(f),f},e.prototype.prepare=function(t,n){var r=this.keyframes;this._needsSort&&r.sort(function(v,g){return v.time-g.time});for(var i=this.valType,a=r.length,o=r[a-1],s=this.discrete,l=IS(i),u=M4(i),c=0;c<a;c++){var h=r[c],f=h.value,d=o.value;h.percent=h.time/t,s||(l&&c!==a-1?gdt(f,d,i):u&&vdt(f.colorStops,d.colorStops))}if(!s&&i!==cO&&n&&this.needsAnimate()&&n.needsAnimate()&&i===n.valType&&!n._finished){this._additiveTrack=n;for(var p=r[0].value,c=0;c<a;c++)i===DS?r[c].additiveValue=r[c].value-p:i===J_?r[c].additiveValue=ES([],r[c].value,p,-1):IS(i)&&(r[c].additiveValue=i===XT?ES([],r[c].value,p,-1):w4([],r[c].value,p,-1))}},e.prototype.step=function(t,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,o=this.keyframes,s=o.length,l=this.propName,u=a===J_,c,h=this._lastFr,f=Math.min,d,p;if(s===1)d=p=o[0];else{if(n<0)c=0;else if(n<this._lastFrP){var v=f(h+1,s-1);for(c=v;c>=0&&!(o[c].percent<=n);c--);c=f(c,s-2)}else{for(c=h;c<s&&!(o[c].percent>n);c++);c=f(c-1,s-2)}p=o[c+1],d=o[c]}if(d&&p){this._lastFr=c,this._lastFrP=n;var g=p.percent-d.percent,m=g===0?1:f((n-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var _=r?this._additiveValue:u?Q0:t[l];if((IS(a)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(IS(a))a===XT?rD(_,d[i],p[i],m):pdt(_,d[i],p[i],m);else if(M4(a)){var y=d[i],x=p[i],S=a===uO;t[l]={type:S?"linear":"radial",x:bc(y.x,x.x,m),y:bc(y.y,x.y,m),colorStops:yt(y.colorStops,function(w,A){var T=x.colorStops[A];return{offset:bc(w.offset,T.offset,m),color:$T(rD([],w.color,T.color,m))}}),global:x.global},S?(t[l].x2=bc(y.x2,x.x2,m),t[l].y2=bc(y.y2,x.y2,m)):t[l].r=bc(y.r,x.r,m)}else if(u)rD(_,d[i],p[i],m),r||(t[l]=$T(_));else{var b=bc(d[i],p[i],m);r?this._additiveValue=b:t[l]=b}r&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var n=this.valType,r=this.propName,i=this._additiveValue;n===DS?t[r]=t[r]+i:n===J_?(Va(t[r],Q0),ES(Q0,Q0,i,1),t[r]=$T(Q0)):n===XT?ES(t[r],t[r],i,1):n===rK&&w4(t[r],t[r],i,1)},e}(),tE=function(){function e(t,n,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=n,n&&i){TB("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,n,r){return this.whenWithKeys(t,n,Je(n),r)},e.prototype.whenWithKeys=function(t,n,r,i){for(var a=this._tracks,o=0;o<r.length;o++){var s=r[o],l=a[s];if(!l){l=a[s]=new ydt(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var h=c.keyframes,f=h[h.length-1];u=f&&f.value,c.valType===J_&&u&&(u=$T(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,Dx(u),i),this._trackKeys.push(s)}l.addKeyframe(t,Dx(n[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var n=t.length,r=0;r<n;r++)t[r].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,n=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,n)for(var r=0;r<n.length;r++)n[r].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,n=this._trackKeys,r=0;r<n.length;r++)t[n[r]].setFinished()},e.prototype._getAdditiveTrack=function(t){var n,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(t);a&&(n=a)}return n},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var n=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var o=this._trackKeys[a],s=this._tracks[o],l=this._getAdditiveTrack(o),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var h=u[c-1];h&&(n._target[s.propName]=h.rawValue),s.setFinished()}else r.push(s)}if(r.length||this._force){var f=new ndt({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){n._started=2;var p=n._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(n._additiveAnimators=null)}for(var g=0;g<r.length;g++)r[g].step(n._target,d);var m=n._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](n._target,d)},ondestroy:function(){n._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),t&&f.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var n=this._clip;t&&n.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return yt(this._trackKeys,function(n){return t._tracks[n]})},e.prototype.stopTracks=function(t,n){if(!t.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var o=r[t[a]];o&&!o.isFinished()&&(n?o.step(this._target,1):this._started===1&&o.step(this._target,0),o.setFinished())}for(var s=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,n,r){if(t){n=n||this._trackKeys;for(var i=0;i<n.length;i++){var a=n[i],o=this._tracks[a];if(!(!o||o.isFinished())){var s=o.keyframes,l=s[r?0:s.length-1];l&&(t[a]=Dx(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,n){n=n||Je(t);for(var r=0;r<n.length;r++){var i=n[r],a=this._tracks[i];if(a){var o=a.keyframes;if(o.length>1){var s=o.pop();a.addKeyframe(s.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();function pm(){return new Date().getTime()}var _dt=function(e){gr(t,e);function t(n){var r=e.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,n=n||{},r.stage=n.stage||{},r}return t.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},t.prototype.addAnimator=function(n){n.animation=this;var r=n.getClip();r&&this.addClip(r)},t.prototype.removeClip=function(n){if(n.animation){var r=n.prev,i=n.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,n.next=n.prev=n.animation=null}},t.prototype.removeAnimator=function(n){var r=n.getClip();r&&this.removeClip(r),n.animation=null},t.prototype.update=function(n){for(var r=pm()-this._pausedTime,i=r-this._time,a=this._head;a;){var o=a.next,s=a.step(r,i);s&&(a.ondestroy(),this.removeClip(a)),a=o}this._time=r,n||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var n=this;this._running=!0;function r(){n._running&&(cv(r),!n._paused&&n.update())}cv(r)},t.prototype.start=function(){this._running||(this._time=pm(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=pm(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=pm()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var n=this._head;n;){var r=n.next;n.prev=n.next=n.animation=null,n=r}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(n,r){r=r||{},this.start();var i=new tE(n,r.loop);return this.addAnimator(i),i},t}(qs),xdt=300,iD=qe.domSupported,aD=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=yt(e,function(i){var a=i.replace("mouse","pointer");return n.hasOwnProperty(a)?a:i});return{mouse:e,touch:t,pointer:r}}(),A4={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},C4=!1;function hO(e){var t=e.pointerType;return t==="pen"||t==="touch"}function bdt(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function oD(e){e&&(e.zrByTouch=!0)}function Sdt(e,t){return gs(e.dom,new wdt(e,t),!0)}function iK(e,t){for(var n=t,r=!1;n&&n.nodeType!==9&&!(r=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return r}var wdt=function(){function e(t,n){this.stopPropagation=Zr,this.stopImmediatePropagation=Zr,this.preventDefault=Zr,this.type=n.type,this.target=this.currentTarget=t.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return e}(),hl={mousedown:function(e){e=gs(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=gs(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=gs(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=gs(this.dom,e);var t=e.toElement||e.relatedTarget;iK(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){C4=!0,e=gs(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){C4||(e=gs(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=gs(this.dom,e),oD(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),hl.mousemove.call(this,e),hl.mousedown.call(this,e)},touchmove:function(e){e=gs(this.dom,e),oD(e),this.handler.processGesture(e,"change"),hl.mousemove.call(this,e)},touchend:function(e){e=gs(this.dom,e),oD(e),this.handler.processGesture(e,"end"),hl.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<xdt&&hl.click.call(this,e)},pointerdown:function(e){hl.mousedown.call(this,e)},pointermove:function(e){hO(e)||hl.mousemove.call(this,e)},pointerup:function(e){hl.mouseup.call(this,e)},pointerout:function(e){hO(e)||hl.mouseout.call(this,e)}};R(["click","dblclick","contextmenu"],function(e){hl[e]=function(t){t=gs(this.dom,t),this.trigger(e,t)}});var fO={pointermove:function(e){hO(e)||fO.mousemove.call(this,e)},pointerup:function(e){fO.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Tdt(e,t){var n=t.domHandlers;qe.pointerEventsSupported?R(aD.pointer,function(r){jT(t,r,function(i){n[r].call(e,i)})}):(qe.touchEventsSupported&&R(aD.touch,function(r){jT(t,r,function(i){n[r].call(e,i),bdt(t)})}),R(aD.mouse,function(r){jT(t,r,function(i){i=DB(i),t.touching||n[r].call(e,i)})}))}function Mdt(e,t){qe.pointerEventsSupported?R(A4.pointer,n):qe.touchEventsSupported||R(A4.mouse,n);function n(r){function i(a){a=DB(a),iK(e,a.target)||(a=Sdt(e,a),t.domHandlers[r].call(e,a))}jT(t,r,i,{capture:!0})}}function jT(e,t,n,r){e.mounted[t]=n,e.listenerOpts[t]=r,nO(e.domTarget,t,n,r)}function sD(e){var t=e.mounted;for(var n in t)t.hasOwnProperty(n)&&zft(e.domTarget,n,t[n],e.listenerOpts[n]);e.mounted={}}var E4=function(){function e(t,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=n}return e}(),Adt=function(e){gr(t,e);function t(n,r){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=n,i.painterRoot=r,i._localHandlerScope=new E4(n,hl),iD&&(i._globalHandlerScope=new E4(document,fO)),Tdt(i,i._localHandlerScope),i}return t.prototype.dispose=function(){sD(this._localHandlerScope),iD&&sD(this._globalHandlerScope)},t.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},t.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,iD&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var r=this._globalHandlerScope;n?Mdt(this,r):sD(r)}},t}(qs),aK=1;qe.hasGlobalWindow&&(aK=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var UM=aK,dO=.4,pO="#333",vO="#ccc",Cdt="#eee",D4=JC,I4=5e-5;function Id(e){return e>I4||e<-I4}var Ld=[],Qv=[],lD=_o(),uD=Math.abs,Oc=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Id(this.rotation)||Id(this.x)||Id(this.y)||Id(this.scaleX-1)||Id(this.scaleY-1)||Id(this.skewX)||Id(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,n=this.needLocalTransform(),r=this.transform;if(!(n||t)){r&&(D4(r),this.invTransform=null);return}r=r||_o(),n?this.getLocalTransform(r):D4(r),t&&(n?Uc(r,t,r):IB(r,t)),this.transform=r,this._resolveGlobalScaleRatio(r)},e.prototype._resolveGlobalScaleRatio=function(t){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(Ld);var r=Ld[0]<0?-1:1,i=Ld[1]<0?-1:1,a=((Ld[0]-r)*n+r)/Ld[0]||0,o=((Ld[1]-i)*n+i)/Ld[1]||0;t[0]*=a,t[1]*=a,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||_o(),zv(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,n=[];t;)n.push(t),t=t.parent;for(;t=n.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var n=t[0]*t[0]+t[1]*t[1],r=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);r=Math.sqrt(r)*Math.cos(a),n=Math.sqrt(n),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=n,this.scaleY=r,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,n=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||_o(),Uc(Qv,t.invTransform,n),n=Qv);var r=this.originX,i=this.originY;(r||i)&&(lD[4]=r,lD[5]=i,Uc(Qv,n,lD),Qv[4]-=r,Qv[5]-=i,n=Qv),this.setLocalTransform(n)}},e.prototype.getGlobalScale=function(t){var n=this.transform;return t=t||[],n?(t[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),t[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(t[0]=-t[0]),n[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,n){var r=[t,n],i=this.invTransform;return i&&Oi(r,r,i),r},e.prototype.transformCoordToGlobal=function(t,n){var r=[t,n],i=this.transform;return i&&Oi(r,r,i),r},e.prototype.getLineScale=function(){var t=this.transform;return t&&uD(t[0]-1)>1e-10&&uD(t[3]-1)>1e-10?Math.sqrt(uD(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){oK(this,t)},e.getLocalTransform=function(t,n){n=n||[];var r=t.originX||0,i=t.originY||0,a=t.scaleX,o=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,h=t.y,f=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(r||i||s||l){var p=r+s,v=i+l;n[4]=-p*a-f*v*o,n[5]=-v*o-d*p*a}else n[4]=n[5]=0;return n[0]=a,n[3]=o,n[1]=d*a,n[2]=f*o,u&&Fv(n,n,u),n[4]+=r+c,n[5]+=i+h,n},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Fu=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function oK(e,t){for(var n=0;n<Fu.length;n++){var r=Fu[n];e[r]=t[r]}}var L4={};function qo(e,t){t=t||kf;var n=L4[t];n||(n=L4[t]=new t0(500));var r=n.get(e);return r==null&&(r=Ff.measureText(e,t).width,n.put(e,r)),r}function P4(e,t,n,r){var i=qo(e,t),a=eE(t),o=Q_(0,i,n),s=nm(0,a,r),l=new Ae(o,s,i,a);return l}function v1(e,t,n,r){var i=((e||"")+"").split(`
`),a=i.length;if(a===1)return P4(i[0],t,n,r);for(var o=new Ae(0,0,0,0),s=0;s<i.length;s++){var l=P4(i[s],t,n,r);s===0?o.copy(l):o.union(l)}return o}function Q_(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function nm(e,t,n){return n==="middle"?e-=t/2:n==="bottom"&&(e-=t),e}function eE(e){return qo("",e)}function Rl(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function VM(e,t,n){var r=t.position||"inside",i=t.distance!=null?t.distance:5,a=n.height,o=n.width,s=a/2,l=n.x,u=n.y,c="left",h="top";if(r instanceof Array)l+=Rl(r[0],n.width),u+=Rl(r[1],n.height),c=null,h=null;else switch(r){case"left":l-=i,u+=s,c="right",h="middle";break;case"right":l+=i+o,u+=s,h="middle";break;case"top":l+=o/2,u-=i,c="center",h="bottom";break;case"bottom":l+=o/2,u+=a+i,c="center";break;case"inside":l+=o/2,u+=s,c="center",h="middle";break;case"insideLeft":l+=i,u+=s,h="middle";break;case"insideRight":l+=o-i,u+=s,c="right",h="middle";break;case"insideTop":l+=o/2,u+=i,c="center";break;case"insideBottom":l+=o/2,u+=a-i,c="center",h="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=o-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,h="bottom";break;case"insideBottomRight":l+=o-i,u+=a-i,c="right",h="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=h,e}var cD="__zr_normal__",hD=Fu.concat(["ignore"]),Edt=Pl(Fu,function(e,t){return e[t]=!0,e},{ignore:!1}),tg={},Ddt=new Ae(0,0,0,0),nE=function(){function e(t){this.id=Oq(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,n,r){switch(this.draggable){case"horizontal":n=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=n,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var n=this._textContent;if(n&&(!n.ignore||t)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=n.innerTransformable,o=void 0,s=void 0,l=!1;a.parent=i?this:null;var u=!1;if(a.copyTransform(n),r.position!=null){var c=Ddt;r.layoutRect?c.copy(r.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tg,r,c):VM(tg,r,c),a.x=tg.x,a.y=tg.y,o=tg.align,s=tg.verticalAlign;var h=r.origin;if(h&&r.rotation!=null){var f=void 0,d=void 0;h==="center"?(f=c.width*.5,d=c.height*.5):(f=Rl(h[0],c.width),d=Rl(h[1],c.height)),u=!0,a.originX=-a.x+f+(i?0:c.x),a.originY=-a.y+d+(i?0:c.y)}}r.rotation!=null&&(a.rotation=r.rotation);var p=r.offset;p&&(a.x+=p[0],a.y+=p[1],u||(a.originX=-p[0],a.originY=-p[1]));var v=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,_=void 0,y=void 0;v&&this.canBeInsideText()?(m=r.insideFill,_=r.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(m),y=!0)):(m=r.outsideFill,_=r.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(m),y=!0)),m=m||"#000",(m!==g.fill||_!==g.stroke||y!==g.autoStroke||o!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=_,g.autoStroke=y,g.align=o,g.verticalAlign=s,n.setDefaultTextStyle(g)),n.__dirty|=jo,l&&n.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?vO:pO},e.prototype.getOutsideStroke=function(t){var n=this.__zr&&this.__zr.getBackgroundColor(),r=typeof n=="string"&&Va(n);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),o=0;o<3;o++)r[o]=r[o]*i+(a?0:255)*(1-i);return r[3]=1,Vc(r,"rgba")},e.prototype.traverse=function(t,n){},e.prototype.attrKV=function(t,n){t==="textConfig"?this.setTextConfig(n):t==="textContent"?this.setTextContent(n):t==="clipPath"?this.setClipPath(n):t==="extra"?(this.extra=this.extra||{},ut(this.extra,n)):this[t]=n},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,n){if(typeof t=="string")this.attrKV(t,n);else if(se(t))for(var r=t,i=Je(r),a=0;a<i.length;a++){var o=i[a];this.attrKV(o,t[o])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var n=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==cD)){var o=i.targetName,s=o?n[o]:n;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var n=this._normalState;n||(n=this._normalState={}),t.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(t,n,hD)},e.prototype._savePrimaryToNormal=function(t,n,r){for(var i=0;i<r.length;i++){var a=r[i];t[a]!=null&&!(a in n)&&(n[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var n=this.states;return n[t]||(n[t]={}),n[t]},e.prototype.clearStates=function(t){this.useState(cD,!1,t)},e.prototype.useState=function(t,n,r,i){var a=t===cD,o=this.hasState();if(!(!o&&a)){var s=this.currentStates,l=this.stateTransition;if(!(Le(s,t)>=0&&(n||s.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!a){TB("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,n,!r&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,f=this._textGuide;return h&&h.useState(t,n,r,c),f&&f.useState(t,n,r,c),a?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~jo),u}}},e.prototype.useStates=function(t,n,r){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,o=t.length,s=o===a.length;if(s){for(var l=0;l<o;l++)if(t[l]!==a[l]){s=!1;break}}if(s)return;for(var l=0;l<o;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var h=i[o-1],f=!!(h&&h.hoverLayer||r);f&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!n&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,n,f),g&&g.useStates(t,n,f),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~jo)}},e.prototype.isSilent=function(){for(var t=this.silent,n=this.parent;!t&&n;){if(n.silent){t=!0;break}n=n.parent}return t},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var n=this.animators[t];n.targetName&&n.changeTarget(this[n.targetName])}},e.prototype.removeState=function(t){var n=Le(this.currentStates,t);if(n>=0){var r=this.currentStates.slice();r.splice(n,1),this.useStates(r)}},e.prototype.replaceState=function(t,n,r){var i=this.currentStates.slice(),a=Le(i,t),o=Le(i,n)>=0;a>=0?o?i.splice(a,1):i[a]=n:r&&!o&&i.push(n),this.useStates(i)},e.prototype.toggleState=function(t,n){n?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var n={},r,i=0;i<t.length;i++){var a=t[i];ut(n,a),a.textConfig&&(r=r||{},ut(r,a.textConfig))}return r&&(n.textConfig=r),n},e.prototype._applyStateObj=function(t,n,r,i,a,o){var s=!(n&&i);n&&n.textConfig?(this.textConfig=ut({},i?this.textConfig:r.textConfig),ut(this.textConfig,n.textConfig)):s&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<hD.length;c++){var h=hD[c],f=a&&Edt[h];n&&n[h]!=null?f?(u=!0,l[h]=n[h]):this[h]=n[h]:s&&r[h]!=null&&(f?(u=!0,l[h]=r[h]):this[h]=r[h])}if(!a)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(n||r)[p]:n||r)}u&&this._transitionState(t,l,o)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var n=this.__zr;n&&t.addSelfToZr(n),t.__zr=n,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var n=this._textContent;n!==t&&(n&&n!==t&&this.removeTextContent(),t.innerTransformable=new Oc,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ut(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=jo;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var n=this._textContent,r=this._textGuide;n&&(n.__inHover=t),r&&(r.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var n=this.animators;if(n)for(var r=0;r<n.length;r++)t.animation.addAnimator(n[r]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var r=0;r<n.length;r++)t.animation.removeAnimator(n[r]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,n,r){var i=t?this[t]:this,a=new tE(i,n,r);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,n){var r=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(n)}).done(function(){var a=i.animators,o=Le(a,t);o>=0&&a.splice(o,1)}),this.animators.push(t),r&&r.animation.addAnimator(t),r&&r.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,n){for(var r=this.animators,i=r.length,a=[],o=0;o<i;o++){var s=r[o];!t||t===s.scope?s.stop(n):a.push(s)}return this.animators=a,this},e.prototype.animateTo=function(t,n,r){fD(this,t,n,r)},e.prototype.animateFrom=function(t,n,r){fD(this,t,n,r,!0)},e.prototype._transitionState=function(t,n,r,i){for(var a=fD(this,n,r,i),o=0;o<a.length;o++)a[o].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=jo;function n(r,i,a,o){Object.defineProperty(t,r,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[a]=l[0],this[o]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[o]},set:function(c){l[o]=c}})}}Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),e}();ti(nE,qs);ti(nE,Oc);function fD(e,t,n,r,i){n=n||{};var a=[];sK(e,"",e,t,n,r,a,i);var o=a.length,s=!1,l=n.done,u=n.aborted,c=function(){s=!0,o--,o<=0&&(s?l&&l():u&&u())},h=function(){o--,o<=0&&(s?l&&l():u&&u())};o||l&&l(),a.length>0&&n.during&&a[0].during(function(p,v){n.during(v)});for(var f=0;f<a.length;f++){var d=a[f];c&&d.done(c),h&&d.aborted(h),n.force&&d.duration(n.duration),d.start(n.easing)}return a}function dD(e,t,n){for(var r=0;r<n;r++)e[r]=t[r]}function Idt(e){return Aa(e[0])}function Ldt(e,t,n){if(Aa(t[n]))if(Aa(e[n])||(e[n]=[]),To(t[n])){var r=t[n].length;e[n].length!==r&&(e[n]=new t[n].constructor(r),dD(e[n],t[n],r))}else{var i=t[n],a=e[n],o=i.length;if(Idt(i))for(var s=i[0].length,l=0;l<o;l++)a[l]?dD(a[l],i[l],s):a[l]=Array.prototype.slice.call(i[l]);else dD(a,i,o);a.length=i.length}else e[n]=t[n]}function Pdt(e,t){return e===t||Aa(e)&&Aa(t)&&Rdt(e,t)}function Rdt(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function sK(e,t,n,r,i,a,o,s){for(var l=Je(r),u=i.duration,c=i.delay,h=i.additive,f=i.setToFinal,d=!se(a),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],_=r[m];if(_!=null&&n[m]!=null&&(d||a[m]))if(se(_)&&!Aa(_)&&!KC(_)){if(t){s||(n[m]=_,e.updateDuringAnimation(t));continue}sK(e,m,n[m],_,i,a&&a[m],o,s)}else v.push(m);else s||(n[m]=_,e.updateDuringAnimation(t),v.push(m))}var y=v.length;if(!h&&y)for(var x=0;x<p.length;x++){var S=p[x];if(S.targetName===t){var b=S.stopTracks(v);if(b){var w=Le(p,S);p.splice(w,1)}}}if(i.force||(v=Gn(v,function(C){return!Pdt(r[C],n[C])}),y=v.length),y>0||i.force&&!o.length){var A=void 0,T=void 0,M=void 0;if(s){T={},f&&(A={});for(var x=0;x<y;x++){var m=v[x];T[m]=n[m],f?A[m]=r[m]:n[m]=r[m]}}else if(f){M={};for(var x=0;x<y;x++){var m=v[x];M[m]=Dx(n[m]),Ldt(n,r,m)}}var S=new tE(n,!1,!1,h?Gn(p,function(E){return E.targetName===t}):null);S.targetName=t,i.scope&&(S.scope=i.scope),f&&A&&S.whenWithKeys(0,A,v),M&&S.whenWithKeys(0,M,v),S.whenWithKeys(u??500,s?T:r,v).delay(c||0),e.addAnimator(S,t),o.push(S)}}var he=function(e){gr(t,e);function t(n){var r=e.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(n),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(n){return this._children[n]},t.prototype.childOfName=function(n){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===n)return r[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(n){return n&&n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),this},t.prototype.addBefore=function(n,r){if(n&&n!==this&&n.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,n),this._doAdd(n))}return this},t.prototype.replace=function(n,r){var i=Le(this._children,n);return i>=0&&this.replaceAt(r,i),this},t.prototype.replaceAt=function(n,r){var i=this._children,a=i[r];if(n&&n!==this&&n.parent!==this&&n!==a){i[r]=n,a.parent=null;var o=this.__zr;o&&a.removeSelfFromZr(o),this._doAdd(n)}return this},t.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var r=this.__zr;r&&r!==n.__zr&&n.addSelfToZr(r),r&&r.refresh()},t.prototype.remove=function(n){var r=this.__zr,i=this._children,a=Le(i,n);return a<0?this:(i.splice(a,1),n.parent=null,r&&n.removeSelfFromZr(r),r&&r.refresh(),this)},t.prototype.removeAll=function(){for(var n=this._children,r=this.__zr,i=0;i<n.length;i++){var a=n[i];r&&a.removeSelfFromZr(r),a.parent=null}return n.length=0,this},t.prototype.eachChild=function(n,r){for(var i=this._children,a=0;a<i.length;a++){var o=i[a];n.call(r,o,a)}return this},t.prototype.traverse=function(n,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],o=n.call(r,a);a.isGroup&&!o&&a.traverse(n,r)}return this},t.prototype.addSelfToZr=function(n){e.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(n)}},t.prototype.removeSelfFromZr=function(n){e.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(n)}},t.prototype.getBoundingRect=function(n){for(var r=new Ae(0,0,0,0),i=n||this._children,a=[],o=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(Ae.applyTransform(r,u,c),o=o||r.clone(),o.union(r)):(o=o||u.clone(),o.union(u))}}return o||r},t}(nE);he.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var YT={},lK={};function Odt(e){delete lK[e]}function Ndt(e){if(!e)return!1;if(typeof e=="string")return FM(e,1)<dO;if(e.colorStops){for(var t=e.colorStops,n=0,r=t.length,i=0;i<r;i++)n+=FM(t[i].color,1);return n/=r,n<dO}return!1}var Bdt=function(){function e(t,n,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=n,this.id=t;var a=new Zft,o=r.renderer||"canvas";YT[o]||(o=Je(YT)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var s=new YT[o](n,a,r,t),l=r.ssr||s.ssrOnly;this.storage=a,this.painter=s;var u=!qe.node&&!qe.worker&&!l?new Adt(s.getViewportRoot(),s.root):null,c=r.useCoarsePointer,h=c==null||c==="auto"?qe.touchEventsSupported:!!c,f=44,d;h&&(d=xe(r.pointerSize,f)),this.handler=new Uq(a,s,u,s.root,d),this.animation=new _dt({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){this._disposed||!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){this._disposed||!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,n),this.refresh())},e.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=Ndt(t))},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},e.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},e.prototype.flush=function(){this._disposed||this._flush(!1)},e.prototype._flush=function(t){var n,r=pm();this._needsRefresh&&(n=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var i=pm();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},e.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},e.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},e.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},e.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,n){if(!this._disposed)return this.handler.findHover(t,n)},e.prototype.on=function(t,n,r){return this._disposed||this.handler.on(t,n,r),this},e.prototype.off=function(t,n){this._disposed||this.handler.off(t,n)},e.prototype.trigger=function(t,n){this._disposed||this.handler.trigger(t,n)},e.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),n=0;n<t.length;n++)t[n]instanceof he&&t[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},e.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,Odt(this.id))},e}();function gO(e,t){var n=new Bdt(Oq(),e,t);return lK[n.id]=n,n}function kdt(e,t){YT[e]=t}var mO;function Fdt(e){if(typeof mO=="function")return mO(e)}function zdt(e){mO=e}var R4=1e-4,uK=20;function Udt(e){return e.replace(/^\s+|\s+$/g,"")}function Cn(e,t,n,r){var i=t[0],a=t[1],o=n[0],s=n[1],l=a-i,u=s-o;if(l===0)return u===0?o:(o+s)/2;if(r)if(l>0){if(e<=i)return o;if(e>=a)return s}else{if(e>=i)return o;if(e<=a)return s}else{if(e===i)return o;if(e===a)return s}return(e-i)/l*u+o}function Dt(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Ft(e)?Udt(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function _r(e,t,n){return t==null&&(t=10),t=Math.min(Math.max(0,t),uK),e=(+e).toFixed(t),n?e:+e}function Ns(e){return e.sort(function(t,n){return t-n}),e}function Su(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,n=0;n<15;n++,t*=10)if(Math.round(e*t)/t===e)return n}return OB(e)}function OB(e){var t=e.toString().toLowerCase(),n=t.indexOf("e"),r=n>0?+t.slice(n+1):0,i=n>0?n:t.length,a=t.indexOf("."),o=a<0?0:i-1-a;return Math.max(0,o-r)}function cK(e,t){var n=Math.log,r=Math.LN10,i=Math.floor(n(e[1]-e[0])/r),a=Math.round(n(Math.abs(t[1]-t[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function Vdt(e,t){var n=Pl(e,function(d,p){return d+(isNaN(p)?0:p)},0);if(n===0)return[];for(var r=Math.pow(10,t),i=yt(e,function(d){return(isNaN(d)?0:d)/n*r*100}),a=r*100,o=yt(i,function(d){return Math.floor(d)}),s=Pl(o,function(d,p){return d+p},0),l=yt(i,function(d,p){return d-o[p]});s<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,h=0,f=l.length;h<f;++h)l[h]>u&&(u=l[h],c=h);++o[c],l[c]=0,++s}return yt(o,function(d){return d/r})}function Gdt(e,t){var n=Math.max(Su(e),Su(t)),r=e+t;return n>uK?r:_r(r,n)}var O4=9007199254740991;function hK(e){var t=Math.PI*2;return(e%t+t)%t}function sb(e){return e>-R4&&e<R4}var Hdt=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Vs(e){if(e instanceof Date)return e;if(Ft(e)){var t=Hdt.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(n-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function Wdt(e){return Math.pow(10,NB(e))}function NB(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function fK(e,t){var n=NB(e),r=Math.pow(10,n),i=e/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,e=a*r,n>=-20?+e.toFixed(n<0?-n:0):e}function pD(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i}function N4(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,n=1,r=0;r<e.length;){for(var i=e[r].interval,a=e[r].close,o=0;o<2;o++)i[o]<=t&&(i[o]=t,a[o]=o?1:1-n),t=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!==1?e.splice(r,1):r++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Yc(e){var t=parseFloat(e);return t==e&&(t!==0||!Ft(e)||e.indexOf("x")<=0)?t:NaN}function dK(e){return!isNaN(Yc(e))}function pK(){return Math.round(Math.random()*9)}function vK(e,t){return t===0?e:vK(t,e%t)}function B4(e,t){return e==null?t:t==null?e:e*t/vK(e,t)}function En(e){throw new Error(e)}function k4(e,t,n){return(t-e)*n+e}var gK="series\0",mK="\0_ec_\0";function jn(e){return e instanceof Array?e:e==null?[]:[e]}function hv(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var F4=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function e0(e){return se(e)&&!ht(e)&&!(e instanceof Date)?e.value:e}function $dt(e){return se(e)&&!(e instanceof Array)}function yK(e,t,n){var r=n==="normalMerge",i=n==="replaceMerge",a=n==="replaceAll";e=e||[],t=(t||[]).slice();var o=jt();R(t,function(l,u){if(!se(l)){t[u]=null;return}});var s=Xdt(e,o,n);return(r||i)&&jdt(s,e,o,t),r&&Ydt(s,t),r||i?qdt(s,t,i):a&&Kdt(s,t),Zdt(s),s}function Xdt(e,t,n){var r=[];if(n==="replaceAll")return r;for(var i=0;i<e.length;i++){var a=e[i];a&&a.id!=null&&t.set(a.id,i),r.push({existing:n==="replaceMerge"||lb(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function jdt(e,t,n,r){R(r,function(i,a){if(!(!i||i.id==null)){var o=Ix(i.id),s=n.get(o);if(s!=null){var l=e[s];Wa(!l.newOption,'Duplicated option on id "'+o+'".'),l.newOption=i,l.existing=t[s],r[a]=null}}})}function Ydt(e,t){R(t,function(n,r){if(!(!n||n.name==null))for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(a.id==null||n.id==null)&&!lb(n)&&!lb(a)&&_K("name",a,n)){e[i].newOption=n,t[r]=null;return}}})}function qdt(e,t,n){R(t,function(r){if(r){for(var i,a=0;(i=e[a])&&(i.newOption||lb(i.existing)||i.existing&&r.id!=null&&!_K("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=n):e.push({newOption:r,brandNew:n,existing:null,keyInfo:null}),a++}})}function Kdt(e,t){R(t,function(n){e.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function Zdt(e){var t=jt();R(e,function(n){var r=n.existing;r&&t.set(r.id,n)}),R(e,function(n){var r=n.newOption;Wa(!r||r.id==null||!t.get(r.id)||t.get(r.id)===n,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&t.set(r.id,n),!n.keyInfo&&(n.keyInfo={})}),R(e,function(n,r){var i=n.existing,a=n.newOption,o=n.keyInfo;if(se(a)){if(o.name=a.name!=null?Ix(a.name):i?i.name:gK+r,i)o.id=Ix(i.id);else if(a.id!=null)o.id=Ix(a.id);else{var s=0;do o.id="\0"+o.name+"\0"+s++;while(t.get(o.id))}t.set(o.id,n)}})}function _K(e,t,n){var r=pi(t[e],null),i=pi(n[e],null);return r!=null&&i!=null&&r===i}function Ix(e){return pi(e,"")}function pi(e,t){return e==null?t:Ft(e)?e:xn(e)||YR(e)?e+"":t}function BB(e){var t=e.name;return!!(t&&t.indexOf(gK))}function lb(e){return e&&e.id!=null&&Ix(e.id).indexOf(mK)===0}function Jdt(e){return mK+e}function Qdt(e,t,n){R(e,function(r){var i=r.newOption;se(i)&&(r.keyInfo.mainType=t,r.keyInfo.subType=tpt(t,i,r.existing,n))})}function tpt(e,t,n,r){var i=t.type?t.type:n?n.subType:r.determineSubType(e,t);return i}function ept(e,t){var n={},r={};return i(e||[],n),i(t||[],r,n),[a(n),a(r)];function i(o,s,l){for(var u=0,c=o.length;u<c;u++){var h=pi(o[u].seriesId,null);if(h==null)return;for(var f=jn(o[u].dataIndex),d=l&&l[h],p=0,v=f.length;p<v;p++){var g=f[p];d&&d[g]?d[g]=null:(s[h]||(s[h]={}))[g]=1}}}function a(o,s){var l=[];for(var u in o)if(o.hasOwnProperty(u)&&o[u]!=null)if(s)l.push(+u);else{var c=a(o[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function fv(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ht(t.dataIndex)?yt(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ht(t.name)?yt(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name)}function vn(){var e="__ec_inner_"+npt++;return function(t){return t[e]||(t[e]={})}}var npt=pK();function Lx(e,t,n){var r=kB(t,n),i=r.mainTypeSpecified,a=r.queryOptionMap,o=r.others,s=o,l=n?n.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var h=g1(e,c,u,{useDefault:l===c,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});s[c+"Models"]=h.models,s[c+"Model"]=h.models[0]}),s}function kB(e,t){var n;if(Ft(e)){var r={};r[e+"Index"]=0,n=r}else n=e;var i=jt(),a={},o=!1;return R(n,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],h=(u[2]||"").toLowerCase();if(!(!c||!h||t&&t.includeMainTypes&&Le(t.includeMainTypes,c)<0)){o=o||!!c;var f=i.get(c)||i.set(c,{});f[h]=s}}),{mainTypeSpecified:o,queryOptionMap:i,others:a}}var ai={useDefault:!0,enableAll:!1,enableNone:!1},rpt={useDefault:!1,enableAll:!0,enableNone:!0};function g1(e,t,n,r){r=r||ai;var i=n.index,a=n.id,o=n.name,s={models:null,specified:i!=null||a!=null||o!=null};if(!s.specified){var l=void 0;return s.models=r.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Wa(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Wa(r.enableAll,'`"all"` is not a valid value on index option.'),i=a=o=null),s.models=e.queryComponents({mainType:t,index:i,id:a,name:o}),s)}function xK(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function ipt(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function apt(e){return e==="auto"?qe.domSupported?"html":"richText":e||"html"}function yO(e,t){var n=jt(),r=[];return R(e,function(i){var a=t(i);(n.get(a)||(r.push(a),n.set(a,[]))).push(i)}),{keys:r,buckets:n}}function bK(e,t,n,r,i){var a=t==null||t==="auto";if(r==null)return r;if(xn(r)){var o=k4(n||0,r,i);return _r(o,a?Math.max(Su(n||0),Su(r)):t)}else{if(Ft(r))return i<1?n:r;for(var s=[],l=n,u=r,c=Math.max(l?l.length:0,u.length),h=0;h<c;++h){var f=e.getDimensionInfo(h);if(f&&f.type==="ordinal")s[h]=(i<1&&l?l:u)[h];else{var d=l&&l[h]?l[h]:0,p=u[h],o=k4(d,p,i);s[h]=_r(o,a?Math.max(Su(d),Su(p)):t)}}return s}}var opt=".",Pd="___EC__COMPONENT__CONTAINER___",SK="___EC__EXTENDED_CLASS___";function wu(e){var t={main:"",sub:""};if(e){var n=e.split(opt);t.main=n[0]||"",t.sub=n[1]||""}return t}function spt(e){Wa(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function lpt(e){return!!(e&&e[SK])}function FB(e,t){e.$constructor=e,e.extend=function(n){var r=this,i;return upt(r)?i=function(a){it(o,a);function o(){return a.apply(this,arguments)||this}return o}(r):(i=function(){(n.$constructor||r).apply(this,arguments)},AB(i,this)),ut(i.prototype,n),i[SK]=!0,i.extend=this.extend,i.superCall=fpt,i.superApply=dpt,i.superClass=r,i}}function upt(e){return ae(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function wK(e,t){e.extend=t.extend}var cpt=Math.round(Math.random()*10);function hpt(e){var t=["__\0is_clz",cpt++].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!!(n&&n[t])}}function fpt(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return this.superClass.prototype[t].apply(e,n)}function dpt(e,t,n){return this.superClass.prototype[t].apply(e,n)}function rE(e){var t={};e.registerClass=function(r){var i=r.type||r.prototype.type;if(i){spt(i),r.prototype.type=i;var a=wu(i);if(!a.sub)t[a.main]=r;else if(a.sub!==Pd){var o=n(a);o[a.sub]=r}}return r},e.getClass=function(r,i,a){var o=t[r];if(o&&o[Pd]&&(o=i?o[i]:null),a&&!o)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return o},e.getClassesByMainType=function(r){var i=wu(r),a=[],o=t[i.main];return o&&o[Pd]?R(o,function(s,l){l!==Pd&&a.push(s)}):a.push(o),a},e.hasClass=function(r){var i=wu(r);return!!t[i.main]},e.getAllClassMainTypes=function(){var r=[];return R(t,function(i,a){r.push(a)}),r},e.hasSubTypes=function(r){var i=wu(r),a=t[i.main];return a&&a[Pd]};function n(r){var i=t[r.main];return(!i||!i[Pd])&&(i=t[r.main]={},i[Pd]=!0),i}}function dv(e,t){for(var n=0;n<e.length;n++)e[n][1]||(e[n][1]=e[n][0]);return t=t||!1,function(r,i,a){for(var o={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&Le(i,l)>=0||a&&Le(a,l)<0)){var u=r.getShallow(l,t);u!=null&&(o[e[s][0]]=u)}}return o}}var ppt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],vpt=dv(ppt),gpt=function(){function e(){}return e.prototype.getAreaStyle=function(t,n){return vpt(this,t,n)},e}(),_O=new t0(50);function mpt(e){if(typeof e=="string"){var t=_O.get(e);return t&&t.image}else return e}function zB(e,t,n,r,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!n)return t;var a=_O.get(e),o={hostEl:n,cb:r,cbPayload:i};return a?(t=a.image,!iE(t)&&a.pending.push(o)):(t=Ff.loadImage(e,z4,z4),t.__zrImageSrc=e,_O.put(e,t.__cachedImgObj={image:t,pending:[o]})),t}else return e;else return t}function z4(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function iE(e){return e&&e.width&&e.height}var vD=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ypt(e,t,n,r,i){if(!t)return"";var a=(e+"").split(`
`);i=TK(t,n,r,i);for(var o=0,s=a.length;o<s;o++)a[o]=MK(a[o],i);return a.join(`
`)}function TK(e,t,n,r){r=r||{};var i=ut({},r);i.font=t,n=xe(n,"..."),i.maxIterations=xe(r.maxIterations,2);var a=i.minChar=xe(r.minChar,0);i.cnCharWidth=qo("",t);var o=i.ascCharWidth=qo("a",t);i.placeholder=xe(r.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<a&&s>=o;l++)s-=o;var u=qo(n,t);return u>s&&(n="",u=0),s=e-u,i.ellipsis=n,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function MK(e,t){var n=t.containerWidth,r=t.font,i=t.contentWidth;if(!n)return"";var a=qo(e,r);if(a<=n)return e;for(var o=0;;o++){if(a<=i||o>=t.maxIterations){e+=t.ellipsis;break}var s=o===0?_pt(e,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*i/a):0;e=e.substr(0,s),a=qo(e,r)}return e===""&&(e=t.placeholder),e}function _pt(e,t,n,r){for(var i=0,a=0,o=e.length;a<o&&i<t;a++){var s=e.charCodeAt(a);i+=0<=s&&s<=127?n:r}return a}function xpt(e,t){e!=null&&(e+="");var n=t.overflow,r=t.padding,i=t.font,a=n==="truncate",o=eE(i),s=xe(t.lineHeight,o),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,h;c!=null&&(n==="break"||n==="breakAll")?h=e?AK(e,t.font,c,n==="breakAll",0).lines:[]:h=e?e.split(`
`):[];var f=h.length*s,d=xe(t.height,f);if(f>d&&u){var p=Math.floor(d/s);h=h.slice(0,p)}if(e&&a&&c!=null)for(var v=TK(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<h.length;g++)h[g]=MK(h[g],v);for(var m=d,_=0,g=0;g<h.length;g++)_=Math.max(qo(h[g],i),_);c==null&&(c=_);var y=_;return r&&(m+=r[0]+r[2],y+=r[1]+r[3],c+=r[1]+r[3]),l&&(y=c),{lines:h,height:d,outerWidth:y,outerHeight:m,lineHeight:s,calculatedLineHeight:o,contentWidth:_,contentHeight:f,width:c}}var bpt=function(){function e(){}return e}(),U4=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),Spt=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function wpt(e,t){var n=new Spt;if(e!=null&&(e+=""),!e)return n;for(var r=t.width,i=t.height,a=t.overflow,o=(a==="break"||a==="breakAll")&&r!=null?{width:r,accumWidth:0,breakAll:a==="breakAll"}:null,s=vD.lastIndex=0,l;(l=vD.exec(e))!=null;){var u=l.index;u>s&&gD(n,e.substring(s,u),t,o),gD(n,l[2],t,o,l[1]),s=vD.lastIndex}s<e.length&&gD(n,e.substring(s,e.length),t,o);var c=[],h=0,f=0,d=t.padding,p=a==="truncate",v=t.lineOverflow==="truncate";function g(N,k,U){N.width=k,N.lineHeight=U,h+=U,f=Math.max(f,k)}t:for(var m=0;m<n.lines.length;m++){for(var _=n.lines[m],y=0,x=0,S=0;S<_.tokens.length;S++){var b=_.tokens[S],w=b.styleName&&t.rich[b.styleName]||{},A=b.textPadding=w.padding,T=A?A[1]+A[3]:0,M=b.font=w.font||t.font;b.contentHeight=eE(M);var C=xe(w.height,b.contentHeight);if(b.innerHeight=C,A&&(C+=A[0]+A[2]),b.height=C,b.lineHeight=Du(w.lineHeight,t.lineHeight,C),b.align=w&&w.align||t.align,b.verticalAlign=w&&w.verticalAlign||"middle",v&&i!=null&&h+b.lineHeight>i){S>0?(_.tokens=_.tokens.slice(0,S),g(_,x,y),n.lines=n.lines.slice(0,m+1)):n.lines=n.lines.slice(0,m);break t}var E=w.width,D=E==null||E==="auto";if(typeof E=="string"&&E.charAt(E.length-1)==="%")b.percentWidth=E,c.push(b),b.contentWidth=qo(b.text,M);else{if(D){var I=w.backgroundColor,L=I&&I.image;L&&(L=mpt(L),iE(L)&&(b.width=Math.max(b.width,L.width*C/L.height)))}var P=p&&r!=null?r-x:null;P!=null&&P<b.width?!D||P<T?(b.text="",b.width=b.contentWidth=0):(b.text=ypt(b.text,P-T,M,t.ellipsis,{minChar:t.truncateMinChar}),b.width=b.contentWidth=qo(b.text,M)):b.contentWidth=qo(b.text,M)}b.width+=T,x+=b.width,w&&(y=Math.max(y,b.lineHeight))}g(_,x,y)}n.outerWidth=n.width=xe(r,f),n.outerHeight=n.height=xe(i,h),n.contentHeight=h,n.contentWidth=f,d&&(n.outerWidth+=d[1]+d[3],n.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var b=c[m],B=b.percentWidth;b.width=parseInt(B,10)/100*n.width}return n}function gD(e,t,n,r,i){var a=t==="",o=i&&n.rich[i]||{},s=e.lines,l=o.font||n.font,u=!1,c,h;if(r){var f=o.padding,d=f?f[1]+f[3]:0;if(o.width!=null&&o.width!=="auto"){var p=Rl(o.width,r.width)+d;s.length>0&&p+r.accumWidth>r.width&&(c=t.split(`
`),u=!0),r.accumWidth=p}else{var v=AK(t,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=v.accumWidth+d,h=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],_=new bpt;if(_.styleName=i,_.text=m,_.isLineHolder=!m&&!a,typeof o.width=="number"?_.width=o.width:_.width=h?h[g]:qo(m,l),!g&&!u){var y=(s[s.length-1]||(s[0]=new U4)).tokens,x=y.length;x===1&&y[0].isLineHolder?y[0]=_:(m||!x||a)&&y.push(_)}else s.push(new U4([_]))}}function Tpt(e){var t=e.charCodeAt(0);return t>=32&&t<=591||t>=880&&t<=4351||t>=4608&&t<=5119||t>=7680&&t<=8303}var Mpt=Pl(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function Apt(e){return Tpt(e)?!!Mpt[e]:!0}function AK(e,t,n,r,i){for(var a=[],o=[],s="",l="",u=0,c=0,h=0;h<e.length;h++){var f=e.charAt(h);if(f===`
`){l&&(s+=l,c+=u),a.push(s),o.push(c),s="",l="",u=0,c=0;continue}var d=qo(f,t),p=r?!1:!Apt(f);if(a.length?c+d>n:i+c+d>n){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),a.push(s),o.push(c-u),l+=f,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),a.push(s),o.push(c),s=f,c=d)):p?(a.push(l),o.push(u),l=f,u=d):(a.push(f),o.push(d));continue}c+=d,p?(l+=f,u+=d):(l&&(s+=l,l="",u=0),s+=f)}return!a.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(a.push(s),o.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:o}}var xO="__zr_style_"+Math.round(Math.random()*10),Zp={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},aE={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Zp[xO]=!0;var V4=["z","z2","invisible"],Cpt=["invisible"],Gs=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype._init=function(n){for(var r=Je(n),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(n[a]):e.prototype.attrKV.call(this,a,n[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(n,r,i,a){var o=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&Ept(this,n,r)||o&&!o[0]&&!o[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(n,r){return this.rectContain(n,r)},t.prototype.traverse=function(n,r){n.call(r,this)},t.prototype.rectContain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,o=a.shadowBlur||0,s=a.shadowOffsetX||0,l=a.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new Ae(0,0,0,0)),r?Ae.applyTransform(n,i,r):n.copy(i),(o||s||l)&&(n.width+=o*2+Math.abs(s),n.height+=o*2+Math.abs(l),n.x=Math.min(n.x,n.x+s-o),n.y=Math.min(n.y,n.y+l-o));var u=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-u),n.y=Math.floor(n.y-u),n.width=Math.ceil(n.width+1+u*2),n.height=Math.ceil(n.height+1+u*2))}return n},t.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new Ae(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(n){return this.animate("style",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(n,r){n!=="style"?e.prototype.attrKV.call(this,n,r):this.style?this.setStyle(r):this.useStyle(r)},t.prototype.setStyle=function(n,r){return typeof n=="string"?this.style[n]=r:ut(this.style,n),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=Z_,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Z_)},t.prototype.styleUpdated=function(){this.__dirty&=~Z_},t.prototype.createStyle=function(n){return ZC(Zp,n)},t.prototype.useStyle=function(n){n[xO]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},t.prototype.isStyleObject=function(n){return n[xO]},t.prototype._innerSaveToNormal=function(n){e.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,r,V4)},t.prototype._applyStateObj=function(n,r,i,a,o,s){e.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.style?o?a?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var h=Je(c),f=0;f<h.length;f++){var d=h[f];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=Je(u),f=0;f<p.length;f++){var d=p[f];this.style[d]=this.style[d]}this._transitionState(n,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?Cpt:V4,f=0;f<v.length;f++){var d=v[f];r&&r[d]!=null?this[d]=r[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(n){for(var r=e.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.style&&(i=i||{},this._mergeStyle(i,o.style))}return i&&(r.style=i),r},t.prototype._mergeStyle=function(n,r){return ut(n,r),n},t.prototype.getAnimationStyleProps=function(){return aE},t.initDefaultProps=function(){var n=t.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=jo|Z_}(),t}(nE),mD=new Ae(0,0,0,0),yD=new Ae(0,0,0,0);function Ept(e,t,n){return mD.copy(e.getBoundingRect()),e.transform&&mD.applyTransform(e.transform),yD.width=t,yD.height=n,!mD.intersect(yD)}var ho=Math.min,fo=Math.max,_D=Math.sin,xD=Math.cos,Rd=Math.PI*2,LS=kv(),PS=kv(),RS=kv();function oE(e,t,n){if(e.length!==0){for(var r=e[0],i=r[0],a=r[0],o=r[1],s=r[1],l=1;l<e.length;l++)r=e[l],i=ho(i,r[0]),a=fo(a,r[0]),o=ho(o,r[1]),s=fo(s,r[1]);t[0]=i,t[1]=o,n[0]=a,n[1]=s}}function G4(e,t,n,r,i,a){i[0]=ho(e,n),i[1]=ho(t,r),a[0]=fo(e,n),a[1]=fo(t,r)}var H4=[],W4=[];function Dpt(e,t,n,r,i,a,o,s,l,u){var c=$q,h=Si,f=c(e,n,i,o,H4);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<f;d++){var p=h(e,n,i,o,H4[d]);l[0]=ho(p,l[0]),u[0]=fo(p,u[0])}f=c(t,r,a,s,W4);for(var d=0;d<f;d++){var v=h(t,r,a,s,W4[d]);l[1]=ho(v,l[1]),u[1]=fo(v,u[1])}l[0]=ho(e,l[0]),u[0]=fo(e,u[0]),l[0]=ho(o,l[0]),u[0]=fo(o,u[0]),l[1]=ho(t,l[1]),u[1]=fo(t,u[1]),l[1]=ho(s,l[1]),u[1]=fo(s,u[1])}function Ipt(e,t,n,r,i,a,o,s){var l=jq,u=Ki,c=fo(ho(l(e,n,i),1),0),h=fo(ho(l(t,r,a),1),0),f=u(e,n,i,c),d=u(t,r,a,h);o[0]=ho(e,i,f),o[1]=ho(t,a,d),s[0]=fo(e,i,f),s[1]=fo(t,a,d)}function Lpt(e,t,n,r,i,a,o,s,l){var u=mf,c=yf,h=Math.abs(i-a);if(h%Rd<1e-4&&h>1e-4){s[0]=e-n,s[1]=t-r,l[0]=e+n,l[1]=t+r;return}if(LS[0]=xD(i)*n+e,LS[1]=_D(i)*r+t,PS[0]=xD(a)*n+e,PS[1]=_D(a)*r+t,u(s,LS,PS),c(l,LS,PS),i=i%Rd,i<0&&(i=i+Rd),a=a%Rd,a<0&&(a=a+Rd),i>a&&!o?a+=Rd:i<a&&o&&(i+=Rd),o){var f=a;a=i,i=f}for(var d=0;d<a;d+=Math.PI/2)d>i&&(RS[0]=xD(d)*n+e,RS[1]=_D(d)*r+t,u(s,RS,s),c(l,RS,l))}var Qn={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Od=[],Nd=[],$l=[],Oh=[],Xl=[],jl=[],bD=Math.min,SD=Math.max,Bd=Math.cos,kd=Math.sin,oc=Math.abs,bO=Math.PI,of=bO*2,wD=typeof Float32Array<"u",t_=[];function TD(e){var t=Math.round(e/bO*1e8)/1e8;return t%2*bO}function UB(e,t){var n=TD(e[0]);n<0&&(n+=of);var r=n-e[0],i=e[1];i+=r,!t&&i-n>=of?i=n+of:t&&n-i>=of?i=n-of:!t&&n>i?i=n+(of-TD(n-i)):t&&n<i&&(i=n-(of-TD(i-n))),e[0]=n,e[1]=i}var zu=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,n,r){r=r||0,r>0&&(this._ux=oc(r/UM/t)||0,this._uy=oc(r/UM/n)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,n){return this._drawPendingPt(),this.addData(Qn.M,t,n),this._ctx&&this._ctx.moveTo(t,n),this._x0=t,this._y0=n,this._xi=t,this._yi=n,this},e.prototype.lineTo=function(t,n){var r=oc(t-this._xi),i=oc(n-this._yi),a=r>this._ux||i>this._uy;if(this.addData(Qn.L,t,n),this._ctx&&a&&this._ctx.lineTo(t,n),a)this._xi=t,this._yi=n,this._pendingPtDist=0;else{var o=r*r+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=n,this._pendingPtDist=o)}return this},e.prototype.bezierCurveTo=function(t,n,r,i,a,o){return this._drawPendingPt(),this.addData(Qn.C,t,n,r,i,a,o),this._ctx&&this._ctx.bezierCurveTo(t,n,r,i,a,o),this._xi=a,this._yi=o,this},e.prototype.quadraticCurveTo=function(t,n,r,i){return this._drawPendingPt(),this.addData(Qn.Q,t,n,r,i),this._ctx&&this._ctx.quadraticCurveTo(t,n,r,i),this._xi=r,this._yi=i,this},e.prototype.arc=function(t,n,r,i,a,o){this._drawPendingPt(),t_[0]=i,t_[1]=a,UB(t_,o),i=t_[0],a=t_[1];var s=a-i;return this.addData(Qn.A,t,n,r,r,i,s,0,o?0:1),this._ctx&&this._ctx.arc(t,n,r,i,a,o),this._xi=Bd(a)*r+t,this._yi=kd(a)*r+n,this},e.prototype.arcTo=function(t,n,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,n,r,i,a),this},e.prototype.rect=function(t,n,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,n,r,i),this.addData(Qn.R,t,n,r,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Qn.Z);var t=this._ctx,n=this._x0,r=this._y0;return t&&t.closePath(),this._xi=n,this._yi=r,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var n=t.length;!(this.data&&this.data.length===n)&&wD&&(this.data=new Float32Array(n));for(var r=0;r<n;r++)this.data[r]=t[r];this._len=n},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var n=t.length,r=0,i=this._len,a=0;a<n;a++)r+=t[a].len();wD&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+r));for(var a=0;a<n;a++)for(var o=t[a].data,s=0;s<o.length;s++)this.data[i++]=o[s];this._len=i},e.prototype.addData=function(t,n,r,i,a,o,s,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var h=0;h<arguments.length;h++)c[this._len++]=arguments[h]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],n=0;n<this._len;n++)t[n]=this.data[n];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,wD&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){$l[0]=$l[1]=Xl[0]=Xl[1]=Number.MAX_VALUE,Oh[0]=Oh[1]=jl[0]=jl[1]=-Number.MAX_VALUE;var t=this.data,n=0,r=0,i=0,a=0,o;for(o=0;o<this._len;){var s=t[o++],l=o===1;switch(l&&(n=t[o],r=t[o+1],i=n,a=r),s){case Qn.M:n=i=t[o++],r=a=t[o++],Xl[0]=i,Xl[1]=a,jl[0]=i,jl[1]=a;break;case Qn.L:G4(n,r,t[o],t[o+1],Xl,jl),n=t[o++],r=t[o++];break;case Qn.C:Dpt(n,r,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],Xl,jl),n=t[o++],r=t[o++];break;case Qn.Q:Ipt(n,r,t[o++],t[o++],t[o],t[o+1],Xl,jl),n=t[o++],r=t[o++];break;case Qn.A:var u=t[o++],c=t[o++],h=t[o++],f=t[o++],d=t[o++],p=t[o++]+d;o+=1;var v=!t[o++];l&&(i=Bd(d)*h+u,a=kd(d)*f+c),Lpt(u,c,h,f,d,p,v,Xl,jl),n=Bd(p)*h+u,r=kd(p)*f+c;break;case Qn.R:i=n=t[o++],a=r=t[o++];var g=t[o++],m=t[o++];G4(i,a,i+g,a+m,Xl,jl);break;case Qn.Z:n=i,r=a;break}mf($l,$l,Xl),yf(Oh,Oh,jl)}return o===0&&($l[0]=$l[1]=Oh[0]=Oh[1]=0),new Ae($l[0],$l[1],Oh[0]-$l[0],Oh[1]-$l[1])},e.prototype._calculateLength=function(){var t=this.data,n=this._len,r=this._ux,i=this._uy,a=0,o=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,h=0,f=0;f<n;){var d=t[f++],p=f===1;p&&(a=t[f],o=t[f+1],s=a,l=o);var v=-1;switch(d){case Qn.M:a=s=t[f++],o=l=t[f++];break;case Qn.L:{var g=t[f++],m=t[f++],_=g-a,y=m-o;(oc(_)>r||oc(y)>i||f===n-1)&&(v=Math.sqrt(_*_+y*y),a=g,o=m);break}case Qn.C:{var x=t[f++],S=t[f++],g=t[f++],m=t[f++],b=t[f++],w=t[f++];v=Jft(a,o,x,S,g,m,b,w,10),a=b,o=w;break}case Qn.Q:{var x=t[f++],S=t[f++],g=t[f++],m=t[f++];v=tdt(a,o,x,S,g,m,10),a=g,o=m;break}case Qn.A:var A=t[f++],T=t[f++],M=t[f++],C=t[f++],E=t[f++],D=t[f++],I=D+E;f+=1,p&&(s=Bd(E)*M+A,l=kd(E)*C+T),v=SD(M,C)*bD(of,Math.abs(D)),a=Bd(I)*M+A,o=kd(I)*C+T;break;case Qn.R:{s=a=t[f++],l=o=t[f++];var L=t[f++],P=t[f++];v=L*2+P*2;break}case Qn.Z:{var _=s-a,y=l-o;v=Math.sqrt(_*_+y*y),a=s,o=l;break}}v>=0&&(u[h++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,n){var r=this.data,i=this._ux,a=this._uy,o=this._len,s,l,u,c,h,f,d=n<1,p,v,g=0,m=0,_,y=0,x,S;if(!(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,_=n*v,!_)))t:for(var b=0;b<o;){var w=r[b++],A=b===1;switch(A&&(u=r[b],c=r[b+1],s=u,l=c),w!==Qn.L&&y>0&&(t.lineTo(x,S),y=0),w){case Qn.M:s=u=r[b++],l=c=r[b++],t.moveTo(u,c);break;case Qn.L:{h=r[b++],f=r[b++];var T=oc(h-u),M=oc(f-c);if(T>i||M>a){if(d){var C=p[m++];if(g+C>_){var E=(_-g)/C;t.lineTo(u*(1-E)+h*E,c*(1-E)+f*E);break t}g+=C}t.lineTo(h,f),u=h,c=f,y=0}else{var D=T*T+M*M;D>y&&(x=h,S=f,y=D)}break}case Qn.C:{var I=r[b++],L=r[b++],P=r[b++],B=r[b++],N=r[b++],k=r[b++];if(d){var C=p[m++];if(g+C>_){var E=(_-g)/C;zf(u,I,P,N,E,Od),zf(c,L,B,k,E,Nd),t.bezierCurveTo(Od[1],Nd[1],Od[2],Nd[2],Od[3],Nd[3]);break t}g+=C}t.bezierCurveTo(I,L,P,B,N,k),u=N,c=k;break}case Qn.Q:{var I=r[b++],L=r[b++],P=r[b++],B=r[b++];if(d){var C=p[m++];if(g+C>_){var E=(_-g)/C;ib(u,I,P,E,Od),ib(c,L,B,E,Nd),t.quadraticCurveTo(Od[1],Nd[1],Od[2],Nd[2]);break t}g+=C}t.quadraticCurveTo(I,L,P,B),u=P,c=B;break}case Qn.A:var U=r[b++],Z=r[b++],nt=r[b++],ct=r[b++],K=r[b++],$=r[b++],ot=r[b++],tt=!r[b++],et=nt>ct?nt:ct,xt=oc(nt-ct)>.001,St=K+$,X=!1;if(d){var C=p[m++];g+C>_&&(St=K+$*(_-g)/C,X=!0),g+=C}if(xt&&t.ellipse?t.ellipse(U,Z,nt,ct,ot,K,St,tt):t.arc(U,Z,et,K,St,tt),X)break t;A&&(s=Bd(K)*nt+U,l=kd(K)*ct+Z),u=Bd(St)*nt+U,c=kd(St)*ct+Z;break;case Qn.R:s=u=r[b],l=c=r[b+1],h=r[b++],f=r[b++];var Ct=r[b++],It=r[b++];if(d){var C=p[m++];if(g+C>_){var Jt=_-g;t.moveTo(h,f),t.lineTo(h+bD(Jt,Ct),f),Jt-=Ct,Jt>0&&t.lineTo(h+Ct,f+bD(Jt,It)),Jt-=It,Jt>0&&t.lineTo(h+SD(Ct-Jt,0),f+It),Jt-=Ct,Jt>0&&t.lineTo(h,f+SD(It-Jt,0));break t}g+=C}t.rect(h,f,Ct,It);break;case Qn.Z:if(d){var C=p[m++];if(g+C>_){var E=(_-g)/C;t.lineTo(u*(1-E)+s*E,c*(1-E)+l*E);break t}g+=C}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,n=this.data;return t.data=n.slice?n.slice():Array.prototype.slice.call(n),t._len=this._len,t},e.CMD=Qn,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();function Mc(e,t,n,r,i,a,o){if(i===0)return!1;var s=i,l=0,u=e;if(o>t+s&&o>r+s||o<t-s&&o<r-s||a>e+s&&a>n+s||a<e-s&&a<n-s)return!1;if(e!==n)l=(t-r)/(e-n),u=(e*r-n*t)/(e-n);else return Math.abs(a-e)<=s/2;var c=l*a-o+u,h=c*c/(l*l+1);return h<=s/2*s/2}function Ppt(e,t,n,r,i,a,o,s,l,u,c){if(l===0)return!1;var h=l;if(c>t+h&&c>r+h&&c>a+h&&c>s+h||c<t-h&&c<r-h&&c<a-h&&c<s-h||u>e+h&&u>n+h&&u>i+h&&u>o+h||u<e-h&&u<n-h&&u<i-h&&u<o-h)return!1;var f=Xq(e,t,n,r,i,a,o,s,u,c,null);return f<=h/2}function CK(e,t,n,r,i,a,o,s,l){if(o===0)return!1;var u=o;if(l>t+u&&l>r+u&&l>a+u||l<t-u&&l<r-u&&l<a-u||s>e+u&&s>n+u&&s>i+u||s<e-u&&s<n-u&&s<i-u)return!1;var c=Yq(e,t,n,r,i,a,s,l,null);return c<=u/2}var $4=Math.PI*2;function Yo(e){return e%=$4,e<0&&(e+=$4),e}var e_=Math.PI*2;function Rpt(e,t,n,r,i,a,o,s,l){if(o===0)return!1;var u=o;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>n||c+u<n)return!1;if(Math.abs(r-i)%e_<1e-4)return!0;if(a){var h=r;r=Yo(i),i=Yo(h)}else r=Yo(r),i=Yo(i);r>i&&(i+=e_);var f=Math.atan2(l,s);return f<0&&(f+=e_),f>=r&&f<=i||f+e_>=r&&f+e_<=i}function Sc(e,t,n,r,i,a){if(a>t&&a>r||a<t&&a<r||r===t)return 0;var o=(a-t)/(r-t),s=r<t?1:-1;(o===1||o===0)&&(s=r<t?.5:-.5);var l=o*(n-e)+e;return l===i?1/0:l>i?s:0}var Nh=zu.CMD,Fd=Math.PI*2,Opt=1e-4;function Npt(e,t){return Math.abs(e-t)<Opt}var Ba=[-1,-1,-1],ys=[-1,-1];function Bpt(){var e=ys[0];ys[0]=ys[1],ys[1]=e}function kpt(e,t,n,r,i,a,o,s,l,u){if(u>t&&u>r&&u>a&&u>s||u<t&&u<r&&u<a&&u<s)return 0;var c=BM(t,r,a,s,u,Ba);if(c===0)return 0;for(var h=0,f=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=Ba[v],m=g===0||g===1?.5:1,_=Si(e,n,i,o,g);_<l||(f<0&&(f=$q(t,r,a,s,ys),ys[1]<ys[0]&&f>1&&Bpt(),d=Si(t,r,a,s,ys[0]),f>1&&(p=Si(t,r,a,s,ys[1]))),f===2?g<ys[0]?h+=d<t?m:-m:g<ys[1]?h+=p<d?m:-m:h+=s<p?m:-m:g<ys[0]?h+=d<t?m:-m:h+=s<d?m:-m)}return h}function Fpt(e,t,n,r,i,a,o,s){if(s>t&&s>r&&s>a||s<t&&s<r&&s<a)return 0;var l=Qft(t,r,a,s,Ba);if(l===0)return 0;var u=jq(t,r,a);if(u>=0&&u<=1){for(var c=0,h=Ki(t,r,a,u),f=0;f<l;f++){var d=Ba[f]===0||Ba[f]===1?.5:1,p=Ki(e,n,i,Ba[f]);p<o||(Ba[f]<u?c+=h<t?d:-d:c+=a<h?d:-d)}return c}else{var d=Ba[0]===0||Ba[0]===1?.5:1,p=Ki(e,n,i,Ba[0]);return p<o?0:a<t?d:-d}}function zpt(e,t,n,r,i,a,o,s){if(s-=t,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);Ba[0]=-l,Ba[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=Fd-1e-4){r=0,i=Fd;var c=a?1:-1;return o>=Ba[0]+e&&o<=Ba[1]+e?c:0}if(r>i){var h=r;r=i,i=h}r<0&&(r+=Fd,i+=Fd);for(var f=0,d=0;d<2;d++){var p=Ba[d];if(p+e>o){var v=Math.atan2(s,p),c=a?1:-1;v<0&&(v=Fd+v),(v>=r&&v<=i||v+Fd>=r&&v+Fd<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),f+=c)}}return f}function EK(e,t,n,r,i){for(var a=e.data,o=e.len(),s=0,l=0,u=0,c=0,h=0,f,d,p=0;p<o;){var v=a[p++],g=p===1;switch(v===Nh.M&&p>1&&(n||(s+=Sc(l,u,c,h,r,i))),g&&(l=a[p],u=a[p+1],c=l,h=u),v){case Nh.M:c=a[p++],h=a[p++],l=c,u=h;break;case Nh.L:if(n){if(Mc(l,u,a[p],a[p+1],t,r,i))return!0}else s+=Sc(l,u,a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Nh.C:if(n){if(Ppt(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],t,r,i))return!0}else s+=kpt(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Nh.Q:if(n){if(CK(l,u,a[p++],a[p++],a[p],a[p+1],t,r,i))return!0}else s+=Fpt(l,u,a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Nh.A:var m=a[p++],_=a[p++],y=a[p++],x=a[p++],S=a[p++],b=a[p++];p+=1;var w=!!(1-a[p++]);f=Math.cos(S)*y+m,d=Math.sin(S)*x+_,g?(c=f,h=d):s+=Sc(l,u,f,d,r,i);var A=(r-m)*x/y+m;if(n){if(Rpt(m,_,x,S,S+b,w,t,A,i))return!0}else s+=zpt(m,_,x,S,S+b,w,A,i);l=Math.cos(S+b)*y+m,u=Math.sin(S+b)*x+_;break;case Nh.R:c=l=a[p++],h=u=a[p++];var T=a[p++],M=a[p++];if(f=c+T,d=h+M,n){if(Mc(c,h,f,h,t,r,i)||Mc(f,h,f,d,t,r,i)||Mc(f,d,c,d,t,r,i)||Mc(c,d,c,h,t,r,i))return!0}else s+=Sc(f,h,f,d,r,i),s+=Sc(c,d,c,h,r,i);break;case Nh.Z:if(n){if(Mc(l,u,c,h,t,r,i))return!0}else s+=Sc(l,u,c,h,r,i);l=c,u=h;break}}return!n&&!Npt(u,h)&&(s+=Sc(l,u,c,h,r,i)||0),s!==0}function Upt(e,t,n){return EK(e,0,!1,t,n)}function Vpt(e,t,n,r){return EK(e,t,!0,n,r)}var GM=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Zp),Gpt={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},aE.style)},MD=Fu.concat(["invisible","culling","z","z2","zlevel","parent"]),Ve=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.update=function(){var n=this;e.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){n.buildPath(l,n.shape)}),i.silent=!0;var a=i.style;for(var o in r)a[o]!==r[o]&&(a[o]=r[o]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var s=0;s<MD.length;++s)i[MD[s]]=this[MD[s]];i.__dirty|=jo}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(n){var r=Je(n);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var o=r[a],s=n[o];o==="style"?this.style?ut(this.style,s):this.useStyle(s):o==="shape"?ut(this.shape,s):e.prototype.attrKV.call(this,o,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(Ft(n)){var r=FM(n,0);return r>.5?pO:r>.2?Cdt:vO}else if(n)return vO}return pO},t.prototype.getInsideTextStroke=function(n){var r=this.style.fill;if(Ft(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),o=FM(n,0)<dO;if(a===o)return r}},t.prototype.buildPath=function(n,r,i){},t.prototype.pathUpdated=function(){this.__dirty&=~em},t.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},t.prototype.createPathProxy=function(){this.path=new zu(!1)},t.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return!(r==null||r==="none"||!(n.lineWidth>0))},t.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},t.prototype.getBoundingRect=function(){var n=this._rect,r=this.style,i=!n;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var o=this.path;(a||this.__dirty&em)&&(o.beginPath(),this.buildPath(o,this.shape,!1),this.pathUpdated()),n=o.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||i){s.copy(n);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return n},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect(),o=this.style;if(n=i[0],r=i[1],a.contain(n,r)){var s=this.path;if(this.hasStroke()){var l=o.lineWidth,u=o.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Vpt(s,l/u,n,r)))return!0}if(this.hasFill())return Upt(s,n,r)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=em,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(n){return this.animate("shape",n)},t.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(n,r){n==="shape"?this.setShape(r):e.prototype.attrKV.call(this,n,r)},t.prototype.setShape=function(n,r){var i=this.shape;return i||(i=this.shape={}),typeof n=="string"?i[n]=r:ut(i,n),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&em)},t.prototype.createStyle=function(n){return ZC(GM,n)},t.prototype._innerSaveToNormal=function(n){e.prototype._innerSaveToNormal.call(this,n);var r=this._normalState;n.shape&&!r.shape&&(r.shape=ut({},this.shape))},t.prototype._applyStateObj=function(n,r,i,a,o,s){e.prototype._applyStateObj.call(this,n,r,i,a,o,s);var l=!(r&&a),u;if(r&&r.shape?o?a?u=r.shape:(u=ut({},i.shape),ut(u,r.shape)):(u=ut({},a?this.shape:i.shape),ut(u,r.shape)):l&&(u=i.shape),u)if(o){this.shape=ut({},this.shape);for(var c={},h=Je(u),f=0;f<h.length;f++){var d=h[f];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(n,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(n){for(var r=e.prototype._mergeStates.call(this,n),i,a=0;a<n.length;a++){var o=n[a];o.shape&&(i=i||{},this._mergeStyle(i,o.shape))}return i&&(r.shape=i),r},t.prototype.getAnimationStyleProps=function(){return Gpt},t.prototype.isZeroArea=function(){return!1},t.extend=function(n){var r=function(a){gr(o,a);function o(s){var l=a.call(this,s)||this;return n.init&&n.init.call(l,s),l}return o.prototype.getDefaultStyle=function(){return ce(n.style)},o.prototype.getDefaultShape=function(){return ce(n.shape)},o}(t);for(var i in n)typeof n[i]=="function"&&(r.prototype[i]=n[i]);return r},t.initDefaultProps=function(){var n=t.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=jo|Z_|em}(),t}(Gs),Hpt=te({strokeFirst:!0,font:kf,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},GM),sy=function(e){gr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var n=this.style,r=n.stroke;return r!=null&&r!=="none"&&n.lineWidth>0},t.prototype.hasFill=function(){var n=this.style,r=n.fill;return r!=null&&r!=="none"},t.prototype.createStyle=function(n){return ZC(Hpt,n)},t.prototype.setBoundingRect=function(n){this._rect=n},t.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var r=n.text;r!=null?r+="":r="";var i=v1(r,n.font,n.textAlign,n.textBaseline);if(i.x+=n.x||0,i.y+=n.y||0,this.hasStroke()){var a=n.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var n=t.prototype;n.dirtyRectTolerance=10}(),t}(Gs);sy.prototype.type="tspan";var Wpt=te({x:0,y:0},Zp),$pt={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},aE.style)};function Xpt(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var Wi=function(e){gr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(n){return ZC(Wpt,n)},t.prototype._getSize=function(n){var r=this.style,i=r[n];if(i!=null)return i;var a=Xpt(r.image)?r.image:this.__image;if(!a)return 0;var o=n==="width"?"height":"width",s=r[o];return s==null?a[n]:a[n]/a[o]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return $pt},t.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new Ae(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Gs);Wi.prototype.type="image";function jpt(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=t.r,s,l,u,c;i<0&&(n=n+i,i=-i),a<0&&(r=r+a,a=-a),typeof o=="number"?s=l=u=c=o:o instanceof Array?o.length===1?s=l=u=c=o[0]:o.length===2?(s=u=o[0],l=c=o[1]):o.length===3?(s=o[0],l=c=o[1],u=o[2]):(s=o[0],l=o[1],u=o[2],c=o[3]):s=l=u=c=0;var h;s+l>i&&(h=s+l,s*=i/h,l*=i/h),u+c>i&&(h=u+c,u*=i/h,c*=i/h),l+u>a&&(h=l+u,l*=a/h,u*=a/h),s+c>a&&(h=s+c,s*=a/h,c*=a/h),e.moveTo(n+s,r),e.lineTo(n+i-l,r),l!==0&&e.arc(n+i-l,r+l,l,-Math.PI/2,0),e.lineTo(n+i,r+a-u),u!==0&&e.arc(n+i-u,r+a-u,u,0,Math.PI/2),e.lineTo(n+c,r+a),c!==0&&e.arc(n+c,r+a-c,c,Math.PI/2,Math.PI),e.lineTo(n,r+s),s!==0&&e.arc(n+s,r+s,s,Math.PI,Math.PI*1.5)}var vm=Math.round;function DK(e,t,n){if(t){var r=t.x1,i=t.x2,a=t.y1,o=t.y2;e.x1=r,e.x2=i,e.y1=a,e.y2=o;var s=n&&n.lineWidth;return s&&(vm(r*2)===vm(i*2)&&(e.x1=e.x2=Dp(r,s,!0)),vm(a*2)===vm(o*2)&&(e.y1=e.y2=Dp(a,s,!0))),e}}function IK(e,t,n){if(t){var r=t.x,i=t.y,a=t.width,o=t.height;e.x=r,e.y=i,e.width=a,e.height=o;var s=n&&n.lineWidth;return s&&(e.x=Dp(r,s,!0),e.y=Dp(i,s,!0),e.width=Math.max(Dp(r+a,s,!1)-e.x,a===0?0:1),e.height=Math.max(Dp(i+o,s,!1)-e.y,o===0?0:1)),e}}function Dp(e,t,n){if(!t)return e;var r=vm(e*2);return(r+vm(t))%2===0?r/2:(r+(n?1:-1))/2}var Ypt=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),qpt={},nn=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Ypt},t.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=IK(qpt,r,this.style);i=l.x,a=l.y,o=l.width,s=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,o=r.width,s=r.height;r.r?jpt(n,r):n.rect(i,a,o,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Ve);nn.prototype.type="rect";var X4={fill:"#000"},j4=2,Kpt={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},aE.style)},Qe=function(e){gr(t,e);function t(n){var r=e.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=X4,r.attr(n),r}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var r=this._children[n];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},t.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(n){var r=this.innerTransformable;return r?r.getLocalTransform(n):e.prototype.getLocalTransform.call(this,n)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,Qpt(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(n){e.prototype.addSelfToZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=n},t.prototype.removeSelfFromZr=function(n){e.prototype.removeSelfFromZr.call(this,n);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new Ae(0,0,0,0),r=this._children,i=[],a=null,o=0;o<r.length;o++){var s=r[o],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(n.copy(l),n.applyTransform(u),a=a||n.clone(),a.union(n)):(a=a||l.clone(),a.union(l))}this._rect=a||n}return this._rect},t.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||X4},t.prototype.setTextContent=function(n){},t.prototype._mergeStyle=function(n,r){if(!r)return n;var i=r.rich,a=n.rich||i&&{};return ut(n,r),i&&a?(this._mergeRich(a,i),n.rich=a):a&&(n.rich=a),n},t.prototype._mergeRich=function(n,r){for(var i=Je(r),a=0;a<i.length;a++){var o=i[a];n[o]=n[o]||{},ut(n[o],r[o])}},t.prototype.getAnimationStyleProps=function(){return Kpt},t.prototype._getOrCreateChild=function(n){var r=this._children[this._childCursor];return(!r||!(r instanceof n))&&(r=new n),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},t.prototype._updatePlainTexts=function(){var n=this.style,r=n.font||kf,i=n.padding,a=t5(n),o=xpt(a,n),s=AD(n),l=!!n.backgroundColor,u=o.outerHeight,c=o.outerWidth,h=o.contentWidth,f=o.lines,d=o.lineHeight,p=this._defaultStyle,v=n.x||0,g=n.y||0,m=n.align||p.align||"left",_=n.verticalAlign||p.verticalAlign||"top",y=v,x=nm(g,o.contentHeight,_);if(s||i){var S=Q_(v,c,m),b=nm(g,u,_);s&&this._renderBackground(n,n,S,b,c,u)}x+=d/2,i&&(y=Q4(v,m,i),_==="top"?x+=i[0]:_==="bottom"&&(x-=i[2]));for(var w=0,A=!1,T=J4("fill"in n?n.fill:(A=!0,p.fill)),M=Z4("stroke"in n?n.stroke:!l&&(!p.autoStroke||A)?(w=j4,p.stroke):null),C=n.textShadowBlur>0,E=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),D=o.calculatedLineHeight,I=0;I<f.length;I++){var L=this._getOrCreateChild(sy),P=L.createStyle();L.useStyle(P),P.text=f[I],P.x=y,P.y=x,m&&(P.textAlign=m),P.textBaseline="middle",P.opacity=n.opacity,P.strokeFirst=!0,C&&(P.shadowBlur=n.textShadowBlur||0,P.shadowColor=n.textShadowColor||"transparent",P.shadowOffsetX=n.textShadowOffsetX||0,P.shadowOffsetY=n.textShadowOffsetY||0),P.stroke=M,P.fill=T,M&&(P.lineWidth=n.lineWidth||w,P.lineDash=n.lineDash,P.lineDashOffset=n.lineDashOffset||0),P.font=r,q4(P,n),x+=d,E&&L.setBoundingRect(new Ae(Q_(P.x,n.width,P.textAlign),nm(P.y,D,P.textBaseline),h,D))}},t.prototype._updateRichTexts=function(){var n=this.style,r=t5(n),i=wpt(r,n),a=i.width,o=i.outerWidth,s=i.outerHeight,l=n.padding,u=n.x||0,c=n.y||0,h=this._defaultStyle,f=n.align||h.align,d=n.verticalAlign||h.verticalAlign,p=Q_(u,o,f),v=nm(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var _=g+a;AD(n)&&this._renderBackground(n,n,p,v,o,s);for(var y=!!n.backgroundColor,x=0;x<i.lines.length;x++){for(var S=i.lines[x],b=S.tokens,w=b.length,A=S.lineHeight,T=S.width,M=0,C=g,E=_,D=w-1,I=void 0;M<w&&(I=b[M],!I.align||I.align==="left");)this._placeToken(I,n,A,m,C,"left",y),T-=I.width,C+=I.width,M++;for(;D>=0&&(I=b[D],I.align==="right");)this._placeToken(I,n,A,m,E,"right",y),T-=I.width,E-=I.width,D--;for(C+=(a-(C-g)-(_-E)-T)/2;M<=D;)I=b[M],this._placeToken(I,n,A,m,C+I.width/2,"center",y),C+=I.width,M++;m+=A}},t.prototype._placeToken=function(n,r,i,a,o,s,l){var u=r.rich[n.styleName]||{};u.text=n.text;var c=n.verticalAlign,h=a+i/2;c==="top"?h=a+n.height/2:c==="bottom"&&(h=a+i-n.height/2);var f=!n.isLineHolder&&AD(u);f&&this._renderBackground(u,r,s==="right"?o-n.width:s==="center"?o-n.width/2:o,h-n.height/2,n.width,n.height);var d=!!u.backgroundColor,p=n.textPadding;p&&(o=Q4(o,s,p),h-=n.height/2-p[0]-n.innerHeight/2);var v=this._getOrCreateChild(sy),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,_=!1,y=0,x=J4("fill"in u?u.fill:"fill"in r?r.fill:(_=!0,m.fill)),S=Z4("stroke"in u?u.stroke:"stroke"in r?r.stroke:!d&&!l&&(!m.autoStroke||_)?(y=j4,m.stroke):null),b=u.textShadowBlur>0||r.textShadowBlur>0;g.text=n.text,g.x=o,g.y=h,b&&(g.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,g.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=n.font||kf,g.opacity=Du(u.opacity,r.opacity,1),q4(g,u),S&&(g.lineWidth=Du(u.lineWidth,r.lineWidth,y),g.lineDash=xe(u.lineDash,r.lineDash),g.lineDashOffset=r.lineDashOffset||0,g.stroke=S),x&&(g.fill=x);var w=n.contentWidth,A=n.contentHeight;v.setBoundingRect(new Ae(Q_(g.x,w,g.textAlign),nm(g.y,A,g.textBaseline),w,A))},t.prototype._renderBackground=function(n,r,i,a,o,s){var l=n.backgroundColor,u=n.borderWidth,c=n.borderColor,h=l&&l.image,f=l&&!h,d=n.borderRadius,p=this,v,g;if(f||n.lineHeight||u&&c){v=this._getOrCreateChild(nn),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=a,m.width=o,m.height=s,m.r=d,v.dirtyShape()}if(f){var _=v.style;_.fill=l||null,_.fillOpacity=xe(n.fillOpacity,1)}else if(h){g=this._getOrCreateChild(Wi),g.onload=function(){p.dirtyStyle()};var y=g.style;y.image=l.image,y.x=i,y.y=a,y.width=o,y.height=s}if(u&&c){var _=v.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=xe(n.strokeOpacity,1),_.lineDash=n.borderDash,_.lineDashOffset=n.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var x=(v||g).style;x.shadowBlur=n.shadowBlur||0,x.shadowColor=n.shadowColor||"transparent",x.shadowOffsetX=n.shadowOffsetX||0,x.shadowOffsetY=n.shadowOffsetY||0,x.opacity=Du(n.opacity,r.opacity,1)},t.makeFont=function(n){var r="";return PK(n)&&(r=[n.fontStyle,n.fontWeight,LK(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),r&&Sl(r)||n.textFont||n.font},t}(Gs),Zpt={left:!0,right:1,center:1},Jpt={top:1,bottom:1,middle:1},Y4=["fontStyle","fontWeight","fontSize","fontFamily"];function LK(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?bB+"px":e+"px"}function q4(e,t){for(var n=0;n<Y4.length;n++){var r=Y4[n],i=t[r];i!=null&&(e[r]=i)}}function PK(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function Qpt(e){return K4(e),R(e.rich,K4),e}function K4(e){if(e){e.font=Qe.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||Zpt[t]?t:"left";var n=e.verticalAlign;n==="center"&&(n="middle"),e.verticalAlign=n==null||Jpt[n]?n:"top";var r=e.padding;r&&(e.padding=EB(e.padding))}}function Z4(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function J4(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function Q4(e,t,n){return t==="right"?e-n[1]:t==="center"?e+n[3]/2-n[1]/2:e+n[3]}function t5(e){var t=e.text;return t!=null&&(t+=""),t}function AD(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}var fe=vn(),SO=function(e,t,n,r){if(r){var i=fe(r);i.dataIndex=n,i.dataType=t,i.seriesIndex=e,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var o=fe(a);o.seriesIndex=e,o.dataIndex=n,o.dataType=t,o.ssrType="chart"})}},e5=1,n5={},RK=vn(),VB=vn(),GB=0,m1=1,sE=2,$a=["emphasis","blur","select"],ub=["normal","emphasis","blur","select"],n0=10,tvt=9,Jp="highlight",qT="downplay",Px="select",KT="unselect",Rx="toggleSelect";function eg(e){return e!=null&&e!=="none"}function lE(e,t,n){e.onHoverStateChange&&(e.hoverState||0)!==n&&e.onHoverStateChange(t),e.hoverState=n}function OK(e){lE(e,"emphasis",sE)}function NK(e){e.hoverState===sE&&lE(e,"normal",GB)}function HB(e){lE(e,"blur",m1)}function BK(e){e.hoverState===m1&&lE(e,"normal",GB)}function evt(e){e.selected=!0}function nvt(e){e.selected=!1}function r5(e,t,n){t(e,n)}function mh(e,t,n){r5(e,t,n),e.isGroup&&e.traverse(function(r){r5(r,t,n)})}function HM(e,t){switch(t){case"emphasis":e.hoverState=sE;break;case"normal":e.hoverState=GB;break;case"blur":e.hoverState=m1;break;case"select":e.selected=!0}}function rvt(e,t,n,r){for(var i=e.style,a={},o=0;o<t.length;o++){var s=t[o],l=i[s];a[s]=l??(r&&r[s])}for(var o=0;o<e.animators.length;o++){var u=e.animators[o];u.__fromStateTransition&&u.__fromStateTransition.indexOf(n)<0&&u.targetName==="style"&&u.saveTo(a,t)}return a}function ivt(e,t,n,r){var i=n&&Le(n,"select")>=0,a=!1;if(e instanceof Ve){var o=RK(e),s=i&&o.selectFill||o.normalFill,l=i&&o.selectStroke||o.normalStroke;if(eg(s)||eg(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(a=!0,r=ut({},r),u=ut({},u),u.fill=s):!eg(u.fill)&&eg(s)?(a=!0,r=ut({},r),u=ut({},u),u.fill=oO(s)):!eg(u.stroke)&&eg(l)&&(a||(r=ut({},r),u=ut({},u)),u.stroke=oO(l)),r.style=u}}if(r&&r.z2==null){a||(r=ut({},r));var c=e.z2EmphasisLift;r.z2=e.z2+(c??n0)}return r}function avt(e,t,n){if(n&&n.z2==null){n=ut({},n);var r=e.z2SelectLift;n.z2=e.z2+(r??tvt)}return n}function ovt(e,t,n){var r=Le(e.currentStates,t)>=0,i=e.style.opacity,a=r?null:rvt(e,["opacity"],t,{opacity:1});n=n||{};var o=n.style||{};return o.opacity==null&&(n=ut({},n),o=ut({opacity:r?i:a.opacity*.1},o),n.style=o),n}function CD(e,t){var n=this.states[e];if(this.style){if(e==="emphasis")return ivt(this,e,t,n);if(e==="blur")return ovt(this,e,n);if(e==="select")return avt(this,e,n)}return n}function pv(e){e.stateProxy=CD;var t=e.getTextContent(),n=e.getTextGuideLine();t&&(t.stateProxy=CD),n&&(n.stateProxy=CD)}function i5(e,t){!UK(e,t)&&!e.__highByOuter&&mh(e,OK)}function a5(e,t){!UK(e,t)&&!e.__highByOuter&&mh(e,NK)}function qc(e,t){e.__highByOuter|=1<<(t||0),mh(e,OK)}function Kc(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&mh(e,NK)}function kK(e){mh(e,HB)}function WB(e){mh(e,BK)}function FK(e){mh(e,evt)}function zK(e){mh(e,nvt)}function UK(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function VK(e){var t=e.getModel(),n=[],r=[];t.eachComponent(function(i,a){var o=VB(a),s=i==="series",l=s?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!s&&r.push(l),o.isBlured&&(l.group.traverse(function(u){BK(u)}),s&&n.push(a)),o.isBlured=!1}),R(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(n,!1,t)})}function wO(e,t,n,r){var i=r.getModel();n=n||"coordinateSystem";function a(u,c){for(var h=0;h<c.length;h++){var f=u.getItemGraphicEl(c[h]);f&&WB(f)}}if(e!=null&&!(!t||t==="none")){var o=i.getSeriesByIndex(e),s=o.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=o===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var f=h&&s?h===s:c;if(!(n==="series"&&!c||n==="coordinateSystem"&&!f||t==="series"&&c)){var d=r.getViewOfSeriesModel(u);if(d.group.traverse(function(g){g.__highByOuter&&c&&t==="self"||HB(g)}),Aa(t))a(u.getData(),t);else if(se(t))for(var p=Je(t),v=0;v<p.length;v++)a(u.getData(p[v]),t[p[v]]);l.push(u),VB(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var h=r.getViewOfComponentModel(c);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,i)}})}}function TO(e,t,n){if(!(e==null||t==null)){var r=n.getModel().getComponent(e,t);if(r){VB(r).isBlured=!0;var i=n.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){HB(a)})}}}function svt(e,t,n){var r=e.seriesIndex,i=e.getData(t.dataType);if(i){var a=fv(i,t);a=(ht(a)?a[0]:a)||0;var o=i.getItemGraphicEl(a);if(!o)for(var s=i.count(),l=0;!o&&l<s;)o=i.getItemGraphicEl(l++);if(o){var u=fe(o);wO(r,u.focus,u.blurScope,n)}else{var c=e.get(["emphasis","focus"]),h=e.get(["emphasis","blurScope"]);c!=null&&wO(r,c,h,n)}}}function $B(e,t,n,r){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||n==null)return i;var a=r.getModel().getComponent(e,t);if(!a)return i;var o=r.getViewOfComponentModel(a);if(!o||!o.findHighDownDispatchers)return i;for(var s=o.findHighDownDispatchers(n),l,u=0;u<s.length;u++)if(fe(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function lvt(e,t,n){var r=fe(e),i=$B(r.componentMainType,r.componentIndex,r.componentHighDownName,n),a=i.dispatchers,o=i.focusSelf;a?(o&&TO(r.componentMainType,r.componentIndex,n),R(a,function(s){return i5(s,t)})):(wO(r.seriesIndex,r.focus,r.blurScope,n),r.focus==="self"&&TO(r.componentMainType,r.componentIndex,n),i5(e,t))}function uvt(e,t,n){VK(n);var r=fe(e),i=$B(r.componentMainType,r.componentIndex,r.componentHighDownName,n).dispatchers;i?R(i,function(a){return a5(a,t)}):a5(e,t)}function cvt(e,t,n){if(AO(t)){var r=t.dataType,i=e.getData(r),a=fv(i,t);ht(a)||(a=[a]),e[t.type===Rx?"toggleSelect":t.type===Px?"select":"unselect"](a,r)}}function o5(e){var t=e.getAllData();R(t,function(n){var r=n.data,i=n.type;r.eachItemGraphicEl(function(a,o){e.isSelected(o,i)?FK(a):zK(a)})})}function hvt(e){var t=[];return e.eachSeries(function(n){var r=n.getAllData();R(r,function(i){i.data;var a=i.type,o=n.getSelectedDataIndices();if(o.length>0){var s={dataIndex:o,seriesIndex:n.seriesIndex};a!=null&&(s.dataType=a),t.push(s)}})}),t}function Qp(e,t,n){Ip(e,!0),mh(e,pv),MO(e,t,n)}function fvt(e){Ip(e,!1)}function Vr(e,t,n,r){r?fvt(e):Qp(e,t,n)}function MO(e,t,n){var r=fe(e);t!=null?(r.focus=t,r.blurScope=n):r.focus&&(r.focus=null)}var s5=["emphasis","blur","select"],dvt={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function ca(e,t,n,r){n=n||"itemStyle";for(var i=0;i<s5.length;i++){var a=s5[i],o=t.getModel([a,n]),s=e.ensureState(a);s.style=r?r(o):o[dvt[n]]()}}function Ip(e,t){var n=t===!1,r=e;e.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!n||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!n)}function cb(e){return!!(e&&e.__highDownDispatcher)}function pvt(e,t,n){var r=fe(e);r.componentMainType=t.mainType,r.componentIndex=t.componentIndex,r.componentHighDownName=n}function vvt(e){var t=n5[e];return t==null&&e5<=32&&(t=n5[e]=e5++),t}function AO(e){var t=e.type;return t===Px||t===KT||t===Rx}function l5(e){var t=e.type;return t===Jp||t===qT}function gvt(e){var t=RK(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var n=e.states.select||{};t.selectFill=n.style&&n.style.fill||null,t.selectStroke=n.style&&n.style.stroke||null}var ng=zu.CMD,mvt=[[],[],[]],u5=Math.sqrt,yvt=Math.atan2;function GK(e,t){if(t){var n=e.data,r=e.len(),i,a,o,s,l,u,c=ng.M,h=ng.C,f=ng.L,d=ng.R,p=ng.A,v=ng.Q;for(o=0,s=0;o<r;){switch(i=n[o++],s=o,a=0,i){case c:a=1;break;case f:a=1;break;case h:a=3;break;case v:a=2;break;case p:var g=t[4],m=t[5],_=u5(t[0]*t[0]+t[1]*t[1]),y=u5(t[2]*t[2]+t[3]*t[3]),x=yvt(-t[1]/y,t[0]/_);n[o]*=_,n[o++]+=g,n[o]*=y,n[o++]+=m,n[o++]*=_,n[o++]*=y,n[o++]+=x,n[o++]+=x,o+=2,s=o;break;case d:u[0]=n[o++],u[1]=n[o++],Oi(u,u,t),n[s++]=u[0],n[s++]=u[1],u[0]+=n[o++],u[1]+=n[o++],Oi(u,u,t),n[s++]=u[0],n[s++]=u[1]}for(l=0;l<a;l++){var S=mvt[l];S[0]=n[o++],S[1]=n[o++],Oi(S,S,t),n[s++]=S[0],n[s++]=S[1]}}e.increaseVersion()}}var ED=Math.sqrt,OS=Math.sin,NS=Math.cos,n_=Math.PI;function c5(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function CO(e,t){return(e[0]*t[0]+e[1]*t[1])/(c5(e)*c5(t))}function h5(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(CO(e,t))}function f5(e,t,n,r,i,a,o,s,l,u,c){var h=l*(n_/180),f=NS(h)*(e-n)/2+OS(h)*(t-r)/2,d=-1*OS(h)*(e-n)/2+NS(h)*(t-r)/2,p=f*f/(o*o)+d*d/(s*s);p>1&&(o*=ED(p),s*=ED(p));var v=(i===a?-1:1)*ED((o*o*(s*s)-o*o*(d*d)-s*s*(f*f))/(o*o*(d*d)+s*s*(f*f)))||0,g=v*o*d/s,m=v*-s*f/o,_=(e+n)/2+NS(h)*g-OS(h)*m,y=(t+r)/2+OS(h)*g+NS(h)*m,x=h5([1,0],[(f-g)/o,(d-m)/s]),S=[(f-g)/o,(d-m)/s],b=[(-1*f-g)/o,(-1*d-m)/s],w=h5(S,b);if(CO(S,b)<=-1&&(w=n_),CO(S,b)>=1&&(w=0),w<0){var A=Math.round(w/n_*1e6)/1e6;w=n_*2+A%2*n_}c.addData(u,_,y,o,s,x,w,h,a)}var _vt=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,xvt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function bvt(e){var t=new zu;if(!e)return t;var n=0,r=0,i=n,a=r,o,s=zu.CMD,l=e.match(_vt);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],h=c.charAt(0),f=void 0,d=c.match(xvt)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,_=void 0,y=void 0,x=void 0,S=void 0,b=void 0,w=void 0,A=n,T=r,M=void 0,C=void 0;switch(h){case"l":n+=d[g++],r+=d[g++],f=s.L,t.addData(f,n,r);break;case"L":n=d[g++],r=d[g++],f=s.L,t.addData(f,n,r);break;case"m":n+=d[g++],r+=d[g++],f=s.M,t.addData(f,n,r),i=n,a=r,h="l";break;case"M":n=d[g++],r=d[g++],f=s.M,t.addData(f,n,r),i=n,a=r,h="L";break;case"h":n+=d[g++],f=s.L,t.addData(f,n,r);break;case"H":n=d[g++],f=s.L,t.addData(f,n,r);break;case"v":r+=d[g++],f=s.L,t.addData(f,n,r);break;case"V":r=d[g++],f=s.L,t.addData(f,n,r);break;case"C":f=s.C,t.addData(f,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),n=d[g-2],r=d[g-1];break;case"c":f=s.C,t.addData(f,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r),n+=d[g-2],r+=d[g-1];break;case"S":m=n,_=r,M=t.len(),C=t.data,o===s.C&&(m+=n-C[M-4],_+=r-C[M-3]),f=s.C,A=d[g++],T=d[g++],n=d[g++],r=d[g++],t.addData(f,m,_,A,T,n,r);break;case"s":m=n,_=r,M=t.len(),C=t.data,o===s.C&&(m+=n-C[M-4],_+=r-C[M-3]),f=s.C,A=n+d[g++],T=r+d[g++],n+=d[g++],r+=d[g++],t.addData(f,m,_,A,T,n,r);break;case"Q":A=d[g++],T=d[g++],n=d[g++],r=d[g++],f=s.Q,t.addData(f,A,T,n,r);break;case"q":A=d[g++]+n,T=d[g++]+r,n+=d[g++],r+=d[g++],f=s.Q,t.addData(f,A,T,n,r);break;case"T":m=n,_=r,M=t.len(),C=t.data,o===s.Q&&(m+=n-C[M-4],_+=r-C[M-3]),n=d[g++],r=d[g++],f=s.Q,t.addData(f,m,_,n,r);break;case"t":m=n,_=r,M=t.len(),C=t.data,o===s.Q&&(m+=n-C[M-4],_+=r-C[M-3]),n+=d[g++],r+=d[g++],f=s.Q,t.addData(f,m,_,n,r);break;case"A":y=d[g++],x=d[g++],S=d[g++],b=d[g++],w=d[g++],A=n,T=r,n=d[g++],r=d[g++],f=s.A,f5(A,T,n,r,b,w,y,x,S,f,t);break;case"a":y=d[g++],x=d[g++],S=d[g++],b=d[g++],w=d[g++],A=n,T=r,n+=d[g++],r+=d[g++],f=s.A,f5(A,T,n,r,b,w,y,x,S,f,t);break}}(h==="z"||h==="Z")&&(f=s.Z,t.addData(f),n=i,r=a),o=f}return t.toStatic(),t}var HK=function(e){gr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(n){},t}(Ve);function WK(e){return e.setData!=null}function $K(e,t){var n=bvt(e),r=ut({},t);return r.buildPath=function(i){if(WK(i)){i.setData(n.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;n.rebuildPath(a,1)}},r.applyTransform=function(i){GK(n,i),this.dirtyShape()},r}function XK(e,t){return new HK($K(e,t))}function Svt(e,t){var n=$K(e,t),r=function(i){gr(a,i);function a(o){var s=i.call(this,o)||this;return s.applyTransform=n.applyTransform,s.buildPath=n.buildPath,s}return a}(HK);return r}function wvt(e,t){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i];n.push(a.getUpdatedPathProxy(!0))}var o=new Ve(t);return o.createPathProxy(),o.buildPath=function(s){if(WK(s)){s.appendPath(n);var l=s.getContext();l&&s.rebuildPath(l,1)}},o}function XB(e,t){t=t||{};var n=new Ve;return e.shape&&n.setShape(e.shape),n.setStyle(e.style),t.bakeTransform?GK(n.path,e.getComputedTransform()):t.toLocal?n.setLocalTransform(e.getComputedTransform()):n.copyTransform(e),n.buildPath=e.buildPath,n.applyTransform=n.applyTransform,n.z=e.z,n.z2=e.z2,n.zlevel=e.zlevel,n}var Tvt=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),yh=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Tvt},t.prototype.buildPath=function(n,r){n.moveTo(r.cx+r.r,r.cy),n.arc(r.cx,r.cy,r.r,0,Math.PI*2)},t}(Ve);yh.prototype.type="circle";var Mvt=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),uE=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Mvt},t.prototype.buildPath=function(n,r){var i=.5522848,a=r.cx,o=r.cy,s=r.rx,l=r.ry,u=s*i,c=l*i;n.moveTo(a-s,o),n.bezierCurveTo(a-s,o-c,a-u,o-l,a,o-l),n.bezierCurveTo(a+u,o-l,a+s,o-c,a+s,o),n.bezierCurveTo(a+s,o+c,a+u,o+l,a,o+l),n.bezierCurveTo(a-u,o+l,a-s,o+c,a-s,o),n.closePath()},t}(Ve);uE.prototype.type="ellipse";var jK=Math.PI,DD=jK*2,zd=Math.sin,rg=Math.cos,Avt=Math.acos,va=Math.atan2,d5=Math.abs,Ox=Math.sqrt,tx=Math.max,Yl=Math.min,sl=1e-4;function Cvt(e,t,n,r,i,a,o,s){var l=n-e,u=r-t,c=o-i,h=s-a,f=h*l-c*u;if(!(f*f<sl))return f=(c*(t-a)-h*(e-i))/f,[e+f*l,t+f*u]}function BS(e,t,n,r,i,a,o){var s=e-n,l=t-r,u=(o?a:-a)/Ox(s*s+l*l),c=u*l,h=-u*s,f=e+c,d=t+h,p=n+c,v=r+h,g=(f+p)/2,m=(d+v)/2,_=p-f,y=v-d,x=_*_+y*y,S=i-a,b=f*v-p*d,w=(y<0?-1:1)*Ox(tx(0,S*S*x-b*b)),A=(b*y-_*w)/x,T=(-b*_-y*w)/x,M=(b*y+_*w)/x,C=(-b*_+y*w)/x,E=A-g,D=T-m,I=M-g,L=C-m;return E*E+D*D>I*I+L*L&&(A=M,T=C),{cx:A,cy:T,x0:-c,y0:-h,x1:A*(i/S-1),y1:T*(i/S-1)}}function Evt(e){var t;if(ht(e)){var n=e.length;if(!n)return e;n===1?t=[e[0],e[0],0,0]:n===2?t=[e[0],e[0],e[1],e[1]]:n===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function Dvt(e,t){var n,r=tx(t.r,0),i=tx(t.r0||0,0),a=r>0,o=i>0;if(!(!a&&!o)){if(a||(r=i,i=0),i>r){var s=r;r=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,h=t.cy,f=!!t.clockwise,d=d5(u-l),p=d>DD&&d%DD;if(p>sl&&(d=p),!(r>sl))e.moveTo(c,h);else if(d>DD-sl)e.moveTo(c+r*rg(l),h+r*zd(l)),e.arc(c,h,r,l,u,!f),i>sl&&(e.moveTo(c+i*rg(u),h+i*zd(u)),e.arc(c,h,i,u,l,f));else{var v=void 0,g=void 0,m=void 0,_=void 0,y=void 0,x=void 0,S=void 0,b=void 0,w=void 0,A=void 0,T=void 0,M=void 0,C=void 0,E=void 0,D=void 0,I=void 0,L=r*rg(l),P=r*zd(l),B=i*rg(u),N=i*zd(u),k=d>sl;if(k){var U=t.cornerRadius;U&&(n=Evt(U),v=n[0],g=n[1],m=n[2],_=n[3]);var Z=d5(r-i)/2;if(y=Yl(Z,m),x=Yl(Z,_),S=Yl(Z,v),b=Yl(Z,g),T=w=tx(y,x),M=A=tx(S,b),(w>sl||A>sl)&&(C=r*rg(u),E=r*zd(u),D=i*rg(l),I=i*zd(l),d<jK)){var nt=Cvt(L,P,D,I,C,E,B,N);if(nt){var ct=L-nt[0],K=P-nt[1],$=C-nt[0],ot=E-nt[1],tt=1/zd(Avt((ct*$+K*ot)/(Ox(ct*ct+K*K)*Ox($*$+ot*ot)))/2),et=Ox(nt[0]*nt[0]+nt[1]*nt[1]);T=Yl(w,(r-et)/(tt+1)),M=Yl(A,(i-et)/(tt-1))}}}if(!k)e.moveTo(c+L,h+P);else if(T>sl){var xt=Yl(m,T),St=Yl(_,T),X=BS(D,I,L,P,r,xt,f),Ct=BS(C,E,B,N,r,St,f);e.moveTo(c+X.cx+X.x0,h+X.cy+X.y0),T<w&&xt===St?e.arc(c+X.cx,h+X.cy,T,va(X.y0,X.x0),va(Ct.y0,Ct.x0),!f):(xt>0&&e.arc(c+X.cx,h+X.cy,xt,va(X.y0,X.x0),va(X.y1,X.x1),!f),e.arc(c,h,r,va(X.cy+X.y1,X.cx+X.x1),va(Ct.cy+Ct.y1,Ct.cx+Ct.x1),!f),St>0&&e.arc(c+Ct.cx,h+Ct.cy,St,va(Ct.y1,Ct.x1),va(Ct.y0,Ct.x0),!f))}else e.moveTo(c+L,h+P),e.arc(c,h,r,l,u,!f);if(!(i>sl)||!k)e.lineTo(c+B,h+N);else if(M>sl){var xt=Yl(v,M),St=Yl(g,M),X=BS(B,N,C,E,i,-St,f),Ct=BS(L,P,D,I,i,-xt,f);e.lineTo(c+X.cx+X.x0,h+X.cy+X.y0),M<A&&xt===St?e.arc(c+X.cx,h+X.cy,M,va(X.y0,X.x0),va(Ct.y0,Ct.x0),!f):(St>0&&e.arc(c+X.cx,h+X.cy,St,va(X.y0,X.x0),va(X.y1,X.x1),!f),e.arc(c,h,i,va(X.cy+X.y1,X.cx+X.x1),va(Ct.cy+Ct.y1,Ct.cx+Ct.x1),f),xt>0&&e.arc(c+Ct.cx,h+Ct.cy,xt,va(Ct.y1,Ct.x1),va(Ct.y0,Ct.x0),!f))}else e.lineTo(c+B,h+N),e.arc(c,h,i,u,l,f)}e.closePath()}}}var Ivt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Xa=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Ivt},t.prototype.buildPath=function(n,r){Dvt(n,r)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Ve);Xa.prototype.type="sector";var Lvt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),y1=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Lvt},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.PI*2;n.moveTo(i+r.r,a),n.arc(i,a,r.r,0,o,!1),n.moveTo(i+r.r0,a),n.arc(i,a,r.r0,0,o,!0)},t}(Ve);y1.prototype.type="ring";function Pvt(e,t,n,r){var i=[],a=[],o=[],s=[],l,u,c,h;if(r){c=[1/0,1/0],h=[-1/0,-1/0];for(var f=0,d=e.length;f<d;f++)mf(c,c,e[f]),yf(h,h,e[f]);mf(c,c,r[0]),yf(h,h,r[1])}for(var f=0,d=e.length;f<d;f++){var p=e[f];if(n)l=e[f?f-1:d-1],u=e[(f+1)%d];else if(f===0||f===d-1){i.push(zc(e[f]));continue}else l=e[f-1],u=e[f+1];Ep(a,u,l),GT(a,a,t);var v=JR(p,l),g=JR(p,u),m=v+g;m!==0&&(v/=m,g/=m),GT(o,a,-v),GT(s,a,g);var _=s4([],p,o),y=s4([],p,s);r&&(yf(_,_,c),mf(_,_,h),yf(y,y,c),mf(y,y,h)),i.push(_),i.push(y)}return n&&i.push(i.shift()),i}function YK(e,t,n){var r=t.smooth,i=t.points;if(i&&i.length>=2){if(r){var a=Pvt(i,r,n,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var o=i.length,s=0;s<(n?o:o-1);s++){var l=a[s*2],u=a[s*2+1],c=i[(s+1)%o];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,h=i.length;s<h;s++)e.lineTo(i[s][0],i[s][1])}n&&e.closePath()}}var Rvt=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),ja=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new Rvt},t.prototype.buildPath=function(n,r){YK(n,r,!0)},t}(Ve);ja.prototype.type="polygon";var Ovt=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),Ja=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ovt},t.prototype.buildPath=function(n,r){YK(n,r,!1)},t}(Ve);Ja.prototype.type="polyline";var Nvt={},Bvt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),Ei=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Bvt},t.prototype.buildPath=function(n,r){var i,a,o,s;if(this.subPixelOptimize){var l=DK(Nvt,r,this.style);i=l.x1,a=l.y1,o=l.x2,s=l.y2}else i=r.x1,a=r.y1,o=r.x2,s=r.y2;var u=r.percent;u!==0&&(n.moveTo(i,a),u<1&&(o=i*(1-u)+o*u,s=a*(1-u)+s*u),n.lineTo(o,s))},t.prototype.pointAt=function(n){var r=this.shape;return[r.x1*(1-n)+r.x2*n,r.y1*(1-n)+r.y2*n]},t}(Ve);Ei.prototype.type="line";var no=[],kvt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function p5(e,t,n){var r=e.cpx2,i=e.cpy2;return r!=null||i!=null?[(n?_4:Si)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?_4:Si)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?rO:Ki)(e.x1,e.cpx1,e.x2,t),(n?rO:Ki)(e.y1,e.cpy1,e.y2,t)]}var _1=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new kvt},t.prototype.buildPath=function(n,r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,h=r.cpy2,f=r.percent;f!==0&&(n.moveTo(i,a),c==null||h==null?(f<1&&(ib(i,l,o,f,no),l=no[1],o=no[2],ib(a,u,s,f,no),u=no[1],s=no[2]),n.quadraticCurveTo(l,u,o,s)):(f<1&&(zf(i,l,c,o,f,no),l=no[1],c=no[2],o=no[3],zf(a,u,h,s,f,no),u=no[1],h=no[2],s=no[3]),n.bezierCurveTo(l,u,c,h,o,s)))},t.prototype.pointAt=function(n){return p5(this.shape,n,!1)},t.prototype.tangentAt=function(n){var r=p5(this.shape,n,!0);return Qy(r,r)},t}(Ve);_1.prototype.type="bezier-curve";var Fvt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),cE=function(e){gr(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Fvt},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r,0),s=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(s),h=Math.sin(s);n.moveTo(c*o+i,h*o+a),n.arc(i,a,o,s,l,!u)},t}(Ve);cE.prototype.type="arc";var jB=function(e){gr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="compound",n}return t.prototype._updatePathDirty=function(){for(var n=this.shape.paths,r=this.shapeChanged(),i=0;i<n.length;i++)r=r||n[i].shapeChanged();r&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<n.length;i++)n[i].path||n[i].createPathProxy(),n[i].path.setScale(r[0],r[1],n[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(n,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(n,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var n=this.shape.paths||[],r=0;r<n.length;r++)n[r].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ve.prototype.getBoundingRect.call(this)},t}(Ve),qK=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,n){this.colorStops.push({offset:t,color:n})},e}(),x1=function(e){gr(t,e);function t(n,r,i,a,o,s){var l=e.call(this,o)||this;return l.x=n??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=s||!1,l}return t}(qK),KK=function(e){gr(t,e);function t(n,r,i,a,o){var s=e.call(this,a)||this;return s.x=n??.5,s.y=r??.5,s.r=i??.5,s.type="radial",s.global=o||!1,s}return t}(qK),Ud=[0,0],Vd=[0,0],kS=new Me,FS=new Me,WM=function(){function e(t,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Me;for(var r=0;r<2;r++)this._axes[r]=new Me;t&&this.fromBoundingRect(t,n)}return e.prototype.fromBoundingRect=function(t,n){var r=this._corners,i=this._axes,a=t.x,o=t.y,s=a+t.width,l=o+t.height;if(r[0].set(a,o),r[1].set(s,o),r[2].set(s,l),r[3].set(a,l),n)for(var u=0;u<4;u++)r[u].transform(n);Me.sub(i[0],r[1],r[0]),Me.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},e.prototype.intersect=function(t,n){var r=!0,i=!n;return kS.set(1/0,1/0),FS.set(0,0),!this._intersectCheckOneSide(this,t,kS,FS,i,1)&&(r=!1,i)||!this._intersectCheckOneSide(t,this,kS,FS,i,-1)&&(r=!1,i)||i||Me.copy(n,r?kS:FS),r},e.prototype._intersectCheckOneSide=function(t,n,r,i,a,o){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,Ud),this._getProjMinMaxOnAxis(l,n._corners,Vd),Ud[1]<Vd[0]||Ud[0]>Vd[1]){if(s=!1,a)return s;var c=Math.abs(Vd[0]-Ud[1]),h=Math.abs(Ud[0]-Vd[1]);Math.min(c,h)>i.len()&&(c<h?Me.scale(i,u,-c*o):Me.scale(i,u,h*o))}else if(r){var c=Math.abs(Vd[0]-Ud[1]),h=Math.abs(Ud[0]-Vd[1]);Math.min(c,h)<r.len()&&(c<h?Me.scale(r,u,c*o):Me.scale(r,u,-h*o))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,n,r){for(var i=this._axes[t],a=this._origin,o=n[0].dot(i)+a[t],s=o,l=o,u=1;u<n.length;u++){var c=n[u].dot(i)+a[t];s=Math.min(c,s),l=Math.max(c,l)}r[0]=s,r[1]=l},e}(),zvt=[],Uvt=function(e){gr(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return t.prototype.traverse=function(n,r){n.call(r,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(n,r){r?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},t.prototype.addDisplayables=function(n,r){r=r||!1;for(var i=0;i<n.length;i++)this.addDisplayable(n[i],r)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(n){for(var r=this._cursor;r<this._displayables.length;r++)n&&n(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)n&&n(this._temporaryDisplayables[r])},t.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var r=this._displayables[n];r.parent=this,r.update(),r.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.parent=this,r.update(),r.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new Ae(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(zvt)),n.union(a)}this._rect=n}return this._rect},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var o=0;o<this._displayables.length;o++){var s=this._displayables[o];if(s.contain(n,r))return!0}return!1},t}(Gs),ZK=vn();function r0(e,t,n,r,i){var a;if(t&&t.ecModel){var o=t.ecModel.getUpdatePayload();a=o&&o.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,h=void 0;r?(u=xe(r.duration,200),c=xe(r.easing,"cubicOut"),h=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),h=t.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(h=a.delay)),ae(h)&&(h=h(n,i)),ae(u)&&(u=u(n));var f={duration:u||0,delay:h,easing:c};return f}else return null}function YB(e,t,n,r,i,a,o){var s=!1,l;ae(i)?(o=a,a=i,i=null):se(i)&&(a=i.cb,o=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=r0(e,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var h=c.duration,f=c.delay,d=c.easing,p={duration:h,delay:f||0,easing:d,done:a,force:!!a||!!o,setToFinal:!u,scope:e,during:o};s?t.animateFrom(n,p):t.animateTo(n,p)}else t.stopAnimation(),!s&&t.attr(n),o&&o(1),a&&a()}function Tn(e,t,n,r,i,a){YB("update",e,t,n,r,i,a)}function xr(e,t,n,r,i,a){YB("enter",e,t,n,r,i,a)}function Pm(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var n=e.animators[t];if(n.scope==="leave")return!0}return!1}function Uf(e,t,n,r,i,a){Pm(e)||YB("leave",e,t,n,r,i,a)}function v5(e,t,n,r){e.removeTextContent(),e.removeTextGuideLine(),Uf(e,{style:{opacity:0}},t,n,r)}function hb(e,t,n){function r(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||v5(i,t,n,r)}):v5(e,t,n,r)}function Ol(e){ZK(e).oldStyle=e.style}function Vvt(e){return ZK(e).oldStyle}var $M=Math.max,XM=Math.min,EO={};function Gvt(e){return Ve.extend(e)}var Hvt=Svt;function Wvt(e,t){return Hvt(e,t)}function Ul(e,t){EO[e]=t}function qB(e){if(EO.hasOwnProperty(e))return EO[e]}function hE(e,t,n,r){var i=XK(e,t);return n&&(r==="center"&&(n=QK(n,i.getBoundingRect())),tZ(i,n)),i}function JK(e,t,n){var r=new Wi({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(n==="center"){var a={width:i.width,height:i.height};r.setStyle(QK(t,a))}}});return r}function QK(e,t){var n=t.width/t.height,r=e.height*n,i;r<=e.width?i=e.height:(r=e.width,i=r/n);var a=e.x+e.width/2,o=e.y+e.height/2;return{x:a-r/2,y:o-i/2,width:r,height:i}}var Ps=wvt;function tZ(e,t){if(e.applyTransform){var n=e.getBoundingRect(),r=n.calculateTransform(t);e.applyTransform(r)}}function ly(e,t){return DK(e,e,{lineWidth:t}),e}function $vt(e){return IK(e.shape,e.shape,e.style),e}var ZT=Dp;function tv(e,t){for(var n=JC([]);e&&e!==t;)Uc(n,e.getLocalTransform(),n),e=e.parent;return n}function Cl(e,t,n){return t&&!Aa(t)&&(t=Oc.getLocalTransform(t)),n&&(t=zv([],t)),Oi([],e,t)}function fE(e,t,n){var r=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-r:e==="right"?r:0,e==="top"?-i:e==="bottom"?i:0];return a=Cl(a,t,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function g5(e){return!e.isGroup}function Xvt(e){return e.shape!=null}function b1(e,t,n){if(!e||!t)return;function r(o){var s={};return o.traverse(function(l){g5(l)&&l.anid&&(s[l.anid]=l)}),s}function i(o){var s={x:o.x,y:o.y,rotation:o.rotation};return Xvt(o)&&(s.shape=ut({},o.shape)),s}var a=r(e);t.traverse(function(o){if(g5(o)&&o.anid){var s=a[o.anid];if(s){var l=i(o);o.attr(i(s)),Tn(o,l,n,fe(o).dataIndex)}}})}function eZ(e,t){return yt(e,function(n){var r=n[0];r=$M(r,t.x),r=XM(r,t.x+t.width);var i=n[1];return i=$M(i,t.y),i=XM(i,t.y+t.height),[r,i]})}function jvt(e,t){var n=$M(e.x,t.x),r=XM(e.x+e.width,t.x+t.width),i=$M(e.y,t.y),a=XM(e.y+e.height,t.y+t.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}}function S1(e,t,n){var r=ut({rectHover:!0},t),i=r.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,n),new Wi(r)):hE(e.replace("path://",""),r,n,"center")}function ex(e,t,n,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(nZ(e,t,n,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function nZ(e,t,n,r,i,a,o,s){var l=n-e,u=r-t,c=o-i,h=s-a,f=ID(c,h,l,u);if(Yvt(f))return!1;var d=e-i,p=t-a,v=ID(d,p,l,u)/f;if(v<0||v>1)return!1;var g=ID(d,p,c,h)/f;return!(g<0||g>1)}function ID(e,t,n,r){return e*r-n*t}function Yvt(e){return e<=1e-6&&e>=-1e-6}function i0(e){var t=e.itemTooltipOption,n=e.componentModel,r=e.itemName,i=Ft(t)?{formatter:t}:t,a=n.mainType,o=n.componentIndex,s={componentType:a,name:r,$vars:["name"]};s[a+"Index"]=o;var l=e.formatterParamsExtra;l&&R(Je(l),function(c){$t(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=fe(e.el);u.componentMainType=a,u.componentIndex=o,u.tooltipConfig={name:r,option:te({content:r,formatterParams:s},i)}}function m5(e,t){var n;e.isGroup&&(n=t(e)),n||e.traverse(t)}function sd(e,t){if(e)if(ht(e))for(var n=0;n<e.length;n++)m5(e[n],t);else m5(e,t)}Ul("circle",yh);Ul("ellipse",uE);Ul("sector",Xa);Ul("ring",y1);Ul("polygon",ja);Ul("polyline",Ja);Ul("rect",nn);Ul("line",Ei);Ul("bezierCurve",_1);Ul("arc",cE);const Uv=Object.freeze(Object.defineProperty({__proto__:null,Arc:cE,BezierCurve:_1,BoundingRect:Ae,Circle:yh,CompoundPath:jB,Ellipse:uE,Group:he,Image:Wi,IncrementalDisplayable:Uvt,Line:Ei,LinearGradient:x1,OrientedBoundingRect:WM,Path:Ve,Point:Me,Polygon:ja,Polyline:Ja,RadialGradient:KK,Rect:nn,Ring:y1,Sector:Xa,Text:Qe,applyTransform:Cl,clipPointsByRect:eZ,clipRectByRect:jvt,createIcon:S1,extendPath:Wvt,extendShape:Gvt,getShapeClass:qB,getTransform:tv,groupTransition:b1,initProps:xr,isElementRemoved:Pm,lineLineIntersect:nZ,linePolygonIntersect:ex,makeImage:JK,makePath:hE,mergePath:Ps,registerShape:Ul,removeElement:Uf,removeElementWithFadeOut:hb,resizePath:tZ,setTooltipConfig:i0,subPixelOptimize:ZT,subPixelOptimizeLine:ly,subPixelOptimizeRect:$vt,transformDirection:fE,traverseElements:sd,updateProps:Tn},Symbol.toStringTag,{value:"Module"}));var dE={};function rZ(e,t){for(var n=0;n<$a.length;n++){var r=$a[n],i=t[r],a=e.ensureState(r);a.style=a.style||{},a.style.text=i}var o=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(o,!0)}function DO(e,t,n){var r=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,o=t.normal,s;r&&(s=r.getFormattedLabel(i,"normal",null,a,o&&o.get("formatter"),n!=null?{interpolatedValue:n}:null)),s==null&&(s=ae(e.defaultText)?e.defaultText(i,e,n):e.defaultText);for(var l={normal:s},u=0;u<$a.length;u++){var c=$a[u],h=t[c];l[c]=xe(r?r.getFormattedLabel(i,c,null,a,h&&h.get("formatter")):null,s)}return l}function ha(e,t,n,r){n=n||dE;for(var i=e instanceof Qe,a=!1,o=0;o<ub.length;o++){var s=t[ub[o]];if(s&&s.getShallow("show")){a=!0;break}}var l=i?e:e.getTextContent();if(a){i||(l||(l=new Qe,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=DO(n,t),c=t.normal,h=!!c.getShallow("show"),f=Hn(c,r&&r.normal,n,!1,!i);f.text=u.normal,i||e.setTextConfig(jM(c,n,!1));for(var o=0;o<$a.length;o++){var d=$a[o],s=t[d];if(s){var p=l.ensureState(d),v=!!xe(s.getShallow("show"),h);if(v!==h&&(p.ignore=!v),p.style=Hn(s,r&&r[d],n,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=jM(s,n,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!h,l.useStyle(f),l.dirty(),n.enableTextSetter&&(a0(l).setLabelText=function(m){var _=DO(n,t,m);rZ(l,_)})}else l&&(l.ignore=!0);e.dirty()}function Fi(e,t){t=t||"label";for(var n={normal:e.getModel(t)},r=0;r<$a.length;r++){var i=$a[r];n[i]=e.getModel([i,t])}return n}function Hn(e,t,n,r,i){var a={};return qvt(a,e,n,r,i),t&&ut(a,t),a}function jM(e,t,n){t=t||{};var r={},i,a=e.getShallow("rotate"),o=xe(e.getShallow("distance"),n?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(n?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(r.position=i),s!=null&&(r.offset=s),a!=null&&(a*=Math.PI/180,r.rotation=a),o!=null&&(r.distance=o),r.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",r}function qvt(e,t,n,r,i){n=n||dE;var a=t.ecModel,o=a&&a.option.textStyle,s=Kvt(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);b5(l[u]={},c,o,n,r,i,!1,!0)}}l&&(e.rich=l);var h=t.get("overflow");h&&(e.overflow=h);var f=t.get("minMargin");f!=null&&(e.margin=f),b5(e,t,o,n,r,i,!0,!1)}function Kvt(e){for(var t;e&&e!==e.ecModel;){var n=(e.option||dE).rich;if(n){t=t||{};for(var r=Je(n),i=0;i<r.length;i++){var a=r[i];t[a]=1}}e=e.parentModel}return t}var y5=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],_5=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],x5=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function b5(e,t,n,r,i,a,o,s){n=!i&&n||dE;var l=r&&r.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),h=xe(t.getShallow("opacity"),n.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),a||(u=u||n.color,c=c||n.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var f=xe(t.getShallow("textBorderWidth"),n.textBorderWidth);f!=null&&(e.lineWidth=f);var d=xe(t.getShallow("textBorderType"),n.textBorderType);d!=null&&(e.lineDash=d);var p=xe(t.getShallow("textBorderDashOffset"),n.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&h==null&&!s&&(h=r&&r.defaultOpacity),h!=null&&(e.opacity=h),!i&&!a&&e.fill==null&&r.inheritColor&&(e.fill=r.inheritColor);for(var v=0;v<y5.length;v++){var g=y5[v],m=xe(t.getShallow(g),n[g]);m!=null&&(e[g]=m)}for(var v=0;v<_5.length;v++){var g=_5[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var _=t.getShallow("baseline");_!=null&&(e.verticalAlign=_)}if(!o||!r.disableBox){for(var v=0;v<x5.length;v++){var g=x5[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var y=t.getShallow("borderType");y!=null&&(e.borderDash=y),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function KB(e,t){var n=t&&t.getModel("textStyle");return Sl([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var a0=vn();function iZ(e,t,n,r){if(e){var i=a0(e);i.prevValue=i.value,i.value=n;var a=t.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=t)}}function aZ(e,t,n,r,i){var a=a0(e);if(!a.valueAnimation||a.prevValue===a.value)return;var o=a.defaultInterpolatedText,s=xe(a.interpolatedValue,a.prevValue),l=a.value;function u(c){var h=bK(n,a.precision,s,l,c);a.interpolatedValue=c===1?null:h;var f=DO({labelDataIndex:t,labelFetcher:i,defaultText:o?o(h):h+""},a.statesModels,h);rZ(e,f)}e.percent=0,(a.prevValue==null?xr:Tn)(e,{percent:1},r,t,null,u)}var Zvt=["textStyle","color"],LD=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],PD=new Qe,Jvt=function(){function e(){}return e.prototype.getTextColor=function(t){var n=this.ecModel;return this.getShallow("color")||(!t&&n?n.get(Zvt):null)},e.prototype.getFont=function(){return KB({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var n={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<LD.length;r++)n[LD[r]]=this.getShallow(LD[r]);return PD.useStyle(n),PD.update(),PD.getBoundingRect()},e}(),oZ=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Qvt=dv(oZ),tgt=function(){function e(){}return e.prototype.getLineStyle=function(t){return Qvt(this,t)},e}(),sZ=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],egt=dv(sZ),ngt=function(){function e(){}return e.prototype.getItemStyle=function(t,n){return egt(this,t,n)},e}(),pn=function(){function e(t,n,r){this.parentModel=n,this.ecModel=r,this.option=t}return e.prototype.init=function(t,n,r){},e.prototype.mergeOption=function(t,n){Xt(this.option,t,!0)},e.prototype.get=function(t,n){return t==null?this.option:this._doGet(this.parsePath(t),!n&&this.parentModel)},e.prototype.getShallow=function(t,n){var r=this.option,i=r==null?r:r[t];if(i==null&&!n){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},e.prototype.getModel=function(t,n){var r=t!=null,i=r?this.parsePath(t):null,a=r?this._doGet(i):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(a,n,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(ce(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!qe.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,n){var r=this.option;if(!t)return r;for(var i=0;i<t.length&&!(t[i]&&(r=r&&typeof r=="object"?r[t[i]]:null,r==null));i++);return r==null&&n&&(r=n._doGet(this.resolveParentPath(t),n.parentModel)),r},e}();FB(pn);hpt(pn);ti(pn,tgt);ti(pn,ngt);ti(pn,gpt);ti(pn,Jvt);var rgt=Math.round(Math.random()*10);function o0(e){return[e||"",rgt++].join("_")}function igt(e){var t={};e.registerSubTypeDefaulter=function(n,r){var i=wu(n);t[i.main]=r},e.determineSubType=function(n,r){var i=r.type;if(!i){var a=wu(n).main;e.hasSubTypes(n)&&t[a]&&(i=t[a](r))}return i}}function agt(e,t){e.topologicalTravel=function(a,o,s,l){if(!a.length)return;var u=n(o),c=u.graph,h=u.noEntryList,f={};for(R(a,function(_){f[_]=!0});h.length;){var d=h.pop(),p=c[d],v=!!f[d];v&&(s.call(l,d,p.originalDeps.slice()),delete f[d]),R(p.successor,v?m:g)}R(f,function(){var _="";throw new Error(_)});function g(_){c[_].entryCount--,c[_].entryCount===0&&h.push(_)}function m(_){f[_]=!0,g(_)}};function n(a){var o={},s=[];return R(a,function(l){var u=r(o,l),c=u.originalDeps=t(l),h=i(c,a);u.entryCount=h.length,u.entryCount===0&&s.push(l),R(h,function(f){Le(u.predecessor,f)<0&&u.predecessor.push(f);var d=r(o,f);Le(d.successor,f)<0&&d.successor.push(l)})}),{graph:o,noEntryList:s}}function r(a,o){return a[o]||(a[o]={predecessor:[],successor:[]}),a[o]}function i(a,o){var s=[];return R(a,function(l){Le(o,l)>=0&&s.push(l)}),s}}function ld(e,t){return Xt(Xt({},e,!0),t,!0)}const ogt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},sgt={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var YM="ZH",ZB="EN",Rm=ZB,JT={},JB={},lZ=qe.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage||Rm).toUpperCase();return e.indexOf(YM)>-1?YM:Rm}():Rm;function uZ(e,t){e=e.toUpperCase(),JB[e]=new pn(t),JT[e]=t}function lgt(e){if(Ft(e)){var t=JT[e.toUpperCase()]||{};return e===YM||e===ZB?ce(t):Xt(ce(t),ce(JT[Rm]),!1)}else return Xt(ce(e),ce(JT[Rm]),!1)}function IO(e){return JB[e]}function ugt(){return JB[Rm]}uZ(ZB,ogt);uZ(YM,sgt);var QB=1e3,tk=QB*60,Nx=tk*60,Rs=Nx*24,S5=Rs*365,nx={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},zS="{yyyy}-{MM}-{dd}",w5={year:"{yyyy}",month:"{yyyy}-{MM}",day:zS,hour:zS+" "+nx.hour,minute:zS+" "+nx.minute,second:zS+" "+nx.second,millisecond:nx.none},RD=["year","month","day","hour","minute","second","millisecond"],cZ=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ka(e,t){return e+="","0000".substr(0,t-e.length)+e}function Om(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function cgt(e){return e===Om(e)}function hgt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function pE(e,t,n,r){var i=Vs(e),a=i[ek(n)](),o=i[Nm(n)]()+1,s=Math.floor((o-1)/3)+1,l=i[vE(n)](),u=i["get"+(n?"UTC":"")+"Day"](),c=i[fb(n)](),h=(c-1)%12+1,f=i[gE(n)](),d=i[mE(n)](),p=i[yE(n)](),v=r instanceof pn?r:IO(r||lZ)||ugt(),g=v.getModel("time"),m=g.get("month"),_=g.get("monthAbbr"),y=g.get("dayOfWeek"),x=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,ka(a%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[o-1]).replace(/{MMM}/g,_[o-1]).replace(/{MM}/g,ka(o,2)).replace(/{M}/g,o+"").replace(/{dd}/g,ka(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[u]).replace(/{ee}/g,x[u]).replace(/{e}/g,u+"").replace(/{HH}/g,ka(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,ka(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,ka(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,ka(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,ka(p,3)).replace(/{S}/g,p+"")}function fgt(e,t,n,r,i){var a=null;if(Ft(n))a=n;else if(ae(n))a=n(e.value,t,{level:e.level});else{var o=ut({},nx);if(e.level>0)for(var s=0;s<RD.length;++s)o[RD[s]]="{primary|"+o[RD[s]]+"}";var l=n?n.inherit===!1?n:te(n,o):o,u=hZ(e.value,i);if(l[u])a=l[u];else if(l.inherit){for(var c=cZ.indexOf(u),s=c-1;s>=0;--s)if(l[u]){a=l[u];break}a=a||o.none}if(ht(a)){var h=e.level==null?0:e.level>=0?e.level:a.length+e.level;h=Math.min(h,a.length-1),a=a[h]}}return pE(new Date(e.value),a,i,r)}function hZ(e,t){var n=Vs(e),r=n[Nm(t)]()+1,i=n[vE(t)](),a=n[fb(t)](),o=n[gE(t)](),s=n[mE(t)](),l=n[yE(t)](),u=l===0,c=u&&s===0,h=c&&o===0,f=h&&a===0,d=f&&i===1,p=d&&r===1;return p?"year":d?"month":f?"day":h?"hour":c?"minute":u?"second":"millisecond"}function T5(e,t,n){var r=xn(e)?Vs(e):e;switch(t=t||hZ(e,n),t){case"year":return r[ek(n)]();case"half-year":return r[Nm(n)]()>=6?1:0;case"quarter":return Math.floor((r[Nm(n)]()+1)/4);case"month":return r[Nm(n)]();case"day":return r[vE(n)]();case"half-day":return r[fb(n)]()/24;case"hour":return r[fb(n)]();case"minute":return r[gE(n)]();case"second":return r[mE(n)]();case"millisecond":return r[yE(n)]()}}function ek(e){return e?"getUTCFullYear":"getFullYear"}function Nm(e){return e?"getUTCMonth":"getMonth"}function vE(e){return e?"getUTCDate":"getDate"}function fb(e){return e?"getUTCHours":"getHours"}function gE(e){return e?"getUTCMinutes":"getMinutes"}function mE(e){return e?"getUTCSeconds":"getSeconds"}function yE(e){return e?"getUTCMilliseconds":"getMilliseconds"}function dgt(e){return e?"setUTCFullYear":"setFullYear"}function fZ(e){return e?"setUTCMonth":"setMonth"}function dZ(e){return e?"setUTCDate":"setDate"}function pZ(e){return e?"setUTCHours":"setHours"}function vZ(e){return e?"setUTCMinutes":"setMinutes"}function gZ(e){return e?"setUTCSeconds":"setSeconds"}function mZ(e){return e?"setUTCMilliseconds":"setMilliseconds"}function qM(e){if(!dK(e))return Ft(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function yZ(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,r){return r.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var s0=EB;function LO(e,t,n){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Sl(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var o=t==="time",s=e instanceof Date;if(o||s){var l=o?Vs(e):e;if(isNaN(+l)){if(s)return"-"}else return pE(l,r,n)}if(t==="ordinal")return YR(e)?i(e):xn(e)&&a(e)?e+"":"-";var u=Yc(e);return a(u)?qM(u):YR(e)?i(e):typeof e=="boolean"?e+"":"-"}var M5=["a","b","c","d","e","f","g"],OD=function(e,t){return"{"+e+(t??"")+"}"};function nk(e,t,n){ht(t)||(t=[t]);var r=t.length;if(!r)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var o=M5[a];e=e.replace(OD(o),OD(o,0))}for(var s=0;s<r;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(OD(M5[l],s),n?Ti(u):u)}return e}function pgt(e,t,n){return R(t,function(r,i){e=e.replace("{"+i+"}",r)}),e}function _Z(e,t){var n=Ft(e)?{color:e,extraCssText:t}:e||{},r=n.color,i=n.type;t=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ti(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ti(r)+";"+(t||"")+'"></span>';var o=n.markerId||"markerX";return{renderMode:a,content:"{"+o+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function vgt(e,t,n){(e==="week"||e==="month"||e==="quarter"||e==="half-year"||e==="year")&&(e=`MM-dd
yyyy`);var r=Vs(t),i="get",a=r[i+"FullYear"](),o=r[i+"Month"]()+1,s=r[i+"Date"](),l=r[i+"Hours"](),u=r[i+"Minutes"](),c=r[i+"Seconds"](),h=r[i+"Milliseconds"]();return e=e.replace("MM",ka(o,2)).replace("M",o).replace("yyyy",a).replace("yy",ka(a%100+"",2)).replace("dd",ka(s,2)).replace("d",s).replace("hh",ka(l,2)).replace("h",l).replace("mm",ka(u,2)).replace("m",u).replace("ss",ka(c,2)).replace("s",c).replace("SSS",ka(h,3)),e}function vv(e,t){return t=t||"transparent",Ft(e)?e:se(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function KM(e,t){if(t==="_blank"||t==="blank"){var n=window.open();n.opener=null,n.location.href=e}else window.open(e,t)}var QT=R,xZ=["left","right","top","bottom","width","height"],Lp=[["width","left","right"],["height","top","bottom"]];function rk(e,t,n,r,i){var a=0,o=0;r==null&&(r=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),h=t.childAt(u+1),f=h&&h.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(f?-f.x+c.x:0);d=a+v,d>r||l.newline?(a=0,d=v,o+=s+n,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(f?-f.y+c.y:0);p=o+g,p>i||l.newline?(a+=s+n,o=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=a,l.y=o,l.markRedraw(),e==="horizontal"?a=d+n:o=p+n)})}var ev=rk;_e(rk,"vertical");_e(rk,"horizontal");function ggt(e,t,n){var r=t.width,i=t.height,a=Dt(e.left,r),o=Dt(e.top,i),s=Dt(e.right,r),l=Dt(e.bottom,i);return(isNaN(a)||isNaN(parseFloat(e.left)))&&(a=0),(isNaN(s)||isNaN(parseFloat(e.right)))&&(s=r),(isNaN(o)||isNaN(parseFloat(e.top)))&&(o=0),(isNaN(l)||isNaN(parseFloat(e.bottom)))&&(l=i),n=s0(n||0),{width:Math.max(s-a-n[1]-n[3],0),height:Math.max(l-o-n[0]-n[2],0)}}function Gr(e,t,n){n=s0(n||0);var r=t.width,i=t.height,a=Dt(e.left,r),o=Dt(e.top,i),s=Dt(e.right,r),l=Dt(e.bottom,i),u=Dt(e.width,r),c=Dt(e.height,i),h=n[2]+n[0],f=n[1]+n[3],d=e.aspect;switch(isNaN(u)&&(u=r-s-f-a),isNaN(c)&&(c=i-l-h-o),d!=null&&(isNaN(u)&&isNaN(c)&&(d>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(a)&&(a=r-s-u-f),isNaN(o)&&(o=i-l-c-h),e.left||e.right){case"center":a=r/2-u/2-n[3];break;case"right":a=r-u-f;break}switch(e.top||e.bottom){case"middle":case"center":o=i/2-c/2-n[0];break;case"bottom":o=i-c-h;break}a=a||0,o=o||0,isNaN(u)&&(u=r-f-a-(s||0)),isNaN(c)&&(c=i-h-o-(l||0));var p=new Ae(a+n[3],o+n[0],u,c);return p.margin=n,p}function _E(e,t,n,r,i,a){var o=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||e,a.x=e.x,a.y=e.y,!o&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new Ae(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var h=Gr(te({width:u.width,height:u.height},t),n,r),f=o?h.x-u.x:0,d=s?h.y-u.y:0;return l==="raw"?(a.x=f,a.y=d):(a.x+=f,a.y+=d),a===e&&e.markRedraw(),!0}function mgt(e,t){return e[Lp[t][0]]!=null||e[Lp[t][1]]!=null&&e[Lp[t][2]]!=null}function db(e){var t=e.layoutMode||e.constructor.layoutMode;return se(t)?t:t?{type:t}:null}function Vf(e,t,n){var r=n&&n.ignoreSize;!ht(r)&&(r=[r,r]);var i=o(Lp[0],0),a=o(Lp[1],1);u(Lp[0],e,i),u(Lp[1],e,a);function o(c,h){var f={},d=0,p={},v=0,g=2;if(QT(c,function(y){p[y]=e[y]}),QT(c,function(y){s(t,y)&&(f[y]=p[y]=t[y]),l(f,y)&&d++,l(p,y)&&v++}),r[h])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return f;for(var m=0;m<c.length;m++){var _=c[m];if(!s(f,_)&&s(e,_)){f[_]=e[_];break}}return f}function s(c,h){return c.hasOwnProperty(h)}function l(c,h){return c[h]!=null&&c[h]!=="auto"}function u(c,h,f){QT(c,function(d){h[d]=f[d]})}}function l0(e){return bZ({},e)}function bZ(e,t){return t&&e&&QT(xZ,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}var ygt=vn(),Ie=function(e){it(t,e);function t(n,r,i){var a=e.call(this,n,r,i)||this;return a.uid=o0("ec_cpt_model"),a}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},t.prototype.mergeDefaultAndTheme=function(n,r){var i=db(this),a=i?l0(n):{},o=r.getTheme();Xt(n,o.get(this.mainType)),Xt(n,this.getDefaultOption()),i&&Vf(n,a,i)},t.prototype.mergeOption=function(n,r){Xt(this.option,n,!0);var i=db(this);i&&Vf(this.option,n,i)},t.prototype.optionUpdated=function(n,r){},t.prototype.getDefaultOption=function(){var n=this.constructor;if(!lpt(n))return n.defaultOption;var r=ygt(this);if(!r.defaultOption){for(var i=[],a=n;a;){var o=a.prototype.defaultOption;o&&i.push(o),a=a.superClass}for(var s={},l=i.length-1;l>=0;l--)s=Xt(s,i[l],!0);r.defaultOption=s}return r.defaultOption},t.prototype.getReferringComponents=function(n,r){var i=n+"Index",a=n+"Id";return g1(this.ecModel,n,{index:this.get(i,!0),id:this.get(a,!0)},r)},t.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(n){this.option.zlevel=n},t.protoInitialize=function(){var n=t.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),t}(pn);wK(Ie,pn);rE(Ie);igt(Ie);agt(Ie,_gt);function _gt(e){var t=[];return R(Ie.getClassesByMainType(e),function(n){t=t.concat(n.dependencies||n.prototype.dependencies||[])}),t=yt(t,function(n){return wu(n).main}),e!=="dataset"&&Le(t,"dataset")<=0&&t.unshift("dataset"),t}var SZ="";typeof navigator<"u"&&(SZ=navigator.platform||"");var ig="rgba(0, 0, 0, 0.2)";const xgt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:ig,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:ig,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:ig,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:ig,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:ig,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:ig,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:SZ.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var wZ=jt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Ks="original",Ca="arrayRows",Zs="objectRows",Zu="keyedColumns",If="typedArray",TZ="unknown",Iu="column",u0="row",oa={Must:1,Might:2,Not:3},MZ=vn();function bgt(e){MZ(e).datasetMap=jt()}function AZ(e,t,n){var r={},i=ak(t);if(!i||!e)return r;var a=[],o=[],s=t.ecModel,l=MZ(s).datasetMap,u=i.uid+"_"+n.seriesLayoutBy,c,h;e=e.slice(),R(e,function(v,g){var m=se(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,h=p(m)),r[m.name]=[]});var f=l.get(u)||l.set(u,{categoryWayDim:h,valueWayDim:0});R(e,function(v,g){var m=v.name,_=p(v);if(c==null){var y=f.valueWayDim;d(r[m],y,_),d(o,y,_),f.valueWayDim+=_}else if(c===g)d(r[m],0,_),d(a,0,_);else{var y=f.categoryWayDim;d(r[m],y,_),d(o,y,_),f.categoryWayDim+=_}});function d(v,g,m){for(var _=0;_<m;_++)v.push(g+_)}function p(v){var g=v.dimsDef;return g?g.length:1}return a.length&&(r.itemName=a),o.length&&(r.seriesName=o),r}function ik(e,t,n){var r={},i=ak(e);if(!i)return r;var a=t.sourceFormat,o=t.dimensionsDefine,s;(a===Zs||a===Zu)&&R(o,function(c,h){(se(c)?c.name:c)==="name"&&(s=h)});var l=function(){for(var c={},h={},f=[],d=0,p=Math.min(5,n);d<p;d++){var v=EZ(t.data,a,t.seriesLayoutBy,o,t.startIndex,d);f.push(v);var g=v===oa.Not;if(g&&c.v==null&&d!==s&&(c.v=d),(c.n==null||c.n===c.v||!g&&f[c.n]===oa.Not)&&(c.n=d),m(c)&&f[c.n]!==oa.Not)return c;g||(v===oa.Might&&h.v==null&&d!==s&&(h.v=d),(h.n==null||h.n===h.v)&&(h.n=d))}function m(_){return _.v!=null&&_.n!=null}return m(c)?c:m(h)?h:null}();if(l){r.value=[l.v];var u=s??l.n;r.itemName=[u],r.seriesName=[u]}return r}function ak(e){var t=e.get("data",!0);if(!t)return g1(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},ai).models[0]}function Sgt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:g1(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},ai).models}function CZ(e,t){return EZ(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function EZ(e,t,n,r,i,a){var o,s=5;if(To(e))return oa.Not;var l,u;if(r){var c=r[a];se(c)?(l=c.name,u=c.type):Ft(c)&&(l=c)}if(u!=null)return u==="ordinal"?oa.Must:oa.Not;if(t===Ca){var h=e;if(n===u0){for(var f=h[a],d=0;d<(f||[]).length&&d<s;d++)if((o=x(f[i+d]))!=null)return o}else for(var d=0;d<h.length&&d<s;d++){var p=h[i+d];if(p&&(o=x(p[a]))!=null)return o}}else if(t===Zs){var v=e;if(!l)return oa.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(o=x(g[l]))!=null)return o}}else if(t===Zu){var m=e;if(!l)return oa.Not;var f=m[l];if(!f||To(f))return oa.Not;for(var d=0;d<f.length&&d<s;d++)if((o=x(f[d]))!=null)return o}else if(t===Ks)for(var _=e,d=0;d<_.length&&d<s;d++){var g=_[d],y=e0(g);if(!ht(y))return oa.Not;if((o=x(y[a]))!=null)return o}function x(S){var b=Ft(S);if(S!=null&&isFinite(S)&&S!=="")return b?oa.Might:oa.Not;if(b&&S!=="-")return oa.Must}return oa.Not}var PO=jt();function wgt(e,t){Wa(PO.get(e)==null&&t),PO.set(e,t)}function Tgt(e,t,n){var r=PO.get(t);if(!r)return n;var i=r(e);return i?n.concat(i):n}var A5=vn(),Mgt=vn(),ok=function(){function e(){}return e.prototype.getColorFromPalette=function(t,n,r){var i=jn(this.get("color",!0)),a=this.get("colorLayer",!0);return DZ(this,A5,i,a,t,n,r)},e.prototype.clearColorPalette=function(){Cgt(this,A5)},e}();function RO(e,t,n,r){var i=jn(e.get(["aria","decal","decals"]));return DZ(e,Mgt,i,null,t,n,r)}function Agt(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r].length>t)return e[r];return e[n-1]}function DZ(e,t,n,r,i,a,o){a=a||e;var s=t(a),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=o==null||!r?n:Agt(r,o);if(c=c||n,!(!c||!c.length)){var h=c[l];return i&&(u[i]=h),s.paletteIdx=(l+1)%c.length,h}}function Cgt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var US,r_,C5,E5="\0_ec_inner",Egt=1,sk=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(n,r,i,a,o,s){a=a||{},this.option=null,this._theme=new pn(a),this._locale=new pn(o),this._optionManager=s},t.prototype.setOption=function(n,r,i){var a=L5(r);this._optionManager.setOption(n,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(n,r){return this._resetOption(n,L5(r))},t.prototype._resetOption=function(n,r){var i=!1,a=this._optionManager;if(!n||n==="recreate"){var o=a.mountOption(n==="recreate");!this.option||n==="recreate"?C5(this,o):(this.restoreData(),this._mergeOption(o,r)),i=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var s=a.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,r))}if(!n||n==="recreate"||n==="media"){var l=a.getMediaOption(this);l.length&&R(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},t.prototype.mergeOption=function(n){this._mergeOption(n,null)},t.prototype._mergeOption=function(n,r){var i=this.option,a=this._componentsMap,o=this._componentsCount,s=[],l=jt(),u=r&&r.replaceMergeMainTypeMap;bgt(this),R(n,function(h,f){h!=null&&(Ie.hasClass(f)?f&&(s.push(f),l.set(f,!0)):i[f]=i[f]==null?ce(h):Xt(i[f],h,!0))}),u&&u.each(function(h,f){Ie.hasClass(f)&&!l.get(f)&&(s.push(f),l.set(f,!0))}),Ie.topologicalTravel(s,Ie.getAllClassMainTypes(),c,this);function c(h){var f=Tgt(this,h,jn(n[h])),d=a.get(h),p=d?u&&u.get(h)?"replaceMerge":"normalMerge":"replaceAll",v=yK(d,f,p);Qdt(v,h,Ie),i[h]=null,a.set(h,null),o.set(h,0);var g=[],m=[],_=0,y;R(v,function(x,S){var b=x.existing,w=x.newOption;if(!w)b&&(b.mergeOption({},this),b.optionUpdated({},!1));else{var A=h==="series",T=Ie.getClass(h,x.keyInfo.subType,!A);if(!T)return;if(h==="tooltip"){if(y)return;y=!0}if(b&&b.constructor===T)b.name=x.keyInfo.name,b.mergeOption(w,this),b.optionUpdated(w,!1);else{var M=ut({componentIndex:S},x.keyInfo);b=new T(w,this,this,M),ut(b,M),x.brandNew&&(b.__requireNewView=!0),b.init(w,this,this),b.optionUpdated(null,!0)}}b?(g.push(b.option),m.push(b),_++):(g.push(void 0),m.push(void 0))},this),i[h]=g,a.set(h,m),o.set(h,_),h==="series"&&US(this)}this._seriesIndices||US(this)},t.prototype.getOption=function(){var n=ce(this.option);return R(n,function(r,i){if(Ie.hasClass(i)){for(var a=jn(r),o=a.length,s=!1,l=o-1;l>=0;l--)a[l]&&!lb(a[l])?s=!0:(a[l]=null,!s&&o--);a.length=o,n[i]=a}}),delete n[E5],n},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(n){this._payload=n},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(n,r){var i=this._componentsMap.get(n);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var o=0;o<i.length;o++)if(i[o])return i[o]}}},t.prototype.queryComponents=function(n){var r=n.mainType;if(!r)return[];var i=n.index,a=n.id,o=n.name,s=this._componentsMap.get(r);if(!s||!s.length)return[];var l;return i!=null?(l=[],R(jn(i),function(u){s[u]&&l.push(s[u])})):a!=null?l=D5("id",a,s):o!=null?l=D5("name",o,s):l=Gn(s,function(u){return!!u}),I5(l,n)},t.prototype.findComponents=function(n){var r=n.query,i=n.mainType,a=s(r),o=a?this.queryComponents(a):Gn(this._componentsMap.get(i),function(u){return!!u});return l(I5(o,n));function s(u){var c=i+"Index",h=i+"Id",f=i+"Name";return u&&(u[c]!=null||u[h]!=null||u[f]!=null)?{mainType:i,index:u[c],id:u[h],name:u[f]}:null}function l(u){return n.filter?Gn(u,n.filter):u}},t.prototype.eachComponent=function(n,r,i){var a=this._componentsMap;if(ae(n)){var o=r,s=n;a.each(function(h,f){for(var d=0;h&&d<h.length;d++){var p=h[d];p&&s.call(o,f,p,p.componentIndex)}})}else for(var l=Ft(n)?a.get(n):se(n)?this.findComponents(n):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(n){var r=pi(n,null);return Gn(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},t.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},t.prototype.getSeriesByType=function(n){return Gn(this._componentsMap.get("series"),function(r){return!!r&&r.subType===n})},t.prototype.getSeries=function(){return Gn(this._componentsMap.get("series"),function(n){return!!n})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(n,r){r_(this),R(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];n.call(r,a,i)},this)},t.prototype.eachRawSeries=function(n,r){R(this._componentsMap.get("series"),function(i){i&&n.call(r,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(n,r,i){r_(this),R(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];o.subType===n&&r.call(i,o,a)},this)},t.prototype.eachRawSeriesByType=function(n,r,i){return R(this.getSeriesByType(n),r,i)},t.prototype.isSeriesFiltered=function(n){return r_(this),this._seriesIndicesMap.get(n.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(n,r){r_(this);var i=[];R(this._seriesIndices,function(a){var o=this._componentsMap.get("series")[a];n.call(r,o,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(n){US(this);var r=this._componentsMap,i=[];r.each(function(a,o){Ie.hasClass(o)&&i.push(o)}),Ie.topologicalTravel(i,Ie.getAllClassMainTypes(),function(a){R(r.get(a),function(o){o&&(a!=="series"||!Dgt(o,n))&&o.restoreData()})})},t.internalField=function(){US=function(n){var r=n._seriesIndices=[];R(n._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),n._seriesIndicesMap=jt(r)},r_=function(n){},C5=function(n,r){n.option={},n.option[E5]=Egt,n._componentsMap=jt({series:[]}),n._componentsCount=jt();var i=r.aria;se(i)&&i.enabled==null&&(i.enabled=!0),Igt(r,n._theme.option),Xt(r,xgt,!1),n._mergeOption(r,null)}}(),t}(pn);function Dgt(e,t){if(t){var n=t.seriesIndex,r=t.seriesId,i=t.seriesName;return n!=null&&e.componentIndex!==n||r!=null&&e.id!==r||i!=null&&e.name!==i}}function Igt(e,t){var n=e.color&&!e.colorLayer;R(t,function(r,i){i==="colorLayer"&&n||Ie.hasClass(i)||(typeof r=="object"?e[i]=e[i]?Xt(e[i],r,!1):ce(r):e[i]==null&&(e[i]=r))})}function D5(e,t,n){if(ht(t)){var r=jt();return R(t,function(a){if(a!=null){var o=pi(a,null);o!=null&&r.set(a,!0)}}),Gn(n,function(a){return a&&r.get(a[e])})}else{var i=pi(t,null);return Gn(n,function(a){return a&&i!=null&&a[e]===i})}}function I5(e,t){return t.hasOwnProperty("subType")?Gn(e,function(n){return n&&n.subType===t.subType}):e}function L5(e){var t=jt();return e&&R(jn(e.replaceMerge),function(n){t.set(n,!0)}),{replaceMergeMainTypeMap:t}}ti(sk,ok);var Lgt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],IZ=function(){function e(t){R(Lgt,function(n){this[n]=Vt(t[n],t)},this)}return e}(),ND={},c0=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,n){var r=[];R(ND,function(i,a){var o=i.create(t,n);r=r.concat(o||[])}),this._coordinateSystems=r},e.prototype.update=function(t,n){R(this._coordinateSystems,function(r){r.update&&r.update(t,n)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,n){ND[t]=n},e.get=function(t){return ND[t]},e}(),Pgt=/^(min|max)?(.+)$/,Rgt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,n,r){t&&(R(jn(t.series),function(o){o&&o.data&&To(o.data)&&OM(o.data)}),R(jn(t.dataset),function(o){o&&o.source&&To(o.source)&&OM(o.source)})),t=ce(t);var i=this._optionBackup,a=Ogt(t,n,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],ce(t?n.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var n,r=this._timelineOptions;if(r.length){var i=t.getComponent("timeline");i&&(n=ce(r[i.getCurrentIndex()]))}return n},e.prototype.getMediaOption=function(t){var n=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,o=[],s=[];if(!i.length&&!a)return s;for(var l=0,u=i.length;l<u;l++)Ngt(i[l].query,n,r)&&o.push(l);return!o.length&&a&&(o=[-1]),o.length&&!kgt(o,this._currentMediaIndices)&&(s=yt(o,function(c){return ce(c===-1?a.option:i[c].option)})),this._currentMediaIndices=o,s},e}();function Ogt(e,t,n){var r=[],i,a,o=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,h=!!(l||s||o&&o.timeline);o?(a=o,a.timeline||(a.timeline=s)):((h||c)&&(e.options=e.media=null),a=e),c&&ht(u)&&R(u,function(d){d&&d.option&&(d.query?r.push(d):i||(i=d))}),f(a),R(l,function(d){return f(d)}),R(r,function(d){return f(d.option)});function f(d){R(t,function(p){p(d,n)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function Ngt(e,t,n){var r={width:t,height:n,aspectratio:t/n},i=!0;return R(e,function(a,o){var s=o.match(Pgt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Bgt(r[u],a,l)||(i=!1)}}),i}function Bgt(e,t,n){return n==="min"?e>=t:n==="max"?e<=t:e===t}function kgt(e,t){return e.join(",")===t.join(",")}var tl=R,pb=se,P5=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function BD(e){var t=e&&e.itemStyle;if(t)for(var n=0,r=P5.length;n<r;n++){var i=P5[n],a=t.normal,o=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?Xt(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),o&&o[i]&&(e[i]=e[i]||{},e[i].emphasis?Xt(e[i].emphasis,o[i]):e[i].emphasis=o[i],o[i]=null)}}function _a(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var r=e[t].normal,i=e[t].emphasis;r&&(n?(e[t].normal=e[t].emphasis=null,te(e[t],r)):e[t]=r),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function rx(e){_a(e,"itemStyle"),_a(e,"lineStyle"),_a(e,"areaStyle"),_a(e,"label"),_a(e,"labelLine"),_a(e,"upperLabel"),_a(e,"edgeLabel")}function ii(e,t){var n=pb(e)&&e[t],r=pb(n)&&n.textStyle;if(r)for(var i=0,a=F4.length;i<a;i++){var o=F4[i];r.hasOwnProperty(o)&&(n[o]=r[o])}}function ms(e){e&&(rx(e),ii(e,"label"),e.emphasis&&ii(e.emphasis,"label"))}function Fgt(e){if(pb(e)){BD(e),rx(e),ii(e,"label"),ii(e,"upperLabel"),ii(e,"edgeLabel"),e.emphasis&&(ii(e.emphasis,"label"),ii(e.emphasis,"upperLabel"),ii(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(BD(t),ms(t));var n=e.markLine;n&&(BD(n),ms(n));var r=e.markArea;r&&ms(r);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var a=e.links||e.edges;if(a&&!To(a))for(var o=0;o<a.length;o++)ms(a[o]);R(e.categories,function(u){rx(u)})}if(i&&!To(i))for(var o=0;o<i.length;o++)ms(i[o]);if(t=e.markPoint,t&&t.data)for(var s=t.data,o=0;o<s.length;o++)ms(s[o]);if(n=e.markLine,n&&n.data)for(var l=n.data,o=0;o<l.length;o++)ht(l[o])?(ms(l[o][0]),ms(l[o][1])):ms(l[o]);e.type==="gauge"?(ii(e,"axisLabel"),ii(e,"title"),ii(e,"detail")):e.type==="treemap"?(_a(e.breadcrumb,"itemStyle"),R(e.levels,function(u){rx(u)})):e.type==="tree"&&rx(e.leaves)}}function sc(e){return ht(e)?e:e?[e]:[]}function R5(e){return(ht(e)?e[0]:e)||{}}function zgt(e,t){tl(sc(e.series),function(r){pb(r)&&Fgt(r)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),tl(n,function(r){tl(sc(e[r]),function(i){i&&(ii(i,"axisLabel"),ii(i.axisPointer,"label"))})}),tl(sc(e.parallel),function(r){var i=r&&r.parallelAxisDefault;ii(i,"axisLabel"),ii(i&&i.axisPointer,"label")}),tl(sc(e.calendar),function(r){_a(r,"itemStyle"),ii(r,"dayLabel"),ii(r,"monthLabel"),ii(r,"yearLabel")}),tl(sc(e.radar),function(r){ii(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),tl(sc(e.geo),function(r){pb(r)&&(ms(r),tl(sc(r.regions),function(i){ms(i)}))}),tl(sc(e.timeline),function(r){ms(r),_a(r,"label"),_a(r,"itemStyle"),_a(r,"controlStyle",!0);var i=r.data;ht(i)&&R(i,function(a){se(a)&&(_a(a,"label"),_a(a,"itemStyle"))})}),tl(sc(e.toolbox),function(r){_a(r,"iconStyle"),tl(r.feature,function(i){_a(i,"iconStyle")})}),ii(R5(e.axisPointer),"label"),ii(R5(e.tooltip).axisPointer,"label")}function Ugt(e,t){for(var n=t.split(","),r=e,i=0;i<n.length&&(r=r&&r[n[i]],r!=null);i++);return r}function Vgt(e,t,n,r){for(var i=t.split(","),a=e,o,s=0;s<i.length-1;s++)o=i[s],a[o]==null&&(a[o]={}),a=a[o];a[i[s]]==null&&(a[i[s]]=n)}function O5(e){e&&R(Ggt,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Ggt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Hgt=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],kD=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function i_(e){var t=e&&e.itemStyle;if(t)for(var n=0;n<kD.length;n++){var r=kD[n][1],i=kD[n][0];t[r]!=null&&(t[i]=t[r])}}function N5(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function B5(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function Wgt(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function LZ(e,t){if(e)for(var n=0;n<e.length;n++)t(e[n]),e[n]&&LZ(e[n].children,t)}function PZ(e,t){zgt(e,t),e.series=jn(e.series),R(e.series,function(n){if(se(n)){var r=n.type;if(r==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow);else if(r==="pie"||r==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise),N5(n.label);var i=n.data;if(i&&!To(i))for(var a=0;a<i.length;a++)N5(i[a]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(n.emphasis.scaleSize=n.hoverOffset))}else if(r==="gauge"){var o=Ugt(n,"pointer.color");o!=null&&Vgt(n,"itemStyle.color",o)}else if(r==="bar"){i_(n),i_(n.backgroundStyle),i_(n.emphasis);var i=n.data;if(i&&!To(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(i_(i[a]),i_(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var s=n.highlightPolicy;s&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=s)),B5(n),LZ(n.data,B5)}else r==="graph"||r==="sankey"?Wgt(n):r==="map"&&(n.mapType&&!n.map&&(n.map=n.mapType),n.mapLocation&&te(n,n.mapLocation));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(n.emphasis.scale=n.hoverAnimation)),O5(n)}}),e.dataRange&&(e.visualMap=e.dataRange),R(Hgt,function(n){var r=e[n];r&&(ht(r)||(r=[r]),R(r,function(i){O5(i)}))})}function $gt(e){var t=jt();e.eachSeries(function(n){var r=n.get("stack");if(r){var i=t.get(r)||t.set(r,[]),a=n.getData(),o={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:n};if(!o.stackedDimension||!(o.isStackedByIndex||o.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),t.each(Xgt)}function Xgt(e){R(e,function(t,n){var r=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],o=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";o.modify(a,function(u,c,h){var f=o.get(t.stackedDimension,h);if(isNaN(f))return i;var d,p;s?p=o.getRawIndex(h):d=o.get(t.stackedByDimension,h);for(var v=NaN,g=n-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var _=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&f>=0&&_>0||l==="samesign"&&f<=0&&_<0){f=Gdt(f,_),v=_;break}}}return r[0]=f,r[1]=v,r})})}var xE=function(){function e(t){this.data=t.data||(t.sourceFormat===Zu?{}:[]),this.sourceFormat=t.sourceFormat||TZ,this.seriesLayoutBy=t.seriesLayoutBy||Iu,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var n=this.dimensionsDefine=t.dimensionsDefine;if(n)for(var r=0;r<n.length;r++){var i=n[r];i.type==null&&CZ(this,r)===oa.Must&&(i.type="ordinal")}}return e}();function lk(e){return e instanceof xE}function OO(e,t,n){n=n||RZ(e);var r=t.seriesLayoutBy,i=Ygt(e,n,r,t.sourceHeader,t.dimensions),a=new xE({data:e,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:ce(t)});return a}function uk(e){return new xE({data:e,sourceFormat:To(e)?If:Ks})}function jgt(e){return new xE({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:ce(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function RZ(e){var t=TZ;if(To(e))t=If;else if(ht(e)){e.length===0&&(t=Ca);for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i!=null){if(ht(i)||To(i)){t=Ca;break}else if(se(i)){t=Zs;break}}}}else if(se(e)){for(var a in e)if($t(e,a)&&Aa(e[a])){t=Zu;break}}return t}function Ygt(e,t,n,r,i){var a,o;if(!e)return{dimensionsDefine:k5(i),startIndex:o,dimensionsDetectedCount:a};if(t===Ca){var s=e;r==="auto"||r==null?F5(function(u){u!=null&&u!=="-"&&(Ft(u)?o==null&&(o=1):o=0)},n,s,10):o=xn(r)?r:r?1:0,!i&&o===1&&(i=[],F5(function(u,c){i[c]=u!=null?u+"":""},n,s,1/0)),a=i?i.length:n===u0?s.length:s[0]?s[0].length:null}else if(t===Zs)i||(i=qgt(e));else if(t===Zu)i||(i=[],R(e,function(u,c){i.push(c)}));else if(t===Ks){var l=e0(e[0]);a=ht(l)&&l.length||1}return{startIndex:o,dimensionsDefine:k5(i),dimensionsDetectedCount:a}}function qgt(e){for(var t=0,n;t<e.length&&!(n=e[t++]););if(n)return Je(n)}function k5(e){if(e){var t=jt();return yt(e,function(n,r){n=se(n)?n:{name:n};var i={name:n.name,displayName:n.displayName,type:n.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function F5(e,t,n,r){if(t===u0)for(var i=0;i<n.length&&i<r;i++)e(n[i]?n[i][0]:null,i);else for(var a=n[0]||[],i=0;i<a.length&&i<r;i++)e(a[i],i)}function OZ(e){var t=e.sourceFormat;return t===Zs||t===Zu}var Gd,Hd,Wd,z5,U5,NZ=function(){function e(t,n){var r=lk(t)?t:uk(t);this._source=r;var i=this._data=r.data;r.sourceFormat===If&&(this._offset=0,this._dimSize=n,this._data=i),U5(this,i,r)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,n){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;U5=function(o,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,h=l.startIndex,f=l.dimensionsDefine,d=z5[ck(u,c)];if(ut(o,d),u===If)o.getItem=n,o.count=i,o.fillStorage=r;else{var p=BZ(u,c);o.getItem=Vt(p,null,s,h,f);var v=kZ(u,c);o.count=Vt(v,null,s,h,f)}};var n=function(o,s){o=o-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*o,h=0;h<u;h++)s[h]=l[c+h];return s},r=function(o,s,l,u){for(var c=this._data,h=this._dimSize,f=0;f<h;f++){for(var d=u[f],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-o,m=l[f],_=0;_<g;_++){var y=c[_*h+f];m[o+_]=y,y<p&&(p=y),y>v&&(v=y)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};z5=(t={},t[Ca+"_"+Iu]={pure:!0,appendData:a},t[Ca+"_"+u0]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Zs]={pure:!0,appendData:a},t[Zu]={pure:!0,appendData:function(o){var s=this._data;R(o,function(l,u){for(var c=s[u]||(s[u]=[]),h=0;h<(l||[]).length;h++)c.push(l[h])})}},t[Ks]={appendData:a},t[If]={persistent:!1,pure:!0,appendData:function(o){this._data=o},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(o){for(var s=0;s<o.length;s++)this._data.push(o[s])}}(),e}(),V5=function(e,t,n,r){return e[r]},Kgt=(Gd={},Gd[Ca+"_"+Iu]=function(e,t,n,r){return e[r+t]},Gd[Ca+"_"+u0]=function(e,t,n,r,i){r+=t;for(var a=i||[],o=e,s=0;s<o.length;s++){var l=o[s];a[s]=l?l[r]:null}return a},Gd[Zs]=V5,Gd[Zu]=function(e,t,n,r,i){for(var a=i||[],o=0;o<n.length;o++){var s=n[o].name,l=e[s];a[o]=l?l[r]:null}return a},Gd[Ks]=V5,Gd);function BZ(e,t){var n=Kgt[ck(e,t)];return n}var G5=function(e,t,n){return e.length},Zgt=(Hd={},Hd[Ca+"_"+Iu]=function(e,t,n){return Math.max(0,e.length-t)},Hd[Ca+"_"+u0]=function(e,t,n){var r=e[0];return r?Math.max(0,r.length-t):0},Hd[Zs]=G5,Hd[Zu]=function(e,t,n){var r=n[0].name,i=e[r];return i?i.length:0},Hd[Ks]=G5,Hd);function kZ(e,t){var n=Zgt[ck(e,t)];return n}var FD=function(e,t,n){return e[t]},Jgt=(Wd={},Wd[Ca]=FD,Wd[Zs]=function(e,t,n){return e[n]},Wd[Zu]=FD,Wd[Ks]=function(e,t,n){var r=e0(e);return r instanceof Array?r[t]:r},Wd[If]=FD,Wd);function FZ(e){var t=Jgt[e];return t}function ck(e,t){return e===Ca?e+"_"+t:e}function uy(e,t,n){if(e){var r=e.getRawDataItem(t);if(r!=null){var i=e.getStore(),a=i.getSource().sourceFormat;if(n!=null){var o=e.getDimensionIndex(n),s=i.getDimensionProperty(o);return FZ(a)(r,o,s)}else{var l=r;return a===Ks&&(l=e0(r)),l}}}}var Qgt=/\{@(.+?)\}/g,hk=function(){function e(){}return e.prototype.getDataParams=function(t,n){var r=this.getData(n),i=this.getRawValue(t,n),a=r.getRawIndex(t),o=r.getName(t),s=r.getRawDataItem(t),l=r.getItemVisual(t,"style"),u=l&&l[r.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,h=this.mainType,f=h==="series",d=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:o,dataIndex:a,data:s,dataType:n,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,n,r,i,a,o){n=n||"normal";var s=this.getData(r),l=this.getDataParams(t,r);if(o&&(l.value=o.interpolatedValue),i!=null&&ht(l.value)&&(l.value=l.value[i]),!a){var u=s.getItemModel(t);a=u.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(ae(a))return l.status=n,l.dimensionIndex=i,a(l);if(Ft(a)){var c=nk(a,l);return c.replace(Qgt,function(h,f){var d=f.length,p=f;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=uy(s,t,p);if(o&&ht(o.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=o.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,n){return uy(this.getData(n),t)},e.prototype.formatTooltip=function(t,n,r){},e}();function H5(e){var t,n;return se(e)?e.type&&(n=e):t=e,{text:t,frag:n}}function Bx(e){return new tmt(e)}var tmt=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var n=this._upstream,r=t&&t.skip;if(this._dirty&&n){var i=this.context;i.data=i.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var o=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(o!==l||s!==u)&&(a="reset");function c(_){return!(_>=1)&&(_=1),_}var h;(this._dirty||a==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=l,this._modDataCount=u;var f=t&&t.step;if(n?this._dueEnd=n._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(h||d<p)){var v=this._progress;if(ht(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,n,r,i,a){W5.reset(n,r,i,a),this._callingProgress=t,this._callingProgress({start:n,end:r,count:r-n,next:W5.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,r;!t&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(r=n.forceFirstProgress,n=n.progress),ht(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),W5=function(){var e,t,n,r,i,a={reset:function(l,u,c,h){t=l,e=u,n=c,r=h,i=Math.ceil(r/n),a.next=n>1&&r>0?s:o}};return a;function o(){return t<e?t++:null}function s(){var l=t%i*n+Math.ceil(t/i),u=t>=e?null:l<r?l:t;return t++,u}}();function Lf(e,t){var n=t&&t.type;return n==="ordinal"?e:(n==="time"&&!xn(e)&&e!=null&&e!=="-"&&(e=+Vs(e)),e==null||e===""?NaN:+e)}var emt=jt({number:function(e){return parseFloat(e)},time:function(e){return+Vs(e)},trim:function(e){return Ft(e)?Sl(e):e}});function zZ(e){return emt.get(e)}var UZ={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},nmt=function(){function e(t,n){if(!xn(n)){var r="";En(r)}this._opFn=UZ[t],this._rvalFloat=Yc(n)}return e.prototype.evaluate=function(t){return xn(t)?this._opFn(t,this._rvalFloat):this._opFn(Yc(t),this._rvalFloat)},e}(),VZ=function(){function e(t,n){var r=t==="desc";this._resultLT=r?1:-1,n==null&&(n=r?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,n){var r=xn(t)?t:Yc(t),i=xn(n)?n:Yc(n),a=isNaN(r),o=isNaN(i);if(a&&(r=this._incomparable),o&&(i=this._incomparable),a&&o){var s=Ft(t),l=Ft(n);s&&(r=l?t:0),l&&(i=s?n:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},e}(),rmt=function(){function e(t,n){this._rval=n,this._isEQ=t,this._rvalTypeof=typeof n,this._rvalFloat=Yc(n)}return e.prototype.evaluate=function(t){var n=t===this._rval;if(!n){var r=typeof t;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(n=Yc(t)===this._rvalFloat)}return this._isEQ?n:!n},e}();function imt(e,t){return e==="eq"||e==="ne"?new rmt(e==="eq",t):$t(UZ,e)?new nmt(e,t):null}var amt=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,n){},e.prototype.retrieveValueFromItem=function(t,n){},e.prototype.convertValue=function(t,n){return Lf(t,n)},e}();function omt(e,t){var n=new amt,r=e.data,i=n.sourceFormat=e.sourceFormat,a=e.startIndex,o="";e.seriesLayoutBy!==Iu&&En(o);var s=[],l={},u=e.dimensionsDefine;if(u)R(u,function(v,g){var m=v.name,_={index:g,name:m,displayName:v.displayName};if(s.push(_),m!=null){var y="";$t(l,m)&&En(y),l[m]=_}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var h=BZ(i,Iu);t.__isBuiltIn&&(n.getRawDataItem=function(v){return h(r,a,s,v)},n.getRawData=Vt(smt,null,e)),n.cloneRawData=Vt(lmt,null,e);var f=kZ(i,Iu);n.count=Vt(f,null,r,a,s);var d=FZ(i);n.retrieveValue=function(v,g){var m=h(r,a,s,v);return p(m,g)};var p=n.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return n.getDimensionInfo=Vt(umt,null,s,l),n.cloneAllDimensionInfo=Vt(cmt,null,s),n}function smt(e){var t=e.sourceFormat;if(!fk(t)){var n="";En(n)}return e.data}function lmt(e){var t=e.sourceFormat,n=e.data;if(!fk(t)){var r="";En(r)}if(t===Ca){for(var i=[],a=0,o=n.length;a<o;a++)i.push(n[a].slice());return i}else if(t===Zs){for(var i=[],a=0,o=n.length;a<o;a++)i.push(ut({},n[a]));return i}}function umt(e,t,n){if(n!=null){if(xn(n)||!isNaN(n)&&!$t(t,n))return e[n];if($t(t,n))return t[n]}}function cmt(e){return ce(e)}var GZ=jt();function hmt(e){e=ce(e);var t=e.type,n="";t||En(n);var r=t.split(":");r.length!==2&&En(n);var i=!1;r[0]==="echarts"&&(t=r[1],i=!0),e.__isBuiltIn=i,GZ.set(t,e)}function fmt(e,t,n){var r=jn(e),i=r.length,a="";i||En(a);for(var o=0,s=i;o<s;o++){var l=r[o];t=dmt(l,t),o!==s-1&&(t.length=Math.max(t.length,1))}return t}function dmt(e,t,n,r){var i="";t.length||En(i),se(e)||En(i);var a=e.type,o=GZ.get(a);o||En(i);var s=yt(t,function(u){return omt(u,o)}),l=jn(o.transform({upstream:s[0],upstreamList:s,config:ce(e.config)}));return yt(l,function(u,c){var h="";se(u)||En(h),u.data||En(h);var f=RZ(u.data);fk(f)||En(h);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Iu,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Iu,sourceHeader:0,dimensions:u.dimensions};return OO(u.data,d,null)})}function fk(e){return e===Ca||e===Zs}var bE="undefined",pmt=typeof Uint32Array===bE?Array:Uint32Array,vmt=typeof Uint16Array===bE?Array:Uint16Array,HZ=typeof Int32Array===bE?Array:Int32Array,$5=typeof Float64Array===bE?Array:Float64Array,WZ={float:$5,int:HZ,ordinal:Array,number:Array,time:$5},zD;function a_(e){return e>65535?pmt:vmt}function ag(){return[1/0,-1/0]}function gmt(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function X5(e,t,n,r,i){var a=WZ[n||"float"];if(i){var o=e[t],s=o&&o.length;if(s!==r){for(var l=new a(r),u=0;u<s;u++)l[u]=o[u];e[t]=l}}else e[t]=new a(r)}var NO=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,n,r){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=zD[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],OZ(i),this._dimensions=yt(n,function(o){return{type:o.type,property:o.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,n){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(t);if(a!=null){if(i[a].type===n)return a}else a=i.length;return i[a]={type:n},r.set(t,a),this._chunks[a]=new WZ[n||"float"](this._rawCount),this._rawExtent[a]=ag(),a},e.prototype.collectOrdinalMeta=function(t,n){var r=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,o=i.ordinalOffset||0,s=r.length;o===0&&(a[t]=ag());for(var l=a[t],u=o;u<s;u++){var c=r[u]=n.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=n,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var n=this._dimensions[t],r=n.ordinalMeta;return r},e.prototype.getDimensionProperty=function(t){var n=this._dimensions[t];return n&&n.property},e.prototype.appendData=function(t){var n=this._provider,r=this.count();n.appendData(t);var i=n.count();return n.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},e.prototype.appendValues=function(t,n){for(var r=this._chunks,i=this._dimensions,a=i.length,o=this._rawExtent,s=this.count(),l=s+Math.max(t.length,n||0),u=0;u<a;u++){var c=i[u];X5(r,u,c.type,l,!0)}for(var h=[],f=s;f<l;f++)for(var d=f-s,p=0;p<a;p++){var c=i[p],v=zD.arrayRows.call(this,t[d]||h,c.property,d,p);r[p][f]=v;var g=o[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,n,r){for(var i=this._provider,a=this._chunks,o=this._dimensions,s=o.length,l=this._rawExtent,u=yt(o,function(_){return _.property}),c=0;c<s;c++){var h=o[c];l[c]||(l[c]=ag()),X5(a,c,h.type,n,r)}if(i.fillStorage)i.fillStorage(t,n,a,l);else for(var f=[],d=t;d<n;d++){f=i.getItem(d,f);for(var p=0;p<s;p++){var v=a[p],g=this._dimValueGetter(f,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=n,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,n){if(!(n>=0&&n<this._count))return NaN;var r=this._chunks[t];return r?r[this.getRawIndex(n)]:NaN},e.prototype.getValues=function(t,n){var r=[],i=[];if(n==null){n=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,o=i.length;a<o;a++)r.push(this.get(i[a],n));return r},e.prototype.getByRawIndex=function(t,n){if(!(n>=0&&n<this._rawCount))return NaN;var r=this._chunks[t];return r?r[n]:NaN},e.prototype.getSum=function(t){var n=this._chunks[t],r=0;if(n)for(var i=0,a=this.count();i<a;i++){var o=this.get(t,i);isNaN(o)||(r+=o)}return r},e.prototype.getMedian=function(t){var n=[];this.each([t],function(a){isNaN(a)||n.push(a)});var r=n.sort(function(a,o){return a-o}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var n=this._indices,r=n[t];if(r!=null&&r<this._count&&r===t)return t;for(var i=0,a=this._count-1;i<=a;){var o=(i+a)/2|0;if(n[o]<t)i=o+1;else if(n[o]>t)a=o-1;else return o}return-1},e.prototype.indicesOfNearest=function(t,n,r){var i=this._chunks,a=i[t],o=[];if(!a)return o;r==null&&(r=1/0);for(var s=1/0,l=-1,u=0,c=0,h=this.count();c<h;c++){var f=this.getRawIndex(c),d=n-a[f],p=Math.abs(d);p<=r&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(o[u++]=c))}return o.length=u,o},e.prototype.getIndices=function(){var t,n=this._indices;if(n){var r=n.constructor,i=this._count;if(r===Array){t=new r(i);for(var a=0;a<i;a++)t[a]=n[a]}else t=new r(n.buffer,0,i)}else{var r=a_(this._rawCount);t=new r(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,n){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=a_(r._rawCount),o=new a(i),s=[],l=t.length,u=0,c=t[0],h=r._chunks,f=0;f<i;f++){var d=void 0,p=r.getRawIndex(f);if(l===0)d=n(f);else if(l===1){var v=h[c][p];d=n(v,f)}else{for(var g=0;g<l;g++)s[g]=h[t[g]][p];s[g]=f,d=n.apply(null,s)}d&&(o[u++]=p)}return u<i&&(r._indices=o),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.selectRange=function(t){var n=this.clone(),r=n._count;if(!r)return this;var i=Je(t),a=i.length;if(!a)return this;var o=n.count(),s=a_(n._rawCount),l=new s(o),u=0,c=i[0],h=t[c][0],f=t[c][1],d=n._chunks,p=!1;if(!n._indices){var v=0;if(a===1){for(var g=d[i[0]],m=0;m<r;m++){var _=g[m];(_>=h&&_<=f||isNaN(_))&&(l[u++]=v),v++}p=!0}else if(a===2){for(var g=d[i[0]],y=d[i[1]],x=t[i[1]][0],S=t[i[1]][1],m=0;m<r;m++){var _=g[m],b=y[m];(_>=h&&_<=f||isNaN(_))&&(b>=x&&b<=S||isNaN(b))&&(l[u++]=v),v++}p=!0}}if(!p)if(a===1)for(var m=0;m<o;m++){var w=n.getRawIndex(m),_=d[i[0]][w];(_>=h&&_<=f||isNaN(_))&&(l[u++]=w)}else for(var m=0;m<o;m++){for(var A=!0,w=n.getRawIndex(m),T=0;T<a;T++){var M=i[T],_=d[M][w];(_<t[M][0]||_>t[M][1])&&(A=!1)}A&&(l[u++]=n.getRawIndex(m))}return u<o&&(n._indices=l),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.map=function(t,n){var r=this.clone(t);return this._updateDims(r,t,n),r},e.prototype.modify=function(t,n){this._updateDims(this,t,n)},e.prototype._updateDims=function(t,n,r){for(var i=t._chunks,a=[],o=n.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<n.length;c++)u[n[c]]=ag();for(var h=0;h<s;h++){for(var f=t.getRawIndex(h),d=0;d<o;d++)l[d]=i[n[d]][f];l[o]=h;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var v=n[c],g=p[c],m=u[v],_=i[v];_&&(_[f]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,n){var r=this.clone([t],!0),i=r._chunks,a=i[t],o=this.count(),s=0,l=Math.floor(1/n),u=this.getRawIndex(0),c,h,f,d=new(a_(this._rawCount))(Math.min((Math.ceil(o/l)+2)*2,o));d[s++]=u;for(var p=1;p<o-1;p+=l){for(var v=Math.min(p+l,o-1),g=Math.min(p+l*2,o),m=(g+v)/2,_=0,y=v;y<g;y++){var x=this.getRawIndex(y),S=a[x];isNaN(S)||(_+=S)}_/=g-v;var b=p,w=Math.min(p+l,o),A=p-1,T=a[u];c=-1,f=b;for(var M=-1,C=0,y=b;y<w;y++){var x=this.getRawIndex(y),S=a[x];if(isNaN(S)){C++,M<0&&(M=x);continue}h=Math.abs((A-m)*(S-T)-(A-y)*(_-T)),h>c&&(c=h,f=x)}C>0&&C<w-b&&(d[s++]=Math.min(M,f),f=Math.max(M,f)),d[s++]=f,u=f}return d[s++]=this.getRawIndex(o-1),r._count=s,r._indices=d,r.getRawIndex=this._getRawIdx,r},e.prototype.downSample=function(t,n,r,i){for(var a=this.clone([t],!0),o=a._chunks,s=[],l=Math.floor(1/n),u=o[t],c=this.count(),h=a._rawExtent[t]=ag(),f=new(a_(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=r(s),_=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[_]=m,m<h[0]&&(h[0]=m),m>h[1]&&(h[1]=m),f[d++]=_}return a._count=d,a._indices=f,a._updateGetRawIdx(),a},e.prototype.each=function(t,n){if(this._count)for(var r=t.length,i=this._chunks,a=0,o=this.count();a<o;a++){var s=this.getRawIndex(a);switch(r){case 0:n(a);break;case 1:n(i[t[0]][s],a);break;case 2:n(i[t[0]][s],i[t[1]][s],a);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[t[l]][s];u[l]=a,n.apply(null,u)}}},e.prototype.getDataExtent=function(t){var n=this._chunks[t],r=ag();if(!n)return r;var i=this.count(),a=!this._indices,o;if(a)return this._rawExtent[t].slice();if(o=this._extent[t],o)return o.slice();o=r;for(var s=o[0],l=o[1],u=0;u<i;u++){var c=this.getRawIndex(u),h=n[c];h<s&&(s=h),h>l&&(l=h)}return o=[s,l],this._extent[t]=o,o},e.prototype.getRawDataItem=function(t){var n=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(n);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][n]);return r},e.prototype.clone=function(t,n){var r=new e,i=this._chunks,a=t&&Pl(t,function(s,l){return s[l]=!0,s},{});if(a)for(var o=0;o<i.length;o++)r._chunks[o]=a[o]?gmt(i[o]):i[o];else r._chunks=i;return this._copyCommonProps(r),n||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=ce(this._extent),t._rawExtent=ce(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,n=void 0;if(t===Array){var r=this._indices.length;n=new t(r);for(var i=0;i<r;i++)n[i]=this._indices[i]}else n=new t(this._indices);return n}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(n,r,i,a){return Lf(n[a],this._dimensions[a])}zD={arrayRows:t,objectRows:function(n,r,i,a){return Lf(n[r],this._dimensions[a])},keyedColumns:t,original:function(n,r,i,a){var o=n&&(n.value==null?n:n.value);return Lf(o instanceof Array?o[a]:o,this._dimensions[a])},typedArray:function(n,r,i,a){return n[a]}}}(),e}(),$Z=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,n){this._sourceList=t,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,n=this._getUpstreamSourceManagers(),r=!!n.length,i,a;if(VS(t)){var o=t,s=void 0,l=void 0,u=void 0;if(r){var c=n[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else s=o.get("data",!0),l=To(s)?If:Ks,a=[];var h=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},d=xe(h.seriesLayoutBy,f.seriesLayoutBy)||null,p=xe(h.sourceHeader,f.sourceHeader),v=xe(h.dimensions,f.dimensions),g=d!==f.seriesLayoutBy||!!p!=!!f.sourceHeader||v;i=g?[OO(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(r){var _=this._applyTransform(n);i=_.sourceList,a=_.upstreamSignList}else{var y=m.get("source",!0);i=[OO(y,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},e.prototype._applyTransform=function(t){var n=this._sourceHost,r=n.get("transform",!0),i=n.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&Y5(a)}var o,s=[],l=[];return R(t,function(u){u.prepareSource();var c=u.getSource(i||0),h="";i!=null&&!c&&Y5(h),s.push(c),l.push(u._getVersionSign())}),r?o=fmt(r,s,{datasetIndex:n.componentIndex}):i!=null&&(o=[jgt(s[0])]),{sourceList:o,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),n=0;n<t.length;n++){var r=t[n];if(r._isDirty()||this._upstreamSignList[n]!==r._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var n=this._sourceList[t];if(!n){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(t)}return n},e.prototype.getSharedDataStore=function(t){var n=t.makeStoreSchema();return this._innerGetDataStore(n.dimensions,t.source,n.hash)},e.prototype._innerGetDataStore=function(t,n,r){var i=0,a=this._storeList,o=a[i];o||(o=a[i]={});var s=o[r];if(!s){var l=this._getUpstreamSourceManagers()[0];VS(this._sourceHost)&&l?s=l._innerGetDataStore(t,n,r):(s=new NO,s.initData(new NZ(n,t.length),t)),o[r]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(VS(t)){var n=ak(t);return n?[n.getSourceManager()]:[]}else return yt(Sgt(t),function(r){return r.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,n,r,i;if(VS(t))n=t.get("seriesLayoutBy",!0),r=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;n=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:r,dimensions:i}},e}();function j5(e){var t=e.option.transform;t&&OM(e.option.transform)}function VS(e){return e.mainType==="series"}function Y5(e){throw new Error(e)}var XZ="line-height:1";function jZ(e,t){var n=e.color||"#6e7079",r=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",o=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Ti(r+"")+"px;color:"+Ti(n)+";font-weight:"+Ti(i+""),valueStyle:"font-size:"+Ti(o+"")+"px;color:"+Ti(a)+";font-weight:"+Ti(s+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:i},valueStyle:{fontSize:o,fill:a,fontWeight:s}}}var mmt=[0,10,20,30],ymt=["",`
`,`

`,`


`];function zi(e,t){return t.type=e,t}function BO(e){return e.type==="section"}function YZ(e){return BO(e)?_mt:xmt}function qZ(e){if(BO(e)){var t=0,n=e.blocks.length,r=n>1||n>0&&!e.noHeader;return R(e.blocks,function(i){var a=qZ(i);a>=t&&(t=a+ +(r&&(!a||BO(i)&&!i.noHeader)))}),t}return 0}function _mt(e,t,n,r){var i=t.noHeader,a=bmt(qZ(t)),o=[],s=t.blocks||[];Wa(!s||ht(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if($t(u,l)){var c=new VZ(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}R(s,function(p,v){var g=t.valueFormatter,m=YZ(p)(g?ut(ut({},e),{valueFormatter:g}):e,p,v>0?a.html:0,r);m!=null&&o.push(m)});var h=e.renderMode==="richText"?o.join(a.richText):kO(o.join(""),i?n:a.html);if(i)return h;var f=LO(t.header,"ordinal",e.useUTC),d=jZ(r,e.renderMode).nameStyle;return e.renderMode==="richText"?KZ(e,f,d)+a.richText+h:kO('<div style="'+d+";"+XZ+';">'+Ti(f)+"</div>"+h,n)}function xmt(e,t,n,r){var i=e.renderMode,a=t.noName,o=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(x){return x=ht(x)?x:[x],yt(x,function(S,b){return LO(S,ht(d)?d[b]:d,u)})};if(!(a&&o)){var h=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),f=a?"":LO(l,"ordinal",u),d=t.valueType,p=o?[]:c(t.value,t.dataIndex),v=!s||!a,g=!s&&a,m=jZ(r,i),_=m.nameStyle,y=m.valueStyle;return i==="richText"?(s?"":h)+(a?"":KZ(e,f,_))+(o?"":Tmt(e,p,v,g,y)):kO((s?"":h)+(a?"":Smt(f,!s,_))+(o?"":wmt(p,v,g,y)),n)}}function q5(e,t,n,r,i,a){if(e){var o=YZ(e),s={useUTC:i,renderMode:n,orderMode:r,markupStyleCreator:t,valueFormatter:e.valueFormatter};return o(s,e,0,a)}}function bmt(e){return{html:mmt[e],richText:ymt[e]}}function kO(e,t){var n='<div style="clear:both"></div>',r="margin: "+t+"px 0 0";return'<div style="'+r+";"+XZ+';">'+e+n+"</div>"}function Smt(e,t,n){var r=t?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Ti(e)+"</span>"}function wmt(e,t,n,r){var i=n?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return e=ht(e)?e:[e],'<span style="'+a+";"+r+'">'+yt(e,function(o){return Ti(o)}).join("&nbsp;&nbsp;")+"</span>"}function KZ(e,t,n){return e.markupStyleCreator.wrapRichTextStyle(t,n)}function Tmt(e,t,n,r,i){var a=[i],o=r?10:20;return n&&a.push({padding:[0,0,0,o],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ht(t)?t.join("  "):t,a)}function ZZ(e,t){var n=e.getData().getItemVisual(t,"style"),r=n[e.visualDrawType];return vv(r)}function JZ(e,t){var n=e.get("padding");return n??(t==="richText"?[8,10]:10)}var UD=function(){function e(){this.richTextStyles={},this._nextStyleNameId=pK()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,n,r){var i=r==="richText"?this._generateStyleName():null,a=_Z({color:n,type:t,renderMode:r,markerId:i});return Ft(a)?a:(this.richTextStyles[i]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,n){var r={};ht(n)?R(n,function(a){return ut(r,a)}):ut(r,n);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+t+"}"},e}();function QZ(e){var t=e.series,n=e.dataIndex,r=e.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),o=a.length,s=t.getRawValue(n),l=ht(s),u=ZZ(t,n),c,h,f,d;if(o>1||l&&!o){var p=Mmt(s,t,n,a,u);c=p.inlineValues,h=p.inlineValueTypes,f=p.blocks,d=p.inlineValues[0]}else if(o){var v=i.getDimensionInfo(a[0]);d=c=uy(i,n,a[0]),h=v.type}else d=c=l?s[0]:s;var g=BB(t),m=g&&t.name||"",_=i.getName(n),y=r?m:_;return zi("section",{header:m,noHeader:r||!g,sortParam:d,blocks:[zi("nameValue",{markerType:"item",markerColor:u,name:y,noName:!Sl(y),value:c,valueType:h,dataIndex:n})].concat(f||[])})}function Mmt(e,t,n,r,i){var a=t.getData(),o=Pl(e,function(h,f,d){var p=a.getDimensionInfo(d);return h=h||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];r.length?R(r,function(h){c(uy(a,n,h),h)}):R(e,c);function c(h,f){var d=a.getDimensionInfo(f);!d||d.otherDims.tooltip===!1||(o?u.push(zi("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:h,valueType:d.type})):(s.push(h),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Bh=vn();function GS(e,t){return e.getName(t)||e.getId(t)}var tM="__universalTransitionEnabled",bn=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return t.prototype.init=function(n,r,i){this.seriesIndex=this.componentIndex,this.dataTask=Bx({count:Cmt,reset:Emt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,i);var a=Bh(this).sourceManager=new $Z(this);a.prepareSource();var o=this.getInitialData(n,i);Z5(o,this),this.dataTask.context.data=o,Bh(this).dataBeforeProcessed=o,K5(this),this._initSelectedMapFromData(o)},t.prototype.mergeDefaultAndTheme=function(n,r){var i=db(this),a=i?l0(n):{},o=this.subType;Ie.hasClass(o)&&(o+="Series"),Xt(n,r.getTheme().get(this.subType)),Xt(n,this.getDefaultOption()),hv(n,"label",["show"]),this.fillDataTextStyle(n.data),i&&Vf(n,a,i)},t.prototype.mergeOption=function(n,r){n=Xt(this.option,n,!0),this.fillDataTextStyle(n.data);var i=db(this);i&&Vf(this.option,n,i);var a=Bh(this).sourceManager;a.dirty(),a.prepareSource();var o=this.getInitialData(n,r);Z5(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,Bh(this).dataBeforeProcessed=o,K5(this),this._initSelectedMapFromData(o)},t.prototype.fillDataTextStyle=function(n){if(n&&!To(n))for(var r=["show"],i=0;i<n.length;i++)n[i]&&n[i].label&&hv(n[i],"label",r)},t.prototype.getInitialData=function(n,r){},t.prototype.appendData=function(n){var r=this.getRawData();r.appendData(n.data)},t.prototype.getData=function(n){var r=FO(this);if(r){var i=r.context.data;return n==null?i:i.getLinkedData(n)}else return Bh(this).data},t.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},t.prototype.setData=function(n){var r=FO(this);if(r){var i=r.context;i.outputData=n,r!==this.dataTask&&(i.data=n)}Bh(this).data=n},t.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return jt(n)},t.prototype.getSourceManager=function(){return Bh(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Bh(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},t.prototype.formatTooltip=function(n,r,i){return QZ({series:this,dataIndex:n,multipleSeries:r})},t.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(qe.node&&!(n&&n.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(n,r,i){var a=this.ecModel,o=ok.prototype.getColorFromPalette.call(this,n,r,i);return o||(o=a.getColorFromPalette(n,r,i)),o},t.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(n,r){this._innerSelect(this.getData(r),n)},t.prototype.unselect=function(n,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,o=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<n.length;s++){var l=n[s],u=GS(o,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(n,r){for(var i=[],a=0;a<n.length;a++)i[0]=n[a],this.isSelected(n[a],r)?this.unselect(i,r):this.select(i,r)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,r=Je(n),i=[],a=0;a<r.length;a++){var o=n[r[a]];o>=0&&i.push(o)}return i},t.prototype.isSelected=function(n,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[GS(a,n)])&&!a.getItemModel(n).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[tM])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},t.prototype._innerSelect=function(n,r){var i,a,o=this.option,s=o.selectedMode,l=r.length;if(!(!s||!l)){if(s==="series")o.selectedMap="all";else if(s==="multiple"){se(o.selectedMap)||(o.selectedMap={});for(var u=o.selectedMap,c=0;c<l;c++){var h=r[c],f=GS(n,h);u[f]=!0,this._selectedDataIndicesMap[f]=n.getRawIndex(h)}}else if(s==="single"||s===!0){var d=r[l-1],f=GS(n,d);o.selectedMap=(i={},i[f]=!0,i),this._selectedDataIndicesMap=(a={},a[f]=n.getRawIndex(d),a)}}},t.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var r=[];n.hasItemOption&&n.each(function(i){var a=n.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(n,r)}},t.registerClass=function(n){return Ie.registerClass(n)},t.protoInitialize=function(){var n=t.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),t}(Ie);ti(bn,hk);ti(bn,ok);wK(bn,Ie);function K5(e){var t=e.name;BB(e)||(e.name=Amt(e)||t)}function Amt(e){var t=e.getRawData(),n=t.mapDimensionsAll("seriesName"),r=[];return R(n,function(i){var a=t.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function Cmt(e){return e.model.getRawData().count()}function Emt(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Dmt}function Dmt(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function Z5(e,t){R(ay(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(n){e.wrapMethod(n,_e(Imt,t))})}function Imt(e,t){var n=FO(e);return n&&n.setOutputEnd((t||this).count()),t}function FO(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(e.uid))}return r}}var Zn=function(){function e(){this.group=new he,this.uid=o0("viewComponent")}return e.prototype.init=function(t,n){},e.prototype.render=function(t,n,r,i){},e.prototype.dispose=function(t,n){},e.prototype.updateView=function(t,n,r,i){},e.prototype.updateLayout=function(t,n,r,i){},e.prototype.updateVisual=function(t,n,r,i){},e.prototype.toggleBlurSeries=function(t,n,r){},e.prototype.eachRendered=function(t){var n=this.group;n&&n.traverse(t)},e}();FB(Zn);rE(Zn);function h0(){var e=vn();return function(t){var n=e(t),r=t.pipelineContext,i=!!n.large,a=!!n.progressiveRender,o=n.large=!!(r&&r.large),s=n.progressiveRender=!!(r&&r.progressiveRender);return(i!==o||a!==s)&&"reset"}}var tJ=vn(),Lmt=h0(),hn=function(){function e(){this.group=new he,this.uid=o0("viewChart"),this.renderTask=Bx({plan:Pmt,reset:Rmt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,n){},e.prototype.render=function(t,n,r,i){},e.prototype.highlight=function(t,n,r,i){var a=t.getData(i&&i.dataType);a&&Q5(a,i,"emphasis")},e.prototype.downplay=function(t,n,r,i){var a=t.getData(i&&i.dataType);a&&Q5(a,i,"normal")},e.prototype.remove=function(t,n){this.group.removeAll()},e.prototype.dispose=function(t,n){},e.prototype.updateView=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.updateLayout=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.updateVisual=function(t,n,r,i){this.render(t,n,r,i)},e.prototype.eachRendered=function(t){sd(this.group,t)},e.markUpdateMethod=function(t,n){tJ(t).updateMethod=n},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function J5(e,t,n){e&&cb(e)&&(t==="emphasis"?qc:Kc)(e,n)}function Q5(e,t,n){var r=fv(e,t),i=t&&t.highlightKey!=null?vvt(t.highlightKey):null;r!=null?R(jn(r),function(a){J5(e.getItemGraphicEl(a),n,i)}):e.eachItemGraphicEl(function(a){J5(a,n,i)})}FB(hn);rE(hn);function Pmt(e){return Lmt(e.model)}function Rmt(e){var t=e.model,n=e.ecModel,r=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,o=e.view,s=i&&tJ(i).updateMethod,l=a?"incrementalPrepareRender":s&&o[s]?s:"render";return l!=="render"&&o[l](t,n,r,i),Omt[l]}var Omt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},ZM="\0__throttleOriginMethod",tG="\0__throttleRate",eG="\0__throttleType";function dk(e,t,n){var r,i=0,a=0,o=null,s,l,u,c;t=t||0;function h(){a=new Date().getTime(),o=null,e.apply(l,u||[])}var f=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];r=new Date().getTime(),l=this,u=d;var v=c||t,g=c||n;c=null,s=r-(g?i:a)-v,clearTimeout(o),g?o=setTimeout(h,v):s>=0?h():o=setTimeout(h,-s),i=r};return f.clear=function(){o&&(clearTimeout(o),o=null)},f.debounceNextCall=function(d){c=d},f}function f0(e,t,n,r){var i=e[t];if(i){var a=i[ZM]||i,o=i[eG],s=i[tG];if(s!==n||o!==r){if(n==null||!r)return e[t]=a;i=e[t]=dk(a,n,r==="debounce"),i[ZM]=a,i[eG]=r,i[tG]=n}return i}}function vb(e,t){var n=e[t];n&&n[ZM]&&(n.clear&&n.clear(),e[t]=n[ZM])}var nG=vn(),rG={itemStyle:dv(sZ,!0),lineStyle:dv(oZ,!0)},Nmt={lineStyle:"stroke",itemStyle:"fill"};function eJ(e,t){var n=e.visualStyleMapper||rG[t];return n||(console.warn("Unknown style type '"+t+"'."),rG.itemStyle)}function nJ(e,t){var n=e.visualDrawType||Nmt[t];return n||(console.warn("Unknown style type '"+t+"'."),"fill")}var Bmt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=e.getModel(r),a=eJ(e,r),o=a(i),s=i.getShallow("decal");s&&(n.setVisual("decal",s),s.dirty=!0);var l=nJ(e,r),u=o[l],c=ae(u)?u:null,h=o.fill==="auto"||o.stroke==="auto";if(!o[l]||c||h){var f=e.getColorFromPalette(e.name,null,t.getSeriesCount());o[l]||(o[l]=f,n.setVisual("colorFromPalette",!0)),o.fill=o.fill==="auto"||ae(o.fill)?f:o.fill,o.stroke=o.stroke==="auto"||ae(o.stroke)?f:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=ut({},o);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},o_=new pn,kmt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var n=e.getData(),r=e.visualStyleAccessPath||"itemStyle",i=eJ(e,r),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(o,s){var l=o.getRawDataItem(s);if(l&&l[r]){o_.option=l[r];var u=i(o_),c=o.ensureUniqueItemVisual(s,"style");ut(c,u),o_.option.decal&&(o.setItemVisual(s,"decal",o_.option.decal),o_.option.decal.dirty=!0),a in u&&o.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Fmt={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(n){var r=n.getColorBy();if(!n.isColorBySeries()){var i=n.type+"-"+r,a=t.get(i);a||(a={},t.set(i,a)),nG(n).scope=a}}),e.eachSeries(function(n){if(!(n.isColorBySeries()||e.isSeriesFiltered(n))){var r=n.getRawData(),i={},a=n.getData(),o=nG(n).scope,s=n.visualStyleAccessPath||"itemStyle",l=nJ(n,s);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],h=a.getItemVisual(c,"colorFromPalette");if(h){var f=a.ensureUniqueItemVisual(c,"style"),d=r.getName(u)||u+"",p=r.count();f[l]=n.getColorFromPalette(d,o,p)}})}})}},HS=Math.PI;function zmt(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new he,r=new nn({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(r);var i=new Qe({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new nn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});n.add(a);var o;return t.showSpinner&&(o=new cE({shape:{startAngle:-HS/2,endAngle:-HS/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),o.animateShape(!0).when(1e3,{endAngle:HS*3/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:HS*3/2}).delay(300).start("circularInOut"),n.add(o)),n.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&o.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}var rJ=function(){function e(t,n,r,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=n,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return e.prototype.restoreData=function(t,n){t.restoreData(n),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,n){if(t.__pipeline){var r=this._pipelineMap.get(t.__pipeline.id),i=r.context,a=!n&&r.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>r.blockIndex,o=a?r.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/o):null;return{step:o,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,n){var r=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),o=r.progressiveEnabled&&n.incrementalPrepareRender&&a>=r.threshold,s=t.get("large")&&a>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=r.context={progressiveRender:o,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var n=this,r=n._pipelineMap=jt();t.eachSeries(function(i){var a=i.getProgressive(),o=i.uid;r.set(o,{id:o,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),n._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,n=this.api.getModel(),r=this.api;R(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),o="";Wa(!(i.reset&&i.overallReset),o),i.reset&&this._createSeriesStageTask(i,a,n,r),i.overallReset&&this._createOverallStageTask(i,a,n,r)},this)},e.prototype.prepareView=function(t,n,r,i){var a=t.renderTask,o=a.context;o.model=n,o.ecModel=r,o.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(n,a)},e.prototype.performDataProcessorTasks=function(t,n){this._performStageTasks(this._dataProcessorHandlers,t,n,{block:!0})},e.prototype.performVisualTasks=function(t,n,r){this._performStageTasks(this._visualHandlers,t,n,r)},e.prototype._performStageTasks=function(t,n,r,i){i=i||{};var a=!1,o=this;R(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=o._stageTaskMap.get(l.uid),h=c.seriesTaskMap,f=c.overallTask;if(f){var d,p=f.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&f.dirty(),o.updatePayload(f,r);var v=o.getPerformArgs(f,i.block);p.each(function(g){g.perform(v)}),f.perform(v)&&(a=!0)}else h&&h.each(function(g,m){s(i,g)&&g.dirty();var _=o.getPerformArgs(g,i.block);_.skip=!l.performRawSeries&&n.isSeriesFiltered(g.context.model),o.updatePayload(g,r),g.perform(_)&&(a=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var n;t.eachSeries(function(r){n=r.dataTask.perform()||n}),this.unfinished=n||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var n=t.tail;do{if(n.__block){t.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},e.prototype.updatePayload=function(t,n){n!=="remain"&&(t.context.payload=n)},e.prototype._createSeriesStageTask=function(t,n,r,i){var a=this,o=n.seriesTaskMap,s=n.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(h){var f=h.uid,d=s.set(f,o&&o.get(f)||Bx({plan:Wmt,reset:$mt,count:jmt}));d.context={model:h,ecModel:r,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(h,d)}},e.prototype._createOverallStageTask=function(t,n,r,i){var a=this,o=n.overallTask=n.overallTask||Bx({reset:Umt});o.context={ecModel:r,api:i,overallReset:t.overallReset,scheduler:a};var s=o.agentStubMap,l=o.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,h=!0,f=!1,d="";Wa(!t.createOnAllSeries,d),u?r.eachRawSeriesByType(u,p):c?c(r,i).each(p):(h=!1,R(r.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(f=!0,Bx({reset:Vmt,onDirty:Hmt})));m.context={model:v,overallProgress:h},m.agent=o,m.__block=h,a._pipe(v,m)}f&&o.dirty()},e.prototype._pipe=function(t,n){var r=t.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=n),i.tail&&i.tail.pipe(n),i.tail=n,n.__idxInPipeline=i.count++,n.__pipeline=i},e.wrapStageHandler=function(t,n){return ae(t)&&(t={overallReset:t,seriesType:Ymt(t)}),t.uid=o0("stageHandler"),n&&(t.visualType=n),t},e}();function Umt(e){e.overallReset(e.ecModel,e.api,e.payload)}function Vmt(e){return e.overallProgress&&Gmt}function Gmt(){this.agent.dirty(),this.getDownstream().dirty()}function Hmt(){this.agent&&this.agent.dirty()}function Wmt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function $mt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=jn(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?yt(t,function(n,r){return iJ(r)}):Xmt}var Xmt=iJ(0);function iJ(e){return function(t,n){var r=n.data,i=n.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(t,r)}}function jmt(e){return e.data.count()}function Ymt(e){JM=null;try{e(gb,aJ)}catch{}return JM}var gb={},aJ={},JM;oJ(gb,sk);oJ(aJ,IZ);gb.eachSeriesByType=gb.eachRawSeriesByType=function(e){JM=e};gb.eachComponent=function(e){e.mainType==="series"&&e.subType&&(JM=e.subType)};function oJ(e,t){for(var n in t.prototype)e[n]=Zr}var iG=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const qmt={color:iG,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],iG]};var Pa="#B9B8CE",aG="#100C2A",WS=function(){return{axisLine:{lineStyle:{color:Pa}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},oG=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],sJ={darkMode:!0,color:oG,backgroundColor:aG,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Pa}},textStyle:{color:Pa},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Pa}},dataZoom:{borderColor:"#71708A",textStyle:{color:Pa},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Pa}},timeline:{lineStyle:{color:Pa},label:{color:Pa},controlStyle:{color:Pa,borderColor:Pa}},calendar:{itemStyle:{color:aG},dayLabel:{color:Pa},monthLabel:{color:Pa},yearLabel:{color:Pa}},timeAxis:WS(),logAxis:WS(),valueAxis:WS(),categoryAxis:WS(),line:{symbol:"circle"},graph:{color:oG},gauge:{title:{color:Pa},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Pa},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};sJ.categoryAxis.splitLine.show=!1;var Kmt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var n={},r={},i={};if(Ft(t)){var a=wu(t);n.mainType=a.main||null,n.subType=a.sub||null}else{var o=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};R(t,function(l,u){for(var c=!1,h=0;h<o.length;h++){var f=o[h],d=u.lastIndexOf(f);if(d>0&&d===u.length-f.length){var p=u.slice(0,d);p!=="data"&&(n.mainType=p,n[f.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:n,dataQuery:r,otherQuery:i}},e.prototype.filter=function(t,n){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,o=r.model,s=r.view;if(!o||!s)return!0;var l=n.cptQuery,u=n.dataQuery;return c(l,o,"mainType")&&c(l,o,"subType")&&c(l,o,"index","componentIndex")&&c(l,o,"name")&&c(l,o,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,n.otherQuery,i,a));function c(h,f,d,p){return h[d]==null||f[p||d]===h[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),zO=["symbol","symbolSize","symbolRotate","symbolOffset"],sG=zO.concat(["symbolKeepAspect"]),Zmt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData();if(e.legendIcon&&n.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var r={},i={},a=!1,o=0;o<zO.length;o++){var s=zO[o],l=e.get(s);ae(l)?(a=!0,i[s]=l):r[s]=l}if(r.symbol=r.symbol||e.defaultSymbol,n.setVisual(ut({legendIcon:e.legendIcon||r.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},r)),t.isSeriesFiltered(e))return;var u=Je(i);function c(h,f){for(var d=e.getRawValue(f),p=e.getDataParams(f),v=0;v<u.length;v++){var g=u[v];h.setItemVisual(f,g,i[g](d,p))}}return{dataEach:a?c:null}}},Jmt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var n=e.getData();function r(i,a){for(var o=i.getItemModel(a),s=0;s<sG.length;s++){var l=sG[s],u=o.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:n.hasItemOption?r:null}}};function pk(e,t,n){switch(n){case"color":var r=e.getItemVisual(t,"style");return r[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,n)}}function w1(e,t){switch(t){case"color":var n=e.getVisual("style");return n[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function lJ(e,t,n,r){switch(n){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=r,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,n,r);break}}function uJ(e,t){function n(r,i){var a=[];return r.eachComponent({mainType:"series",subType:e,query:i},function(o){a.push(o.seriesIndex)}),a}R([[e+"ToggleSelect","toggleSelect"],[e+"Select","select"],[e+"UnSelect","unselect"]],function(r){t(r[0],function(i,a,o){i=ut({},i),o.dispatchAction(ut(i,{type:r[1],seriesIndex:n(a,i)}))})})}function og(e,t,n,r,i){var a=e+t;n.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(o){for(var s=o.seriesIndex,l=o.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var h=o.getData(),f=fv(h,i.fromActionPayload);n.trigger(a,{type:a,seriesId:o.id,name:ht(f)?h.getName(f[0]):h.getName(f),selected:Ft(l)?l:ut({},l)})}})}function Qmt(e,t,n){e.on("selectchanged",function(r){var i=n.getModel();r.isFromClick?(og("map","selectchanged",t,i,r),og("pie","selectchanged",t,i,r)):r.fromAction==="select"?(og("map","selected",t,i,r),og("pie","selected",t,i,r)):r.fromAction==="unselect"&&(og("map","unselected",t,i,r),og("pie","unselected",t,i,r))})}function Pp(e,t,n){for(var r;e&&!(t(e)&&(r=e,n));)e=e.__hostTarget||e.parent;return r}var tyt=Math.round(Math.random()*9),eyt=typeof Object.defineProperty=="function",nyt=function(){function e(){this._id="__ec_inner_"+tyt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,n){var r=this._guard(t);return eyt?Object.defineProperty(r,this._id,{value:n,enumerable:!1,configurable:!0}):r[this._id]=n,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}(),ryt=Ve.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r+a),e.lineTo(n-i,r+a),e.closePath()}}),iyt=Ve.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,r=t.cy,i=t.width/2,a=t.height/2;e.moveTo(n,r-a),e.lineTo(n+i,r),e.lineTo(n,r+a),e.lineTo(n-i,r),e.closePath()}}),ayt=Ve.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,r=t.y,i=t.width/5*3,a=Math.max(i,t.height),o=i/2,s=o*o/(a-o),l=r-a+o+s,u=Math.asin(s/o),c=Math.cos(u)*o,h=Math.sin(u),f=Math.cos(u),d=o*.6,p=o*.7;e.moveTo(n-c,l+s),e.arc(n,l,o,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(n+c-h*d,l+s+f*d,n,r-p,n,r),e.bezierCurveTo(n,r-p,n-c+h*d,l+s+f*d,n-c,l+s),e.closePath()}}),oyt=Ve.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,r=t.width,i=t.x,a=t.y,o=r/3*2;e.moveTo(i,a),e.lineTo(i+o,a+n),e.lineTo(i,a+n/4*3),e.lineTo(i-o,a+n),e.lineTo(i,a),e.closePath()}}),syt={line:Ei,rect:nn,roundRect:nn,square:nn,circle:yh,diamond:iyt,pin:ayt,arrow:oyt,triangle:ryt},lyt={line:function(e,t,n,r,i){i.x1=e,i.y1=t+r/2,i.x2=e+n,i.y2=t+r/2},rect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r},roundRect:function(e,t,n,r,i){i.x=e,i.y=t,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(e,t,n,r,i){var a=Math.min(n,r);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.r=Math.min(n,r)/2},diamond:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r},pin:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},arrow:function(e,t,n,r,i){i.x=e+n/2,i.y=t+r/2,i.width=n,i.height=r},triangle:function(e,t,n,r,i){i.cx=e+n/2,i.cy=t+r/2,i.width=n,i.height=r}},QM={};R(syt,function(e,t){QM[t]=new e});var uyt=Ve.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var r=VM(e,t,n),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(r.y=n.y+n.height*.4),r},buildPath:function(e,t,n){var r=t.symbolType;if(r!=="none"){var i=QM[r];i||(r="rect",i=QM[r]),lyt[r](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,n)}}});function cyt(e,t){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=e:n.fill=e,this.markRedraw()}}function Jr(e,t,n,r,i,a,o){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=JK(e.slice(8),new Ae(t,n,r,i),o?"center":"cover"):e.indexOf("path://")===0?l=hE(e.slice(7),{},new Ae(t,n,r,i),o?"center":"cover"):l=new uyt({shape:{symbolType:e,x:t,y:n,width:r,height:i}}),l.__isEmptyBrush=s,l.setColor=cyt,a&&l.setColor(a),l}function d0(e){return ht(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function Vv(e,t){if(e!=null)return ht(e)||(e=[e,e]),[Dt(e[0],t[0])||0,Dt(xe(e[1],e[0]),t[1])||0]}function Rp(e){return isFinite(e)}function hyt(e,t,n){var r=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,o=t.y2==null?0:t.y2;t.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),r=Rp(r)?r:0,i=Rp(i)?i:1,a=Rp(a)?a:0,o=Rp(o)?o:0;var s=e.createLinearGradient(r,a,i,o);return s}function fyt(e,t,n){var r=n.width,i=n.height,a=Math.min(r,i),o=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(o=o*r+n.x,s=s*i+n.y,l=l*a),o=Rp(o)?o:.5,s=Rp(s)?s:.5,l=l>=0&&Rp(l)?l:.5;var u=e.createRadialGradient(o,s,0,o,s,l);return u}function UO(e,t,n){for(var r=t.type==="radial"?fyt(e,t,n):hyt(e,t,n),i=t.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function dyt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}function $S(e){return parseInt(e,10)}function gm(e,t,n){var r=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(n[r]!=null&&n[r]!=="auto")return parseFloat(n[r]);var s=document.defaultView.getComputedStyle(e);return(e[i]||$S(s[r])||$S(e.style[r]))-($S(s[a])||0)-($S(s[o])||0)|0}function pyt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:xn(e)?[e]:ht(e)?e:null}function vk(e){var t=e.style,n=t.lineDash&&t.lineWidth>0&&pyt(t.lineDash,t.lineWidth),r=t.lineDashOffset;if(n){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(n=yt(n,function(a){return a/i}),r/=i)}return[n,r]}var vyt=new zu(!0);function tA(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function lG(e){return typeof e=="string"&&e!=="none"}function eA(e){var t=e.fill;return t!=null&&t!=="none"}function uG(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var n=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=n}else e.fill()}function cG(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var n=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=n}else e.stroke()}function VO(e,t,n){var r=zB(t.image,t.__image,n);if(iE(r)){var i=e.createPattern(r,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*VT),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function gyt(e,t,n,r){var i,a=tA(n),o=eA(n),s=n.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||vyt,h=t.__dirty;if(!r){var f=n.fill,d=n.stroke,p=o&&!!f.colorStops,v=a&&!!d.colorStops,g=o&&!!f.image,m=a&&!!d.image,_=void 0,y=void 0,x=void 0,S=void 0,b=void 0;(p||v)&&(b=t.getBoundingRect()),p&&(_=h?UO(e,f,b):t.__canvasFillGradient,t.__canvasFillGradient=_),v&&(y=h?UO(e,d,b):t.__canvasStrokeGradient,t.__canvasStrokeGradient=y),g&&(x=h||!t.__canvasFillPattern?VO(e,f,t):t.__canvasFillPattern,t.__canvasFillPattern=x),m&&(S=h||!t.__canvasStrokePattern?VO(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=x),p?e.fillStyle=_:g&&(x?e.fillStyle=x:o=!1),v?e.strokeStyle=y:m&&(S?e.strokeStyle=S:a=!1)}var w=t.getGlobalScale();c.setScale(w[0],w[1],t.segmentIgnoreThreshold);var A,T;e.setLineDash&&n.lineDash&&(i=vk(t),A=i[0],T=i[1]);var M=!0;(u||h&em)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),M=!1),c.reset(),t.buildPath(c,t.shape,r),c.toStatic(),t.pathUpdated()),M&&c.rebuildPath(e,l?s:1),A&&(e.setLineDash(A),e.lineDashOffset=T),r||(n.strokeFirst?(a&&cG(e,n),o&&uG(e,n)):(o&&uG(e,n),a&&cG(e,n))),A&&e.setLineDash([])}function myt(e,t,n){var r=t.__image=zB(n.image,t.__image,t,t.onload);if(!(!r||!iE(r))){var i=n.x||0,a=n.y||0,o=t.getWidth(),s=t.getHeight(),l=r.width/r.height;if(o==null&&s!=null?o=s*l:s==null&&o!=null?s=o/l:o==null&&s==null&&(o=r.width,s=r.height),n.sWidth&&n.sHeight){var u=n.sx||0,c=n.sy||0;e.drawImage(r,u,c,n.sWidth,n.sHeight,i,a,o,s)}else if(n.sx&&n.sy){var u=n.sx,c=n.sy,h=o-u,f=s-c;e.drawImage(r,u,c,h,f,i,a,o,s)}else e.drawImage(r,i,a,o,s)}}function yyt(e,t,n){var r,i=n.text;if(i!=null&&(i+=""),i){e.font=n.font||kf,e.textAlign=n.textAlign,e.textBaseline=n.textBaseline;var a=void 0,o=void 0;e.setLineDash&&n.lineDash&&(r=vk(t),a=r[0],o=r[1]),a&&(e.setLineDash(a),e.lineDashOffset=o),n.strokeFirst?(tA(n)&&e.strokeText(i,n.x,n.y),eA(n)&&e.fillText(i,n.x,n.y)):(eA(n)&&e.fillText(i,n.x,n.y),tA(n)&&e.strokeText(i,n.x,n.y)),a&&e.setLineDash([])}}var hG=["shadowBlur","shadowOffsetX","shadowOffsetY"],fG=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function cJ(e,t,n,r,i){var a=!1;if(!r&&(n=n||{},t===n))return!1;if(r||t.opacity!==n.opacity){mo(e,i),a=!0;var o=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(o)?Zp.opacity:o}(r||t.blend!==n.blend)&&(a||(mo(e,i),a=!0),e.globalCompositeOperation=t.blend||Zp.blend);for(var s=0;s<hG.length;s++){var l=hG[s];(r||t[l]!==n[l])&&(a||(mo(e,i),a=!0),e[l]=e.dpr*(t[l]||0))}return(r||t.shadowColor!==n.shadowColor)&&(a||(mo(e,i),a=!0),e.shadowColor=t.shadowColor||Zp.shadowColor),a}function dG(e,t,n,r,i){var a=mb(t,i.inHover),o=r?null:n&&mb(n,i.inHover)||{};if(a===o)return!1;var s=cJ(e,a,o,r,i);if((r||a.fill!==o.fill)&&(s||(mo(e,i),s=!0),lG(a.fill)&&(e.fillStyle=a.fill)),(r||a.stroke!==o.stroke)&&(s||(mo(e,i),s=!0),lG(a.stroke)&&(e.strokeStyle=a.stroke)),(r||a.opacity!==o.opacity)&&(s||(mo(e,i),s=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(mo(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<fG.length;c++){var h=fG[c],f=h[0];(r||a[f]!==o[f])&&(s||(mo(e,i),s=!0),e[f]=a[f]||h[1])}return s}function _yt(e,t,n,r,i){return cJ(e,mb(t,i.inHover),n&&mb(n,i.inHover),r,i)}function hJ(e,t){var n=t.transform,r=e.dpr||1;n?e.setTransform(r*n[0],r*n[1],r*n[2],r*n[3],r*n[4],r*n[5]):e.setTransform(r,0,0,r,0,0)}function xyt(e,t,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i];r=r||a.isZeroArea(),hJ(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}n.allClipped=r}function byt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var pG=1,vG=2,gG=3,mG=4;function Syt(e){var t=eA(e),n=tA(e);return!(e.lineDash||!(+t^+n)||t&&typeof e.fill!="string"||n&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function mo(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function mb(e,t){return t&&e.__hoverStyle||e.style}function SE(e,t){Op(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Op(e,t,n,r){var i=t.transform;if(!t.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){t.__dirty&=~jo,t.__isRendered=!1;return}var a=t.__clipPaths,o=n.prevElClipPaths,s=!1,l=!1;if((!o||dyt(a,o))&&(o&&o.length&&(mo(e,n),e.restore(),l=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),a&&a.length&&(mo(e,n),e.save(),xyt(a,e,n),s=!0),n.prevElClipPaths=a),n.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=n.prevEl;u||(l=s=!0);var c=t instanceof Ve&&t.autoBatch&&Syt(t.style);s||byt(i,u.transform)?(mo(e,n),hJ(e,t)):c||mo(e,n);var h=mb(t,n.inHover);t instanceof Ve?(n.lastDrawType!==pG&&(l=!0,n.lastDrawType=pG),dG(e,t,u,l,n),(!c||!n.batchFill&&!n.batchStroke)&&e.beginPath(),gyt(e,t,h,c),c&&(n.batchFill=h.fill||"",n.batchStroke=h.stroke||"")):t instanceof sy?(n.lastDrawType!==gG&&(l=!0,n.lastDrawType=gG),dG(e,t,u,l,n),yyt(e,t,h)):t instanceof Wi?(n.lastDrawType!==vG&&(l=!0,n.lastDrawType=vG),_yt(e,t,u,l,n),myt(e,t,h)):t.getTemporalDisplayables&&(n.lastDrawType!==mG&&(l=!0,n.lastDrawType=mG),wyt(e,t,n)),c&&r&&mo(e,n),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),n.prevEl=t,t.__dirty=0,t.__isRendered=!0}function wyt(e,t,n){var r=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},o,s;for(o=t.getCursor(),s=r.length;o<s;o++){var l=r[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Op(e,l,a,o===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Op(e,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var VD=new nyt,yG=new t0(100),_G=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function cy(e,t){if(e==="none")return null;var n=t.getDevicePixelRatio(),r=t.getZr(),i=r.painter.type==="svg";e.dirty&&VD.delete(e);var a=VD.get(e);if(a)return a;var o=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});o.backgroundColor==="none"&&(o.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=o.rotation,s.scaleX=s.scaleY=i?1:1/n,VD.set(e,s),e.dirty=!1,s;function l(u){for(var c=[n],h=!0,f=0;f<_G.length;++f){var d=o[_G[f]];if(d!=null&&!ht(d)&&!Ft(d)&&!xn(d)&&typeof d!="boolean"){h=!1;break}c.push(d)}var p;if(h){p=c.join(",")+(i?"-svg":"");var v=yG.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=dJ(o.dashArrayX),m=Tyt(o.dashArrayY),_=fJ(o.symbol),y=Myt(g),x=pJ(m),S=!i&&Ff.createCanvas(),b=i&&{tag:"g",attrs:{},key:"dcl",children:[]},w=T(),A;S&&(S.width=w.width*n,S.height=w.height*n,A=S.getContext("2d")),M(),h&&yG.put(p,S||b),u.image=S,u.svgElement=b,u.svgWidth=w.width,u.svgHeight=w.height;function T(){for(var C=1,E=0,D=y.length;E<D;++E)C=B4(C,y[E]);for(var I=1,E=0,D=_.length;E<D;++E)I=B4(I,_[E].length);C*=I;var L=x*y.length*_.length;return{width:Math.max(1,Math.min(C,o.maxTileWidth)),height:Math.max(1,Math.min(L,o.maxTileHeight))}}function M(){A&&(A.clearRect(0,0,S.width,S.height),o.backgroundColor&&(A.fillStyle=o.backgroundColor,A.fillRect(0,0,S.width,S.height)));for(var C=0,E=0;E<m.length;++E)C+=m[E];if(C<=0)return;for(var D=-x,I=0,L=0,P=0;D<w.height;){if(I%2===0){for(var B=L/2%_.length,N=0,k=0,U=0;N<w.width*2;){for(var Z=0,E=0;E<g[P].length;++E)Z+=g[P][E];if(Z<=0)break;if(k%2===0){var nt=(1-o.symbolSize)*.5,ct=N+g[P][k]*nt,K=D+m[I]*nt,$=g[P][k]*o.symbolSize,ot=m[I]*o.symbolSize,tt=U/2%_[B].length;et(ct,K,$,ot,_[B][tt])}N+=g[P][k],++U,++k,k===g[P].length&&(k=0)}++P,P===g.length&&(P=0)}D+=m[I],++L,++I,I===m.length&&(I=0)}function et(xt,St,X,Ct,It){var Jt=i?1:n,Gt=Jr(It,xt*Jt,St*Jt,X*Jt,Ct*Jt,o.color,o.symbolKeepAspect);if(i){var ve=r.painter.renderOneToVNode(Gt);ve&&b.children.push(ve)}else SE(A,Gt)}}}}function fJ(e){if(!e||e.length===0)return[["rect"]];if(Ft(e))return[[e]];for(var t=!0,n=0;n<e.length;++n)if(!Ft(e[n])){t=!1;break}if(t)return fJ([e]);for(var r=[],n=0;n<e.length;++n)Ft(e[n])?r.push([e[n]]):r.push(e[n]);return r}function dJ(e){if(!e||e.length===0)return[[0,0]];if(xn(e)){var t=Math.ceil(e);return[[t,t]]}for(var n=!0,r=0;r<e.length;++r)if(!xn(e[r])){n=!1;break}if(n)return dJ([e]);for(var i=[],r=0;r<e.length;++r)if(xn(e[r])){var t=Math.ceil(e[r]);i.push([t,t])}else{var t=yt(e[r],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Tyt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(xn(e)){var t=Math.ceil(e);return[t,t]}var n=yt(e,function(r){return Math.ceil(r)});return e.length%2?n.concat(n):n}function Myt(e){return yt(e,function(t){return pJ(t)})}function pJ(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return e.length%2===1?t*2:t}function Ayt(e,t){e.eachRawSeries(function(n){if(!e.isSeriesFiltered(n)){var r=n.getData();r.hasItemVisual()&&r.each(function(o){var s=r.getItemVisual(o,"decal");if(s){var l=r.ensureUniqueItemVisual(o,"style");l.decal=cy(s,t)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=cy(i,t)}}})}var fl=new qs,vJ={};function Cyt(e,t){vJ[e]=t}function gJ(e){return vJ[e]}var Eyt=1,Dyt=800,Iyt=900,Lyt=1e3,Pyt=2e3,Ryt=5e3,mJ=1e3,Oyt=1100,gk=2e3,yJ=3e3,Nyt=4e3,wE=4500,Byt=4600,kyt=5e3,Fyt=6e3,_J=7e3,zyt={PROCESSOR:{FILTER:Lyt,SERIES_FILTER:Dyt,STATISTIC:Ryt},VISUAL:{LAYOUT:mJ,PROGRESSIVE_LAYOUT:Oyt,GLOBAL:gk,CHART:yJ,POST_CHART_LAYOUT:Byt,COMPONENT:Nyt,BRUSH:kyt,CHART_ITEM:wE,ARIA:Fyt,DECAL:_J}},ga="__flagInMainProcess",ro="__pendingUpdate",GD="__needsUpdateStatus",xG=/^[a-zA-Z0-9_]+$/,HD="__connectUpdateStatus",bG=0,Uyt=1,Vyt=2;function xJ(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this.isDisposed()){this.id;return}return SJ(this,e,t)}}function bJ(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return SJ(this,e,t)}}function SJ(e,t,n){return n[0]=n[0]&&n[0].toLowerCase(),qs.prototype[t].apply(e,n)}var wJ=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(qs),TJ=wJ.prototype;TJ.on=bJ("on");TJ.off=bJ("off");var sg,WD,XS,kh,$D,XD,jD,s_,l_,SG,wG,YD,TG,jS,MG,MJ,ns,AG,AJ=function(e){it(t,e);function t(n,r,i){var a=e.call(this,new Kmt)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Ft(r)&&(r=CJ[r]),a._dom=n;var o="canvas",s="auto",l=!1;i.ssr&&zdt(function(f){var d=fe(f),p=d.dataIndex;if(p!=null){var v=jt();return v.set("series_index",d.seriesIndex),v.set("data_index",p),d.ssrType&&v.set("ssr_type",d.ssrType),v}});var u=a._zr=gO(n,{renderer:i.renderer||o,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:xe(i.useDirtyRect,l),useCoarsePointer:xe(i.useCoarsePointer,s),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=dk(Vt(u.flush,u),17),r=ce(r),r&&PZ(r,!0),a._theme=r,a._locale=lgt(i.locale||lZ),a._coordSysMgr=new c0;var c=a._api=MG(a);function h(f,d){return f.__prio-d.__prio}return WT(rA,h),WT(GO,h),a._scheduler=new rJ(a,c,GO,rA),a._messageCenter=new wJ,a._initEvents(),a.resize=Vt(a.resize,a),u.animation.on("frame",a._onframe,a),SG(u,a),wG(u,a),OM(a),a}return t.prototype._onframe=function(){if(!this._disposed){AG(this);var n=this._scheduler;if(this[ro]){var r=this[ro].silent;this[ga]=!0;try{sg(this),kh.update.call(this,null,this[ro].updateParams)}catch(l){throw this[ga]=!1,this[ro]=null,l}this._zr.flush(),this[ga]=!1,this[ro]=null,s_.call(this,r),l_.call(this,r)}else if(n.unfinished){var i=Eyt,a=this._model,o=this._api;n.unfinished=!1;do{var s=+new Date;n.performSeriesTasks(a),n.performDataProcessorTasks(a),XD(this,a),n.performVisualTasks(a),jS(this,this._model,o,"remain",{}),i-=+new Date-s}while(i>0&&n.unfinished);n.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(n,r,i){if(!this[ga]){if(this._disposed){this.id;return}var a,o,s;if(se(r)&&(i=r.lazyUpdate,a=r.silent,o=r.replaceMerge,s=r.transition,r=r.notMerge),this[ga]=!0,!this._model||r){var l=new Rgt(this._api),u=this._theme,c=this._model=new sk;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(n,{replaceMerge:o},HO);var h={seriesTransition:s,optionChanged:!0};if(i)this[ro]={silent:a,updateParams:h},this[ga]=!1,this.getZr().wakeUp();else{try{sg(this),kh.update.call(this,null,h)}catch(f){throw this[ro]=null,this[ga]=!1,f}this._ssr||this._zr.flush(),this[ro]=null,this[ga]=!1,s_.call(this,a),l_.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||qe.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(n){return this.renderToCanvas(n)},t.prototype.renderToCanvas=function(n){n=n||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(n){n=n||{};var r=this._zr.painter;return r.renderToString({useViewBox:n.useViewBox})},t.prototype.getSvgDataURL=function(){if(qe.svgSupported){var n=this._zr,r=n.storage.getDisplayList();return R(r,function(i){i.stopAnimation(null,!0)}),n.painter.toDataURL()}},t.prototype.getDataURL=function(n){if(this._disposed){this.id;return}n=n||{};var r=n.excludeComponents,i=this._model,a=[],o=this;R(r,function(l){i.eachComponent({mainType:l},function(u){var c=o._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return R(a,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(n){if(this._disposed){this.id;return}var r=n.type==="svg",i=this.group,a=Math.min,o=Math.max,s=1/0;if(CG[i]){var l=s,u=s,c=-s,h=-s,f=[],d=n&&n.pixelRatio||this.getDevicePixelRatio();R(Fx,function(y,x){if(y.group===i){var S=r?y.getZr().painter.getSvgDom().innerHTML:y.renderToCanvas(ce(n)),b=y.getDom().getBoundingClientRect();l=a(b.left,l),u=a(b.top,u),c=o(b.right,c),h=o(b.bottom,h),f.push({dom:S,left:b.left,top:b.top})}}),l*=d,u*=d,c*=d,h*=d;var p=c-l,v=h-u,g=Ff.createCanvas(),m=gO(g,{renderer:r?"svg":"canvas"});if(m.resize({width:p,height:v}),r){var _="";return R(f,function(y){var x=y.left-l,S=y.top-u;_+='<g transform="translate('+x+","+S+')">'+y.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=_,n.connectedBackgroundColor&&m.painter.setBackgroundColor(n.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return n.connectedBackgroundColor&&m.add(new nn({shape:{x:0,y:0,width:p,height:v},style:{fill:n.connectedBackgroundColor}})),R(f,function(y){var x=new Wi({style:{x:y.left*d-l,y:y.top*d-u,image:y.dom}});m.add(x)}),m.refreshImmediately(),g.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},t.prototype.convertToPixel=function(n,r){return $D(this,"convertToPixel",n,r)},t.prototype.convertFromPixel=function(n,r){return $D(this,"convertFromPixel",n,r)},t.prototype.containPixel=function(n,r){if(this._disposed){this.id;return}var i=this._model,a,o=Lx(i,n);return R(o,function(s,l){l.indexOf("Models")>=0&&R(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var h=this._chartsMap[u.__viewId];h&&h.containPoint&&(a=a||h.containPoint(r,u))}},this)},this),!!a},t.prototype.getVisual=function(n,r){var i=this._model,a=Lx(i,n,{defaultMainType:"series"}),o=a.seriesModel,s=o.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?s.indexOfRawIndex(a.dataIndex):null;return l!=null?pk(s,l,r):w1(s,r)},t.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},t.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},t.prototype._initEvents=function(){var n=this;R(Gyt,function(r){var i=function(a){var o=n.getModel(),s=a.target,l,u=r==="globalout";if(u?l={}:s&&Pp(s,function(p){var v=fe(p);if(v&&v.dataIndex!=null){var g=v.dataModel||o.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType,s)||{},!0}else if(v.eventData)return l=ut({},v.eventData),!0},!0),l){var c=l.componentType,h=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",h=l.seriesIndex);var f=c&&h!=null&&o.getComponent(c,h),d=f&&n[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=a,l.type=r,n._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:f,view:d},n.trigger(r,l)}};i.zrEventfulCallAtLast=!0,n._zr.on(r,i,n)}),R(kx,function(r,i){n._messageCenter.on(i,function(a){this.trigger(i,a)},n)}),R(["selectchanged"],function(r){n._messageCenter.on(r,function(i){this.trigger(r,i)},n)}),Qmt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var n=this.getDom();n&&xK(this.getDom(),yk,"");var r=this,i=r._api,a=r._model;R(r._componentsViews,function(o){o.dispose(a,i)}),R(r._chartsViews,function(o){o.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete Fx[r.id]},t.prototype.resize=function(n){if(!this[ga]){if(this._disposed){this.id;return}this._zr.resize(n);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=n&&n.silent;this[ro]&&(a==null&&(a=this[ro].silent),i=!0,this[ro]=null),this[ga]=!0;try{i&&sg(this),kh.update.call(this,{type:"resize",animation:ut({duration:0},n&&n.animation)})}catch(o){throw this[ga]=!1,o}this[ga]=!1,s_.call(this,a),l_.call(this,a)}}},t.prototype.showLoading=function(n,r){if(this._disposed){this.id;return}if(se(n)&&(r=n,n=""),n=n||"default",this.hideLoading(),!!WO[n]){var i=WO[n](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(n){var r=ut({},n);return r.type=kx[n.type],r},t.prototype.dispatchAction=function(n,r){if(this._disposed){this.id;return}if(se(r)||(r={silent:!!r}),!!nA[n.type]&&this._model){if(this[ga]){this._pendingActions.push(n);return}var i=r.silent;jD.call(this,n,i);var a=r.flush;a?this._zr.flush():a!==!1&&qe.browser.weChat&&this._throttledZrFlush(),s_.call(this,i),l_.call(this,i)}},t.prototype.updateLabelLayout=function(){fl.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(n){if(this._disposed){this.id;return}var r=n.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){sg=function(h){var f=h._scheduler;f.restorePipelines(h._model),f.prepareStageTasks(),WD(h,!0),WD(h,!1),f.plan()},WD=function(h,f){for(var d=h._model,p=h._scheduler,v=f?h._componentsViews:h._chartsViews,g=f?h._componentsMap:h._chartsMap,m=h._zr,_=h._api,y=0;y<v.length;y++)v[y].__alive=!1;f?d.eachComponent(function(b,w){b!=="series"&&x(w)}):d.eachSeries(x);function x(b){var w=b.__requireNewView;b.__requireNewView=!1;var A="_ec_"+b.id+"_"+b.type,T=!w&&g[A];if(!T){var M=wu(b.type),C=f?Zn.getClass(M.main,M.sub):hn.getClass(M.sub);T=new C,T.init(d,_),g[A]=T,v.push(T),m.add(T.group)}b.__viewId=T.__id=A,T.__alive=!0,T.__model=b,T.group.__ecComponentInfo={mainType:b.mainType,index:b.componentIndex},!f&&p.prepareView(T,b,d,_)}for(var y=0;y<v.length;){var S=v[y];S.__alive?y++:(!f&&S.renderTask.dispose(),m.remove(S.group),S.dispose(d,_),v.splice(y,1),g[S.__id]===S&&delete g[S.__id],S.__id=S.group.__ecComponentInfo=null)}},XS=function(h,f,d,p,v){var g=h._model;if(g.setUpdatePayload(d),!p){R([].concat(h._componentsViews).concat(h._chartsViews),S);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var _={mainType:p,query:m};v&&(_.subType=v);var y=d.excludeSeriesId,x;y!=null&&(x=jt(),R(jn(y),function(b){var w=pi(b,null);w!=null&&x.set(w,!0)})),g&&g.eachComponent(_,function(b){var w=x&&x.get(b.id)!=null;if(!w)if(l5(d))if(b instanceof bn)d.type===Jp&&!d.notBlur&&!b.get(["emphasis","disabled"])&&svt(b,d,h._api);else{var A=$B(b.mainType,b.componentIndex,d.name,h._api),T=A.focusSelf,M=A.dispatchers;d.type===Jp&&T&&!d.notBlur&&TO(b.mainType,b.componentIndex,h._api),M&&R(M,function(C){d.type===Jp?qc(C):Kc(C)})}else AO(d)&&b instanceof bn&&(cvt(b,d,h._api),o5(b),ns(h))},h),g&&g.eachComponent(_,function(b){var w=x&&x.get(b.id)!=null;w||S(h[p==="series"?"_chartsMap":"_componentsMap"][b.__viewId])},h);function S(b){b&&b.__alive&&b[f]&&b[f](b.__model,g,h._api,d)}},kh={prepareAndUpdate:function(h){sg(this),kh.update.call(this,h,{optionChanged:h.newOption!=null})},update:function(h,f){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(d){d.setUpdatePayload(h),m.restoreData(d,h),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,h),XD(this,d),g.update(d,p),n(d),m.performVisualTasks(d,h),YD(this,d,p,h,f);var _=d.get("backgroundColor")||"transparent",y=d.get("darkMode");v.setBackgroundColor(_),y!=null&&y!=="auto"&&v.setDarkMode(y),fl.trigger("afterupdate",d,p)}},updateTransform:function(h){var f=this,d=this._model,p=this._api;if(d){d.setUpdatePayload(h);var v=[];d.eachComponent(function(m,_){if(m!=="series"){var y=f.getViewOfComponentModel(_);if(y&&y.__alive)if(y.updateTransform){var x=y.updateTransform(_,d,p,h);x&&x.update&&v.push(y)}else v.push(y)}});var g=jt();d.eachSeries(function(m){var _=f._chartsMap[m.__viewId];if(_.updateTransform){var y=_.updateTransform(m,d,p,h);y&&y.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),n(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0,dirtyMap:g}),jS(this,d,p,h,{},g),fl.trigger("afterupdate",d,p)}},updateView:function(h){var f=this._model;f&&(f.setUpdatePayload(h),hn.markUpdateMethod(h,"updateView"),n(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0}),YD(this,f,this._api,h,{}),fl.trigger("afterupdate",f,this._api))},updateVisual:function(h){var f=this,d=this._model;d&&(d.setUpdatePayload(h),d.eachSeries(function(p){p.getData().clearAllVisual()}),hn.markUpdateMethod(h,"updateVisual"),n(d),this._scheduler.performVisualTasks(d,h,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=f.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,f._api,h)}}),d.eachSeries(function(p){var v=f._chartsMap[p.__viewId];v.updateVisual(p,d,f._api,h)}),fl.trigger("afterupdate",d,this._api))},updateLayout:function(h){kh.update.call(this,h)}},$D=function(h,f,d,p){if(h._disposed){h.id;return}for(var v=h._model,g=h._coordSysMgr.getCoordinateSystems(),m,_=Lx(v,d),y=0;y<g.length;y++){var x=g[y];if(x[f]&&(m=x[f](v,_,p))!=null)return m}},XD=function(h,f){var d=h._chartsMap,p=h._scheduler;f.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},jD=function(h,f){var d=this,p=this.getModel(),v=h.type,g=h.escapeConnect,m=nA[v],_=m.actionInfo,y=(_.update||"update").split(":"),x=y.pop(),S=y[0]!=null&&wu(y[0]);this[ga]=!0;var b=[h],w=!1;h.batch&&(w=!0,b=yt(h.batch,function(I){return I=te(ut({},I),h),I.batch=null,I}));var A=[],T,M=AO(h),C=l5(h);if(C&&VK(this._api),R(b,function(I){if(T=m.action(I,d._model,d._api),T=T||ut({},I),T.type=_.event||T.type,A.push(T),C){var L=kB(h),P=L.queryOptionMap,B=L.mainTypeSpecified,N=B?P.keys()[0]:"series";XS(d,x,I,N),ns(d)}else M?(XS(d,x,I,"series"),ns(d)):S&&XS(d,x,I,S.main,S.sub)}),x!=="none"&&!C&&!M&&!S)try{this[ro]?(sg(this),kh.update.call(this,h),this[ro]=null):kh[x].call(this,h)}catch(I){throw this[ga]=!1,I}if(w?T={type:_.event||v,escapeConnect:g,batch:A}:T=A[0],this[ga]=!1,!f){var E=this._messageCenter;if(E.trigger(T.type,T),M){var D={type:"selectchanged",escapeConnect:g,selected:hvt(p),isFromClick:h.isFromClick||!1,fromAction:h.type,fromActionPayload:h};E.trigger(D.type,D)}}},s_=function(h){for(var f=this._pendingActions;f.length;){var d=f.shift();jD.call(this,d,h)}},l_=function(h){!h&&this.trigger("updated")},SG=function(h,f){h.on("rendered",function(d){f.trigger("rendered",d),h.animation.isFinished()&&!f[ro]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},wG=function(h,f){h.on("mouseover",function(d){var p=d.target,v=Pp(p,cb);v&&(lvt(v,d,f._api),ns(f))}).on("mouseout",function(d){var p=d.target,v=Pp(p,cb);v&&(uvt(v,d,f._api),ns(f))}).on("click",function(d){var p=d.target,v=Pp(p,function(_){return fe(_).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=fe(v);f._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function n(h){h.clearColorPalette(),h.eachSeries(function(f){f.clearColorPalette()})}function r(h){var f=[],d=[],p=!1;if(h.eachComponent(function(_,y){var x=y.get("zlevel")||0,S=y.get("z")||0,b=y.getZLevelKey();p=p||!!b,(_==="series"?d:f).push({zlevel:x,z:S,idx:y.componentIndex,type:_,key:b})}),p){var v=f.concat(d),g,m;WT(v,function(_,y){return _.zlevel===y.zlevel?_.z-y.z:_.zlevel-y.zlevel}),R(v,function(_){var y=h.getComponent(_.type,_.idx),x=_.zlevel,S=_.key;g!=null&&(x=Math.max(g,x)),S?(x===g&&S!==m&&x++,m=S):m&&(x===g&&x++,m=""),g=x,y.setZLevel(x)})}}YD=function(h,f,d,p,v){r(f),TG(h,f,d,p,v),R(h._chartsViews,function(g){g.__alive=!1}),jS(h,f,d,p,v),R(h._chartsViews,function(g){g.__alive||g.remove(f,d)})},TG=function(h,f,d,p,v,g){R(g||h._componentsViews,function(m){var _=m.__model;u(_,m),m.render(_,f,d,p),s(_,m),c(_,m)})},jS=function(h,f,d,p,v,g){var m=h._scheduler;v=ut(v||{},{updatedSeries:f.getSeries()}),fl.trigger("series:beforeupdate",f,d,v);var _=!1;f.eachSeries(function(y){var x=h._chartsMap[y.__viewId];x.__alive=!0;var S=x.renderTask;m.updatePayload(S,p),u(y,x),g&&g.get(y.uid)&&S.dirty(),S.perform(m.getPerformArgs(S))&&(_=!0),x.group.silent=!!y.get("silent"),o(y,x),o5(y)}),m.unfinished=_||m.unfinished,fl.trigger("series:layoutlabels",f,d,v),fl.trigger("series:transition",f,d,v),f.eachSeries(function(y){var x=h._chartsMap[y.__viewId];s(y,x),c(y,x)}),a(h,f),fl.trigger("series:afterupdate",f,d,v)},ns=function(h){h[GD]=!0,h.getZr().wakeUp()},AG=function(h){h[GD]&&(h.getZr().storage.traverse(function(f){Pm(f)||i(f)}),h[GD]=!1)};function i(h){for(var f=[],d=h.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||f.push(v)}h.selected&&h.states.select&&f.push("select"),h.hoverState===sE&&h.states.emphasis?f.push("emphasis"):h.hoverState===m1&&h.states.blur&&f.push("blur"),h.useStates(f)}function a(h,f){var d=h._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>f.get("hoverLayerThreshold")&&!qe.node&&!qe.worker&&f.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=h._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function o(h,f){var d=h.get("blendMode")||null;f.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(h,f){if(!h.preventAutoZ){var d=h.get("z")||0,p=h.get("zlevel")||0;f.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(h,f,d,p){var v=h.getTextContent(),g=h.getTextGuideLine(),m=h.isGroup;if(m)for(var _=h.childrenRef(),y=0;y<_.length;y++)p=Math.max(l(_[y],f,d,p),p);else h.z=f,h.zlevel=d,p=Math.max(h.z2,p);if(v&&(v.z=f,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var x=h.textGuideLineConfig;g.z=f,g.zlevel=d,isFinite(p)&&(g.z2=p+(x&&x.showAbove?1:-1))}return p}function u(h,f){f.eachRendered(function(d){if(!Pm(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(h,f){var d=h.getModel("stateAnimation"),p=h.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;f.eachRendered(function(m){if(m.states&&m.states.emphasis){if(Pm(m))return;if(m instanceof Ve&&gvt(m),m.__dirty){var _=m.prevStates;_&&m.useStates(_)}if(p){m.stateTransition=g;var y=m.getTextContent(),x=m.getTextGuideLine();y&&(y.stateTransition=g),x&&(x.stateTransition=g)}m.__dirty&&i(m)}})}MG=function(h){return new(function(f){it(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return h._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){qc(p,v),ns(h)},d.prototype.leaveEmphasis=function(p,v){Kc(p,v),ns(h)},d.prototype.enterBlur=function(p){kK(p),ns(h)},d.prototype.leaveBlur=function(p){WB(p),ns(h)},d.prototype.enterSelect=function(p){FK(p),ns(h)},d.prototype.leaveSelect=function(p){zK(p),ns(h)},d.prototype.getModel=function(){return h.getModel()},d.prototype.getViewOfComponentModel=function(p){return h.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return h.getViewOfSeriesModel(p)},d}(IZ))(h)},MJ=function(h){function f(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[HD]=p}}R(kx,function(d,p){h._messageCenter.on(p,function(v){if(CG[h.group]&&h[HD]!==bG){if(v&&v.escapeConnect)return;var g=h.makeActionFromEvent(v),m=[];R(Fx,function(_){_!==h&&_.group===h.group&&m.push(_)}),f(m,bG),R(m,function(_){_[HD]!==Uyt&&_.dispatchAction(g)}),f(m,Vyt)}})})}}(),t}(qs),mk=AJ.prototype;mk.on=xJ("on");mk.off=xJ("off");mk.one=function(e,t,n){var r=this;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];t&&t.apply&&t.apply(this,a),r.off(e,i)}this.on.call(this,e,i,n)};var Gyt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var nA={},kx={},GO=[],HO=[],rA=[],CJ={},WO={},Fx={},CG={},Hyt=+new Date-0,yk="_echarts_instance_";function _k(e,t,n){{var r=Wyt(e);if(r)return r}var i=new AJ(e,t,n);return i.id="ec_"+Hyt++,Fx[i.id]=i,xK(e,yk,i.id),MJ(i),fl.trigger("afterinit",i),i}function Wyt(e){return Fx[ipt(e,yk)]}function EJ(e,t){CJ[e]=t}function xk(e){Le(HO,e)<0&&HO.push(e)}function DJ(e,t){Sk(GO,e,t,Pyt)}function IJ(e){bk("afterinit",e)}function LJ(e){bk("afterupdate",e)}function bk(e,t){fl.on(e,t)}function Ju(e,t,n){ae(t)&&(n=t,t="");var r=se(e)?e.type:[e,e={event:t}][0];e.event=(e.event||r).toLowerCase(),t=e.event,!kx[t]&&(Wa(xG.test(r)&&xG.test(t)),nA[r]||(nA[r]={action:n,actionInfo:e}),kx[t]=r)}function $yt(e,t){c0.register(e,t)}function PJ(e){var t=c0.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()}function Xyt(e,t){Sk(rA,e,t,mJ,"layout")}function Gv(e,t){Sk(rA,e,t,yJ,"visual")}var EG=[];function Sk(e,t,n,r,i){if((ae(t)||se(t))&&(n=t,t=r),!(Le(EG,n)>=0)){EG.push(n);var a=rJ.wrapStageHandler(n,i);a.__prio=t,a.__raw=n,e.push(a)}}function RJ(e,t){WO[e]=t}function jyt(e,t,n){var r=gJ("registerMap");r&&r(e,t,n)}function $O(e){var t=gJ("getMap");return t&&t(e)}var Yyt=hmt;Gv(gk,Bmt);Gv(wE,kmt);Gv(wE,Fmt);Gv(gk,Zmt);Gv(wE,Jmt);Gv(_J,Ayt);xk(PZ);DJ(Iyt,$gt);RJ("default",zmt);Ju({type:Jp,event:Jp,update:Jp},Zr);Ju({type:qT,event:qT,update:qT},Zr);Ju({type:Px,event:Px,update:Px},Zr);Ju({type:KT,event:KT,update:KT},Zr);Ju({type:Rx,event:Rx,update:Rx},Zr);EJ("light",qmt);EJ("dark",sJ);var DG=[],qyt={registerPreprocessor:xk,registerProcessor:DJ,registerPostInit:IJ,registerPostUpdate:LJ,registerUpdateLifecycle:bk,registerAction:Ju,registerCoordinateSystem:$yt,registerLayout:Xyt,registerVisual:Gv,registerTransform:Yyt,registerLoading:RJ,registerMap:jyt,registerImpl:Cyt,PRIORITY:zyt,ComponentModel:Ie,ComponentView:Zn,SeriesModel:bn,ChartView:hn,registerComponentModel:function(e){Ie.registerClass(e)},registerComponentView:function(e){Zn.registerClass(e)},registerSeriesModel:function(e){bn.registerClass(e)},registerChartView:function(e){hn.registerClass(e)},registerSubTypeDefaulter:function(e,t){Ie.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){kdt(e,t)}};function ue(e){if(ht(e)){R(e,function(t){ue(t)});return}Le(DG,e)>=0||(DG.push(e),ae(e)&&(e={install:e}),e.install(qyt))}function u_(e){return e==null?0:e.length||1}function IG(e){return e}var Zc=function(){function e(t,n,r,i,a,o){this._old=t,this._new=n,this._oldKeyGetter=r||IG,this._newKeyGetter=i||IG,this.context=a,this._diffModeMultiple=o==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,n=this._new,r={},i=new Array(t.length),a=new Array(n.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(n,r,a,"_newKeyGetter");for(var o=0;o<t.length;o++){var s=i[o],l=r[s],u=u_(l);if(u>1){var c=l.shift();l.length===1&&(r[s]=l[0]),this._update&&this._update(c,o)}else u===1?(r[s]=null,this._update&&this._update(l,o)):this._remove&&this._remove(o)}this._performRestAdd(a,r)},e.prototype._executeMultiple=function(){var t=this._old,n=this._new,r={},i={},a=[],o=[];this._initIndexMap(t,r,a,"_oldKeyGetter"),this._initIndexMap(n,i,o,"_newKeyGetter");for(var s=0;s<a.length;s++){var l=a[s],u=r[l],c=i[l],h=u_(u),f=u_(c);if(h>1&&f===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(h===1&&f>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(h===1&&f===1)this._update&&this._update(c,u),i[l]=null;else if(h>1&&f>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(h>1)for(var d=0;d<h;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(o,i)},e.prototype._performRestAdd=function(t,n){for(var r=0;r<t.length;r++){var i=t[r],a=n[i],o=u_(a);if(o>1)for(var s=0;s<o;s++)this._add&&this._add(a[s]);else o===1&&this._add&&this._add(a);n[i]=null}},e.prototype._initIndexMap=function(t,n,r,i){for(var a=this._diffModeMultiple,o=0;o<t.length;o++){var s="_ec_"+this[i](t[o],o);if(a||(r[o]=s),!!n){var l=n[s],u=u_(l);u===0?(n[s]=o,a&&r.push(s)):u===1?n[s]=[l,o]:l.push(o)}}},e}(),Kyt=function(){function e(t,n){this._encode=t,this._schema=n}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Zyt(e,t){var n={},r=n.encode={},i=jt(),a=[],o=[],s={};R(e.dimensions,function(f){var d=e.getDimensionInfo(f),p=d.coordDim;if(p){var v=d.coordDimIndex;qD(r,p)[v]=f,d.isExtraCoord||(i.set(p,1),Jyt(d.type)&&(a[0]=f),qD(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&o.push(f)}wZ.each(function(g,m){var _=qD(r,m),y=d.otherDims[m];y!=null&&y!==!1&&(_[y]=d.name)})});var l=[],u={};i.each(function(f,d){var p=r[d];u[d]=p[0],l=l.concat(p)}),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=yt(l,function(f){return e.getDimensionInfo(f).storeDimIndex}),n.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(a=c.slice());var h=r.tooltip;return h&&h.length?o=h.slice():o.length||(o=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=o,n.userOutput=new Kyt(s,t),n}function qD(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function iA(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Jyt(e){return!(e==="ordinal"||e==="time")}var eM=function(){function e(t){this.otherDims={},t!=null&&ut(this,t)}return e}(),Qyt=vn(),t0t={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},OJ=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=kJ(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return xe(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var n=this.source.dimensionsDefine;if(n)return n[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,n=OZ(this.source),r=!FJ(t),i="",a=[],o=0,s=0;o<t;o++){var l=void 0,u=void 0,c=void 0,h=this.dimensions[s];if(h&&h.storeDimIndex===o)l=n?h.name:null,u=h.type,c=h.ordinalMeta,s++;else{var f=this.getSourceDimension(o);f&&(l=n?f.name:null,u=f.type)}a.push({property:l,type:u,ordinalMeta:c}),n&&l!=null&&(!h||!h.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=t0t[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:a,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],n=0,r=0;n<this._fullDimCount;n++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===n)a.isCalculationCoord||(i=a.name),r++;else{var o=this.getSourceDimension(n);o&&(i=o.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function NJ(e){return e instanceof OJ}function BJ(e){for(var t=jt(),n=0;n<(e||[]).length;n++){var r=e[n],i=se(r)?r.name:r;i!=null&&t.get(i)==null&&t.set(i,n)}return t}function kJ(e){var t=Qyt(e);return t.dimNameMap||(t.dimNameMap=BJ(e.dimensionsDefine))}function FJ(e){return e>30}var c_=se,Fh=yt,e0t=typeof Int32Array>"u"?Array:Int32Array,n0t="e\0\0",LG=-1,r0t=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],i0t=["_approximateExtent"],PG,YS,h_,f_,KD,qS,ZD,Ir=function(){function e(t,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var r,i=!1;NJ(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,r=t),r=r||["x","y"];for(var a={},o=[],s={},l=!1,u={},c=0;c<r.length;c++){var h=r[c],f=Ft(h)?new eM({name:h}):h instanceof eM?h:new eM(h),d=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=d,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};o.push(d),a[d]=f,u[d]!=null&&(l=!0),f.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(f.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=n,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();R(o,function(g){v.set(a[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var n=this._recognizeDimIndex(t);if(n==null)return t;if(n=t,!this._dimOmitted)return this.dimensions[n];var r=this._dimIdxToName.get(n);if(r!=null)return r;var i=this._schema.getSourceDimension(n);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var n=this._recognizeDimIndex(t);if(n!=null)return n;if(t==null)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(xn(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var n=this.getDimensionIndex(t);return n},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var n=this._dimInfos;this._getDimInfo=t?function(r){return n.hasOwnProperty(r)?n[r]:void 0}:function(r){return n[r]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,n){var r=this._dimSummary;if(n==null)return r.encodeFirstDimNotExtra[t];var i=r.encode[t];return i?i[n]:null},e.prototype.mapDimensionsAll=function(t){var n=this._dimSummary,r=n.encode[t];return(r||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,n,r){var i=this,a;if(t instanceof NO&&(a=t),!a){var o=this.dimensions,s=lk(t)||Aa(t)?new NZ(t,o.length):t;a=new NO;var l=Fh(o,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(s,l,r)}this._store=a,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=Zyt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var n=this._store.appendData(t);this._doInit(n[0],n[1])},e.prototype.appendValues=function(t,n){var r=this._store.appendValues(t,n.length),i=r.start,a=r.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var s=i;s<a;s++){var l=s-i;this._nameList[s]=n[l],o&&ZD(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,n=this.dimensions,r=0;r<n.length;r++){var i=this._dimInfos[n[r]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==If&&!t.fillStorage},e.prototype._doInit=function(t,n){if(!(t>=n)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,o=this._idList,s=i.getSource().sourceFormat,l=s===Ks;if(l&&!i.pure)for(var u=[],c=t;c<n;c++){var h=i.getItem(c,u);if(!this.hasItemOption&&$dt(h)&&(this.hasItemOption=!0),h){var f=h.name;a[c]==null&&f!=null&&(a[c]=pi(f,null));var d=h.id;o[c]==null&&d!=null&&(o[c]=pi(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<n;c++)ZD(this,c);PG(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,n){n=this.getDimension(n),this._approximateExtent[n]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,n){c_(t)?ut(this._calculationInfo,t):this._calculationInfo[t]=n},e.prototype.getName=function(t){var n=this.getRawIndex(t),r=this._nameList[n];return r==null&&this._nameDimIdx!=null&&(r=h_(this,this._nameDimIdx,n)),r==null&&(r=""),r},e.prototype._getCategory=function(t,n){var r=this._store.get(t,n),i=this._store.getOrdinalMeta(t);return i?i.categories[r]:r},e.prototype.getId=function(t){return YS(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,n){var r=this._store,i=this._dimInfos[t];if(i)return r.get(i.storeDimIndex,n)},e.prototype.getByRawIndex=function(t,n){var r=this._store,i=this._dimInfos[t];if(i)return r.getByRawIndex(i.storeDimIndex,n)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,n){var r=this,i=this._store;return ht(t)?i.getValues(Fh(t,function(a){return r._getStoreDimIndex(a)}),n):i.getValues(t)},e.prototype.hasValue=function(t){for(var n=this._dimSummary.dataDimIndicesOnCoord,r=0,i=n.length;r<i;r++)if(isNaN(this._store.get(n[r],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var n=0,r=this._store.count();n<r;n++)if(this.getName(n)===t)return n;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,n){var r=t&&this._invertedIndicesMap[t],i=r[n];return i==null||isNaN(i)?LG:i},e.prototype.indicesOfNearest=function(t,n,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),n,r)},e.prototype.each=function(t,n,r){ae(t)&&(r=n,n=t,t=[]);var i=r||this,a=Fh(f_(t),this._getStoreDimIndex,this);this._store.each(a,i?Vt(n,i):n)},e.prototype.filterSelf=function(t,n,r){ae(t)&&(r=n,n=t,t=[]);var i=r||this,a=Fh(f_(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Vt(n,i):n),this},e.prototype.selectRange=function(t){var n=this,r={},i=Je(t);return R(i,function(a){var o=n._getStoreDimIndex(a);r[o]=t[a]}),this._store=this._store.selectRange(r),this},e.prototype.mapArray=function(t,n,r){ae(t)&&(r=n,n=t,t=[]),r=r||this;var i=[];return this.each(t,function(){i.push(n&&n.apply(this,arguments))},r),i},e.prototype.map=function(t,n,r,i){var a=r||i||this,o=Fh(f_(t),this._getStoreDimIndex,this),s=qS(this);return s._store=this._store.map(o,a?Vt(n,a):n),s},e.prototype.modify=function(t,n,r,i){var a=r||i||this,o=Fh(f_(t),this._getStoreDimIndex,this);this._store.modify(o,a?Vt(n,a):n)},e.prototype.downSample=function(t,n,r,i){var a=qS(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),n,r,i),a},e.prototype.lttbDownSample=function(t,n){var r=qS(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),n),r},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var n=this.hostModel,r=this.getRawDataItem(t);return new pn(r,n,n&&n.ecModel)},e.prototype.diff=function(t){var n=this;return new Zc(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return YS(t,r)},function(r){return YS(n,r)})},e.prototype.getVisual=function(t){var n=this._visual;return n&&n[t]},e.prototype.setVisual=function(t,n){this._visual=this._visual||{},c_(t)?ut(this._visual,t):this._visual[t]=n},e.prototype.getItemVisual=function(t,n){var r=this._itemVisuals[t],i=r&&r[n];return i??this.getVisual(n)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,n){var r=this._itemVisuals,i=r[t];i||(i=r[t]={});var a=i[n];return a==null&&(a=this.getVisual(n),ht(a)?a=a.slice():c_(a)&&(a=ut({},a)),i[n]=a),a},e.prototype.setItemVisual=function(t,n,r){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,c_(n)?ut(i,n):i[n]=r},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,n){c_(t)?ut(this._layout,t):this._layout[t]=n},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,n,r){this._itemLayouts[t]=r?ut(this._itemLayouts[t]||{},n):n},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,n){var r=this.hostModel&&this.hostModel.seriesIndex;SO(r,this.dataType,t,n),this._graphicEls[t]=n},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,n){R(this._graphicEls,function(r,i){r&&t&&t.call(n,r,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Fh(this.dimensions,this._getDimInfo,this),this.hostModel)),KD(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,n){var r=this[t];ae(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=r.apply(this,arguments);return n.apply(this,[i].concat(CB(arguments)))})},e.internalField=function(){PG=function(t){var n=t._invertedIndicesMap;R(n,function(r,i){var a=t._dimInfos[i],o=a.ordinalMeta,s=t._store;if(o){r=n[i]=new e0t(o.categories.length);for(var l=0;l<r.length;l++)r[l]=LG;for(var l=0;l<s.count();l++)r[s.get(a.storeDimIndex,l)]=l}})},h_=function(t,n,r){return pi(t._getCategory(n,r),null)},YS=function(t,n){var r=t._idList[n];return r==null&&t._idDimIdx!=null&&(r=h_(t,t._idDimIdx,n)),r==null&&(r=n0t+n),r},f_=function(t){return ht(t)||(t=t!=null?[t]:[]),t},qS=function(t){var n=new e(t._schema?t._schema:Fh(t.dimensions,t._getDimInfo,t),t.hostModel);return KD(n,t),n},KD=function(t,n){R(r0t.concat(n.__wrappedMethods||[]),function(r){n.hasOwnProperty(r)&&(t[r]=n[r])}),t.__wrappedMethods=n.__wrappedMethods,R(i0t,function(r){t[r]=ce(n[r])}),t._calculationInfo=ut({},n._calculationInfo)},ZD=function(t,n){var r=t._nameList,i=t._idList,a=t._nameDimIdx,o=t._idDimIdx,s=r[n],l=i[n];if(s==null&&a!=null&&(r[n]=s=h_(t,a,n)),l==null&&o!=null&&(i[n]=l=h_(t,o,n)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[n]=l}}}(),e}();function T1(e,t){return p0(e,t).dimensions}function p0(e,t){lk(e)||(e=uk(e)),t=t||{};var n=t.coordDimensions||[],r=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),a=[],o=o0t(e,n,r,t.dimensionsCount),s=t.canOmitUnusedDimensions&&FJ(o),l=r===e.dimensionsDefine,u=l?kJ(e):BJ(r),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,o));for(var h=jt(c),f=new HZ(o),d=0;d<f.length;d++)f[d]=-1;function p(T){var M=f[T];if(M<0){var C=r[T],E=se(C)?C:{name:C},D=new eM,I=E.name;I!=null&&u.get(I)!=null&&(D.name=D.displayName=I),E.type!=null&&(D.type=E.type),E.displayName!=null&&(D.displayName=E.displayName);var L=a.length;return f[T]=L,D.storeDimIndex=T,a.push(D),D}return a[M]}if(!s)for(var d=0;d<o;d++)p(d);h.each(function(T,M){var C=jn(T).slice();if(C.length===1&&!Ft(C[0])&&C[0]<0){h.set(M,!1);return}var E=h.set(M,[]);R(C,function(D,I){var L=Ft(D)?u.get(D):D;L!=null&&L<o&&(E[I]=L,g(p(L),M,I))})});var v=0;R(n,function(T){var M,C,E,D;if(Ft(T))M=T,D={};else{D=T,M=D.name;var I=D.ordinalMeta;D.ordinalMeta=null,D=ut({},D),D.ordinalMeta=I,C=D.dimsDef,E=D.otherDims,D.name=D.coordDim=D.coordDimIndex=D.dimsDef=D.otherDims=null}var L=h.get(M);if(L!==!1){if(L=jn(L),!L.length)for(var P=0;P<(C&&C.length||1);P++){for(;v<o&&p(v).coordDim!=null;)v++;v<o&&L.push(v++)}R(L,function(B,N){var k=p(B);if(l&&D.type!=null&&(k.type=D.type),g(te(k,D),M,N),k.name==null&&C){var U=C[N];!se(U)&&(U={name:U}),k.name=k.displayName=U.name,k.defaultTooltip=U.defaultTooltip}E&&te(k.otherDims,E)})}});function g(T,M,C){wZ.get(M)!=null?T.otherDims[M]=C:(T.coordDim=M,T.coordDimIndex=C,i.set(M,!0))}var m=t.generateCoord,_=t.generateCoordCount,y=_!=null;_=m?_||1:0;var x=m||"value";function S(T){T.name==null&&(T.name=T.coordDim)}if(s)R(a,function(T){S(T)}),a.sort(function(T,M){return T.storeDimIndex-M.storeDimIndex});else for(var b=0;b<o;b++){var w=p(b),A=w.coordDim;A==null&&(w.coordDim=s0t(x,i,y),w.coordDimIndex=0,(!m||_<=0)&&(w.isExtraCoord=!0),_--),S(w),w.type==null&&(CZ(e,b)===oa.Must||w.isExtraCoord&&(w.otherDims.itemName!=null||w.otherDims.seriesName!=null))&&(w.type="ordinal")}return a0t(a),new OJ({source:e,dimensions:a,fullDimensionCount:o,dimensionOmitted:s})}function a0t(e){for(var t=jt(),n=0;n<e.length;n++){var r=e[n],i=r.name,a=t.get(i)||0;a>0&&(r.name=i+(a-1)),a++,t.set(i,a)}}function o0t(e,t,n,r){var i=Math.max(e.dimensionsDetectedCount||1,t.length,n.length,r||0);return R(t,function(a){var o;se(a)&&(o=a.dimsDef)&&(i=Math.max(i,o.length))}),i}function s0t(e,t,n){if(n||t.hasKey(e)){for(var r=0;t.hasKey(e+r);)r++;e+=r}return t.set(e,!0),e}var l0t=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function u0t(e){var t=e.get("coordinateSystem"),n=new l0t(t),r=c0t[t];if(r)return r(e,n,n.axisMap,n.categoryAxisMap),n}var c0t={cartesian2d:function(e,t,n,r){var i=e.getReferringComponents("xAxis",ai).models[0],a=e.getReferringComponents("yAxis",ai).models[0];t.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),lg(i)&&(r.set("x",i),t.firstCategoryDimIndex=0),lg(a)&&(r.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,n,r){var i=e.getReferringComponents("singleAxis",ai).models[0];t.coordSysDims=["single"],n.set("single",i),lg(i)&&(r.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,n,r){var i=e.getReferringComponents("polar",ai).models[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),lg(a)&&(r.set("radius",a),t.firstCategoryDimIndex=0),lg(o)&&(r.set("angle",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,r){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,r){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),o=t.coordSysDims=a.dimensions.slice();R(a.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=o[l];n.set(c,u),lg(u)&&(r.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function lg(e){return e.get("type")==="category"}function zJ(e,t,n){n=n||{};var r=n.byIndex,i=n.stackedCoordDimension,a,o,s;h0t(t)?a=t:(o=t.schema,a=o.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,h,f;if(R(a,function(_,y){Ft(_)&&(a[y]=_={name:_}),l&&!_.isExtraCoord&&(!r&&!u&&_.ordinalMeta&&(u=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(c=_))}),c&&!r&&!u&&(r=!0),c){h="__\0ecstackresult_"+e.id,f="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;R(a,function(_){_.coordDim===d&&v++});var g={name:h,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},m={name:f,coordDim:f,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};o?(s&&(g.storeDimIndex=s.ensureCalculationDimension(f,p),m.storeDimIndex=s.ensureCalculationDimension(h,p)),o.appendCalculationDimension(g),o.appendCalculationDimension(m)):(a.push(g),a.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:f,stackResultDimension:h}}function h0t(e){return!NJ(e.schema)}function Jc(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function wk(e,t){return Jc(e,t)?e.getCalculationInfo("stackResultDimension"):t}function f0t(e,t){var n=e.get("coordinateSystem"),r=c0.get(n),i;return t&&t.coordSysDims&&(i=yt(t.coordSysDims,function(a){var o={name:a},s=t.axisMap.get(a);if(s){var l=s.get("type");o.type=iA(l)}return o})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function d0t(e,t,n){var r,i;return n&&R(e,function(a,o){var s=a.coordDim,l=n.categoryAxisMap.get(s);l&&(r==null&&(r=o),a.ordinalMeta=l.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(e[r].otherDims.itemName=0),r}function Qu(e,t,n){n=n||{};var r=t.getSourceManager(),i,a=!1;e?(a=!0,i=uk(e)):(i=r.getSource(),a=i.sourceFormat===Ks);var o=u0t(t),s=f0t(t,o),l=n.useEncodeDefaulter,u=ae(l)?l:l?_e(AZ,s,t):null,c={coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},h=p0(i,c),f=d0t(h.dimensions,n.createInvertedIndices,o),d=a?null:r.getSharedDataStore(h),p=zJ(t,{schema:h,store:d}),v=new Ir(h,t);v.setCalculationInfo(p);var g=f!=null&&p0t(i)?function(m,_,y,x){return x===f?y:this.defaultDimValueGetter(m,_,y,x)}:null;return v.hasItemOption=!1,v.initData(a?i:d,null,g),v}function p0t(e){if(e.sourceFormat===Ks){var t=v0t(e.data||[]);return!ht(e0(t))}}function v0t(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var tc=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var n=this._extent;t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])},e.prototype.unionExtentFromData=function(t,n){this.unionExtent(t.getApproximateExtent(n))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,n){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(n)||(r[1]=n)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();rE(tc);var g0t=0,aA=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++g0t}return e.createByAxisModel=function(t){var n=t.option,r=n.data,i=r&&yt(r,m0t);return new e({categories:i,needCollect:!i,deduplication:n.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var n,r=this._needCollect;if(!Ft(t)&&!r)return t;if(r&&!this._deduplication)return n=this.categories.length,this.categories[n]=t,n;var i=this._getOrCreateMap();return n=i.get(t),n==null&&(r?(n=this.categories.length,this.categories[n]=t,i.set(t,n)):n=NaN),n},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function m0t(e){return se(e)&&e.value!=null?e.value:e+""}function XO(e){return e.type==="interval"||e.type==="log"}function y0t(e,t,n,r){var i={},a=e[1]-e[0],o=i.interval=fK(a/t);n!=null&&o<n&&(o=i.interval=n),r!=null&&o>r&&(o=i.interval=r);var s=i.intervalPrecision=UJ(o),l=i.niceTickExtent=[_r(Math.ceil(e[0]/o)*o,s),_r(Math.floor(e[1]/o)*o,s)];return _0t(l,e),i}function JD(e){var t=Math.pow(10,NB(e)),n=e/t;return n?n===2?n=3:n===3?n=5:n*=2:n=1,_r(n*t)}function UJ(e){return Su(e)+2}function RG(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function _0t(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),RG(e,0,t),RG(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function TE(e,t){return e>=t[0]&&e<=t[1]}function ME(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function AE(e,t){return e*(t[1]-t[0])+t[0]}var CE=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new aA({})),ht(i)&&(i=new aA({categories:yt(i,function(a){return se(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return t.prototype.parse=function(n){return n==null?NaN:Ft(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},t.prototype.contain=function(n){return n=this.parse(n),TE(n,this._extent)&&this._ordinalMeta.categories[n]!=null},t.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),ME(n,this._extent)},t.prototype.scale=function(n){return n=Math.round(AE(n,this._extent)),this.getRawOrdinalNumber(n)},t.prototype.getTicks=function(){for(var n=[],r=this._extent,i=r[0];i<=r[1];)n.push({value:i}),i++;return n},t.prototype.getMinorTicks=function(n){},t.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=n.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,l=Math.min(s,r.length);o<l;++o){var u=r[o];i[o]=u,a[u]=o}for(var c=0;o<s;++o){for(;a[c]!=null;)c++;i.push(c),a[c]=o}},t.prototype._getTickNumber=function(n){var r=this._ticksByOrdinalNumber;return r&&n>=0&&n<r.length?r[n]:n},t.prototype.getRawOrdinalNumber=function(n){var r=this._ordinalNumbersByTick;return r&&n>=0&&n<r.length?r[n]:n},t.prototype.getLabel=function(n){if(!this.isBlank()){var r=this.getRawOrdinalNumber(n.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},t.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(tc);tc.registerClass(CE);var $d=_r,Qc=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return TE(n,this._extent)},t.prototype.normalize=function(n){return ME(n,this._extent)},t.prototype.scale=function(n){return AE(n,this._extent)},t.prototype.setExtent=function(n,r){var i=this._extent;isNaN(n)||(i[0]=parseFloat(n)),isNaN(r)||(i[1]=parseFloat(r))},t.prototype.unionExtent=function(n){var r=this._extent;n[0]<r[0]&&(r[0]=n[0]),n[1]>r[1]&&(r[1]=n[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=UJ(n)},t.prototype.getTicks=function(n){var r=this._interval,i=this._extent,a=this._niceExtent,o=this._intervalPrecision,s=[];if(!r)return s;var l=1e4;i[0]<a[0]&&(n?s.push({value:$d(a[0]-r,o)}):s.push({value:i[0]}));for(var u=a[0];u<=a[1]&&(s.push({value:u}),u=$d(u+r,o),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:a[1];return i[1]>c&&(n?s.push({value:$d(c+r,o)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(n){for(var r=this.getTicks(!0),i=[],a=this.getExtent(),o=1;o<r.length;o++){for(var s=r[o],l=r[o-1],u=0,c=[],h=s.value-l.value,f=h/n;u<n-1;){var d=$d(l.value+(u+1)*f);d>a[0]&&d<a[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(n,r){if(n==null)return"";var i=r&&r.precision;i==null?i=Su(n.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=$d(n.value,i,!0);return qM(a)},t.prototype.calcNiceTicks=function(n,r,i){n=n||5;var a=this._extent,o=a[1]-a[0];if(isFinite(o)){o<0&&(o=-o,a.reverse());var s=y0t(a,n,r,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);n.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var o=this._interval;n.fixMin||(r[0]=$d(Math.floor(r[0]/o)*o)),n.fixMax||(r[1]=$d(Math.ceil(r[1]/o)*o))},t.prototype.setNiceExtent=function(n,r){this._niceExtent=[n,r]},t.type="interval",t}(tc);tc.registerClass(Qc);var VJ=typeof Float32Array<"u",x0t=VJ?Float32Array:Array;function Tu(e){return ht(e)?VJ?new Float32Array(e):e:new x0t(e)}var jO="__ec_stack_";function Tk(e){return e.get("stack")||jO+e.seriesIndex}function Mk(e){return e.dim+e.index}function b0t(e){var t=[],n=e.axis,r="axis0";if(n.type==="category"){for(var i=n.getBandWidth(),a=0;a<e.count;a++)t.push(te({bandWidth:i,axisKey:r,stackId:jO+a},e));for(var o=WJ(t),s=[],a=0;a<e.count;a++){var l=o[r][jO+a];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function GJ(e,t){var n=[];return t.eachSeriesByType(e,function(r){jJ(r)&&n.push(r)}),n}function S0t(e){var t={};R(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=l.getData(),f=c.dim+"_"+c.index,d=h.getDimensionIndex(h.mapDimension(c.dim)),p=h.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[f]?t[f].push(m):t[f]=[m]}});var n={};for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(i){i.sort(function(l,u){return l-u});for(var a=null,o=1;o<i.length;++o){var s=i[o]-i[o-1];s>0&&(a=a===null?s:Math.min(a,s))}n[r]=a}}return n}function HJ(e){var t=S0t(e),n=[];return R(e,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),o=a.getExtent(),s;if(a.type==="category")s=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=t[l],c=Math.abs(o[1]-o[0]),h=a.scale.getExtent(),f=Math.abs(h[1]-h[0]);s=u?c/f*u:c}else{var d=r.getData();s=Math.abs(o[1]-o[0])/d.count()}var p=Dt(r.get("barWidth"),s),v=Dt(r.get("barMaxWidth"),s),g=Dt(r.get("barMinWidth")||(YJ(r)?.5:1),s),m=r.get("barGap"),_=r.get("barCategoryGap");n.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:_,axisKey:Mk(a),stackId:Tk(r)})}),WJ(n)}function WJ(e){var t={};R(e,function(r,i){var a=r.axisKey,o=r.bandWidth,s=t[a]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[a]=s;var u=r.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var h=r.barMaxWidth;h&&(l[u].maxWidth=h);var f=r.barMinWidth;f&&(l[u].minWidth=f);var d=r.barGap;d!=null&&(s.gap=d);var p=r.barCategoryGap;p!=null&&(s.categoryGap=p)});var n={};return R(t,function(r,i){n[i]={};var a=r.stacks,o=r.bandWidth,s=r.categoryGap;if(s==null){var l=Je(a).length;s=Math.max(35-l*4,15)+"%"}var u=Dt(s,o),c=Dt(r.gap,1),h=r.remainedWidth,f=r.autoWidthCount,d=(h-u)/(f+(f-1)*c);d=Math.max(d,0),R(a,function(m){var _=m.maxWidth,y=m.minWidth;if(m.width){var x=m.width;_&&(x=Math.min(x,_)),y&&(x=Math.max(x,y)),m.width=x,h-=x+c*x,f--}else{var x=d;_&&_<x&&(x=Math.min(_,h)),y&&y>x&&(x=y),x!==d&&(m.width=x,h-=x+c*x,f--)}}),d=(h-u)/(f+(f-1)*c),d=Math.max(d,0);var p=0,v;R(a,function(m,_){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;R(a,function(m,_){n[i][_]=n[i][_]||{bandWidth:o,offset:g,width:m.width},g+=m.width*(1+c)})}),n}function w0t(e,t,n){if(e&&t){var r=e[Mk(t)];return r!=null&&n!=null?r[Tk(n)]:r}}function $J(e,t){var n=GJ(e,t),r=HJ(n);R(n,function(i){var a=i.getData(),o=i.coordinateSystem,s=o.getBaseAxis(),l=Tk(i),u=r[Mk(s)][l],c=u.offset,h=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:h})})}function XJ(e){return{seriesType:e,plan:h0(),reset:function(t){if(jJ(t)){var n=t.getData(),r=t.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),o=n.getDimensionIndex(n.mapDimension(a.dim)),s=n.getDimensionIndex(n.mapDimension(i.dim)),l=t.get("showBackground",!0),u=n.mapDimension(a.dim),c=n.getCalculationInfo("stackResultDimension"),h=Jc(n,u)&&!!n.getCalculationInfo("stackedOnSeries"),f=a.isHorizontal(),d=T0t(i,a),p=YJ(t),v=t.get("barMinHeight")||0,g=c&&n.getDimensionIndex(c),m=n.getLayout("size"),_=n.getLayout("offset");return{progress:function(y,x){for(var S=y.count,b=p&&Tu(S*3),w=p&&l&&Tu(S*3),A=p&&Tu(S),T=r.master.getRect(),M=f?T.width:T.height,C,E=x.getStore(),D=0;(C=y.next())!=null;){var I=E.get(h?g:o,C),L=E.get(s,C),P=d,B=void 0;h&&(B=+I-E.get(o,C));var N=void 0,k=void 0,U=void 0,Z=void 0;if(f){var nt=r.dataToPoint([I,L]);if(h){var ct=r.dataToPoint([B,L]);P=ct[0]}N=P,k=nt[1]+_,U=nt[0]-P,Z=m,Math.abs(U)<v&&(U=(U<0?-1:1)*v)}else{var nt=r.dataToPoint([L,I]);if(h){var ct=r.dataToPoint([L,B]);P=ct[1]}N=nt[0]+_,k=P,U=m,Z=nt[1]-P,Math.abs(Z)<v&&(Z=(Z<=0?-1:1)*v)}p?(b[D]=N,b[D+1]=k,b[D+2]=f?U:Z,w&&(w[D]=f?T.x:N,w[D+1]=f?k:T.y,w[D+2]=M),A[C]=C):x.setItemLayout(C,{x:N,y:k,width:U,height:Z}),D+=3}p&&x.setLayout({largePoints:b,largeDataIndices:A,largeBackgroundPoints:w,valueAxisHorizontal:f})}}}}}}function jJ(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function YJ(e){return e.pipelineContext&&e.pipelineContext.large}function T0t(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var M0t=function(e,t,n,r){for(;n<r;){var i=n+r>>>1;e[i][1]<t?n=i+1:r=i}return n},Ak=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="time",r}return t.prototype.getLabel=function(n){var r=this.getSetting("useUTC");return pE(n.value,w5[hgt(Om(this._minLevelUnit))]||w5.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(n,r,i){var a=this.getSetting("useUTC"),o=this.getSetting("locale");return fgt(n,r,i,o,a)},t.prototype.getTicks=function(){var n=this._interval,r=this._extent,i=[];if(!n)return i;i.push({value:r[0],level:0});var a=this.getSetting("useUTC"),o=P0t(this._minLevelUnit,this._approxInterval,a,r);return i=i.concat(o),i.push({value:r[1],level:0}),i},t.prototype.calcNiceExtent=function(n){var r=this._extent;if(r[0]===r[1]&&(r[0]-=Rs,r[1]+=Rs),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Rs}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},t.prototype.calcNiceTicks=function(n,r,i){n=n||10;var a=this._extent,o=a[1]-a[0];this._approxInterval=o/n,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=KS.length,l=Math.min(M0t(KS,this._approxInterval,0,s),s-1);this._interval=KS[l][1],this._minLevelUnit=KS[Math.max(l-1,0)][0]},t.prototype.parse=function(n){return xn(n)?n:+Vs(n)},t.prototype.contain=function(n){return TE(this.parse(n),this._extent)},t.prototype.normalize=function(n){return ME(this.parse(n),this._extent)},t.prototype.scale=function(n){return AE(n,this._extent)},t.type="time",t}(Qc),KS=[["second",QB],["minute",tk],["hour",Nx],["quarter-day",Nx*6],["half-day",Nx*12],["day",Rs*1.2],["half-week",Rs*3.5],["week",Rs*7],["month",Rs*31],["quarter",Rs*95],["half-year",S5/2],["year",S5]];function A0t(e,t,n,r){var i=Vs(t),a=Vs(n),o=function(p){return T5(i,p,r)===T5(a,p,r)},s=function(){return o("year")},l=function(){return s()&&o("month")},u=function(){return l()&&o("day")},c=function(){return u()&&o("hour")},h=function(){return c()&&o("minute")},f=function(){return h()&&o("second")},d=function(){return f()&&o("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return h();case"second":return f();case"millisecond":return d()}}function C0t(e,t){return e/=Rs,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function E0t(e){var t=30*Rs;return e/=t,e>6?6:e>3?3:e>2?2:1}function D0t(e){return e/=Nx,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function OG(e,t){return e/=t?tk:QB,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function I0t(e){return fK(e)}function L0t(e,t,n){var r=new Date(e);switch(Om(t)){case"year":case"month":r[fZ(n)](0);case"day":r[dZ(n)](1);case"hour":r[pZ(n)](0);case"minute":r[vZ(n)](0);case"second":r[gZ(n)](0),r[mZ(n)](0)}return r.getTime()}function P0t(e,t,n,r){var i=1e4,a=cZ,o=0;function s(M,C,E,D,I,L,P){for(var B=new Date(C),N=C,k=B[D]();N<E&&N<=r[1];)P.push({value:N}),k+=M,B[I](k),N=B.getTime();P.push({value:N,notAdd:!0})}function l(M,C,E){var D=[],I=!C.length;if(!A0t(Om(M),r[0],r[1],n)){I&&(C=[{value:L0t(new Date(r[0]),M,n)},{value:r[1]}]);for(var L=0;L<C.length-1;L++){var P=C[L].value,B=C[L+1].value;if(P!==B){var N=void 0,k=void 0,U=void 0,Z=!1;switch(M){case"year":N=Math.max(1,Math.round(t/Rs/365)),k=ek(n),U=dgt(n);break;case"half-year":case"quarter":case"month":N=E0t(t),k=Nm(n),U=fZ(n);break;case"week":case"half-week":case"day":N=C0t(t),k=vE(n),U=dZ(n),Z=!0;break;case"half-day":case"quarter-day":case"hour":N=D0t(t),k=fb(n),U=pZ(n);break;case"minute":N=OG(t,!0),k=gE(n),U=vZ(n);break;case"second":N=OG(t,!1),k=mE(n),U=gZ(n);break;case"millisecond":N=I0t(t),k=yE(n),U=mZ(n);break}s(N,P,B,k,U,Z,D),M==="year"&&E.length>1&&L===0&&E.unshift({value:E[0].value-N})}}for(var L=0;L<D.length;L++)E.push(D[L]);return D}}for(var u=[],c=[],h=0,f=0,d=0;d<a.length&&o++<i;++d){var p=Om(a[d]);if(cgt(a[d])){l(a[d],u[u.length-1]||[],c);var v=a[d+1]?Om(a[d+1]):null;if(p!==v){if(c.length){f=h,c.sort(function(M,C){return M.value-C.value});for(var g=[],m=0;m<c.length;++m){var _=c[m].value;(m===0||c[m-1].value!==_)&&(g.push(c[m]),_>=r[0]&&_<=r[1]&&h++)}var y=(r[1]-r[0])/t;if(h>y*1.5&&f>y/1.5||(u.push(g),h>y||e===a[d]))break}c=[]}}}for(var x=Gn(yt(u,function(M){return Gn(M,function(C){return C.value>=r[0]&&C.value<=r[1]&&!C.notAdd})}),function(M){return M.length>0}),S=[],b=x.length-1,d=0;d<x.length;++d)for(var w=x[d],A=0;A<w.length;++A)S.push({value:w[A].value,level:b-d});S.sort(function(M,C){return M.value-C.value});for(var T=[],d=0;d<S.length;++d)(d===0||S[d].value!==S[d-1].value)&&T.push(S[d]);return T}tc.registerClass(Ak);var NG=tc.prototype,zx=Qc.prototype,R0t=_r,O0t=Math.floor,N0t=Math.ceil,ZS=Math.pow,el=Math.log,Ck=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new Qc,n._interval=0,n}return t.prototype.getTicks=function(n){var r=this._originalScale,i=this._extent,a=r.getExtent(),o=zx.getTicks.call(this,n);return yt(o,function(s){var l=s.value,u=_r(ZS(this.base,l));return u=l===i[0]&&this._fixMin?JS(u,a[0]):u,u=l===i[1]&&this._fixMax?JS(u,a[1]):u,{value:u}},this)},t.prototype.setExtent=function(n,r){var i=el(this.base);n=el(Math.max(0,n))/i,r=el(Math.max(0,r))/i,zx.setExtent.call(this,n,r)},t.prototype.getExtent=function(){var n=this.base,r=NG.getExtent.call(this);r[0]=ZS(n,r[0]),r[1]=ZS(n,r[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(r[0]=JS(r[0],a[0])),this._fixMax&&(r[1]=JS(r[1],a[1])),r},t.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var r=this.base;n[0]=el(n[0])/el(r),n[1]=el(n[1])/el(r),NG.unionExtent.call(this,n)},t.prototype.unionExtentFromData=function(n,r){this.unionExtent(n.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(n){n=n||10;var r=this._extent,i=r[1]-r[0];if(!(i===1/0||i<=0)){var a=Wdt(i),o=n/i*a;for(o<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var s=[_r(N0t(r[0]/a)*a),_r(O0t(r[1]/a)*a)];this._interval=a,this._niceExtent=s}},t.prototype.calcNiceExtent=function(n){zx.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},t.prototype.parse=function(n){return n},t.prototype.contain=function(n){return n=el(n)/el(this.base),TE(n,this._extent)},t.prototype.normalize=function(n){return n=el(n)/el(this.base),ME(n,this._extent)},t.prototype.scale=function(n){return n=AE(n,this._extent),ZS(this.base,n)},t.type="log",t}(tc),qJ=Ck.prototype;qJ.getMinorTicks=zx.getMinorTicks;qJ.getLabel=zx.getLabel;function JS(e,t){return R0t(e,Su(t))}tc.registerClass(Ck);var B0t=function(){function e(t,n,r){this._prepareParams(t,n,r)}return e.prototype._prepareParams=function(t,n,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var a=this._modelMinRaw=n.get("min",!0);ae(a)?this._modelMinNum=QS(t,a({min:r[0],max:r[1]})):a!=="dataMin"&&(this._modelMinNum=QS(t,a));var o=this._modelMaxRaw=n.get("max",!0);if(ae(o)?this._modelMaxNum=QS(t,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=QS(t,o)),i)this._axisDataLen=n.getCategories().length;else{var s=n.get("boundaryGap"),l=ht(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Rl(l[0],1),Rl(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,n=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,o=t?null:r-n||Math.abs(n),s=this._modelMinRaw==="dataMin"?n:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:n-a[0]*o),l==null&&(l=t?i?i-1:NaN:r+a[1]*o),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=rb(s)||rb(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var f=this._determinedMin,d=this._determinedMax;return f!=null&&(s=f,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:h}},e.prototype.modifyDataMinMax=function(t,n){this[F0t[t]]=n},e.prototype.setDeterminedMinMax=function(t,n){var r=k0t[t];this[r]=n},e.prototype.freeze=function(){this.frozen=!0},e}(),k0t={min:"_determinedMin",max:"_determinedMax"},F0t={min:"_dataMin",max:"_dataMax"};function KJ(e,t,n){var r=e.rawExtentInfo;return r||(r=new B0t(e,t,n),e.rawExtentInfo=r,r)}function QS(e,t){return t==null?null:rb(t)?NaN:e.parse(t)}function ZJ(e,t){var n=e.type,r=KJ(e,t,e.getExtent()).calculate();e.setBlank(r.isBlank);var i=r.min,a=r.max,o=t.ecModel;if(o&&n==="time"){var s=GJ("bar",o),l=!1;if(R(s,function(h){l=l||h.getBaseAxis()===t.axis}),l){var u=HJ(s),c=z0t(i,a,t,u);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function z0t(e,t,n,r){var i=n.axis.getExtent(),a=i[1]-i[0],o=w0t(r,n.axis);if(o===void 0)return{min:e,max:t};var s=1/0;R(o,function(d){s=Math.min(d.offset,s)});var l=-1/0;R(o,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,h=1-(s+l)/a,f=c/h-c;return t+=f*(l/u),e-=f*(s/u),{min:e,max:t}}function gv(e,t){var n=t,r=ZJ(e,n),i=r.extent,a=n.get("splitNumber");e instanceof Ck&&(e.base=n.get("logBase"));var o=e.type,s=n.get("interval"),l=o==="interval"||o==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function M1(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new CE({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new Ak({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(tc.getClass(t)||Qc)}}function U0t(e){var t=e.scale.getExtent(),n=t[0],r=t[1];return!(n>0&&r>0||n<0&&r<0)}function A1(e){var t=e.getLabelModel().get("formatter"),n=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(r){return function(i,a){return e.scale.getFormattedLabel(i,a,r)}}(t):Ft(t)?function(r){return function(i){var a=e.scale.getLabel(i),o=r.replace("{value}",a??"");return o}}(t):ae(t)?function(r){return function(i,a){return n!=null&&(a=i.value-n),r(Ek(e,i),a,i.level!=null?{level:i.level}:null)}}(t):function(r){return e.scale.getLabel(r)}}function Ek(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function V0t(e){var t=e.model,n=e.scale;if(!(!t.get(["axisLabel","show"])||n.isBlank())){var r,i,a=n.getExtent();n instanceof CE?i=n.count():(r=n.getTicks(),i=r.length);var o=e.getLabelModel(),s=A1(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var h=r?r[c]:{value:a[0]+c},f=s(h,c),d=o.getTextRect(f),p=G0t(d,o.get("rotate")||0);l?l.union(p):l=p}return l}}function G0t(e,t){var n=t*Math.PI/180,r=e.width,i=e.height,a=r*Math.abs(Math.cos(n))+Math.abs(i*Math.sin(n)),o=r*Math.abs(Math.sin(n))+Math.abs(i*Math.cos(n)),s=new Ae(e.x,e.y,a,o);return s}function Dk(e){var t=e.get("interval");return t??"auto"}function JJ(e){return e.type==="category"&&Dk(e.getLabelModel())===0}function oA(e,t){var n={};return R(e.mapDimensionsAll(t),function(r){n[wk(e,r)]=!0}),Je(n)}function H0t(e,t,n){t&&R(oA(t,n),function(r){var i=t.getApproximateExtent(r);i[0]<e[0]&&(e[0]=i[0]),i[1]>e[1]&&(e[1]=i[1])})}var v0=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}();function W0t(e){return Qu(null,e)}var Ik={isDimensionStacked:Jc,enableDataStack:zJ,getStackedDimension:wk};function Lk(e,t){var n=t;t instanceof pn||(n=new pn(t));var r=M1(n);return r.setExtent(e[0],e[1]),gv(r,n),r}function $0t(e){ti(e,v0)}var X0t=1e-8;function BG(e,t){return Math.abs(e-t)<X0t}function xp(e,t,n){var r=0,i=e[0];if(!i)return!1;for(var a=1;a<e.length;a++){var o=e[a];r+=Sc(i[0],i[1],o[0],o[1],t,n),i=o}var s=e[0];return(!BG(i[0],s[0])||!BG(i[1],s[1]))&&(r+=Sc(i[0],i[1],s[0],s[1],t,n)),r!==0}var j0t=[];function QD(e,t){for(var n=0;n<e.length;n++)Oi(e[n],e[n],t)}function kG(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(mf(t,t,a),yf(n,n,a))}}function Y0t(e){for(var t=0,n=0,r=0,i=e.length,a=e[i-1][0],o=e[i-1][1],s=0;s<i;s++){var l=e[s][0],u=e[s][1],c=a*u-l*o;t+=c,n+=(a+l)*c,r+=(o+u)*c,a=l,o=u}return t?[n/t/3,r/t/3,t]:[e[0][0]||0,e[0][1]||0]}var QJ=function(){function e(t){this.name=t}return e.prototype.setCenter=function(t){this._center=t},e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},e}(),FG=function(){function e(t,n){this.type="polygon",this.exterior=t,this.interiors=n}return e}(),zG=function(){function e(t){this.type="linestring",this.points=t}return e}(),tQ=function(e){it(t,e);function t(n,r,i){var a=e.call(this,n)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return t.prototype.calcCenter=function(){for(var n=this.geometries,r,i=0,a=0;a<n.length;a++){var o=n[a],s=o.exterior,l=s&&s.length;l>i&&(r=o,i=l)}if(r)return Y0t(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},t.prototype.getBoundingRect=function(n){var r=this._rect;if(r&&!n)return r;var i=[1/0,1/0],a=[-1/0,-1/0],o=this.geometries;return R(o,function(s){s.type==="polygon"?kG(s.exterior,i,a,n):R(s.points,function(l){kG(l,i,a,n)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new Ae(i[0],i[1],a[0]-i[0],a[1]-i[1]),n||(this._rect=r),r},t.prototype.contain=function(n){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(n[0],n[1]))return!1;t:for(var a=0,o=i.length;a<o;a++){var s=i[a];if(s.type==="polygon"){var l=s.exterior,u=s.interiors;if(xp(l,n[0],n[1])){for(var c=0;c<(u?u.length:0);c++)if(xp(u[c],n[0],n[1]))continue t;return!0}}}return!1},t.prototype.transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=o.width/o.height;i?a||(a=i/s):i=s*a;for(var l=new Ae(n,r,i,a),u=o.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var f=c[h];f.type==="polygon"?(QD(f.exterior,u),R(f.interiors,function(d){QD(d,u)})):R(f.points,function(d){QD(d,u)})}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},t.prototype.cloneShallow=function(n){n==null&&(n=this.name);var r=new t(n,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(QJ),q0t=function(e){it(t,e);function t(n,r){var i=e.call(this,n)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return t.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,r=n.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=JC(j0t),o=n;o&&!o.isGeoSVGGraphicRoot;)Uc(a,o.getLocalTransform(),a),o=o.parent;return zv(a,a),Oi(i,i,a),i},t}(QJ);function K0t(e){if(!e.UTF8Encoding)return e;var t=e,n=t.UTF8Scale;n==null&&(n=1024);var r=t.features;return R(r,function(i){var a=i.geometry,o=a.encodeOffsets,s=a.coordinates;if(o)switch(a.type){case"LineString":a.coordinates=eQ(s,o,n);break;case"Polygon":tI(s,o,n);break;case"MultiLineString":tI(s,o,n);break;case"MultiPolygon":R(s,function(l,u){return tI(l,o[u],n)})}}),t.UTF8Encoding=!1,t}function tI(e,t,n){for(var r=0;r<e.length;r++)e[r]=eQ(e[r],t[r],n)}function eQ(e,t,n){for(var r=[],i=t[0],a=t[1],o=0;o<e.length;o+=2){var s=e.charCodeAt(o)-64,l=e.charCodeAt(o+1)-64;s=s>>1^-(s&1),l=l>>1^-(l&1),s+=i,l+=a,i=s,a=l,r.push([s/n,l/n])}return r}function YO(e,t){return e=K0t(e),yt(Gn(e.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var r=n.properties,i=n.geometry,a=[];switch(i.type){case"Polygon":var o=i.coordinates;a.push(new FG(o[0],o.slice(1)));break;case"MultiPolygon":R(i.coordinates,function(l){l[0]&&a.push(new FG(l[0],l.slice(1)))});break;case"LineString":a.push(new zG([i.coordinates]));break;case"MultiLineString":a.push(new zG(i.coordinates))}var s=new tQ(r[t||"name"],a,r.cp);return s.properties=r,s})}var yb=vn();function Z0t(e){return e.type==="category"?Q0t(e):e_t(e)}function J0t(e,t){return e.type==="category"?t_t(e,t):{ticks:yt(e.scale.getTicks(),function(n){return n.value})}}function Q0t(e){var t=e.getLabelModel(),n=nQ(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function nQ(e,t){var n=rQ(e,"labels"),r=Dk(t),i=iQ(n,r);if(i)return i;var a,o;return ae(r)?a=sQ(e,r):(o=r==="auto"?n_t(e):r,a=oQ(e,o)),aQ(n,r,{labels:a,labelCategoryInterval:o})}function t_t(e,t){var n=rQ(e,"ticks"),r=Dk(t),i=iQ(n,r);if(i)return i;var a,o;if((!t.get("show")||e.scale.isBlank())&&(a=[]),ae(r))a=sQ(e,r,!0);else if(r==="auto"){var s=nQ(e,e.getLabelModel());o=s.labelCategoryInterval,a=yt(s.labels,function(l){return l.tickValue})}else o=r,a=oQ(e,o,!0);return aQ(n,r,{ticks:a,tickCategoryInterval:o})}function e_t(e){var t=e.scale.getTicks(),n=A1(e);return{labels:yt(t,function(r,i){return{level:r.level,formattedLabel:n(r,i),rawLabel:e.scale.getLabel(r),tickValue:r.value}})}}function rQ(e,t){return yb(e)[t]||(yb(e)[t]=[])}function iQ(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function aQ(e,t,n){return e.push({key:t,value:n}),n}function n_t(e){var t=yb(e).autoInterval;return t??(yb(e).autoInterval=e.calculateCategoryInterval())}function r_t(e){var t=i_t(e),n=A1(e),r=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var l=a[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(r)),h=Math.abs(u*Math.sin(r)),f=0,d=0;l<=a[1];l+=s){var p=0,v=0,g=v1(n({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,f=Math.max(f,p,7),d=Math.max(d,v,7)}var m=f/c,_=d/h;isNaN(m)&&(m=1/0),isNaN(_)&&(_=1/0);var y=Math.max(0,Math.floor(Math.min(m,_))),x=yb(e.model),S=e.getExtent(),b=x.lastAutoInterval,w=x.lastTickCount;return b!=null&&w!=null&&Math.abs(b-y)<=1&&Math.abs(w-o)<=1&&b>y&&x.axisExtent0===S[0]&&x.axisExtent1===S[1]?y=b:(x.lastTickCount=o,x.lastAutoInterval=y,x.axisExtent0=S[0],x.axisExtent1=S[1]),y}function i_t(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function oQ(e,t,n){var r=A1(e),i=e.scale,a=i.getExtent(),o=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=a[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var h=JJ(e),f=o.get("showMinLabel")||h,d=o.get("showMaxLabel")||h;f&&u!==a[0]&&v(a[0]);for(var p=u;p<=a[1];p+=l)v(p);d&&p-l!==a[1]&&v(a[1]);function v(g){var m={value:g};s.push(n?g:{formattedLabel:r(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function sQ(e,t,n){var r=e.scale,i=A1(e),a=[];return R(r.getTicks(),function(o){var s=r.getLabel(o),l=o.value;t(o.value,s)&&a.push(n?l:{formattedLabel:i(o),rawLabel:s,tickValue:l})}),a}var UG=[0,1],Qa=function(){function e(t,n,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=n,this._extent=r||[0,0]}return e.prototype.contain=function(t){var n=this._extent,r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return t>=r&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return cK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,n){var r=this._extent;r[0]=t,r[1]=n},e.prototype.dataToCoord=function(t,n){var r=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(r=r.slice(),VG(r,i.count())),Cn(t,UG,r,n)},e.prototype.coordToData=function(t,n){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),VG(r,i.count()));var a=Cn(t,r,UG,n);return this.scale.scale(a)},e.prototype.pointToData=function(t,n){},e.prototype.getTicksCoords=function(t){t=t||{};var n=t.tickModel||this.getTickModel(),r=J0t(this,n),i=r.ticks,a=yt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=n.get("alignWithLabel");return a_t(this,a,o,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),n=t.get("splitNumber");n>0&&n<100||(n=5);var r=this.scale.getMinorTicks(n),i=yt(r,function(a){return yt(a,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return i},e.prototype.getViewLabels=function(){return Z0t(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,n=this.scale.getExtent(),r=n[1]-n[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/r},e.prototype.calculateCategoryInterval=function(){return r_t(this)},e}();function VG(e,t){var n=e[1]-e[0],r=t,i=n/r/2;e[0]+=i,e[1]-=i}function a_t(e,t,n,r){var i=t.length;if(!e.onBand||n||!i)return;var a=e.getExtent(),o,s;if(i===1)t[0].coord=a[0],o=t[1]={coord:a[1]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;R(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,o={coord:t[i-1].coord+u*s},t.push(o)}var h=a[0]>a[1];f(t[0].coord,a[0])&&(r?t[0].coord=a[0]:t.shift()),r&&f(a[0],t[0].coord)&&t.unshift({coord:a[0]}),f(a[1],o.coord)&&(r?o.coord=a[1]:t.pop()),r&&f(o.coord,a[1])&&t.push({coord:a[1]});function f(d,p){return d=_r(d),p=_r(p),h?d>p:d<p}}var d_=Math.PI*2,Xd=zu.CMD,o_t=["top","right","bottom","left"];function s_t(e,t,n,r,i){var a=n.width,o=n.height;switch(e){case"top":r.set(n.x+a/2,n.y-t),i.set(0,-1);break;case"bottom":r.set(n.x+a/2,n.y+o+t),i.set(0,1);break;case"left":r.set(n.x-t,n.y+o/2),i.set(-1,0);break;case"right":r.set(n.x+a+t,n.y+o/2),i.set(1,0);break}}function l_t(e,t,n,r,i,a,o,s,l){o-=e,s-=t;var u=Math.sqrt(o*o+s*s);o/=u,s/=u;var c=o*n+e,h=s*n+t;if(Math.abs(r-i)%d_<1e-4)return l[0]=c,l[1]=h,u-n;if(a){var f=r;r=Yo(i),i=Yo(f)}else r=Yo(r),i=Yo(i);r>i&&(i+=d_);var d=Math.atan2(s,o);if(d<0&&(d+=d_),d>=r&&d<=i||d+d_>=r&&d+d_<=i)return l[0]=c,l[1]=h,u-n;var p=n*Math.cos(r)+e,v=n*Math.sin(r)+t,g=n*Math.cos(i)+e,m=n*Math.sin(i)+t,_=(p-o)*(p-o)+(v-s)*(v-s),y=(g-o)*(g-o)+(m-s)*(m-s);return _<y?(l[0]=p,l[1]=v,Math.sqrt(_)):(l[0]=g,l[1]=m,Math.sqrt(y))}function sA(e,t,n,r,i,a,o,s){var l=i-e,u=a-t,c=n-e,h=r-t,f=Math.sqrt(c*c+h*h);c/=f,h/=f;var d=l*c+u*h,p=d/f;s&&(p=Math.min(Math.max(p,0),1)),p*=f;var v=o[0]=e+p*c,g=o[1]=t+p*h;return Math.sqrt((v-i)*(v-i)+(g-a)*(g-a))}function lQ(e,t,n,r,i,a,o){n<0&&(e=e+n,n=-n),r<0&&(t=t+r,r=-r);var s=e+n,l=t+r,u=o[0]=Math.min(Math.max(i,e),s),c=o[1]=Math.min(Math.max(a,t),l);return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))}var vl=[];function u_t(e,t,n){var r=lQ(t.x,t.y,t.width,t.height,e.x,e.y,vl);return n.set(vl[0],vl[1]),r}function c_t(e,t,n){for(var r=0,i=0,a=0,o=0,s,l,u=1/0,c=t.data,h=e.x,f=e.y,d=0;d<c.length;){var p=c[d++];d===1&&(r=c[d],i=c[d+1],a=r,o=i);var v=u;switch(p){case Xd.M:a=c[d++],o=c[d++],r=a,i=o;break;case Xd.L:v=sA(r,i,c[d],c[d+1],h,f,vl,!0),r=c[d++],i=c[d++];break;case Xd.C:v=Xq(r,i,c[d++],c[d++],c[d++],c[d++],c[d],c[d+1],h,f,vl),r=c[d++],i=c[d++];break;case Xd.Q:v=Yq(r,i,c[d++],c[d++],c[d],c[d+1],h,f,vl),r=c[d++],i=c[d++];break;case Xd.A:var g=c[d++],m=c[d++],_=c[d++],y=c[d++],x=c[d++],S=c[d++];d+=1;var b=!!(1-c[d++]);s=Math.cos(x)*_+g,l=Math.sin(x)*y+m,d<=1&&(a=s,o=l);var w=(h-g)*y/_+g;v=l_t(g,m,y,x,x+S,b,w,f,vl),r=Math.cos(x+S)*_+g,i=Math.sin(x+S)*y+m;break;case Xd.R:a=r=c[d++],o=i=c[d++];var A=c[d++],T=c[d++];v=lQ(a,o,A,T,h,f,vl);break;case Xd.Z:v=sA(r,i,a,o,h,f,vl,!0),r=a,i=o;break}v<u&&(u=v,n.set(vl[0],vl[1]))}return u}var wl=new Me,lr=new Me,jr=new Me,Mu=new Me,du=new Me;function GG(e,t){if(e){var n=e.getTextGuideLine(),r=e.getTextContent();if(r&&n){var i=e.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],o=i.candidates||o_t,s=r.getBoundingRect().clone();s.applyTransform(r.getComputedTransform());var l=1/0,u=i.anchor,c=e.getComputedTransform(),h=c&&zv([],c),f=t.get("length2")||0;u&&jr.copy(u);for(var d=0;d<o.length;d++){var p=o[d];s_t(p,0,s,wl,Mu),Me.scaleAndAdd(lr,wl,Mu,f),lr.transform(h);var v=e.getBoundingRect(),g=u?u.distance(lr):e instanceof Ve?c_t(lr,e.path,jr):u_t(lr,v,jr);g<l&&(l=g,lr.transform(c),jr.transform(c),jr.toArray(a[0]),lr.toArray(a[1]),wl.toArray(a[2]))}uQ(a,t.get("minTurnAngle")),n.setShape({points:a})}}}var lA=[],Fa=new Me;function uQ(e,t){if(t<=180&&t>0){t=t/180*Math.PI,wl.fromArray(e[0]),lr.fromArray(e[1]),jr.fromArray(e[2]),Me.sub(Mu,wl,lr),Me.sub(du,jr,lr);var n=Mu.len(),r=du.len();if(!(n<.001||r<.001)){Mu.scale(1/n),du.scale(1/r);var i=Mu.dot(du),a=Math.cos(t);if(a<i){var o=sA(lr.x,lr.y,jr.x,jr.y,wl.x,wl.y,lA,!1);Fa.fromArray(lA),Fa.scaleAndAdd(du,o/Math.tan(Math.PI-t));var s=jr.x!==lr.x?(Fa.x-lr.x)/(jr.x-lr.x):(Fa.y-lr.y)/(jr.y-lr.y);if(isNaN(s))return;s<0?Me.copy(Fa,lr):s>1&&Me.copy(Fa,jr),Fa.toArray(e[1])}}}}function h_t(e,t,n){if(n<=180&&n>0){n=n/180*Math.PI,wl.fromArray(e[0]),lr.fromArray(e[1]),jr.fromArray(e[2]),Me.sub(Mu,lr,wl),Me.sub(du,jr,lr);var r=Mu.len(),i=du.len();if(!(r<.001||i<.001)){Mu.scale(1/r),du.scale(1/i);var a=Mu.dot(t),o=Math.cos(n);if(a<o){var s=sA(lr.x,lr.y,jr.x,jr.y,wl.x,wl.y,lA,!1);Fa.fromArray(lA);var l=Math.PI/2,u=Math.acos(du.dot(t)),c=l+u-n;if(c>=l)Me.copy(Fa,jr);else{Fa.scaleAndAdd(du,s/Math.tan(Math.PI/2-c));var h=jr.x!==lr.x?(Fa.x-lr.x)/(jr.x-lr.x):(Fa.y-lr.y)/(jr.y-lr.y);if(isNaN(h))return;h<0?Me.copy(Fa,lr):h>1&&Me.copy(Fa,jr)}Fa.toArray(e[1])}}}}function eI(e,t,n,r){var i=n==="normal",a=i?e:e.ensureState(n);a.ignore=t;var o=r.get("smooth");o&&o===!0&&(o=.3),a.shape=a.shape||{},o>0&&(a.shape.smooth=o);var s=r.getModel("lineStyle").getLineStyle();i?e.useStyle(s):a.style=s}function f_t(e,t){var n=t.smooth,r=t.points;if(r)if(e.moveTo(r[0][0],r[0][1]),n>0&&r.length>=3){var i=gf(r[0],r[1]),a=gf(r[1],r[2]);if(!i||!a){e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]);return}var o=Math.min(i,a)*n,s=HT([],r[1],r[0],o/i),l=HT([],r[1],r[2],o/a),u=HT([],s,l,.5);e.bezierCurveTo(s[0],s[1],s[0],s[1],u[0],u[1]),e.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)e.lineTo(r[c][0],r[c][1])}function Pk(e,t,n){var r=e.getTextGuideLine(),i=e.getTextContent();if(!i){r&&e.removeTextGuideLine();return}for(var a=t.normal,o=a.get("show"),s=i.ignore,l=0;l<ub.length;l++){var u=ub[l],c=t[u],h=u==="normal";if(c){var f=c.get("show"),d=h?s:xe(i.states[u]&&i.states[u].ignore,s);if(d||!xe(f,o)){var p=h?r:r&&r.states[u];p&&(p.ignore=!0),r&&eI(r,!0,u,c);continue}r||(r=new Ja,e.setTextGuideLine(r),!h&&(s||!o)&&eI(r,!0,"normal",t.normal),e.stateProxy&&(r.stateProxy=e.stateProxy)),eI(r,!1,u,c)}}if(r){te(r.style,n),r.style.fill=null;var v=a.get("showAbove"),g=e.textGuideLineConfig=e.textGuideLineConfig||{};g.showAbove=v||!1,r.buildPath=f_t}}function Rk(e,t){t=t||"labelLine";for(var n={normal:e.getModel(t)},r=0;r<$a.length;r++){var i=$a[r];n[i]=e.getModel([i,t])}return n}function cQ(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(!r.defaultAttr.ignore){var i=r.label,a=i.getComputedTransform(),o=i.getBoundingRect(),s=!a||a[1]<1e-5&&a[2]<1e-5,l=i.style.margin||0,u=o.clone();u.applyTransform(a),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new WM(o,a):null;t.push({label:i,labelLine:r.labelLine,rect:u,localRect:o,obb:c,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:s,transform:a})}}return t}function hQ(e,t,n,r,i,a){var o=e.length;if(o<2)return;e.sort(function(A,T){return A.rect[t]-T.rect[t]});for(var s=0,l,u=!1,c=0,h=0;h<o;h++){var f=e[h],d=f.rect;l=d[t]-s,l<0&&(d[t]-=l,f.label[t]-=l,u=!0);var p=Math.max(-l,0);c+=p,s=d[t]+d[n]}c>0&&a&&S(-c/o,0,o);var v=e[0],g=e[o-1],m,_;y(),m<0&&b(-m,.8),_<0&&b(_,.8),y(),x(m,_,1),x(_,m,-1),y(),m<0&&w(-m),_<0&&w(_);function y(){m=v.rect[t]-r,_=i-g.rect[t]-g.rect[n]}function x(A,T,M){if(A<0){var C=Math.min(T,-A);if(C>0){S(C*M,0,o);var E=C+A;E<0&&b(-E*M,1)}else b(-A*M,1)}}function S(A,T,M){A!==0&&(u=!0);for(var C=T;C<M;C++){var E=e[C],D=E.rect;D[t]+=A,E.label[t]+=A}}function b(A,T){for(var M=[],C=0,E=1;E<o;E++){var D=e[E-1].rect,I=Math.max(e[E].rect[t]-D[t]-D[n],0);M.push(I),C+=I}if(C){var L=Math.min(Math.abs(A)/C,T);if(A>0)for(var E=0;E<o-1;E++){var P=M[E]*L;S(P,0,E+1)}else for(var E=o-1;E>0;E--){var P=M[E-1]*L;S(-P,E,o)}}}function w(A){var T=A<0?-1:1;A=Math.abs(A);for(var M=Math.ceil(A/(o-1)),C=0;C<o-1;C++)if(T>0?S(M,0,C+1):S(-M,o-C-1,o),A-=M,A<=0)return}return u}function d_t(e,t,n,r){return hQ(e,"x","width",t,n,r)}function fQ(e,t,n,r){return hQ(e,"y","height",t,n,r)}function dQ(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var n=new Ae(0,0,0,0);function r(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],o=a.axisAligned,s=a.localRect,l=a.transform,u=a.label,c=a.labelLine;n.copy(a.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var h=a.obb,f=!1,d=0;d<t.length;d++){var p=t[d];if(n.intersect(p.rect)){if(o&&p.axisAligned){f=!0;break}if(p.obb||(p.obb=new WM(p.localRect,p.transform)),h||(h=new WM(s,l)),h.intersect(p.obb)){f=!0;break}}}f?(r(u),c&&r(c)):(u.attr("ignore",a.defaultAttr.ignore),c&&c.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}function p_t(e){if(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].slice());return t}}function v_t(e,t){var n=e.label,r=t&&t.getTextGuideLine();return{dataIndex:e.dataIndex,dataType:e.dataType,seriesIndex:e.seriesModel.seriesIndex,text:e.label.style.text,rect:e.hostRect,labelRect:e.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:p_t(r&&r.shape.points)}}var HG=["align","verticalAlign","width","height","fontSize"],Da=new Oc,nI=vn(),g_t=vn();function tw(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];t[i]!=null&&(e[i]=t[i])}}var ew=["x","y","rotation"],m_t=function(){function e(){this._labelList=[],this._chartViewList=[]}return e.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},e.prototype._addLabel=function(t,n,r,i,a){var o=i.style,s=i.__hostTarget,l=s.textConfig||{},u=i.getComputedTransform(),c=i.getBoundingRect().plain();Ae.applyTransform(c,c,u),u?Da.setLocalTransform(u):(Da.x=Da.y=Da.rotation=Da.originX=Da.originY=0,Da.scaleX=Da.scaleY=1),Da.rotation=Yo(Da.rotation);var h=i.__hostTarget,f;if(h){f=h.getBoundingRect().plain();var d=h.getComputedTransform();Ae.applyTransform(f,f,d)}var p=f&&h.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:r,dataIndex:t,dataType:n,layoutOption:a,computedLayoutOption:null,rect:c,hostRect:f,priority:f?f.width*f.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:Da.x,y:Da.y,scaleX:Da.scaleX,scaleY:Da.scaleY,rotation:Da.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},e.prototype.addLabelsOfSeries=function(t){var n=this;this._chartViewList.push(t);var r=t.__model,i=r.get("labelLayout");(ae(i)||Je(i).length)&&t.group.traverse(function(a){if(a.ignore)return!0;var o=a.getTextContent(),s=fe(a);o&&!o.disableLabelLayout&&n._addLabel(s.dataIndex,s.dataType,r,o,i)})},e.prototype.updateLayoutConfig=function(t){var n=t.getWidth(),r=t.getHeight();function i(y,x){return function(){GG(y,x)}}for(var a=0;a<this._labelList.length;a++){var o=this._labelList[a],s=o.label,l=s.__hostTarget,u=o.defaultAttr,c=void 0;ae(o.layoutOption)?c=o.layoutOption(v_t(o,l)):c=o.layoutOption,c=c||{},o.computedLayoutOption=c;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*h:u.attachedRot,offset:[c.dx||0,c.dy||0]});var f=!1;if(c.x!=null?(s.x=Dt(c.x,n),s.setStyle("x",0),f=!0):(s.x=u.x,s.setStyle("x",u.style.x)),c.y!=null?(s.y=Dt(c.y,r),s.setStyle("y",0),f=!0):(s.y=u.y,s.setStyle("y",u.style.y)),c.labelLinePoints){var d=l.getTextGuideLine();d&&(d.setShape({points:c.labelLinePoints}),f=!1)}var p=nI(s);p.needsUpdateLabelLine=f,s.rotation=c.rotate!=null?c.rotate*h:u.rotation,s.scaleX=u.scaleX,s.scaleY=u.scaleY;for(var v=0;v<HG.length;v++){var g=HG[v];s.setStyle(g,c[g]!=null?c[g]:u.style[g])}if(c.draggable){if(s.draggable=!0,s.cursor="move",l){var m=o.seriesModel;if(o.dataIndex!=null){var _=o.seriesModel.getData(o.dataType);m=_.getItemModel(o.dataIndex)}s.on("drag",i(l,m.getModel("labelLine")))}}else s.off("drag"),s.cursor=u.cursor}},e.prototype.layout=function(t){var n=t.getWidth(),r=t.getHeight(),i=cQ(this._labelList),a=Gn(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),o=Gn(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});d_t(a,0,n),fQ(o,0,r);var s=Gn(i,function(l){return l.layoutOption.hideOverlap});dQ(s)},e.prototype.processLabelsOverall=function(){var t=this;R(this._chartViewList,function(n){var r=n.__model,i=n.ignoreLabelLineUpdate,a=r.isAnimationEnabled();n.group.traverse(function(o){if(o.ignore&&!o.forceLabelAnimation)return!0;var s=!i,l=o.getTextContent();!s&&l&&(s=nI(l).needsUpdateLabelLine),s&&t._updateLabelLine(o,r),a&&t._animateLabels(o,r)})})},e.prototype._updateLabelLine=function(t,n){var r=t.getTextContent(),i=fe(t),a=i.dataIndex;if(r&&a!=null){var o=n.getData(i.dataType),s=o.getItemModel(a),l={},u=o.getItemVisual(a,"style");if(u){var c=o.getVisual("drawType");l.stroke=u[c]}var h=s.getModel("labelLine");Pk(t,Rk(s),l),GG(t,h)}},e.prototype._animateLabels=function(t,n){var r=t.getTextContent(),i=t.getTextGuideLine();if(r&&(t.forceLabelAnimation||!r.ignore&&!r.invisible&&!t.disableLabelAnimation&&!Pm(t))){var a=nI(r),o=a.oldLayout,s=fe(t),l=s.dataIndex,u={x:r.x,y:r.y,rotation:r.rotation},c=n.getData(s.dataType);if(o){r.attr(o);var f=t.prevStates;f&&(Le(f,"select")>=0&&r.attr(a.oldLayoutSelect),Le(f,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),Tn(r,u,n,l)}else if(r.attr(u),!a0(r).valueAnimation){var h=xe(r.style.opacity,1);r.style.opacity=0,xr(r,{style:{opacity:h}},n,l)}if(a.oldLayout=u,r.states.select){var d=a.oldLayoutSelect={};tw(d,u,ew),tw(d,r.states.select,ew)}if(r.states.emphasis){var p=a.oldLayoutEmphasis={};tw(p,u,ew),tw(p,r.states.emphasis,ew)}aZ(r,l,c,n,n)}if(i&&!i.ignore&&!i.invisible){var a=g_t(i),o=a.oldLayout,v={points:i.shape.points};o?(i.attr({shape:o}),Tn(i,{shape:v},n)):(i.setShape(v),i.style.strokePercent=0,xr(i,{style:{strokePercent:1}},n)),a.oldLayout=v}},e}(),rI=vn();function pQ(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,n,r){var i=rI(n).labelManager;i||(i=rI(n).labelManager=new m_t),i.clearLabels()}),e.registerUpdateLifecycle("series:layoutlabels",function(t,n,r){var i=rI(n).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(n.getViewOfSeriesModel(a))}),i.updateLayoutConfig(n),i.layout(n),i.processLabelsOverall()})}var iI=Math.sin,aI=Math.cos,vQ=Math.PI,jd=Math.PI*2,y_t=180/vQ,gQ=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,n){this._add("M",t,n)},e.prototype.lineTo=function(t,n){this._add("L",t,n)},e.prototype.bezierCurveTo=function(t,n,r,i,a,o){this._add("C",t,n,r,i,a,o)},e.prototype.quadraticCurveTo=function(t,n,r,i){this._add("Q",t,n,r,i)},e.prototype.arc=function(t,n,r,i,a,o){this.ellipse(t,n,r,r,0,i,a,o)},e.prototype.ellipse=function(t,n,r,i,a,o,s,l){var u=s-o,c=!l,h=Math.abs(u),f=bf(h-jd)||(c?u>=jd:-u>=jd),d=u>0?u%jd:u%jd+jd,p=!1;f?p=!0:bf(h)?p=!1:p=d>=vQ==!!c;var v=t+r*aI(o),g=n+i*iI(o);this._start&&this._add("M",v,g);var m=Math.round(a*y_t);if(f){var _=1/this._p,y=(c?1:-1)*(jd-_);this._add("A",r,i,m,1,+c,t+r*aI(o+y),n+i*iI(o+y)),_>.01&&this._add("A",r,i,m,0,+c,v,g)}else{var x=t+r*aI(s),S=n+i*iI(s);this._add("A",r,i,m,+p,+c,x,S)}},e.prototype.rect=function(t,n,r,i){this._add("M",t,n),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,n,r,i,a,o,s,l,u){for(var c=[],h=this._p,f=1;f<arguments.length;f++){var d=arguments[f];if(isNaN(d)){this._invalid=!0;return}c.push(Math.round(d*h)/h)}this._d.push(t+c.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}(),Ok="none",__t=Math.round;function x_t(e){var t=e.fill;return t!=null&&t!==Ok}function b_t(e){var t=e.stroke;return t!=null&&t!==Ok}var qO=["lineCap","miterLimit","lineJoin"],S_t=yt(qO,function(e){return"stroke-"+e.toLowerCase()});function w_t(e,t,n,r){var i=t.opacity==null?1:t.opacity;if(n instanceof Wi){e("opacity",i);return}if(x_t(t)){var a=ob(t.fill);e("fill",a.color);var o=t.fillOpacity!=null?t.fillOpacity*a.opacity*i:a.opacity*i;o<1&&e("fill-opacity",o)}else e("fill",Ok);if(b_t(t)){var s=ob(t.stroke);e("stroke",s.color);var l=t.strokeNoScale?n.getLineScale():1,u=l?(t.lineWidth||0)/l:0,c=t.strokeOpacity!=null?t.strokeOpacity*s.opacity*i:s.opacity*i,h=t.strokeFirst;if(u!==1&&e("stroke-width",u),h&&e("paint-order",h?"stroke":"fill"),c<1&&e("stroke-opacity",c),t.lineDash){var f=vk(n),d=f[0],p=f[1];d&&(p=__t(p||0),e("stroke-dasharray",d.join(",")),(p||r)&&e("stroke-dashoffset",p))}for(var v=0;v<qO.length;v++){var g=qO[v];if(t[g]!==GM[g]){var m=t[g]||GM[g];m&&e(S_t[v],m)}}}}var mQ="http://www.w3.org/2000/svg",yQ="http://www.w3.org/1999/xlink",T_t="http://www.w3.org/2000/xmlns/",M_t="http://www.w3.org/XML/1998/namespace",WG="ecmeta_";function _Q(e){return document.createElementNS(mQ,e)}function Di(e,t,n,r,i){return{tag:e,attrs:n||{},children:r,text:i,key:t}}function A_t(e,t){var n=[];if(t)for(var r in t){var i=t[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),n.push(a))}return"<"+e+" "+n.join(" ")+">"}function C_t(e){return"</"+e+">"}function Nk(e,t){t=t||{};var n=t.newline?`
`:"";function r(i){var a=i.children,o=i.tag,s=i.attrs,l=i.text;return A_t(o,s)+(o!=="style"?Ti(l):l||"")+(a?""+n+yt(a,function(u){return r(u)}).join(n)+n:"")+C_t(o)}return r(e)}function E_t(e,t,n){n=n||{};var r=n.newline?`
`:"",i=" {"+r,a=r+"}",o=yt(Je(e),function(l){return l+i+yt(Je(e[l]),function(u){return u+":"+e[l][u]+";"}).join(r)+a}).join(r),s=yt(Je(t),function(l){return"@keyframes "+l+i+yt(Je(t[l]),function(u){return u+i+yt(Je(t[l][u]),function(c){var h=t[l][u][c];return c==="d"&&(h='path("'+h+'")'),c+":"+h+";"}).join(r)+a}).join(r)+a}).join(r);return!o&&!s?"":["<![CDATA[",o,s,"]]>"].join(r)}function KO(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function $G(e,t,n,r){return Di("svg","root",{width:e,height:t,xmlns:mQ,"xmlns:xlink":yQ,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+e+" "+t:!1},n)}var D_t=0;function xQ(){return D_t++}var XG={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},cp="transform-origin";function I_t(e,t,n){var r=ut({},e.shape);ut(r,t),e.buildPath(n,r);var i=new gQ;return i.reset(eK(e)),n.rebuildPath(i,1),i.generateStr(),i.getStr()}function L_t(e,t){var n=t.originX,r=t.originY;(n||r)&&(e[cp]=n+"px "+r+"px")}var P_t={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function bQ(e,t){var n=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[n]=e,n}function R_t(e,t,n){var r=e.shape.paths,i={},a,o;if(R(r,function(l){var u=KO(n.zrId);u.animation=!0,EE(l,{},u,!0);var c=u.cssAnims,h=u.cssNodes,f=Je(c),d=f.length;if(d){o=f[d-1];var p=c[o];for(var v in p){var g=p[v];i[v]=i[v]||{d:""},i[v].d+=g.d||""}for(var m in h){var _=h[m].animation;_.indexOf(o)>=0&&(a=_)}}}),!!a){t.d=!1;var s=bQ(i,n);return a.replace(o,s)}}function jG(e){return Ft(e)?XG[e]?"cubic-bezier("+XG[e]+")":PB(e)?e:"":""}function EE(e,t,n,r){var i=e.animators,a=i.length,o=[];if(e instanceof jB){var s=R_t(e,t,n);if(s)o.push(s);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=i[u],h=[c.getMaxTime()/1e3+"s"],f=jG(c.getClip().easing),d=c.getDelay();f?h.push(f):h.push("linear"),d&&h.push(d/1e3+"s"),c.getLoop()&&h.push("infinite");var p=h.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function v(_){var y=_[1],x=y.length,S={},b={},w={},A="animation-timing-function";function T(et,xt,St){for(var X=et.getTracks(),Ct=et.getMaxTime(),It=0;It<X.length;It++){var Jt=X[It];if(Jt.needsAnimate()){var Gt=Jt.keyframes,ve=Jt.propName;if(St&&(ve=St(ve)),ve)for(var W=0;W<Gt.length;W++){var F=Gt[W],st=Math.round(F.time/Ct*100)+"%",bt=jG(F.easing),At=F.rawValue;(Ft(At)||xn(At))&&(xt[st]=xt[st]||{},xt[st][ve]=F.rawValue,bt&&(xt[st][A]=bt))}}}}for(var M=0;M<x;M++){var C=y[M],E=C.targetName;E?E==="shape"&&T(C,b):!r&&T(C,S)}for(var D in S){var I={};oK(I,e),ut(I,S[D]);var L=nK(I),P=S[D][A];w[D]=L?{transform:L}:{},L_t(w[D],I),P&&(w[D][A]=P)}var B,N=!0;for(var D in b){w[D]=w[D]||{};var k=!B,P=b[D][A];k&&(B=new zu);var U=B.len();B.reset(),w[D].d=I_t(e,b[D],B);var Z=B.len();if(!k&&U!==Z){N=!1;break}P&&(w[D][A]=P)}if(!N)for(var D in w)delete w[D].d;if(!r)for(var M=0;M<x;M++){var C=y[M],E=C.targetName;E==="style"&&T(C,w,function(X){return P_t[X]})}for(var nt=Je(w),ct=!0,K,M=1;M<nt.length;M++){var $=nt[M-1],ot=nt[M];if(w[$][cp]!==w[ot][cp]){ct=!1;break}K=w[$][cp]}if(ct&&K){for(var D in w)w[D][cp]&&delete w[D][cp];t[cp]=K}if(Gn(nt,function(et){return Je(w[et]).length>0}).length){var tt=bQ(w,n);return tt+" "+_[0]+" both"}}for(var g in l){var s=v(l[g]);s&&o.push(s)}if(o.length){var m=n.zrId+"-cls-"+xQ();n.cssNodes["."+m]={animation:o.join(",")},t.class=m}}function O_t(e,t,n){if(!e.ignore)if(e.isSilent()){var r={"pointer-events":"none"};YG(r,t,n)}else{var i=e.states.emphasis&&e.states.emphasis.style?e.states.emphasis.style:{},a=i.fill;if(!a){var o=e.style&&e.style.fill,s=e.states.select&&e.states.select.style&&e.states.select.style.fill,l=e.currentStates.indexOf("select")>=0&&s||o;l&&(a=oO(l))}var u=i.lineWidth;if(u){var c=!i.strokeNoScale&&e.transform?e.transform[0]:1;u=u/c}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),u&&(r["stroke-width"]=u),YG(r,t,n)}}function YG(e,t,n,r){var i=JSON.stringify(e),a=n.cssStyleCache[i];a||(a=n.zrId+"-cls-"+xQ(),n.cssStyleCache[i]=a,n.cssNodes["."+a+":hover"]=e),t.class=t.class?t.class+" "+a:a}var _b=Math.round;function SQ(e){return e&&Ft(e.src)}function wQ(e){return e&&ae(e.toDataURL)}function Bk(e,t,n,r){w_t(function(i,a){var o=i==="fill"||i==="stroke";o&&tK(a)?MQ(t,e,i,r):o&&RB(a)?AQ(n,e,i,r):o&&a==="none"?e[i]="transparent":e[i]=a},t,n,!1),V_t(n,e,r)}function kk(e,t){var n=Fdt(t);n&&(n.each(function(r,i){r!=null&&(e[(WG+i).toLowerCase()]=r+"")}),t.isSilent()&&(e[WG+"silent"]="true"))}function qG(e){return bf(e[0]-1)&&bf(e[1])&&bf(e[2])&&bf(e[3]-1)}function N_t(e){return bf(e[4])&&bf(e[5])}function Fk(e,t,n){if(t&&!(N_t(t)&&qG(t))){var r=1e4;e.transform=qG(t)?"translate("+_b(t[4]*r)/r+" "+_b(t[5]*r)/r+")":sdt(t)}}function KG(e,t,n){for(var r=e.points,i=[],a=0;a<r.length;a++)i.push(_b(r[a][0]*n)/n),i.push(_b(r[a][1]*n)/n);t.points=i.join(" ")}function ZG(e){return!e.smooth}function B_t(e){var t=yt(e,function(n){return typeof n=="string"?[n,n]:n});return function(n,r,i){for(var a=0;a<t.length;a++){var o=t[a],s=n[o[0]];s!=null&&(r[o[1]]=_b(s*i)/i)}}}var k_t={circle:[B_t(["cx","cy","r"])],polyline:[KG,ZG],polygon:[KG,ZG]};function F_t(e){for(var t=e.animators,n=0;n<t.length;n++)if(t[n].targetName==="shape")return!0;return!1}function TQ(e,t){var n=e.style,r=e.shape,i=k_t[e.type],a={},o=t.animation,s="path",l=e.style.strokePercent,u=t.compress&&eK(e)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](r))&&!(o&&F_t(e))&&!(l<1)){s=e.type;var c=Math.pow(10,u);i[0](r,a,c)}else{var h=!e.path||e.shapeChanged();e.path||e.createPathProxy();var f=e.path;h&&(f.beginPath(),e.buildPath(f,e.shape),e.pathUpdated());var d=f.getVersion(),p=e,v=p.__svgPathBuilder;(p.__svgPathVersion!==d||!v||l!==p.__svgPathStrokePercent)&&(v||(v=p.__svgPathBuilder=new gQ),v.reset(u),f.rebuildPath(v,l),v.generateStr(),p.__svgPathVersion=d,p.__svgPathStrokePercent=l),a.d=v.getStr()}return Fk(a,e.transform),Bk(a,n,e,t),kk(a,e),t.animation&&EE(e,a,t),t.emphasis&&O_t(e,a,t),Di(s,e.id+"",a)}function z_t(e,t){var n=e.style,r=n.image;if(r&&!Ft(r)&&(SQ(r)?r=r.src:wQ(r)&&(r=r.toDataURL())),!!r){var i=n.x||0,a=n.y||0,o=n.width,s=n.height,l={href:r,width:o,height:s};return i&&(l.x=i),a&&(l.y=a),Fk(l,e.transform),Bk(l,n,e,t),kk(l,e),t.animation&&EE(e,l,t),Di("image",e.id+"",l)}}function U_t(e,t){var n=e.style,r=n.text;if(r!=null&&(r+=""),!(!r||isNaN(n.x)||isNaN(n.y))){var i=n.font||kf,a=n.x||0,o=udt(n.y||0,eE(i),n.textBaseline),s=ldt[n.textAlign]||n.textAlign,l={"dominant-baseline":"central","text-anchor":s};if(PK(n)){var u="",c=n.fontStyle,h=LK(n.fontSize);if(!parseFloat(h))return;var f=n.fontFamily||Lq,d=n.fontWeight;u+="font-size:"+h+";font-family:"+f+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),d&&d!=="normal"&&(u+="font-weight:"+d+";"),l.style=u}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),o&&(l.y=o),Fk(l,e.transform),Bk(l,n,e,t),kk(l,e),t.animation&&EE(e,l,t),Di("text",e.id+"",l,void 0,r)}}function JG(e,t){if(e instanceof Ve)return TQ(e,t);if(e instanceof Wi)return z_t(e,t);if(e instanceof sy)return U_t(e,t)}function V_t(e,t,n){var r=e.style;if(cdt(r)){var i=hdt(e),a=n.shadowCache,o=a[i];if(!o){var s=e.getGlobalScale(),l=s[0],u=s[1];if(!l||!u)return;var c=r.shadowOffsetX||0,h=r.shadowOffsetY||0,f=r.shadowBlur,d=ob(r.shadowColor),p=d.opacity,v=d.color,g=f/2/l,m=f/2/u,_=g+" "+m;o=n.zrId+"-s"+n.shadowIdx++,n.defs[o]=Di("filter",o,{id:o,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Di("feDropShadow","",{dx:c/l,dy:h/u,stdDeviation:_,"flood-color":v,"flood-opacity":p})]),a[i]=o}t.filter=QC(o)}}function MQ(e,t,n,r){var i=e[n],a,o={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(Jq(i))a="linearGradient",o.x1=i.x,o.y1=i.y,o.x2=i.x2,o.y2=i.y2;else if(Qq(i))a="radialGradient",o.cx=xe(i.x,.5),o.cy=xe(i.y,.5),o.r=xe(i.r,.5);else return;for(var s=i.colorStops,l=[],u=0,c=s.length;u<c;++u){var h=sO(s[u].offset)*100+"%",f=s[u].color,d=ob(f),p=d.color,v=d.opacity,g={offset:h};g["stop-color"]=p,v<1&&(g["stop-opacity"]=v),l.push(Di("stop",u+"",g))}var m=Di(a,"",o,l),_=Nk(m),y=r.gradientCache,x=y[_];x||(x=r.zrId+"-g"+r.gradientIdx++,y[_]=x,o.id=x,r.defs[x]=Di(a,x,o,l)),t[n]=QC(x)}function AQ(e,t,n,r){var i=e.style[n],a=e.getBoundingRect(),o={},s=i.repeat,l=s==="no-repeat",u=s==="repeat-x",c=s==="repeat-y",h;if(Zq(i)){var f=i.imageWidth,d=i.imageHeight,p=void 0,v=i.image;if(Ft(v)?p=v:SQ(v)?p=v.src:wQ(v)&&(p=v.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";Wa(f,g),Wa(d,g)}else if(f==null||d==null){var m=function(M,C){if(M){var E=M.elm,D=f||C.width,I=d||C.height;M.tag==="pattern"&&(u?(I=1,D/=a.width):c&&(D=1,I/=a.height)),M.attrs.width=D,M.attrs.height=I,E&&(E.setAttribute("width",D),E.setAttribute("height",I))}},_=zB(p,null,e,function(M){l||m(b,M),m(h,M)});_&&_.width&&_.height&&(f=f||_.width,d=d||_.height)}h=Di("image","img",{href:p,width:f,height:d}),o.width=f,o.height=d}else i.svgElement&&(h=ce(i.svgElement),o.width=i.svgWidth,o.height=i.svgHeight);if(h){var y,x;l?y=x=1:u?(x=1,y=o.width/a.width):c?(y=1,x=o.height/a.height):o.patternUnits="userSpaceOnUse",y!=null&&!isNaN(y)&&(o.width=y),x!=null&&!isNaN(x)&&(o.height=x);var S=nK(i);S&&(o.patternTransform=S);var b=Di("pattern","",o,[h]),w=Nk(b),A=r.patternCache,T=A[w];T||(T=r.zrId+"-p"+r.patternIdx++,A[w]=T,o.id=T,b=r.defs[T]=Di("pattern",T,o,[h])),t[n]=QC(T)}}function G_t(e,t,n){var r=n.clipPathCache,i=n.defs,a=r[e.id];if(!a){a=n.zrId+"-c"+n.clipPathIdx++;var o={id:a};r[e.id]=a,i[a]=Di("clipPath",a,o,[TQ(e,n)])}t["clip-path"]=QC(a)}function QG(e){return document.createTextNode(e)}function bp(e,t,n){e.insertBefore(t,n)}function tH(e,t){e.removeChild(t)}function eH(e,t){e.appendChild(t)}function CQ(e){return e.parentNode}function EQ(e){return e.nextSibling}function oI(e,t){e.textContent=t}var nH=58,H_t=120,W_t=Di("","");function ZO(e){return e===void 0}function su(e){return e!==void 0}function $_t(e,t,n){for(var r={},i=t;i<=n;++i){var a=e[i].key;a!==void 0&&(r[a]=i)}return r}function ix(e,t){var n=e.key===t.key,r=e.tag===t.tag;return r&&n}function xb(e){var t,n=e.children,r=e.tag;if(su(r)){var i=e.elm=_Q(r);if(zk(W_t,e),ht(n))for(t=0;t<n.length;++t){var a=n[t];a!=null&&eH(i,xb(a))}else su(e.text)&&!se(e.text)&&eH(i,QG(e.text))}else e.elm=QG(e.text);return e.elm}function DQ(e,t,n,r,i){for(;r<=i;++r){var a=n[r];a!=null&&bp(e,xb(a),t)}}function uA(e,t,n,r){for(;n<=r;++n){var i=t[n];if(i!=null)if(su(i.tag)){var a=CQ(i.elm);tH(a,i.elm)}else tH(e,i.elm)}}function zk(e,t){var n,r=t.elm,i=e&&e.attrs||{},a=t.attrs||{};if(i!==a){for(n in a){var o=a[n],s=i[n];s!==o&&(o===!0?r.setAttribute(n,""):o===!1?r.removeAttribute(n):n==="style"?r.style.cssText=o:n.charCodeAt(0)!==H_t?r.setAttribute(n,o):n==="xmlns:xlink"||n==="xmlns"?r.setAttributeNS(T_t,n,o):n.charCodeAt(3)===nH?r.setAttributeNS(M_t,n,o):n.charCodeAt(5)===nH?r.setAttributeNS(yQ,n,o):r.setAttribute(n,o))}for(n in i)n in a||r.removeAttribute(n)}}function X_t(e,t,n){for(var r=0,i=0,a=t.length-1,o=t[0],s=t[a],l=n.length-1,u=n[0],c=n[l],h,f,d,p;r<=a&&i<=l;)o==null?o=t[++r]:s==null?s=t[--a]:u==null?u=n[++i]:c==null?c=n[--l]:ix(o,u)?(rm(o,u),o=t[++r],u=n[++i]):ix(s,c)?(rm(s,c),s=t[--a],c=n[--l]):ix(o,c)?(rm(o,c),bp(e,o.elm,EQ(s.elm)),o=t[++r],c=n[--l]):ix(s,u)?(rm(s,u),bp(e,s.elm,o.elm),s=t[--a],u=n[++i]):(ZO(h)&&(h=$_t(t,r,a)),f=h[u.key],ZO(f)?bp(e,xb(u),o.elm):(d=t[f],d.tag!==u.tag?bp(e,xb(u),o.elm):(rm(d,u),t[f]=void 0,bp(e,d.elm,o.elm))),u=n[++i]);(r<=a||i<=l)&&(r>a?(p=n[l+1]==null?null:n[l+1].elm,DQ(e,p,n,i,l)):uA(e,t,r,a))}function rm(e,t){var n=t.elm=e.elm,r=e.children,i=t.children;e!==t&&(zk(e,t),ZO(t.text)?su(r)&&su(i)?r!==i&&X_t(n,r,i):su(i)?(su(e.text)&&oI(n,""),DQ(n,null,i,0,i.length-1)):su(r)?uA(n,r,0,r.length-1):su(e.text)&&oI(n,""):e.text!==t.text&&(su(r)&&uA(n,r,0,r.length-1),oI(n,t.text)))}function j_t(e,t){if(ix(e,t))rm(e,t);else{var n=e.elm,r=CQ(n);xb(t),r!==null&&(bp(r,t.elm,EQ(n)),uA(r,[e],0,0))}return t}var Y_t=0,q_t=function(){function e(t,n,r){if(this.type="svg",this.refreshHover=rH(),this.configLayer=rH(),this.storage=n,this._opts=r=ut({},r),this.root=t,this._id="zr"+Y_t++,this._oldVNode=$G(r.width,r.height),t&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=_Q("svg");zk(null,this._oldVNode),i.appendChild(a),t.appendChild(i)}this.resize(r.width,r.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",j_t(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return JG(t,KO(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var n=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=KO(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress,a.emphasis=t.emphasis;var o=[],s=this._bgVNode=K_t(r,i,this._backgroundColor,a);s&&o.push(s);var l=t.compress?null:this._mainVNode=Di("g","main",{},[]);this._paintList(n,a,l?l.children:o),l&&o.push(l);var u=yt(Je(a.defs),function(f){return a.defs[f]});if(u.length&&o.push(Di("defs","defs",{},u)),t.animation){var c=E_t(a.cssNodes,a.cssAnims,{newline:!0});if(c){var h=Di("style","stl",{},[],c);o.push(h)}}return $G(r,i,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},Nk(this.renderToVNode({animation:xe(t.cssAnimation,!0),emphasis:xe(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:xe(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,n,r){for(var i=t.length,a=[],o=0,s,l,u=0,c=0;c<i;c++){var h=t[c];if(!h.invisible){var f=h.__clipPaths,d=f&&f.length||0,p=l&&l.length||0,v=void 0;for(v=Math.max(d-1,p-1);v>=0&&!(f&&l&&f[v]===l[v]);v--);for(var g=p-1;g>v;g--)o--,s=a[o-1];for(var m=v+1;m<d;m++){var _={};G_t(f[m],_,n);var y=Di("g","clip-g-"+u++,_,[]);(s?s.children:r).push(y),a[o++]=y,s=y}l=f;var x=JG(h,n);x&&(s?s.children:r).push(x)}}},e.prototype.resize=function(t,n){var r=this._opts,i=this.root,a=this._viewport;if(t!=null&&(r.width=t),n!=null&&(r.height=n),i&&a&&(a.style.display="none",t=gm(i,0,r),n=gm(i,1,r),a.style.display=""),this._width!==t||this._height!==n){if(this._width=t,this._height=n,a){var o=a.style;o.width=t+"px",o.height=n+"px"}if(RB(this._backgroundColor))this.refresh();else{var s=this._svgDom;s&&(s.setAttribute("width",t),s.setAttribute("height",n));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",t),l.setAttribute("height",n))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var n=this.renderToString(),r="data:image/svg+xml;";return t?(n=ddt(n),n&&r+"base64,"+n):r+"charset=UTF-8,"+encodeURIComponent(n)},e}();function rH(e){return function(){}}function K_t(e,t,n,r){var i;if(n&&n!=="none")if(i=Di("rect","bg",{width:e,height:t,x:"0",y:"0"}),tK(n))MQ({fill:n},i.attrs,"fill",r);else if(RB(n))AQ({style:{fill:n},dirty:Zr,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",r);else{var a=ob(n),o=a.color,s=a.opacity;i.attrs.fill=o,s<1&&(i.attrs["fill-opacity"]=s)}return i}function Z_t(e){e.registerPainter("svg",q_t)}function iH(e,t,n){var r=Ff.createCanvas(),i=t.getWidth(),a=t.getHeight(),o=r.style;return o&&(o.position="absolute",o.left="0",o.top="0",o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",e)),r.width=i*n,r.height=a*n,r}var sI=function(e){gr(t,e);function t(n,r,i){var a=e.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var o;i=i||UM,typeof n=="string"?o=iH(n,r,i):se(n)&&(o=n,n=o.id),a.id=n,a.dom=o;var s=o.style;return s&&(kq(o),o.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),a.painter=r,a.dpr=i,a}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=iH("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},t.prototype.createRepaintRects=function(n,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var o=[],s=this.maxRepaintRectCount,l=!1,u=new Ae(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(o.length===0){var y=new Ae(0,0,0,0);y.copy(_),o.push(y)}else{for(var x=!1,S=1/0,b=0,w=0;w<o.length;++w){var A=o[w];if(A.intersect(_)){var T=new Ae(0,0,0,0);T.copy(A),T.union(_),o[w]=T,x=!0;break}else if(l){u.copy(_),u.union(A);var M=_.width*_.height,C=A.width*A.height,E=u.width*u.height,D=E-M-C;D<S&&(S=D,b=w)}}if(l&&(o[b].union(_),x=!0),!x){var y=new Ae(0,0,0,0);y.copy(_),o.push(y)}l||(l=o.length>=s)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var f=n[h];if(f){var d=f.shouldBePainted(i,a,!0,!0),p=f.__isRendered&&(f.__dirty&jo||!d)?f.getPrevPaintRect():null;p&&c(p);var v=d&&(f.__dirty&jo||!f.__isRendered)?f.getPaintRect():null;v&&c(v)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var f=r[h],d=f&&f.shouldBePainted(i,a,!0,!0);if(f&&(!d||!f.__zr)&&f.__isRendered){var p=f.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var h=0;h<o.length;){if(o[h].isZero()){o.splice(h,1);continue}for(var m=h+1;m<o.length;)o[h].intersect(o[m])?(g=!0,o[h].union(o[m]),o.splice(m,1)):m++;h++}}while(g);return this._paintRects=o,o},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(n,r){var i=this.dpr,a=this.dom,o=a.style,s=this.domBack;o&&(o.width=n+"px",o.height=r+"px"),a.width=n*i,a.height=r*i,s&&(s.width=n*i,s.height=r*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(n,r,i){var a=this.dom,o=this.ctx,s=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!n,c=this.lastFrameAlpha,h=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,s/h,l/h));var d=this.domBack;function p(v,g,m,_){if(o.clearRect(v,g,m,_),r&&r!=="transparent"){var y=void 0;if(KC(r)){var x=r.global||r.__width===m&&r.__height===_;y=x&&r.__canvasGradient||UO(o,r,{x:0,y:0,width:m,height:_}),r.__canvasGradient=y,r.__width=m,r.__height=_}else bft(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,y=VO(o,r,{dirty:function(){f.setUnpainted(),f.painter.refresh()}}));o.save(),o.fillStyle=y||r,o.fillRect(v,g,m,_),o.restore()}u&&(o.save(),o.globalAlpha=c,o.drawImage(d,v,g,m,_),o.restore())}!i||u?p(0,0,s,l):i.length&&R(i,function(v){p(v.x*h,v.y*h,v.width*h,v.height*h)})},t}(qs),aH=1e5,Yd=314159,nw=.01,J_t=.001;function Q_t(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function txt(e,t){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var ext=function(){function e(t,n,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=r=ut({},r||{}),this.dpr=r.devicePixelRatio||UM,this._singleCanvas=a,this.root=t;var o=t.style;o&&(kq(t),t.innerHTML=""),this.storage=n;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=t,h=c.width,f=c.height;r.width!=null&&(h=r.width),r.height!=null&&(f=r.height),this.dpr=r.devicePixelRatio||1,c.width=h*this.dpr,c.height=f*this.dpr,this._width=h,this._height=f;var d=new sI(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[Yd]=d,d.zlevel=Yd,s.push(Yd),this._domRoot=t}else{this._width=gm(t,0,r),this._height=gm(t,1,r);var u=this._domRoot=txt(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var n=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,r,t,this._redrawId);for(var a=0;a<i.length;a++){var o=i[a],s=this._layers[o];if(!s.__builtin__&&s.refresh){var l=a===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var n=t.length,r=this._hoverlayer;if(r&&r.clear(),!!n){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,o=0;o<n;o++){var s=t[o];s.__inHover&&(r||(r=this._hoverlayer=this.getLayer(aH)),a||(a=r.ctx,a.save()),Op(a,s,i,o===n-1))}a&&a.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(aH)},e.prototype.paintOne=function(t,n){SE(t,n)},e.prototype._paintList=function(t,n,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(t);var a=this._doPaintList(t,n,r),o=a.finished,s=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),o)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;cv(function(){l._paintList(t,n,r,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(Yd).ctx,n=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,n,r),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,n,r)})},e.prototype._doPaintList=function(t,n,r){for(var i=this,a=[],o=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var c=!0,h=!1,f=function(v){var g=a[v],m=g.ctx,_=o&&g.createRepaintRects(t,n,d._width,d._height),y=r?g.__startIndex:g.__drawIndex,x=!r&&g.incremental&&Date.now,S=x&&Date.now(),b=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,b,_);else if(y===g.__startIndex){var w=t[y];(!w.incremental||!w.notClear||r)&&g.clear(!1,b,_)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=g.__startIndex);var A,T=function(D){var I={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(A=y;A<g.__endIndex;A++){var L=t[A];if(L.__inHover&&(h=!0),i._doPaintEl(L,g,o,D,I,A===g.__endIndex-1),x){var P=Date.now()-S;if(P>15)break}}I.prevElClipPaths&&m.restore()};if(_)if(_.length===0)A=g.__endIndex;else for(var M=d.dpr,C=0;C<_.length;++C){var E=_[C];m.save(),m.beginPath(),m.rect(E.x*M,E.y*M,E.width*M,E.height*M),m.clip(),T(E),m.restore()}else m.save(),T(),m.restore();g.__drawIndex=A,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<a.length;p++)f(p);return qe.wxa&&R(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:h}},e.prototype._doPaintEl=function(t,n,r,i,a,o){var s=n.ctx;if(r){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Op(s,t,a,o),t.setPrevPaintRect(l))}else Op(s,t,a,o)},e.prototype.getLayer=function(t,n){this._singleCanvas&&!this._needsManuallyCompositing&&(t=Yd);var r=this._layers[t];return r||(r=new sI("zr_"+t,this,this.dpr),r.zlevel=t,r.__builtin__=!0,this._layerConfig[t]?Xt(r,this._layerConfig[t],!0):this._layerConfig[t-nw]&&Xt(r,this._layerConfig[t-nw],!0),n&&(r.virtual=n),this.insertLayer(t,r),r.initContext()),r},e.prototype.insertLayer=function(t,n){var r=this._layers,i=this._zlevelList,a=i.length,o=this._domRoot,s=null,l=-1;if(!r[t]&&Q_t(n)){if(a>0&&t>i[0]){for(l=0;l<a-1&&!(i[l]<t&&i[l+1]>t);l++);s=r[i[l]]}if(i.splice(l+1,0,t),r[t]=n,!n.virtual)if(s){var u=s.dom;u.nextSibling?o.insertBefore(n.dom,u.nextSibling):o.appendChild(n.dom)}else o.firstChild?o.insertBefore(n.dom,o.firstChild):o.appendChild(n.dom);n.painter||(n.painter=this)}},e.prototype.eachLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];t.call(n,this._layers[a],a)}},e.prototype.eachBuiltinLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__&&t.call(n,o,a)}},e.prototype.eachOtherLayer=function(t,n){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],o=this._layers[a];o.__builtin__||t.call(n,o,a)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(h,f){h.__dirty=h.__used=!1});function n(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<t.length;r++){var i=t[r];if(i.zlevel!==t[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,o=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,o=0),i.incremental?(c=this.getLayer(u+J_t,this._needsManuallyCompositing),c.incremental=!0,o=1):c=this.getLayer(u+(o>0?nw:0),this._needsManuallyCompositing),c.__builtin__||TB("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,n(l),a=c),i.__dirty&jo&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}n(l),this.eachBuiltinLayer(function(h,f){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,R(this._layers,function(n){n.setUnpainted()})},e.prototype.configLayer=function(t,n){if(n){var r=this._layerConfig;r[t]?Xt(r[t],n,!0):r[t]=n;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===t||a===t+nw){var o=this._layers[a];Xt(o,r[t],!0)}}}},e.prototype.delLayer=function(t){var n=this._layers,r=this._zlevelList,i=n[t];i&&(i.dom.parentNode.removeChild(i.dom),delete n[t],r.splice(Le(r,t),1))},e.prototype.resize=function(t,n){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(t!=null&&(i.width=t),n!=null&&(i.height=n),t=gm(a,0,i),n=gm(a,1,i),r.style.display="",this._width!==t||n!==this._height){r.style.width=t+"px",r.style.height=n+"px";for(var o in this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,n);this.refresh(!0)}this._width=t,this._height=n}else{if(t==null||n==null)return;this._width=t,this._height=n,this.getLayer(Yd).resize(t,n)}return this},e.prototype.clearLayer=function(t){var n=this._layers[t];n&&n.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[Yd].dom;var n=new sI("image",this,t.pixelRatio||this.dpr);n.initContext(),n.clear(!1,t.backgroundColor||this._backgroundColor);var r=n.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=n.dom.width,a=n.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,i,a):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Op(r,c,o,l===u-1)}return n.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();function IQ(e){e.registerPainter("canvas",ext)}var nxt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n){return Qu(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(n){var r=new he,i=Jr("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);r.add(i),i.setStyle(n.lineStyle);var a=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),s=a==="none"?"circle":a,l=n.itemHeight*.8,u=Jr(s,(n.itemWidth-l)/2,(n.itemHeight-l)/2,l,l,n.itemStyle.fill);r.add(u),u.setStyle(n.itemStyle);var c=n.iconRotate==="inherit"?o:n.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([n.itemWidth/2,n.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(bn);function hy(e,t){var n=e.mapDimensionsAll("defaultedLabel"),r=n.length;if(r===1){var i=uy(e,t,n[0]);return i!=null?i+"":null}else if(r){for(var a=[],o=0;o<n.length;o++)a.push(uy(e,t,n[o]));return a.join(" ")}}function LQ(e,t){var n=e.mapDimensionsAll("defaultedLabel");if(!ht(t))return t+"";for(var r=[],i=0;i<n.length;i++){var a=e.getDimensionIndex(n[i]);a>=0&&r.push(t[a])}return r.join(" ")}var C1=function(e){it(t,e);function t(n,r,i,a){var o=e.call(this)||this;return o.updateData(n,r,i,a),o}return t.prototype._createSymbol=function(n,r,i,a,o){this.removeAll();var s=Jr(n,-1,-1,2,2,null,o);s.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),s.drift=rxt,this._symbolType=n,this.add(s)},t.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){qc(this.childAt(0))},t.prototype.downplay=function(){Kc(this.childAt(0))},t.prototype.setZ=function(n,r){var i=this.childAt(0);i.zlevel=n,i.z=r},t.prototype.setDraggable=function(n,r){var i=this.childAt(0);i.draggable=n,i.cursor=!r&&n?"move":i.cursor},t.prototype.updateData=function(n,r,i,a){this.silent=!1;var o=n.getItemVisual(r,"symbol")||"circle",s=n.hostModel,l=t.getSymbolSize(n,r),u=o!==this._symbolType,c=a&&a.disableAnimation;if(u){var h=n.getItemVisual(r,"symbolKeepAspect");this._createSymbol(o,n,r,l,h)}else{var f=this.childAt(0);f.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?f.attr(d):Tn(f,d,s,r),Ol(f)}if(this._updateCommon(n,r,l,i,a),u){var f=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,xr(f,d,s,r)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(n,r,i,a,o){var s=this.childAt(0),l=n.hostModel,u,c,h,f,d,p,v,g,m;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,h=a.selectItemStyle,f=a.focus,d=a.blurScope,v=a.labelStatesModels,g=a.hoverScale,m=a.cursorStyle,p=a.emphasisDisabled),!a||n.hasItemOption){var _=a&&a.itemModel?a.itemModel:n.getItemModel(r),y=_.getModel("emphasis");u=y.getModel("itemStyle").getItemStyle(),h=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),f=y.get("focus"),d=y.get("blurScope"),p=y.get("disabled"),v=Fi(_),g=y.getShallow("scale"),m=_.getShallow("cursor")}var x=n.getItemVisual(r,"symbolRotate");s.attr("rotation",(x||0)*Math.PI/180||0);var S=Vv(n.getItemVisual(r,"symbolOffset"),i);S&&(s.x=S[0],s.y=S[1]),m&&s.attr("cursor",m);var b=n.getItemVisual(r,"style"),w=b.fill;if(s instanceof Wi){var A=s.style;s.useStyle(ut({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},b))}else s.__isEmptyBrush?s.useStyle(ut({},b)):s.useStyle(b),s.style.decal=null,s.setColor(w,o&&o.symbolInnerColor),s.style.strokeNoScale=!0;var T=n.getItemVisual(r,"liftZ"),M=this._z2;T!=null?M==null&&(this._z2=s.z2,s.z2+=T):M!=null&&(s.z2=M,this._z2=null);var C=o&&o.useNameLabel;ha(s,v,{labelFetcher:l,labelDataIndex:r,defaultText:E,inheritColor:w,defaultOpacity:b.opacity});function E(L){return C?n.getName(L):hy(n,L)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var D=s.ensureState("emphasis");D.style=u,s.ensureState("select").style=h,s.ensureState("blur").style=c;var I=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;D.scaleX=this._sizeX*I,D.scaleY=this._sizeY*I,this.setSymbolScale(1),Vr(this,f,d,p)},t.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},t.prototype.fadeOut=function(n,r,i){var a=this.childAt(0),o=fe(this).dataIndex,s=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&Uf(l,{style:{opacity:0}},r,{dataIndex:o,removeOpt:s,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Uf(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:o,cb:n,removeOpt:s})},t.getSymbolSize=function(n,r){return d0(n.getItemVisual(r,"symbolSize"))},t}(he);function rxt(e,t){this.parent.drift(e,t)}function lI(e,t,n,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&e.getItemVisual(n,"symbol")!=="none"}function oH(e){return e!=null&&!se(e)&&(e={isIgnore:e}),e||{}}function sH(e){var t=e.hostModel,n=t.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Fi(t),cursorStyle:t.get("cursor")}}var E1=function(){function e(t){this.group=new he,this._SymbolCtor=t||C1}return e.prototype.updateData=function(t,n){this._progressiveEls=null,n=oH(n);var r=this.group,i=t.hostModel,a=this._data,o=this._SymbolCtor,s=n.disableAnimation,l=sH(t),u={disableAnimation:s},c=n.getSymbolPoint||function(h){return t.getItemLayout(h)};a||r.removeAll(),t.diff(a).add(function(h){var f=c(h);if(lI(t,f,h,n)){var d=new o(t,h,l,u);d.setPosition(f),t.setItemGraphicEl(h,d),r.add(d)}}).update(function(h,f){var d=a.getItemGraphicEl(f),p=c(h);if(!lI(t,p,h,n)){r.remove(d);return}var v=t.getItemVisual(h,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)r.remove(d),d=new o(t,h,l,u),d.setPosition(p);else{d.updateData(t,h,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):Tn(d,m,i)}r.add(d),t.setItemGraphicEl(h,d)}).remove(function(h){var f=a.getItemGraphicEl(h);f&&f.fadeOut(function(){r.remove(f)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,n=this._data;n&&n.eachItemGraphicEl(function(r,i){var a=t._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=sH(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,n,r){this._progressiveEls=[],r=oH(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var o=n.getItemLayout(a);if(lI(n,o,a,r)){var s=new this._SymbolCtor(n,a,this._seriesScope);s.traverse(i),s.setPosition(o),this.group.add(s),n.setItemGraphicEl(a,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){sd(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var n=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(i){i.fadeOut(function(){n.remove(i)},r.hostModel)}):n.removeAll()},e}();function PQ(e,t,n){var r=e.getBaseAxis(),i=e.getOtherAxis(r),a=ixt(i,n),o=r.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(o),c=s==="x"||s==="radius"?1:0,h=yt(e.dimensions,function(p){return t.mapDimension(p)}),f=!1,d=t.getCalculationInfo("stackResultDimension");return Jc(t,h[0])&&(f=!0,h[0]=d),Jc(t,h[1])&&(f=!0,h[1]=d),{dataDimsForPoint:h,valueStart:a,valueAxisDim:s,baseAxisDim:o,stacked:!!f,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function ixt(e,t){var n=0,r=e.scale.getExtent();return t==="start"?n=r[0]:t==="end"?n=r[1]:xn(t)&&!isNaN(t)?n=t:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}function RQ(e,t,n,r){var i=NaN;e.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=e.valueStart);var a=e.baseDataOffset,o=[];return o[a]=n.get(e.baseDim,r),o[1-a]=i,t.dataToPoint(o)}function axt(e,t){var n=[];return t.diff(e).add(function(r){n.push({cmd:"+",idx:r})}).update(function(r,i){n.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){n.push({cmd:"-",idx:r})}).execute(),n}function oxt(e,t,n,r,i,a,o,s){for(var l=axt(e,t),u=[],c=[],h=[],f=[],d=[],p=[],v=[],g=PQ(i,t,o),m=e.getLayout("points")||[],_=t.getLayout("points")||[],y=0;y<l.length;y++){var x=l[y],S=!0,b=void 0,w=void 0;switch(x.cmd){case"=":b=x.idx*2,w=x.idx1*2;var A=m[b],T=m[b+1],M=_[w],C=_[w+1];(isNaN(A)||isNaN(T))&&(A=M,T=C),u.push(A,T),c.push(M,C),h.push(n[b],n[b+1]),f.push(r[w],r[w+1]),v.push(t.getRawIndex(x.idx1));break;case"+":var E=x.idx,D=g.dataDimsForPoint,I=i.dataToPoint([t.get(D[0],E),t.get(D[1],E)]);w=E*2,u.push(I[0],I[1]),c.push(_[w],_[w+1]);var L=RQ(g,i,t,E);h.push(L[0],L[1]),f.push(r[w],r[w+1]),v.push(t.getRawIndex(E));break;case"-":S=!1}S&&(d.push(x),p.push(p.length))}p.sort(function($,ot){return v[$]-v[ot]});for(var P=u.length,B=Tu(P),N=Tu(P),k=Tu(P),U=Tu(P),Z=[],y=0;y<p.length;y++){var nt=p[y],ct=y*2,K=nt*2;B[ct]=u[K],B[ct+1]=u[K+1],N[ct]=c[K],N[ct+1]=c[K+1],k[ct]=h[K],k[ct+1]=h[K+1],U[ct]=f[K],U[ct+1]=f[K+1],Z[y]=d[nt]}return{current:B,next:N,stackedOnCurrent:k,stackedOnNext:U,status:Z}}var zh=Math.min,Uh=Math.max;function nv(e,t){return isNaN(e)||isNaN(t)}function JO(e,t,n,r,i,a,o,s,l){for(var u,c,h,f,d,p,v=n,g=0;g<r;g++){var m=t[v*2],_=t[v*2+1];if(v>=i||v<0)break;if(nv(m,_)){if(l){v+=a;continue}break}if(v===n)e[a>0?"moveTo":"lineTo"](m,_),h=m,f=_;else{var y=m-u,x=_-c;if(y*y+x*x<.5){v+=a;continue}if(o>0){for(var S=v+a,b=t[S*2],w=t[S*2+1];b===m&&w===_&&g<r;)g++,S+=a,v+=a,b=t[S*2],w=t[S*2+1],m=t[v*2],_=t[v*2+1],y=m-u,x=_-c;var A=g+1;if(l)for(;nv(b,w)&&A<r;)A++,S+=a,b=t[S*2],w=t[S*2+1];var T=.5,M=0,C=0,E=void 0,D=void 0;if(A>=r||nv(b,w))d=m,p=_;else{M=b-u,C=w-c;var I=m-u,L=b-m,P=_-c,B=w-_,N=void 0,k=void 0;if(s==="x"){N=Math.abs(I),k=Math.abs(L);var U=M>0?1:-1;d=m-U*N*o,p=_,E=m+U*k*o,D=_}else if(s==="y"){N=Math.abs(P),k=Math.abs(B);var Z=C>0?1:-1;d=m,p=_-Z*N*o,E=m,D=_+Z*k*o}else N=Math.sqrt(I*I+P*P),k=Math.sqrt(L*L+B*B),T=k/(k+N),d=m-M*o*(1-T),p=_-C*o*(1-T),E=m+M*o*T,D=_+C*o*T,E=zh(E,Uh(b,m)),D=zh(D,Uh(w,_)),E=Uh(E,zh(b,m)),D=Uh(D,zh(w,_)),M=E-m,C=D-_,d=m-M*N/k,p=_-C*N/k,d=zh(d,Uh(u,m)),p=zh(p,Uh(c,_)),d=Uh(d,zh(u,m)),p=Uh(p,zh(c,_)),M=m-d,C=_-p,E=m+M*k/N,D=_+C*k/N}e.bezierCurveTo(h,f,d,p,m,_),h=E,f=D}else e.lineTo(m,_)}u=m,c=_,v+=a}return g}var OQ=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),sxt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="ec-polyline",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new OQ},t.prototype.buildPath=function(n,r){var i=r.points,a=0,o=i.length/2;if(r.connectNulls){for(;o>0&&nv(i[o*2-2],i[o*2-1]);o--);for(;a<o&&nv(i[a*2],i[a*2+1]);a++);}for(;a<o;)a+=JO(n,i,a,o,o,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(n,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,o=zu.CMD,s,l,u=r==="x",c=[],h=0;h<a.length;){var f=a[h++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,_=void 0,y=void 0;switch(f){case o.M:s=a[h++],l=a[h++];break;case o.L:if(d=a[h++],p=a[h++],y=u?(n-s)/(d-s):(n-l)/(p-l),y<=1&&y>=0){var x=u?(p-l)*y+l:(d-s)*y+s;return u?[n,x]:[x,n]}s=d,l=p;break;case o.C:d=a[h++],p=a[h++],v=a[h++],g=a[h++],m=a[h++],_=a[h++];var S=u?BM(s,d,v,m,n,c):BM(l,p,g,_,n,c);if(S>0)for(var b=0;b<S;b++){var w=c[b];if(w<=1&&w>=0){var x=u?Si(l,p,g,_,w):Si(s,d,v,m,w);return u?[n,x]:[x,n]}}s=m,l=_;break}}},t}(Ve),lxt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(OQ),NQ=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="ec-polygon",r}return t.prototype.getDefaultShape=function(){return new lxt},t.prototype.buildPath=function(n,r){var i=r.points,a=r.stackedOnPoints,o=0,s=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;s>0&&nv(i[s*2-2],i[s*2-1]);s--);for(;o<s&&nv(i[o*2],i[o*2+1]);o++);}for(;o<s;){var u=JO(n,i,o,s,s,1,r.smooth,l,r.connectNulls);JO(n,a,o+u-1,u,s,-1,r.stackedOnSmooth,l,r.connectNulls),o+=u+1,n.closePath()}},t}(Ve);function BQ(e,t,n,r,i){var a=e.getArea(),o=a.x,s=a.y,l=a.width,u=a.height,c=n.get(["lineStyle","width"])||2;o-=c/2,s-=c/2,l+=c,u+=c,l=Math.ceil(l),o!==Math.floor(o)&&(o=Math.floor(o),l++);var h=new nn({shape:{x:o,y:s,width:l,height:u}});if(t){var f=e.getBaseAxis(),d=f.isHorizontal(),p=f.inverse;d?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=u),h.shape.height=0);var v=ae(i)?function(g){i(g,h)}:null;xr(h,{shape:{width:l,height:u,x:o,y:s}},n,null,r,v)}return h}function kQ(e,t,n){var r=e.getArea(),i=_r(r.r0,1),a=_r(r.r,1),o=new Xa({shape:{cx:_r(e.cx,1),cy:_r(e.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?o.shape.endAngle=r.startAngle:o.shape.r=i,xr(o,{shape:{endAngle:r.endAngle,r:a}},n)}return o}function D1(e,t,n,r,i){if(e){if(e.type==="polar")return kQ(e,t,n);if(e.type==="cartesian2d")return BQ(e,t,n,r,i)}else return null;return null}function Hv(e,t){return e.type===t}function lH(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return;return!0}}function uH(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<e.length;){var o=e[a++],s=e[a++];isNaN(o)||(t=Math.min(o,t),r=Math.max(o,r)),isNaN(s)||(n=Math.min(s,n),i=Math.max(s,i))}return[[t,n],[r,i]]}function cH(e,t){var n=uH(e),r=n[0],i=n[1],a=uH(t),o=a[0],s=a[1];return Math.max(Math.abs(r[0]-o[0]),Math.abs(r[1]-o[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function hH(e){return xn(e)?e:e?.5:0}function uxt(e,t,n){if(!n.valueDim)return[];for(var r=t.count(),i=Tu(r*2),a=0;a<r;a++){var o=RQ(n,e,t,a);i[a*2]=o[0],i[a*2+1]=o[1]}return i}function Vh(e,t,n,r){var i=t.getBaseAxis(),a=i.dim==="x"||i.dim==="radius"?0:1,o=[],s=0,l=[],u=[],c=[],h=[];if(r){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&h.push(e[s],e[s+1]);e=h}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],o.push(u[0],u[1]),n){case"end":l[a]=c[a],l[1-a]=u[1-a],o.push(l[0],l[1]);break;case"middle":var f=(u[a]+c[a])/2,d=[];l[a]=d[a]=f,l[1-a]=u[1-a],d[1-a]=c[1-a],o.push(l[0],l[1]),o.push(d[0],d[1]);break;default:l[a]=u[a],l[1-a]=c[1-a],o.push(l[0],l[1])}return o.push(e[s++],e[s++]),o}function cxt(e,t){var n=[],r=e.length,i,a;function o(c,h,f){var d=c.coord,p=(f-d)/(h.coord-d),v=odt(p,[c.color,h.color]);return{coord:f,color:v}}for(var s=0;s<r;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){a?n.push(o(a,l,t)):i&&n.push(o(i,l,0),o(i,l,t));break}else i&&(n.push(o(i,l,0)),i=null),n.push(l),a=l}return n}function hxt(e,t,n){var r=e.getVisual("visualMeta");if(!(!r||!r.length||!e.count())&&t.type==="cartesian2d"){for(var i,a,o=r.length-1;o>=0;o--){var s=e.getDimensionInfo(r[o].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){a=r[o];break}}if(a){var l=t.getAxis(i),u=yt(a.stops,function(y){return{coord:l.toGlobalCoord(l.dataToCoord(y.value)),color:y.color}}),c=u.length,h=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),h.reverse());var f=cxt(u,i==="x"?n.getWidth():n.getHeight()),d=f.length;if(!d&&c)return u[0].coord<0?h[1]?h[1]:u[c-1].color:h[0]?h[0]:u[0].color;var p=10,v=f[0].coord-p,g=f[d-1].coord+p,m=g-v;if(m<.001)return"transparent";R(f,function(y){y.offset=(y.coord-v)/m}),f.push({offset:d?f[d-1].offset:.5,color:h[1]||"transparent"}),f.unshift({offset:d?f[0].offset:.5,color:h[0]||"transparent"});var _=new x1(0,0,0,0,f,!0);return _[i]=v,_[i+"2"]=g,_}}}function fxt(e,t,n){var r=e.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=n.getAxesByScale("ordinal")[0];if(a&&!(i&&dxt(a,t))){var o=t.mapDimension(a.dim),s={};return R(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(o,l))}}}}function dxt(e,t){var n=e.getExtent(),r=Math.abs(n[1]-n[0])/e.scale.count();isNaN(r)&&(r=0);for(var i=t.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(C1.getSymbolSize(t,o)[e.isHorizontal()?1:0]*1.5>r)return!1;return!0}function pxt(e,t){return isNaN(e)||isNaN(t)}function vxt(e){for(var t=e.length/2;t>0&&pxt(e[t*2-2],e[t*2-1]);t--);return t-1}function fH(e,t){return[e[t*2],e[t*2+1]]}function gxt(e,t,n){for(var r=e.length/2,i=n==="x"?0:1,a,o,s=0,l=-1,u=0;u<r;u++)if(o=e[u*2+i],!(isNaN(o)||isNaN(e[u*2+1-i]))){if(u===0){a=o;continue}if(a<=t&&o>=t||a>=t&&o<=t){l=u;break}s=u,a=o}return{range:[s,l],t:(t-a)/(o-a)}}function FQ(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<$a.length;t++)if(e.get([$a[t],"endLabel","show"]))return!0;return!1}function uI(e,t,n,r){if(Hv(t,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),o=r.getData(),s={lastFrameIndex:0},l=FQ(r)?function(d,p){e._endLabelOnDuring(d,p,o,s,a,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=BQ(t,n,r,function(){var d=e._endLabel;d&&n&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!r.get("clip",!0)){var h=c.shape,f=Math.max(h.width,h.height);u?(h.y-=f,h.height+=f*2):(h.x-=f,h.width+=f*2)}return l&&l(1,c),c}else return kQ(t,n,r)}function mxt(e,t){var n=t.getBaseAxis(),r=n.isHorizontal(),i=n.inverse,a=r?i?"right":"left":"center",o=r?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||a,verticalAlign:e.get("verticalAlign")||o}}}var yxt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var n=new he,r=new E1;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=n},t.prototype.render=function(n,r,i){var a=this,o=n.coordinateSystem,s=this.group,l=n.getData(),u=n.getModel("lineStyle"),c=n.getModel("areaStyle"),h=l.getLayout("points")||[],f=o.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,_=!r.ssr&&n.get("animation"),y=!c.isEmpty(),x=c.get("origin"),S=PQ(o,l,x),b=y&&uxt(o,l,S),w=n.get("showSymbol"),A=n.get("connectNulls"),T=w&&!f&&fxt(n,l,o),M=this._data;M&&M.eachItemGraphicEl(function(ot,tt){ot.__temp&&(s.remove(ot),M.setItemGraphicEl(tt,null))}),w||p.remove(),s.add(m);var C=f?!1:n.get("step"),E;o&&o.getArea&&n.get("clip",!0)&&(E=o.getArea(),E.width!=null?(E.x-=.1,E.y-=.1,E.width+=.2,E.height+=.2):E.r0&&(E.r0-=.5,E.r+=.5)),this._clipShapeForSymbol=E;var D=hxt(l,o,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===o.type&&C===this._step))w&&p.updateData(l,{isIgnore:T,clipShape:E,disableAnimation:!0,getSymbolPoint:function(ot){return[h[ot*2],h[ot*2+1]]}}),_&&this._initSymbolLabelAnimation(l,o,E),C&&(h=Vh(h,o,C,A),b&&(b=Vh(b,o,C,A))),v=this._newPolyline(h),y?g=this._newPolygon(h,b):g&&(m.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,o,vv(D)),m.setClipPath(uI(this,o,!0,n));else{y&&!g?g=this._newPolygon(h,b):g&&!y&&(m.remove(g),g=this._polygon=null),f||this._initOrUpdateEndLabel(n,o,vv(D));var I=m.getClipPath();if(I){var L=uI(this,o,!1,n);xr(I,{shape:L.shape},n)}else m.setClipPath(uI(this,o,!0,n));w&&p.updateData(l,{isIgnore:T,clipShape:E,disableAnimation:!0,getSymbolPoint:function(ot){return[h[ot*2],h[ot*2+1]]}}),(!lH(this._stackedOnPoints,b)||!lH(this._points,h))&&(_?this._doUpdateAnimation(l,b,o,i,C,x,A):(C&&(h=Vh(h,o,C,A),b&&(b=Vh(b,o,C,A))),v.setShape({points:h}),g&&g.setShape({points:h,stackedOnPoints:b})))}var P=n.getModel("emphasis"),B=P.get("focus"),N=P.get("blurScope"),k=P.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:D,lineJoin:"bevel"})),ca(v,n,"lineStyle"),v.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var U=v.getState("emphasis").style;U.lineWidth=+v.style.lineWidth+1}fe(v).seriesIndex=n.seriesIndex,Vr(v,B,N,k);var Z=hH(n.get("smooth")),nt=n.get("smoothMonotone");if(v.setShape({smooth:Z,smoothMonotone:nt,connectNulls:A}),g){var ct=l.getCalculationInfo("stackedOnSeries"),K=0;g.useStyle(te(c.getAreaStyle(),{fill:D,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),ct&&(K=hH(ct.get("smooth"))),g.setShape({smooth:Z,stackedOnSmooth:K,smoothMonotone:nt,connectNulls:A}),ca(g,n,"areaStyle"),fe(g).seriesIndex=n.seriesIndex,Vr(g,B,N,k)}var $=function(ot){a._changePolyState(ot)};l.eachItemGraphicEl(function(ot){ot&&(ot.onHoverStateChange=$)}),this._polyline.onHoverStateChange=$,this._data=l,this._coordSys=o,this._stackedOnPoints=b,this._points=h,this._step=C,this._valueOrigin=x,n.get("triggerLineEvent")&&(this.packEventData(n,v),g&&this.packEventData(n,g))},t.prototype.packEventData=function(n,r){fe(r).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},t.prototype.highlight=function(n,r,i,a){var o=n.getData(),s=fv(o,a);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=o.getLayout("points"),u=o.getItemGraphicEl(s);if(!u){var c=l[s*2],h=l[s*2+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var f=n.get("zlevel")||0,d=n.get("z")||0;u=new C1(o,s),u.x=c,u.y=h,u.setZ(f,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=f,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,o.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else hn.prototype.highlight.call(this,n,r,i,a)},t.prototype.downplay=function(n,r,i,a){var o=n.getData(),s=fv(o,a);if(this._changePolyState("normal"),s!=null&&s>=0){var l=o.getItemGraphicEl(s);l&&(l.__temp?(o.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else hn.prototype.downplay.call(this,n,r,i,a)},t.prototype._changePolyState=function(n){var r=this._polygon;HM(this._polyline,n),r&&HM(r,n)},t.prototype._newPolyline=function(n){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new sxt({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(n,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new NQ({shape:{points:n,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(n,r,i){var a,o,s=r.getBaseAxis(),l=s.inverse;r.type==="cartesian2d"?(a=s.isHorizontal(),o=!1):r.type==="polar"&&(a=s.dim==="angle",o=!0);var u=n.hostModel,c=u.get("animationDuration");ae(c)&&(c=c(null));var h=u.get("animationDelay")||0,f=ae(h)?h(null):h;n.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,_=void 0,y=void 0;if(i)if(o){var x=i,S=r.pointToCoord(g);a?(m=x.startAngle,_=x.endAngle,y=-S[1]/180*Math.PI):(m=x.r0,_=x.r,y=S[0])}else{var b=i;a?(m=b.x,_=b.x+b.width,y=d.x):(m=b.y+b.height,_=b.y,y=d.y)}var w=_===m?0:(y-m)/(_-m);l&&(w=1-w);var A=ae(h)?h(p):c*w+f,T=v.getSymbolPath(),M=T.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:A}),T.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(n,r,i){var a=n.getModel("endLabel");if(FQ(n)){var o=n.getData(),s=this._polyline,l=o.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Qe({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=vxt(l);c>=0&&(ha(s,Fi(n,"endLabel"),{inheritColor:i,labelFetcher:n,labelDataIndex:c,defaultText:function(h,f,d){return d!=null?LQ(o,d):hy(o,h)},enableTextSetter:!0},mxt(a,r)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(n,r,i,a,o,s,l){var u=this._endLabel,c=this._polyline;if(u){n<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var h=i.getLayout("points"),f=i.hostModel,d=f.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),_=g.inverse,y=r.shape,x=_?m?y.x:y.y+y.height:m?y.x+y.width:y.y,S=(m?v:0)*(_?-1:1),b=(m?0:-v)*(_?-1:1),w=m?"x":"y",A=gxt(h,x,w),T=A.range,M=T[1]-T[0],C=void 0;if(M>=1){if(M>1&&!d){var E=fH(h,T[0]);u.attr({x:E[0]+S,y:E[1]+b}),o&&(C=f.getRawValue(T[0]))}else{var E=c.getPointOn(x,w);E&&u.attr({x:E[0]+S,y:E[1]+b});var D=f.getRawValue(T[0]),I=f.getRawValue(T[1]);o&&(C=bK(i,p,D,I,A.t))}a.lastFrameIndex=T[0]}else{var L=n===1||a.lastFrameIndex>0?T[0]:0,E=fH(h,L);o&&(C=f.getRawValue(L)),u.attr({x:E[0]+S,y:E[1]+b})}if(o){var P=a0(u);typeof P.setLabelText=="function"&&P.setLabelText(C)}}},t.prototype._doUpdateAnimation=function(n,r,i,a,o,s,l){var u=this._polyline,c=this._polygon,h=n.hostModel,f=oxt(this._data,n,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),d=f.current,p=f.stackedOnCurrent,v=f.next,g=f.stackedOnNext;if(o&&(d=Vh(f.current,i,o,l),p=Vh(f.stackedOnCurrent,i,o,l),v=Vh(f.next,i,o,l),g=Vh(f.stackedOnNext,i,o,l)),cH(d,v)>3e3||c&&cH(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=f.current,u.shape.points=d;var m={shape:{points:v}};f.current!==d&&(m.shape.__points=f.next),u.stopAnimation(),Tn(u,m,h),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),Tn(c,{shape:{stackedOnPoints:g}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var _=[],y=f.status,x=0;x<y.length;x++){var S=y[x].cmd;if(S==="="){var b=n.getItemGraphicEl(y[x].idx1);b&&_.push({el:b,ptIdx:x})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var w=u.shape.__points,A=0;A<_.length;A++){var T=_[A].el,M=_[A].ptIdx*2;T.x=w[M],T.y=w[M+1],T.markRedraw()}})},t.prototype.remove=function(n){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,o){a.__temp&&(r.remove(a),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(hn);function I1(e,t){return{seriesType:e,plan:h0(),reset:function(n){var r=n.getData(),i=n.coordinateSystem,a=n.pipelineContext,o=t||a.large;if(i){var s=yt(i.dimensions,function(d){return r.mapDimension(d)}).slice(0,2),l=s.length,u=r.getCalculationInfo("stackResultDimension");Jc(r,s[0])&&(s[0]=u),Jc(r,s[1])&&(s[1]=u);var c=r.getStore(),h=r.getDimensionIndex(s[0]),f=r.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=o&&Tu(v*l),m=[],_=[],y=d.start,x=0;y<d.end;y++){var S=void 0;if(l===1){var b=c.get(h,y);S=i.dataToPoint(b,null,_)}else m[0]=c.get(h,y),m[1]=c.get(f,y),S=i.dataToPoint(m,null,_);o?(g[x++]=S[0],g[x++]=S[1]):p.setItemLayout(y,S.slice())}o&&p.setLayout("points",g)}}}}}}var _xt={average:function(e){for(var t=0,n=0,r=0;r<e.length;r++)isNaN(e[r])||(t+=e[r],n++);return n===0?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},minmax:function(e){for(var t=-1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r],a=Math.abs(i);a>t&&(t=a,n=i)}return isFinite(n)?n:NaN},nearest:function(e){return e[0]}},xxt=function(e){return Math.round(e.length/2)};function zQ(e){return{seriesType:e,reset:function(t,n,r){var i=t.getData(),a=t.get("sampling"),o=t.coordinateSystem,s=i.count();if(s>10&&o.type==="cartesian2d"&&a){var l=o.getBaseAxis(),u=o.getOtherAxis(l),c=l.getExtent(),h=r.getDevicePixelRatio(),f=Math.abs(c[1]-c[0])*(h||1),d=Math.round(s/f);if(isFinite(d)&&d>1){a==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Ft(a)?p=_xt[a]:ae(a)&&(p=a),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,xxt))}}}}}function bxt(e){e.registerChartView(yxt),e.registerSeriesModel(nxt),e.registerLayout(I1("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var n=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",r)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,zQ("line"))}var bb=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,r){return Qu(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(n,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var o=a.clampData(n),s=a.dataToPoint(o);if(i)R(a.getAxes(),function(f,d){if(f.type==="category"&&r!=null){var p=f.getTicksCoords(),v=f.getTickModel().get("alignWithLabel"),g=o[d],m=r[d]==="x1"||r[d]==="y1";if(m&&!v&&(g+=1),p.length<2)return;if(p.length===2){s[d]=f.toGlobalCoord(f.getExtent()[m?1:0]);return}for(var _=void 0,y=void 0,x=1,S=0;S<p.length;S++){var b=p[S].coord,w=S===p.length-1?p[S-1].tickValue+x:p[S].tickValue;if(w===g){y=b;break}else if(w<g)_=b;else if(_!=null&&w>g){y=(b+_)/2;break}S===1&&(x=w-p[0].tickValue)}y==null&&(_?_&&(y=p[p.length-1].coord):y=p[0].coord),s[d]=f.toGlobalCoord(y)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),h=a.getBaseAxis().isHorizontal()?0:1;s[h]+=u+c/2}return s}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(bn);bn.registerClass(bb);var Sxt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(){return Qu(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>n&&(n=r),n},t.prototype.brushSelector=function(n,r,i){return i.rect(r.getItemLayout(n))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=ld(bb.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(bb),wxt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),cA=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="sausage",r}return t.prototype.getDefaultShape=function(){return new wxt},t.prototype.buildPath=function(n,r){var i=r.cx,a=r.cy,o=Math.max(r.r0||0,0),s=Math.max(r.r,0),l=(s-o)*.5,u=o+l,c=r.startAngle,h=r.endAngle,f=r.clockwise,d=Math.PI*2,p=f?h-c<d:c-h<d;p||(c=h-(f?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(h),_=Math.sin(h);p?(n.moveTo(v*o+i,g*o+a),n.arc(v*u+i,g*u+a,l,-Math.PI+c,c,!f)):n.moveTo(v*s+i,g*s+a),n.arc(i,a,s,c,h,!f),n.arc(m*u+i,_*u+a,l,h-Math.PI*2,h-Math.PI,!f),o!==0&&n.arc(i,a,o,h,c,f)},t}(Ve);function Txt(e,t){t=t||{};var n=t.isRoundCap;return function(r,i,a){var o=i.position;if(!o||o instanceof Array)return VM(r,i,a);var s=e(o),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,h=u.cy,f=u.r,d=u.r0,p=(f+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,_=n?Math.abs(f-d)/2:0,y=Math.cos,x=Math.sin,S=c+f*y(v),b=h+f*x(v),w="left",A="top";switch(s){case"startArc":S=c+(d-l)*y(m),b=h+(d-l)*x(m),w="center",A="top";break;case"insideStartArc":S=c+(d+l)*y(m),b=h+(d+l)*x(m),w="center",A="bottom";break;case"startAngle":S=c+p*y(v)+rw(v,l+_,!1),b=h+p*x(v)+iw(v,l+_,!1),w="right",A="middle";break;case"insideStartAngle":S=c+p*y(v)+rw(v,-l+_,!1),b=h+p*x(v)+iw(v,-l+_,!1),w="left",A="middle";break;case"middle":S=c+p*y(m),b=h+p*x(m),w="center",A="middle";break;case"endArc":S=c+(f+l)*y(m),b=h+(f+l)*x(m),w="center",A="bottom";break;case"insideEndArc":S=c+(f-l)*y(m),b=h+(f-l)*x(m),w="center",A="top";break;case"endAngle":S=c+p*y(g)+rw(g,l+_,!0),b=h+p*x(g)+iw(g,l+_,!0),w="left",A="middle";break;case"insideEndAngle":S=c+p*y(g)+rw(g,-l+_,!0),b=h+p*x(g)+iw(g,-l+_,!0),w="right",A="middle";break;default:return VM(r,i,a)}return r=r||{},r.x=S,r.y=b,r.align=w,r.verticalAlign=A,r}}function Mxt(e,t,n,r){if(xn(r)){e.setTextConfig({rotation:r});return}else if(ht(t)){e.setTextConfig({rotation:0});return}var i=e.shape,a=i.clockwise?i.startAngle:i.endAngle,o=i.clockwise?i.endAngle:i.startAngle,s=(a+o)/2,l,u=n(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=o;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function rw(e,t,n){return t*Math.sin(e)*(n?-1:1)}function iw(e,t,n){return t*Math.cos(e)*(n?1:-1)}function Np(e,t,n){var r=e.get("borderRadius");if(r==null)return n?{cornerRadius:0}:null;ht(r)||(r=[r,r,r,r]);var i=Math.abs(t.r||0-t.r0||0);return{cornerRadius:yt(r,function(a){return Rl(a,i)})}}var cI=Math.max,hI=Math.min;function Axt(e,t){var n=e.getArea&&e.getArea();if(Hv(e,"cartesian2d")){var r=e.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=t.getLayout("bandWidth");r.isHorizontal()?(n.x-=i,n.width+=i*2):(n.y-=i,n.height+=i*2)}}return n}var Cxt=function(e){it(t,e);function t(){var n=e.call(this)||this;return n.type=t.type,n._isFirstFrame=!0,n}return t.prototype.render=function(n,r,i,a){this._model=n,this._removeOnRenderedListener(i),this._updateDrawMode(n);var o=n.get("coordinateSystem");(o==="cartesian2d"||o==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,r,i):this._renderNormal(n,r,i,a))},t.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},t.prototype.incrementalRender=function(n,r){this._progressiveEls=[],this._incrementalRenderLarge(n,r)},t.prototype.eachRendered=function(n){sd(this._progressiveEls||this.group,n)},t.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(n,r,i,a){var o=this.group,s=n.getData(),l=this._data,u=n.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var f=n.isAnimationEnabled()?n:null,d=Ext(n,u);d&&this._enableRealtimeSort(d,s,i);var p=n.get("clip",!0)||d,v=Axt(u,s);o.removeClipPath();var g=n.get("roundCap",!0),m=n.get("showBackground",!0),_=n.getModel("backgroundStyle"),y=_.get("borderRadius")||0,x=[],S=this._backgroundEls,b=a&&a.isInitSort,w=a&&a.type==="changeAxisOrder";function A(C){var E=aw[u.type](s,C),D=Nxt(u,h,E);return D.useStyle(_.getItemStyle()),u.type==="cartesian2d"?D.setShape("r",y):D.setShape("cornerRadius",y),x[C]=D,D}s.diff(l).add(function(C){var E=s.getItemModel(C),D=aw[u.type](s,C,E);if(m&&A(C),!(!s.hasValue(C)||!mH[u.type](D))){var I=!1;p&&(I=dH[u.type](v,D));var L=pH[u.type](n,s,C,D,h,f,c.model,!1,g);d&&(L.forceLabelAnimation=!0),yH(L,s,C,E,D,n,h,u.type==="polar"),b?L.attr({shape:D}):d?vH(d,f,L,D,C,h,!1,!1):xr(L,{shape:D},n,C),s.setItemGraphicEl(C,L),o.add(L),L.ignore=I}}).update(function(C,E){var D=s.getItemModel(C),I=aw[u.type](s,C,D);if(m){var L=void 0;S.length===0?L=A(E):(L=S[E],L.useStyle(_.getItemStyle()),u.type==="cartesian2d"?L.setShape("r",y):L.setShape("cornerRadius",y),x[C]=L);var P=aw[u.type](s,C),B=VQ(h,P,u);Tn(L,{shape:B},f,C)}var N=l.getItemGraphicEl(E);if(!s.hasValue(C)||!mH[u.type](I)){o.remove(N);return}var k=!1;if(p&&(k=dH[u.type](v,I),k&&o.remove(N)),N?Ol(N):N=pH[u.type](n,s,C,I,h,f,c.model,!!N,g),d&&(N.forceLabelAnimation=!0),w){var U=N.getTextContent();if(U){var Z=a0(U);Z.prevValue!=null&&(Z.prevValue=Z.value)}}else yH(N,s,C,D,I,n,h,u.type==="polar");b?N.attr({shape:I}):d?vH(d,f,N,I,C,h,!0,w):Tn(N,{shape:I},n,C,null),s.setItemGraphicEl(C,N),N.ignore=k,o.add(N)}).remove(function(C){var E=l.getItemGraphicEl(C);E&&hb(E,n,C)}).execute();var T=this._backgroundGroup||(this._backgroundGroup=new he);T.removeAll();for(var M=0;M<x.length;++M)T.add(x[M]);o.add(T),this._backgroundEls=x,this._data=s},t.prototype._renderLarge=function(n,r,i){this._clear(),xH(n,this.group),this._updateLargeClip(n)},t.prototype._incrementalRenderLarge=function(n,r){this._removeBackground(),xH(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(n){var r=n.get("clip",!0)&&D1(n.coordinateSystem,!1,n),i=this.group;r?i.setClipPath(r):i.removeClipPath()},t.prototype._enableRealtimeSort=function(n,r,i){var a=this;if(r.count()){var o=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,n,i),this._isFirstFrame=!1;else{var s=function(l){var u=r.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(o.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,s,o,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(n,r,i){var a=[];return n.each(n.mapDimension(r.dim),function(o,s){var l=i(s);l=l??NaN,a.push({dataIndex:s,mappedValue:l,ordinalNumber:o})}),a.sort(function(o,s){return s.mappedValue-o.mappedValue}),{ordinalNumbers:yt(a,function(o){return o.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(n,r,i){for(var a=i.scale,o=n.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=n.rawIndexOf(o,a.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:r(n.indexOfRawIndex(c));if(h>s)return!0;s=h}return!1},t.prototype._isOrderDifferentInView=function(n,r){for(var i=r.scale,a=i.getExtent(),o=Math.max(0,a[0]),s=Math.min(a[1],i.getOrdinalMeta().categories.length-1);o<=s;++o)if(n.ordinalNumbers[o]!==i.getRawOrdinalNumber(o))return!0},t.prototype._updateSortWithinSameData=function(n,r,i,a){if(this._isOrderChangedWithinSameData(n,r,i)){var o=this._dataSort(n,i,r);this._isOrderDifferentInView(o,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:o}))}},t.prototype._dispatchInitSort=function(n,r,i){var a=r.baseAxis,o=this._dataSort(n,a,function(s){return n.get(n.mapDimension(r.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:o})},t.prototype.remove=function(n,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(n,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(n){var r=this.group,i=this._data;n&&n.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){hb(a,n,fe(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(hn),dH={cartesian2d:function(e,t){var n=t.width<0?-1:1,r=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,a=e.y+e.height,o=cI(t.x,e.x),s=hI(t.x+t.width,i),l=cI(t.y,e.y),u=hI(t.y+t.height,a),c=s<o,h=u<l;return t.x=c&&o>i?s:o,t.y=h&&l>a?u:l,t.width=c?0:s-o,t.height=h?0:u-l,n<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),c||h},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}var i=hI(t.r,e.r),a=cI(t.r0,e.r0);t.r=i,t.r0=a;var o=i-a<0;if(n<0){var r=t.r;t.r=t.r0,t.r0=r}return o}},pH={cartesian2d:function(e,t,n,r,i,a,o,s,l){var u=new nn({shape:ut({},r),z2:1});if(u.__dataIndex=n,u.name="item",a){var c=u.shape,h=i?"height":"width";c[h]=0}return u},polar:function(e,t,n,r,i,a,o,s,l){var u=!i&&l?cA:Xa,c=new u({shape:r,z2:1});c.name="item";var h=UQ(i);if(c.calculateTextPosition=Txt(h,{isRoundCap:u===cA}),a){var f=c.shape,d=i?"r":"endAngle",p={};f[d]=i?r.r0:r.startAngle,p[d]=r[d],(s?Tn:xr)(c,{shape:p},a)}return c}};function Ext(e,t){var n=e.get("realtimeSort",!0),r=t.getBaseAxis();if(n&&r.type==="category"&&t.type==="cartesian2d")return{baseAxis:r,otherAxis:t.getOtherAxis(r)}}function vH(e,t,n,r,i,a,o,s){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),s||(o?Tn:xr)(n,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(o?Tn:xr)(n,{shape:u},c,i)}function gH(e,t){for(var n=0;n<t.length;n++)if(!isFinite(e[t[n]]))return!0;return!1}var Dxt=["x","y","width","height"],Ixt=["cx","cy","r","startAngle","endAngle"],mH={cartesian2d:function(e){return!gH(e,Dxt)},polar:function(e){return!gH(e,Ixt)}},aw={cartesian2d:function(e,t,n){var r=e.getItemLayout(t),i=n?Pxt(n,r):0,a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(e,t,n){var r=e.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function Lxt(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function UQ(e){return function(t){var n=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+n;default:return r}}}(e)}function yH(e,t,n,r,i,a,o,s){var l=t.getItemVisual(n,"style");if(s){if(!a.get("roundCap")){var c=e.shape,h=Np(r.getModel("itemStyle"),c,!0);ut(c,h),e.setShape(c)}}else{var u=r.get(["itemStyle","borderRadius"])||0;e.setShape("r",u)}e.useStyle(l);var f=r.getShallow("cursor");f&&e.attr("cursor",f);var d=s?o?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":o?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=Fi(r);ha(e,p,{labelFetcher:a,labelDataIndex:n,defaultText:hy(a.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var v=e.getTextContent();if(s&&v){var g=r.get(["label","position"]);e.textConfig.inside=g==="middle"?!0:null,Mxt(e,g==="outside"?d:g,UQ(o),r.get(["label","rotate"]))}iZ(v,p,a.getRawValue(n),function(_){return LQ(t,_)});var m=r.getModel(["emphasis"]);Vr(e,m.get("focus"),m.get("blurScope"),m.get("disabled")),ca(e,r),Lxt(i)&&(e.style.fill="none",e.style.stroke="none",R(e.states,function(_){_.style&&(_.style.fill=_.style.stroke="none")}))}function Pxt(e,t){var n=e.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var r=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),a=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(r,i,a)}var Rxt=function(){function e(){}return e}(),_H=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="largeBar",r}return t.prototype.getDefaultShape=function(){return new Rxt},t.prototype.buildPath=function(n,r){for(var i=r.points,a=this.baseDimIdx,o=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[o]=i[c+2],s[a]=i[c+a],s[o]=i[c+o],n.rect(s[0],s[1],l[0],l[1])},t}(Ve);function xH(e,t,n,r){var i=e.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,o=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new _H({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=o,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),n&&n.push(c)}var h=new _H({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=o,h.barWidth=s,t.add(h),h.useStyle(i.getVisual("style")),fe(h).seriesIndex=e.seriesIndex,e.get("silent")||(h.on("mousedown",bH),h.on("mousemove",bH)),n&&n.push(h)}var bH=dk(function(e){var t=this,n=Oxt(t,e.offsetX,e.offsetY);fe(t).dataIndex=n>=0?n:null},30,!1);function Oxt(e,t,n){for(var r=e.baseDimIdx,i=1-r,a=e.shape.points,o=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,h=a.length/3;c<h;c++){var f=c*3;if(l[r]=u,l[i]=a[f+2],s[r]=a[f+r],s[i]=a[f+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return o[c]}return-1}function VQ(e,t,n){if(Hv(n,"cartesian2d")){var r=t,i=n.getArea();return{x:e?r.x:i.x,y:e?i.y:r.y,width:e?r.width:i.width,height:e?i.height:r.height}}else{var i=n.getArea(),a=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:a.r0,r:e?i.r:a.r,startAngle:e?a.startAngle:0,endAngle:e?a.endAngle:Math.PI*2}}}function Nxt(e,t,n){var r=e.type==="polar"?Xa:nn;return new r({shape:VQ(t,n,e),silent:!0,z2:0})}function Bxt(e){e.registerChartView(Cxt),e.registerSeriesModel(Sxt),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,_e($J,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,XJ("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,zQ("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,n){var r=t.componentType||"series";n.eachComponent({mainType:r,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var SH=Math.PI*2,ow=Math.PI/180;function GQ(e,t){return Gr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function HQ(e,t){var n=GQ(e,t),r=e.get("center"),i=e.get("radius");ht(i)||(i=[0,i]);var a=Dt(n.width,t.getWidth()),o=Dt(n.height,t.getHeight()),s=Math.min(a,o),l=Dt(i[0],s/2),u=Dt(i[1],s/2),c,h,f=e.coordinateSystem;if(f){var d=f.dataToPoint(r);c=d[0]||0,h=d[1]||0}else ht(r)||(r=[r,r]),c=Dt(r[0],a)+n.x,h=Dt(r[1],o)+n.y;return{cx:c,cy:h,r0:l,r:u}}function kxt(e,t,n){t.eachSeriesByType(e,function(r){var i=r.getData(),a=i.mapDimension("value"),o=GQ(r,n),s=HQ(r,n),l=s.cx,u=s.cy,c=s.r,h=s.r0,f=-r.get("startAngle")*ow,d=r.get("endAngle"),p=r.get("padAngle")*ow;d=d==="auto"?f-SH:-d*ow;var v=r.get("minAngle")*ow,g=v+p,m=0;i.each(a,function(P){!isNaN(P)&&m++});var _=i.getSum(a),y=Math.PI/(_||m)*2,x=r.get("clockwise"),S=r.get("roseType"),b=r.get("stillShowZeroSum"),w=i.getDataExtent(a);w[0]=0;var A=x?1:-1,T=[f,d],M=A*p/2;UB(T,!x),f=T[0],d=T[1];var C=Math.abs(d-f),E=C,D=0,I=f;if(i.setLayout({viewRect:o,r:c}),i.each(a,function(P,B){var N;if(isNaN(P)){i.setItemLayout(B,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:l,cy:u,r0:h,r:S?NaN:c});return}S!=="area"?N=_===0&&b?y:P*y:N=C/m,N<g?(N=g,E-=g):D+=P;var k=I+A*N,U=0,Z=0;p>N?(U=I+A*N/2,Z=U):(U=I+M,Z=k-M),i.setItemLayout(B,{angle:N,startAngle:U,endAngle:Z,clockwise:x,cx:l,cy:u,r0:h,r:S?Cn(P,w,[h,c]):c}),I=k}),E<SH&&m)if(E<=.001){var L=C/m;i.each(a,function(P,B){if(!isNaN(P)){var N=i.getItemLayout(B);N.angle=L;var k=0,U=0;L<p?(k=f+A*(B+1/2)*L,U=k):(k=f+A*B*L+M,U=f+A*(B+1)*L-M),N.startAngle=k,N.endAngle=U}})}else y=E/D,I=f,i.each(a,function(P,B){if(!isNaN(P)){var N=i.getItemLayout(B),k=N.angle===g?g:P*y,U=0,Z=0;k<p?(U=I+A*k/2,Z=U):(U=I+M,Z=I+A*k-M),N.startAngle=U,N.endAngle=Z,I+=A*k}})})}function L1(e){return{seriesType:e,reset:function(t,n){var r=n.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=t.getData();i.filterSelf(function(a){for(var o=i.getName(a),s=0;s<r.length;s++)if(!r[s].isSelected(o))return!1;return!0})}}}}var Fxt=Math.PI/180;function wH(e,t,n,r,i,a,o,s,l,u){if(e.length<2)return;function c(v){for(var g=v.rB,m=g*g,_=0;_<v.list.length;_++){var y=v.list[_],x=Math.abs(y.label.y-n),S=r+y.len,b=S*S,w=Math.sqrt((1-Math.abs(x*x/m))*b),A=t+(w+y.len2)*i,T=A-y.label.x,M=y.targetTextWidth-T*i;WQ(y,M,!0),y.label.x=A}}function h(v){for(var g={list:[],maxY:0},m={list:[],maxY:0},_=0;_<v.length;_++)if(v[_].labelAlignTo==="none"){var y=v[_],x=y.label.y>n?m:g,S=Math.abs(y.label.y-n);if(S>=x.maxY){var b=y.label.x-t-y.len2*i,w=r+y.len,A=Math.abs(b)<w?Math.sqrt(S*S/(1-b*b/w/w)):w;x.rB=A,x.maxY=S}x.list.push(y)}c(g),c(m)}for(var f=e.length,d=0;d<f;d++)if(e[d].position==="outer"&&e[d].labelAlignTo==="labelLine"){var p=e[d].label.x-u;e[d].linePoints[1][0]+=p,e[d].label.x=u}fQ(e,l,l+o)&&h(e)}function zxt(e,t,n,r,i,a,o,s){for(var l=[],u=[],c=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<e.length;f++){var d=e[f].label;fI(e[f])||(d.x<t?(c=Math.min(c,d.x),l.push(e[f])):(h=Math.max(h,d.x),u.push(e[f])))}for(var f=0;f<e.length;f++){var p=e[f];if(!fI(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var d=p.label,v=p.linePoints,g=void 0;p.labelAlignTo==="edge"?d.x<t?g=v[2][0]-p.labelDistance-o-p.edgeDistance:g=o+i-p.edgeDistance-v[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?d.x<t?g=c-o-p.bleedMargin:g=o+i-h-p.bleedMargin:d.x<t?g=d.x-o-p.bleedMargin:g=o+i-d.x-p.bleedMargin,p.targetTextWidth=g,WQ(p,g)}}wH(u,t,n,r,1,i,a,o,s,h),wH(l,t,n,r,-1,i,a,o,s,c);for(var f=0;f<e.length;f++){var p=e[f];if(!fI(p)&&p.linePoints){var d=p.label,v=p.linePoints,m=p.labelAlignTo==="edge",_=d.style.padding,y=_?_[1]+_[3]:0,x=d.style.backgroundColor?0:y,S=p.rect.width+x,b=v[1][0]-v[2][0];m?d.x<t?v[2][0]=o+p.edgeDistance+S+p.labelDistance:v[2][0]=o+i-p.edgeDistance-S-p.labelDistance:(d.x<t?v[2][0]=d.x+p.labelDistance:v[2][0]=d.x-p.labelDistance,v[1][0]=v[2][0]+b),v[1][1]=v[2][1]=d.y}}}function WQ(e,t,n){if(n===void 0&&(n=!1),e.labelStyleWidth==null){var r=e.label,i=r.style,a=e.rect,o=i.backgroundColor,s=i.padding,l=s?s[1]+s[3]:0,u=i.overflow,c=a.width+(o?0:l);if(t<c||n){var h=a.height;if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-l);var f=r.getBoundingRect();r.setStyle("width",Math.ceil(f.width)),r.setStyle("backgroundColor",o)}else{var d=t-l,p=t<c?d:n?d>e.unconstrainedWidth?null:d:null;r.setStyle("width",p)}var v=r.getBoundingRect();a.width=v.width;var g=(r.style.margin||0)+2.1;a.height=v.height+g,a.y-=(a.height-h)/2}}}function fI(e){return e.position==="center"}function Uxt(e){var t=e.getData(),n=[],r,i,a=!1,o=(e.get("minShowLabelAngle")||0)*Fxt,s=t.getLayout("viewRect"),l=t.getLayout("r"),u=s.width,c=s.x,h=s.y,f=s.height;function d(b){b.ignore=!0}function p(b){if(!b.ignore)return!0;for(var w in b.states)if(b.states[w].ignore===!1)return!0;return!1}t.each(function(b){var w=t.getItemGraphicEl(b),A=w.shape,T=w.getTextContent(),M=w.getTextGuideLine(),C=t.getItemModel(b),E=C.getModel("label"),D=E.get("position")||C.get(["emphasis","label","position"]),I=E.get("distanceToLabelLine"),L=E.get("alignTo"),P=Dt(E.get("edgeDistance"),u),B=E.get("bleedMargin"),N=C.getModel("labelLine"),k=N.get("length");k=Dt(k,u);var U=N.get("length2");if(U=Dt(U,u),Math.abs(A.endAngle-A.startAngle)<o){R(T.states,d),T.ignore=!0,M&&(R(M.states,d),M.ignore=!0);return}if(p(T)){var Z=(A.startAngle+A.endAngle)/2,nt=Math.cos(Z),ct=Math.sin(Z),K,$,ot,tt;r=A.cx,i=A.cy;var et=D==="inside"||D==="inner";if(D==="center")K=A.cx,$=A.cy,tt="center";else{var xt=(et?(A.r+A.r0)/2*nt:A.r*nt)+r,St=(et?(A.r+A.r0)/2*ct:A.r*ct)+i;if(K=xt+nt*3,$=St+ct*3,!et){var X=xt+nt*(k+l-A.r),Ct=St+ct*(k+l-A.r),It=X+(nt<0?-1:1)*U,Jt=Ct;L==="edge"?K=nt<0?c+P:c+u-P:K=It+(nt<0?-I:I),$=Jt,ot=[[xt,St],[X,Ct],[It,Jt]]}tt=et?"center":L==="edge"?nt>0?"right":"left":nt>0?"left":"right"}var Gt=Math.PI,ve=0,W=E.get("rotate");if(xn(W))ve=W*(Gt/180);else if(D==="center")ve=0;else if(W==="radial"||W===!0){var F=nt<0?-Z+Gt:-Z;ve=F}else if(W==="tangential"&&D!=="outside"&&D!=="outer"){var st=Math.atan2(nt,ct);st<0&&(st=Gt*2+st);var bt=ct>0;bt&&(st=Gt+st),ve=st-Gt}if(a=!!ve,T.x=K,T.y=$,T.rotation=ve,T.setStyle({verticalAlign:"middle"}),et){T.setStyle({align:tt});var be=T.states.select;be&&(be.x+=T.x,be.y+=T.y)}else{var At=T.getBoundingRect().clone();At.applyTransform(T.getComputedTransform());var Et=(T.style.margin||0)+2.1;At.y-=Et/2,At.height+=Et,n.push({label:T,labelLine:M,position:D,len:k,len2:U,minTurnAngle:N.get("minTurnAngle"),maxSurfaceAngle:N.get("maxSurfaceAngle"),surfaceNormal:new Me(nt,ct),linePoints:ot,textAlign:tt,labelDistance:I,labelAlignTo:L,edgeDistance:P,bleedMargin:B,rect:At,unconstrainedWidth:At.width,labelStyleWidth:T.style.width})}w.setTextConfig({inside:et})}}),!a&&e.get("avoidLabelOverlap")&&zxt(n,r,i,l,u,f,c,h);for(var v=0;v<n.length;v++){var g=n[v],m=g.label,_=g.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),y&&(R(m.states,d),m.ignore=!0);var x=m.states.select;x&&(x.x+=m.x,x.y+=m.y)}if(_){var S=g.linePoints;y||!S?(R(_.states,d),_.ignore=!0):(uQ(S,g.minTurnAngle),h_t(S,g.surfaceNormal,g.maxSurfaceAngle),_.setShape({points:S}),m.__hostTarget.textGuideLineConfig={anchor:new Me(S[0][0],S[0][1])})}}}var Vxt=function(e){it(t,e);function t(n,r,i){var a=e.call(this)||this;a.z2=2;var o=new Qe;return a.setTextContent(o),a.updateData(n,r,i,!0),a}return t.prototype.updateData=function(n,r,i,a){var o=this,s=n.hostModel,l=n.getItemModel(r),u=l.getModel("emphasis"),c=n.getItemLayout(r),h=ut(Np(l.getModel("itemStyle"),c,!0),c);if(isNaN(h.startAngle)){o.setShape(h);return}if(a){o.setShape(h);var f=s.getShallow("animationType");s.ecModel.ssr?(xr(o,{scaleX:0,scaleY:0},s,{dataIndex:r,isFrom:!0}),o.originX=h.cx,o.originY=h.cy):f==="scale"?(o.shape.r=c.r0,xr(o,{shape:{r:c.r}},s,r)):i!=null?(o.setShape({startAngle:i,endAngle:i}),xr(o,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},s,r)):(o.shape.endAngle=c.startAngle,Tn(o,{shape:{endAngle:c.endAngle}},s,r))}else Ol(o),Tn(o,{shape:h},s,r);o.useStyle(n.getItemVisual(r,"style")),ca(o,l);var d=(c.startAngle+c.endAngle)/2,p=s.get("selectedOffset"),v=Math.cos(d)*p,g=Math.sin(d)*p,m=l.getShallow("cursor");m&&o.attr("cursor",m),this._updateLabel(s,n,r),o.ensureState("emphasis").shape=ut({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},Np(u.getModel("itemStyle"),c)),ut(o.ensureState("select"),{x:v,y:g,shape:Np(l.getModel(["select","itemStyle"]),c)}),ut(o.ensureState("blur"),{shape:Np(l.getModel(["blur","itemStyle"]),c)});var _=o.getTextGuideLine(),y=o.getTextContent();_&&ut(_.ensureState("select"),{x:v,y:g}),ut(y.ensureState("select"),{x:v,y:g}),Vr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(n,r,i){var a=this,o=r.getItemModel(i),s=o.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;ha(a,Fi(o),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:n.getFormattedLabel(i,"normal")||r.getName(i)});var h=a.getTextContent();a.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var f=n.get(["label","position"]);if(f!=="outside"&&f!=="outer")a.removeTextGuideLine();else{var d=this.getTextGuideLine();d||(d=new Ja,this.setTextGuideLine(d)),Pk(this,Rk(o),{stroke:u,opacity:Du(s.get(["lineStyle","opacity"]),c,1)})}},t}(Xa),Gxt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,r,i,a){var o=n.getData(),s=this._data,l=this.group,u;if(!s&&o.count()>0){for(var c=o.getItemLayout(0),h=1;isNaN(c&&c.startAngle)&&h<o.count();++h)c=o.getItemLayout(h);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),o.count()===0&&n.get("showEmptyCircle")){var f=new Xa({shape:HQ(n,i)});f.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}o.diff(s).add(function(d){var p=new Vxt(o,d,u);o.setItemGraphicEl(d,p),l.add(p)}).update(function(d,p){var v=s.getItemGraphicEl(p);v.updateData(o,d,u),v.off("click"),l.add(v),o.setItemGraphicEl(d,v)}).remove(function(d){var p=s.getItemGraphicEl(d);hb(p,n,d)}).execute(),Uxt(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=o)},t.prototype.dispose=function(){},t.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="pie",t}(hn);function g0(e,t,n){t=ht(t)&&{coordDimensions:t}||ut({encodeDefine:e.getEncode()},t);var r=e.getSource(),i=p0(r,t).dimensions,a=new Ir(i,e);return a.initData(r,n),a}var P1=function(){function e(t,n){this._getDataWithEncodedVisual=t,this._getRawData=n}return e.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},e.prototype.containName=function(t){var n=this._getRawData();return n.indexOfName(t)>=0},e.prototype.indexOfName=function(t){var n=this._getDataWithEncodedVisual();return n.indexOfName(t)},e.prototype.getItemVisual=function(t,n){var r=this._getDataWithEncodedVisual();return r.getItemVisual(t,n)},e}(),Hxt=vn(),Wxt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new P1(Vt(this.getData,this),Vt(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return g0(this,{coordDimensions:["value"],encodeDefaulter:_e(ik,this)})},t.prototype.getDataParams=function(n){var r=this.getData(),i=Hxt(r),a=i.seats;if(!a){var o=[];r.each(r.mapDimension("value"),function(l){o.push(l)}),a=i.seats=Vdt(o,r.hostModel.get("percentPrecision"))}var s=e.prototype.getDataParams.call(this,n);return s.percent=a[n]||0,s.$vars.push("percent"),s},t.prototype._defaultLabelLine=function(n){hv(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(bn);function $xt(e){return{seriesType:e,reset:function(t,n){var r=t.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),o=r.get(a,i);return!(xn(o)&&!isNaN(o)&&o<0)})}}}function Xxt(e){e.registerChartView(Gxt),e.registerSeriesModel(Wxt),uJ("pie",e.registerAction),e.registerLayout(_e(kxt,"pie")),e.registerProcessor(L1("pie")),e.registerProcessor($xt("pie"))}var jxt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n,r){return Qu(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(bn),$Q=4,Yxt=function(){function e(){}return e}(),qxt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.getDefaultShape=function(){return new Yxt},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(n,r){var i=r.points,a=r.size,o=this.symbolProxy,s=o.shape,l=n.getContext?n.getContext():n,u=l&&a[0]<$Q,c=this.softClipShape,h;if(u){this._ctx=l;return}for(this._ctx=null,h=this._off;h<i.length;){var f=i[h++],d=i[h++];isNaN(f)||isNaN(d)||c&&!c.contain(f,d)||(s.x=f-a[0]/2,s.y=d-a[1]/2,s.width=a[0],s.height=a[1],o.buildPath(n,s,!0))}this.incremental&&(this._off=h,this.notClear=!0)},t.prototype.afterBrush=function(){var n=this.shape,r=n.points,i=n.size,a=this._ctx,o=this.softClipShape,s;if(a){for(s=this._off;s<r.length;){var l=r[s++],u=r[s++];isNaN(l)||isNaN(u)||o&&!o.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(n,r){for(var i=this.shape,a=i.points,o=i.size,s=Math.max(o[0],4),l=Math.max(o[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,h=a[c]-s/2,f=a[c+1]-l/2;if(n>=h&&r>=f&&n<=h+s&&r<=f+l)return u}return-1},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.points,a=r.size,o=a[0],s=a[1],l=1/0,u=1/0,c=-1/0,h=-1/0,f=0;f<i.length;){var d=i[f++],p=i[f++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),h=Math.max(p,h)}n=this._rect=new Ae(l-o/2,u-s/2,c-l+o,h-u+s)}return n},t}(Ve),Kxt=function(){function e(){this.group=new he}return e.prototype.updateData=function(t,n){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,n)},e.prototype.updateLayout=function(t){var n=t.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;n=new Float32Array(n.buffer,a,i)}r.setShape("points",n),r.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,n,r){var i=this._newAdded[0],a=n.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var s=o.length,l=new Float32Array(s+a.length);l.set(o),l.set(a,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,n,r)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new qxt({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,n,r){var i=n.hostModel;r=r||{};var a=n.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=r.clipShape||null,t.symbolProxy=Jr(n.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<$Q;t.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var s=n.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=fe(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var h=t.hoverDataIdx;h>=0&&(u.dataIndex=h+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),Zxt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.updateData(a,{clipShape:this._getClipShape(n)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateSymbolDraw(a,n);o.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(n,r,i){this._symbolDraw.incrementalUpdate(n,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=n.end===r.getData().count()},t.prototype.updateTransform=function(n,r,i){var a=n.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var o=I1("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},t.prototype._getClipShape=function(n){if(n.get("clip",!0)){var r=n.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},t.prototype._updateSymbolDraw=function(n,r){var i=this._symbolDraw,a=r.pipelineContext,o=a.large;return(!i||o!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=o?new Kxt:new E1,this._isLargeDraw=o,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(hn),Jxt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Ie),QO=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ai).models[0]},t.type="cartesian2dAxis",t}(Ie);ti(QO,v0);var XQ={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Qxt=Xt({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},XQ),Uk=Xt({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},XQ),tbt=Xt({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Uk),ebt=te({logBase:10},Uk);const jQ={category:Qxt,value:Uk,time:tbt,log:ebt};var nbt={value:1,category:1,time:1,log:1};function fy(e,t,n,r){R(nbt,function(i,a){var o=Xt(Xt({},jQ[a],!0),r,!0),s=function(l){it(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,h){var f=db(this),d=f?l0(c):{},p=h.getTheme();Xt(c,p.get(a+"Axis")),Xt(c,this.getDefaultOption()),c.type=TH(c),f&&Vf(c,d,f)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=aA.createByAxisModel(this))},u.prototype.getCategories=function(c){var h=this.option;if(h.type==="category")return c?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+a,u.defaultOption=o,u}(n);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",TH)}function TH(e){return e.type||(e.data?"category":"value")}var Vk=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return yt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Gn(this.getAxes(),function(n){return n.scale.type===t})},e.prototype.addAxis=function(t){var n=t.dim;this._axes[n]=t,this._dimList.push(n)},e}(),tN=["x","y"];function MH(e){return e.type==="interval"||e.type==="time"}var rbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=tN,n}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!MH(n)||!MH(r))){var i=n.getExtent(),a=r.getExtent(),o=this.dataToPoint([i[0],a[0]]),s=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(s[0]-o[0])/l,h=(s[1]-o[1])/u,f=o[0]-i[0]*c,d=o[1]-a[0]*h,p=this._transform=[c,0,0,h,f,d];this._invTransform=zv([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(n){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(n[0]))&&i.contain(i.toLocalCoord(n[1]))},t.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},t.prototype.containZone=function(n,r){var i=this.dataToPoint(n),a=this.dataToPoint(r),o=this.getArea(),s=new Ae(i[0],i[1],a[0]-i[0],a[1]-i[1]);return o.intersect(s)},t.prototype.dataToPoint=function(n,r,i){i=i||[];var a=n[0],o=n[1];if(this._transform&&a!=null&&isFinite(a)&&o!=null&&isFinite(o))return Oi(i,n,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(o,r)),i},t.prototype.clampData=function(n,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,o=i.getExtent(),s=a.getExtent(),l=i.parse(n[0]),u=a.parse(n[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(o[0],o[1]),l),Math.max(o[0],o[1])),r[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),r},t.prototype.pointToData=function(n,r){var i=[];if(this._invTransform)return Oi(i,n,this._invTransform);var a=this.getAxis("x"),o=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(n[0]),r),i[1]=o.coordToData(o.toLocalCoord(n[1]),r),i},t.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},t.prototype.getArea=function(n){n=n||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-n,o=Math.min(i[0],i[1])-n,s=Math.max(r[0],r[1])-a+n,l=Math.max(i[0],i[1])-o+n;return new Ae(a,o,s,l)},t}(Vk),ibt=function(e){it(t,e);function t(n,r,i,a,o){var s=e.call(this,n,r,i)||this;return s.index=0,s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},t.prototype.getGlobalExtent=function(n){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),n&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(n,r){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),r)},t.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},t}(Qa);function eN(e,t,n){n=n||{};var r=e.coordinateSystem,i=t.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,l=o?"onZero":s,u=i.dim,c=r.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[h[2]-d,h[3]+d]:[h[0]-d,h[1]+d];if(o){var v=o.toGlobalCoord(o.dataToCoord(0));p[f.onZero]=Math.max(Math.min(v,p[1]),p[0])}a.position=[u==="y"?p[f[l]]:h[0],u==="x"?p[f[l]]:h[3]],a.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=g[s],a.labelOffset=o?p[f[s]]-p[f.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Qi(n.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var m=t.get(["axisLabel","rotate"]);return a.labelRotate=l==="top"?-m:m,a.z2=1,a}function AH(e){return e.get("coordinateSystem")==="cartesian2d"}function CH(e){var t={xAxisModel:null,yAxisModel:null};return R(t,function(n,r){var i=r.replace(/Model$/,""),a=e.getReferringComponents(i,ai).models[0];t[r]=a}),t}var dI=Math.log;function YQ(e,t,n){var r=Qc.prototype,i=r.getTicks.call(n),a=r.getTicks.call(n,!0),o=i.length-1,s=r.getInterval.call(n),l=ZJ(e,t),u=l.extent,c=l.fixMin,h=l.fixMax;if(e.type==="log"){var f=dI(e.base);u=[dI(u[0])/f,dI(u[1])/f]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:o,fixMin:c,fixMax:h});var d=r.getExtent.call(e);c&&(u[0]=d[0]),h&&(u[1]=d[1]);var p=r.getInterval.call(e),v=u[0],g=u[1];if(c&&h)p=(g-v)/o;else if(c)for(g=u[0]+p*o;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=JD(p),g=u[0]+p*o;else if(h)for(v=u[1]-p*o;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=JD(p),v=u[1]-p*o;else{var m=e.getTicks().length-1;m>o&&(p=JD(p));var _=p*o;g=Math.ceil(u[1]/p)*p,v=_r(g-_),v<0&&u[0]>=0?(v=0,g=_r(_)):g>0&&u[1]<=0&&(g=0,v=-_r(_))}var y=(i[0].value-a[0].value)/s,x=(i[o].value-a[o].value)/s;r.setExtent.call(e,v+p*y,g+p*x),r.setInterval.call(e,p),(y||x)&&r.setNiceExtent.call(e,v+p,g-p)}var abt=function(){function e(t,n,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=tN,this._initCartesian(t,n,r),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,n){var r=this._axesMap;this._updateScale(t,this.model);function i(o){var s,l=Je(o),u=l.length;if(u){for(var c=[],h=u-1;h>=0;h--){var f=+l[h],d=o[f],p=d.model,v=d.scale;XO(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(gv(v,p),XO(v)&&(s=d))}c.length&&(s||(s=c.pop(),gv(s.scale,s.model)),R(c,function(g){YQ(g.scale,g.model,s.scale)}))}}i(r.x),i(r.y);var a={};R(r.x,function(o){EH(r,"y",o,a)}),R(r.y,function(o){EH(r,"x",o,a)}),this.resize(this.model,n)},e.prototype.resize=function(t,n,r){var i=t.getBoxLayoutParams(),a=!r&&t.get("containLabel"),o=Gr(i,{width:n.getWidth(),height:n.getHeight()});this._rect=o;var s=this._axesList;l(),a&&(R(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=V0t(u);if(c){var h=u.isHorizontal()?"height":"width",f=u.model.get(["axisLabel","margin"]);o[h]-=c[h]+f,u.position==="top"?o.y+=c.height+f:u.position==="left"&&(o.x+=c.width+f)}}}),l()),R(this._coordsList,function(u){u.calcAffineTransform()});function l(){R(s,function(u){var c=u.isHorizontal(),h=c?[0,o.width]:[0,o.height],f=u.inverse?1:0;u.setExtent(h[f],h[1-f]),obt(u,c?o.x:o.y)})}},e.prototype.getAxis=function(t,n){var r=this._axesMap[t];if(r!=null)return r[n||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,n){if(t!=null&&n!=null){var r="x"+t+"y"+n;return this._coordsMap[r]}se(t)&&(n=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===n)return a[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},e.prototype.convertFromPixel=function(t,n,r){var i=this._findConvertTarget(n);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},e.prototype._findConvertTarget=function(t){var n=t.seriesModel,r=t.xAxisModel||n&&n.getReferringComponents("xAxis",ai).models[0],i=t.yAxisModel||n&&n.getReferringComponents("yAxis",ai).models[0],a=t.gridModel,o=this._coordsList,s,l;if(n)s=n.coordinateSystem,Le(o,s)<0&&(s=null);else if(r&&i)s=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var n=this._coordsList[0];if(n)return n.containPoint(t)},e.prototype._initCartesian=function(t,n,r){var i=this,a=this,o={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(n.eachComponent("xAxis",u("x"),this),n.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,R(s.x,function(c,h){R(s.y,function(f,d){var p="x"+h+"y"+d,v=new rbt(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(f)})});function u(c){return function(h,f){if(pI(h,t)){var d=h.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=o.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=o.left?"right":"left"),o[d]=!0;var p=new ibt(c,M1(h),[0,0],h.get("type"),d),v=p.type==="category";p.onBand=v&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.grid=a,p.index=f,a._axesList.push(p),s[c][f]=p,l[c]++}}}},e.prototype._updateScale=function(t,n){R(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(AH(i)){var a=CH(i),o=a.xAxisModel,s=a.yAxisModel;if(!pI(o,n)||!pI(s,n))return;var l=this.getCartesian(o.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),h=l.getAxis("y");r(u,c),r(u,h)}},this);function r(i,a){R(oA(i,a.dim),function(o){a.scale.unionExtentFromData(i,o)})}},e.prototype.getTooltipAxes=function(t){var n=[],r=[];return R(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(a);Le(n,a)<0&&n.push(a),Le(r,o)<0&&r.push(o)}),{baseAxes:n,otherAxes:r}},e.create=function(t,n){var r=[];return t.eachComponent("grid",function(i,a){var o=new e(i,t,n);o.name="grid_"+a,o.resize(i,n,!0),i.coordinateSystem=o,r.push(o)}),t.eachSeries(function(i){if(AH(i)){var a=CH(i),o=a.xAxisModel,s=a.yAxisModel,l=o.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(o.componentIndex,s.componentIndex)}}),r},e.dimensions=tN,e}();function pI(e,t){return e.getCoordSysModel()===t}function EH(e,t,n,r){n.getAxesOnZeroOf=function(){return a?[a]:[]};var i=e[t],a,o=n.model,s=o.get(["axisLine","onZero"]),l=o.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)DH(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&DH(i[u])&&!r[c(i[u])]){a=i[u];break}a&&(r[c(a)]=!0);function c(h){return h.dim+"_"+h.index}}function DH(e){return e&&e.type!=="category"&&e.type!=="time"&&U0t(e)}function obt(e,t){var n=e.getExtent(),r=n[0]+n[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return r-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return r-i+t}}var Sf=Math.PI,Ga=function(){function e(t,n){this.group=new he,this.opt=n,this.axisModel=t,te(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new he({x:n.position[0],y:n.position[1],rotation:n.rotation});r.updateTransform(),this._transformGroup=r}return e.prototype.hasBuilder=function(t){return!!IH[t]},e.prototype.add=function(t){IH[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,n,r){var i=hK(n-t),a,o;return sb(i)?(o=r>0?"top":"bottom",a="center"):sb(i-Sf)?(o=r>0?"bottom":"top",a="center"):(o="middle",i>0&&i<Sf?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:o}},e.makeAxisEventDataBase=function(t){var n={componentType:t.mainType,componentIndex:t.componentIndex};return n[t.mainType+"Index"]=t.componentIndex,n},e.isLabelSilent=function(t){var n=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||n&&n.show)},e}(),IH={axisLine:function(e,t,n,r){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),o=r.transform,s=[a[0],0],l=[a[1],0],u=s[0]>l[0];o&&(Oi(s,s,o),Oi(l,l,o));var c=ut({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new Ei({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});ly(h.shape,h.style.lineWidth),h.anid="line",n.add(h);var f=t.get(["axisLine","symbol"]);if(f!=null){var d=t.get(["axisLine","symbolSize"]);Ft(f)&&(f=[f,f]),(Ft(d)||xn(d))&&(d=[d,d]);var p=Vv(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];R([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,_){if(f[_]!=="none"&&f[_]!=null){var y=Jr(f[_],-v/2,-g/2,v,g,c.stroke,!0),x=m.r+m.offset,S=u?l:s;y.attr({rotation:m.rotate,x:S[0]+x*Math.cos(e.rotation),y:S[1]-x*Math.sin(e.rotation),silent:!0,z2:11}),n.add(y)}})}}},axisTickLabel:function(e,t,n,r){var i=ubt(n,r,t,e),a=hbt(n,r,t,e);if(lbt(t,a,i),cbt(n,r,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var o=cQ(yt(a,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));dQ(o)}},axisName:function(e,t,n,r){var i=Qi(e.axisName,t.get("name"));if(i){var a=t.get("nameLocation"),o=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,h=[a==="start"?u[0]-c*l:a==="end"?u[1]+c*l:(u[0]+u[1])/2,PH(a)?e.labelOffset+o*l:0],f,d=t.get("nameRotate");d!=null&&(d=d*Sf/180);var p;PH(a)?f=Ga.innerTextLayout(e.rotation,d??e.rotation,o):(f=sbt(e.rotation,a,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(f.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,_=Qi(e.nameTruncateMaxWidth,g.maxWidth,p),y=new Qe({x:h[0],y:h[1],rotation:f.rotation,silent:Ga.isLabelSilent(t),style:Hn(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||f.textAlign,verticalAlign:s.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(i0({el:y,componentModel:t,itemName:i}),y.__fullText=i,y.anid="name",t.get("triggerEvent")){var x=Ga.makeAxisEventDataBase(t);x.targetType="axisName",x.name=i,fe(y).eventData=x}r.add(y),y.updateTransform(),n.add(y),y.decomposeTransform()}}};function sbt(e,t,n,r){var i=hK(n-e),a,o,s=r[0]>r[1],l=t==="start"&&!s||t!=="start"&&s;return sb(i-Sf/2)?(o=l?"bottom":"top",a="center"):sb(i-Sf*1.5)?(o=l?"top":"bottom",a="center"):(o="middle",i<Sf*1.5&&i>Sf/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:o}}function lbt(e,t,n){if(!JJ(e.axis)){var r=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],n=n||[];var a=t[0],o=t[1],s=t[t.length-1],l=t[t.length-2],u=n[0],c=n[1],h=n[n.length-1],f=n[n.length-2];r===!1?(rs(a),rs(u)):LH(a,o)&&(r?(rs(o),rs(c)):(rs(a),rs(u))),i===!1?(rs(s),rs(h)):LH(l,s)&&(i?(rs(l),rs(f)):(rs(s),rs(h)))}}function rs(e){e&&(e.ignore=!0)}function LH(e,t){var n=e&&e.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(!(!n||!r)){var i=JC([]);return Fv(i,i,-e.rotation),n.applyTransform(Uc([],i,e.getLocalTransform())),r.applyTransform(Uc([],i,t.getLocalTransform())),n.intersect(r)}}function PH(e){return e==="middle"||e==="center"}function qQ(e,t,n,r,i){for(var a=[],o=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;o[0]=u,o[1]=0,s[0]=u,s[1]=n,t&&(Oi(o,o,t),Oi(s,s,t));var c=new Ei({shape:{x1:o[0],y1:o[1],x2:s[0],y2:s[1]},style:r,z2:2,autoBatch:!0,silent:!0});ly(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,a.push(c)}return a}function ubt(e,t,n,r){var i=n.axis,a=n.getModel("axisTick"),o=a.get("show");if(o==="auto"&&r.handleAutoShown&&(o=r.handleAutoShown("axisTick")),!(!o||i.scale.isBlank())){for(var s=a.getModel("lineStyle"),l=r.tickDirection*a.get("length"),u=i.getTicksCoords(),c=qQ(u,t.transform,l,te(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<c.length;h++)e.add(c[h]);return c}}function cbt(e,t,n,r){var i=n.axis,a=n.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var o=i.getMinorTicksCoords();if(o.length)for(var s=a.getModel("lineStyle"),l=r*a.get("length"),u=te(s.getLineStyle(),te(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),c=0;c<o.length;c++)for(var h=qQ(o[c],t.transform,l,u,"minorticks_"+c),f=0;f<h.length;f++)e.add(h[f])}}function hbt(e,t,n,r){var i=n.axis,a=Qi(r.axisLabelShow,n.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var o=n.getModel("axisLabel"),s=o.get("margin"),l=i.getViewLabels(),u=(Qi(r.labelRotate,o.get("rotate"))||0)*Sf/180,c=Ga.innerTextLayout(r.rotation,u,r.labelDirection),h=n.getCategories&&n.getCategories(!0),f=[],d=Ga.isLabelSilent(n),p=n.get("triggerEvent");return R(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,y=v.rawLabel,x=o;if(h&&h[m]){var S=h[m];se(S)&&S.textStyle&&(x=new pn(S.textStyle,o,n.ecModel))}var b=x.getTextColor()||n.get(["axisLine","lineStyle","color"]),w=i.dataToCoord(m),A=x.getShallow("align",!0)||c.textAlign,T=xe(x.getShallow("alignMinLabel",!0),A),M=xe(x.getShallow("alignMaxLabel",!0),A),C=x.getShallow("verticalAlign",!0)||x.getShallow("baseline",!0)||c.textVerticalAlign,E=xe(x.getShallow("verticalAlignMinLabel",!0),C),D=xe(x.getShallow("verticalAlignMaxLabel",!0),C),I=new Qe({x:w,y:r.labelOffset+r.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:Hn(x,{text:_,align:g===0?T:g===l.length-1?M:A,verticalAlign:g===0?E:g===l.length-1?D:C,fill:ae(b)?b(i.type==="category"?y:i.type==="value"?m+"":m,g):b})});if(I.anid="label_"+m,p){var L=Ga.makeAxisEventDataBase(n);L.targetType="axisLabel",L.value=y,L.tickIndex=g,i.type==="category"&&(L.dataIndex=m),fe(I).eventData=L}t.add(I),I.updateTransform(),f.push(I),e.add(I),I.decomposeTransform()}),f}}function fbt(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return dbt(n,e,t),n.seriesInvolved&&vbt(n,e),n}function dbt(e,t,n){var r=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];R(n.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=Sb(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,h=c.getModel("tooltip",r);if(R(s.getAxes(),_e(v,!1,null)),s.getTooltipAxes&&r&&h.get("show")){var f=h.get("trigger")==="axis",d=h.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(h.get(["axisPointer","axis"]));(f||d)&&R(p.baseAxes,_e(v,d?"cross":!0,f)),d&&R(p.otherAxes,_e(v,"cross",!1))}function v(g,m,_){var y=_.model.getModel("axisPointer",i),x=y.get("show");if(!(!x||x==="auto"&&!g&&!nN(y))){m==null&&(m=y.get("triggerTooltip")),y=g?pbt(_,h,i,t,g,m):y;var S=y.get("snap"),b=y.get("triggerEmphasis"),w=Sb(_.model),A=m||S||_.type==="category",T=e.axesInfo[w]={key:w,axis:_,coordSys:s,axisPointerModel:y,triggerTooltip:m,triggerEmphasis:b,involveSeries:A,snap:S,useHandle:nN(y),seriesModels:[],linkGroup:null};u[w]=T,e.seriesInvolved=e.seriesInvolved||A;var M=gbt(a,_);if(M!=null){var C=o[M]||(o[M]={axesInfo:{}});C.axesInfo[w]=T,C.mapper=a[M].mapper,T.linkGroup=C}}}})}function pbt(e,t,n,r,i,a){var o=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};R(s,function(f){l[f]=ce(o.get(f))}),l.snap=e.type!=="category"&&!!a,o.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=o.get(["label","show"]);if(u.show=c??!0,!a){var h=l.lineStyle=o.get("crossStyle");h&&te(u,h.textStyle)}}return e.model.getModel("axisPointer",new pn(l,n,r))}function vbt(e,t){t.eachSeries(function(n){var r=n.coordinateSystem,i=n.get(["tooltip","trigger"],!0),a=n.get(["tooltip","show"],!0);!r||i==="none"||i===!1||i==="item"||a===!1||n.get(["axisPointer","show"],!0)===!1||R(e.coordSysAxesInfo[Sb(r.model)],function(o){var s=o.axis;r.getAxis(s.dim)===s&&(o.seriesModels.push(n),o.seriesDataCount==null&&(o.seriesDataCount=0),o.seriesDataCount+=n.getData().count())})})}function gbt(e,t){for(var n=t.model,r=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(vI(a[r+"AxisId"],n.id)||vI(a[r+"AxisIndex"],n.componentIndex)||vI(a[r+"AxisName"],n.name))return i}}function vI(e,t){return e==="all"||ht(e)&&Le(e,t)>=0||e===t}function mbt(e){var t=Gk(e);if(t){var n=t.axisPointerModel,r=t.axis.scale,i=n.option,a=n.get("status"),o=n.get("value");o!=null&&(o=r.parse(o));var s=nN(n);a==null&&(i.status=s?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(o==null||o>l[1])&&(o=l[1]),o<l[0]&&(o=l[0]),i.value=o,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function Gk(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Sb(e)]}function ybt(e){var t=Gk(e);return t&&t.axisPointerModel}function nN(e){return!!e.get(["handle","show"])}function Sb(e){return e.type+"||"+e.id}var RH={},Wv=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){this.axisPointerClass&&mbt(n),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,i,!0)},t.prototype.updateAxisPointer=function(n,r,i,a){this._doUpdateAxisPointerClass(n,i,!1)},t.prototype.remove=function(n,r){var i=this._axisPointer;i&&i.remove(r)},t.prototype.dispose=function(n,r){this._disposeAxisPointer(r),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(n,r,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var o=ybt(n);o?(this._axisPointer||(this._axisPointer=new a)).render(n,o,r,i):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},t.registerAxisPointerClass=function(n,r){RH[n]=r},t.getAxisPointerClass=function(n){return n&&RH[n]},t.type="axis",t}(Zn),rN=vn();function KQ(e,t,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitArea"),o=a.getModel("areaStyle"),s=o.get("color"),l=r.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0});if(u.length){var c=s.length,h=rN(e).splitAreaColors,f=jt(),d=0;if(h)for(var p=0;p<u.length;p++){var v=h.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=o.getAreaStyle();s=ht(s)?s:[s];for(var p=1;p<u.length;p++){var _=i.toGlobalCoord(u[p].coord),y=void 0,x=void 0,S=void 0,b=void 0;i.isHorizontal()?(y=g,x=l.y,S=_-y,b=l.height,g=y+S):(y=l.x,x=g,S=l.width,b=_-x,g=x+b);var w=u[p-1].tickValue;w!=null&&f.set(w,d),t.add(new nn({anid:w!=null?"area_"+w:null,shape:{x:y,y:x,width:S,height:b},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}rN(e).splitAreaColors=f}}}function ZQ(e){rN(e).splitAreaColors=null}var _bt=["axisLine","axisTickLabel","axisName"],xbt=["splitArea","splitLine","minorSplitLine"],JQ=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="CartesianAxisPointer",n}return t.prototype.render=function(n,r,i,a){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new he,this.group.add(this._axisGroup),!!n.get("show")){var s=n.getCoordSysModel(),l=eN(s,n),u=new Ga(n,ut({handleAutoShown:function(h){for(var f=s.coordinateSystem.getCartesians(),d=0;d<f.length;d++)if(XO(f[d].getOtherAxis(n.axis).scale))return!0;return!1}},l));R(_bt,u.add,u),this._axisGroup.add(u.getGroup()),R(xbt,function(h){n.get([h,"show"])&&bbt[h](this,this._axisGroup,n,s)},this);var c=a&&a.type==="changeAxisOrder"&&a.isInitSort;c||b1(o,this._axisGroup,n),e.prototype.render.call(this,n,r,i,a)}},t.prototype.remove=function(){ZQ(this)},t.type="cartesianAxis",t}(Wv),bbt={splitLine:function(e,t,n,r){var i=n.axis;if(!i.scale.isBlank()){var a=n.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=ht(s)?s:[s];for(var l=r.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,h=i.getTicksCoords({tickModel:a}),f=[],d=[],p=o.getLineStyle(),v=0;v<h.length;v++){var g=i.toGlobalCoord(h[v].coord);u?(f[0]=g,f[1]=l.y,d[0]=g,d[1]=l.y+l.height):(f[0]=l.x,f[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,_=h[v].tickValue,y=new Ei({anid:_!=null?"line_"+h[v].tickValue:null,autoBatch:!0,shape:{x1:f[0],y1:f[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});ly(y.shape,p.lineWidth),t.add(y)}}},minorSplitLine:function(e,t,n,r){var i=n.axis,a=n.getModel("minorSplitLine"),o=a.getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(u.length)for(var c=[],h=[],f=o.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,h[0]=v,h[1]=s.y+s.height):(c[0]=s.x,c[1]=v,h[0]=s.x+s.width,h[1]=v);var g=new Ei({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]},style:f,silent:!0});ly(g.shape,f.lineWidth),t.add(g)}},splitArea:function(e,t,n,r){KQ(e,t,n,r)}},QQ=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="xAxis",t}(JQ),Sbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=QQ.type,n}return t.type="yAxis",t}(JQ),wbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="grid",n}return t.prototype.render=function(n,r){this.group.removeAll(),n.get("show")&&this.group.add(new nn({shape:n.coordinateSystem.getRect(),style:te({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Zn),OH={offset:0};function ttt(e){e.registerComponentView(wbt),e.registerComponentModel(Jxt),e.registerCoordinateSystem("cartesian2d",abt),fy(e,"x",QO,OH),fy(e,"y",QO,OH),e.registerComponentView(QQ),e.registerComponentView(Sbt),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function Tbt(e){ue(ttt),e.registerSeriesModel(jxt),e.registerChartView(Zxt),e.registerLayout(I1("scatter"))}function Mbt(e){e.eachSeriesByType("radar",function(t){var n=t.getData(),r=[],i=t.coordinateSystem;if(i){var a=i.getIndicatorAxes();R(a,function(o,s){n.each(n.mapDimension(a[s].dim),function(l,u){r[u]=r[u]||[];var c=i.dataToPoint(l,s);r[u][s]=NH(c)?c:BH(i)})}),n.each(function(o){var s=_ft(r[o],function(l){return NH(l)})||BH(i);r[o].push(s.slice()),n.setItemLayout(o,r[o])})}})}function NH(e){return!isNaN(e[0])&&!isNaN(e[1])}function BH(e){return[e.cx,e.cy]}function Abt(e){var t=e.polar;if(t){ht(t)||(t=[t]);var n=[];R(t,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),e.radar=e.radar||[],ht(e.radar)||(e.radar=[e.radar]),e.radar.push(r)):n.push(r)}),e.polar=n}R(e.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Cbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=n.coordinateSystem,o=this.group,s=n.getData(),l=this._data;function u(f,d){var p=f.getItemVisual(d,"symbol")||"circle";if(p!=="none"){var v=d0(f.getItemVisual(d,"symbolSize")),g=Jr(p,-1,-1,2,2),m=f.getItemVisual(d,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:v[0]/2,scaleY:v[1]/2,rotation:m*Math.PI/180||0}),g}}function c(f,d,p,v,g,m){p.removeAll();for(var _=0;_<d.length-1;_++){var y=u(v,g);y&&(y.__dimIdx=_,f[_]?(y.setPosition(f[_]),Uv[m?"initProps":"updateProps"](y,{x:d[_][0],y:d[_][1]},n,g)):y.setPosition(d[_]),p.add(y))}}function h(f){return yt(f,function(d){return[a.cx,a.cy]})}s.diff(l).add(function(f){var d=s.getItemLayout(f);if(d){var p=new ja,v=new Ja,g={shape:{points:d}};p.shape.points=h(d),v.shape.points=h(d),xr(p,g,n,f),xr(v,g,n,f);var m=new he,_=new he;m.add(v),m.add(p),m.add(_),c(v.shape.points,d,_,s,f,!0),s.setItemGraphicEl(f,m)}}).update(function(f,d){var p=l.getItemGraphicEl(d),v=p.childAt(0),g=p.childAt(1),m=p.childAt(2),_={shape:{points:s.getItemLayout(f)}};_.shape.points&&(c(v.shape.points,_.shape.points,m,s,f,!1),Ol(g),Ol(v),Tn(v,_,n),Tn(g,_,n),s.setItemGraphicEl(f,p))}).remove(function(f){o.remove(l.getItemGraphicEl(f))}).execute(),s.eachItemGraphicEl(function(f,d){var p=s.getItemModel(d),v=f.childAt(0),g=f.childAt(1),m=f.childAt(2),_=s.getItemVisual(d,"style"),y=_.fill;o.add(f),v.useStyle(te(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:y})),ca(v,p,"lineStyle"),ca(g,p,"areaStyle");var x=p.getModel("areaStyle"),S=x.isEmpty()&&x.parentModel.isEmpty();g.ignore=S,R(["emphasis","select","blur"],function(A){var T=p.getModel([A,"areaStyle"]),M=T.isEmpty()&&T.parentModel.isEmpty();g.ensureState(A).ignore=M&&S}),g.useStyle(te(x.getAreaStyle(),{fill:y,opacity:.7,decal:_.decal}));var b=p.getModel("emphasis"),w=b.getModel("itemStyle").getItemStyle();m.eachChild(function(A){if(A instanceof Wi){var T=A.style;A.useStyle(ut({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},_))}else A.useStyle(_),A.setColor(y),A.style.strokeNoScale=!0;var M=A.ensureState("emphasis");M.style=ce(w);var C=s.getStore().get(s.getDimensionIndex(A.__dimIdx),d);(C==null||isNaN(C))&&(C=""),ha(A,Fi(p),{labelFetcher:s.hostModel,labelDataIndex:d,labelDimIndex:A.__dimIdx,defaultText:C,inheritColor:y,defaultOpacity:_.opacity})}),Vr(f,b.get("focus"),b.get("blurScope"),b.get("disabled"))}),this._data=s},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}(hn),Ebt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new P1(Vt(this.getData,this),Vt(this.getRawData,this))},t.prototype.getInitialData=function(n,r){return g0(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.coordinateSystem,s=o.getIndicatorAxes(),l=this.getData().getName(n),u=l===""?this.name:l,c=ZZ(this,n);return zi("section",{header:u,sortBlocks:!0,blocks:yt(s,function(h){var f=a.get(a.mapDimension(h.dim),n);return zi("nameValue",{markerType:"subItem",markerColor:c,name:h.name,value:f,sortParam:f})})})},t.prototype.getTooltipPosition=function(n){if(n!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(yt(i.dimensions,function(u){return r.mapDimension(u)}),n),o=0,s=a.length;o<s;o++)if(!isNaN(a[o])){var l=i.getIndicatorAxes();return i.coordToPoint(l[o].dataToCoord(a[o]),o)}}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(bn),p_=jQ.value;function sw(e,t){return te({show:t},e)}var Dbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),o=this.get("axisTick"),s=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),f=this.get("triggerEvent"),d=yt(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var v=l;p.color!=null&&(v=te({color:p.color},l));var g=Xt(ce(p),{boundaryGap:n,splitNumber:r,scale:i,axisLine:a,axisTick:o,axisLabel:s,name:p.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:v,triggerEvent:f},!1);if(Ft(c)){var m=g.name;g.name=c.replace("{value}",m??"")}else ae(c)&&(g.name=c(g.name,g));var _=new pn(g,null,this.ecModel);return ti(_,v0.prototype),_.mainType="radar",_.componentIndex=this.componentIndex,_},this);this._indicatorModels=d},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:Xt({lineStyle:{color:"#bbb"}},p_.axisLine),axisLabel:sw(p_.axisLabel,!1),axisTick:sw(p_.axisTick,!1),splitLine:sw(p_.splitLine,!0),splitArea:sw(p_.splitArea,!0),indicator:[]},t}(Ie),Ibt=["axisLine","axisTickLabel","axisName"],Lbt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=this.group;a.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},t.prototype._buildAxes=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes(),a=yt(i,function(o){var s=o.model.get("showName")?o.name:"",l=new Ga(o.model,{axisName:s,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return l});R(a,function(o){R(Ibt,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(n){var r=n.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=n.get("shape"),o=n.getModel("splitLine"),s=n.getModel("splitArea"),l=o.getModel("lineStyle"),u=s.getModel("areaStyle"),c=o.get("show"),h=s.get("show"),f=l.get("color"),d=u.get("color"),p=ht(f)?f:[f],v=ht(d)?d:[d],g=[],m=[];function _(L,P,B){var N=B%P.length;return L[N]=L[N]||[],N}if(a==="circle")for(var y=i[0].getTicksCoords(),x=r.cx,S=r.cy,b=0;b<y.length;b++){if(c){var w=_(g,p,b);g[w].push(new yh({shape:{cx:x,cy:S,r:y[b].coord}}))}if(h&&b<y.length-1){var w=_(m,v,b);m[w].push(new y1({shape:{cx:x,cy:S,r0:y[b].coord,r:y[b+1].coord}}))}}else for(var A,T=yt(i,function(L,P){var B=L.getTicksCoords();return A=A==null?B.length-1:Math.min(B.length-1,A),yt(B,function(N){return r.coordToPoint(N.coord,P)})}),M=[],b=0;b<=A;b++){for(var C=[],E=0;E<i.length;E++)C.push(T[E][b]);if(C[0]&&C.push(C[0].slice()),c){var w=_(g,p,b);g[w].push(new Ja({shape:{points:C}}))}if(h&&M){var w=_(m,v,b-1);m[w].push(new ja({shape:{points:C.concat(M)}}))}M=C.slice().reverse()}var D=l.getLineStyle(),I=u.getAreaStyle();R(m,function(L,P){this.group.add(Ps(L,{style:te({stroke:"none",fill:v[P%v.length]},I),silent:!0}))},this),R(g,function(L,P){this.group.add(Ps(L,{style:te({fill:"none",stroke:p[P%p.length]},D),silent:!0}))},this)},t.type="radar",t}(Zn),Pbt=function(e){it(t,e);function t(n,r,i){var a=e.call(this,n,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return t}(Qa),Rbt=function(){function e(t,n,r){this.dimensions=[],this._model=t,this._indicatorAxes=yt(t.getIndicatorModels(),function(i,a){var o="indicator_"+a,s=new Pbt(o,new Qc);return s.name=i.get("name"),s.model=i,i.axis=s,this.dimensions.push(o),s},this),this.resize(t,r)}return e.prototype.getIndicatorAxes=function(){return this._indicatorAxes},e.prototype.dataToPoint=function(t,n){var r=this._indicatorAxes[n];return this.coordToPoint(r.dataToCoord(t),n)},e.prototype.coordToPoint=function(t,n){var r=this._indicatorAxes[n],i=r.angle,a=this.cx+t*Math.cos(i),o=this.cy-t*Math.sin(i);return[a,o]},e.prototype.pointToData=function(t){var n=t[0]-this.cx,r=t[1]-this.cy,i=Math.sqrt(n*n+r*r);n/=i,r/=i;for(var a=Math.atan2(-r,n),o=1/0,s,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],h=Math.abs(a-c.angle);h<o&&(s=c,l=u,o=h)}return[l,+(s&&s.coordToData(i))]},e.prototype.resize=function(t,n){var r=t.get("center"),i=n.getWidth(),a=n.getHeight(),o=Math.min(i,a)/2;this.cx=Dt(r[0],i),this.cy=Dt(r[1],a),this.startAngle=t.get("startAngle")*Math.PI/180;var s=t.get("radius");(Ft(s)||xn(s))&&(s=[0,s]),this.r0=Dt(s[0],o),this.r=Dt(s[1],o),R(this._indicatorAxes,function(l,u){l.setExtent(this.r0,this.r);var c=this.startAngle+u*Math.PI*2/this._indicatorAxes.length;c=Math.atan2(Math.sin(c),Math.cos(c)),l.angle=c},this)},e.prototype.update=function(t,n){var r=this._indicatorAxes,i=this._model;R(r,function(s){s.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(s,l){if(!(s.get("coordinateSystem")!=="radar"||t.getComponent("radar",s.get("radarIndex"))!==i)){var u=s.getData();R(r,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),o=new Qc;o.setExtent(0,a),o.setInterval(1),R(r,function(s,l){YQ(s.scale,s.model,o)})},e.prototype.convertToPixel=function(t,n,r){return console.warn("Not implemented."),null},e.prototype.convertFromPixel=function(t,n,r){return console.warn("Not implemented."),null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.create=function(t,n){var r=[];return t.eachComponent("radar",function(i){var a=new e(i,t,n);r.push(a),i.coordinateSystem=a}),t.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},e.dimensions=[],e}();function Obt(e){e.registerCoordinateSystem("radar",Rbt),e.registerComponentModel(Dbt),e.registerComponentView(Lbt),e.registerVisual({seriesType:"radar",reset:function(t){var n=t.getData();n.each(function(r){n.setItemVisual(r,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function Nbt(e){ue(Obt),e.registerChartView(Cbt),e.registerSeriesModel(Ebt),e.registerLayout(Mbt),e.registerProcessor(L1("radar")),e.registerPreprocessor(Abt)}var kH="\0_ec_interaction_mutex";function Bbt(e,t,n){var r=Hk(e);r[t]=n}function kbt(e,t,n){var r=Hk(e),i=r[t];i===n&&(r[t]=null)}function FH(e,t){return!!Hk(e)[t]}function Hk(e){return e[kH]||(e[kH]={})}Ju({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Zr);var R1=function(e){it(t,e);function t(n){var r=e.call(this)||this;r._zr=n;var i=Vt(r._mousedownHandler,r),a=Vt(r._mousemoveHandler,r),o=Vt(r._mouseupHandler,r),s=Vt(r._mousewheelHandler,r),l=Vt(r._pinchHandler,r);return r.enable=function(u,c){this.disable(),this._opt=te(ce(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(n.on("mousedown",i),n.on("mousemove",a),n.on("mouseup",o)),(u===!0||u==="scale"||u==="zoom")&&(n.on("mousewheel",s),n.on("pinch",l))},r.disable=function(){n.off("mousedown",i),n.off("mousemove",a),n.off("mouseup",o),n.off("mousewheel",s),n.off("pinch",l)},r}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(n){this.pointerChecker=n},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(n){if(!h4(n)){for(var r=n.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=n.offsetX,a=n.offsetY;this.pointerChecker&&this.pointerChecker(n,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},t.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!nM("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||FH(this._zr,"globalPan"))){var r=n.offsetX,i=n.offsetY,a=this._x,o=this._y,s=r-a,l=i-o;this._x=r,this._y=i,this._opt.preventDefaultMouseMove&&jc(n.event),ett(this,"pan","moveOnMouseMove",n,{dx:s,dy:l,oldX:a,oldY:o,newX:r,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(n){h4(n)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(n){var r=nM("zoomOnMouseWheel",n,this._opt),i=nM("moveOnMouseWheel",n,this._opt),a=n.wheelDelta,o=Math.abs(a),s=n.offsetX,l=n.offsetY;if(!(a===0||!r&&!i)){if(r){var u=o>3?1.4:o>1?1.2:1.1,c=a>0?u:1/u;gI(this,"zoom","zoomOnMouseWheel",n,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var h=Math.abs(a),f=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);gI(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:f,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(n){if(!FH(this._zr,"globalPan")){var r=n.pinchScale>1?1.1:1/1.1;gI(this,"zoom",null,n,{scale:r,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},t}(qs);function gI(e,t,n,r,i){e.pointerChecker&&e.pointerChecker(r,i.originX,i.originY)&&(jc(r.event),ett(e,t,n,r,i))}function ett(e,t,n,r,i){i.isAvailableBehavior=Vt(nM,null,n,r),e.trigger(t,i)}function nM(e,t,n){var r=n[e];return!e||r&&(!Ft(r)||t.event[r+"Key"])}function Wk(e,t,n){var r=e.target;r.x+=t,r.y+=n,r.dirty()}function $k(e,t,n,r){var i=e.target,a=e.zoomLimit,o=e.zoom=e.zoom||1;if(o*=t,a){var s=a.min||0,l=a.max||1/0;o=Math.max(Math.min(l,o),s)}var u=o/e.zoom;e.zoom=o,i.x-=(n-i.x)*(u-1),i.y-=(r-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Fbt={axisPointer:1,tooltip:1,brush:1};function DE(e,t,n){var r=t.getComponentByElement(e.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!Fbt.hasOwnProperty(r.mainType)&&i&&i.model!==n}function ntt(e){if(Ft(e)){var t=new DOMParser;e=t.parseFromString(e,"text/xml")}var n=e;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var mI,hA={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},zH=Je(hA),fA={"alignment-baseline":"textBaseline","stop-color":"stopColor"},UH=Je(fA),zbt=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(t,n){n=n||{};var r=ntt(t);this._defsUsePending=[];var i=new he;this._root=i;var a=[],o=r.getAttribute("viewBox")||"",s=parseFloat(r.getAttribute("width")||n.width),l=parseFloat(r.getAttribute("height")||n.height);isNaN(s)&&(s=null),isNaN(l)&&(l=null),No(r,i,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;Gbt(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(o){var f=IE(o);f.length>=4&&(c={x:parseFloat(f[0]||0),y:parseFloat(f[1]||0),width:parseFloat(f[2]),height:parseFloat(f[3])})}if(c&&s!=null&&l!=null&&(h=itt(c,{x:0,y:0,width:s,height:l}),!n.ignoreViewBox)){var d=i;i=new he,i.add(d),d.scaleX=d.scaleY=h.scale,d.x=h.x,d.y=h.y}return!n.ignoreRootClip&&s!=null&&l!=null&&i.setClipPath(new nn({shape:{x:0,y:0,width:s,height:l}})),{root:i,width:s,height:l,viewBoxRect:c,viewBoxTransform:h,named:a}},e.prototype._parseNode=function(t,n,r,i,a,o){var s=t.nodeName.toLowerCase(),l,u=i;if(s==="defs"&&(a=!0),s==="text"&&(o=!0),s==="defs"||s==="switch")l=n;else{if(!a){var c=mI[s];if(c&&$t(mI,s)){l=c.call(this,t,n);var h=t.getAttribute("name");if(h){var f={name:h,namedFrom:null,svgNodeTagLower:s,el:l};r.push(f),s==="g"&&(u=f)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:l});n.add(l)}}var d=VH[s];if(d&&$t(VH,s)){var p=d.call(this,t),v=t.getAttribute("id");v&&(this._defs[v]=p)}}if(l&&l.isGroup)for(var g=t.firstChild;g;)g.nodeType===1?this._parseNode(g,l,r,u,a,o):g.nodeType===3&&o&&this._parseText(g,l),g=g.nextSibling},e.prototype._parseText=function(t,n){var r=new sy({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});is(n,r),No(t,r,this._defsUsePending,!1,!1),Ubt(r,n);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var s=r.getBoundingRect();return this._textX+=s.width,n.add(r),r},e.internalField=function(){mI={g:function(t,n){var r=new he;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r},rect:function(t,n){var r=new nn;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,n){var r=new yh;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,n){var r=new Ei;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,n){var r=new uE;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,n){var r=t.getAttribute("points"),i;r&&(i=WH(r));var a=new ja({shape:{points:i||[]},silent:!0});return is(n,a),No(t,a,this._defsUsePending,!1,!1),a},polyline:function(t,n){var r=t.getAttribute("points"),i;r&&(i=WH(r));var a=new Ja({shape:{points:i||[]},silent:!0});return is(n,a),No(t,a,this._defsUsePending,!1,!1),a},image:function(t,n){var r=new Wi;return is(n,r),No(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,n){var r=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(o);var s=new he;return is(n,s),No(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,n){var r=t.getAttribute("x"),i=t.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",s=new he;return is(n,s),No(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(o),s},path:function(t,n){var r=t.getAttribute("d")||"",i=XK(r);return is(n,i),No(t,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),e}(),VH={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),n=parseInt(e.getAttribute("y1")||"0",10),r=parseInt(e.getAttribute("x2")||"10",10),i=parseInt(e.getAttribute("y2")||"0",10),a=new x1(t,n,r,i);return GH(e,a),HH(e,a),a},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),n=parseInt(e.getAttribute("cy")||"0",10),r=parseInt(e.getAttribute("r")||"0",10),i=new KK(t,n,r);return GH(e,i),HH(e,i),i}};function GH(e,t){var n=e.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(t.global=!0)}function HH(e,t){for(var n=e.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var r=n.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};rtt(n,a,a);var o=a.stopColor||n.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:i,color:o})}n=n.nextSibling}}function is(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),te(t.__inheritedStyle,e.__inheritedStyle))}function WH(e){for(var t=IE(e),n=[],r=0;r<t.length;r+=2){var i=parseFloat(t[r]),a=parseFloat(t[r+1]);n.push([i,a])}return n}function No(e,t,n,r,i){var a=t,o=a.__inheritedStyle=a.__inheritedStyle||{},s={};e.nodeType===1&&($bt(e,t),rtt(e,o,s),r||Xbt(e,o,s)),a.style=a.style||{},o.fill!=null&&(a.style.fill=$H(a,"fill",o.fill,n)),o.stroke!=null&&(a.style.stroke=$H(a,"stroke",o.stroke,n)),R(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){o[l]!=null&&(a.style[l]=parseFloat(o[l]))}),R(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){o[l]!=null&&(a.style[l]=o[l])}),i&&(a.__selfStyle=s),o.lineDash&&(a.style.lineDash=yt(IE(o.lineDash),function(l){return parseFloat(l)})),(o.visibility==="hidden"||o.visibility==="collapse")&&(a.invisible=!0),o.display==="none"&&(a.ignore=!0)}function Ubt(e,t){var n=t.__selfStyle;if(n){var r=n.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),e.style.textBaseline=i}var a=t.__inheritedStyle;if(a){var o=a.textAlign,s=o;o&&(o==="middle"&&(s="center"),e.style.textAlign=s)}}var Vbt=/^url\(\s*#(.*?)\)/;function $H(e,t,n,r){var i=n&&n.match(Vbt);if(i){var a=Sl(i[1]);r.push([e,t,a]);return}return n==="none"&&(n=null),n}function Gbt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r[0].style[r[1]]=e[r[2]]}}var Hbt=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function IE(e){return e.match(Hbt)||[]}var Wbt=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,yI=Math.PI/180;function $bt(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var r=[],i=null;n.replace(Wbt,function(h,f,d){return r.push(f,d),""});for(var a=r.length-1;a>0;a-=2){var o=r[a],s=r[a-1],l=IE(o);switch(i=i||_o(),s){case"translate":ku(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":LB(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Fv(i,i,-parseFloat(l[0])*yI,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*yI);Uc(i,[1,0,u,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*yI);Uc(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}t.setLocalTransform(i)}}var XH=/([^\s:;]+)\s*:\s*([^:;]+)/g;function rtt(e,t,n){var r=e.getAttribute("style");if(r){XH.lastIndex=0;for(var i;(i=XH.exec(r))!=null;){var a=i[1],o=$t(hA,a)?hA[a]:null;o&&(t[o]=i[2]);var s=$t(fA,a)?fA[a]:null;s&&(n[s]=i[2])}}}function Xbt(e,t,n){for(var r=0;r<zH.length;r++){var i=zH[r],a=e.getAttribute(i);a!=null&&(t[hA[i]]=a)}for(var r=0;r<UH.length;r++){var i=UH[r],a=e.getAttribute(i);a!=null&&(n[fA[i]]=a)}}function itt(e,t){var n=t.width/e.width,r=t.height/e.height,i=Math.min(n,r);return{scale:i,x:-(e.x+e.width/2)*i+(t.x+t.width/2),y:-(e.y+e.height/2)*i+(t.y+t.height/2)}}function jbt(e,t){var n=new zbt;return n.parse(e,t)}var Ybt=jt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),qbt=function(){function e(t,n){this.type="geoSVG",this._usedGraphicMap=jt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=ntt(n)}return e.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=Zbt(t.named),r=n.regions,i=n.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(t){var n,r;try{n=t&&jbt(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=n.root,Wa(r!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var i=new he;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=n.width,o=n.height,s=n.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,f=void 0;if(a!=null?(u=0,h=a):s&&(u=s.x,h=s.width),o!=null?(c=0,f=o):s&&(c=s.y,f=s.height),u==null||c==null){var d=r.getBoundingRect();u==null&&(u=d.x,h=d.width),c==null&&(c=d.y,f=d.height)}l=this._boundingRect=new Ae(u,c,h,f)}if(s){var p=itt(s,l);r.scaleX=r.scaleY=p.scale,r.x=p.x,r.y=p.y}i.setClipPath(new nn({shape:l.plain()}));var v=[];return R(n.named,function(g){Ybt.get(g.svgNodeTagLower)!=null&&(v.push(g),Kbt(g.el))}),{root:i,boundingRect:l,named:v}},e.prototype.useGraphic=function(t){var n=this._usedGraphicMap,r=n.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(t,r),r)},e.prototype.freeGraphic=function(t){var n=this._usedGraphicMap,r=n.get(t);r&&(n.removeKey(t),this._freedGraphics.push(r))},e}();function Kbt(e){e.silent=!1,e.isGroup&&e.traverse(function(t){t.silent=!1})}function Zbt(e){var t=[],n=jt();return R(e,function(r){if(r.namedFrom==null){var i=new q0t(r.name,r.el);t.push(i),n.set(r.name,i)}}),{regions:t,regionsMap:n}}var iN=[126,25],jH="",hp=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var qd=0;qd<hp.length;qd++)for(var ug=0;ug<hp[qd].length;ug++)hp[qd][ug][0]/=10.5,hp[qd][ug][1]/=-10.5/.75,hp[qd][ug][0]+=iN[0],hp[qd][ug][1]+=iN[1];function Jbt(e,t){if(e==="china"){for(var n=0;n<t.length;n++)if(t[n].name===jH)return;t.push(new tQ(jH,yt(hp,function(r){return{type:"polygon",exterior:r}}),iN))}}var Qbt={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function att(e,t){if(e==="china"){var n=Qbt[t.name];if(n){var r=t.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/(10.5/.75),t.setCenter(r)}}}var t1t=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function e1t(e,t){e==="china"&&t.name===""&&t.geometries.push({type:"polygon",exterior:t1t[0]})}var n1t="name",r1t=function(){function e(t,n,r){this.type="geoJSON",this._parsedMap=jt(),this._mapName=t,this._specialAreas=r,this._geoJSON=a1t(n)}return e.prototype.load=function(t,n){n=n||n1t;var r=this._parsedMap.get(n);if(!r){var i=this._parseToRegions(n);r=this._parsedMap.set(n,{regions:i,boundingRect:i1t(i)})}var a=jt(),o=[];return R(r.regions,function(s){var l=s.name;t&&$t(t,l)&&(s=s.cloneShallow(l=t[l])),o.push(s),a.set(l,s)}),{regions:o,boundingRect:r.boundingRect||new Ae(0,0,0,0),regionsMap:a}},e.prototype._parseToRegions=function(t){var n=this._mapName,r=this._geoJSON,i;try{i=r?YO(r,t):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return Jbt(n,i),R(i,function(a){var o=a.name;att(n,a),e1t(n,a);var s=this._specialAreas&&this._specialAreas[o];s&&a.transformTo(s.left,s.top,s.width,s.height)},this),i},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function i1t(e){for(var t,n=0;n<e.length;n++){var r=e[n].getBoundingRect();t=t||r.clone(),t.union(r)}return t}function a1t(e){return Ft(e)?typeof JSON<"u"&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e}var v_=jt();const th={registerMap:function(e,t,n){if(t.svg){var r=new qbt(e,t.svg);v_.set(e,r)}else{var i=t.geoJson||t.geoJSON;i&&!t.features?n=t.specialAreas:i=t;var r=new r1t(e,i,n);v_.set(e,r)}},getGeoResource:function(e){return v_.get(e)},getMapForUser:function(e){var t=v_.get(e);return t&&t.type==="geoJSON"&&t.getMapForUser()},load:function(e,t,n){var r=v_.get(e);if(r)return r.load(t,n)}};var Xk=["rect","circle","line","ellipse","polygon","polyline","path"],o1t=jt(Xk),s1t=jt(Xk.concat(["g"])),l1t=jt(Xk.concat(["g"])),ott=vn();function lw(e){var t=e.getItemStyle(),n=e.get("areaColor");return n!=null&&(t.fill=n),t}function YH(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var stt=function(){function e(t){var n=new he;this.uid=o0("ec_map_draw"),this._controller=new R1(t.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new he),n.add(this._svgGroup=new he)}return e.prototype.draw=function(t,n,r,i,a){var o=t.mainType==="geo",s=t.getData&&t.getData();o&&n.eachComponent({mainType:"series",subType:"map"},function(m){!s&&m.getHostGeoModel()===t&&(s=m.getData())});var l=t.coordinateSystem,u=this._regionsGroup,c=this.group,h=l.getTransformInfo(),f=h.raw,d=h.roam,p=!u.childAt(0)||a;p?(c.x=d.x,c.y=d.y,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.dirty()):Tn(c,d,t);var v=s&&s.getVisual("visualMeta")&&s.getVisual("visualMeta").length>0,g={api:r,geo:l,mapOrGeoModel:t,data:s,isVisualEncodedByVisualMap:v,isGeo:o,transformInfoRaw:f};l.resourceType==="geoJSON"?this._buildGeoJSON(g):l.resourceType==="geoSVG"&&this._buildSVG(g),this._updateController(t,n,r),this._updateMapSelectHandler(t,u,r,i)},e.prototype._buildGeoJSON=function(t){var n=this._regionsGroupByName=jt(),r=jt(),i=this._regionsGroup,a=t.transformInfoRaw,o=t.mapOrGeoModel,s=t.data,l=t.geo.projection,u=l&&l.stream;function c(d,p){return p&&(d=p(d)),d&&[d[0]*a.scaleX+a.x,d[1]*a.scaleY+a.y]}function h(d){for(var p=[],v=!u&&l&&l.project,g=0;g<d.length;++g){var m=c(d[g],v);m&&p.push(m)}return p}function f(d){return{shape:{points:h(d)}}}i.removeAll(),R(t.geo.regions,function(d){var p=d.name,v=n.get(p),g=r.get(p)||{},m=g.dataIdx,_=g.regionModel;v||(v=n.set(p,new he),i.add(v),m=s?s.indexOfName(p):null,_=t.isGeo?o.getRegionModel(p):s?s.getItemModel(m):null,r.set(p,{dataIdx:m,regionModel:_}));var y=[],x=[];R(d.geometries,function(w){if(w.type==="polygon"){var A=[w.exterior].concat(w.interiors||[]);u&&(A=tW(A,u)),R(A,function(M){y.push(new ja(f(M)))})}else{var T=w.points;u&&(T=tW(T,u,!0)),R(T,function(M){x.push(new Ja(f(M)))})}});var S=c(d.getCenter(),l&&l.project);function b(w,A){if(w.length){var T=new jB({culling:!0,segmentIgnoreThreshold:1,shape:{paths:w}});v.add(T),qH(t,T,m,_),KH(t,T,p,_,o,m,S),A&&(YH(T),R(T.states,YH))}}b(y),b(x,!0)}),n.each(function(d,p){var v=r.get(p),g=v.dataIdx,m=v.regionModel;ZH(t,d,p,m,o,g),JH(t,d,p,m,o),QH(t,d,p,m,o)},this)},e.prototype._buildSVG=function(t){var n=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var i=this._svgDispatcherMap=jt(),a=!1;R(this._svgGraphicRecord.named,function(o){var s=o.name,l=t.mapOrGeoModel,u=t.data,c=o.svgNodeTagLower,h=o.el,f=u?u.indexOfName(s):null,d=l.getRegionModel(s);if(o1t.get(c)!=null&&h instanceof Gs&&qH(t,h,f,d),h instanceof Gs&&(h.culling=!0),h.z2EmphasisLift=0,!o.namedFrom&&(l1t.get(c)!=null&&KH(t,h,s,d,l,f,null),ZH(t,h,s,d,l,f),JH(t,h,s,d,l),s1t.get(c)!=null)){var p=QH(t,h,s,d,l);p==="self"&&(a=!0);var v=i.get(s)||i.set(s,[]);v.push(h)}},this),this._enableBlurEntireSVG(a,t)},e.prototype._enableBlurEntireSVG=function(t,n){if(t&&n.isGeo){var r=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){pv(a);var o=a.ensureState("blur").style||{};o.opacity==null&&i!=null&&(o.opacity=i),a.ensureState("emphasis")}})}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(t,n){if(t==null)return[];var r=n.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(t);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},e.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},e.prototype._useSVG=function(t){var n=th.getGeoResource(t);if(n&&n.type==="geoSVG"){var r=n.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},e.prototype._freeSVG=function(){var t=this._svgMapName;if(t!=null){var n=th.getGeoResource(t);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(t,n,r){var i=t.coordinateSystem,a=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=i.getZoom(),a.enable(t.get("roam")||!1);var s=t.mainType;function l(){var u={type:"geoRoam",componentType:s};return u[s+"Id"]=t.id,u}a.off("pan").on("pan",function(u){this._mouseDownFlag=!1,Wk(o,u.dx,u.dy),r.dispatchAction(ut(l(),{dx:u.dx,dy:u.dy,animation:{duration:0}}))},this),a.off("zoom").on("zoom",function(u){this._mouseDownFlag=!1,$k(o,u.scale,u.originX,u.originY),r.dispatchAction(ut(l(),{zoom:u.scale,originX:u.originX,originY:u.originY,animation:{duration:0}}))},this),a.setPointerChecker(function(u,c,h){return i.containPoint([c,h])&&!DE(u,r,t)})},e.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var n=t.getTextContent();n&&(n.ignore=ott(n).ignore)})},e.prototype._updateMapSelectHandler=function(t,n,r,i){var a=this;n.off("mousedown"),n.off("click"),t.get("selectedMode")&&(n.on("mousedown",function(){a._mouseDownFlag=!0}),n.on("click",function(o){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},e}();function qH(e,t,n,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),o=r.getModel(["blur","itemStyle"]),s=r.getModel(["select","itemStyle"]),l=lw(i),u=lw(a),c=lw(s),h=lw(o),f=e.data;if(f){var d=f.getItemVisual(n,"style"),p=f.getItemVisual(n,"decal");e.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),p&&(l.decal=cy(p,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=h,pv(t)}function KH(e,t,n,r,i,a,o){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),a)),c=s&&s.getItemLayout(a);if(l||u||c&&c.showLabel){var h=l?n:a,f=void 0;(!s||a>=0)&&(f=i);var d=o?{normal:{align:"center",verticalAlign:"middle"}}:null;ha(t,Fi(r),{labelFetcher:f,labelDataIndex:h,defaultText:n},d);var p=t.getTextContent();if(p&&(ott(p).ignore=p.ignore,t.textConfig&&o)){var v=t.getBoundingRect().clone();t.textConfig.layoutRect=v,t.textConfig.position=[(o[0]-v.x)/v.width*100+"%",(o[1]-v.y)/v.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function ZH(e,t,n,r,i,a){e.data?e.data.setItemGraphicEl(a,t):fe(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:n,region:r&&r.option||{}}}function JH(e,t,n,r,i){e.data||i0({el:t,componentModel:i,itemName:n,itemTooltipOption:r.get("tooltip")})}function QH(e,t,n,r,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),o=a.get("focus");return Vr(t,o,a.get("blurScope"),a.get("disabled")),e.isGeo&&pvt(t,i,n),o}function tW(e,t,n){var r=[],i;function a(){i=[]}function o(){i.length&&(r.push(i),i=[])}var s=t({polygonStart:a,polygonEnd:o,lineStart:a,lineEnd:o,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!n&&s.polygonStart(),R(e,function(l){s.lineStart();for(var u=0;u<l.length;u++)s.point(l[u][0],l[u][1]);s.lineEnd()}),!n&&s.polygonEnd(),r}var u1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var o=this.group;if(o.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===n.id){var s=this._mapDraw;s&&o.add(s.group)}else if(n.needsDrawMap){var s=this._mapDraw||new stt(i);o.add(s.group),s.draw(n,r,i,this,a),this._mapDraw=s}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(n,r,i)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(n,r,i){var a=n.originalData,o=this.group;a.each(a.mapDimension("value"),function(s,l){if(!isNaN(s)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,f=new yh({style:{fill:n.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:n0+1)});if(!h){var d=n.mainSeries.getData(),p=a.getName(l),v=d.indexOfName(p),g=a.getItemModel(l),m=g.getModel("label"),_=d.getItemGraphicEl(v);ha(f,Fi(g),{labelFetcher:{getFormattedLabel:function(y,x){return n.getFormattedLabel(v,x)}},defaultText:p}),f.disableLabelAnimation=!0,m.get("position")||f.setTextConfig({position:"bottom"}),_.onHoverStateChange=function(y){HM(f,y)}}o.add(f)}}})},t.type="map",t}(hn),c1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,o=a.getRegion(i);return o&&a.dataToPoint(o.getCenter())}},n}return t.prototype.getInitialData=function(n){for(var r=g0(this,{coordDimensions:["value"],encodeDefaulter:_e(ik,this)}),i=jt(),a=[],o=0,s=r.count();o<s;o++){var l=r.getName(o);i.set(l,!0)}var u=th.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return R(u.regions,function(c){var h=c.name;i.get(h)||a.push(h)}),r.appendValues([],a),r},t.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(n){var r=this.getData();return r.get(r.mapDimension("value"),n)},t.prototype.getRegionModel=function(n){var r=this.getData();return r.getItemModel(r.indexOfName(n))},t.prototype.formatTooltip=function(n,r,i){for(var a=this.getData(),o=this.getRawValue(n),s=a.getName(n),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(s),f=a.mapDimension("value");isNaN(l[c].originalData.get(f,h))||u.push(l[c].name)}return zi("section",{header:u.join(", "),noHeader:!u.length,blocks:[zi("nameValue",{name:s,value:o})]})},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.getLegendIcon=function(n){var r=n.icon||"roundRect",i=Jr(r,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return i.setStyle(n.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill="#fff",i.style.lineWidth=2),i},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(bn);function h1t(e,t){var n={};return R(e,function(r){r.each(r.mapDimension("value"),function(i,a){var o="ec-"+r.getName(a);n[o]=n[o]||[],isNaN(i)||n[o].push(i)})}),e[0].map(e[0].mapDimension("value"),function(r,i){for(var a="ec-"+e[0].getName(i),o=0,s=1/0,l=-1/0,u=n[a].length,c=0;c<u;c++)s=Math.min(s,n[a][c]),l=Math.max(l,n[a][c]),o+=n[a][c];var h;return t==="min"?h=s:t==="max"?h=l:t==="average"?h=o/u:h=o,u===0?NaN:h})}function f1t(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getHostGeoModel(),i=r?"o"+r.id:"i"+n.getMapType();(t[i]=t[i]||[]).push(n)}),R(t,function(n,r){for(var i=h1t(yt(n,function(o){return o.getData()}),n[0].get("mapValueCalculation")),a=0;a<n.length;a++)n[a].originalData=n[a].getData();for(var a=0;a<n.length;a++)n[a].seriesGroup=n,n[a].needsDrawMap=a===0&&!n[a].getHostGeoModel(),n[a].setData(i.cloneShallow()),n[a].mainSeries=n[0]})}function d1t(e){var t={};e.eachSeriesByType("map",function(n){var r=n.getMapType();if(!(n.getHostGeoModel()||t[r])){var i={};R(n.seriesGroup,function(o){var s=o.coordinateSystem,l=o.originalData;o.get("showLegendSymbol")&&e.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),f=s.getRegion(h);if(!(!f||isNaN(u))){var d=i[h]||0,p=s.dataToPoint(f.getCenter());i[h]=d+1,l.setItemLayout(c,{point:p,offset:d})}})});var a=n.getData();a.each(function(o){var s=a.getName(o),l=a.getItemLayout(o)||{};l.showLabel=!i[s],a.setItemLayout(o,l)}),t[r]=!0}})}var eW=Oi,O1=function(e){it(t,e);function t(n){var r=e.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new Oc,r._rawTransformable=new Oc,r.name=n,r}return t.prototype.setBoundingRect=function(n,r,i,a){return this._rect=new Ae(n,r,i,a),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(n,r,i,a){this._transformTo(n,r,i,a),this._viewRect=new Ae(n,r,i,a)},t.prototype._transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=this._rawTransformable;s.transform=o.calculateTransform(new Ae(n,r,i,a));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(n,r){n&&(this._center=[Dt(n[0],r.getWidth()),Dt(n[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(n){n=n||1;var r=this.zoomLimit;r&&(r.max!=null&&(n=Math.min(r.max,n)),r.min!=null&&(n=Math.max(r.min,n))),this._zoom=n,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),r=n.x+n.width/2,i=n.y+n.height/2;return[r,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,i=this.getDefaultCenter(),a=this.getCenter(),o=this.getZoom();a=Oi([],a,n),i=Oi([],i,n),r.originX=a[0],r.originY=a[1],r.x=i[0]-a[0],r.y=i[1]-a[1],r.scaleX=r.scaleY=o,this._updateTransform()},t.prototype._updateTransform=function(){var n=this._roamTransformable,r=this._rawTransformable;r.parent=n,n.updateTransform(),r.updateTransform(),IB(this.transform||(this.transform=[]),r.transform||_o()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],zv(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var n=this._rawTransformable,r=this._roamTransformable,i=new Oc;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},t.prototype.dataToPoint=function(n,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?eW(i,n,a):Na(i,n)},t.prototype.pointToData=function(n){var r=this.invTransform;return r?eW([],n,r):[n[0],n[1]]},t.prototype.convertToPixel=function(n,r,i){var a=nW(r);return a===this?a.dataToPoint(i):null},t.prototype.convertFromPixel=function(n,r,i){var a=nW(r);return a===this?a.pointToData(i):null},t.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},t.dimensions=["x","y"],t}(Oc);function nW(e){var t=e.seriesModel;return t?t.coordinateSystem:null}var p1t={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},ltt=["lng","lat"],aN=function(e){it(t,e);function t(n,r,i){var a=e.call(this,n)||this;a.dimensions=ltt,a.type="geo",a._nameCoordMap=jt(),a.map=r;var o=i.projection,s=th.load(r,i.nameMap,i.nameProperty),l=th.getGeoResource(r);a.resourceType=l?l.type:null;var u=a.regions=s.regions,c=p1t[l.type];a._regionsMap=s.regionsMap,a.regions=s.regions,a.projection=o;var h;if(o)for(var f=0;f<u.length;f++){var d=u[f].getBoundingRect(o);h=h||d.clone(),h.union(d)}else h=s.boundingRect;return a.setBoundingRect(h.x,h.y,h.width,h.height),a.aspectScale=o?1:xe(i.aspectScale,c.aspectScale),a._invertLongitute=o?!1:c.invertLongitute,a}return t.prototype._transformTo=function(n,r,i,a){var o=this.getBoundingRect(),s=this._invertLongitute;o=o.clone(),s&&(o.y=-o.y-o.height);var l=this._rawTransformable;l.transform=o.calculateTransform(new Ae(n,r,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,s&&(l.scaleY=-l.scaleY),this._updateTransform()},t.prototype.getRegion=function(n){return this._regionsMap.get(n)},t.prototype.getRegionByCoord=function(n){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(n))return r[i]}},t.prototype.addGeoCoord=function(n,r){this._nameCoordMap.set(n,r)},t.prototype.getGeoCoord=function(n){var r=this._regionsMap.get(n);return this._nameCoordMap.get(n)||r&&r.getCenter()},t.prototype.dataToPoint=function(n,r,i){if(Ft(n)&&(n=this.getGeoCoord(n)),n){var a=this.projection;return a&&(n=a.project(n)),n&&this.projectedToPoint(n,r,i)}},t.prototype.pointToData=function(n){var r=this.projection;return r&&(n=r.unproject(n)),n&&this.pointToProjected(n)},t.prototype.pointToProjected=function(n){return e.prototype.pointToData.call(this,n)},t.prototype.projectedToPoint=function(n,r,i){return e.prototype.dataToPoint.call(this,n,r,i)},t.prototype.convertToPixel=function(n,r,i){var a=rW(r);return a===this?a.dataToPoint(i):null},t.prototype.convertFromPixel=function(n,r,i){var a=rW(r);return a===this?a.pointToData(i):null},t}(O1);ti(aN,O1);function rW(e){var t=e.geoModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",ai).models[0]||{}).coordinateSystem:null}function iW(e,t){var n=e.get("boundingCoords");if(n!=null){var r=n[0],i=n[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var o=r[0],s=r[1],l=i[0],u=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var c=function(b,w,A,T){for(var M=A-b,C=T-w,E=0;E<=100;E++){var D=E/100,I=a.project([b+M*D,w+C*D]);mf(r,r,I),yf(i,i,I)}};c(o,s,l,s),c(l,s,l,u),c(l,u,o,u),c(o,u,l,s)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var h=this.getBoundingRect(),f=e.get("layoutCenter"),d=e.get("layoutSize"),p=t.getWidth(),v=t.getHeight(),g=h.width/h.height*this.aspectScale,m=!1,_,y;f&&d&&(_=[Dt(f[0],p),Dt(f[1],v)],y=Dt(d,Math.min(p,v)),!isNaN(_[0])&&!isNaN(_[1])&&!isNaN(y)&&(m=!0));var x;if(m)x={},g>1?(x.width=y,x.height=y/g):(x.height=y,x.width=y*g),x.y=_[1]-x.height/2,x.x=_[0]-x.width/2;else{var S=e.getBoxLayoutParams();S.aspect=g,x=Gr(S,{width:p,height:v})}this.setViewRect(x.x,x.y,x.width,x.height),this.setCenter(e.get("center"),t),this.setZoom(e.get("zoom"))}function v1t(e,t){R(t.get("geoCoord"),function(n,r){e.addGeoCoord(r,n)})}var g1t=function(){function e(){this.dimensions=ltt}return e.prototype.create=function(t,n){var r=[];function i(o){return{nameProperty:o.get("nameProperty"),aspectScale:o.get("aspectScale"),projection:o.get("projection")}}t.eachComponent("geo",function(o,s){var l=o.get("map"),u=new aN(l+s,l,ut({nameMap:o.get("nameMap")},i(o)));u.zoomLimit=o.get("scaleLimit"),r.push(u),o.coordinateSystem=u,u.model=o,u.resize=iW,u.resize(o,n)}),t.eachSeries(function(o){var s=o.get("coordinateSystem");if(s==="geo"){var l=o.get("geoIndex")||0;o.coordinateSystem=r[l]}});var a={};return t.eachSeriesByType("map",function(o){if(!o.getHostGeoModel()){var s=o.getMapType();a[s]=a[s]||[],a[s].push(o)}}),R(a,function(o,s){var l=yt(o,function(c){return c.get("nameMap")}),u=new aN(s,s,ut({nameMap:MB(l)},i(o[0])));u.zoomLimit=Qi.apply(null,yt(o,function(c){return c.get("scaleLimit")})),r.push(u),u.resize=iW,u.resize(o[0],n),R(o,function(c){c.coordinateSystem=u,v1t(u,c)})}),r},e.prototype.getFilledRegions=function(t,n,r,i){for(var a=(t||[]).slice(),o=jt(),s=0;s<a.length;s++)o.set(a[s].name,a[s]);var l=th.load(n,r,i);return R(l.regions,function(u){var c=u.name;!o.get(c)&&a.push({name:c})}),a},e}(),utt=new g1t,m1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r,i){var a=th.getGeoResource(n.map);if(a&&a.type==="geoJSON"){var o=n.itemStyle=n.itemStyle||{};"color"in o||(o.color="#eee")}this.mergeDefaultAndTheme(n,i),hv(n,"label",["show"])},t.prototype.optionUpdated=function(){var n=this,r=this.option;r.regions=utt.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=Pl(r.regions||[],function(a,o){var s=o.name;return s&&(a.set(s,new pn(o,n,n.ecModel)),o.selected&&(i[s]=!0)),a},jt()),r.selectedMap||(r.selectedMap=i)},t.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new pn(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(n,r){var i=this.getRegionModel(n),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),o={name:n};if(ae(a))return o.status=r,a(o);if(Ft(a))return a.replace("{a}",n??"")},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.select=function(n){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[n]=!0}},t.prototype.unSelect=function(n){var r=this.option.selectedMap;r&&(r[n]=!1)},t.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},t.prototype.isSelected=function(n){var r=this.option.selectedMap;return!!(r&&r[n])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(Ie);function aW(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function jk(e,t,n,r){var i=e.getZoom(),a=e.getCenter(),o=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(aW(e,s),r)),o!=null){if(n){var l=n.min||0,u=n.max||1/0;o=Math.max(Math.min(i*o,u),l)/i}e.scaleX*=o,e.scaleY*=o;var c=(t.originX-e.x)*(o-1),h=(t.originY-e.y)*(o-1);e.x-=c,e.y-=h,e.updateTransform(),e.setCenter(aW(e,s),r),e.setZoom(o*i)}return{center:e.getCenter(),zoom:e.getZoom()}}var y1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.focusBlurEnabled=!0,n}return t.prototype.init=function(n,r){this._api=r},t.prototype.render=function(n,r,i,a){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new stt(i));var o=this._mapDraw;o.draw(n,r,i,this,a),o.group.on("click",this._handleRegionClick,this),o.group.silent=n.get("silent"),this.group.add(o.group),this.updateSelectStatus(n,r,i)},t.prototype._handleRegionClick=function(n){var r;Pp(n.target,function(i){return(r=fe(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(n,r,i){var a=this;this._mapDraw.group.traverse(function(o){var s=fe(o).eventData;if(s)return a._model.isSelected(s.name)?i.enterSelect(o):i.leaveSelect(o),!0})},t.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(Zn);function _1t(e,t,n){th.registerMap(e,t,n)}function ctt(e){e.registerCoordinateSystem("geo",utt),e.registerComponentModel(m1t),e.registerComponentView(y1t),e.registerImpl("registerMap",_1t),e.registerImpl("getMap",function(n){return th.getMapForUser(n)});function t(n,r){r.update="geo:updateSelectStatus",e.registerAction(r,function(i,a){var o={},s=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[n](i.name);var u=l.coordinateSystem;R(u.regions,function(h){o[h.name]=l.isSelected(h.name)||!1});var c=[];R(o,function(h,f){o[f]&&c.push(f)}),s.push({geoIndex:l.componentIndex,name:c})}),{selected:o,allSelected:s,name:i.name}})}t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,r,i){var a=n.componentType||"series";r.eachComponent({mainType:a,query:n},function(o){var s=o.coordinateSystem;if(s.type==="geo"){var l=jk(s,n,o.get("scaleLimit"),i);o.setCenter&&o.setCenter(l.center),o.setZoom&&o.setZoom(l.zoom),a==="series"&&R(o.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function x1t(e){ue(ctt),e.registerChartView(u1t),e.registerSeriesModel(c1t),e.registerLayout(d1t),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,f1t),uJ("map",e.registerAction)}function b1t(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[t],r,i;r=n.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,o=a-1;o>=0;o--){var s=i[o];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},n.push(s)}}function S1t(e,t){var n=e.isExpand?e.children:[],r=e.parentNode.children,i=e.hierNode.i?r[e.hierNode.i-1]:null;if(n.length){M1t(e);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=A1t(e,i,e.parentNode.hierNode.defaultAncestor||r[0],t)}function w1t(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function oW(e){return arguments.length?e:D1t}function ax(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function T1t(e,t){return Gr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function M1t(e){for(var t=e.children,n=t.length,r=0,i=0;--n>=0;){var a=t[n];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function A1t(e,t,n,r){if(t){for(var i=e,a=e,o=a.parentNode.children[0],s=t,l=i.hierNode.modifier,u=a.hierNode.modifier,c=o.hierNode.modifier,h=s.hierNode.modifier;s=_I(s),a=xI(a),s&&a;){i=_I(i),o=xI(o),i.hierNode.ancestor=e;var f=s.hierNode.prelim+h-a.hierNode.prelim-u+r(s,a);f>0&&(E1t(C1t(s,e,n),e,f),u+=f,l+=f),h+=s.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=o.hierNode.modifier}s&&!_I(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=h-l),a&&!xI(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=u-c,n=e)}return n}function _I(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function xI(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function C1t(e,t,n){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:n}function E1t(e,t,n){var r=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=r}function D1t(e,t){return e.parentNode===t.parentNode?1:2}var I1t=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),L1t=function(e){it(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new I1t},t.prototype.buildPath=function(n,r){var i=r.childPoints,a=i.length,o=r.parentPoint,s=i[0],l=i[a-1];if(a===1){n.moveTo(o[0],o[1]),n.lineTo(s[0],s[1]);return}var u=r.orient,c=u==="TB"||u==="BT"?0:1,h=1-c,f=Dt(r.forkPosition,1),d=[];d[c]=o[c],d[h]=o[h]+(l[h]-o[h])*f,n.moveTo(o[0],o[1]),n.lineTo(d[0],d[1]),n.moveTo(s[0],s[1]),d[c]=s[c],n.lineTo(d[0],d[1]),d[c]=l[c],n.lineTo(d[0],d[1]),n.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var v=i[p];n.moveTo(v[0],v[1]),d[c]=v[c],n.lineTo(d[0],d[1])}},t}(Ve),P1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._mainGroup=new he,n}return t.prototype.init=function(n,r){this._controller=new R1(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(n,r,i){var a=n.getData(),o=n.layoutInfo,s=this._mainGroup,l=n.get("layout");l==="radial"?(s.x=o.x+o.width/2,s.y=o.y+o.height/2):(s.x=o.x,s.y=o.y),this._updateViewCoordSys(n,i),this._updateController(n,r,i);var u=this._data;a.diff(u).add(function(c){sW(a,c)&&lW(a,c,null,s,n)}).update(function(c,h){var f=u.getItemGraphicEl(h);if(!sW(a,c)){f&&cW(u,h,f,s,n);return}lW(a,c,f,s,n)}).remove(function(c){var h=u.getItemGraphicEl(c);h&&cW(u,c,h,s,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,h){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:h})})}),this._data=a},t.prototype._updateViewCoordSys=function(n,r){var i=n.getData(),a=[];i.each(function(h){var f=i.getItemLayout(h);f&&!isNaN(f.x)&&!isNaN(f.y)&&a.push([+f.x,+f.y])});var o=[],s=[];oE(a,o,s);var l=this._min,u=this._max;s[0]-o[0]===0&&(o[0]=l?l[0]:o[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-o[1]===0&&(o[1]=l?l[1]:o[1]-1,s[1]=u?u[1]:s[1]+1);var c=n.coordinateSystem=new O1;c.zoomLimit=n.get("scaleLimit"),c.setBoundingRect(o[0],o[1],s[0]-o[0],s[1]-o[1]),c.setCenter(n.get("center"),r),c.setZoom(n.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=o,this._max=s},t.prototype._updateController=function(n,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;o.setPointerChecker(function(u,c,h){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(c,h)&&!DE(u,i,n)}),o.enable(n.get("roam")),s.zoomLimit=n.get("scaleLimit"),s.zoom=n.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Wk(s,u.dx,u.dy),i.dispatchAction({seriesId:n.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){$k(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(n),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(n){var r=n.getData(),i=this._getNodeGlobalScale(n);r.eachItemGraphicEl(function(a,o){a.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(n){var r=n.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,o=r.getZoom(),s=(o-1)*i+1;return s/a},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(hn);function sW(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)}function lW(e,t,n,r,i){var a=!n,o=e.tree.getNodeByDataIndex(t),s=o.getModel(),l=o.getVisual("style").fill,u=o.isExpand===!1&&o.children.length!==0?l:"#fff",c=e.tree.root,h=o.parentNode===c?o:o.parentNode||o,f=e.getItemGraphicEl(h.dataIndex),d=h.getLayout(),p=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:d,v=o.getLayout();a?(n=new C1(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),n.x=p.x,n.y=p.y):n.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=v.rawX,n.__radialRawY=v.rawY,r.add(n),e.setItemGraphicEl(t,n),n.__oldX=n.x,n.__oldY=n.y,Tn(n,{x:v.x,y:v.y},i);var g=n.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],_=m.getLayout(),y=m.children.length,x=void 0,S=void 0;if(v.x===_.x&&o.isExpand===!0&&m.children.length){var b={x:(m.children[0].getLayout().x+m.children[y-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[y-1].getLayout().y)/2};x=Math.atan2(b.y-_.y,b.x-_.x),x<0&&(x=Math.PI*2+x),S=b.x<_.x,S&&(x=x-Math.PI)}else x=Math.atan2(v.y-_.y,v.x-_.x),x<0&&(x=Math.PI*2+x),o.children.length===0||o.children.length!==0&&o.isExpand===!1?(S=v.x<_.x,S&&(x=x-Math.PI)):(S=v.x>_.x,S||(x=x-Math.PI));var w=S?"left":"right",A=s.getModel("label"),T=A.get("rotate"),M=T*(Math.PI/180),C=g.getTextContent();C&&(g.setTextConfig({position:A.get("position")||w,rotation:T==null?-x:M,origin:"center"}),C.setStyle("verticalAlign","middle"))}var E=s.get(["emphasis","focus"]),D=E==="relative"?ay(o.getAncestorsIndices(),o.getDescendantIndices()):E==="ancestor"?o.getAncestorsIndices():E==="descendant"?o.getDescendantIndices():null;D&&(fe(n).focus=D),R1t(i,o,c,n,p,d,v,r),n.__edge&&(n.onHoverStateChange=function(I){if(I!=="blur"){var L=o.parentNode&&e.getItemGraphicEl(o.parentNode.dataIndex);L&&L.hoverState===m1||HM(n.__edge,I)}})}function R1t(e,t,n,r,i,a,o,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),h=e.getOrient(),f=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=r.__edge;if(u==="curve")t.parentNode&&t.parentNode!==n&&(v||(v=r.__edge=new _1({shape:oN(c,h,f,i,i)})),Tn(v,{shape:oN(c,h,f,a,o)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==n&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],_=0;_<g.length;_++){var y=g[_].getLayout();m.push([y.x,y.y])}v||(v=r.__edge=new L1t({shape:{parentPoint:[o.x,o.y],childPoints:[[o.x,o.y]],orient:h,forkPosition:d}})),Tn(v,{shape:{parentPoint:[o.x,o.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),ca(v,l,"lineStyle"),pv(v),s.add(v))}function uW(e,t,n,r,i){var a=t.tree.root,o=htt(a,e),s=o.source,l=o.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(u){var c=t.getItemGraphicEl(s.dataIndex),h=c.__edge,f=u.__edge||(s.isExpand===!1||s.children.length===1?h:void 0),d=r.get("edgeShape"),p=r.get("layout"),v=r.get("orient"),g=r.get(["lineStyle","curveness"]);f&&(d==="curve"?Uf(f,{shape:oN(p,v,g,l,l),style:{opacity:0}},r,{cb:function(){n.remove(f)},removeOpt:i}):d==="polyline"&&r.get("layout")==="orthogonal"&&Uf(f,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){n.remove(f)},removeOpt:i}))}}function htt(e,t){for(var n=t.parentNode===e?t:t.parentNode||t,r;r=n.getLayout(),r==null;)n=n.parentNode===e?n:n.parentNode||n;return{source:n,sourceLayout:r}}function cW(e,t,n,r,i){var a=e.tree.getNodeByDataIndex(t),o=e.tree.root,s=htt(o,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};Uf(n,{x:s.x+1,y:s.y+1},i,{cb:function(){r.remove(n),e.setItemGraphicEl(t,null)},removeOpt:l}),n.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){uW(u,e,r,i,l)}),uW(a,e,r,i,l)}function oN(e,t,n,r,i){var a,o,s,l,u,c,h,f;if(e==="radial"){u=r.rawX,h=r.rawY,c=i.rawX,f=i.rawY;var d=ax(u,h),p=ax(u,h+(f-h)*n),v=ax(c,f+(h-f)*n),g=ax(c,f);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=r.x,h=r.y,c=i.x,f=i.y,(t==="LR"||t==="RL")&&(a=u+(c-u)*n,o=h,s=c+(u-c)*n,l=f),(t==="TB"||t==="BT")&&(a=u,o=h+(f-h)*n,s=c,l=f+(h-f)*n);return{x1:u,y1:h,x2:c,y2:f,cpx1:a,cpy1:o,cpx2:s,cpy2:l}}var Bs=vn();function Yk(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,ftt(t,n,e),R(n,function(r){R(t.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,_e(O1t,e))})}),t.wrapMethod("cloneShallow",_e(B1t,e)),R(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,_e(N1t,e))}),Wa(n[t.dataType]===t)}function O1t(e,t){if(z1t(this)){var n=ut({},Bs(this).datas);n[this.dataType]=t,ftt(t,n,e)}else qk(t,this.dataType,Bs(this).mainData,e);return t}function N1t(e,t){return e.struct&&e.struct.update(),t}function B1t(e,t){return R(Bs(t).datas,function(n,r){n!==t&&qk(n.cloneShallow(),r,t,e)}),t}function k1t(e){var t=Bs(this).mainData;return e==null||t==null?t:Bs(t).datas[e]}function F1t(){var e=Bs(this).mainData;return e==null?[{data:e}]:yt(Je(Bs(e).datas),function(t){return{type:t,data:Bs(e).datas[t]}})}function z1t(e){return Bs(e).mainData===e}function ftt(e,t,n){Bs(e).datas={},R(t,function(r,i){qk(r,i,e,n)})}function qk(e,t,n,r){Bs(n).datas[t]=e,Bs(e).mainData=n,e.dataType=t,r.struct&&(e[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=e),e.getLinkedData=k1t,e.getLinkedDataAll=F1t}var U1t=function(){function e(t,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=n}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,n,r){ae(t)&&(r=n,n=t,t=null),t=t||{},Ft(t)&&(t={order:t});var i=t.order||"preorder",a=this[t.attr||"children"],o;i==="preorder"&&(o=n.call(r,this));for(var s=0;!o&&s<a.length;s++)a[s].eachNode(t,n,r);i==="postorder"&&n.call(r,this)},e.prototype.updateDepthAndHeight=function(t){var n=0;this.depth=t;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(t+1),i.height>n&&(n=i.height)}this.height=n+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].getNodeById(t);if(a)return a}},e.prototype.contains=function(t){if(t===this)return!0;for(var n=0,r=this.children,i=r.length;n<i;n++){var a=r[n].contains(t);if(a)return a}},e.prototype.getAncestors=function(t){for(var n=[],r=t?this:this.parentNode;r;)n.push(r),r=r.parentNode;return n.reverse(),n},e.prototype.getAncestorsIndices=function(){for(var t=[],n=this;n;)t.push(n.dataIndex),n=n.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(n){t.push(n.dataIndex)}),t},e.prototype.getValue=function(t){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,n)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostTree,r=n.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,n)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,n=0;n<t.length;++n)if(t[n]===this)return n;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var n=t.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Kk=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,n,r){this.root.eachNode(t,n,r)},e.prototype.getNodeByDataIndex=function(t){var n=this.data.getRawIndex(t);return this._nodes[n]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,n=this._nodes,r=0,i=n.length;r<i;r++)n[r].dataIndex=-1;for(var r=0,i=t.count();r<i;r++)n[t.getRawIndex(r)].dataIndex=r},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,n,r){var i=new e(n),a=[],o=1;s(t);function s(c,h){var f=c.value;o=Math.max(o,ht(f)?f.length:1),a.push(c);var d=new U1t(pi(c.name,""),i);h?V1t(d,h):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=p0(a,{coordDimensions:["value"],dimensionsCount:o}).dimensions,u=new Ir(l,n);return u.initData(a),r&&r(u),Yk({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function V1t(e,t){var n=t.children;e.parentNode!==t&&(n.push(e),e.parentNode=t)}function wb(e,t,n){if(e&&Le(t,e.type)>=0){var r=n.getData().tree.root,i=e.targetNode;if(Ft(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=e.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function dtt(e){for(var t=[];e;)e=e.parentNode,e&&t.push(e);return t.reverse()}function Zk(e,t){var n=dtt(e);return Le(n,t)>=0}function LE(e,t){for(var n=[];e;){var r=e.dataIndex;n.push({name:e.name,dataIndex:r,value:t.getRawValue(r)}),e=e.parentNode}return n.reverse(),n}var G1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return t.prototype.getInitialData=function(n){var r={name:n.name,children:n.data},i=n.leaves||{},a=new pn(i,this,this.ecModel),o=Kk.createTree(r,this,s);function s(h){h.wrapMethod("getItemModel",function(f,d){var p=o.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(f.parentModel=a),f})}var l=0;o.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var u=n.expandAndCollapse,c=u&&n.initialTreeDepth>=0?n.initialTreeDepth:l;return o.root.eachNode("preorder",function(h){var f=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=f&&f.collapsed!=null?!f.collapsed:h.depth<=c}),o.data},t.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.formatTooltip=function(n,r,i){for(var a=this.getData().tree,o=a.root.children[0],s=a.getNodeByDataIndex(n),l=s.getValue(),u=s.name;s&&s!==o;)u=s.parentNode.name+"."+u,s=s.parentNode;return zi("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(n){var r=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=LE(i,this),r.collapsed=!i.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(bn);function H1t(e,t,n){for(var r=[e],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var o=a.children;if(o.length)for(var s=0;s<o.length;s++)r.push(o[s])}for(;a=i.pop();)t(a,n)}function g_(e,t){for(var n=[e],r;r=n.pop();)if(t(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)n.push(i[a])}}function W1t(e,t){e.eachSeriesByType("tree",function(n){$1t(n,t)})}function $1t(e,t){var n=T1t(e,t);e.layoutInfo=n;var r=e.get("layout"),i=0,a=0,o=null;r==="radial"?(i=2*Math.PI,a=Math.min(n.height,n.width)/2,o=oW(function(y,x){return(y.parentNode===x.parentNode?1:2)/y.depth})):(i=n.width,a=n.height,o=oW());var s=e.getData().tree.root,l=s.children[0];if(l){b1t(s),H1t(l,S1t,o),s.hierNode.modifier=-l.hierNode.prelim,g_(l,w1t);var u=l,c=l,h=l;g_(l,function(y){var x=y.getLayout().x;x<u.getLayout().x&&(u=y),x>c.getLayout().x&&(c=y),y.depth>h.depth&&(h=y)});var f=u===c?1:o(u,c)/2,d=f-u.getLayout().x,p=0,v=0,g=0,m=0;if(r==="radial")p=i/(c.getLayout().x+f+d),v=a/(h.depth-1||1),g_(l,function(y){g=(y.getLayout().x+d)*p,m=(y.depth-1)*v;var x=ax(g,m);y.setLayout({x:x.x,y:x.y,rawX:g,rawY:m},!0)});else{var _=e.getOrient();_==="RL"||_==="LR"?(v=a/(c.getLayout().x+f+d),p=i/(h.depth-1||1),g_(l,function(y){m=(y.getLayout().x+d)*v,g=_==="LR"?(y.depth-1)*p:i-(y.depth-1)*p,y.setLayout({x:g,y:m},!0)})):(_==="TB"||_==="BT")&&(p=i/(c.getLayout().x+f+d),v=a/(h.depth-1||1),g_(l,function(y){g=(y.getLayout().x+d)*p,m=_==="TB"?(y.depth-1)*v:a-(y.depth-1)*v,y.setLayout({x:g,y:m},!0)}))}}}function X1t(e){e.eachSeriesByType("tree",function(t){var n=t.getData(),r=n.tree;r.eachNode(function(i){var a=i.getModel(),o=a.getModel("itemStyle").getItemStyle(),s=n.ensureUniqueItemVisual(i.dataIndex,"style");ut(s,o)})})}function j1t(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,n){n.eachComponent({mainType:"series",subType:"tree",query:t},function(r){var i=t.dataIndex,a=r.getData().tree,o=a.getNodeByDataIndex(i);o.isExpand=!o.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,n,r){n.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var a=i.coordinateSystem,o=jk(a,t,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}function Y1t(e){e.registerChartView(P1t),e.registerSeriesModel(G1t),e.registerLayout(W1t),e.registerVisual(X1t),j1t(e)}var hW=["treemapZoomToNode","treemapRender","treemapMove"];function q1t(e){for(var t=0;t<hW.length;t++)e.registerAction({type:hW[t],update:"updateView"},Zr);e.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,r){r.eachComponent({mainType:"series",subType:"treemap",query:n},i);function i(a,o){var s=["treemapZoomToNode","treemapRootToNode"],l=wb(n,s,a);if(l){var u=a.getViewRoot();u&&(n.direction=Zk(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function ptt(e){var t=e.getData(),n=t.tree,r={};n.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var o=RO(e.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",o)})}var K1t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.preventUsingHoverLayer=!0,n}return t.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};vtt(i);var a=n.levels||[],o=this.designatedVisualItemStyle={},s=new pn({itemStyle:o},this,r);a=n.levels=Z1t(a,r);var l=yt(a||[],function(h){return new pn(h,s,r)},this),u=Kk.createTree(i,this,c);function c(h){h.wrapMethod("getItemModel",function(f,d){var p=u.getNodeByDataIndex(d),v=p?l[p.depth]:null;return f.parentModel=v||s,f})}return u.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.getRawValue(n),s=a.getName(n);return zi("nameValue",{name:s,value:o})},t.prototype.getDataParams=function(n){var r=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treeAncestors=LE(i,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},ut(this.layoutInfo,n)},t.prototype.mapIdToIndex=function(n){var r=this._idIndexMap;r||(r=this._idIndexMap=jt(),this._idIndexMapCount=0);var i=r.get(n);return i==null&&r.set(n,i=this._idIndexMapCount++),i},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){ptt(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(bn);function vtt(e){var t=0;R(e.children,function(r){vtt(r);var i=r.value;ht(i)&&(i=i[0]),t+=i});var n=e.value;ht(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=t),n<0&&(n=0),ht(e.value)?e.value[0]=n:e.value=n}function Z1t(e,t){var n=jn(t.get("color")),r=jn(t.get(["aria","decal","decals"]));if(n){e=e||[];var i,a;R(e,function(s){var l=new pn(s),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var o=e[0]||(e[0]={});return i||(o.color=n.slice()),!a&&r&&(o.decal=r.slice()),e}}var J1t=8,fW=8,bI=5,Q1t=function(){function e(t){this.group=new he,t.add(this.group)}return e.prototype.render=function(t,n,r,i){var a=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),!(!a.get("show")||!r)){var s=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=s.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),h={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,h,u),this._renderContent(t,h,s,l,u,c,i),_E(o,h.pos,h.box)}},e.prototype._prepare=function(t,n,r){for(var i=t;i;i=i.parentNode){var a=pi(i.getModel().get("name"),""),o=r.getTextRect(a),s=Math.max(o.width+J1t*2,n.emptyItemWidth);n.totalWidth+=s+fW,n.renderList.push({node:i,text:a,width:s})}},e.prototype._renderContent=function(t,n,r,i,a,o,s){for(var l=0,u=n.emptyItemWidth,c=t.get(["breadcrumb","height"]),h=ggt(n.pos,n.box),f=n.totalWidth,d=n.renderList,p=i.getModel("itemStyle").getItemStyle(),v=d.length-1;v>=0;v--){var g=d[v],m=g.node,_=g.width,y=g.text;f>h.width&&(f-=_-u,_=u,y=null);var x=new ja({shape:{points:tSt(l,0,_,c,v===d.length-1,v===0)},style:te(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Qe({style:Hn(a,{text:y})}),textConfig:{position:"inside"},z2:n0*1e4,onclick:_e(s,m)});x.disableLabelAnimation=!0,x.getTextContent().ensureState("emphasis").style=Hn(o,{text:y}),x.ensureState("emphasis").style=p,Vr(x,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(x),eSt(x,t,m),l+=_+fW}},e.prototype.remove=function(){this.group.removeAll()},e}();function tSt(e,t,n,r,i,a){var o=[[i?e:e-bI,t],[e+n,t],[e+n,t+r],[i?e:e-bI,t+r]];return!a&&o.splice(2,0,[e+n+bI,t+r/2]),!i&&o.push([e,t+r/2]),o}function eSt(e,t,n){fe(e).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&LE(n,t)}}var nSt=function(){function e(){this._storage=[],this._elExistsMap={}}return e.prototype.add=function(t,n,r,i,a){return this._elExistsMap[t.id]?!1:(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:n,duration:r,delay:i,easing:a}),!0)},e.prototype.finished=function(t){return this._finishedCallback=t,this},e.prototype.start=function(){for(var t=this,n=this._storage.length,r=function(){n--,n<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:r,aborted:r})}return this},e}();function rSt(){return new nSt}var sN=he,dW=nn,pW=3,vW="label",gW="upperLabel",iSt=n0*10,aSt=n0*2,oSt=n0*3,fp=dv([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),mW=function(e){var t=fp(e);return t.stroke=t.fill=t.lineWidth=null,t},dA=vn(),sSt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._state="ready",n._storage=m_(),n}return t.prototype.render=function(n,r,i,a){var o=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(Le(o,n)<0)){this.seriesModel=n,this.api=i,this.ecModel=r;var s=["treemapZoomToNode","treemapRootToNode"],l=wb(a,s,n),u=a&&a.type,c=n.layoutInfo,h=!this._oldTree,f=this._storage,d=u==="treemapRootToNode"&&l&&f?{rootNodeGroup:f.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),v=n.get("animation"),g=this._doRender(p,n,d);v&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,g,n,d):g.renderFinally(),this._resetController(i),this._renderBreadcrumb(n,i,l)}},t.prototype._giveContainerGroup=function(n){var r=this._containerGroup;return r||(r=this._containerGroup=new sN,this._initEvents(r),this.group.add(r)),r.x=n.x,r.y=n.y,r},t.prototype._doRender=function(n,r,i){var a=r.getData().tree,o=this._oldTree,s=m_(),l=m_(),u=this._storage,c=[];function h(g,m,_,y){return lSt(r,l,u,i,s,c,g,m,_,y)}d(a.root?[a.root]:[],o&&o.root?[o.root]:[],n,a===o||!o,0);var f=p(u);return this._oldTree=a,this._storage=l,{lastsForAnimation:s,willDeleteEls:f,renderFinally:v};function d(g,m,_,y,x){y?(m=g,R(g,function(w,A){!w.isRemoved()&&b(A,A)})):new Zc(m,g,S,S).add(b).update(b).remove(_e(b,null)).execute();function S(w){return w.getId()}function b(w,A){var T=w!=null?g[w]:null,M=A!=null?m[A]:null,C=h(T,M,_,x);C&&d(T&&T.viewChildren||[],M&&M.viewChildren||[],C,y,x+1)}}function p(g){var m=m_();return g&&R(g,function(_,y){var x=m[y];R(_,function(S){S&&(x.push(S),dA(S).willDelete=!0)})}),m}function v(){R(f,function(g){R(g,function(m){m.parent&&m.parent.remove(m)})}),R(c,function(g){g.invisible=!0,g.dirty()})}},t.prototype._doAnimation=function(n,r,i,a){var o=i.get("animationDurationUpdate"),s=i.get("animationEasing"),l=(ae(o)?0:o)||0,u=(ae(s)?null:s)||"cubicOut",c=rSt();R(r.willDeleteEls,function(h,f){R(h,function(d,p){if(!d.invisible){var v=d.parent,g,m=dA(v);if(a&&a.direction==="drillDown")g=v===a.rootNodeGroup?{shape:{x:0,y:0,width:m.nodeWidth,height:m.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var _=0,y=0;m.willDelete||(_=m.nodeWidth/2,y=m.nodeHeight/2),g=f==="nodeGroup"?{x:_,y,style:{opacity:0}}:{shape:{x:_,y,width:0,height:0},style:{opacity:0}}}g&&c.add(d,g,l,0,u)}})}),R(this._storage,function(h,f){R(h,function(d,p){var v=r.lastsForAnimation[f][p],g={};v&&(d instanceof he?v.oldX!=null&&(g.x=d.x,g.y=d.y,d.x=v.oldX,d.y=v.oldY):(v.oldShape&&(g.shape=ut({},d.shape),d.setShape(v.oldShape)),v.fadein?(d.setStyle("opacity",0),g.style={opacity:1}):d.style.opacity!==1&&(g.style={opacity:1})),c.add(d,g,l,0,u))})},this),this._state="animating",c.finished(Vt(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(n){var r=this._controller;r||(r=this._controller=new R1(n.getZr()),r.enable(this.seriesModel.get("roam")),r.on("pan",Vt(this._onPan,this)),r.on("zoom",Vt(this._onZoom,this)));var i=new Ae(0,0,n.getWidth(),n.getHeight());r.setPointerChecker(function(a,o,s){return i.contain(o,s)})},t.prototype._clearController=function(){var n=this._controller;n&&(n.dispose(),n=null)},t.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>pW||Math.abs(n.dy)>pW)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+n.dx,y:i.y+n.dy,width:i.width,height:i.height}})}},t.prototype._onZoom=function(n){var r=n.originX,i=n.originY;if(this._state!=="animating"){var a=this.seriesModel.getData().tree.root;if(!a)return;var o=a.getLayout();if(!o)return;var s=new Ae(o.x,o.y,o.width,o.height),l=this.seriesModel.layoutInfo;r-=l.x,i-=l.y;var u=_o();ku(u,u,[-r,-i]),LB(u,u,[n.scale,n.scale]),ku(u,u,[r,i]),s.applyTransform(u),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:s.x,y:s.y,width:s.width,height:s.height}})}},t.prototype._initEvents=function(n){var r=this;n.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var o=r.findTarget(i.offsetX,i.offsetY);if(o){var s=o.node;if(s.getLayout().isLeafRoot)r._rootToNode(o);else if(a==="zoomToNode")r._zoomToNode(o);else if(a==="link"){var l=s.hostTree.data.getItemModel(s.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&KM(u,c)}}}}},this)},t.prototype._renderBreadcrumb=function(n,r,i){var a=this;i||(i=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Q1t(this.group))).render(n,r,i.node,function(o){a._state!=="animating"&&(Zk(n.getViewRoot(),o)?a._rootToNode({node:o}):a._zoomToNode({node:o}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=m_(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},t.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},t.prototype.findTarget=function(n,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(o){var s=this._storage.background[o.getRawIndex()];if(s){var l=s.transformCoordToLocal(n,r),u=s.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:o,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},t.type="treemap",t}(hn);function m_(){return{nodeGroup:[],background:[],content:[]}}function lSt(e,t,n,r,i,a,o,s,l,u){if(!o)return;var c=o.getLayout(),h=e.getData(),f=o.getModel();if(h.setItemGraphicEl(o.dataIndex,null),!c||!c.isInView)return;var d=c.width,p=c.height,v=c.borderWidth,g=c.invisible,m=o.getRawIndex(),_=s&&s.getRawIndex(),y=o.viewChildren,x=c.upperHeight,S=y&&y.length,b=f.getModel("itemStyle"),w=f.getModel(["emphasis","itemStyle"]),A=f.getModel(["blur","itemStyle"]),T=f.getModel(["select","itemStyle"]),M=b.get("borderRadius")||0,C=K("nodeGroup",sN);if(!C)return;if(l.add(C),C.x=c.x||0,C.y=c.y||0,C.markRedraw(),dA(C).nodeWidth=d,dA(C).nodeHeight=p,c.isAboveViewRoot)return C;var E=K("background",dW,u,aSt);E&&k(C,E,S&&c.upperLabelHeight);var D=f.getModel("emphasis"),I=D.get("focus"),L=D.get("blurScope"),P=D.get("disabled"),B=I==="ancestor"?o.getAncestorsIndices():I==="descendant"?o.getDescendantIndices():I;if(S)cb(C)&&Ip(C,!1),E&&(Ip(E,!P),h.setItemGraphicEl(o.dataIndex,E),MO(E,B,L));else{var N=K("content",dW,u,oSt);N&&U(C,N),E.disableMorphing=!0,E&&cb(E)&&Ip(E,!1),Ip(C,!P),h.setItemGraphicEl(o.dataIndex,C),MO(C,B,L)}return C;function k(tt,et,xt){var St=fe(et);if(St.dataIndex=o.dataIndex,St.seriesIndex=e.seriesIndex,et.setShape({x:0,y:0,width:d,height:p,r:M}),g)Z(et);else{et.invisible=!1;var X=o.getVisual("style"),Ct=X.stroke,It=mW(b);It.fill=Ct;var Jt=fp(w);Jt.fill=w.get("borderColor");var Gt=fp(A);Gt.fill=A.get("borderColor");var ve=fp(T);if(ve.fill=T.get("borderColor"),xt){var W=d-2*v;nt(et,Ct,X.opacity,{x:v,y:0,width:W,height:x})}else et.removeTextContent();et.setStyle(It),et.ensureState("emphasis").style=Jt,et.ensureState("blur").style=Gt,et.ensureState("select").style=ve,pv(et)}tt.add(et)}function U(tt,et){var xt=fe(et);xt.dataIndex=o.dataIndex,xt.seriesIndex=e.seriesIndex;var St=Math.max(d-2*v,0),X=Math.max(p-2*v,0);if(et.culling=!0,et.setShape({x:v,y:v,width:St,height:X,r:M}),g)Z(et);else{et.invisible=!1;var Ct=o.getVisual("style"),It=Ct.fill,Jt=mW(b);Jt.fill=It,Jt.decal=Ct.decal;var Gt=fp(w),ve=fp(A),W=fp(T);nt(et,It,Ct.opacity,null),et.setStyle(Jt),et.ensureState("emphasis").style=Gt,et.ensureState("blur").style=ve,et.ensureState("select").style=W,pv(et)}tt.add(et)}function Z(tt){!tt.invisible&&a.push(tt)}function nt(tt,et,xt,St){var X=f.getModel(St?gW:vW),Ct=pi(f.get("name"),null),It=X.getShallow("show");ha(tt,Fi(f,St?gW:vW),{defaultText:It?Ct:null,inheritColor:et,defaultOpacity:xt,labelFetcher:e,labelDataIndex:o.dataIndex});var Jt=tt.getTextContent();if(Jt){var Gt=Jt.style,ve=EB(Gt.padding||0);St&&(tt.setTextConfig({layoutRect:St}),Jt.disableLabelLayout=!0),Jt.beforeUpdate=function(){var F=Math.max((St?St.width:tt.shape.width)-ve[1]-ve[3],0),st=Math.max((St?St.height:tt.shape.height)-ve[0]-ve[2],0);(Gt.width!==F||Gt.height!==st)&&Jt.setStyle({width:F,height:st})},Gt.truncateMinChar=2,Gt.lineOverflow="truncate",ct(Gt,St,c);var W=Jt.getState("emphasis");ct(W?W.style:null,St,c)}}function ct(tt,et,xt){var St=tt?tt.text:null;if(!et&&xt.isLeafRoot&&St!=null){var X=e.get("drillDownIcon",!0);tt.text=X?X+" "+St:St}}function K(tt,et,xt,St){var X=_!=null&&n[tt][_],Ct=i[tt];return X?(n[tt][_]=null,$(Ct,X)):g||(X=new et,X instanceof Gs&&(X.z2=uSt(xt,St)),ot(Ct,X)),t[tt][m]=X}function $(tt,et){var xt=tt[m]={};et instanceof sN?(xt.oldX=et.x,xt.oldY=et.y):xt.oldShape=ut({},et.shape)}function ot(tt,et){var xt=tt[m]={},St=o.parentNode,X=et instanceof he;if(St&&(!r||r.direction==="drillDown")){var Ct=0,It=0,Jt=i.background[St.getRawIndex()];!r&&Jt&&Jt.oldShape&&(Ct=Jt.oldShape.width,It=Jt.oldShape.height),X?(xt.oldX=0,xt.oldY=It):xt.oldShape={x:Ct,y:It,width:0,height:0}}xt.fadein=!X}}function uSt(e,t){return e*iSt+t}var Tb=R,cSt=se,pA=-1,Ni=function(){function e(t){var n=t.mappingMethod,r=t.type,i=this.option=ce(t);this.type=r,this.mappingMethod=n,this._normalizeData=dSt[n];var a=e.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[n],n==="piecewise"?(SI(i),hSt(i)):n==="category"?i.categories?fSt(i):SI(i,!0):(Wa(n!=="linear"||i.dataExtent),SI(i))}return e.prototype.mapValueToVisual=function(t){var n=this._normalizeData(t);return this._normalizedToVisual(n,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return Je(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,n,r){se(t)?R(t,n,r):n.call(r,t)},e.mapVisual=function(t,n,r){var i,a=ht(t)?[]:se(t)?{}:(i=!0,null);return e.eachVisual(t,function(o,s){var l=n.call(r,o,s);i?a=l:a[s]=l}),a},e.retrieveVisuals=function(t){var n={},r;return t&&Tb(e.visualHandlers,function(i,a){t.hasOwnProperty(a)&&(n[a]=t[a],r=!0)}),r?n:null},e.prepareVisualTypes=function(t){if(ht(t))t=t.slice();else if(cSt(t)){var n=[];Tb(t,function(r,i){n.push(i)}),t=n}else return[];return t.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,n){return n==="color"?!!(t&&t.indexOf(n)===0):t===n},e.findPieceIndex=function(t,n,r){for(var i,a=1/0,o=0,s=n.length;o<s;o++){var l=n[o].value;if(l!=null){if(l===t||Ft(l)&&l===t+"")return o;r&&f(l,o)}}for(var o=0,s=n.length;o<s;o++){var u=n[o],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(cw(h[1],t,c[1]))return o}else if(c[1]===1/0){if(cw(h[0],c[0],t))return o}else if(cw(h[0],c[0],t)&&cw(h[1],t,c[1]))return o;r&&f(c[0],o),r&&f(c[1],o)}}if(r)return t===1/0?n.length-1:t===-1/0?0:i;function f(d,p){var v=Math.abs(d-t);v<a&&(a=v,i=p)}},e.visualHandlers={color:{applyVisual:y_("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(n,r){return!r&&(n=this._normalizeData(n)),ox.call(this,n)}:function(n,r,i){var a=!!i;return!r&&(n=this._normalizeData(n)),i=nD(n,t.parsedVisual,i),a?i:Vc(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return Vc(nD(t,this.option.parsedVisual),"rgba")},category:ox,piecewise:function(t,n){var r=uN.call(this,n);return r==null&&(r=Vc(nD(t,this.option.parsedVisual),"rgba")),r},fixed:dp}},colorHue:uw(function(t,n){return Ex(t,n)}),colorSaturation:uw(function(t,n){return Ex(t,null,n)}),colorLightness:uw(function(t,n){return Ex(t,null,null,n)}),colorAlpha:uw(function(t,n){return kM(t,n)}),decal:{applyVisual:y_("decal"),_normalizedToVisual:{linear:null,category:ox,piecewise:null,fixed:null}},opacity:{applyVisual:y_("opacity"),_normalizedToVisual:lN([0,1])},liftZ:{applyVisual:y_("liftZ"),_normalizedToVisual:{linear:dp,category:dp,piecewise:dp,fixed:dp}},symbol:{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("symbol",i)},_normalizedToVisual:{linear:yW,category:ox,piecewise:function(t,n){var r=uN.call(this,n);return r==null&&(r=yW.call(this,t)),r},fixed:dp}},symbolSize:{applyVisual:y_("symbolSize"),_normalizedToVisual:lN([0,1])}},e}();function hSt(e){var t=e.pieceList;e.hasSpecialVisual=!1,R(t,function(n,r){n.originIndex=r,n.visual!=null&&(e.hasSpecialVisual=!0)})}function fSt(e){var t=e.categories,n=e.categoryMap={},r=e.visual;if(Tb(t,function(o,s){n[o]=s}),!ht(r)){var i=[];se(r)?Tb(r,function(o,s){var l=n[s];i[l??pA]=o}):i[pA]=r,r=gtt(e,i)}for(var a=t.length-1;a>=0;a--)r[a]==null&&(delete n[t[a]],t.pop())}function SI(e,t){var n=e.visual,r=[];se(n)?Tb(n,function(a){r.push(a)}):n!=null&&r.push(n);var i={color:1,symbol:1};!t&&r.length===1&&!i.hasOwnProperty(e.type)&&(r[1]=r[0]),gtt(e,r)}function uw(e){return{applyVisual:function(t,n,r){var i=this.mapValueToVisual(t);r("color",e(n("color"),i))},_normalizedToVisual:lN([0,1])}}function yW(e){var t=this.option.visual;return t[Math.round(Cn(e,[0,1],[0,t.length-1],!0))]||{}}function y_(e){return function(t,n,r){r(e,this.mapValueToVisual(t))}}function ox(e){var t=this.option.visual;return t[this.option.loop&&e!==pA?e%t.length:e]}function dp(){return this.option.visual[0]}function lN(e){return{linear:function(t){return Cn(t,e,this.option.visual,!0)},category:ox,piecewise:function(t,n){var r=uN.call(this,n);return r==null&&(r=Cn(t,e,this.option.visual,!0)),r},fixed:dp}}function uN(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var r=Ni.findPieceIndex(e,n),i=n[r];if(i&&i.visual)return i.visual[this.type]}}function gtt(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=yt(t,function(n){var r=Va(n);return r||[0,0,0,1]})),t}var dSt={linear:function(e){return Cn(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Ni.findPieceIndex(e,t,!0);if(n!=null)return Cn(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t??pA},fixed:Zr};function cw(e,t,n){return e?t<=n:t<n}var pSt="itemStyle",mtt=vn();const vSt={seriesType:"treemap",reset:function(e){var t=e.getData().tree,n=t.root;n.isRemoved()||ytt(n,{},e.getViewRoot().getAncestors(),e)}};function ytt(e,t,n,r){var i=e.getModel(),a=e.getLayout(),o=e.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var s=i.getModel(pSt),l=gSt(s,t,r),u=o.ensureUniqueItemVisual(e.dataIndex,"style"),c=s.get("borderColor"),h=s.get("borderColorSaturation"),f;h!=null&&(f=_W(l),c=mSt(h,f)),u.stroke=c;var d=e.viewChildren;if(!d||!d.length)f=_W(l),u.fill=f;else{var p=ySt(e,i,a,s,l,d);R(d,function(v,g){if(v.depth>=n.length||v===n[v.depth]){var m=_St(i,l,v,g,p,r);ytt(v,m,n,r)}})}}}function gSt(e,t,n){var r=ut({},t),i=n.designatedVisualItemStyle;return R(["color","colorAlpha","colorSaturation"],function(a){i[a]=t[a];var o=e.get(a);i[a]=null,o!=null&&(r[a]=o)}),r}function _W(e){var t=wI(e,"color");if(t){var n=wI(e,"colorAlpha"),r=wI(e,"colorSaturation");return r&&(t=Ex(t,null,null,r)),n&&(t=kM(t,n)),t}}function mSt(e,t){return t!=null?Ex(t,null,null,e):null}function wI(e,t){var n=e[t];if(n!=null&&n!=="none")return n}function ySt(e,t,n,r,i,a){if(!(!a||!a.length)){var o=TI(t,"color")||i.color!=null&&i.color!=="none"&&(TI(t,"colorAlpha")||TI(t,"colorSaturation"));if(o){var s=t.get("visualMin"),l=t.get("visualMax"),u=n.dataExtent.slice();s!=null&&s<u[0]&&(u[0]=s),l!=null&&l>u[1]&&(u[1]=l);var c=t.get("colorMappingBy"),h={type:o.name,dataExtent:u,visual:o.range};h.type==="color"&&(c==="index"||c==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var f=new Ni(h);return mtt(f).drColorMappingBy=c,f}}}function TI(e,t){var n=e.get(t);return ht(n)&&n.length?{name:t,range:n}:null}function _St(e,t,n,r,i,a){var o=ut({},t);if(i){var s=i.type,l=s==="color"&&mtt(i).drColorMappingBy,u=l==="index"?r:l==="id"?a.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));o[s]=i.mapValueToVisual(u)}return o}var Mb=Math.max,vA=Math.min,xW=Qi,Jk=R,_tt=["itemStyle","borderWidth"],xSt=["itemStyle","gapWidth"],bSt=["upperLabel","show"],SSt=["upperLabel","height"];const wSt={seriesType:"treemap",reset:function(e,t,n,r){var i=n.getWidth(),a=n.getHeight(),o=e.option,s=Gr(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=o.size||[],u=Dt(xW(s.width,l[0]),i),c=Dt(xW(s.height,l[1]),a),h=r&&r.type,f=["treemapZoomToNode","treemapRootToNode"],d=wb(r,f,e),p=h==="treemapRender"||h==="treemapMove"?r.rootRect:null,v=e.getViewRoot(),g=dtt(v);if(h!=="treemapMove"){var m=h==="treemapZoomToNode"?DSt(e,d,v,u,c):p?[p.width,p.height]:[u,c],_=o.sort;_&&_!=="asc"&&_!=="desc"&&(_="desc");var y={squareRatio:o.squareRatio,sort:_,leafDepth:o.leafDepth};v.hostTree.clearLayouts();var x={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};v.setLayout(x),xtt(v,y,!1,0),x=v.getLayout(),Jk(g,function(b,w){var A=(g[w+1]||v).getValue();b.setLayout(ut({dataExtent:[A,A],borderWidth:0,upperHeight:0},x))})}var S=e.getData().tree.root;S.setLayout(ISt(s,p,d),!0),e.setLayoutInfo(s),btt(S,new Ae(-s.x,-s.y,i,a),g,v,0)}};function xtt(e,t,n,r){var i,a;if(!e.isRemoved()){var o=e.getLayout();i=o.width,a=o.height;var s=e.getModel(),l=s.get(_tt),u=s.get(xSt)/2,c=Stt(s),h=Math.max(l,c),f=l-u,d=h-u;e.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:c},!0),i=Mb(i-2*f,0),a=Mb(a-f-d,0);var p=i*a,v=TSt(e,s,p,t,n,r);if(v.length){var g={x:f,y:d,width:i,height:a},m=vA(i,a),_=1/0,y=[];y.area=0;for(var x=0,S=v.length;x<S;){var b=v[x];y.push(b),y.area+=b.getLayout().area;var w=ESt(y,m,t.squareRatio);w<=_?(x++,_=w):(y.area-=y.pop().getLayout().area,bW(y,m,g,u,!1),m=vA(g.width,g.height),y.length=y.area=0,_=1/0)}if(y.length&&bW(y,m,g,u,!0),!n){var A=s.get("childrenVisibleMin");A!=null&&p<A&&(n=!0)}for(var x=0,S=v.length;x<S;x++)xtt(v[x],t,n,r+1)}}}function TSt(e,t,n,r,i,a){var o=e.children||[],s=r.sort;s!=="asc"&&s!=="desc"&&(s=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return e.viewChildren=[];o=Gn(o,function(d){return!d.isRemoved()}),ASt(o,s);var u=CSt(t,o,s);if(u.sum===0)return e.viewChildren=[];if(u.sum=MSt(t,n,u.sum,s,o),u.sum===0)return e.viewChildren=[];for(var c=0,h=o.length;c<h;c++){var f=o[c].getValue()/u.sum*n;o[c].setLayout({area:f})}return l&&(o.length&&e.setLayout({isLeafRoot:!0},!0),o.length=0),e.viewChildren=o,e.setLayout({dataExtent:u.dataExtent},!0),o}function MSt(e,t,n,r,i){if(!r)return n;for(var a=e.get("visibleMin"),o=i.length,s=o,l=o-1;l>=0;l--){var u=i[r==="asc"?o-l-1:l].getValue();u/n*t<a&&(s=l,n-=u)}return r==="asc"?i.splice(0,o-s):i.splice(s,o-s),n}function ASt(e,t){return t&&e.sort(function(n,r){var i=t==="asc"?n.getValue()-r.getValue():r.getValue()-n.getValue();return i===0?t==="asc"?n.dataIndex-r.dataIndex:r.dataIndex-n.dataIndex:i}),e}function CSt(e,t,n){for(var r=0,i=0,a=t.length;i<a;i++)r+=t[i].getValue();var o=e.get("visualDimension"),s;return!t||!t.length?s=[NaN,NaN]:o==="value"&&n?(s=[t[t.length-1].getValue(),t[0].getValue()],n==="asc"&&s.reverse()):(s=[1/0,-1/0],Jk(t,function(l){var u=l.getValue(o);u<s[0]&&(s[0]=u),u>s[1]&&(s[1]=u)})),{sum:r,dataExtent:s}}function ESt(e,t,n){for(var r=0,i=1/0,a=0,o=void 0,s=e.length;a<s;a++)o=e[a].getLayout().area,o&&(o<i&&(i=o),o>r&&(r=o));var l=e.area*e.area,u=t*t*n;return l?Mb(u*r/l,l/(u*i)):1/0}function bW(e,t,n,r,i){var a=t===n.width?0:1,o=1-a,s=["x","y"],l=["width","height"],u=n[s[a]],c=t?e.area/t:0;(i||c>n[l[o]])&&(c=n[l[o]]);for(var h=0,f=e.length;h<f;h++){var d=e[h],p={},v=c?d.getLayout().area/c:0,g=p[l[o]]=Mb(c-2*r,0),m=n[s[a]]+n[l[a]]-u,_=h===f-1||m<v?m:v,y=p[l[a]]=Mb(_-2*r,0);p[s[o]]=n[s[o]]+vA(r,g/2),p[s[a]]=u+vA(r,y/2),u+=_,d.setLayout(p,!0)}n[s[o]]+=c,n[l[o]]-=c}function DSt(e,t,n,r,i){var a=(t||{}).node,o=[r,i];if(!a||a===n)return o;for(var s,l=r*i,u=l*e.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,h=s.children,f=0,d=h.length;f<d;f++)c+=h[f].getValue();var p=a.getValue();if(p===0)return o;u*=c/p;var v=s.getModel(),g=v.get(_tt),m=Math.max(g,Stt(v));u+=4*g*g+(3*g+m)*Math.pow(u,.5),u>O4&&(u=O4),a=s}u<l&&(u=l);var _=Math.pow(u/l,.5);return[r*_,i*_]}function ISt(e,t,n){if(t)return{x:t.x,y:t.y};var r={x:0,y:0};if(!n)return r;var i=n.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var l=s.getLayout();o[0]+=l.x,o[1]+=l.y,s=s.parentNode}return{x:e.width/2-o[0],y:e.height/2-o[1]}}function btt(e,t,n,r,i){var a=e.getLayout(),o=n[i],s=o&&o===e;if(!(o&&!s||i===n.length&&e!==r)){e.setLayout({isInView:!0,invisible:!s&&!t.intersect(a),isAboveViewRoot:s},!0);var l=new Ae(t.x-a.x,t.y-a.y,t.width,t.height);Jk(e.viewChildren||[],function(u){btt(u,l,n,r,i+1)})}}function Stt(e){return e.get(bSt)?e.get(SSt):0}function LSt(e){e.registerSeriesModel(K1t),e.registerChartView(sSt),e.registerVisual(vSt),e.registerLayout(wSt),q1t(e)}function PSt(e){var t=e.findComponents({mainType:"legend"});!t||!t.length||e.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getGraph(),a=i.data,o=r.mapArray(r.getName);a.filterSelf(function(s){var l=a.getItemModel(s),u=l.getShallow("category");if(u!=null){xn(u)&&(u=o[u]);for(var c=0;c<t.length;c++)if(!t[c].isSelected(u))return!1}return!0})})}function RSt(e){var t={};e.eachSeriesByType("graph",function(n){var r=n.getCategoriesData(),i=n.getData(),a={};r.each(function(o){var s=r.getName(o);a["ec-"+s]=o;var l=r.getItemModel(o),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=n.getColorFromPalette(s,t)),r.setItemVisual(o,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],h=0;h<c.length;h++){var f=l.getShallow(c[h],!0);f!=null&&r.setItemVisual(o,c[h],f)}}),r.count()&&i.each(function(o){var s=i.getItemModel(o),l=s.getShallow("category");if(l!=null){Ft(l)&&(l=a["ec-"+l]);var u=r.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(o,"style");ut(c,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],f=0;f<h.length;f++)i.setItemVisual(o,h[f],r.getItemVisual(l,h[f]))}})})}function hw(e){return e instanceof Array||(e=[e,e]),e}function OSt(e){e.eachSeriesByType("graph",function(t){var n=t.getGraph(),r=t.getEdgeData(),i=hw(t.get("edgeSymbol")),a=hw(t.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",t.getModel("lineStyle").getLineStyle()),r.each(function(o){var s=r.getItemModel(o),l=n.getEdgeByIndex(o),u=hw(s.getShallow("symbol",!0)),c=hw(s.getShallow("symbolSize",!0)),h=s.getModel("lineStyle").getLineStyle(),f=r.ensureUniqueItemVisual(o,"style");switch(ut(f,h),f.stroke){case"source":{var d=l.node1.getVisual("style");f.stroke=d&&d.fill;break}case"target":{var d=l.node2.getVisual("style");f.stroke=d&&d.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var cN="-->",PE=function(e){return e.get("autoCurveness")||null},wtt=function(e,t){var n=PE(e),r=20,i=[];if(xn(n))r=n;else if(ht(n)){e.__curvenessList=n;return}t>r&&(r=t);var a=r%2?r+2:r+3;i=[];for(var o=0;o<a;o++)i.push((o%2?o+1:o)/10*(o%2?-1:1));e.__curvenessList=i},Ab=function(e,t,n){var r=[e.id,e.dataIndex].join("."),i=[t.id,t.dataIndex].join(".");return[n.uid,r,i].join(cN)},Ttt=function(e){var t=e.split(cN);return[t[0],t[2],t[1]].join(cN)},NSt=function(e,t){var n=Ab(e.node1,e.node2,t);return t.__edgeMap[n]},BSt=function(e,t){var n=hN(Ab(e.node1,e.node2,t),t),r=hN(Ab(e.node2,e.node1,t),t);return n+r},hN=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function kSt(e){PE(e)&&(e.__curvenessList=[],e.__edgeMap={},wtt(e))}function FSt(e,t,n,r){if(PE(n)){var i=Ab(e,t,n),a=n.__edgeMap,o=a[Ttt(i)];a[i]&&!o?a[i].isForward=!0:o&&a[i]&&(o.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function Qk(e,t,n,r){var i=PE(t),a=ht(i);if(!i)return null;var o=NSt(e,t);if(!o)return null;for(var s=-1,l=0;l<o.length;l++)if(o[l]===n){s=l;break}var u=BSt(e,t);wtt(t,u),e.lineStyle=e.lineStyle||{};var c=Ab(e.node1,e.node2,t),h=t.__curvenessList,f=a||u%2?0:1;if(o.isForward)return h[f+s];var d=Ttt(c),p=hN(d,t),v=h[s+p+f];return r?a?i&&i[0]===0?(p+f)%2?v:-v:((p%2?0:1)+f)%2?v:-v:(p+f)%2?v:-v:h[s+p+f]}function Mtt(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view")){var n=e.getGraph();n.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),tF(n,e)}}function tF(e,t){e.eachEdge(function(n,r){var i=Du(n.getModel().get(["lineStyle","curveness"]),-Qk(n,t,r,!0),0),a=zc(n.node1.getLayout()),o=zc(n.node2.getLayout()),s=[a,o];+i&&s.push([(a[0]+o[0])/2-(a[1]-o[1])*i,(a[1]+o[1])/2-(o[0]-a[0])*i]),n.setLayout(s)})}function zSt(e,t){e.eachSeriesByType("graph",function(n){var r=n.get("layout"),i=n.coordinateSystem;if(i&&i.type!=="view"){var a=n.getData(),o=[];R(i.dimensions,function(f){o=o.concat(a.mapDimensionsAll(f))});for(var s=0;s<a.count();s++){for(var l=[],u=!1,c=0;c<o.length;c++){var h=a.get(o[c],s);isNaN(h)||(u=!0),l.push(h)}u?a.setItemLayout(s,i.dataToPoint(l)):a.setItemLayout(s,[NaN,NaN])}tF(a.graph,n)}else(!r||r==="none")&&Mtt(n)})}function sx(e){var t=e.coordinateSystem;if(t.type!=="view")return 1;var n=e.option.nodeScaleRatio,r=t.scaleX,i=t.getZoom(),a=(i-1)*n+1;return a/r}function lx(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var SW=Math.PI,MI=[];function eF(e,t,n,r){var i=e.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),o=e.getData(),s=o.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,h=o.count();if(o.setLayout({cx:l,cy:u}),!!h){if(n){var f=i.pointToData(r),d=f[0],p=f[1],v=[d-l,p-u];Qy(v,v),GT(v,v,c),n.setLayout([l+v[0],u+v[1]],!0);var g=e.get(["circular","rotateLabel"]);Att(n,g,l,u)}USt[t](e,s,o,c,l,u,h),s.eachEdge(function(m,_){var y=Du(m.getModel().get(["lineStyle","curveness"]),Qk(m,e,_),0),x=zc(m.node1.getLayout()),S=zc(m.node2.getLayout()),b,w=(x[0]+S[0])/2,A=(x[1]+S[1])/2;+y&&(y*=3,b=[l*y+w*(1-y),u*y+A*(1-y)]),m.setLayout([x,S,b])})}}}var USt={value:function(e,t,n,r,i,a,o){var s=0,l=n.getSum("value"),u=Math.PI*2/(l||o);t.eachNode(function(c){var h=c.getValue("value"),f=u*(l?h:1)/2;s+=f,c.setLayout([r*Math.cos(s)+i,r*Math.sin(s)+a]),s+=f})},symbolSize:function(e,t,n,r,i,a,o){var s=0;MI.length=o;var l=sx(e);t.eachNode(function(h){var f=lx(h);isNaN(f)&&(f=2),f<0&&(f=0),f*=l;var d=Math.asin(f/2/r);isNaN(d)&&(d=SW/2),MI[h.dataIndex]=d,s+=d*2});var u=(2*SW-s)/o/2,c=0;t.eachNode(function(h){var f=u+MI[h.dataIndex];c+=f,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+a]),c+=f})}};function Att(e,t,n,r){var i=e.getGraphicEl();if(i){var a=e.getModel(),o=a.get(["label","rotate"])||0,s=i.getSymbolPath();if(t){var l=e.getLayout(),u=Math.atan2(l[1]-r,l[0]-n);u<0&&(u=Math.PI*2+u);var c=l[0]<n;c&&(u=u-Math.PI);var h=c?"left":"right";s.setTextConfig({rotation:-u,position:h,origin:"center"});var f=s.ensureState("emphasis");ut(f.textConfig||(f.textConfig={}),{position:h})}else s.setTextConfig({rotation:o*=Math.PI/180})}}function VSt(e){e.eachSeriesByType("graph",function(t){t.get("layout")==="circular"&&eF(t,"symbolSize")})}var cg=KR;function GSt(e,t,n){for(var r=e,i=t,a=n.rect,o=a.width,s=a.height,l=[a.x+o/2,a.y+s/2],u=n.gravity==null?.1:n.gravity,c=0;c<r.length;c++){var h=r[c];h.p||(h.p=kv(o*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=zc(h.p),h.edges=null}var f=n.friction==null?.6:n.friction,d=f,p,v;return{warmUp:function(){d=f*.8},setFixed:function(g){r[g].fixed=!0},setUnfixed:function(g){r[g].fixed=!1},beforeStep:function(g){p=g},afterStep:function(g){v=g},step:function(g){p&&p(r,i);for(var m=[],_=r.length,y=0;y<i.length;y++){var x=i[y];if(!x.ignoreForceLayout){var S=x.n1,b=x.n2;Ep(m,b.p,S.p);var w=ZR(m)-x.d,A=b.w/(S.w+b.w);isNaN(A)&&(A=0),Qy(m,m),!S.fixed&&cg(S.p,S.p,m,A*w*d),!b.fixed&&cg(b.p,b.p,m,-(1-A)*w*d)}}for(var y=0;y<_;y++){var T=r[y];T.fixed||(Ep(m,l,T.p),cg(T.p,T.p,m,u*d))}for(var y=0;y<_;y++)for(var S=r[y],M=y+1;M<_;M++){var b=r[M];Ep(m,b.p,S.p);var w=ZR(m);w===0&&(Aft(m,Math.random()-.5,Math.random()-.5),w=1);var C=(S.rep+b.rep)/w/w;!S.fixed&&cg(S.pp,S.pp,m,C),!b.fixed&&cg(b.pp,b.pp,m,-C)}for(var E=[],y=0;y<_;y++){var T=r[y];T.fixed||(Ep(E,T.p,T.pp),cg(T.p,T.p,E,d),Na(T.pp,T.p))}d=d*.992;var D=d<.01;v&&v(r,i,D),g&&g(D)}}}function HSt(e){e.eachSeriesByType("graph",function(t){var n=t.coordinateSystem;if(!(n&&n.type!=="view"))if(t.get("layout")==="force"){var r=t.preservedPoints||{},i=t.getGraph(),a=i.data,o=i.edgeData,s=t.getModel("force"),l=s.get("initLayout");t.preservedPoints?a.each(function(y){var x=a.getId(y);a.setItemLayout(y,r[x]||[NaN,NaN])}):!l||l==="none"?Mtt(t):l==="circular"&&eF(t,"value");var u=a.getDataExtent("value"),c=o.getDataExtent("value"),h=s.get("repulsion"),f=s.get("edgeLength"),d=ht(h)?h:[h,h],p=ht(f)?f:[f,f];p=[p[1],p[0]];var v=a.mapArray("value",function(y,x){var S=a.getItemLayout(x),b=Cn(y,u,d);return isNaN(b)&&(b=(d[0]+d[1])/2),{w:b,rep:b,fixed:a.getItemModel(x).get("fixed"),p:!S||isNaN(S[0])||isNaN(S[1])?null:S}}),g=o.mapArray("value",function(y,x){var S=i.getEdgeByIndex(x),b=Cn(y,c,p);isNaN(b)&&(b=(p[0]+p[1])/2);var w=S.getModel(),A=Du(S.getModel().get(["lineStyle","curveness"]),-Qk(S,t,x,!0),0);return{n1:v[S.node1.dataIndex],n2:v[S.node2.dataIndex],d:b,curveness:A,ignoreForceLayout:w.get("ignoreForceLayout")}}),m=n.getBoundingRect(),_=GSt(v,g,{rect:m,gravity:s.get("gravity"),friction:s.get("friction")});_.beforeStep(function(y,x){for(var S=0,b=y.length;S<b;S++)y[S].fixed&&Na(y[S].p,i.getNodeByIndex(S).getLayout())}),_.afterStep(function(y,x,S){for(var b=0,w=y.length;b<w;b++)y[b].fixed||i.getNodeByIndex(b).setLayout(y[b].p),r[a.getId(b)]=y[b].p;for(var b=0,w=x.length;b<w;b++){var A=x[b],T=i.getEdgeByIndex(b),M=A.n1.p,C=A.n2.p,E=T.getLayout();E=E?E.slice():[],E[0]=E[0]||[],E[1]=E[1]||[],Na(E[0],M),Na(E[1],C),+A.curveness&&(E[2]=[(M[0]+C[0])/2-(M[1]-C[1])*A.curveness,(M[1]+C[1])/2-(C[0]-M[0])*A.curveness]),T.setLayout(E)}}),t.forceLayout=_,t.preservedPoints=r,_.step()}else t.forceLayout=null})}function WSt(e,t,n){var r=ut(e.getBoxLayoutParams(),{aspect:n});return Gr(r,{width:t.getWidth(),height:t.getHeight()})}function $St(e,t){var n=[];return e.eachSeriesByType("graph",function(r){var i=r.get("coordinateSystem");if(!i||i==="view"){var a=r.getData(),o=a.mapArray(function(g){var m=a.getItemModel(g);return[+m.get("x"),+m.get("y")]}),s=[],l=[];oE(o,s,l),l[0]-s[0]===0&&(l[0]+=1,s[0]-=1),l[1]-s[1]===0&&(l[1]+=1,s[1]-=1);var u=(l[0]-s[0])/(l[1]-s[1]),c=WSt(r,t,u);isNaN(u)&&(s=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var h=l[0]-s[0],f=l[1]-s[1],d=c.width,p=c.height,v=r.coordinateSystem=new O1;v.zoomLimit=r.get("scaleLimit"),v.setBoundingRect(s[0],s[1],h,f),v.setViewRect(c.x,c.y,d,p),v.setCenter(r.get("center"),t),v.setZoom(r.get("zoom")),n.push(v)}}),n}var wW=Ei.prototype,AI=_1.prototype,Ctt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(Ctt);function CI(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var XSt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="ec-line",r}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ctt},t.prototype.buildPath=function(n,r){CI(r)?wW.buildPath.call(this,n,r):AI.buildPath.call(this,n,r)},t.prototype.pointAt=function(n){return CI(this.shape)?wW.pointAt.call(this,n):AI.pointAt.call(this,n)},t.prototype.tangentAt=function(n){var r=this.shape,i=CI(r)?[r.x2-r.x1,r.y2-r.y1]:AI.tangentAt.call(this,n);return Qy(i,i)},t}(Ve),EI=["fromSymbol","toSymbol"];function TW(e){return"_"+e+"Type"}function MW(e,t,n){var r=t.getItemVisual(n,e);if(!r||r==="none")return r;var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),o=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=d0(i),u=Vv(o||0,l);return r+l+u+(a||"")+(s||"")}function AW(e,t,n){var r=t.getItemVisual(n,e);if(!(!r||r==="none")){var i=t.getItemVisual(n,e+"Size"),a=t.getItemVisual(n,e+"Rotate"),o=t.getItemVisual(n,e+"Offset"),s=t.getItemVisual(n,e+"KeepAspect"),l=d0(i),u=Vv(o||0,l),c=Jr(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=e,c}}function jSt(e){var t=new XSt({name:"line",subPixelOptimize:!0});return fN(t.shape,e),t}function fN(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}var nF=function(e){it(t,e);function t(n,r,i){var a=e.call(this)||this;return a._createLine(n,r,i),a}return t.prototype._createLine=function(n,r,i){var a=n.hostModel,o=n.getItemLayout(r),s=jSt(o);s.shape.percent=0,xr(s,{shape:{percent:1}},a,r),this.add(s),R(EI,function(l){var u=AW(l,n,r);this.add(u),this[TW(l)]=MW(l,n,r)},this),this._updateCommonStl(n,r,i)},t.prototype.updateData=function(n,r,i){var a=n.hostModel,o=this.childOfName("line"),s=n.getItemLayout(r),l={shape:{}};fN(l.shape,s),Tn(o,l,a,r),R(EI,function(u){var c=MW(u,n,r),h=TW(u);if(this[h]!==c){this.remove(this.childOfName(u));var f=AW(u,n,r);this.add(f)}this[h]=c},this),this._updateCommonStl(n,r,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(n,r,i){var a=n.hostModel,o=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,h=i&&i.emphasisDisabled,f=i&&i.focus,d=i&&i.blurScope;if(!i||n.hasItemOption){var p=n.getItemModel(r),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),h=v.get("disabled"),f=v.get("focus"),d=v.get("blurScope"),c=Fi(p)}var g=n.getItemVisual(r,"style"),m=g.stroke;o.useStyle(g),o.style.fill=null,o.style.strokeNoScale=!0,o.ensureState("emphasis").style=s,o.ensureState("blur").style=l,o.ensureState("select").style=u,R(EI,function(b){var w=this.childOfName(b);if(w){w.setColor(m),w.style.opacity=g.opacity;for(var A=0;A<$a.length;A++){var T=$a[A],M=o.getState(T);if(M){var C=M.style||{},E=w.ensureState(T),D=E.style||(E.style={});C.stroke!=null&&(D[w.__isEmptyBrush?"stroke":"fill"]=C.stroke),C.opacity!=null&&(D.opacity=C.opacity)}}w.markRedraw()}},this);var _=a.getRawValue(r);ha(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(b,w){return a.getFormattedLabel(b,w,n.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(_==null?n.getName(r):isFinite(_)?_r(_):_)+""});var y=this.getTextContent();if(y){var x=c.normal;y.__align=y.style.align,y.__verticalAlign=y.style.verticalAlign,y.__position=x.get("position")||"middle";var S=x.get("distance");ht(S)||(S=[S,S]),y.__labelDistance=S}this.setTextConfig({position:null,local:!0,inside:!1}),Vr(this,f,d,h)},t.prototype.highlight=function(){qc(this)},t.prototype.downplay=function(){Kc(this)},t.prototype.updateLayout=function(n,r){this.setLinePoints(n.getItemLayout(r))},t.prototype.setLinePoints=function(n){var r=this.childOfName("line");fN(r.shape,n),r.dirty()},t.prototype.beforeUpdate=function(){var n=this,r=n.childOfName("fromSymbol"),i=n.childOfName("toSymbol"),a=n.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var o=1,s=this.parent;s;)s.scaleX&&(o/=s.scaleX),s=s.parent;var l=n.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),h=l.pointAt(u),f=Ep([],h,c);Qy(f,f);function d(M,C){var E=M.__specifiedRotation;if(E==null){var D=l.tangentAt(C);M.attr("rotation",(C===1?-1:1)*Math.PI/2-Math.atan2(D[1],D[0]))}else M.attr("rotation",E)}if(r&&(r.setPosition(c),d(r,0),r.scaleX=r.scaleY=o*u,r.markRedraw()),i&&(i.setPosition(h),d(i,1),i.scaleX=i.scaleY=o*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,v=void 0,g=a.__labelDistance,m=g[0]*o,_=g[1]*o,y=u/2,x=l.tangentAt(y),S=[x[1],-x[0]],b=l.pointAt(y);S[1]>0&&(S[0]=-S[0],S[1]=-S[1]);var w=x[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var A=-Math.atan2(x[1],x[0]);h[0]<c[0]&&(A=Math.PI+A),a.rotation=A}var T=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":T=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":T=_,v="top";break;default:T=0,v="middle"}switch(a.__position){case"end":a.x=f[0]*m+h[0],a.y=f[1]*_+h[1],p=f[0]>.8?"left":f[0]<-.8?"right":"center",v=f[1]>.8?"top":f[1]<-.8?"bottom":"middle";break;case"start":a.x=-f[0]*m+c[0],a.y=-f[1]*_+c[1],p=f[0]>.8?"right":f[0]<-.8?"left":"center",v=f[1]>.8?"bottom":f[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=m*w+c[0],a.y=c[1]+T,p=x[0]<0?"right":"left",a.originX=-m*w,a.originY=-T;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=b[0],a.y=b[1]+T,p="center",a.originY=-T;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-m*w+h[0],a.y=h[1]+T,p=x[0]>=0?"right":"left",a.originX=m*w,a.originY=-T;break}a.scaleX=a.scaleY=o,a.setStyle({verticalAlign:a.__verticalAlign||v,align:a.__align||p})}},t}(he),rF=function(){function e(t){this.group=new he,this._LineCtor=t||nF}return e.prototype.updateData=function(t){var n=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=t,a||i.removeAll();var o=CW(t);t.diff(a).add(function(s){n._doAdd(t,s,o)}).update(function(s,l){n._doUpdate(a,t,l,s,o)}).remove(function(s){i.remove(a.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(n,r){n.updateLayout(t,r)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=CW(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,n){this._progressiveEls=[];function r(s){!s.isGroup&&!YSt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=n.getItemLayout(i);if(DI(a)){var o=new this._LineCtor(n,i,this._seriesScope);o.traverse(r),this.group.add(o),n.setItemGraphicEl(i,o),this._progressiveEls.push(o)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){sd(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,n,r){var i=t.getItemLayout(n);if(DI(i)){var a=new this._LineCtor(t,n,r);t.setItemGraphicEl(n,a),this.group.add(a)}},e.prototype._doUpdate=function(t,n,r,i,a){var o=t.getItemGraphicEl(r);if(!DI(n.getItemLayout(i))){this.group.remove(o);return}o?o.updateData(n,i,a):o=new this._LineCtor(n,i,a),n.setItemGraphicEl(i,o),this.group.add(o)},e}();function YSt(e){return e.animators&&e.animators.length>0}function CW(e){var t=e.hostModel,n=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:Fi(t)}}function EW(e){return isNaN(e[0])||isNaN(e[1])}function DI(e){return e&&!EW(e[0])&&!EW(e[1])}var II=[],LI=[],PI=[],hg=Ki,RI=qp,DW=Math.abs;function IW(e,t,n){for(var r=e[0],i=e[1],a=e[2],o=1/0,s,l=n*n,u=.1,c=.1;c<=.9;c+=.1){II[0]=hg(r[0],i[0],a[0],c),II[1]=hg(r[1],i[1],a[1],c);var h=DW(RI(II,t)-l);h<o&&(o=h,s=c)}for(var f=0;f<32;f++){var d=s+u;LI[0]=hg(r[0],i[0],a[0],s),LI[1]=hg(r[1],i[1],a[1],s),PI[0]=hg(r[0],i[0],a[0],d),PI[1]=hg(r[1],i[1],a[1],d);var h=RI(LI,t)-l;if(DW(h)<.01)break;var p=RI(PI,t)-l;u/=2,h<0?p>=0?s=s+u:s=s-u:p>=0?s=s-u:s=s+u}return s}function OI(e,t){var n=[],r=ib,i=[[],[],[]],a=[[],[]],o=[];t/=2,e.eachEdge(function(s,l){var u=s.getLayout(),c=s.getVisual("fromSymbol"),h=s.getVisual("toSymbol");u.__original||(u.__original=[zc(u[0]),zc(u[1])],u[2]&&u.__original.push(zc(u[2])));var f=u.__original;if(u[2]!=null){if(Na(i[0],f[0]),Na(i[1],f[2]),Na(i[2],f[1]),c&&c!=="none"){var d=lx(s.node1),p=IW(i,f[0],d*t);r(i[0][0],i[1][0],i[2][0],p,n),i[0][0]=n[3],i[1][0]=n[4],r(i[0][1],i[1][1],i[2][1],p,n),i[0][1]=n[3],i[1][1]=n[4]}if(h&&h!=="none"){var d=lx(s.node2),p=IW(i,f[1],d*t);r(i[0][0],i[1][0],i[2][0],p,n),i[1][0]=n[1],i[2][0]=n[2],r(i[0][1],i[1][1],i[2][1],p,n),i[1][1]=n[1],i[2][1]=n[2]}Na(u[0],i[0]),Na(u[1],i[2]),Na(u[2],i[1])}else{if(Na(a[0],f[0]),Na(a[1],f[1]),Ep(o,a[1],a[0]),Qy(o,o),c&&c!=="none"){var d=lx(s.node1);KR(a[0],a[0],o,d*t)}if(h&&h!=="none"){var d=lx(s.node2);KR(a[1],a[1],o,-d*t)}Na(u[0],a[0]),Na(u[1],a[1])}})}function LW(e){return e.type==="view"}var qSt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){var i=new E1,a=new rF,o=this.group;this._controller=new R1(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),this._symbolDraw=i,this._lineDraw=a,this._firstRender=!0},t.prototype.render=function(n,r,i){var a=this,o=n.coordinateSystem;this._model=n;var s=this._symbolDraw,l=this._lineDraw,u=this.group;if(LW(o)){var c={x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY};this._firstRender?u.attr(c):Tn(u,c,n)}OI(n.getGraph(),sx(n));var h=n.getData();s.updateData(h);var f=n.getEdgeData();l.updateData(f),this._updateNodeAndLinkScale(),this._updateController(n,r,i),clearTimeout(this._layoutTimeout);var d=n.forceLayout,p=n.get(["force","layoutAnimation"]);d&&this._startForceLayoutIteration(d,p);var v=n.get("layout");h.graph.eachNode(function(y){var x=y.dataIndex,S=y.getGraphicEl(),b=y.getModel();if(S){S.off("drag").off("dragend");var w=b.get("draggable");w&&S.on("drag",function(T){switch(v){case"force":d.warmUp(),!a._layouting&&a._startForceLayoutIteration(d,p),d.setFixed(x),h.setItemLayout(x,[S.x,S.y]);break;case"circular":h.setItemLayout(x,[S.x,S.y]),y.setLayout({fixed:!0},!0),eF(n,"symbolSize",y,[T.offsetX,T.offsetY]),a.updateLayout(n);break;case"none":default:h.setItemLayout(x,[S.x,S.y]),tF(n.getGraph(),n),a.updateLayout(n);break}}).on("dragend",function(){d&&d.setUnfixed(x)}),S.setDraggable(w,!!b.get("cursor"));var A=b.get(["emphasis","focus"]);A==="adjacency"&&(fe(S).focus=y.getAdjacentDataIndices())}}),h.graph.eachEdge(function(y){var x=y.getGraphicEl(),S=y.getModel().get(["emphasis","focus"]);x&&S==="adjacency"&&(fe(x).focus={edge:[y.dataIndex],node:[y.node1.dataIndex,y.node2.dataIndex]})});var g=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),m=h.getLayout("cx"),_=h.getLayout("cy");h.graph.eachNode(function(y){Att(y,g,m,_)}),this._firstRender=!1},t.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(n,r){var i=this;(function a(){n.step(function(o){i.updateLayout(i._model),(i._layouting=!o)&&(r?i._layoutTimeout=setTimeout(a,16):a())})})()},t.prototype._updateController=function(n,r,i){var a=this,o=this._controller,s=this._controllerHost,l=this.group;if(o.setPointerChecker(function(u,c,h){var f=l.getBoundingRect();return f.applyTransform(l.transform),f.contain(c,h)&&!DE(u,i,n)}),!LW(n.coordinateSystem)){o.disable();return}o.enable(n.get("roam")),s.zoomLimit=n.get("scaleLimit"),s.zoom=n.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(u){Wk(s,u.dx,u.dy),i.dispatchAction({seriesId:n.id,type:"graphRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){$k(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),a._updateNodeAndLinkScale(),OI(n.getGraph(),sx(n)),a._lineDraw.updateLayout(),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(){var n=this._model,r=n.getData(),i=sx(n);r.eachItemGraphicEl(function(a,o){a&&a.setSymbolScale(i)})},t.prototype.updateLayout=function(n){OI(n.getGraph(),sx(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}(hn);function fg(e){return"_EC_"+e}var Ett=function(){function e(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return e.prototype.isDirected=function(){return this._directed},e.prototype.addNode=function(t,n){t=t==null?""+n:""+t;var r=this._nodesMap;if(!r[fg(t)]){var i=new pp(t,n);return i.hostGraph=this,this.nodes.push(i),r[fg(t)]=i,i}},e.prototype.getNodeByIndex=function(t){var n=this.data.getRawIndex(t);return this.nodes[n]},e.prototype.getNodeById=function(t){return this._nodesMap[fg(t)]},e.prototype.addEdge=function(t,n,r){var i=this._nodesMap,a=this._edgesMap;if(xn(t)&&(t=this.nodes[t]),xn(n)&&(n=this.nodes[n]),t instanceof pp||(t=i[fg(t)]),n instanceof pp||(n=i[fg(n)]),!(!t||!n)){var o=t.id+"-"+n.id,s=new Dtt(t,n,r);return s.hostGraph=this,this._directed&&(t.outEdges.push(s),n.inEdges.push(s)),t.edges.push(s),t!==n&&n.edges.push(s),this.edges.push(s),a[o]=s,s}},e.prototype.getEdgeByIndex=function(t){var n=this.edgeData.getRawIndex(t);return this.edges[n]},e.prototype.getEdge=function(t,n){t instanceof pp&&(t=t.id),n instanceof pp&&(n=n.id);var r=this._edgesMap;return this._directed?r[t+"-"+n]:r[t+"-"+n]||r[n+"-"+t]},e.prototype.eachNode=function(t,n){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&t.call(n,r[a],a)},e.prototype.eachEdge=function(t,n){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&t.call(n,r[a],a)},e.prototype.breadthFirstTraverse=function(t,n,r,i){if(n instanceof pp||(n=this._nodesMap[fg(n)]),!!n){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(i,n,null))for(var s=[n];s.length;)for(var l=s.shift(),u=l[a],o=0;o<u.length;o++){var c=u[o],h=c.node1===l?c.node2:c.node1;if(!h.__visited){if(t.call(i,h,l))return;s.push(h),h.__visited=!0}}}},e.prototype.update=function(){for(var t=this.data,n=this.edgeData,r=this.nodes,i=this.edges,a=0,o=r.length;a<o;a++)r[a].dataIndex=-1;for(var a=0,o=t.count();a<o;a++)r[t.getRawIndex(a)].dataIndex=a;n.filterSelf(function(s){var l=i[n.getRawIndex(s)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,o=i.length;a<o;a++)i[a].dataIndex=-1;for(var a=0,o=n.count();a<o;a++)i[n.getRawIndex(a)].dataIndex=a},e.prototype.clone=function(){for(var t=new e(this._directed),n=this.nodes,r=this.edges,i=0;i<n.length;i++)t.addNode(n[i].id,n[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];t.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return t},e}(),pp=function(){function e(t,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=t??"",this.dataIndex=n??-1}return e.prototype.degree=function(){return this.edges.length},e.prototype.inDegree=function(){return this.inEdges.length},e.prototype.outDegree=function(){return this.outEdges.length},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.data.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},n=0;n<this.edges.length;n++){var r=this.edges[n];r.dataIndex<0||(t.edge.push(r.dataIndex),t.node.push(r.node1.dataIndex,r.node2.dataIndex))}return t},e.prototype.getTrajectoryDataIndices=function(){for(var t=jt(),n=jt(),r=0;r<this.edges.length;r++){var i=this.edges[r];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var a=[i.node1],o=[i.node2],s=0;s<a.length;){var l=a[s];s++,n.set(l.dataIndex,!0);for(var u=0;u<l.inEdges.length;u++)t.set(l.inEdges[u].dataIndex,!0),a.push(l.inEdges[u].node1)}for(s=0;s<o.length;){var c=o[s];s++,n.set(c.dataIndex,!0);for(var u=0;u<c.outEdges.length;u++)t.set(c.outEdges[u].dataIndex,!0),o.push(c.outEdges[u].node2)}}}return{edge:t.keys(),node:n.keys()}},e}(),Dtt=function(){function e(t,n,r){this.dataIndex=-1,this.node1=t,this.node2=n,this.dataIndex=r??-1}return e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var n=this.hostGraph,r=n.edgeData.getItemModel(this.dataIndex);return r.getModel(t)}},e.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},e.prototype.getTrajectoryDataIndices=function(){var t=jt(),n=jt();t.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var o=r[a];a++,n.set(o.dataIndex,!0);for(var s=0;s<o.inEdges.length;s++)t.set(o.inEdges[s].dataIndex,!0),r.push(o.inEdges[s].node1)}for(a=0;a<i.length;){var l=i[a];a++,n.set(l.dataIndex,!0);for(var s=0;s<l.outEdges.length;s++)t.set(l.outEdges[s].dataIndex,!0),i.push(l.outEdges[s].node2)}return{edge:t.keys(),node:n.keys()}},e}();function Itt(e,t){return{getValue:function(n){var r=this[e][t];return r.getStore().get(r.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,r)},getVisual:function(n){return this[e][t].getItemVisual(this.dataIndex,n)},setLayout:function(n,r){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}ti(pp,Itt("hostGraph","data"));ti(Dtt,Itt("hostGraph","edgeData"));function Ltt(e,t,n,r,i){for(var a=new Ett(r),o=0;o<e.length;o++)a.addNode(Qi(e[o].id,e[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<t.length;o++){var c=t[o],h=c.source,f=c.target;a.addEdge(h,f,u)&&(l.push(c),s.push(Qi(pi(c.id,null),h+" > "+f)),u++)}var d=n.get("coordinateSystem"),p;if(d==="cartesian2d"||d==="polar")p=Qu(e,n);else{var v=c0.get(d),g=v?v.dimensions||[]:[];Le(g,"value")<0&&g.concat(["value"]);var m=p0(e,{coordDimensions:g,encodeDefine:n.getEncode()}).dimensions;p=new Ir(m,n),p.initData(e)}var _=new Ir(["value"],n);return _.initData(l,s),i&&i(p,_),Yk({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var KSt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new P1(i,i),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},t.prototype.mergeOption=function(n){e.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(n){e.prototype.mergeDefaultAndTheme.apply(this,arguments),hv(n,"edgeLabel",["show"])},t.prototype.getInitialData=function(n,r){var i=n.edges||n.links||[],a=n.data||n.nodes||[],o=this;if(a&&i){kSt(this);var s=Ltt(a,i,this,!0,l);return R(s.edges,function(u){FSt(u.node1,u.node2,this,u.dataIndex)},this),s.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var v=o._categoriesModels,g=p.getShallow("category"),m=v[g];return m&&(m.parentModel=p.parentModel,p.parentModel=m),p});var h=pn.prototype.getModel;function f(p,v){var g=h.call(this,p,v);return g.resolveParentPath=d,g}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=d,p.getModel=f,p});function d(p){if(p&&(p[0]==="label"||p[1]==="label")){var v=p.slice();return p[0]==="label"?v[0]="edgeLabel":p[1]==="label"&&(v[1]="edgeLabel"),v}return p}}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(n,r,i){if(i==="edge"){var a=this.getData(),o=this.getDataParams(n,i),s=a.graph.getEdgeByIndex(n),l=a.getName(s.node1.dataIndex),u=a.getName(s.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),zi("nameValue",{name:c.join(" > "),value:o.value,noValue:o.value==null})}var h=QZ({series:this,dataIndex:n,multipleSeries:r});return h},t.prototype._updateCategoriesData=function(){var n=yt(this.option.categories||[],function(i){return i.value!=null?i:ut({value:0},i)}),r=new Ir(["value"],this);r.initData(n),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},t.prototype.setZoom=function(n){this.option.zoom=n},t.prototype.setCenter=function(n){this.option.center=n},t.prototype.isAnimationEnabled=function(){return e.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(bn),ZSt={type:"graphRoam",event:"graphRoam",update:"none"};function JSt(e){e.registerChartView(qSt),e.registerSeriesModel(KSt),e.registerProcessor(PSt),e.registerVisual(RSt),e.registerVisual(OSt),e.registerLayout(zSt),e.registerLayout(e.PRIORITY.VISUAL.POST_CHART_LAYOUT,VSt),e.registerLayout(HSt),e.registerCoordinateSystem("graphView",{dimensions:O1.dimensions,create:$St}),e.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Zr),e.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Zr),e.registerAction(ZSt,function(t,n,r){n.eachComponent({mainType:"series",query:t},function(i){var a=i.coordinateSystem,o=jk(a,t,void 0,r);i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var QSt=function(){function e(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return e}(),twt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="pointer",r}return t.prototype.getDefaultShape=function(){return new QSt},t.prototype.buildPath=function(n,r){var i=Math.cos,a=Math.sin,o=r.r,s=r.width,l=r.angle,u=r.x-i(l)*s*(s>=o/3?1:2),c=r.y-a(l)*s*(s>=o/3?1:2);l=r.angle-Math.PI/2,n.moveTo(u,c),n.lineTo(r.x+i(l)*s,r.y+a(l)*s),n.lineTo(r.x+i(r.angle)*o,r.y+a(r.angle)*o),n.lineTo(r.x-i(l)*s,r.y-a(l)*s),n.lineTo(u,c)},t}(Ve);function ewt(e,t){var n=e.get("center"),r=t.getWidth(),i=t.getHeight(),a=Math.min(r,i),o=Dt(n[0],t.getWidth()),s=Dt(n[1],t.getHeight()),l=Dt(e.get("radius"),a/2);return{cx:o,cy:s,r:l}}function fw(e,t){var n=e==null?"":e+"";return t&&(Ft(t)?n=t.replace("{value}",n):ae(t)&&(n=t(e))),n}var nwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){this.group.removeAll();var a=n.get(["axisLine","lineStyle","color"]),o=ewt(n,i);this._renderMain(n,r,i,a,o),this._data=n.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(n,r,i,a,o){var s=this.group,l=n.get("clockwise"),u=-n.get("startAngle")/180*Math.PI,c=-n.get("endAngle")/180*Math.PI,h=n.getModel("axisLine"),f=h.get("roundCap"),d=f?cA:Xa,p=h.get("show"),v=h.getModel("lineStyle"),g=v.get("width"),m=[u,c];UB(m,!l),u=m[0],c=m[1];for(var _=c-u,y=u,x=[],S=0;p&&S<a.length;S++){var b=Math.min(Math.max(a[S][0],0),1);c=u+_*b;var w=new d({shape:{startAngle:y,endAngle:c,cx:o.cx,cy:o.cy,clockwise:l,r0:o.r-g,r:o.r},silent:!0});w.setStyle({fill:a[S][1]}),w.setStyle(v.getLineStyle(["color","width"])),x.push(w),y=c}x.reverse(),R(x,function(T){return s.add(T)});var A=function(T){if(T<=0)return a[0][1];var M;for(M=0;M<a.length;M++)if(a[M][0]>=T&&(M===0?0:a[M-1][0])<T)return a[M][1];return a[M-1][1]};this._renderTicks(n,r,i,A,o,u,c,l,g),this._renderTitleAndDetail(n,r,i,A,o),this._renderAnchor(n,o),this._renderPointer(n,r,i,A,o,u,c,l,g)},t.prototype._renderTicks=function(n,r,i,a,o,s,l,u,c){for(var h=this.group,f=o.cx,d=o.cy,p=o.r,v=+n.get("min"),g=+n.get("max"),m=n.getModel("splitLine"),_=n.getModel("axisTick"),y=n.getModel("axisLabel"),x=n.get("splitNumber"),S=_.get("splitNumber"),b=Dt(m.get("length"),p),w=Dt(_.get("length"),p),A=s,T=(l-s)/x,M=T/S,C=m.getModel("lineStyle").getLineStyle(),E=_.getModel("lineStyle").getLineStyle(),D=m.get("distance"),I,L,P=0;P<=x;P++){if(I=Math.cos(A),L=Math.sin(A),m.get("show")){var B=D?D+c:c,N=new Ei({shape:{x1:I*(p-B)+f,y1:L*(p-B)+d,x2:I*(p-b-B)+f,y2:L*(p-b-B)+d},style:C,silent:!0});C.stroke==="auto"&&N.setStyle({stroke:a(P/x)}),h.add(N)}if(y.get("show")){var B=y.get("distance")+D,k=fw(_r(P/x*(g-v)+v),y.get("formatter")),U=a(P/x),Z=I*(p-b-B)+f,nt=L*(p-b-B)+d,ct=y.get("rotate"),K=0;ct==="radial"?(K=-A+2*Math.PI,K>Math.PI/2&&(K+=Math.PI)):ct==="tangential"?K=-A-Math.PI/2:xn(ct)&&(K=ct*Math.PI/180),K===0?h.add(new Qe({style:Hn(y,{text:k,x:Z,y:nt,verticalAlign:L<-.8?"top":L>.8?"bottom":"middle",align:I<-.4?"left":I>.4?"right":"center"},{inheritColor:U}),silent:!0})):h.add(new Qe({style:Hn(y,{text:k,x:Z,y:nt,verticalAlign:"middle",align:"center"},{inheritColor:U}),silent:!0,originX:Z,originY:nt,rotation:K}))}if(_.get("show")&&P!==x){var B=_.get("distance");B=B?B+c:c;for(var $=0;$<=S;$++){I=Math.cos(A),L=Math.sin(A);var ot=new Ei({shape:{x1:I*(p-B)+f,y1:L*(p-B)+d,x2:I*(p-w-B)+f,y2:L*(p-w-B)+d},silent:!0,style:E});E.stroke==="auto"&&ot.setStyle({stroke:a((P+$/S)/x)}),h.add(ot),A+=M}A-=M}else A+=T}},t.prototype._renderPointer=function(n,r,i,a,o,s,l,u,c){var h=this.group,f=this._data,d=this._progressEls,p=[],v=n.get(["pointer","show"]),g=n.getModel("progress"),m=g.get("show"),_=n.getData(),y=_.mapDimension("value"),x=+n.get("min"),S=+n.get("max"),b=[x,S],w=[s,l];function A(M,C){var E=_.getItemModel(M),D=E.getModel("pointer"),I=Dt(D.get("width"),o.r),L=Dt(D.get("length"),o.r),P=n.get(["pointer","icon"]),B=D.get("offsetCenter"),N=Dt(B[0],o.r),k=Dt(B[1],o.r),U=D.get("keepAspect"),Z;return P?Z=Jr(P,N-I/2,k-L,I,L,null,U):Z=new twt({shape:{angle:-Math.PI/2,width:I,r:L,x:N,y:k}}),Z.rotation=-(C+Math.PI/2),Z.x=o.cx,Z.y=o.cy,Z}function T(M,C){var E=g.get("roundCap"),D=E?cA:Xa,I=g.get("overlap"),L=I?g.get("width"):c/_.count(),P=I?o.r-L:o.r-(M+1)*L,B=I?o.r:o.r-M*L,N=new D({shape:{startAngle:s,endAngle:C,cx:o.cx,cy:o.cy,clockwise:u,r0:P,r:B}});return I&&(N.z2=S-_.get(y,M)%S),N}(m||v)&&(_.diff(f).add(function(M){var C=_.get(y,M);if(v){var E=A(M,s);xr(E,{rotation:-((isNaN(+C)?w[0]:Cn(C,b,w,!0))+Math.PI/2)},n),h.add(E),_.setItemGraphicEl(M,E)}if(m){var D=T(M,s),I=g.get("clip");xr(D,{shape:{endAngle:Cn(C,b,w,I)}},n),h.add(D),SO(n.seriesIndex,_.dataType,M,D),p[M]=D}}).update(function(M,C){var E=_.get(y,M);if(v){var D=f.getItemGraphicEl(C),I=D?D.rotation:s,L=A(M,I);L.rotation=I,Tn(L,{rotation:-((isNaN(+E)?w[0]:Cn(E,b,w,!0))+Math.PI/2)},n),h.add(L),_.setItemGraphicEl(M,L)}if(m){var P=d[C],B=P?P.shape.endAngle:s,N=T(M,B),k=g.get("clip");Tn(N,{shape:{endAngle:Cn(E,b,w,k)}},n),h.add(N),SO(n.seriesIndex,_.dataType,M,N),p[M]=N}}).execute(),_.each(function(M){var C=_.getItemModel(M),E=C.getModel("emphasis"),D=E.get("focus"),I=E.get("blurScope"),L=E.get("disabled");if(v){var P=_.getItemGraphicEl(M),B=_.getItemVisual(M,"style"),N=B.fill;if(P instanceof Wi){var k=P.style;P.useStyle(ut({image:k.image,x:k.x,y:k.y,width:k.width,height:k.height},B))}else P.useStyle(B),P.type!=="pointer"&&P.setColor(N);P.setStyle(C.getModel(["pointer","itemStyle"]).getItemStyle()),P.style.fill==="auto"&&P.setStyle("fill",a(Cn(_.get(y,M),b,[0,1],!0))),P.z2EmphasisLift=0,ca(P,C),Vr(P,D,I,L)}if(m){var U=p[M];U.useStyle(_.getItemVisual(M,"style")),U.setStyle(C.getModel(["progress","itemStyle"]).getItemStyle()),U.z2EmphasisLift=0,ca(U,C),Vr(U,D,I,L)}}),this._progressEls=p)},t.prototype._renderAnchor=function(n,r){var i=n.getModel("anchor"),a=i.get("show");if(a){var o=i.get("size"),s=i.get("icon"),l=i.get("offsetCenter"),u=i.get("keepAspect"),c=Jr(s,r.cx-o/2+Dt(l[0],r.r),r.cy-o/2+Dt(l[1],r.r),o,o,null,u);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},t.prototype._renderTitleAndDetail=function(n,r,i,a,o){var s=this,l=n.getData(),u=l.mapDimension("value"),c=+n.get("min"),h=+n.get("max"),f=new he,d=[],p=[],v=n.isAnimationEnabled(),g=n.get(["pointer","showAbove"]);l.diff(this._data).add(function(m){d[m]=new Qe({silent:!0}),p[m]=new Qe({silent:!0})}).update(function(m,_){d[m]=s._titleEls[_],p[m]=s._detailEls[_]}).execute(),l.each(function(m){var _=l.getItemModel(m),y=l.get(u,m),x=new he,S=a(Cn(y,[c,h],[0,1],!0)),b=_.getModel("title");if(b.get("show")){var w=b.get("offsetCenter"),A=o.cx+Dt(w[0],o.r),T=o.cy+Dt(w[1],o.r),M=d[m];M.attr({z2:g?0:2,style:Hn(b,{x:A,y:T,text:l.getName(m),align:"center",verticalAlign:"middle"},{inheritColor:S})}),x.add(M)}var C=_.getModel("detail");if(C.get("show")){var E=C.get("offsetCenter"),D=o.cx+Dt(E[0],o.r),I=o.cy+Dt(E[1],o.r),L=Dt(C.get("width"),o.r),P=Dt(C.get("height"),o.r),B=n.get(["progress","show"])?l.getItemVisual(m,"style").fill:S,M=p[m],N=C.get("formatter");M.attr({z2:g?0:2,style:Hn(C,{x:D,y:I,text:fw(y,N),width:isNaN(L)?null:L,height:isNaN(P)?null:P,align:"center",verticalAlign:"middle"},{inheritColor:B})}),iZ(M,{normal:C},y,function(U){return fw(U,N)}),v&&aZ(M,m,l,n,{getFormattedLabel:function(U,Z,nt,ct,K,$){return fw($?$.interpolatedValue:y,N)}}),x.add(M)}f.add(x)}),this.group.add(f),this._titleEls=d,this._detailEls=p},t.type="gauge",t}(hn),rwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="itemStyle",n}return t.prototype.getInitialData=function(n,r){return g0(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(bn);function iwt(e){e.registerChartView(nwt),e.registerSeriesModel(rwt)}var awt=["itemStyle","opacity"],owt=function(e){it(t,e);function t(n,r){var i=e.call(this)||this,a=i,o=new Ja,s=new Qe;return a.setTextContent(s),i.setTextGuideLine(o),i.updateData(n,r,!0),i}return t.prototype.updateData=function(n,r,i){var a=this,o=n.hostModel,s=n.getItemModel(r),l=n.getItemLayout(r),u=s.getModel("emphasis"),c=s.get(awt);c=c??1,i||Ol(a),a.useStyle(n.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,xr(a,{style:{opacity:c}},o,r)):Tn(a,{style:{opacity:c},shape:{points:l.points}},o,r),ca(a,s),this._updateLabel(n,r),Vr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(n,r){var i=this,a=this.getTextGuideLine(),o=i.getTextContent(),s=n.hostModel,l=n.getItemModel(r),u=n.getItemLayout(r),c=u.label,h=n.getItemVisual(r,"style"),f=h.fill;ha(o,Fi(l),{labelFetcher:n.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:n.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}}),i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:f,outsideFill:f});var d=c.linePoints;a.setShape({points:d}),i.textGuideLineConfig={anchor:d?new Me(d[0][0],d[0][1]):null},Tn(o,{style:{x:c.x,y:c.y}},s,r),o.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),Pk(i,Rk(l),{stroke:f})},t}(ja),swt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreLabelLineUpdate=!0,n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this._data,s=this.group;a.diff(o).add(function(l){var u=new owt(a,l);a.setItemGraphicEl(l,u),s.add(u)}).update(function(l,u){var c=o.getItemGraphicEl(u);c.updateData(a,l),s.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=o.getItemGraphicEl(l);hb(u,n,l)}).execute(),this._data=a},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}(hn),lwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new P1(Vt(this.getData,this),Vt(this.getRawData,this)),this._defaultLabelLine(n)},t.prototype.getInitialData=function(n,r){return g0(this,{coordDimensions:["value"],encodeDefaulter:_e(ik,this)})},t.prototype._defaultLabelLine=function(n){hv(n,"labelLine",["show"]);var r=n.labelLine,i=n.emphasis.labelLine;r.show=r.show&&n.label.show,i.show=i.show&&n.emphasis.label.show},t.prototype.getDataParams=function(n){var r=this.getData(),i=e.prototype.getDataParams.call(this,n),a=r.mapDimension("value"),o=r.getSum(a);return i.percent=o?+(r.get(a,n)/o*100).toFixed(2):0,i.$vars.push("percent"),i},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(bn);function uwt(e,t){return Gr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function cwt(e,t){for(var n=e.mapDimension("value"),r=e.mapArray(n,function(l){return l}),i=[],a=t==="ascending",o=0,s=e.count();o<s;o++)i[o]=o;return ae(t)?i.sort(t):t!=="none"&&i.sort(function(l,u){return a?r[l]-r[u]:r[u]-r[l]}),i}function hwt(e){var t=e.hostModel,n=t.get("orient");e.each(function(r){var i=e.getItemModel(r),a=i.getModel("label"),o=a.get("position"),s=i.getModel("labelLine"),l=e.getItemLayout(r),u=l.points,c=o==="inner"||o==="inside"||o==="center"||o==="insideLeft"||o==="insideRight",h,f,d,p;if(c)o==="insideLeft"?(f=(u[0][0]+u[3][0])/2+5,d=(u[0][1]+u[3][1])/2,h="left"):o==="insideRight"?(f=(u[1][0]+u[2][0])/2-5,d=(u[1][1]+u[2][1])/2,h="right"):(f=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,d=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),p=[[f,d],[f,d]];else{var v=void 0,g=void 0,m=void 0,_=void 0,y=s.get("length");o==="left"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,m=v-y,f=m-5,h="right"):o==="right"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,m=v+y,f=m+5,h="left"):o==="top"?(v=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,_=g-y,d=_-5,h="center"):o==="bottom"?(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,_=g+y,d=_+5,h="center"):o==="rightTop"?(v=n==="horizontal"?u[3][0]:u[1][0],g=n==="horizontal"?u[3][1]:u[1][1],n==="horizontal"?(_=g-y,d=_-5,h="center"):(m=v+y,f=m+5,h="top")):o==="rightBottom"?(v=u[2][0],g=u[2][1],n==="horizontal"?(_=g+y,d=_+5,h="center"):(m=v+y,f=m+5,h="bottom")):o==="leftTop"?(v=u[0][0],g=n==="horizontal"?u[0][1]:u[1][1],n==="horizontal"?(_=g-y,d=_-5,h="center"):(m=v-y,f=m-5,h="right")):o==="leftBottom"?(v=n==="horizontal"?u[1][0]:u[3][0],g=n==="horizontal"?u[1][1]:u[2][1],n==="horizontal"?(_=g+y,d=_+5,h="center"):(m=v-y,f=m-5,h="right")):(v=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,n==="horizontal"?(_=g+y,d=_+5,h="center"):(m=v+y,f=m+5,h="left")),n==="horizontal"?(m=v,f=m):(_=g,d=_),p=[[v,g],[m,_]]}l.label={linePoints:p,x:f,y:d,verticalAlign:"middle",textAlign:h,inside:c}})}function fwt(e,t){e.eachSeriesByType("funnel",function(n){var r=n.getData(),i=r.mapDimension("value"),a=n.get("sort"),o=uwt(n,t),s=n.get("orient"),l=o.width,u=o.height,c=cwt(r,a),h=o.x,f=o.y,d=s==="horizontal"?[Dt(n.get("minSize"),u),Dt(n.get("maxSize"),u)]:[Dt(n.get("minSize"),l),Dt(n.get("maxSize"),l)],p=r.getDataExtent(i),v=n.get("min"),g=n.get("max");v==null&&(v=Math.min(p[0],0)),g==null&&(g=p[1]);var m=n.get("funnelAlign"),_=n.get("gap"),y=s==="horizontal"?l:u,x=(y-_*(r.count()-1))/r.count(),S=function(I,L){if(s==="horizontal"){var P=r.get(i,I)||0,B=Cn(P,[v,g],d,!0),N=void 0;switch(m){case"top":N=f;break;case"center":N=f+(u-B)/2;break;case"bottom":N=f+(u-B);break}return[[L,N],[L,N+B]]}var k=r.get(i,I)||0,U=Cn(k,[v,g],d,!0),Z;switch(m){case"left":Z=h;break;case"center":Z=h+(l-U)/2;break;case"right":Z=h+l-U;break}return[[Z,L],[Z+U,L]]};a==="ascending"&&(x=-x,_=-_,s==="horizontal"?h+=l:f+=u,c=c.reverse());for(var b=0;b<c.length;b++){var w=c[b],A=c[b+1],T=r.getItemModel(w);if(s==="horizontal"){var M=T.get(["itemStyle","width"]);M==null?M=x:(M=Dt(M,l),a==="ascending"&&(M=-M));var C=S(w,h),E=S(A,h+M);h+=M+_,r.setItemLayout(w,{points:C.concat(E.slice().reverse())})}else{var D=T.get(["itemStyle","height"]);D==null?D=x:(D=Dt(D,u),a==="ascending"&&(D=-D));var C=S(w,f),E=S(A,f+D);f+=D+_,r.setItemLayout(w,{points:C.concat(E.slice().reverse())})}}hwt(r)})}function dwt(e){e.registerChartView(swt),e.registerSeriesModel(lwt),e.registerLayout(fwt),e.registerProcessor(L1("funnel"))}var pwt=.3,vwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._dataGroup=new he,n._initialized=!1,n}return t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(n,r,i,a){this._progressiveEls=null;var o=this._dataGroup,s=n.getData(),l=this._data,u=n.coordinateSystem,c=u.dimensions,h=RW(n);s.diff(l).add(f).update(d).remove(p).execute();function f(g){var m=PW(s,o,g,c,u);NI(m,s,g,h)}function d(g,m){var _=l.getItemGraphicEl(m),y=Ptt(s,g,c,u);s.setItemGraphicEl(g,_),Tn(_,{shape:{points:y}},n,g),Ol(_),NI(_,s,g,h)}function p(g){var m=l.getItemGraphicEl(g);o.remove(m)}if(!this._initialized){this._initialized=!0;var v=gwt(u,n,function(){setTimeout(function(){o.removeClipPath()})});o.setClipPath(v)}this._data=s},t.prototype.incrementalPrepareRender=function(n,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(n,r,i){for(var a=r.getData(),o=r.coordinateSystem,s=o.dimensions,l=RW(r),u=this._progressiveEls=[],c=n.start;c<n.end;c++){var h=PW(a,this._dataGroup,c,s,o);h.incremental=!0,NI(h,a,c,l),u.push(h)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}(hn);function gwt(e,t,n){var r=e.model,i=e.getRect(),a=new nn({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o=r.get("layout")==="horizontal"?"width":"height";return a.setShape(o,0),xr(a,{shape:{width:i.width,height:i.height}},t,n),a}function Ptt(e,t,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s=e.get(e.mapDimension(o),t);mwt(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function PW(e,t,n,r,i){var a=Ptt(e,n,r,i),o=new Ja({shape:{points:a},z2:10});return t.add(o),e.setItemGraphicEl(n,o),o}function RW(e){var t=e.get("smooth",!0);return t===!0&&(t=pwt),t=Yc(t),rb(t)&&(t=0),{smooth:t}}function NI(e,t,n,r){e.useStyle(t.getItemVisual(n,"style")),e.style.fill=null,e.setShape("smooth",r.smooth);var i=t.getItemModel(n),a=i.getModel("emphasis");ca(e,i,"lineStyle"),Vr(e,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function mwt(e,t){return t==="category"?e==null:e==null||isNaN(e)}var ywt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return t.prototype.getInitialData=function(n,r){return Qu(null,this,{useEncodeDefaulter:Vt(_wt,null,this)})},t.prototype.getRawIndicesByActiveState=function(n){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(o,s){n===o&&a.push(i.getRawIndex(s))}),a},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(bn);function _wt(e){var t=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(t){var n={};return R(t.dimensions,function(r){var i=xwt(r);n[r]=i}),n}}function xwt(e){return+e.replace("dim","")}var bwt=["lineStyle","opacity"],Swt={seriesType:"parallel",reset:function(e,t){var n=e.coordinateSystem,r={normal:e.get(["lineStyle","opacity"]),active:e.get("activeOpacity"),inactive:e.get("inactiveOpacity")};return{progress:function(i,a){n.eachActiveState(a,function(o,s){var l=r[o];if(o==="normal"&&a.hasItemOption){var u=a.getItemModel(s).get(bwt,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(s,"style");c.opacity=l},i.start,i.end)}}}};function wwt(e){Twt(e),Mwt(e)}function Twt(e){if(!e.parallel){var t=!1;R(e.series,function(n){n&&n.type==="parallel"&&(t=!0)}),t&&(e.parallel=[{}])}}function Mwt(e){var t=jn(e.parallelAxis);R(t,function(n){if(se(n)){var r=n.parallelIndex||0,i=jn(e.parallel)[r];i&&i.parallelAxisDefault&&Xt(n,i.parallelAxisDefault,!1)}})}var Awt=5,Cwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){this._model=n,this._api=i,this._handlers||(this._handlers={},R(Ewt,function(a,o){i.getZr().on(o,this._handlers[o]=Vt(a,this))},this)),f0(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(n,r){vb(this,"_throttledDispatchExpand"),R(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},t.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(ut({type:"parallelAxisExpand"},n))},t.type="parallel",t}(Zn),Ewt={mousedown:function(e){BI(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(BI(this,"click")&&t){var n=[e.offsetX,e.offsetY],r=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2);if(r>Awt)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!(this._mouseDownPoint||!BI(this,"mousemove"))){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),r=n.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function BI(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}var Dwt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){e.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(n){var r=this.option;n&&Xt(r,n,!0),this._initDimensions()},t.prototype.contains=function(n,r){var i=n.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},t.prototype.setAxisExpand=function(n){R(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){n.hasOwnProperty(r)&&(this.option[r]=n[r])},this)},t.prototype._initDimensions=function(){var n=this.dimensions=[],r=this.parallelAxisIndex=[],i=Gn(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);R(i,function(a){n.push("dim"+a.get("dim")),r.push(a.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(Ie),Iwt=function(e){it(t,e);function t(n,r,i,a,o){var s=e.call(this,n,r,i)||this;return s.type=a||"value",s.axisIndex=o,s}return t.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},t}(Qa);function $v(e,t,n,r,i,a){e=e||0;var o=n[1]-n[0];if(i!=null&&(i=dg(i,[0,o])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var s=Math.abs(t[1]-t[0]);s=dg(s,[0,o]),i=a=dg(s,[i,a]),r=0}t[0]=dg(t[0],n),t[1]=dg(t[1],n);var l=kI(t,r);t[r]+=e;var u=i||0,c=n.slice();l.sign<0?c[0]+=u:c[1]-=u,t[r]=dg(t[r],c);var h;return h=kI(t,r),i!=null&&(h.sign!==l.sign||h.span<i)&&(t[1-r]=t[r]+l.sign*i),h=kI(t,r),a!=null&&h.span>a&&(t[1-r]=t[r]+h.sign*a),t}function kI(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function dg(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var FI=R,Rtt=Math.min,Ott=Math.max,OW=Math.floor,Lwt=Math.ceil,NW=_r,Pwt=Math.PI,Rwt=function(){function e(t,n,r){this.type="parallel",this._axesMap=jt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,n,r)}return e.prototype._init=function(t,n,r){var i=t.dimensions,a=t.parallelAxisIndex;FI(i,function(o,s){var l=a[s],u=n.getComponent("parallelAxis",l),c=this._axesMap.set(o,new Iwt(o,M1(u),[0,0],u.get("type"),l)),h=c.type==="category";c.onBand=h&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},e.prototype.update=function(t,n){this._updateAxesFromSeries(this._model,t)},e.prototype.containPoint=function(t){var n=this._makeLayoutInfo(),r=n.axisBase,i=n.layoutBase,a=n.pixelDimIndex,o=t[1-a],s=t[a];return o>=r&&o<=r+n.axisLength&&s>=i&&s<=i+n.layoutLength},e.prototype.getModel=function(){return this._model},e.prototype._updateAxesFromSeries=function(t,n){n.eachSeries(function(r){if(t.contains(r,n)){var i=r.getData();FI(this.dimensions,function(a){var o=this._axesMap.get(a);o.scale.unionExtentFromData(i,i.mapDimension(a)),gv(o.scale,o.model)},this)}},this)},e.prototype.resize=function(t,n){this._rect=Gr(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},e.prototype.getRect=function(){return this._rect},e.prototype._makeLayoutInfo=function(){var t=this._model,n=this._rect,r=["x","y"],i=["width","height"],a=t.get("layout"),o=a==="horizontal"?0:1,s=n[i[o]],l=[0,s],u=this.dimensions.length,c=dw(t.get("axisExpandWidth"),l),h=dw(t.get("axisExpandCount")||0,[0,u]),f=t.get("axisExpandable")&&u>3&&u>h&&h>1&&c>0&&s>0,d=t.get("axisExpandWindow"),p;if(d)p=dw(d[1]-d[0],l),d[1]=d[0]+p;else{p=dw(c*(h-1),l);var v=t.get("axisExpandCenter")||OW(u/2);d=[c*v-p/2],d[1]=d[0]+p}var g=(s-p)/(u-h);g<3&&(g=0);var m=[OW(NW(d[0]/c,1))+1,Lwt(NW(d[1]/c,1))-1],_=g/c*d[0];return{layout:a,pixelDimIndex:o,layoutBase:n[r[o]],layoutLength:s,axisBase:n[r[1-o]],axisLength:n[i[1-o]],axisExpandable:f,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:d,axisCount:u,winInnerIndices:m,axisExpandWindow0Pos:_}},e.prototype._layoutAxes=function(){var t=this._rect,n=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;n.each(function(o){var s=[0,i.axisLength],l=o.inverse?1:0;o.setExtent(s[l],s[1-l])}),FI(r,function(o,s){var l=(i.axisExpandable?Nwt:Owt)(s,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:Pwt/2,vertical:0},h=[u[a].x+t.x,u[a].y+t.y],f=c[a],d=_o();Fv(d,d,f),ku(d,d,h),this._axesLayout[o]={position:h,rotation:f,transform:d,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},e.prototype.getAxis=function(t){return this._axesMap.get(t)},e.prototype.dataToPoint=function(t,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(t),n)},e.prototype.eachActiveState=function(t,n,r,i){r==null&&(r=0),i==null&&(i=t.count());var a=this._axesMap,o=this.dimensions,s=[],l=[];R(o,function(g){s.push(t.mapDimension(g)),l.push(a.get(g).model)});for(var u=this.hasAxisBrushed(),c=r;c<i;c++){var h=void 0;if(!u)h="normal";else{h="active";for(var f=t.getValues(s,c),d=0,p=o.length;d<p;d++){var v=l[d].getActiveState(f[d]);if(v==="inactive"){h="inactive";break}}}n(h,c)}},e.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,n=this._axesMap,r=!1,i=0,a=t.length;i<a;i++)n.get(t[i]).model.getActiveState()!=="normal"&&(r=!0);return r},e.prototype.axisCoordToPoint=function(t,n){var r=this._axesLayout[n];return Cl([t,0],r.transform)},e.prototype.getAxisLayout=function(t){return ce(this._axesLayout[t])},e.prototype.getSlidedAxisExpandWindow=function(t){var n=this._makeLayoutInfo(),r=n.pixelDimIndex,i=n.axisExpandWindow.slice(),a=i[1]-i[0],o=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var s=t[r]-n.layoutBase-n.axisExpandWindow0Pos,l,u="slide",c=n.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),f=h[0]!=null;if(c)f&&c&&s<a*h[0]?(u="jump",l=s-a*h[2]):f&&c&&s>a*(1-h[0])?(u="jump",l=s-a*(1-h[2])):(l=s-a*h[1])>=0&&(l=s-a*(1-h[1]))<=0&&(l=0),l*=n.axisExpandWidth/c,l?$v(l,i,o,"all"):u="none";else{var d=i[1]-i[0],p=o[1]*s/d;i=[Ott(0,p-d/2)],i[1]=Rtt(o[1],i[0]+d),i[0]=i[1]-d}return{axisExpandWindow:i,behavior:u}},e}();function dw(e,t){return Rtt(Ott(e,t[0]),t[1])}function Owt(e,t){var n=t.layoutLength/(t.axisCount-1);return{position:n*e,axisNameAvailableWidth:n,axisLabelShow:!0}}function Nwt(e,t){var n=t.layoutLength,r=t.axisExpandWidth,i=t.axisCount,a=t.axisCollapseWidth,o=t.winInnerIndices,s,l=a,u=!1,c;return e<o[0]?(s=e*a,c=a):e<=o[1]?(s=t.axisExpandWindow0Pos+e*r-t.axisExpandWindow[0],l=r,u=!0):(s=n-(i-1-e)*a,c=a),{position:s,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function Bwt(e,t){var n=[];return e.eachComponent("parallel",function(r,i){var a=new Rwt(r,e,t);a.name="parallel_"+i,a.resize(r,t),r.coordinateSystem=a,a.model=r,n.push(a)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",ai).models[0];r.coordinateSystem=i.coordinateSystem}}),n}var kwt={create:Bwt},dN=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.activeIntervals=[],n}return t.prototype.getAreaSelectStyle=function(){return dv([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(n){var r=this.activeIntervals=ce(n);if(r)for(var i=r.length-1;i>=0;i--)Ns(r[i])},t.prototype.getActiveState=function(n){var r=this.activeIntervals;if(!r.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=n&&n<=i[1])return"active"}else for(var a=0,o=r.length;a<o;a++)if(r[a][0]<=n&&n<=r[a][1])return"active";return"inactive"},t}(Ie);ti(dN,v0);var mv=!0,Cb=Math.min,dy=Math.max,Fwt=Math.pow,zwt=1e4,Uwt=6,Vwt=6,BW="globalPan",Gwt={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Hwt={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},kW={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Wwt=0,iF=function(e){it(t,e);function t(n){var r=e.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=n,r.group=new he,r._uid="brushController_"+Wwt++,R(Zwt,function(i,a){this._handlers[a]=Vt(i,this)},r),r}return t.prototype.enableBrush=function(n){return this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},t.prototype._doEnableBrush=function(n){var r=this._zr;this._enableGlobalPan||Bbt(r,BW,this._uid),R(this._handlers,function(i,a){r.on(a,i)}),this._brushType=n.brushType,this._brushOption=Xt(ce(kW),n,!0)},t.prototype._doDisableBrush=function(){var n=this._zr;kbt(n,BW,this._uid),R(this._handlers,function(r,i){n.off(i,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(n){if(n&&n.length){var r=this._panels={};R(n,function(i){r[i.panelId]=ce(i)})}else this._panels=null;return this},t.prototype.mount=function(n){n=n||{},this._enableGlobalPan=n.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(n){n=yt(n,function(f){return Xt(ce(kW),f,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],o=this,s=this._creatingCover;return new Zc(i,n,u,l).add(c).update(c).remove(h).execute(),this;function l(f,d){return(f.id!=null?f.id:r+d)+"-"+f.brushType}function u(f,d){return l(f.__brushOption,d)}function c(f,d){var p=n[f];if(d!=null&&i[d]===s)a[f]=i[d];else{var v=a[f]=d!=null?(i[d].__brushOption=p,i[d]):Btt(o,Ntt(o,p));aF(o,v)}}function h(f){i[f]!==s&&o.group.remove(i[f])}},t.prototype.unmount=function(){return this.enableBrush(!1),pN(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(qs);function Ntt(e,t){var n=RE[t.brushType].createCover(e,t);return n.__brushOption=t,Ftt(n,t),e.group.add(n),n}function Btt(e,t){var n=oF(t);return n.endCreating&&(n.endCreating(e,t),Ftt(t,t.__brushOption)),t}function ktt(e,t){var n=t.__brushOption;oF(t).updateCoverShape(e,t,n.range,n)}function Ftt(e,t){var n=t.z;n==null&&(n=zwt),e.traverse(function(r){r.z=n,r.z2=n})}function aF(e,t){oF(t).updateCommon(e,t),ktt(e,t)}function oF(e){return RE[e.__brushOption.brushType]}function sF(e,t,n){var r=e._panels;if(!r)return mv;var i,a=e._transform;return R(r,function(o){o.isTargetByCursor(t,n,a)&&(i=o)}),i}function ztt(e,t){var n=e._panels;if(!n)return mv;var r=t.__brushOption.panelId;return r!=null?n[r]:mv}function pN(e){var t=e._covers,n=t.length;return R(t,function(r){e.group.remove(r)},e),t.length=0,!!n}function yv(e,t){var n=yt(e._covers,function(r){var i=r.__brushOption,a=ce(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function $wt(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],r=t[0],i=n[0]-r[0],a=n[1]-r[1],o=Fwt(i*i+a*a,.5);return o>Uwt}function Utt(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function Vtt(e,t,n,r){var i=new he;return i.add(new nn({name:"main",style:lF(n),silent:!0,draggable:!0,cursor:"move",drift:_e(FW,e,t,i,["n","s","w","e"]),ondragend:_e(yv,t,{isEnd:!0})})),R(r,function(a){i.add(new nn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:_e(FW,e,t,i,a),ondragend:_e(yv,t,{isEnd:!0})}))}),i}function Gtt(e,t,n,r){var i=r.brushStyle.lineWidth||0,a=dy(i,Vwt),o=n[0][0],s=n[1][0],l=o-i/2,u=s-i/2,c=n[0][1],h=n[1][1],f=c-a+i/2,d=h-a+i/2,p=c-o,v=h-s,g=p+i,m=v+i;lc(e,t,"main",o,s,p,v),r.transformable&&(lc(e,t,"w",l,u,a,m),lc(e,t,"e",f,u,a,m),lc(e,t,"n",l,u,g,a),lc(e,t,"s",l,d,g,a),lc(e,t,"nw",l,u,a,a),lc(e,t,"ne",f,u,a,a),lc(e,t,"sw",l,d,a,a),lc(e,t,"se",f,d,a,a))}function vN(e,t){var n=t.__brushOption,r=n.transformable,i=t.childAt(0);i.useStyle(lF(n)),i.attr({silent:!r,cursor:r?"move":"default"}),R([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var o=t.childOfName(a.join("")),s=a.length===1?gN(e,a[0]):jwt(e,a);o&&o.attr({silent:!r,invisible:!r,cursor:r?Hwt[s]+"-resize":null})})}function lc(e,t,n,r,i,a,o){var s=t.childOfName(n);s&&s.setShape(qwt(uF(e,t,[[r,i],[r+a,i+o]])))}function lF(e){return te({strokeNoScale:!0},e.brushStyle)}function Htt(e,t,n,r){var i=[Cb(e,n),Cb(t,r)],a=[dy(e,n),dy(t,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Xwt(e){return tv(e.group)}function gN(e,t){var n={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=fE(n[t],Xwt(e));return r[i]}function jwt(e,t){var n=[gN(e,t[0]),gN(e,t[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function FW(e,t,n,r,i,a){var o=n.__brushOption,s=e.toRectRange(o.range),l=Wtt(t,i,a);R(r,function(u){var c=Gwt[u];s[c[0]][c[1]]+=l[c[0]]}),o.range=e.fromRectRange(Htt(s[0][0],s[1][0],s[0][1],s[1][1])),aF(t,n),yv(t,{isEnd:!1})}function Ywt(e,t,n,r){var i=t.__brushOption.range,a=Wtt(e,n,r);R(i,function(o){o[0]+=a[0],o[1]+=a[1]}),aF(e,t),yv(e,{isEnd:!1})}function Wtt(e,t,n){var r=e.group,i=r.transformCoordToLocal(t,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function uF(e,t,n){var r=ztt(e,t);return r&&r!==mv?r.clipPath(n,e._transform):ce(n)}function qwt(e){var t=Cb(e[0][0],e[1][0]),n=Cb(e[0][1],e[1][1]),r=dy(e[0][0],e[1][0]),i=dy(e[0][1],e[1][1]);return{x:t,y:n,width:r-t,height:i-n}}function Kwt(e,t,n){if(!(!e._brushType||Jwt(e,t.offsetX,t.offsetY))){var r=e._zr,i=e._covers,a=sF(e,t,n);if(!e._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(a===mv||s.panelId===a.panelId)&&RE[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}function mN(e){var t=e.event;t.preventDefault&&t.preventDefault()}function yN(e,t,n){return e.childOfName("main").contain(t,n)}function $tt(e,t,n,r){var i=e._creatingCover,a=e._creatingPanel,o=e._brushOption,s;if(e._track.push(n.slice()),$wt(e)||i){if(a&&!i){o.brushMode==="single"&&pN(e);var l=ce(o);l.brushType=zW(l.brushType,a),l.panelId=a===mv?null:a.panelId,i=e._creatingCover=Ntt(e,l),e._covers.push(i)}if(i){var u=RE[zW(e._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(uF(e,i,e._track)),r&&(Btt(e,i),u.updateCommon(e,i)),ktt(e,i),s={isEnd:r}}}else r&&o.brushMode==="single"&&o.removeOnClick&&sF(e,t,n)&&pN(e)&&(s={isEnd:r,removeOnClick:!0});return s}function zW(e,t){return e==="auto"?t.defaultBrushType:e}var Zwt={mousedown:function(e){if(this._dragging)UW(this,e);else if(!e.target||!e.target.draggable){mN(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null;var n=this._creatingPanel=sF(this,e,t);n&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,r=this.group.transformCoordToLocal(t,n);if(Kwt(this,e,r),this._dragging){mN(e);var i=$tt(this,e,r,!1);i&&yv(this,i)}},mouseup:function(e){UW(this,e)}};function UW(e,t){if(e._dragging){mN(t);var n=t.offsetX,r=t.offsetY,i=e.group.transformCoordToLocal(n,r),a=$tt(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,a&&yv(e,a)}}function Jwt(e,t,n){var r=e._zr;return t<0||t>r.getWidth()||n<0||n>r.getHeight()}var RE={lineX:VW(0),lineY:VW(1),rect:{createCover:function(e,t){function n(r){return r}return Vtt({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=Utt(e);return Htt(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,r){Gtt(e,t,n,r)},updateCommon:vN,contain:yN},polygon:{createCover:function(e,t){var n=new he;return n.add(new Ja({name:"main",style:lF(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new ja({name:"main",draggable:!0,drift:_e(Ywt,e,t),ondragend:_e(yv,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,r){t.childAt(0).setShape({points:uF(e,t,n)})},updateCommon:vN,contain:yN}};function VW(e){return{createCover:function(t,n){return Vtt({toRectRange:function(r){var i=[r,[0,100]];return e&&i.reverse(),i},fromRectRange:function(r){return r[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=Utt(t),r=Cb(n[0][e],n[1][e]),i=dy(n[0][e],n[1][e]);return[r,i]},updateCoverShape:function(t,n,r,i){var a,o=ztt(t,n);if(o!==mv&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(e);else{var s=t._zr;a=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[r,a];e&&l.reverse(),Gtt(t,n,l,i)},updateCommon:vN,contain:yN}}function Xtt(e){return e=cF(e),function(t){return eZ(t,e)}}function jtt(e,t){return e=cF(e),function(n){var r=t??n,i=r?e.width:e.height,a=r?e.x:e.y;return[a,a+(i||0)]}}function Ytt(e,t,n){var r=cF(e);return function(i,a){return r.contain(a[0],a[1])&&!DE(i,t,n)}}function cF(e){return Ae.create(e)}var Qwt=["axisLine","axisTickLabel","axisName"],tTt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){e.prototype.init.apply(this,arguments),(this._brushController=new iF(r.getZr())).on("brush",Vt(this._onBrush,this))},t.prototype.render=function(n,r,i,a){if(!eTt(n,r,a)){this.axisModel=n,this.api=i,this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new he,this.group.add(this._axisGroup),!!n.get("show")){var s=rTt(n,r),l=s.coordinateSystem,u=n.getAreaSelectStyle(),c=u.width,h=n.axis.dim,f=l.getAxisLayout(h),d=ut({strokeContainThreshold:c},f),p=new Ga(n,d);R(Qwt,p.add,p),this._axisGroup.add(p.getGroup()),this._refreshBrushController(d,u,n,s,c,i),b1(o,this._axisGroup,n)}}},t.prototype._refreshBrushController=function(n,r,i,a,o,s){var l=i.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),h=Ae.create({x:l[0],y:-o/2,width:u,height:o});h.x-=c,h.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:Xtt(h),isTargetByCursor:Ytt(h,s,a),getLinearBrushOtherExtent:jtt(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(nTt(i))},t.prototype._onBrush=function(n){var r=n.areas,i=this.axisModel,a=i.axis,o=yt(r,function(s){return[a.coordToData(s.range[0],!0),a.coordToData(s.range[1],!0)]});(!i.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(Zn);function eTt(e,t,n){return n&&n.type==="axisAreaSelect"&&t.findComponents({mainType:"parallelAxis",query:n})[0]===e}function nTt(e){var t=e.axis;return yt(e.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[t.dataToCoord(n[0],!0),t.dataToCoord(n[1],!0)]}})}function rTt(e,t){return t.getComponent("parallel",e.get("parallelIndex"))}var iTt={type:"axisAreaSelect",event:"axisAreaSelected"};function aTt(e){e.registerAction(iTt,function(t,n){n.eachComponent({mainType:"parallelAxis",query:t},function(r){r.axis.model.setActiveIntervals(t.intervals)})}),e.registerAction("parallelAxisExpand",function(t,n){n.eachComponent({mainType:"parallel",query:t},function(r){r.setAxisExpand(t)})})}var oTt={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function qtt(e){e.registerComponentView(Cwt),e.registerComponentModel(Dwt),e.registerCoordinateSystem("parallel",kwt),e.registerPreprocessor(wwt),e.registerComponentModel(dN),e.registerComponentView(tTt),fy(e,"parallel",dN,oTt),aTt(e)}function sTt(e){ue(qtt),e.registerChartView(vwt),e.registerSeriesModel(ywt),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,Swt)}var lTt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return e}(),uTt=function(e){it(t,e);function t(n){return e.call(this,n)||this}return t.prototype.getDefaultShape=function(){return new lTt},t.prototype.buildPath=function(n,r){var i=r.extent;n.moveTo(r.x1,r.y1),n.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(n.lineTo(r.x2+i,r.y2),n.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(n.lineTo(r.x2,r.y2+i),n.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),n.closePath()},t.prototype.highlight=function(){qc(this)},t.prototype.downplay=function(){Kc(this)},t}(Ve),cTt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._focusAdjacencyDisabled=!1,n}return t.prototype.render=function(n,r,i){var a=this,o=n.getGraph(),s=this.group,l=n.layoutInfo,u=l.width,c=l.height,h=n.getData(),f=n.getData("edge"),d=n.get("orient");this._model=n,s.removeAll(),s.x=l.x,s.y=l.y,o.eachEdge(function(p){var v=new uTt,g=fe(v);g.dataIndex=p.dataIndex,g.seriesIndex=n.seriesIndex,g.dataType="edge";var m=p.getModel(),_=m.getModel("lineStyle"),y=_.get("curveness"),x=p.node1.getLayout(),S=p.node1.getModel(),b=S.get("localX"),w=S.get("localY"),A=p.node2.getLayout(),T=p.node2.getModel(),M=T.get("localX"),C=T.get("localY"),E=p.getLayout(),D,I,L,P,B,N,k,U;v.shape.extent=Math.max(1,E.dy),v.shape.orient=d,d==="vertical"?(D=(b!=null?b*u:x.x)+E.sy,I=(w!=null?w*c:x.y)+x.dy,L=(M!=null?M*u:A.x)+E.ty,P=C!=null?C*c:A.y,B=D,N=I*(1-y)+P*y,k=L,U=I*y+P*(1-y)):(D=(b!=null?b*u:x.x)+x.dx,I=(w!=null?w*c:x.y)+E.sy,L=M!=null?M*u:A.x,P=(C!=null?C*c:A.y)+E.ty,B=D*(1-y)+L*y,N=I,k=D*y+L*(1-y),U=P),v.setShape({x1:D,y1:I,x2:L,y2:P,cpx1:B,cpy1:N,cpx2:k,cpy2:U}),v.useStyle(_.getItemStyle()),GW(v.style,d,p);var Z=""+m.get("value"),nt=Fi(m,"edgeLabel");ha(v,nt,{labelFetcher:{getFormattedLabel:function($,ot,tt,et,xt,St){return n.getFormattedLabel($,ot,"edge",et,Du(xt,nt.normal&&nt.normal.get("formatter"),Z),St)}},labelDataIndex:p.dataIndex,defaultText:Z}),v.setTextConfig({position:"inside"});var ct=m.getModel("emphasis");ca(v,m,"lineStyle",function($){var ot=$.getItemStyle();return GW(ot,d,p),ot}),s.add(v),f.setItemGraphicEl(p.dataIndex,v);var K=ct.get("focus");Vr(v,K==="adjacency"?p.getAdjacentDataIndices():K==="trajectory"?p.getTrajectoryDataIndices():K,ct.get("blurScope"),ct.get("disabled"))}),o.eachNode(function(p){var v=p.getLayout(),g=p.getModel(),m=g.get("localX"),_=g.get("localY"),y=g.getModel("emphasis"),x=new nn({shape:{x:m!=null?m*u:v.x,y:_!=null?_*c:v.y,width:v.dx,height:v.dy},style:g.getModel("itemStyle").getItemStyle(),z2:10});ha(x,Fi(g),{labelFetcher:{getFormattedLabel:function(b,w){return n.getFormattedLabel(b,w,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),x.disableLabelAnimation=!0,x.setStyle("fill",p.getVisual("color")),x.setStyle("decal",p.getVisual("style").decal),ca(x,g),s.add(x),h.setItemGraphicEl(p.dataIndex,x),fe(x).dataType="node";var S=y.get("focus");Vr(x,S==="adjacency"?p.getAdjacentDataIndices():S==="trajectory"?p.getTrajectoryDataIndices():S,y.get("blurScope"),y.get("disabled"))}),h.eachItemGraphicEl(function(p,v){var g=h.getItemModel(v);g.get("draggable")&&(p.drift=function(m,_){a._focusAdjacencyDisabled=!0,this.shape.x+=m,this.shape.y+=_,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:h.getRawIndex(v),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&n.isAnimationEnabled()&&s.setClipPath(hTt(s.getBoundingRect(),n,function(){s.removeClipPath()})),this._data=n.getData()},t.prototype.dispose=function(){},t.type="sankey",t}(hn);function GW(e,t,n){switch(e.fill){case"source":e.fill=n.node1.getVisual("color"),e.decal=n.node1.getVisual("style").decal;break;case"target":e.fill=n.node2.getVisual("color"),e.decal=n.node2.getVisual("style").decal;break;case"gradient":var r=n.node1.getVisual("color"),i=n.node2.getVisual("color");Ft(r)&&Ft(i)&&(e.fill=new x1(0,0,+(t==="horizontal"),+(t==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function hTt(e,t,n){var r=new nn({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return xr(r,{shape:{width:e.width+20}},t,n),r}var fTt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,r){var i=n.edges||n.links,a=n.data||n.nodes,o=n.levels;this.levelModels=[];for(var s=this.levelModels,l=0;l<o.length;l++)o[l].depth!=null&&o[l].depth>=0&&(s[o[l].depth]=new pn(o[l],this,r));if(a&&i){var u=Ltt(a,i,this,!0,c);return u.data}function c(h,f){h.wrapMethod("getItemModel",function(d,p){var v=d.parentModel,g=v.getData().getItemLayout(p);if(g){var m=g.depth,_=v.levelModels[m];_&&(d.parentModel=_)}return d}),f.wrapMethod("getItemModel",function(d,p){var v=d.parentModel,g=v.getGraph().getEdgeByIndex(p),m=g.node1.getLayout();if(m){var _=m.depth,y=v.levelModels[_];y&&(d.parentModel=y)}return d})}},t.prototype.setNodePosition=function(n,r){var i=this.option.data||this.option.nodes,a=i[n];a.localX=r[0],a.localY=r[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(n,r,i){function a(d){return isNaN(d)||d==null}if(i==="edge"){var o=this.getDataParams(n,i),s=o.data,l=o.value,u=s.source+" -- "+s.target;return zi("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(n),h=c.getLayout().value,f=this.getDataParams(n,i).data.name;return zi("nameValue",{name:f!=null?f+"":null,value:h,noValue:a(h)})}},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(n,r){var i=e.prototype.getDataParams.call(this,n,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(n),o=a.getLayout().value;i.value=o}return i},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(bn);function dTt(e,t){e.eachSeriesByType("sankey",function(n){var r=n.get("nodeWidth"),i=n.get("nodeGap"),a=pTt(n,t);n.layoutInfo=a;var o=a.width,s=a.height,l=n.getGraph(),u=l.nodes,c=l.edges;gTt(u);var h=Gn(u,function(v){return v.getLayout().value===0}),f=h.length!==0?0:n.get("layoutIterations"),d=n.get("orient"),p=n.get("nodeAlign");vTt(u,c,r,i,o,s,f,d,p)})}function pTt(e,t){return Gr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function vTt(e,t,n,r,i,a,o,s,l){mTt(e,t,n,i,a,s,l),bTt(e,t,a,i,r,o,s),ITt(e,s)}function gTt(e){R(e,function(t){var n=Pf(t.outEdges,gA),r=Pf(t.inEdges,gA),i=t.getValue()||0,a=Math.max(n,r,i);t.setLayout({value:a},!0)})}function mTt(e,t,n,r,i,a,o){for(var s=[],l=[],u=[],c=[],h=0,f=0;f<t.length;f++)s[f]=1;for(var f=0;f<e.length;f++)l[f]=e[f].inEdges.length,l[f]===0&&u.push(e[f]);for(var d=-1;u.length;){for(var p=0;p<u.length;p++){var v=u[p],g=v.hostGraph.data.getRawDataItem(v.dataIndex),m=g.depth!=null&&g.depth>=0;m&&g.depth>d&&(d=g.depth),v.setLayout({depth:m?g.depth:h},!0),a==="vertical"?v.setLayout({dy:n},!0):v.setLayout({dx:n},!0);for(var _=0;_<v.outEdges.length;_++){var y=v.outEdges[_],x=t.indexOf(y);s[x]=0;var S=y.node2,b=e.indexOf(S);--l[b]===0&&c.indexOf(S)<0&&c.push(S)}}++h,u=c,c=[]}for(var f=0;f<s.length;f++)if(s[f]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var w=d>h-1?d:h-1;o&&o!=="left"&&yTt(e,o,a,w);var A=a==="vertical"?(i-n)/w:(r-n)/w;xTt(e,A,a)}function Ktt(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return t.depth!=null&&t.depth>=0}function yTt(e,t,n,r){if(t==="right"){for(var i=[],a=e,o=0;a.length;){for(var s=0;s<a.length;s++){var l=a[s];l.setLayout({skNodeHeight:o},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++o}R(e,function(h){Ktt(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else t==="justify"&&_Tt(e,r)}function _Tt(e,t){R(e,function(n){!Ktt(n)&&!n.outEdges.length&&n.setLayout({depth:t},!0)})}function xTt(e,t,n){R(e,function(r){var i=r.getLayout().depth*t;n==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function bTt(e,t,n,r,i,a,o){var s=STt(e,o);wTt(s,t,n,r,i,o),zI(s,i,n,r,o);for(var l=1;a>0;a--)l*=.99,TTt(s,l,o),zI(s,i,n,r,o),DTt(s,l,o),zI(s,i,n,r,o)}function STt(e,t){var n=[],r=t==="vertical"?"y":"x",i=yO(e,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,o){return a-o}),R(i.keys,function(a){n.push(i.buckets.get(a))}),n}function wTt(e,t,n,r,i,a){var o=1/0;R(e,function(s){var l=s.length,u=0;R(s,function(h){u+=h.getLayout().value});var c=a==="vertical"?(r-(l-1)*i)/u:(n-(l-1)*i)/u;c<o&&(o=c)}),R(e,function(s){R(s,function(l,u){var c=l.getLayout().value*o;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),R(t,function(s){var l=+s.getValue()*o;s.setLayout({dy:l},!0)})}function zI(e,t,n,r,i){var a=i==="vertical"?"x":"y";R(e,function(o){o.sort(function(v,g){return v.getLayout()[a]-g.getLayout()[a]});for(var s,l,u,c=0,h=o.length,f=i==="vertical"?"dx":"dy",d=0;d<h;d++)l=o[d],u=c-l.getLayout()[a],u>0&&(s=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]+l.getLayout()[f]+t;var p=i==="vertical"?r:n;if(u=c-t-p,u>0){s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0),c=s;for(var d=h-2;d>=0;--d)l=o[d],u=l.getLayout()[a]+l.getLayout()[f]+t-c,u>0&&(s=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:s},!0):l.setLayout({y:s},!0)),c=l.getLayout()[a]}})}function TTt(e,t,n){R(e.slice().reverse(),function(r){R(r,function(i){if(i.outEdges.length){var a=Pf(i.outEdges,MTt,n)/Pf(i.outEdges,gA);if(isNaN(a)){var o=i.outEdges.length;a=o?Pf(i.outEdges,ATt,n)/o:0}if(n==="vertical"){var s=i.getLayout().x+(a-Gf(i,n))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Gf(i,n))*t;i.setLayout({y:l},!0)}}})})}function MTt(e,t){return Gf(e.node2,t)*e.getValue()}function ATt(e,t){return Gf(e.node2,t)}function CTt(e,t){return Gf(e.node1,t)*e.getValue()}function ETt(e,t){return Gf(e.node1,t)}function Gf(e,t){return t==="vertical"?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function gA(e){return e.getValue()}function Pf(e,t,n){for(var r=0,i=e.length,a=-1;++a<i;){var o=+t(e[a],n);isNaN(o)||(r+=o)}return r}function DTt(e,t,n){R(e,function(r){R(r,function(i){if(i.inEdges.length){var a=Pf(i.inEdges,CTt,n)/Pf(i.inEdges,gA);if(isNaN(a)){var o=i.inEdges.length;a=o?Pf(i.inEdges,ETt,n)/o:0}if(n==="vertical"){var s=i.getLayout().x+(a-Gf(i,n))*t;i.setLayout({x:s},!0)}else{var l=i.getLayout().y+(a-Gf(i,n))*t;i.setLayout({y:l},!0)}}})})}function ITt(e,t){var n=t==="vertical"?"x":"y";R(e,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[n]-a.node2.getLayout()[n]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[n]-a.node1.getLayout()[n]})}),R(e,function(r){var i=0,a=0;R(r.outEdges,function(o){o.setLayout({sy:i},!0),i+=o.getLayout().dy}),R(r.inEdges,function(o){o.setLayout({ty:a},!0),a+=o.getLayout().dy})})}function LTt(e){e.eachSeriesByType("sankey",function(t){var n=t.getGraph(),r=n.nodes,i=n.edges;if(r.length){var a=1/0,o=-1/0;R(r,function(s){var l=s.getLayout().value;l<a&&(a=l),l>o&&(o=l)}),R(r,function(s){var l=new Ni({type:"color",mappingMethod:"linear",dataExtent:[a,o],visual:t.get("color")}),u=l.mapValueToVisual(s.getLayout().value),c=s.getModel().get(["itemStyle","color"]);c!=null?(s.setVisual("color",c),s.setVisual("style",{fill:c})):(s.setVisual("color",u),s.setVisual("style",{fill:u}))})}i.length&&R(i,function(s){var l=s.getModel().get("lineStyle");s.setVisual("style",l)})})}function PTt(e){e.registerChartView(cTt),e.registerSeriesModel(fTt),e.registerLayout(dTt),e.registerVisual(LTt),e.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,n){n.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})}var Ztt=function(){function e(){}return e.prototype.getInitialData=function(t,n){var r,i=n.getComponent("xAxis",this.get("xAxisIndex")),a=n.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type"),l;o==="category"?(t.layout="horizontal",r=i.getOrdinalMeta(),l=!0):s==="category"?(t.layout="vertical",r=a.getOrdinalMeta(),l=!0):t.layout=t.layout||"horizontal";var u=["x","y"],c=t.layout==="horizontal"?0:1,h=this._baseAxisDim=u[c],f=u[1-c],d=[i,a],p=d[c].get("type"),v=d[1-c].get("type"),g=t.data;if(g&&l){var m=[];R(g,function(x,S){var b;ht(x)?(b=x.slice(),x.unshift(S)):ht(x.value)?(b=ut({},x),b.value=b.value.slice(),x.value.unshift(S)):b=x,m.push(b)}),t.data=m}var _=this.defaultValueDimensions,y=[{name:h,type:iA(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:iA(v),dimsDef:_.slice()}];return g0(this,{coordDimensions:y,dimensionsCount:_.length+1,encodeDefaulter:_e(AZ,y,this)})},e.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},e}(),Jtt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(bn);ti(Jtt,Ztt,!0);var RTt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this.group,s=this._data;this._data||o.removeAll();var l=n.get("layout")==="horizontal"?1:0;a.diff(s).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),h=HW(c,a,u,l,!0);a.setItemGraphicEl(u,h),o.add(h)}}).update(function(u,c){var h=s.getItemGraphicEl(c);if(!a.hasValue(u)){o.remove(h);return}var f=a.getItemLayout(u);h?(Ol(h),Qtt(f,h,a,u)):h=HW(f,a,u,l),o.add(h),a.setItemGraphicEl(u,h)}).remove(function(u){var c=s.getItemGraphicEl(u);c&&o.remove(c)}).execute(),this._data=a},t.prototype.remove=function(n){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},t.type="boxplot",t}(hn),OTt=function(){function e(){}return e}(),NTt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="boxplotBoxPath",r}return t.prototype.getDefaultShape=function(){return new OTt},t.prototype.buildPath=function(n,r){var i=r.points,a=0;for(n.moveTo(i[a][0],i[a][1]),a++;a<4;a++)n.lineTo(i[a][0],i[a][1]);for(n.closePath();a<i.length;a++)n.moveTo(i[a][0],i[a][1]),a++,n.lineTo(i[a][0],i[a][1])},t}(Ve);function HW(e,t,n,r,i){var a=e.ends,o=new NTt({shape:{points:i?BTt(a,r,e):a}});return Qtt(e,o,t,n,i),o}function Qtt(e,t,n,r,i){var a=n.hostModel,o=Uv[i?"initProps":"updateProps"];o(t,{shape:{points:e.ends}},a,r),t.useStyle(n.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=n.getItemModel(r),l=s.getModel("emphasis");ca(t,s),Vr(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function BTt(e,t,n){return yt(e,function(r){return r=r.slice(),r[t]=n.initBaseline,r})}var Ux=R;function kTt(e){var t=FTt(e);Ux(t,function(n){var r=n.seriesModels;r.length&&(zTt(n),Ux(r,function(i,a){UTt(i,n.boxOffsetList[a],n.boxWidthList[a])}))})}function FTt(e){var t=[],n=[];return e.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=Le(n,i);a<0&&(a=n.length,n[a]=i,t[a]={axis:i,seriesModels:[]}),t[a].seriesModels.push(r)}),t}function zTt(e){var t=e.axis,n=e.seriesModels,r=n.length,i=e.boxWidthList=[],a=e.boxOffsetList=[],o=[],s;if(t.type==="category")s=t.getBandWidth();else{var l=0;Ux(n,function(p){l=Math.max(l,p.getData().count())});var u=t.getExtent();s=Math.abs(u[1]-u[0])/l}Ux(n,function(p){var v=p.get("boxWidth");ht(v)||(v=[v,v]),o.push([Dt(v[0],s)||0,Dt(v[1],s)||0])});var c=s*.8-2,h=c/r*.3,f=(c-h*(r-1))/r,d=f/2-c/2;Ux(n,function(p,v){a.push(d),d+=h+f,i.push(Math.min(Math.max(f,o[v][0]),o[v][1]))})}function UTt(e,t,n){var r=e.coordinateSystem,i=e.getData(),a=n/2,o=e.get("layout")==="horizontal"?0:1,s=1-o,l=["x","y"],u=i.mapDimension(l[o]),c=i.mapDimensionsAll(l[s]);if(u==null||c.length<5)return;for(var h=0;h<i.count();h++){var f=i.get(u,h),d=y(f,c[2],h),p=y(f,c[0],h),v=y(f,c[1],h),g=y(f,c[3],h),m=y(f,c[4],h),_=[];x(_,v,!1),x(_,g,!0),_.push(p,v,m,g),S(_,p),S(_,m),S(_,d),i.setItemLayout(h,{initBaseline:d[s],ends:_})}function y(b,w,A){var T=i.get(w,A),M=[];M[o]=b,M[s]=T;var C;return isNaN(b)||isNaN(T)?C=[NaN,NaN]:(C=r.dataToPoint(M),C[o]+=t),C}function x(b,w,A){var T=w.slice(),M=w.slice();T[o]+=a,M[o]-=a,A?b.push(T,M):b.push(M,T)}function S(b,w){var A=w.slice(),T=w.slice();A[o]-=a,T[o]+=a,b.push(A,T)}}function VTt(e,t){t=t||{};for(var n=[],r=[],i=t.boundIQR,a=i==="none"||i===0,o=0;o<e.length;o++){var s=Ns(e[o].slice()),l=pD(s,.25),u=pD(s,.5),c=pD(s,.75),h=s[0],f=s[s.length-1],d=(i??1.5)*(c-l),p=a?h:Math.max(h,l-d),v=a?f:Math.min(f,c+d),g=t.itemNameFormatter,m=ae(g)?g({value:o}):Ft(g)?g.replace("{value}",o+""):o+"";n.push([m,p,l,u,c,v]);for(var _=0;_<s.length;_++){var y=s[_];if(y<p||y>v){var x=[m,y];r.push(x)}}}return{boxData:n,outliers:r}}var GTt={type:"echarts:boxplot",transform:function(t){var n=t.upstream;if(n.sourceFormat!==Ca){var r="";En(r)}var i=VTt(n.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function HTt(e){e.registerSeriesModel(Jtt),e.registerChartView(RTt),e.registerLayout(kTt),e.registerTransform(GTt)}var WTt=["color","borderColor"],$Tt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},t.prototype.incrementalPrepareRender=function(n,r,i){this._clear(),this._updateDrawMode(n)},t.prototype.incrementalRender=function(n,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,r):this._incrementalRenderNormal(n,r)},t.prototype.eachRendered=function(n){sd(this._progressiveEls||this.group,n)},t.prototype._updateDrawMode=function(n){var r=n.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(n){var r=n.getData(),i=this._data,a=this.group,o=r.getLayout("isSimpleBox"),s=n.get("clip",!0),l=n.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(c){if(r.hasValue(c)){var h=r.getItemLayout(c);if(s&&WW(u,h))return;var f=UI(h,c,!0);xr(f,{shape:{points:h.ends}},n,c),VI(f,r,c,o),a.add(f),r.setItemGraphicEl(c,f)}}).update(function(c,h){var f=i.getItemGraphicEl(h);if(!r.hasValue(c)){a.remove(f);return}var d=r.getItemLayout(c);if(s&&WW(u,d)){a.remove(f);return}f?(Tn(f,{shape:{points:d.ends}},n,c),Ol(f)):f=UI(d),VI(f,r,c,o),a.add(f),r.setItemGraphicEl(c,f)}).remove(function(c){var h=i.getItemGraphicEl(c);h&&a.remove(h)}).execute(),this._data=r},t.prototype._renderLarge=function(n){this._clear(),$W(n,this.group);var r=n.get("clip",!0)?D1(n.coordinateSystem,!1,n):null;r?this.group.setClipPath(r):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(n,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),o;(o=n.next())!=null;){var s=i.getItemLayout(o),l=UI(s);VI(l,i,o,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(n,r){$W(r,this.group,this._progressiveEls,!0)},t.prototype.remove=function(n){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}(hn),XTt=function(){function e(){}return e}(),jTt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="normalCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new XTt},t.prototype.buildPath=function(n,r){var i=r.points;this.__simpleBox?(n.moveTo(i[4][0],i[4][1]),n.lineTo(i[6][0],i[6][1])):(n.moveTo(i[0][0],i[0][1]),n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]),n.lineTo(i[3][0],i[3][1]),n.closePath(),n.moveTo(i[4][0],i[4][1]),n.lineTo(i[5][0],i[5][1]),n.moveTo(i[6][0],i[6][1]),n.lineTo(i[7][0],i[7][1]))},t}(Ve);function UI(e,t,n){var r=e.ends;return new jTt({shape:{points:n?YTt(r,e):r},z2:100})}function WW(e,t){for(var n=!0,r=0;r<t.ends.length;r++)if(e.contain(t.ends[r][0],t.ends[r][1])){n=!1;break}return n}function VI(e,t,n,r){var i=t.getItemModel(n);e.useStyle(t.getItemVisual(n,"style")),e.style.strokeNoScale=!0,e.__simpleBox=r,ca(e,i)}function YTt(e,t){return yt(e,function(n){return n=n.slice(),n[1]=t.initBaseline,n})}var qTt=function(){function e(){}return e}(),GI=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r.type="largeCandlestickBox",r}return t.prototype.getDefaultShape=function(){return new qTt},t.prototype.buildPath=function(n,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var o=i[a++];n.moveTo(o,i[a++]),n.lineTo(o,i[a++])}else a+=3},t}(Ve);function $W(e,t,n,r){var i=e.getData(),a=i.getLayout("largePoints"),o=new GI({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});t.add(o);var s=new GI({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new GI({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});t.add(l),HI(1,o,e),HI(-1,s,e),HI(0,l,e),r&&(o.incremental=!0,s.incremental=!0),n&&n.push(o,s)}function HI(e,t,n,r){var i=n.get(["itemStyle",e>0?"borderColor":"borderColor0"])||n.get(["itemStyle",e>0?"color":"color0"]);e===0&&(i=n.get(["itemStyle","borderColorDoji"]));var a=n.getModel("itemStyle").getItemStyle(WTt);t.useStyle(a),t.style.fill=null,t.style.stroke=i}var tet=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(n,r,i){var a=r.getItemLayout(n);return a&&i.rect(a.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(bn);ti(tet,Ztt,!0);function KTt(e){!e||!ht(e.series)||R(e.series,function(t){se(t)&&t.type==="k"&&(t.type="candlestick")})}var ZTt=["itemStyle","borderColor"],JTt=["itemStyle","borderColor0"],QTt=["itemStyle","borderColorDoji"],tMt=["itemStyle","color"],eMt=["itemStyle","color0"],nMt={seriesType:"candlestick",plan:h0(),performRawSeries:!0,reset:function(e,t){function n(a,o){return o.get(a>0?tMt:eMt)}function r(a,o){return o.get(a===0?QTt:a>0?ZTt:JTt)}if(!t.isSeriesFiltered(e)){var i=e.pipelineContext.large;return!i&&{progress:function(a,o){for(var s;(s=a.next())!=null;){var l=o.getItemModel(s),u=o.getItemLayout(s).sign,c=l.getItemStyle();c.fill=n(u,l),c.stroke=r(u,l)||c.fill;var h=o.ensureUniqueItemVisual(s,"style");ut(h,c)}}}}}},rMt={seriesType:"candlestick",plan:h0(),reset:function(e){var t=e.coordinateSystem,n=e.getData(),r=iMt(e,n),i=0,a=1,o=["x","y"],s=n.getDimensionIndex(n.mapDimension(o[i])),l=yt(n.mapDimensionsAll(o[a]),n.getDimensionIndex,n),u=l[0],c=l[1],h=l[2],f=l[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),s<0||l.length<4)return;return{progress:e.pipelineContext.large?p:d};function d(v,g){for(var m,_=g.getStore();(m=v.next())!=null;){var y=_.get(s,m),x=_.get(u,m),S=_.get(c,m),b=_.get(h,m),w=_.get(f,m),A=Math.min(x,S),T=Math.max(x,S),M=B(A,y),C=B(T,y),E=B(b,y),D=B(w,y),I=[];N(I,C,0),N(I,M,1),I.push(U(D),U(C),U(E),U(M));var L=g.getItemModel(m),P=!!L.get(["itemStyle","borderColorDoji"]);g.setItemLayout(m,{sign:XW(_,m,x,S,c,P),initBaseline:x>S?C[a]:M[a],ends:I,brushRect:k(b,w,y)})}function B(Z,nt){var ct=[];return ct[i]=nt,ct[a]=Z,isNaN(nt)||isNaN(Z)?[NaN,NaN]:t.dataToPoint(ct)}function N(Z,nt,ct){var K=nt.slice(),$=nt.slice();K[i]=ZT(K[i]+r/2,1,!1),$[i]=ZT($[i]-r/2,1,!0),ct?Z.push(K,$):Z.push($,K)}function k(Z,nt,ct){var K=B(Z,ct),$=B(nt,ct);return K[i]-=r/2,$[i]-=r/2,{x:K[0],y:K[1],width:r,height:$[1]-K[1]}}function U(Z){return Z[i]=ZT(Z[i],1),Z}}function p(v,g){for(var m=Tu(v.count*4),_=0,y,x=[],S=[],b,w=g.getStore(),A=!!e.get(["itemStyle","borderColorDoji"]);(b=v.next())!=null;){var T=w.get(s,b),M=w.get(u,b),C=w.get(c,b),E=w.get(h,b),D=w.get(f,b);if(isNaN(T)||isNaN(E)||isNaN(D)){m[_++]=NaN,_+=3;continue}m[_++]=XW(w,b,M,C,c,A),x[i]=T,x[a]=E,y=t.dataToPoint(x,null,S),m[_++]=y?y[0]:NaN,m[_++]=y?y[1]:NaN,x[a]=D,y=t.dataToPoint(x,null,S),m[_++]=y?y[1]:NaN}g.setLayout("largePoints",m)}}};function XW(e,t,n,r,i,a){var o;return n>r?o=-1:n<r?o=1:o=a?0:t>0?e.get(i,t-1)<=r?1:-1:1,o}function iMt(e,t){var n=e.getBaseAxis(),r,i=n.type==="category"?n.getBandWidth():(r=n.getExtent(),Math.abs(r[1]-r[0])/t.count()),a=Dt(xe(e.get("barMaxWidth"),i),i),o=Dt(xe(e.get("barMinWidth"),1),i),s=e.get("barWidth");return s!=null?Dt(s,i):Math.max(Math.min(i/2,a),o)}function aMt(e){e.registerChartView($Tt),e.registerSeriesModel(tet),e.registerPreprocessor(KTt),e.registerVisual(nMt),e.registerLayout(rMt)}function jW(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:t.brushType==="stroke"?n:null,fill:t.brushType==="fill"?n:null}})})}var oMt=function(e){it(t,e);function t(n,r){var i=e.call(this)||this,a=new C1(n,r),o=new he;return i.add(a),i.add(o),i.updateData(n,r),i}return t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(n){for(var r=n.symbolType,i=n.color,a=n.rippleNumber,o=this.childAt(1),s=0;s<a;s++){var l=Jr(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-s/a*n.period+n.effectOffset;l.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(n.period,{opacity:0}).delay(u).start(),o.add(l)}jW(o,n)},t.prototype.updateEffectAnimation=function(n){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],o=0;o<a.length;o++){var s=a[o];if(r[s]!==n[s]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}jW(i,n)},t.prototype.highlight=function(){qc(this)},t.prototype.downplay=function(){Kc(this)},t.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},t.prototype.updateData=function(n,r){var i=this,a=n.hostModel;this.childAt(0).updateData(n,r);var o=this.childAt(1),s=n.getItemModel(r),l=n.getItemVisual(r,"symbol"),u=d0(n.getItemVisual(r,"symbolSize")),c=n.getItemVisual(r,"style"),h=c&&c.fill,f=s.getModel("emphasis");o.setScale(u),o.traverse(function(g){g.setStyle("fill",h)});var d=Vv(n.getItemVisual(r,"symbolOffset"),u);d&&(o.x=d[0],o.y=d[1]);var p=n.getItemVisual(r,"symbolRotate");o.rotation=(p||0)*Math.PI/180||0;var v={};v.showEffectOn=a.get("showEffectOn"),v.rippleScale=s.get(["rippleEffect","scale"]),v.brushType=s.get(["rippleEffect","brushType"]),v.period=s.get(["rippleEffect","period"])*1e3,v.effectOffset=r/n.count(),v.z=a.getShallow("z")||0,v.zlevel=a.getShallow("zlevel")||0,v.symbolType=l,v.color=h,v.rippleEffectColor=s.get(["rippleEffect","color"]),v.rippleNumber=s.get(["rippleEffect","number"]),v.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(v):this.startEffectAnimation(v),this._effectCfg=v):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?v.showEffectOn!=="render"&&i.startEffectAnimation(v):g==="normal"&&v.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=v,Vr(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},t.prototype.fadeOut=function(n){n&&n()},t}(he),sMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this._symbolDraw=new E1(oMt)},t.prototype.render=function(n,r,i){var a=n.getData(),o=this._symbolDraw;o.updateData(a,{clipShape:this._getClipShape(n)}),this.group.add(o.group)},t.prototype._getClipShape=function(n){var r=n.coordinateSystem,i=r&&r.getArea&&r.getArea();return n.get("clip",!0)?i:null},t.prototype.updateTransform=function(n,r,i){var a=n.getData();this.group.dirty();var o=I1("").reset(n,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(n){var r=n.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Gft(r.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(n,r){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}(hn),lMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n}return t.prototype.getInitialData=function(n,r){return Qu(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(n,r,i){return i.point(r.getItemLayout(n))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(bn);function uMt(e){e.registerChartView(sMt),e.registerSeriesModel(lMt),e.registerLayout(I1("effectScatter"))}var eet=function(e){it(t,e);function t(n,r,i){var a=e.call(this)||this;return a.add(a.createLine(n,r,i)),a._updateEffectSymbol(n,r),a}return t.prototype.createLine=function(n,r,i){return new nF(n,r,i)},t.prototype._updateEffectSymbol=function(n,r){var i=n.getItemModel(r),a=i.getModel("effect"),o=a.get("symbolSize"),s=a.get("symbol");ht(o)||(o=[o,o]);var l=n.getItemVisual(r,"style"),u=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==s&&(this.remove(c),c=Jr(s,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(a.getItemStyle(["color"])),c.scaleX=o[0],c.scaleY=o[1],c.setColor(u),this._symbolType=s,this._symbolScale=o,this._updateEffectAnimation(n,a,r))},t.prototype._updateEffectAnimation=function(n,r,i){var a=this.childAt(1);if(a){var o=n.getItemLayout(i),s=r.get("period")*1e3,l=r.get("loop"),u=r.get("roundTrip"),c=r.get("constantSpeed"),h=Qi(r.get("delay"),function(d){return d/n.count()*s/3});if(a.ignore=!0,this._updateAnimationPoints(a,o),c>0&&(s=this._getLineLength(a)/c*1e3),s!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var f=void 0;ae(h)?f=h(i):f=h,a.__t>0&&(f=-s*a.__t),this._animateSymbol(a,s,f,l,u)}this._period=s,this._loop=l,this._roundTrip=u}},t.prototype._animateSymbol=function(n,r,i,a,o){if(r>0){n.__t=0;var s=this,l=n.animate("",a).when(o?r*2:r,{__t:o?2:1}).delay(i).during(function(){s._updateSymbolPosition(n)});a||l.done(function(){s.remove(n)}),l.start()}},t.prototype._getLineLength=function(n){return gf(n.__p1,n.__cp1)+gf(n.__cp1,n.__p2)},t.prototype._updateAnimationPoints=function(n,r){n.__p1=r[0],n.__p2=r[1],n.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},t.prototype.updateData=function(n,r,i){this.childAt(0).updateData(n,r,i),this._updateEffectSymbol(n,r)},t.prototype._updateSymbolPosition=function(n){var r=n.__p1,i=n.__p2,a=n.__cp1,o=n.__t<1?n.__t:2-n.__t,s=[n.x,n.y],l=s.slice(),u=Ki,c=rO;s[0]=u(r[0],a[0],i[0],o),s[1]=u(r[1],a[1],i[1],o);var h=n.__t<1?c(r[0],a[0],i[0],o):c(i[0],a[0],r[0],1-o),f=n.__t<1?c(r[1],a[1],i[1],o):c(i[1],a[1],r[1],1-o);n.rotation=-Math.atan2(f,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=gf(l,s)*1.05,o===1&&(s[0]=l[0]+(s[0]-l[0])/2,s[1]=l[1]+(s[1]-l[1])/2)):n.__lastT===1?n.scaleY=2*gf(r,s):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=s[0],n.y=s[1]},t.prototype.updateLayout=function(n,r){this.childAt(0).updateLayout(n,r);var i=n.getItemModel(r).getModel("effect");this._updateEffectAnimation(n,i,r)},t}(he),net=function(e){it(t,e);function t(n,r,i){var a=e.call(this)||this;return a._createPolyline(n,r,i),a}return t.prototype._createPolyline=function(n,r,i){var a=n.getItemLayout(r),o=new Ja({shape:{points:a}});this.add(o),this._updateCommonStl(n,r,i)},t.prototype.updateData=function(n,r,i){var a=n.hostModel,o=this.childAt(0),s={shape:{points:n.getItemLayout(r)}};Tn(o,s,a,r),this._updateCommonStl(n,r,i)},t.prototype._updateCommonStl=function(n,r,i){var a=this.childAt(0),o=n.getItemModel(r),s=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,c=i&&i.emphasisDisabled;if(!i||n.hasItemOption){var h=o.getModel("emphasis");s=h.getModel("lineStyle").getLineStyle(),c=h.get("disabled"),l=h.get("focus"),u=h.get("blurScope")}a.useStyle(n.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var f=a.ensureState("emphasis");f.style=s,Vr(this,l,u,c)},t.prototype.updateLayout=function(n,r){var i=this.childAt(0);i.setShape("points",n.getItemLayout(r))},t}(he),cMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return t.prototype.createLine=function(n,r,i){return new net(n,r,i)},t.prototype._updateAnimationPoints=function(n,r){this._points=r;for(var i=[0],a=0,o=1;o<r.length;o++){var s=r[o-1],l=r[o];a+=gf(s,l),i.push(a)}if(a===0){this._length=0;return}for(var o=0;o<i.length;o++)i[o]/=a;this._offsets=i,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(n){var r=n.__t<1?n.__t:2-n.__t,i=this._points,a=this._offsets,o=i.length;if(a){var s=this._lastFrame,l;if(r<this._lastFramePercent){var u=Math.min(s+1,o-1);for(l=u;l>=0&&!(a[l]<=r);l--);l=Math.min(l,o-2)}else{for(l=s;l<o&&!(a[l]>r);l++);l=Math.min(l-1,o-2)}var c=(r-a[l])/(a[l+1]-a[l]),h=i[l],f=i[l+1];n.x=h[0]*(1-c)+c*f[0],n.y=h[1]*(1-c)+c*f[1];var d=n.__t<1?f[0]-h[0]:h[0]-f[0],p=n.__t<1?f[1]-h[1]:h[1]-f[1];n.rotation=-Math.atan2(p,d)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,n.ignore=!1}},t}(eet),hMt=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),fMt=function(e){it(t,e);function t(n){var r=e.call(this,n)||this;return r._off=0,r.hoverDataIdx=-1,r}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new hMt},t.prototype.buildPath=function(n,r){var i=r.segs,a=r.curveness,o;if(r.polyline)for(o=this._off;o<i.length;){var s=i[o++];if(s>0){n.moveTo(i[o++],i[o++]);for(var l=1;l<s;l++)n.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var u=i[o++],c=i[o++],h=i[o++],f=i[o++];if(n.moveTo(u,c),a>0){var d=(u+h)/2-(c-f)*a,p=(c+f)/2-(h-u)*a;n.quadraticCurveTo(d,p,h,f)}else n.lineTo(h,f)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(n,r){var i=this.shape,a=i.segs,o=i.curveness,s=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<a.length;){var c=a[u++];if(c>0)for(var h=a[u++],f=a[u++],d=1;d<c;d++){var p=a[u++],v=a[u++];if(Mc(h,f,p,v,s,n,r))return l}l++}else for(var l=0,u=0;u<a.length;){var h=a[u++],f=a[u++],p=a[u++],v=a[u++];if(o>0){var g=(h+p)/2-(f-v)*o,m=(f+v)/2-(p-h)*o;if(CK(h,f,g,m,p,v,s,n,r))return l}else if(Mc(h,f,p,v,s,n,r))return l;l++}return-1},t.prototype.contain=function(n,r){var i=this.transformCoordToLocal(n,r),a=this.getBoundingRect();if(n=i[0],r=i[1],a.contain(n,r)){var o=this.hoverDataIdx=this.findDataIndex(n,r);return o>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var r=this.shape,i=r.segs,a=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<i.length;){var c=i[u++],h=i[u++];a=Math.min(c,a),s=Math.max(c,s),o=Math.min(h,o),l=Math.max(h,l)}n=this._rect=new Ae(a,o,s,l)}return n},t}(Ve),dMt=function(){function e(){this.group=new he}return e.prototype.updateData=function(t){this._clear();var n=this._create();n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,n){var r=this._newAdded[0],i=n.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var o=a.length,s=new Float32Array(o+i.length);s.set(a),s.set(i,o),r.setShape({segs:s})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,n),l.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new fMt({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,n,r){var i=n.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=n.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var o=fe(t);o.seriesIndex=i.seriesIndex,t.on("mousemove",function(s){o.dataIndex=null;var l=t.hoverDataIdx;l>0&&(o.dataIndex=l+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}(),ret={seriesType:"lines",plan:h0(),reset:function(e){var t=e.coordinateSystem;if(t){var n=e.get("polyline"),r=e.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s=void 0,l=i.end-i.start;if(n){for(var u=0,c=i.start;c<i.end;c++)u+=e.getLineCoordsCount(c);s=new Float32Array(l+u*2)}else s=new Float32Array(l*4);for(var h=0,f=[],c=i.start;c<i.end;c++){var d=e.getLineCoords(c,o);n&&(s[h++]=d);for(var p=0;p<d;p++)f=t.dataToPoint(o[p],!1,f),s[h++]=f[0],s[h++]=f[1]}a.setLayout("linesPoints",s)}else for(var c=i.start;c<i.end;c++){var v=a.getItemModel(c),d=e.getLineCoords(c,o),g=[];if(n)for(var m=0;m<d;m++)g.push(t.dataToPoint(o[m]));else{g[0]=t.dataToPoint(o[0]),g[1]=t.dataToPoint(o[1]);var _=v.get(["lineStyle","curveness"]);+_&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*_,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*_])}a.setItemLayout(c,g)}}}}}},pMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this._updateLineDraw(a,n),s=n.get("zlevel"),l=n.get(["effect","trailLength"]),u=i.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(s).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&l>0&&(c||u.configLayer(s,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),o.updateData(a);var h=n.get("clip",!0)&&D1(n.coordinateSystem,!1,n);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=s,this._finished=!0},t.prototype.incrementalPrepareRender=function(n,r,i){var a=n.getData(),o=this._updateLineDraw(a,n);o.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(n,r,i){this._lineDraw.incrementalUpdate(n,r.getData()),this._finished=n.end===r.getData().count()},t.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},t.prototype.updateTransform=function(n,r,i){var a=n.getData(),o=n.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var s=ret.reset(n,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(n,r){var i=this._lineDraw,a=this._showEffect(r),o=!!r.get("polyline"),s=r.pipelineContext,l=s.large;return(!i||a!==this._hasEffet||o!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new dMt:new rF(o?a?cMt:net:a?eet:nF),this._hasEffet=a,this._isPolyline=o,this._isLargeDraw=l),this.group.add(i.group),i},t.prototype._showEffect=function(n){return!!n.get(["effect","show"])},t.prototype._clearLayer=function(n){var r=n.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(n,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},t.prototype.dispose=function(n,r){this.remove(n,r)},t.type="lines",t}(hn),vMt=typeof Uint32Array>"u"?Array:Uint32Array,gMt=typeof Float64Array>"u"?Array:Float64Array;function YW(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=yt(t,function(n){var r=[n[0].coord,n[1].coord],i={coords:r};return n[0].name&&(i.fromName=n[0].name),n[1].name&&(i.toName=n[1].name),MB([i,n[0],n[1]])}))}var mMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return t.prototype.init=function(n){n.data=n.data||[],YW(n);var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(n){if(YW(n),n.data){var r=this._processFlatCoordsArray(n.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(n.data=new Float32Array(r.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(n){var r=this._processFlatCoordsArray(n.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=ay(this._flatCoords,r.flatCoords),this._flatCoordsOffset=ay(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),n.data=new Float32Array(r.count)),this.getRawData().appendData(n.data)},t.prototype._getCoordsFromItemModel=function(n){var r=this.getData().getItemModel(n),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},t.prototype.getLineCoords=function(n,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[n*2],a=this._flatCoordsOffset[n*2+1],o=0;o<a;o++)r[o]=r[o]||[],r[o][0]=this._flatCoords[i+o*2],r[o][1]=this._flatCoords[i+o*2+1];return a}else{for(var s=this._getCoordsFromItemModel(n),o=0;o<s.length;o++)r[o]=r[o]||[],r[o][0]=s[o][0],r[o][1]=s[o][1];return s.length}},t.prototype._processFlatCoordsArray=function(n){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),xn(n[0])){for(var i=n.length,a=new vMt(i),o=new gMt(i),s=0,l=0,u=0,c=0;c<i;){u++;var h=n[c++];a[l++]=s+r,a[l++]=h;for(var f=0;f<h;f++){var d=n[c++],p=n[c++];o[s++]=d,o[s++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:o,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},t.prototype.getInitialData=function(n,r){var i=new Ir(["value"],this);return i.hasItemOption=!1,i.initData(n.data,[],function(a,o,s,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),i},t.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=a.getItemModel(n),s=o.get("name");if(s)return s;var l=o.get("fromName"),u=o.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),zi("nameValue",{name:c.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var n=this.getModel("effect"),r=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&r>0?r+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(bn);function pw(e){return e instanceof Array||(e=[e,e]),e}var yMt={seriesType:"lines",reset:function(e){var t=pw(e.get("symbol")),n=pw(e.get("symbolSize")),r=e.getData();r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",n&&n[0]),r.setVisual("toSymbolSize",n&&n[1]);function i(a,o){var s=a.getItemModel(o),l=pw(s.getShallow("symbol",!0)),u=pw(s.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(o,"fromSymbol",l[0]),l[1]&&a.setItemVisual(o,"toSymbol",l[1]),u[0]&&a.setItemVisual(o,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(o,"toSymbolSize",u[1])}return{dataEach:r.hasItemOption?i:null}}};function _Mt(e){e.registerChartView(pMt),e.registerSeriesModel(mMt),e.registerLayout(ret),e.registerVisual(yMt)}var xMt=256,bMt=function(){function e(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Ff.createCanvas();this.canvas=t}return e.prototype.update=function(t,n,r,i,a,o){var s=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,h=this.canvas,f=h.getContext("2d"),d=t.length;h.width=n,h.height=r;for(var p=0;p<d;++p){var v=t[p],g=v[0],m=v[1],_=v[2],y=i(_);f.globalAlpha=y,f.drawImage(s,g-c,m-c)}if(!h.width||!h.height)return h;for(var x=f.getImageData(0,0,h.width,h.height),S=x.data,b=0,w=S.length,A=this.minOpacity,T=this.maxOpacity,M=T-A;b<w;){var y=S[b+3]/256,C=Math.floor(y*(xMt-1))*4;if(y>0){var E=o(y)?l:u;y>0&&(y=y*M+A),S[b++]=E[C],S[b++]=E[C+1],S[b++]=E[C+2],S[b++]=E[C+3]*y*256}else b+=4}return f.putImageData(x,0,0),h},e.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Ff.createCanvas()),n=this.pointSize+this.blurSize,r=n*2;t.width=r,t.height=r;var i=t.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-n,n,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),t},e.prototype._getGradient=function(t,n){for(var r=this._gradientPixels,i=r[n]||(r[n]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],o=0,s=0;s<256;s++)t[n](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i},e}();function SMt(e,t,n){var r=e[1]-e[0];t=yt(t,function(o){return{interval:[(o.interval[0]-e[0])/r,(o.interval[1]-e[0])/r]}});var i=t.length,a=0;return function(o){var s;for(s=a;s<i;s++){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}if(s===i)for(s=a-1;s>=0;s--){var l=t[s].interval;if(l[0]<=o&&o<=l[1]){a=s;break}}return s>=0&&s<i&&n[s]}}function wMt(e,t){var n=e[1]-e[0];return t=[(t[0]-e[0])/n,(t[1]-e[0])/n],function(r){return r>=t[0]&&r<=t[1]}}function qW(e){var t=e.dimensions;return t[0]==="lng"&&t[1]==="lat"}var TMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a;r.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===n&&(a=s)})}),this._progressiveEls=null,this.group.removeAll();var o=n.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(n,i,0,n.getData().count()):qW(o)&&this._renderOnGeo(o,n,a,i)},t.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll()},t.prototype.incrementalRender=function(n,r,i,a){var o=r.coordinateSystem;o&&(qW(o)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,a,n.start,n.end,!0)))},t.prototype.eachRendered=function(n){sd(this._progressiveEls||this.group,n)},t.prototype._renderOnCartesianAndCalendar=function(n,r,i,a,o){var s=n.coordinateSystem,l=Hv(s,"cartesian2d"),u,c,h,f;if(l){var d=s.getAxis("x"),p=s.getAxis("y");u=d.getBandWidth()+.5,c=p.getBandWidth()+.5,h=d.scale.getExtent(),f=p.scale.getExtent()}for(var v=this.group,g=n.getData(),m=n.getModel(["emphasis","itemStyle"]).getItemStyle(),_=n.getModel(["blur","itemStyle"]).getItemStyle(),y=n.getModel(["select","itemStyle"]).getItemStyle(),x=n.get(["itemStyle","borderRadius"]),S=Fi(n),b=n.getModel("emphasis"),w=b.get("focus"),A=b.get("blurScope"),T=b.get("disabled"),M=l?[g.mapDimension("x"),g.mapDimension("y"),g.mapDimension("value")]:[g.mapDimension("time"),g.mapDimension("value")],C=i;C<a;C++){var E=void 0,D=g.getItemVisual(C,"style");if(l){var I=g.get(M[0],C),L=g.get(M[1],C);if(isNaN(g.get(M[2],C))||isNaN(I)||isNaN(L)||I<h[0]||I>h[1]||L<f[0]||L>f[1])continue;var P=s.dataToPoint([I,L]);E=new nn({shape:{x:P[0]-u/2,y:P[1]-c/2,width:u,height:c},style:D})}else{if(isNaN(g.get(M[1],C)))continue;E=new nn({z2:1,shape:s.dataToRect([g.get(M[0],C)]).contentShape,style:D})}if(g.hasItemOption){var B=g.getItemModel(C),N=B.getModel("emphasis");m=N.getModel("itemStyle").getItemStyle(),_=B.getModel(["blur","itemStyle"]).getItemStyle(),y=B.getModel(["select","itemStyle"]).getItemStyle(),x=B.get(["itemStyle","borderRadius"]),w=N.get("focus"),A=N.get("blurScope"),T=N.get("disabled"),S=Fi(B)}E.shape.r=x;var k=n.getRawValue(C),U="-";k&&k[2]!=null&&(U=k[2]+""),ha(E,S,{labelFetcher:n,labelDataIndex:C,defaultOpacity:D.opacity,defaultText:U}),E.ensureState("emphasis").style=m,E.ensureState("blur").style=_,E.ensureState("select").style=y,Vr(E,w,A,T),E.incremental=o,o&&(E.states.emphasis.hoverLayer=!0),v.add(E),g.setItemGraphicEl(C,E),this._progressiveEls&&this._progressiveEls.push(E)}},t.prototype._renderOnGeo=function(n,r,i,a){var o=i.targetVisuals.inRange,s=i.targetVisuals.outOfRange,l=r.getData(),u=this._hmLayer||this._hmLayer||new bMt;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var c=n.getViewRect().clone(),h=n.getRoamTransform();c.applyTransform(h);var f=Math.max(c.x,0),d=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),v=Math.min(c.height+c.y,a.getHeight()),g=p-f,m=v-d,_=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],y=l.mapArray(_,function(w,A,T){var M=n.dataToPoint([w,A]);return M[0]-=f,M[1]-=d,M.push(T),M}),x=i.getExtent(),S=i.type==="visualMap.continuous"?wMt(x,i.option.range):SMt(x,i.getPieceList(),i.option.selected);u.update(y,g,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},S);var b=new Wi({style:{width:g,height:m,x:f,y:d,image:u.canvas},silent:!0});this.group.add(b)},t.type="heatmap",t}(hn),MMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getInitialData=function(n,r){return Qu(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var n=c0.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(bn);function AMt(e){e.registerChartView(TMt),e.registerSeriesModel(MMt)}var CMt=["itemStyle","borderWidth"],KW=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],WI=new yh,EMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=this.group,o=n.getData(),s=this._data,l=n.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),h=l.master.getRect(),f={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:n,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:c,valueDim:KW[+c],categoryDim:KW[1-+c]};o.diff(s).add(function(p){if(o.hasValue(p)){var v=JW(o,p),g=ZW(o,p,v,f),m=QW(o,f,g);o.setItemGraphicEl(p,m),a.add(m),e6(m,f,g)}}).update(function(p,v){var g=s.getItemGraphicEl(v);if(!o.hasValue(p)){a.remove(g);return}var m=JW(o,p),_=ZW(o,p,m,f),y=cet(o,_);g&&y!==g.__pictorialShapeStr&&(a.remove(g),o.setItemGraphicEl(p,null),g=null),g?NMt(g,f,_):g=QW(o,f,_,!0),o.setItemGraphicEl(p,g),g.__pictorialSymbolMeta=_,a.add(g),e6(g,f,_)}).remove(function(p){var v=s.getItemGraphicEl(p);v&&t6(s,p,v.__pictorialSymbolMeta.animationModel,v)}).execute();var d=n.get("clip",!0)?D1(n.coordinateSystem,!1,n):null;return d?a.setClipPath(d):a.removeClipPath(),this._data=o,this.group},t.prototype.remove=function(n,r){var i=this.group,a=this._data;n.get("animation")?a&&a.eachItemGraphicEl(function(o){t6(a,fe(o).dataIndex,n,o)}):i.removeAll()},t.type="pictorialBar",t}(hn);function ZW(e,t,n,r){var i=e.getItemLayout(t),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=n.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,h=n.isAnimationEnabled(),f={dataIndex:t,layout:i,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",style:e.getItemVisual(t,"style"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:h?n:null,hoverScale:h&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};DMt(n,a,i,r,f),IMt(e,t,i,a,o,f.boundingLength,f.pxSign,c,r,f),LMt(n,f.symbolScale,u,r,f);var d=f.symbolSize,p=Vv(n.get("symbolOffset"),d);return PMt(n,d,i,a,o,p,s,f.valueLineWidth,f.boundingLength,f.repeatCutLength,r,f),f}function DMt(e,t,n,r,i){var a=r.valueDim,o=e.get("symbolBoundingData"),s=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=s.toGlobalCoord(s.dataToCoord(0)),u=1-+(n[a.wh]<=0),c;if(ht(o)){var h=[$I(s,o[0])-l,$I(s,o[1])-l];h[1]<h[0]&&h.reverse(),c=h[u]}else o!=null?c=$I(s,o)-l:t?c=r.coordSysExtent[a.index][u]-l:c=n[a.wh];i.boundingLength=c,t&&(i.repeatCutLength=n[a.wh]),i.pxSign=c>0?1:-1}function $I(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function IMt(e,t,n,r,i,a,o,s,l,u){var c=l.valueDim,h=l.categoryDim,f=Math.abs(n[h.wh]),d=e.getItemVisual(t,"symbolSize"),p;ht(d)?p=d.slice():d==null?p=["100%","100%"]:p=[d,d],p[h.index]=Dt(p[h.index],f),p[c.index]=Dt(p[c.index],r?f:Math.abs(a)),u.symbolSize=p;var v=u.symbolScale=[p[0]/s,p[1]/s];v[c.index]*=(l.isHorizontal?-1:1)*o}function LMt(e,t,n,r,i){var a=e.get(CMt)||0;a&&(WI.attr({scaleX:t[0],scaleY:t[1],rotation:n}),WI.updateTransform(),a/=WI.getLineScale(),a*=t[r.valueDim.index]),i.valueLineWidth=a||0}function PMt(e,t,n,r,i,a,o,s,l,u,c,h){var f=c.categoryDim,d=c.valueDim,p=h.pxSign,v=Math.max(t[d.index]+s,0),g=v;if(r){var m=Math.abs(l),_=Qi(e.get("symbolMargin"),"15%")+"",y=!1;_.lastIndexOf("!")===_.length-1&&(y=!0,_=_.slice(0,_.length-1));var x=Dt(_,t[d.index]),S=Math.max(v+x*2,0),b=y?0:x*2,w=dK(r),A=w?r:n6((m+b)/S),T=m-A*v;x=T/2/(y?A:Math.max(A-1,1)),S=v+x*2,b=y?0:x*2,!w&&r!=="fixed"&&(A=u?n6((Math.abs(u)+b)/S):0),g=A*S-b,h.repeatTimes=A,h.symbolMargin=x}var M=p*(g/2),C=h.pathPosition=[];C[f.index]=n[f.wh]/2,C[d.index]=o==="start"?M:o==="end"?l-M:l/2,a&&(C[0]+=a[0],C[1]+=a[1]);var E=h.bundlePosition=[];E[f.index]=n[f.xy],E[d.index]=n[d.xy];var D=h.barRectShape=ut({},n);D[d.wh]=p*Math.max(Math.abs(n[d.wh]),Math.abs(C[d.index]+M)),D[f.wh]=n[f.wh];var I=h.clipShape={};I[f.xy]=-n[f.xy],I[f.wh]=c.ecSize[f.wh],I[d.xy]=0,I[d.wh]=n[d.wh]}function iet(e){var t=e.symbolPatternSize,n=Jr(e.symbolType,-t/2,-t/2,t,t);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function aet(e,t,n,r){var i=e.__pictorialBundle,a=n.symbolSize,o=n.valueLineWidth,s=n.pathPosition,l=t.valueDim,u=n.repeatTimes||0,c=0,h=a[t.valueDim.index]+o+n.symbolMargin*2;for(hF(e,function(v){v.__pictorialAnimationIndex=c,v.__pictorialRepeatTimes=u,c<u?Bm(v,null,p(c),n,r):Bm(v,null,{scaleX:0,scaleY:0},n,r,function(){i.remove(v)}),c++});c<u;c++){var f=iet(n);f.__pictorialAnimationIndex=c,f.__pictorialRepeatTimes=u,i.add(f);var d=p(c);Bm(f,{x:d.x,y:d.y,scaleX:0,scaleY:0},{scaleX:d.scaleX,scaleY:d.scaleY,rotation:d.rotation},n,r)}function p(v){var g=s.slice(),m=n.pxSign,_=v;return(n.symbolRepeatDirection==="start"?m>0:m<0)&&(_=u-1-v),g[l.index]=h*(_-u/2+.5)+s[l.index],{x:g[0],y:g[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function oet(e,t,n,r){var i=e.__pictorialBundle,a=e.__pictorialMainPath;a?Bm(a,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,r):(a=e.__pictorialMainPath=iet(n),i.add(a),Bm(a,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,r))}function set(e,t,n){var r=ut({},t.barRectShape),i=e.__pictorialBarRect;i?Bm(i,null,{shape:r},t,n):(i=e.__pictorialBarRect=new nn({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,e.add(i))}function uet(e,t,n,r){if(n.symbolClip){var i=e.__pictorialClipPath,a=ut({},n.clipShape),o=t.valueDim,s=n.animationModel,l=n.dataIndex;if(i)Tn(i,{shape:a},s,l);else{a[o.wh]=0,i=new nn({shape:a}),e.__pictorialBundle.setClipPath(i),e.__pictorialClipPath=i;var u={};u[o.wh]=n.clipShape[o.wh],Uv[r?"updateProps":"initProps"](i,{shape:u},s,l)}}}function JW(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=RMt,n.isAnimationEnabled=OMt,n}function RMt(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function OMt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function QW(e,t,n,r){var i=new he,a=new he;return i.add(a),i.__pictorialBundle=a,a.x=n.bundlePosition[0],a.y=n.bundlePosition[1],n.symbolRepeat?aet(i,t,n):oet(i,t,n),set(i,n,r),uet(i,t,n,r),i.__pictorialShapeStr=cet(e,n),i.__pictorialSymbolMeta=n,i}function NMt(e,t,n){var r=n.animationModel,i=n.dataIndex,a=e.__pictorialBundle;Tn(a,{x:n.bundlePosition[0],y:n.bundlePosition[1]},r,i),n.symbolRepeat?aet(e,t,n,!0):oet(e,t,n,!0),set(e,n,!0),uet(e,t,n,!0)}function t6(e,t,n,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];hF(r,function(o){a.push(o)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),R(a,function(o){Uf(o,{scaleX:0,scaleY:0},n,t,function(){r.parent&&r.parent.remove(r)})}),e.setItemGraphicEl(t,null)}function cet(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function hF(e,t,n){R(e.__pictorialBundle.children(),function(r){r!==e.__pictorialBarRect&&t.call(n,r)})}function Bm(e,t,n,r,i,a){t&&e.attr(t),r.symbolClip&&!i?n&&e.attr(n):n&&Uv[i?"updateProps":"initProps"](e,n,r.animationModel,r.dataIndex,a)}function e6(e,t,n){var r=n.dataIndex,i=n.itemModel,a=i.getModel("emphasis"),o=a.getModel("itemStyle").getItemStyle(),s=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),c=a.get("focus"),h=a.get("blurScope"),f=a.get("scale");hF(e,function(v){if(v instanceof Wi){var g=v.style;v.useStyle(ut({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},n.style))}else v.useStyle(n.style);var m=v.ensureState("emphasis");m.style=o,f&&(m.scaleX=v.scaleX*1.1,m.scaleY=v.scaleY*1.1),v.ensureState("blur").style=s,v.ensureState("select").style=l,u&&(v.cursor=u),v.z2=n.z2});var d=t.valueDim.posDesc[+(n.boundingLength>0)],p=e.__pictorialBarRect;p.ignoreClip=!0,ha(p,Fi(i),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:hy(t.seriesModel.getData(),r),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:d}),Vr(e,c,h,a.get("disabled"))}function n6(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}var BMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return t.prototype.getInitialData=function(n){return n.stack=null,e.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=ld(bb.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(bb);function kMt(e){e.registerChartView(EMt),e.registerSeriesModel(BMt),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,_e($J,"pictorialBar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,XJ("pictorialBar"))}var FMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._layers=[],n}return t.prototype.render=function(n,r,i){var a=n.getData(),o=this,s=this.group,l=n.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,h=u.boundaryGap;s.x=0,s.y=c.y+h[0];function f(g){return g.name}var d=new Zc(this._layersSeries||[],l,f,f),p=[];d.add(Vt(v,this,"add")).update(Vt(v,this,"update")).remove(Vt(v,this,"remove")).execute();function v(g,m,_){var y=o._layers;if(g==="remove"){s.remove(y[m]);return}for(var x=[],S=[],b,w=l[m].indices,A=0;A<w.length;A++){var T=a.getItemLayout(w[A]),M=T.x,C=T.y0,E=T.y;x.push(M,C),S.push(M,C+E),b=a.getItemVisual(w[A],"style")}var D,I=a.getItemLayout(w[0]),L=n.getModel("label"),P=L.get("margin"),B=n.getModel("emphasis");if(g==="add"){var N=p[m]=new he;D=new NQ({shape:{points:x,stackedOnPoints:S,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),N.add(D),s.add(N),n.isAnimationEnabled()&&D.setClipPath(zMt(D.getBoundingRect(),n,function(){D.removeClipPath()}))}else{var N=y[_];D=N.childAt(0),s.add(N),p[m]=N,Tn(D,{shape:{points:x,stackedOnPoints:S}},n),Ol(D)}ha(D,Fi(n),{labelDataIndex:w[A-1],defaultText:a.getName(w[A-1]),inheritColor:b.fill},{normal:{verticalAlign:"middle"}}),D.setTextConfig({position:null,local:!0});var k=D.getTextContent();k&&(k.x=I.x-P,k.y=I.y0+I.y/2),D.useStyle(b),a.setItemGraphicEl(m,D),ca(D,n),Vr(D,B.get("focus"),B.get("blurScope"),B.get("disabled"))}this._layersSeries=l,this._layers=p},t.type="themeRiver",t}(hn);function zMt(e,t,n){var r=new nn({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return xr(r,{shape:{x:e.x-50,width:e.width+100,height:e.height+20}},t,n),r}var XI=2,UMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new P1(Vt(this.getData,this),Vt(this.getRawData,this))},t.prototype.fixData=function(n){var r=n.length,i={},a=yO(n,function(f){return i.hasOwnProperty(f[0]+"")||(i[f[0]+""]=-1),f[2]}),o=[];a.buckets.each(function(f,d){o.push({name:d,dataList:f})});for(var s=o.length,l=0;l<s;++l){for(var u=o[l].name,c=0;c<o[l].dataList.length;++c){var h=o[l].dataList[c][0]+"";i[h]=l}for(var h in i)i.hasOwnProperty(h)&&i[h]!==l&&(i[h]=l,n[r]=[h,0,u],r++)}return n},t.prototype.getInitialData=function(n,r){for(var i=this.getReferringComponents("singleAxis",ai).models[0],a=i.get("type"),o=Gn(n.data,function(p){return p[2]!==void 0}),s=this.fixData(o||[]),l=[],u=this.nameMap=jt(),c=0,h=0;h<s.length;++h)l.push(s[h][XI]),u.get(s[h][XI])||(u.set(s[h][XI],c),c++);var f=p0(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:iA(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,d=new Ir(f,this);return d.initData(s),d},t.prototype.getLayerSeries=function(){for(var n=this.getData(),r=n.count(),i=[],a=0;a<r;++a)i[a]=a;var o=n.mapDimension("single"),s=yO(i,function(u){return n.get("name",u)}),l=[];return s.buckets.each(function(u,c){u.sort(function(h,f){return n.get(o,h)-n.get(o,f)}),l.push({name:c,indices:u})}),l},t.prototype.getAxisTooltipData=function(n,r,i){ht(n)||(n=n?[n]:[]);for(var a=this.getData(),o=this.getLayerSeries(),s=[],l=o.length,u,c=0;c<l;++c){for(var h=Number.MAX_VALUE,f=-1,d=o[c].indices.length,p=0;p<d;++p){var v=a.get(n[0],o[c].indices[p]),g=Math.abs(v-r);g<=h&&(u=v,h=g,f=o[c].indices[p])}s.push(f)}return{dataIndices:s,nestestValue:u}},t.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=a.getName(n),s=a.get(a.mapDimension("value"),n);return zi("nameValue",{name:o,value:s})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(bn);function VMt(e,t){e.eachSeriesByType("themeRiver",function(n){var r=n.getData(),i=n.coordinateSystem,a={},o=i.getRect();a.rect=o;var s=n.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=s,l.orient==="horizontal"){s[0]=Dt(s[0],o.height),s[1]=Dt(s[1],o.height);var u=o.height-s[0]-s[1];r6(r,n,u)}else{s[0]=Dt(s[0],o.width),s[1]=Dt(s[1],o.width);var c=o.width-s[0]-s[1];r6(r,n,c)}r.setLayout("layoutInfo",a)})}function r6(e,t,n){if(e.count())for(var r=t.coordinateSystem,i=t.getLayerSeries(),a=e.mapDimension("single"),o=e.mapDimension("value"),s=yt(i,function(g){return yt(g.indices,function(m){var _=r.dataToPoint(e.get(a,m));return _[1]=e.get(o,m),_})}),l=GMt(s),u=l.y0,c=n/l.max,h=i.length,f=i[0].indices.length,d,p=0;p<f;++p){d=u[p]*c,e.setItemLayout(i[0].indices[p],{layerIndex:0,x:s[0][p][0],y0:d,y:s[0][p][1]*c});for(var v=1;v<h;++v)d+=s[v-1][p][1]*c,e.setItemLayout(i[v].indices[p],{layerIndex:v,x:s[v][p][0],y0:d,y:s[v][p][1]*c})}}function GMt(e){for(var t=e.length,n=e[0].length,r=[],i=[],a=0,o=0;o<n;++o){for(var s=0,l=0;l<t;++l)s+=e[l][o][1];s>a&&(a=s),r.push(s)}for(var u=0;u<n;++u)i[u]=(a-r[u])/2;a=0;for(var c=0;c<n;++c){var h=r[c]+i[c];h>a&&(a=h)}return{y0:i,max:a}}function HMt(e){e.registerChartView(FMt),e.registerSeriesModel(UMt),e.registerLayout(VMt),e.registerProcessor(L1("themeRiver"))}var WMt=2,$Mt=4,i6=function(e){it(t,e);function t(n,r,i,a){var o=e.call(this)||this;o.z2=WMt,o.textConfig={inside:!0},fe(o).seriesIndex=r.seriesIndex;var s=new Qe({z2:$Mt,silent:n.getModel().get(["label","silent"])});return o.setTextContent(s),o.updateData(!0,n,r,i,a),o}return t.prototype.updateData=function(n,r,i,a,o){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var s=this;fe(s).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),c=r.getLayout(),h=ut({},c);h.label=null;var f=r.getVisual("style");f.lineJoin="bevel";var d=r.getVisual("decal");d&&(f.decal=cy(d,o));var p=Np(l.getModel("itemStyle"),h,!0);ut(h,p),R($a,function(_){var y=s.ensureState(_),x=l.getModel([_,"itemStyle"]);y.style=x.getItemStyle();var S=Np(x,h);S&&(y.shape=S)}),n?(s.setShape(h),s.shape.r=c.r0,xr(s,{shape:{r:c.r}},i,r.dataIndex)):(Tn(s,{shape:h},i),Ol(s)),s.useStyle(f),this._updateLabel(i);var v=l.getShallow("cursor");v&&s.attr("cursor",v),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var g=u.get("focus"),m=g==="ancestor"?r.getAncestorsIndices():g==="descendant"?r.getDescendantIndices():g;Vr(this,m,u.get("blurScope"),u.get("disabled"))},t.prototype._updateLabel=function(n){var r=this,i=this.node.getModel(),a=i.getModel("label"),o=this.node.getLayout(),s=o.endAngle-o.startAngle,l=(o.startAngle+o.endAngle)/2,u=Math.cos(l),c=Math.sin(l),h=this,f=h.getTextContent(),d=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,v=a.get("show")&&!(p!=null&&Math.abs(s)<p);f.ignore=!v,R(ub,function(m){var _=m==="normal"?i.getModel("label"):i.getModel([m,"label"]),y=m==="normal",x=y?f:f.ensureState(m),S=n.getFormattedLabel(d,m);y&&(S=S||r.node.name),x.style=Hn(_,{},null,m!=="normal",!0),S&&(x.style.text=S);var b=_.get("show");b!=null&&!y&&(x.ignore=!b);var w=g(_,"position"),A=y?h:h.states[m],T=A.style.fill;A.textConfig={outsideFill:_.get("color")==="inherit"?T:null,inside:w!=="outside"};var M,C=g(_,"distance")||0,E=g(_,"align"),D=g(_,"rotate"),I=Math.PI*.5,L=Math.PI*1.5,P=Yo(D==="tangential"?Math.PI/2-l:l),B=P>I&&!sb(P-I)&&P<L;w==="outside"?(M=o.r+C,E=B?"right":"left"):!E||E==="center"?(s===2*Math.PI&&o.r0===0?M=0:M=(o.r+o.r0)/2,E="center"):E==="left"?(M=o.r0+C,E=B?"right":"left"):E==="right"&&(M=o.r-C,E=B?"left":"right"),x.style.align=E,x.style.verticalAlign=g(_,"verticalAlign")||"middle",x.x=M*u+o.cx,x.y=M*c+o.cy;var N=0;D==="radial"?N=Yo(-l)+(B?Math.PI:0):D==="tangential"?N=Yo(Math.PI/2-l)+(B?Math.PI:0):xn(D)&&(N=D*Math.PI/180),x.rotation=Yo(N)});function g(m,_){var y=m.get(_);return y??a.get(_)}f.dirtyStyle()},t}(Xa),_N="sunburstRootToNode",a6="sunburstHighlight",XMt="sunburstUnhighlight";function jMt(e){e.registerAction({type:_N,update:"updateView"},function(t,n){n.eachComponent({mainType:"series",subType:"sunburst",query:t},r);function r(i,a){var o=wb(t,[_N],i);if(o){var s=i.getViewRoot();s&&(t.direction=Zk(s,o.node)?"rollUp":"drillDown"),i.resetViewRoot(o.node)}}}),e.registerAction({type:a6,update:"none"},function(t,n,r){t=ut({},t),n.eachComponent({mainType:"series",subType:"sunburst",query:t},i);function i(a){var o=wb(t,[a6],a);o&&(t.dataIndex=o.node.dataIndex)}r.dispatchAction(ut(t,{type:"highlight"}))}),e.registerAction({type:XMt,update:"updateView"},function(t,n,r){t=ut({},t),r.dispatchAction(ut(t,{type:"downplay"}))})}var YMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){var o=this;this.seriesModel=n,this.api=i,this.ecModel=r;var s=n.getData(),l=s.tree.root,u=n.getViewRoot(),c=this.group,h=n.get("renderLabelForZeroData"),f=[];u.eachNode(function(_){f.push(_)});var d=this._oldChildren||[];p(f,d),m(l,u),this._initEvents(),this._oldChildren=f;function p(_,y){if(_.length===0&&y.length===0)return;new Zc(y,_,x,x).add(S).update(S).remove(_e(S,null)).execute();function x(b){return b.getId()}function S(b,w){var A=b==null?null:_[b],T=w==null?null:y[w];v(A,T)}}function v(_,y){if(!h&&_&&!_.getValue()&&(_=null),_!==l&&y!==l){if(y&&y.piece)_?(y.piece.updateData(!1,_,n,r,i),s.setItemGraphicEl(_.dataIndex,y.piece)):g(y);else if(_){var x=new i6(_,n,r,i);c.add(x),s.setItemGraphicEl(_.dataIndex,x)}}}function g(_){_&&_.piece&&(c.remove(_.piece),_.piece=null)}function m(_,y){y.depth>0?(o.virtualPiece?o.virtualPiece.updateData(!1,_,n,r,i):(o.virtualPiece=new i6(_,n,r,i),c.add(o.virtualPiece)),y.piece.off("click"),o.virtualPiece.on("click",function(x){o._rootToNode(y.parentNode)})):o.virtualPiece&&(c.remove(o.virtualPiece),o.virtualPiece=null)}},t.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=n.seriesModel.getViewRoot();a.eachNode(function(o){if(!i&&o.piece&&o.piece===r.target){var s=o.getModel().get("nodeClick");if(s==="rootToNode")n._rootToNode(o);else if(s==="link"){var l=o.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";KM(u,c)}}i=!0}})})},t.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:_N,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},t.prototype.containPoint=function(n,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var o=n[0]-a.cx,s=n[1]-a.cy,l=Math.sqrt(o*o+s*s);return l<=a.r&&l>=a.r0}},t.type="sunburst",t}(hn),qMt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.ignoreStyleOnData=!0,n}return t.prototype.getInitialData=function(n,r){var i={name:n.name,children:n.data};het(i);var a=this._levelModels=yt(n.levels||[],function(l){return new pn(l,this,r)},this),o=Kk.createTree(i,this,s);function s(l){l.wrapMethod("getItemModel",function(u,c){var h=o.getNodeByDataIndex(c),f=a[h.depth];return f&&(u.parentModel=f),u})}return o.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(n){var r=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(n);return r.treePathInfo=LE(i,this),r},t.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var r=this.getRawData().tree.root;(!n||n!==r&&!r.contains(n))&&(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){ptt(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(bn);function het(e){var t=0;R(e.children,function(r){het(r);var i=r.value;ht(i)&&(i=i[0]),t+=i});var n=e.value;ht(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=t),n<0&&(n=0),ht(e.value)?e.value[0]=n:e.value=n}var o6=Math.PI/180;function KMt(e,t,n){t.eachSeriesByType(e,function(r){var i=r.get("center"),a=r.get("radius");ht(a)||(a=[0,a]),ht(i)||(i=[i,i]);var o=n.getWidth(),s=n.getHeight(),l=Math.min(o,s),u=Dt(i[0],o),c=Dt(i[1],s),h=Dt(a[0],l/2),f=Dt(a[1],l/2),d=-r.get("startAngle")*o6,p=r.get("minAngle")*o6,v=r.getData().tree.root,g=r.getViewRoot(),m=g.depth,_=r.get("sort");_!=null&&fet(g,_);var y=0;R(g.children,function(P){!isNaN(P.getValue())&&y++});var x=g.getValue(),S=Math.PI/(x||y)*2,b=g.depth>0,w=g.height-(b?-1:1),A=(f-h)/(w||1),T=r.get("clockwise"),M=r.get("stillShowZeroSum"),C=T?1:-1,E=function(P,B){if(P){var N=B;if(P!==v){var k=P.getValue(),U=x===0&&M?S:k*S;U<p&&(U=p),N=B+C*U;var Z=P.depth-m-(b?-1:1),nt=h+A*Z,ct=h+A*(Z+1),K=r.getLevelModel(P);if(K){var $=K.get("r0",!0),ot=K.get("r",!0),tt=K.get("radius",!0);tt!=null&&($=tt[0],ot=tt[1]),$!=null&&(nt=Dt($,l/2)),ot!=null&&(ct=Dt(ot,l/2))}P.setLayout({angle:U,startAngle:B,endAngle:N,clockwise:T,cx:u,cy:c,r0:nt,r:ct})}if(P.children&&P.children.length){var et=0;R(P.children,function(xt){et+=E(xt,B+et)})}return N-B}};if(b){var D=h,I=h+A,L=Math.PI*2;v.setLayout({angle:L,startAngle:d,endAngle:d+L,clockwise:T,cx:u,cy:c,r0:D,r:I})}E(g,d)})}function fet(e,t){var n=e.children||[];e.children=ZMt(n,t),n.length&&R(e.children,function(r){fet(r,t)})}function ZMt(e,t){if(ae(t)){var n=yt(e,function(i,a){var o=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return o}},index:a}});return n.sort(function(i,a){return t(i.params,a.params)}),yt(n,function(i){return e[i.index]})}else{var r=t==="asc";return e.sort(function(i,a){var o=(i.getValue()-a.getValue())*(r?1:-1);return o===0?(i.dataIndex-a.dataIndex)*(r?-1:1):o})}}function JMt(e){var t={};function n(r,i,a){for(var o=r;o&&o.depth>1;)o=o.parentNode;var s=i.getColorFromPalette(o.name||o.dataIndex+"",t);return r.depth>1&&Ft(s)&&(s=oy(s,(r.depth-1)/(a-1)*.5)),s}e.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(o){var s=o.getModel(),l=s.getModel("itemStyle").getItemStyle();l.fill||(l.fill=n(o,r,a.root.height));var u=i.ensureUniqueItemVisual(o.dataIndex,"style");ut(u,l)})})}function QMt(e){e.registerChartView(YMt),e.registerSeriesModel(qMt),e.registerLayout(_e(KMt,"sunburst")),e.registerProcessor(_e(L1,"sunburst")),e.registerVisual(JMt),jMt(e)}var s6={color:"fill",borderColor:"stroke"},tAt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},Gc=vn(),eAt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(n,r){return Qu(null,this)},t.prototype.getDataParams=function(n,r,i){var a=e.prototype.getDataParams.call(this,n,r);return i&&(a.info=Gc(i).info),a},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(bn);function nAt(e,t){return t=t||[0,0],yt(["x","y"],function(n,r){var i=this.getAxis(n),a=t[r],o=e[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function rAt(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Vt(nAt,e)}}}function iAt(e,t){return t=t||[0,0],yt([0,1],function(n){var r=t[n],i=e[n]/2,a=[],o=[];return a[n]=r-i,o[n]=r+i,a[1-n]=o[1-n]=t[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(o)[n])},this)}function aAt(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:Vt(iAt,e)}}}function oAt(e,t){var n=this.getAxis(),r=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(r-i)-n.dataToCoord(r+i))}function sAt(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Vt(oAt,e)}}}function lAt(e,t){return t=t||[0,0],yt(["Radius","Angle"],function(n,r){var i="get"+n+"Axis",a=this[i](),o=t[r],s=e[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(o-s)-a.dataToCoord(o+s));return n==="Angle"&&(l=l*Math.PI/180),l},this)}function uAt(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=t.dataToRadius(i[0]),o=n.dataToAngle(i[1]),s=e.coordToPoint([a,o]);return s.push(a,o*Math.PI/180),s},size:Vt(lAt,e)}}}function cAt(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(r,i){return e.dataToPoint(r,i)}}}}function det(e,t,n,r){return e&&(e.legacy||e.legacy!==!1&&!n&&!r&&t!=="tspan"&&(t==="text"||$t(e,"text")))}function pet(e,t,n){var r=e,i,a,o;if(t==="text")o=r;else{o={},$t(r,"text")&&(o.text=r.text),$t(r,"rich")&&(o.rich=r.rich),$t(r,"textFill")&&(o.fill=r.textFill),$t(r,"textStroke")&&(o.stroke=r.textStroke),$t(r,"fontFamily")&&(o.fontFamily=r.fontFamily),$t(r,"fontSize")&&(o.fontSize=r.fontSize),$t(r,"fontStyle")&&(o.fontStyle=r.fontStyle),$t(r,"fontWeight")&&(o.fontWeight=r.fontWeight),a={type:"text",style:o,silent:!0},i={};var s=$t(r,"textPosition");n?i.position=s?r.textPosition:"inside":s&&(i.position=r.textPosition),$t(r,"textPosition")&&(i.position=r.textPosition),$t(r,"textOffset")&&(i.offset=r.textOffset),$t(r,"textRotation")&&(i.rotation=r.textRotation),$t(r,"textDistance")&&(i.distance=r.textDistance)}return l6(o,e),R(o.rich,function(l){l6(l,l)}),{textConfig:i,textContent:a}}function l6(e,t){t&&(t.font=t.textFont||t.font,$t(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),$t(t,"textAlign")&&(e.align=t.textAlign),$t(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),$t(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),$t(t,"textWidth")&&(e.width=t.textWidth),$t(t,"textHeight")&&(e.height=t.textHeight),$t(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),$t(t,"textPadding")&&(e.padding=t.textPadding),$t(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),$t(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),$t(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),$t(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),$t(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),$t(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),$t(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function u6(e,t,n){var r=e;r.textPosition=r.textPosition||n.position||"inside",n.offset!=null&&(r.textOffset=n.offset),n.rotation!=null&&(r.textRotation=n.rotation),n.distance!=null&&(r.textDistance=n.distance);var i=r.textPosition.indexOf("inside")>=0,a=e.fill||"#000";c6(r,t);var o=r.textFill==null;return i?o&&(r.textFill=n.insideFill||"#fff",!r.textStroke&&n.insideStroke&&(r.textStroke=n.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(o&&(r.textFill=e.fill||n.outsideFill||"#000"),!r.textStroke&&n.outsideStroke&&(r.textStroke=n.outsideStroke)),r.text=t.text,r.rich=t.rich,R(t.rich,function(s){c6(s,s)}),r}function c6(e,t){t&&($t(t,"fill")&&(e.textFill=t.fill),$t(t,"stroke")&&(e.textStroke=t.fill),$t(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),$t(t,"font")&&(e.font=t.font),$t(t,"fontStyle")&&(e.fontStyle=t.fontStyle),$t(t,"fontWeight")&&(e.fontWeight=t.fontWeight),$t(t,"fontSize")&&(e.fontSize=t.fontSize),$t(t,"fontFamily")&&(e.fontFamily=t.fontFamily),$t(t,"align")&&(e.textAlign=t.align),$t(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),$t(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),$t(t,"width")&&(e.textWidth=t.width),$t(t,"height")&&(e.textHeight=t.height),$t(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),$t(t,"padding")&&(e.textPadding=t.padding),$t(t,"borderColor")&&(e.textBorderColor=t.borderColor),$t(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),$t(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),$t(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),$t(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),$t(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),$t(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),$t(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),$t(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),$t(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),$t(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var vet={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},h6=Je(vet);Pl(Fu,function(e,t){return e[t]=1,e},{});Fu.join(", ");var mA=["","style","shape","extra"],py=vn();function fF(e,t,n,r,i){var a=e+"Animation",o=r0(e,r,i)||{},s=py(t).userDuring;return o.duration>0&&(o.during=s?Vt(vAt,{el:t,userDuring:s}):null,o.setToFinal=!0,o.scope=e),ut(o,n[a]),o}function rM(e,t,n,r){r=r||{};var i=r.dataIndex,a=r.isInit,o=r.clearStyle,s=n.isAnimationEnabled(),l=py(e),u=t.style;l.userDuring=t.during;var c={},h={};if(mAt(e,t,h),d6("shape",t,h),d6("extra",t,h),!a&&s&&(gAt(e,t,c),f6("shape",e,t,c),f6("extra",e,t,c),yAt(e,t,u,c)),h.style=u,hAt(e,h,o),dAt(e,t),s)if(a){var f={};R(mA,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(f[p]=f[p]||{}),ut(p?f[p]:f,v.enterFrom))});var d=fF("enter",e,t,n,i);d.duration>0&&e.animateFrom(f,d)}else fAt(e,t,i||0,n,c);get(e,t),u?e.dirty():e.markRedraw()}function get(e,t){for(var n=py(e).leaveToProps,r=0;r<mA.length;r++){var i=mA[r],a=i?t[i]:t;a&&a.leaveTo&&(n||(n=py(e).leaveToProps={}),i&&(n[i]=n[i]||{}),ut(i?n[i]:n,a.leaveTo))}}function OE(e,t,n,r){if(e){var i=e.parent,a=py(e).leaveToProps;if(a){var o=fF("update",e,t,n,0);o.done=function(){i.remove(e)},e.animateTo(a,o)}else i.remove(e)}}function rv(e){return e==="all"}function hAt(e,t,n){var r=t.style;if(!e.isGroup&&r){if(n){e.useStyle({});for(var i=e.animators,a=0;a<i.length;a++){var o=i[a];o.targetName==="style"&&o.changeTarget(e.style)}}e.setStyle(r)}t&&(t.style=null,t&&e.attr(t),t.style=r)}function fAt(e,t,n,r,i){if(i){var a=fF("update",e,t,r,n);a.duration>0&&e.animateFrom(i,a)}}function dAt(e,t){$t(t,"silent")&&(e.silent=t.silent),$t(t,"ignore")&&(e.ignore=t.ignore),e instanceof Gs&&$t(t,"invisible")&&(e.invisible=t.invisible),e instanceof Ve&&$t(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var Ql={},pAt={setTransform:function(e,t){return Ql.el[e]=t,this},getTransform:function(e){return Ql.el[e]},setShape:function(e,t){var n=Ql.el,r=n.shape||(n.shape={});return r[e]=t,n.dirtyShape&&n.dirtyShape(),this},getShape:function(e){var t=Ql.el.shape;if(t)return t[e]},setStyle:function(e,t){var n=Ql.el,r=n.style;return r&&(r[e]=t,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(e){var t=Ql.el.style;if(t)return t[e]},setExtra:function(e,t){var n=Ql.el.extra||(Ql.el.extra={});return n[e]=t,this},getExtra:function(e){var t=Ql.el.extra;if(t)return t[e]}};function vAt(){var e=this,t=e.el;if(t){var n=py(t).userDuring,r=e.userDuring;if(n!==r){e.el=e.userDuring=null;return}Ql.el=t,r(pAt)}}function f6(e,t,n,r){var i=n[e];if(i){var a=t[e],o;if(a){var s=n.transition,l=i.transition;if(l)if(!o&&(o=r[e]={}),rv(l))ut(o,a);else for(var u=jn(l),c=0;c<u.length;c++){var h=u[c],f=a[h];o[h]=f}else if(rv(s)||Le(s,e)>=0){!o&&(o=r[e]={});for(var d=Je(a),c=0;c<d.length;c++){var h=d[c],f=a[h];_At(i[h],f)&&(o[h]=f)}}}}}function d6(e,t,n){var r=t[e];if(r)for(var i=n[e]={},a=Je(r),o=0;o<a.length;o++){var s=a[o];i[s]=Dx(r[s])}}function gAt(e,t,n){for(var r=t.transition,i=rv(r)?Fu:jn(r||[]),a=0;a<i.length;a++){var o=i[a];if(!(o==="style"||o==="shape"||o==="extra")){var s=e[o];n[o]=s}}}function mAt(e,t,n){for(var r=0;r<h6.length;r++){var i=h6[r],a=vet[i],o=t[i];o&&(n[a[0]]=o[0],n[a[1]]=o[1])}for(var r=0;r<Fu.length;r++){var s=Fu[r];t[s]!=null&&(n[s]=t[s])}}function yAt(e,t,n,r){if(n){var i=e.style,a;if(i){var o=n.transition,s=t.transition;if(o&&!rv(o)){var l=jn(o);!a&&(a=r.style={});for(var u=0;u<l.length;u++){var c=l[u],h=i[c];a[c]=h}}else if(e.getAnimationStyleProps&&(rv(s)||rv(o)||Le(s,"style")>=0)){var f=e.getAnimationStyleProps(),d=f?f.style:null;if(d){!a&&(a=r.style={});for(var p=Je(n),u=0;u<p.length;u++){var c=p[u];if(d[c]){var h=i[c];a[c]=h}}}}}}}function _At(e,t){return Aa(e)?e!==t:e!=null&&isFinite(e)}var met=vn(),xAt=["percent","easing","shape","style","extra"];function yet(e){e.stopAnimation("keyframe"),e.attr(met(e))}function yA(e,t,n){if(!(!n.isAnimationEnabled()||!t)){if(ht(t)){R(t,function(s){yA(e,s,n)});return}var r=t.keyframes,i=t.duration;if(n&&i==null){var a=r0("enter",n,0);i=a&&a.duration}if(!(!r||!i)){var o=met(e);R(mA,function(s){if(!(s&&!e[s])){var l;r.sort(function(u,c){return u.percent-c.percent}),R(r,function(u){var c=e.animators,h=s?u[s]:u;if(h){var f=Je(h);if(s||(f=Gn(f,function(v){return Le(xAt,v)<0})),!!f.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(f);s&&(o[s]=o[s]||{});var p=s?o[s]:o;R(f,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,h,f,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var Hc="emphasis",wf="normal",dF="blur",pF="select",Hf=[wf,Hc,dF,pF],jI={normal:["itemStyle"],emphasis:[Hc,"itemStyle"],blur:[dF,"itemStyle"],select:[pF,"itemStyle"]},YI={normal:["label"],emphasis:[Hc,"label"],blur:[dF,"label"],select:[pF,"label"]},bAt=["x","y"],SAt="e\0\0",as={normal:{},emphasis:{},blur:{},select:{}},wAt={cartesian2d:rAt,geo:aAt,single:sAt,polar:uAt,calendar:cAt};function xN(e){return e instanceof Ve}function bN(e){return e instanceof Gs}function TAt(e,t){t.copyTransform(e),bN(t)&&bN(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,xN(t)&&xN(e)&&t.setShape(e.shape))}var MAt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){this._progressiveEls=null;var o=this._data,s=n.getData(),l=this.group,u=p6(n,s,r,i);o||l.removeAll(),s.diff(o).add(function(h){qI(i,null,h,u(h,a),n,l,s)}).remove(function(h){var f=o.getItemGraphicEl(h);f&&OE(f,Gc(f).option,n)}).update(function(h,f){var d=o.getItemGraphicEl(f);qI(i,d,h,u(h,a),n,l,s)}).execute();var c=n.get("clip",!0)?D1(n.coordinateSystem,!1,n):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(n,r,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(n,r,i,a,o){var s=r.getData(),l=p6(r,s,i,a),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var h=n.start;h<n.end;h++){var f=qI(null,null,h,l(h,o),r,this.group,s);f&&(f.traverse(c),u.push(f))}},t.prototype.eachRendered=function(n){sd(this._progressiveEls||this.group,n)},t.prototype.filterForExposedEvent=function(n,r,i,a){var o=r.element;if(o==null||i.name===o)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===o)return!0;return!1},t.type="custom",t}(hn);function vF(e){var t=e.type,n;if(t==="path"){var r=e.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=bet(r);n=hE(a,null,i,r.layout||"center"),Gc(n).customPathData=a}else if(t==="image")n=new Wi({}),Gc(n).customImagePath=e.style.image;else if(t==="text")n=new Qe({});else if(t==="group")n=new he;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var o=qB(t);if(!o){var s="";En(s)}n=new o}return Gc(n).customGraphicType=t,n.name=e.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function gF(e,t,n,r,i,a,o){yet(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),r&&r.transition==null&&(r.transition=bAt);var l=r&&r.style;if(l){if(t.type==="text"){var u=l;$t(u,"textFill")&&(u.fill=u.textFill),$t(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,h=xN(t)?l.decal:null;e&&h&&(h.dirty=!0,c=cy(h,e)),l.__decalPattern=c}if(bN(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}rM(t,r,a,{dataIndex:n,isInit:o,clearStyle:!0}),yA(t,r.keyframeAnimation,a)}function _et(e,t,n,r,i){var a=t.isGroup?null:t,o=i&&i[e].cfg;if(a){var s=a.ensureState(e);if(r===!1){var l=a.getState(e);l&&(l.style=null)}else s.style=r||null;o&&(s.textConfig=o),pv(a)}}function AAt(e,t,n){if(!e.isGroup){var r=e,i=n.currentZ,a=n.currentZLevel;r.z=i,r.zlevel=a;var o=t.z2;o!=null&&(r.z2=o||0);for(var s=0;s<Hf.length;s++)CAt(r,t,Hf[s])}}function CAt(e,t,n){var r=n===wf,i=r?t:_A(t,n),a=i?i.z2:null,o;a!=null&&(o=r?e:e.ensureState(n),o.z2=a||0)}function p6(e,t,n,r){var i=e.get("renderItem"),a=e.coordinateSystem,o={};a&&(o=a.prepareCustoms?a.prepareCustoms(a):wAt[a.type](a));for(var s=te({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:x,style:b,ordinalRawValue:S,styleEmphasis:w,visual:M,barLayout:C,currentSeriesIndices:E,font:D},o.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:o.coordSys,dataInsideLength:t.count(),encode:EAt(e.getData())},u,c,h={},f={},d={},p={},v=0;v<Hf.length;v++){var g=Hf[v];d[g]=e.getModel(jI[g]),p[g]=e.getModel(YI[g])}function m(I){return I===u?c||(c=t.getItemModel(I)):t.getItemModel(I)}function _(I,L){return t.hasItemOption?I===u?h[L]||(h[L]=m(I).getModel(jI[L])):m(I).getModel(jI[L]):d[L]}function y(I,L){return t.hasItemOption?I===u?f[L]||(f[L]=m(I).getModel(YI[L])):m(I).getModel(YI[L]):p[L]}return function(I,L){return u=I,c=null,h={},f={},i&&i(te({dataIndexInside:I,dataIndex:t.getRawIndex(I),actionType:L?L.type:null},l),s)};function x(I,L){return L==null&&(L=u),t.getStore().get(t.getDimensionIndex(I||0),L)}function S(I,L){L==null&&(L=u),I=I||0;var P=t.getDimensionInfo(I);if(!P){var B=t.getDimensionIndex(I);return B>=0?t.getStore().get(B,L):void 0}var N=t.get(P.name,L),k=P&&P.ordinalMeta;return k?k.categories[N]:N}function b(I,L){L==null&&(L=u);var P=t.getItemVisual(L,"style"),B=P&&P.fill,N=P&&P.opacity,k=_(L,wf).getItemStyle();B!=null&&(k.fill=B),N!=null&&(k.opacity=N);var U={inheritColor:Ft(B)?B:"#000"},Z=y(L,wf),nt=Hn(Z,null,U,!1,!0);nt.text=Z.getShallow("show")?xe(e.getFormattedLabel(L,wf),hy(t,L)):null;var ct=jM(Z,U,!1);return T(I,k),k=u6(k,nt,ct),I&&A(k,I),k.legacy=!0,k}function w(I,L){L==null&&(L=u);var P=_(L,Hc).getItemStyle(),B=y(L,Hc),N=Hn(B,null,null,!0,!0);N.text=B.getShallow("show")?Du(e.getFormattedLabel(L,Hc),e.getFormattedLabel(L,wf),hy(t,L)):null;var k=jM(B,null,!0);return T(I,P),P=u6(P,N,k),I&&A(P,I),P.legacy=!0,P}function A(I,L){for(var P in L)$t(L,P)&&(I[P]=L[P])}function T(I,L){I&&(I.textFill&&(L.textFill=I.textFill),I.textPosition&&(L.textPosition=I.textPosition))}function M(I,L){if(L==null&&(L=u),$t(s6,I)){var P=t.getItemVisual(L,"style");return P?P[s6[I]]:null}if($t(tAt,I))return t.getItemVisual(L,I)}function C(I){if(a.type==="cartesian2d"){var L=a.getBaseAxis();return b0t(te({axis:L},I))}}function E(){return n.getCurrentSeriesIndices()}function D(I){return KB(I,n)}}function EAt(e){var t={};return R(e.dimensions,function(n){var r=e.getDimensionInfo(n);if(!r.isExtraCoord){var i=r.coordDim,a=t[i]=t[i]||[];a[r.coordDimIndex]=e.getDimensionIndex(n)}}),t}function qI(e,t,n,r,i,a,o){if(!r){a.remove(t);return}var s=mF(e,t,n,r,i,a);return s&&o.setItemGraphicEl(n,s),s&&Vr(s,r.focus,r.blurScope,r.emphasisDisabled),s}function mF(e,t,n,r,i,a){var o=-1,s=t;t&&xet(t,r,i)&&(o=Le(a.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=vF(r),s&&TAt(s,u)),r.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),as.normal.cfg=as.normal.conOpt=as.emphasis.cfg=as.emphasis.conOpt=as.blur.cfg=as.blur.conOpt=as.select.cfg=as.select.conOpt=null,as.isLegacy=!1,IAt(u,n,r,i,l,as),DAt(u,n,r,i,l),gF(e,u,n,r,as,i,l),$t(r,"info")&&(Gc(u).info=r.info);for(var c=0;c<Hf.length;c++){var h=Hf[c];if(h!==wf){var f=_A(r,h),d=yF(r,f,h);_et(h,u,f,d,as)}}return AAt(u,r,i),r.type==="group"&&LAt(e,u,n,r,i),o>=0?a.replaceAt(u,o):a.add(u),u}function xet(e,t,n){var r=Gc(e),i=t.type,a=t.shape,o=t.style;return n.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&NAt(a)&&bet(a)!==r.customPathData||i==="image"&&$t(o,"image")&&o.image!==r.customImagePath}function DAt(e,t,n,r,i){var a=n.clipPath;if(a===!1)e&&e.getClipPath()&&e.removeClipPath();else if(a){var o=e.getClipPath();o&&xet(o,a,r)&&(o=null),o||(o=vF(a),e.setClipPath(o)),gF(null,o,t,a,null,r,i)}}function IAt(e,t,n,r,i,a){if(!e.isGroup){v6(n,null,a),v6(n,Hc,a);var o=a.normal.conOpt,s=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(o!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(o===!1)c&&e.removeTextContent();else{o=a.normal.conOpt=o||{type:"text"},c?c.clearStates():(c=vF(o),e.setTextContent(c)),gF(null,c,t,o,null,r,i);for(var h=o&&o.style,f=0;f<Hf.length;f++){var d=Hf[f];if(d!==wf){var p=a[d].conOpt;_et(d,c,p,yF(o,p,d),null)}}h?c.dirty():c.markRedraw()}}}}function v6(e,t,n){var r=t?_A(e,t):e,i=t?yF(e,r,Hc):e.style,a=e.type,o=r?r.textConfig:null,s=e.textContent,l=s?t?_A(s,t):s:null;if(i&&(n.isLegacy||det(i,a,!!o,!!l))){n.isLegacy=!0;var u=pet(i,a,!t);!o&&u.textConfig&&(o=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var h=t?n[t]:n.normal;h.cfg=o,h.conOpt=l}function _A(e,t){return t?e?e[t]:null:e}function yF(e,t,n){var r=t&&t.style;return r==null&&n===Hc&&e&&(r=e.styleEmphasis),r}function LAt(e,t,n,r,i){var a=r.children,o=a?a.length:0,s=r.$mergeChildren,l=s==="byName"||r.diffChildrenByName,u=s===!1;if(!(!o&&!l&&!u)){if(l){RAt({api:e,oldChildren:t.children()||[],newChildren:a||[],dataIndex:n,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<o;c++){var h=a[c],f=t.childAt(c);h?(h.ignore==null&&(h.ignore=!1),mF(e,f,n,h,i,t)):f.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);PAt(t,p,i)}}}function PAt(e,t,n){t&&OE(t,Gc(e).option,n)}function RAt(e){new Zc(e.oldChildren,e.newChildren,g6,g6,e).add(m6).update(m6).remove(OAt).execute()}function g6(e,t){var n=e&&e.name;return n??SAt+t}function m6(e,t){var n=this.context,r=e!=null?n.newChildren[e]:null,i=t!=null?n.oldChildren[t]:null;mF(n.api,i,n.dataIndex,r,n.seriesModel,n.group)}function OAt(e){var t=this.context,n=t.oldChildren[e];n&&OE(n,Gc(n).option,t.seriesModel)}function bet(e){return e&&(e.pathData||e.d)}function NAt(e){return e&&($t(e,"pathData")||$t(e,"d"))}function BAt(e){e.registerChartView(MAt),e.registerSeriesModel(eAt)}var Sp=vn(),y6=ce,KI=Vt,_F=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,n,r,i){var a=n.get("value"),o=n.get("status");if(this._axisModel=t,this._axisPointerModel=n,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===o)){this._lastValue=a,this._lastStatus=o;var s=this._group,l=this._handle;if(!o||o==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,a,t,n,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var h=this._moveAnimation=this.determineAnimation(t,n);if(!s)s=this._group=new he,this.createPointerEl(s,u,t,n),this.createLabelEl(s,u,t,n),r.getZr().add(s);else{var f=_e(_6,n,h);this.updatePointerEl(s,u,f),this.updateLabelEl(s,u,f,n)}b6(s,n,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,n){var r=n.get("animation"),i=t.axis,a=i.type==="category",o=n.get("snap");if(!o&&!a)return!1;if(r==="auto"||r==null){var s=this.animationThreshold;if(a&&i.getBandWidth()>s)return!0;if(o){var l=Gk(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return r===!0},e.prototype.makeElOption=function(t,n,r,i,a){},e.prototype.createPointerEl=function(t,n,r,i){var a=n.pointer;if(a){var o=Sp(t).pointerEl=new Uv[a.type](y6(n.pointer));t.add(o)}},e.prototype.createLabelEl=function(t,n,r,i){if(n.label){var a=Sp(t).labelEl=new Qe(y6(n.label));t.add(a),x6(a,i)}},e.prototype.updatePointerEl=function(t,n,r){var i=Sp(t).pointerEl;i&&n.pointer&&(i.setStyle(n.pointer.style),r(i,{shape:n.pointer.shape}))},e.prototype.updateLabelEl=function(t,n,r,i){var a=Sp(t).labelEl;a&&(a.setStyle(n.label.style),r(a,{x:n.label.x,y:n.label.y}),x6(a,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||o==="hide"){i&&r.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=S1(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){jc(u.event)},onmousedown:KI(this._onHandleDragMove,this,0,0),drift:KI(this._onHandleDragMove,this),ondragend:KI(this._onHandleDragEnd,this)}),r.add(i)),b6(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");ht(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,f0(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,n){_6(this._axisPointerModel,!n&&this._moveAnimation,this._handle,ZI(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,n){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(ZI(r),[t,n],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(ZI(i)),Sp(r).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var n=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var n=t.getZr(),r=this._group,i=this._handle;n&&r&&(this._lastGraphicKey=null,r&&n.remove(r),i&&n.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),vb(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,n,r){return r=r||0,{x:t[r],y:t[1-r],width:n[r],height:n[1-r]}},e}();function _6(e,t,n,r){wet(Sp(n).lastProp,r)||(Sp(n).lastProp=r,t?Tn(n,r,e):(n.stopAnimation(),n.attr(r)))}function wet(e,t){if(se(e)&&se(t)){var n=!0;return R(t,function(r,i){n=n&&wet(e[i],r)}),!!n}else return e===t}function x6(e,t){e[t.get(["label","show"])?"show":"hide"]()}function ZI(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function b6(e,t,n){var r=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=n)})}function xF(e){var t=e.get("type"),n=e.getModel(t+"Style"),r;return t==="line"?(r=n.getLineStyle(),r.fill=null):t==="shadow"&&(r=n.getAreaStyle(),r.stroke=null),r}function Tet(e,t,n,r,i){var a=n.get("value"),o=Met(a,t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=s0(s.get("padding")||0),u=s.getFont(),c=v1(o,u),h=i.position,f=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(h[0]-=f),p==="center"&&(h[0]-=f/2);var v=i.verticalAlign;v==="bottom"&&(h[1]-=d),v==="middle"&&(h[1]-=d/2),kAt(h,f,d,r);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:h[0],y:h[1],style:Hn(s,{text:o,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function kAt(e,t,n,r){var i=r.getWidth(),a=r.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+n,a)-n,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Met(e,t,n,r,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),o=i.formatter;if(o){var s={value:Ek(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};R(r,function(l){var u=n.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,h=u&&u.getDataParams(c);h&&s.seriesData.push(h)}),Ft(o)?a=o.replace("{value}",a):ae(o)&&(a=o(s))}return a}function bF(e,t,n){var r=_o();return Fv(r,r,n.rotation),ku(r,r,n.position),Cl([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function Aet(e,t,n,r,i,a){var o=Ga.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get(["label","margin"]),Tet(t,r,i,a,{position:bF(r.axis,e,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function SF(e,t,n){return n=n||0,{x1:e[n],y1:e[1-n],x2:t[n],y2:t[1-n]}}function Cet(e,t,n){return n=n||0,{x:e[n],y:e[1-n],width:t[n],height:t[1-n]}}function S6(e,t,n,r,i,a){return{cx:e,cy:t,r0:n,r,startAngle:i,endAngle:a,clockwise:!0}}var FAt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis,l=s.grid,u=a.get("type"),c=w6(l,s).getOtherAxis(s).getGlobalExtent(),h=s.toGlobalCoord(s.dataToCoord(r,!0));if(u&&u!=="none"){var f=xF(a),d=zAt[u](s,h,c);d.style=f,n.graphicKey=d.type,n.pointer=d}var p=eN(l.model,i);Aet(r,n,p,i,a,o)},t.prototype.getHandleTransform=function(n,r,i){var a=eN(r.axis.grid.model,r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=bF(r.axis,n,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(n,r,i,a){var o=i.axis,s=o.grid,l=o.getGlobalExtent(!0),u=w6(s,o).getOtherAxis(o).getGlobalExtent(),c=o.dim==="x"?0:1,h=[n.x,n.y];h[c]+=r[c],h[c]=Math.min(l[1],h[c]),h[c]=Math.max(l[0],h[c]);var f=(u[1]+u[0])/2,d=[f,f];d[c]=h[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:n.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(_F);function w6(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var zAt={line:function(e,t,n){var r=SF([t,n[0]],[t,n[1]],T6(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,n){var r=Math.max(1,e.getBandWidth()),i=n[1]-n[0];return{type:"Rect",shape:Cet([t-r/2,n[0]],[r,i],T6(e))}}};function T6(e){return e.dim==="x"?0:1}var UAt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Ie),Nc=vn(),VAt=R;function Eet(e,t,n){if(!qe.node){var r=t.getZr();Nc(r).records||(Nc(r).records={}),GAt(r,t);var i=Nc(r).records[e]||(Nc(r).records[e]={});i.handler=n}}function GAt(e,t){if(Nc(e).initialized)return;Nc(e).initialized=!0,n("click",_e(M6,"click")),n("mousemove",_e(M6,"mousemove")),n("globalout",WAt);function n(r,i){e.on(r,function(a){var o=$At(t);VAt(Nc(e).records,function(s){s&&i(s,a,o.dispatchAction)}),HAt(o.pendings,t)})}}function HAt(e,t){var n=e.showTip.length,r=e.hideTip.length,i;n?i=e.showTip[n-1]:r&&(i=e.hideTip[r-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function WAt(e,t,n){e.handler("leave",null,n)}function M6(e,t,n,r){t.handler(e,n,r)}function $At(e){var t={showTip:[],hideTip:[]},n=function(r){var i=t[r.type];i?i.push(r):(r.dispatchAction=n,e.dispatchAction(r))};return{dispatchAction:n,pendings:t}}function SN(e,t){if(!qe.node){var n=t.getZr(),r=(Nc(n).records||{})[e];r&&(Nc(n).records[e]=null)}}var XAt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=r.getComponent("tooltip"),o=n.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";Eet("axisPointer",i,function(s,l,u){o!=="none"&&(s==="leave"||o.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(n,r){SN("axisPointer",r)},t.prototype.dispose=function(n,r){SN("axisPointer",r)},t.type="axisPointer",t}(Zn);function Det(e,t){var n=[],r=e.seriesIndex,i;if(r==null||!(i=t.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),o=fv(a,e);if(o==null||o<0||ht(o))return{point:[]};var s=a.getItemGraphicEl(o),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(o)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),h=c.dim,f=u.dim,d=h==="x"||h==="radius"?1:0,p=a.mapDimension(f),v=[];v[d]=a.get(p,o),v[1-d]=a.get(a.getCalculationInfo("stackResultDimension"),o),n=l.dataToPoint(v)||[]}else n=l.dataToPoint(a.getValues(yt(l.dimensions,function(m){return a.mapDimension(m)}),o))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),n=[g.x+g.width/2,g.y+g.height/2]}return{point:n,el:s}}var A6=vn();function jAt(e,t,n){var r=e.currTrigger,i=[e.x,e.y],a=e,o=e.dispatchAction||Vt(n.dispatchAction,n),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){iM(i)&&(i=Det({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var l=iM(i),u=a.axesInfo,c=s.axesInfo,h=r==="leave"||iM(i),f={},d={},p={list:[],map:{}},v={showPointer:_e(qAt,d),showTooltip:_e(KAt,p)};R(s.coordSysMap,function(m,_){var y=l||m.containPoint(i);R(s.coordSysAxesInfo[_],function(x,S){var b=x.axis,w=tCt(u,x);if(!h&&y&&(!u||w)){var A=w&&w.value;A==null&&!l&&(A=b.pointToData(i)),A!=null&&C6(x,A,v,!1,f)}})});var g={};return R(c,function(m,_){var y=m.linkGroup;y&&!d[_]&&R(y.axesInfo,function(x,S){var b=d[S];if(x!==m&&b){var w=b.value;y.mapper&&(w=m.axis.scale.parse(y.mapper(w,E6(x),E6(m)))),g[m.key]=w}})}),R(g,function(m,_){C6(c[_],m,v,!0,f)}),ZAt(d,c,f),JAt(p,i,e,o),QAt(c,o,n),f}}function C6(e,t,n,r,i){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){n.showPointer(e,t);return}var o=YAt(t,e),s=o.payloadBatch,l=o.snapToValue;s[0]&&i.seriesIndex==null&&ut(i,s[0]),!r&&e.snap&&a.containData(l)&&l!=null&&(t=l),n.showPointer(e,t,s),n.showTooltip(e,o,l)}}function YAt(e,t){var n=t.axis,r=n.dim,i=e,a=[],o=Number.MAX_VALUE,s=-1;return R(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),h,f;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,n);f=d.dataIndices,h=d.nestestValue}else{if(f=l.getData().indicesOfNearest(c[0],e,n.type==="category"?.5:null),!f.length)return;h=l.getData().get(c[0],f[0])}if(!(h==null||!isFinite(h))){var p=e-h,v=Math.abs(p);v<=o&&((v<o||p>=0&&s<0)&&(o=v,s=p,i=h,a.length=0),R(f,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:i}}function qAt(e,t,n,r){e[t.key]={value:n,payloadBatch:r}}function KAt(e,t,n,r){var i=n.payloadBatch,a=t.axis,o=a.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=Sb(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function ZAt(e,t,n){var r=n.axesInfo=[];R(t,function(i,a){var o=i.axisPointerModel.option,s=e[a];s?(!i.useHandle&&(o.status="show"),o.value=s.value,o.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(o.status="hide"),o.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:o.value})})}function JAt(e,t,n,r){if(iM(t)||!e.list.length){r({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function QAt(e,t,n){var r=n.getZr(),i="axisPointerLastHighlights",a=A6(r)[i]||{},o=A6(r)[i]={};R(e,function(u,c){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&R(h.seriesDataIndices,function(f){var d=f.seriesIndex+" | "+f.dataIndex;o[d]=f})});var s=[],l=[];R(a,function(u,c){!o[c]&&l.push(u)}),R(o,function(u,c){!a[c]&&s.push(u)}),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function tCt(e,t){for(var n=0;n<(e||[]).length;n++){var r=e[n];if(t.axis.dim===r.axisDim&&t.axis.model.componentIndex===r.axisIndex)return r}}function E6(e){var t=e.axis.model,n={},r=n.axisDim=e.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=t.componentIndex,n.axisName=n[r+"AxisName"]=t.name,n.axisId=n[r+"AxisId"]=t.id,n}function iM(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function N1(e){Wv.registerAxisPointerClass("CartesianAxisPointer",FAt),e.registerComponentModel(UAt),e.registerComponentView(XAt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var n=t.axisPointer.link;n&&!ht(n)&&(t.axisPointer.link=[n])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,n){t.getComponent("axisPointer").coordSysAxesInfo=fbt(t,n)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},jAt)}function eCt(e){ue(ttt),ue(N1)}var nCt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis;s.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=s.polar,u=l.getOtherAxis(s),c=u.getExtent(),h=s.dataToCoord(r),f=a.get("type");if(f&&f!=="none"){var d=xF(a),p=iCt[f](s,l,h,c);p.style=d,n.graphicKey=p.type,n.pointer=p}var v=a.get(["label","margin"]),g=rCt(r,i,a,l,v);Tet(n,i,a,o,g)},t}(_F);function rCt(e,t,n,r,i){var a=t.axis,o=a.dataToCoord(e),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l=r.getRadiusAxis().getExtent(),u,c,h;if(a.dim==="radius"){var f=_o();Fv(f,f,s),ku(f,f,[r.cx,r.cy]),u=Cl([o,-i],f);var d=t.getModel("axisLabel").get("rotate")||0,p=Ga.innerTextLayout(s,d*Math.PI/180,-1);c=p.textAlign,h=p.textVerticalAlign}else{var v=l[1];u=r.coordToPoint([v+i,o]);var g=r.cx,m=r.cy;c=Math.abs(u[0]-g)/v<.3?"center":u[0]>g?"left":"right",h=Math.abs(u[1]-m)/v<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:c,verticalAlign:h}}var iCt={line:function(e,t,n,r){return e.dim==="angle"?{type:"Line",shape:SF(t.coordToPoint([r[0],n]),t.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,r){var i=Math.max(1,e.getBandWidth()),a=Math.PI/180;return e.dim==="angle"?{type:"Sector",shape:S6(t.cx,t.cy,r[0],r[1],(-n-i/2)*a,(-n+i/2)*a)}:{type:"Sector",shape:S6(t.cx,t.cy,n-i/2,n+i/2,0,Math.PI*2)}}},aCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.findAxisModel=function(n){var r,i=this.ecModel;return i.eachComponent(n,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(Ie),wF=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",ai).models[0]},t.type="polarAxis",t}(Ie);ti(wF,v0);var oCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="angleAxis",t}(wF),sCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="radiusAxis",t}(wF),TF=function(e){it(t,e);function t(n,r){return e.call(this,"radius",n,r)||this}return t.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},t}(Qa);TF.prototype.dataToRadius=Qa.prototype.dataToCoord;TF.prototype.radiusToData=Qa.prototype.coordToData;var lCt=vn(),MF=function(e){it(t,e);function t(n,r){return e.call(this,"angle",n,r||[0,360])||this}return t.prototype.pointToData=function(n,r){return this.polar.pointToData(n,r)[this.dim==="radius"?0:1]},t.prototype.calculateCategoryInterval=function(){var n=this,r=n.getLabelModel(),i=n.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=a[0],l=n.dataToCoord(s+1)-n.dataToCoord(s),u=Math.abs(l),c=v1(s==null?"":s+"",r.getFont(),"center","top"),h=Math.max(c.height,7),f=h/u;isNaN(f)&&(f=1/0);var d=Math.max(0,Math.floor(f)),p=lCt(n.model),v=p.lastAutoInterval,g=p.lastTickCount;return v!=null&&g!=null&&Math.abs(v-d)<=1&&Math.abs(g-o)<=1&&v>d?d=v:(p.lastTickCount=o,p.lastAutoInterval=d),d},t}(Qa);MF.prototype.dataToAngle=Qa.prototype.dataToCoord;MF.prototype.angleToData=Qa.prototype.coordToData;var Iet=["radius","angle"],uCt=function(){function e(t){this.dimensions=Iet,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new TF,this._angleAxis=new MF,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return e.prototype.containPoint=function(t){var n=this.pointToCoord(t);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},e.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},e.prototype.getAxis=function(t){var n="_"+t+"Axis";return this[n]},e.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},e.prototype.getAxesByScale=function(t){var n=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===t&&n.push(r),i.scale.type===t&&n.push(i),n},e.prototype.getAngleAxis=function(){return this._angleAxis},e.prototype.getRadiusAxis=function(){return this._radiusAxis},e.prototype.getOtherAxis=function(t){var n=this._angleAxis;return t===n?this._radiusAxis:n},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},e.prototype.getTooltipAxes=function(t){var n=t!=null&&t!=="auto"?this.getAxis(t):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},e.prototype.dataToPoint=function(t,n){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],n),this._angleAxis.dataToAngle(t[1],n)])},e.prototype.pointToData=function(t,n){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],n),this._angleAxis.angleToData(r[1],n)]},e.prototype.pointToCoord=function(t){var n=t[0]-this.cx,r=t[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),o=Math.min(a[0],a[1]),s=Math.max(a[0],a[1]);i.inverse?o=s-360:s=o+360;var l=Math.sqrt(n*n+r*r);n/=l,r/=l;for(var u=Math.atan2(-r,n)/Math.PI*180,c=u<o?1:-1;u<o||u>s;)u+=c*360;return[l,u]},e.prototype.coordToPoint=function(t){var n=t[0],r=t[1]/180*Math.PI,i=Math.cos(r)*n+this.cx,a=-Math.sin(r)*n+this.cy;return[i,a]},e.prototype.getArea=function(){var t=this.getAngleAxis(),n=this.getRadiusAxis(),r=n.getExtent().slice();r[0]>r[1]&&r.reverse();var i=t.getExtent(),a=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:t.inverse,contain:function(o,s){var l=o-this.cx,u=s-this.cy,c=l*l+u*u-1e-4,h=this.r,f=this.r0;return c<=h*h&&c>=f*f}}},e.prototype.convertToPixel=function(t,n,r){var i=D6(n);return i===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,n,r){var i=D6(n);return i===this?this.pointToData(r):null},e}();function D6(e){var t=e.seriesModel,n=e.polarModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function cCt(e,t,n){var r=t.get("center"),i=n.getWidth(),a=n.getHeight();e.cx=Dt(r[0],i),e.cy=Dt(r[1],a);var o=e.getRadiusAxis(),s=Math.min(i,a)/2,l=t.get("radius");l==null?l=[0,"100%"]:ht(l)||(l=[0,l]);var u=[Dt(l[0],s),Dt(l[1],s)];o.inverse?o.setExtent(u[1],u[0]):o.setExtent(u[0],u[1])}function hCt(e,t){var n=this,r=n.getAngleAxis(),i=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),e.eachSeries(function(s){if(s.coordinateSystem===n){var l=s.getData();R(oA(l,"radius"),function(u){i.scale.unionExtentFromData(l,u)}),R(oA(l,"angle"),function(u){r.scale.unionExtentFromData(l,u)})}}),gv(r.scale,r.model),gv(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function fCt(e){return e.mainType==="angleAxis"}function I6(e,t){var n;if(e.type=t.get("type"),e.scale=M1(t),e.onBand=t.get("boundaryGap")&&e.type==="category",e.inverse=t.get("inverse"),fCt(t)){e.inverse=e.inverse!==t.get("clockwise");var r=t.get("startAngle"),i=(n=t.get("endAngle"))!==null&&n!==void 0?n:r+(e.inverse?-360:360);e.setExtent(r,i)}t.axis=e,e.model=t}var dCt={dimensions:Iet,create:function(e,t){var n=[];return e.eachComponent("polar",function(r,i){var a=new uCt(i+"");a.update=hCt;var o=a.getRadiusAxis(),s=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),u=r.findAxisModel("angleAxis");I6(o,l),I6(s,u),cCt(a,r,t),n.push(a),r.coordinateSystem=a,a.model=r}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",ai).models[0];r.coordinateSystem=i.coordinateSystem}}),n}},pCt=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function vw(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var r=e.coordToPoint([t[0],n]),i=e.coordToPoint([t[1],n]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function gw(e){var t=e.getRadiusAxis();return t.inverse?0:1}function L6(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}var vCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return t.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var i=n.axis,a=i.polar,o=a.getRadiusAxis().getExtent(),s=i.getTicksCoords(),l=i.getMinorTicksCoords(),u=yt(i.getViewLabels(),function(c){c=ce(c);var h=i.scale,f=h.type==="ordinal"?h.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(f),c});L6(u),L6(s),R(pCt,function(c){n.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&gCt[c](this.group,n,a,s,l,o,u)},this)}},t.type="angleAxis",t}(Wv),gCt={axisLine:function(e,t,n,r,i,a){var o=t.getModel(["axisLine","lineStyle"]),s=n.getAngleAxis(),l=Math.PI/180,u=s.getExtent(),c=gw(n),h=c?0:1,f,d=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[h]===0?f=new Uv[d]({shape:{cx:n.cx,cy:n.cy,r:a[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:s.inverse},style:o.getLineStyle(),z2:1,silent:!0}):f=new y1({shape:{cx:n.cx,cy:n.cy,r:a[c],r0:a[h]},style:o.getLineStyle(),z2:1,silent:!0}),f.style.fill=null,e.add(f)},axisTick:function(e,t,n,r,i,a){var o=t.getModel("axisTick"),s=(o.get("inside")?-1:1)*o.get("length"),l=a[gw(n)],u=yt(r,function(c){return new Ei({shape:vw(n,[l,l+s],c.coord)})});e.add(Ps(u,{style:te(o.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(e,t,n,r,i,a){if(i.length){for(var o=t.getModel("axisTick"),s=t.getModel("minorTick"),l=(o.get("inside")?-1:1)*s.get("length"),u=a[gw(n)],c=[],h=0;h<i.length;h++)for(var f=0;f<i[h].length;f++)c.push(new Ei({shape:vw(n,[u,u+l],i[h][f].coord)}));e.add(Ps(c,{style:te(s.getModel("lineStyle").getLineStyle(),te(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(e,t,n,r,i,a,o){var s=t.getCategories(!0),l=t.getModel("axisLabel"),u=l.get("margin"),c=t.get("triggerEvent");R(o,function(h,f){var d=l,p=h.tickValue,v=a[gw(n)],g=n.coordToPoint([v+u,h.coord]),m=n.cx,_=n.cy,y=Math.abs(g[0]-m)/v<.3?"center":g[0]>m?"left":"right",x=Math.abs(g[1]-_)/v<.3?"middle":g[1]>_?"top":"bottom";if(s&&s[p]){var S=s[p];se(S)&&S.textStyle&&(d=new pn(S.textStyle,l,l.ecModel))}var b=new Qe({silent:Ga.isLabelSilent(t),style:Hn(d,{x:g[0],y:g[1],fill:d.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:y,verticalAlign:x})});if(e.add(b),c){var w=Ga.makeAxisEventDataBase(t);w.targetType="axisLabel",w.value=h.rawLabel,fe(b).eventData=w}},this)},splitLine:function(e,t,n,r,i,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=0;h<r.length;h++){var f=u++%l.length;c[f]=c[f]||[],c[f].push(new Ei({shape:vw(n,a,r[h].coord)}))}for(var h=0;h<c.length;h++)e.add(Ps(c[h],{style:te({stroke:l[h%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(e,t,n,r,i,a){if(i.length){for(var o=t.getModel("minorSplitLine"),s=o.getModel("lineStyle"),l=[],u=0;u<i.length;u++)for(var c=0;c<i[u].length;c++)l.push(new Ei({shape:vw(n,a,i[u][c].coord)}));e.add(Ps(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(e,t,n,r,i,a){if(r.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=Math.PI/180,f=-r[0].coord*h,d=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),v=t.get("clockwise"),g=1,m=r.length;g<=m;g++){var _=g===m?r[0].coord:r[g].coord,y=u++%l.length;c[y]=c[y]||[],c[y].push(new Xa({shape:{cx:n.cx,cy:n.cy,r0:d,r:p,startAngle:f,endAngle:-_*h,clockwise:v},silent:!0})),f=-_*h}for(var g=0;g<c.length;g++)e.add(Ps(c[g],{style:te({fill:l[g%l.length]},s.getAreaStyle()),silent:!0}))}}},mCt=["axisLine","axisTickLabel","axisName"],yCt=["splitLine","splitArea","minorSplitLine"],_Ct=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="PolarAxisPointer",n}return t.prototype.render=function(n,r){if(this.group.removeAll(),!!n.get("show")){var i=this._axisGroup,a=this._axisGroup=new he;this.group.add(a);var o=n.axis,s=o.polar,l=s.getAngleAxis(),u=o.getTicksCoords(),c=o.getMinorTicksCoords(),h=l.getExtent()[0],f=o.getExtent(),d=bCt(s,n,h),p=new Ga(n,d);R(mCt,p.add,p),a.add(p.getGroup()),b1(i,a,n),R(yCt,function(v){n.get([v,"show"])&&!o.scale.isBlank()&&xCt[v](this.group,n,s,h,f,u,c)},this)}},t.type="radiusAxis",t}(Wv),xCt={splitLine:function(e,t,n,r,i,a){var o=t.getModel("splitLine"),s=o.getModel("lineStyle"),l=s.get("color"),u=0,c=n.getAngleAxis(),h=Math.PI/180,f=c.getExtent(),d=Math.abs(f[1]-f[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],v=0;v<a.length;v++){var g=u++%l.length;p[g]=p[g]||[],p[g].push(new Uv[d]({shape:{cx:n.cx,cy:n.cy,r:Math.max(a[v].coord,0),startAngle:-f[0]*h,endAngle:-f[1]*h,clockwise:c.inverse}}))}for(var v=0;v<p.length;v++)e.add(Ps(p[v],{style:te({stroke:l[v%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(e,t,n,r,i,a,o){if(o.length){for(var s=t.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],c=0;c<o.length;c++)for(var h=0;h<o[c].length;h++)u.push(new yh({shape:{cx:n.cx,cy:n.cy,r:o[c][h].coord}}));e.add(Ps(u,{style:te({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(e,t,n,r,i,a){if(a.length){var o=t.getModel("splitArea"),s=o.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=a[0].coord,f=1;f<a.length;f++){var d=u++%l.length;c[d]=c[d]||[],c[d].push(new Xa({shape:{cx:n.cx,cy:n.cy,r0:h,r:a[f].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=a[f].coord}for(var f=0;f<c.length;f++)e.add(Ps(c[f],{style:te({fill:l[f%l.length]},s.getAreaStyle()),silent:!0}))}}};function bCt(e,t,n){return{position:[e.cx,e.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:t.getModel("axisLabel").get("rotate"),z2:1}}function Let(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function Pet(e,t){return t.dim+e.model.componentIndex}function SCt(e,t,n){var r={},i=wCt(Gn(t.getSeriesByType(e),function(a){return!t.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));t.eachSeriesByType(e,function(a){if(a.coordinateSystem.type==="polar"){var o=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),u=Pet(s,l),c=Let(a),h=i[u][c],f=h.offset,d=h.width,p=s.getOtherAxis(l),v=a.coordinateSystem.cx,g=a.coordinateSystem.cy,m=a.get("barMinHeight")||0,_=a.get("barMinAngle")||0;r[c]=r[c]||[];for(var y=o.mapDimension(p.dim),x=o.mapDimension(l.dim),S=Jc(o,y),b=l.dim!=="radius"||!a.get("roundCap",!0),w=p.dataToCoord(0),A=0,T=o.count();A<T;A++){var M=o.get(y,A),C=o.get(x,A),E=M>=0?"p":"n",D=w;S&&(r[c][C]||(r[c][C]={p:w,n:w}),D=r[c][C][E]);var I=void 0,L=void 0,P=void 0,B=void 0;if(p.dim==="radius"){var N=p.dataToCoord(M)-w,k=l.dataToCoord(C);Math.abs(N)<m&&(N=(N<0?-1:1)*m),I=D,L=D+N,P=k-f,B=P-d,S&&(r[c][C][E]=L)}else{var U=p.dataToCoord(M,b)-w,Z=l.dataToCoord(C);Math.abs(U)<_&&(U=(U<0?-1:1)*_),I=Z+f,L=I+d,P=D,B=D+U,S&&(r[c][C][E]=B)}o.setItemLayout(A,{cx:v,cy:g,r0:I,r:L,startAngle:-P*Math.PI/180,endAngle:-B*Math.PI/180,clockwise:P>=B})}}})}function wCt(e){var t={};R(e,function(r,i){var a=r.getData(),o=r.coordinateSystem,s=o.getBaseAxis(),l=Pet(o,s),u=s.getExtent(),c=s.type==="category"?s.getBandWidth():Math.abs(u[1]-u[0])/a.count(),h=t[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},f=h.stacks;t[l]=h;var d=Let(r);f[d]||h.autoWidthCount++,f[d]=f[d]||{width:0,maxWidth:0};var p=Dt(r.get("barWidth"),c),v=Dt(r.get("barMaxWidth"),c),g=r.get("barGap"),m=r.get("barCategoryGap");p&&!f[d].width&&(p=Math.min(h.remainedWidth,p),f[d].width=p,h.remainedWidth-=p),v&&(f[d].maxWidth=v),g!=null&&(h.gap=g),m!=null&&(h.categoryGap=m)});var n={};return R(t,function(r,i){n[i]={};var a=r.stacks,o=r.bandWidth,s=Dt(r.categoryGap,o),l=Dt(r.gap,1),u=r.remainedWidth,c=r.autoWidthCount,h=(u-s)/(c+(c-1)*l);h=Math.max(h,0),R(a,function(v,g){var m=v.maxWidth;m&&m<h&&(m=Math.min(m,u),v.width&&(m=Math.min(m,v.width)),u-=m,v.width=m,c--)}),h=(u-s)/(c+(c-1)*l),h=Math.max(h,0);var f=0,d;R(a,function(v,g){v.width||(v.width=h),d=v,f+=v.width*(1+l)}),d&&(f-=d.width*l);var p=-f/2;R(a,function(v,g){n[i][g]=n[i][g]||{offset:p,width:v.width},p+=v.width*(1+l)})}),n}var TCt={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},MCt={splitNumber:5},ACt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="polar",t}(Zn);function CCt(e){ue(N1),Wv.registerAxisPointerClass("PolarAxisPointer",nCt),e.registerCoordinateSystem("polar",dCt),e.registerComponentModel(aCt),e.registerComponentView(ACt),fy(e,"angle",oCt,TCt),fy(e,"radius",sCt,MCt),e.registerComponentView(vCt),e.registerComponentView(_Ct),e.registerLayout(_e(SCt,"bar"))}function wN(e,t){t=t||{};var n=e.coordinateSystem,r=e.axis,i={},a=r.position,o=r.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[o==="vertical"?u.vertical[a]:l[0],o==="horizontal"?u.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};i.rotation=Math.PI/2*c[o];var h={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=h[a],e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Qi(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var f=t.rotate;return f==null&&(f=e.get(["axisLabel","rotate"])),i.labelRotation=a==="top"?-f:f,i.z2=1,i}var ECt=["axisLine","axisTickLabel","axisName"],DCt=["splitArea","splitLine"],ICt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.axisPointerClass="SingleAxisPointer",n}return t.prototype.render=function(n,r,i,a){var o=this.group;o.removeAll();var s=this._axisGroup;this._axisGroup=new he;var l=wN(n),u=new Ga(n,l);R(ECt,u.add,u),o.add(this._axisGroup),o.add(u.getGroup()),R(DCt,function(c){n.get([c,"show"])&&LCt[c](this,this.group,this._axisGroup,n)},this),b1(s,this._axisGroup,n),e.prototype.render.call(this,n,r,i,a)},t.prototype.remove=function(){ZQ(this)},t.type="singleAxis",t}(Wv),LCt={splitLine:function(e,t,n,r){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),o=a.getModel("lineStyle"),s=o.get("color");s=s instanceof Array?s:[s];for(var l=o.get("width"),u=r.coordinateSystem.getRect(),c=i.isHorizontal(),h=[],f=0,d=i.getTicksCoords({tickModel:a}),p=[],v=[],g=0;g<d.length;++g){var m=i.toGlobalCoord(d[g].coord);c?(p[0]=m,p[1]=u.y,v[0]=m,v[1]=u.y+u.height):(p[0]=u.x,p[1]=m,v[0]=u.x+u.width,v[1]=m);var _=new Ei({shape:{x1:p[0],y1:p[1],x2:v[0],y2:v[1]},silent:!0});ly(_.shape,l);var y=f++%s.length;h[y]=h[y]||[],h[y].push(_)}for(var x=o.getLineStyle(["color"]),g=0;g<h.length;++g)t.add(Ps(h[g],{style:te({stroke:s[g%s.length]},x),silent:!0}))}},splitArea:function(e,t,n,r){KQ(e,n,r,r)}},aM=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(Ie);ti(aM,v0.prototype);var PCt=function(e){it(t,e);function t(n,r,i,a,o){var s=e.call(this,n,r,i)||this;return s.type=a||"value",s.position=o||"bottom",s}return t.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},t.prototype.pointToData=function(n,r){return this.coordinateSystem.pointToData(n)[0]},t}(Qa),Ret=["single"],RCt=function(){function e(t,n,r){this.type="single",this.dimension="single",this.dimensions=Ret,this.axisPointerEnabled=!0,this.model=t,this._init(t,n,r)}return e.prototype._init=function(t,n,r){var i=this.dimension,a=new PCt(i,M1(t),[0,0],t.get("type"),t.get("position")),o=a.type==="category";a.onBand=o&&t.get("boundaryGap"),a.inverse=t.get("inverse"),a.orient=t.get("orient"),t.axis=a,a.model=t,a.coordinateSystem=this,this._axis=a},e.prototype.update=function(t,n){t.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();R(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),gv(this._axis.scale,this._axis.model)}},this)},e.prototype.resize=function(t,n){this._rect=Gr({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},e.prototype.getRect=function(){return this._rect},e.prototype._adjustAxis=function(){var t=this._rect,n=this._axis,r=n.isHorizontal(),i=r?[0,t.width]:[0,t.height],a=n.inverse?1:0;n.setExtent(i[a],i[1-a]),this._updateAxisTransform(n,r?t.x:t.y)},e.prototype._updateAxisTransform=function(t,n){var r=t.getExtent(),i=r[0]+r[1],a=t.isHorizontal();t.toGlobalCoord=a?function(o){return o+n}:function(o){return i-o+n},t.toLocalCoord=a?function(o){return o-n}:function(o){return i-o+n}},e.prototype.getAxis=function(){return this._axis},e.prototype.getBaseAxis=function(){return this._axis},e.prototype.getAxes=function(){return[this._axis]},e.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},e.prototype.containPoint=function(t){var n=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(t[0]))&&t[1]>=n.y&&t[1]<=n.y+n.height:r.contain(r.toLocalCoord(t[1]))&&t[0]>=n.y&&t[0]<=n.y+n.height},e.prototype.pointToData=function(t){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(t[n.orient==="horizontal"?0:1]))]},e.prototype.dataToPoint=function(t){var n=this.getAxis(),r=this.getRect(),i=[],a=n.orient==="horizontal"?0:1;return t instanceof Array&&(t=t[0]),i[a]=n.toGlobalCoord(n.dataToCoord(+t)),i[1-a]=a===0?r.y+r.height/2:r.x+r.width/2,i},e.prototype.convertToPixel=function(t,n,r){var i=P6(n);return i===this?this.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,n,r){var i=P6(n);return i===this?this.pointToData(r):null},e}();function P6(e){var t=e.seriesModel,n=e.singleAxisModel;return n&&n.coordinateSystem||t&&t.coordinateSystem}function OCt(e,t){var n=[];return e.eachComponent("singleAxis",function(r,i){var a=new RCt(r,e,t);a.name="single_"+i,a.resize(r,t),r.coordinateSystem=a,n.push(a)}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",ai).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),n}var NCt={create:OCt,dimensions:Ret},R6=["x","y"],BCt=["width","height"],kCt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(n,r,i,a,o){var s=i.axis,l=s.coordinateSystem,u=JI(l,1-xA(s)),c=l.dataToPoint(r)[0],h=a.get("type");if(h&&h!=="none"){var f=xF(a),d=FCt[h](s,c,u);d.style=f,n.graphicKey=d.type,n.pointer=d}var p=wN(i);Aet(r,n,p,i,a,o)},t.prototype.getHandleTransform=function(n,r,i){var a=wN(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var o=bF(r.axis,n,a);return{x:o[0],y:o[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(n,r,i,a){var o=i.axis,s=o.coordinateSystem,l=xA(o),u=JI(s,l),c=[n.x,n.y];c[l]+=r[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var h=JI(s,1-l),f=(h[1]+h[0])/2,d=[f,f];return d[l]=c[l],{x:c[0],y:c[1],rotation:n.rotation,cursorPoint:d,tooltipOption:{verticalAlign:"middle"}}},t}(_F),FCt={line:function(e,t,n){var r=SF([t,n[0]],[t,n[1]],xA(e));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(e,t,n){var r=e.getBandWidth(),i=n[1]-n[0];return{type:"Rect",shape:Cet([t-r/2,n[0]],[r,i],xA(e))}}};function xA(e){return e.isHorizontal()?0:1}function JI(e,t){var n=e.getRect();return[n[R6[t]],n[R6[t]]+n[BCt[t]]]}var zCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="single",t}(Zn);function UCt(e){ue(N1),Wv.registerAxisPointerClass("SingleAxisPointer",kCt),e.registerComponentView(zCt),e.registerComponentView(ICt),e.registerComponentModel(aM),fy(e,"single",aM,aM.defaultOption),e.registerCoordinateSystem("single",NCt)}var VCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r,i){var a=l0(n);e.prototype.init.apply(this,arguments),O6(n,a)},t.prototype.mergeOption=function(n){e.prototype.mergeOption.apply(this,arguments),O6(this.option,n)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(Ie);function O6(e,t){var n=e.cellSize,r;ht(n)?r=n:r=e.cellSize=[n,n],r.length===1&&(r[1]=r[0]);var i=yt([0,1],function(a){return mgt(t,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});Vf(e,t,{type:"box",ignoreSize:i})}var GCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){var a=this.group;a.removeAll();var o=n.coordinateSystem,s=o.getRangeInfo(),l=o.getOrient(),u=r.getLocaleModel();this._renderDayRect(n,s,a),this._renderLines(n,s,l,a),this._renderYearText(n,s,l,a),this._renderMonthText(n,u,l,a),this._renderWeekText(n,u,s,l,a)},t.prototype._renderDayRect=function(n,r,i){for(var a=n.coordinateSystem,o=n.getModel("itemStyle").getItemStyle(),s=a.getCellWidth(),l=a.getCellHeight(),u=r.start.time;u<=r.end.time;u=a.getNextNDay(u,1).time){var c=a.dataToRect([u],!1).tl,h=new nn({shape:{x:c[0],y:c[1],width:s,height:l},cursor:"default",style:o});i.add(h)}},t.prototype._renderLines=function(n,r,i,a){var o=this,s=n.coordinateSystem,l=n.getModel(["splitLine","lineStyle"]).getLineStyle(),u=n.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,f=0;h.time<=r.end.time;f++){p(h.formatedDate),f===0&&(h=s.getDateInfo(r.start.y+"-"+r.start.m));var d=h.date;d.setMonth(d.getMonth()+1),h=s.getDateInfo(d)}p(s.getNextNDay(r.end.time,1).formatedDate);function p(v){o._firstDayOfMonth.push(s.getDateInfo(v)),o._firstDayPoints.push(s.dataToRect([v],!1).tl);var g=o._getLinePointsOfOneWeek(n,v,i);o._tlpoints.push(g[0]),o._blpoints.push(g[g.length-1]),u&&o._drawSplitline(g,l,a)}u&&this._drawSplitline(o._getEdgesPoints(o._tlpoints,c,i),l,a),u&&this._drawSplitline(o._getEdgesPoints(o._blpoints,c,i),l,a)},t.prototype._getEdgesPoints=function(n,r,i){var a=[n[0].slice(),n[n.length-1].slice()],o=i==="horizontal"?0:1;return a[0][o]=a[0][o]-r/2,a[1][o]=a[1][o]+r/2,a},t.prototype._drawSplitline=function(n,r,i){var a=new Ja({z2:20,shape:{points:n},style:r});i.add(a)},t.prototype._getLinePointsOfOneWeek=function(n,r,i){for(var a=n.coordinateSystem,o=a.getDateInfo(r),s=[],l=0;l<7;l++){var u=a.getNextNDay(o.time,l),c=a.dataToRect([u.time],!1);s[2*u.day]=c.tl,s[2*u.day+1]=c[i==="horizontal"?"bl":"tr"]}return s},t.prototype._formatterLabel=function(n,r){return Ft(n)&&n?pgt(n,r):ae(n)?n(r):r.nameMap},t.prototype._yearTextPositionControl=function(n,r,i,a,o){var s=r[0],l=r[1],u=["center","bottom"];a==="bottom"?(l+=o,u=["center","top"]):a==="left"?s-=o:a==="right"?(s+=o,u=["center","top"]):l-=o;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:s,y:l,style:{align:u[0],verticalAlign:u[1]}}},t.prototype._renderYearText=function(n,r,i,a){var o=n.getModel("yearLabel");if(o.get("show")){var s=o.get("margin"),l=o.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,f=i==="horizontal"?0:1,d={top:[c,u[f][1]],bottom:[c,u[1-f][1]],left:[u[1-f][0],h],right:[u[f][0],h]},p=r.start.y;+r.end.y>+r.start.y&&(p=p+"-"+r.end.y);var v=o.get("formatter"),g={start:r.start.y,end:r.end.y,nameMap:p},m=this._formatterLabel(v,g),_=new Qe({z2:30,style:Hn(o,{text:m})});_.attr(this._yearTextPositionControl(_,d[l],i,l,s)),a.add(_)}},t.prototype._monthTextPositionControl=function(n,r,i,a,o){var s="left",l="top",u=n[0],c=n[1];return i==="horizontal"?(c=c+o,r&&(s="center"),a==="start"&&(l="bottom")):(u=u+o,r&&(l="middle"),a==="start"&&(s="right")),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderMonthText=function(n,r,i,a){var o=n.getModel("monthLabel");if(o.get("show")){var s=o.get("nameMap"),l=o.get("margin"),u=o.get("position"),c=o.get("align"),h=[this._tlpoints,this._blpoints];(!s||Ft(s))&&(s&&(r=IO(s)||r),s=r.get(["time","monthAbbr"])||[]);var f=u==="start"?0:1,d=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",v=0;v<h[f].length-1;v++){var g=h[f][v].slice(),m=this._firstDayOfMonth[v];if(p){var _=this._firstDayPoints[v];g[d]=(_[d]+h[0][v+1][d])/2}var y=o.get("formatter"),x=s[+m.m-1],S={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:x},b=this._formatterLabel(y,S),w=new Qe({z2:30,style:ut(Hn(o,{text:b}),this._monthTextPositionControl(g,p,i,u,l))});a.add(w)}}},t.prototype._weekTextPositionControl=function(n,r,i,a,o){var s="center",l="middle",u=n[0],c=n[1],h=i==="start";return r==="horizontal"?(u=u+a+(h?1:-1)*o[0]/2,s=h?"right":"left"):(c=c+a+(h?1:-1)*o[1]/2,l=h?"bottom":"top"),{x:u,y:c,align:s,verticalAlign:l}},t.prototype._renderWeekText=function(n,r,i,a,o){var s=n.getModel("dayLabel");if(s.get("show")){var l=n.coordinateSystem,u=s.get("position"),c=s.get("nameMap"),h=s.get("margin"),f=l.getFirstDayOfWeek();if(!c||Ft(c)){c&&(r=IO(c)||r);var d=r.get(["time","dayOfWeekShort"]);c=d||yt(r.get(["time","dayOfWeekAbbr"]),function(S){return S[0]})}var p=l.getNextNDay(i.end.time,7-i.lweek).time,v=[l.getCellWidth(),l.getCellHeight()];h=Dt(h,Math.min(v[1],v[0])),u==="start"&&(p=l.getNextNDay(i.start.time,-(7+i.fweek)).time,h=-h);for(var g=0;g<7;g++){var m=l.getNextNDay(p,g),_=l.dataToRect([m.time],!1).center,y=g;y=Math.abs((g+f)%7);var x=new Qe({z2:30,style:ut(Hn(s,{text:c[y]}),this._weekTextPositionControl(_,a,u,h,v))});o.add(x)}}},t.type="calendar",t}(Zn),QI=864e5,HCt=function(){function e(t,n,r){this.type="calendar",this.dimensions=e.dimensions,this.getDimensionsInfo=e.getDimensionsInfo,this._model=t}return e.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},e.prototype.getRangeInfo=function(){return this._rangeInfo},e.prototype.getModel=function(){return this._model},e.prototype.getRect=function(){return this._rect},e.prototype.getCellWidth=function(){return this._sw},e.prototype.getCellHeight=function(){return this._sh},e.prototype.getOrient=function(){return this._orient},e.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},e.prototype.getDateInfo=function(t){t=Vs(t);var n=t.getFullYear(),r=t.getMonth()+1,i=r<10?"0"+r:""+r,a=t.getDate(),o=a<10?"0"+a:""+a,s=t.getDay();return s=Math.abs((s+7-this.getFirstDayOfWeek())%7),{y:n+"",m:i,d:o,day:s,time:t.getTime(),formatedDate:n+"-"+i+"-"+o,date:t}},e.prototype.getNextNDay=function(t,n){return n=n||0,n===0?this.getDateInfo(t):(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+n),this.getDateInfo(t))},e.prototype.update=function(t,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),s=this._orient==="horizontal"?[r,7]:[7,r];R([0,1],function(h){c(a,h)&&(o[i[h]]=a[h]*s[h])});var l={width:n.getWidth(),height:n.getHeight()},u=this._rect=Gr(o,l);R([0,1],function(h){c(a,h)||(a[h]=u[i[h]]/s[h])});function c(h,f){return h[f]!=null&&h[f]!=="auto"}this._sw=a[0],this._sh=a[1]},e.prototype.dataToPoint=function(t,n){ht(t)&&(t=t[0]),n==null&&(n=!0);var r=this.getDateInfo(t),i=this._rangeInfo,a=r.formatedDate;if(n&&!(r.time>=i.start.time&&r.time<i.end.time+QI))return[NaN,NaN];var o=r.day,s=this._getRangeInfo([i.start.time,a]).nthWeek;return this._orient==="vertical"?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]:[this._rect.x+s*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},e.prototype.pointToData=function(t){var n=this.pointToDate(t);return n&&n.time},e.prototype.dataToRect=function(t,n){var r=this.dataToPoint(t,n);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},e.prototype.pointToDate=function(t){var n=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,n-1,i):this._getDateByWeeksAndDay(n,r-1,i)},e.prototype.convertToPixel=function(t,n,r){var i=N6(n);return i===this?i.dataToPoint(r):null},e.prototype.convertFromPixel=function(t,n,r){var i=N6(n);return i===this?i.pointToData(r):null},e.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},e.prototype._initRangeOption=function(){var t=this._model.get("range"),n;if(ht(t)&&t.length===1&&(t=t[0]),ht(t))n=t;else{var r=t.toString();if(/^\d{4}$/.test(r)&&(n=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var o=this.getNextNDay(a,-1);n=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(n=[r,r])}if(!n)return t;var s=this._getRangeInfo(n);return s.start.time>s.end.time&&n.reverse(),n},e.prototype._getRangeInfo=function(t){var n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])],r;n[0].time>n[1].time&&(r=!0,n.reverse());var i=Math.floor(n[1].time/QI)-Math.floor(n[0].time/QI)+1,a=new Date(n[0].time),o=a.getDate(),s=n[1].date.getDate();a.setDate(o+i-1);var l=a.getDate();if(l!==s)for(var u=a.getTime()-n[1].time>0?1:-1;(l=a.getDate())!==s&&(a.getTime()-n[1].time)*u>0;)i-=u,a.setDate(l-u);var c=Math.floor((i+n[0].day+6)/7),h=r?-c+1:c-1;return r&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:c,nthWeek:h,fweek:n[0].day,lweek:n[1].day}},e.prototype._getDateByWeeksAndDay=function(t,n,r){var i=this._getRangeInfo(r);if(t>i.weeks||t===0&&n<i.fweek||t===i.weeks&&n>i.lweek)return null;var a=(t-1)*7-i.fweek+n,o=new Date(i.start.time);return o.setDate(+i.start.d+a),this.getDateInfo(o)},e.create=function(t,n){var r=[];return t.eachComponent("calendar",function(i){var a=new e(i);r.push(a),i.coordinateSystem=a}),t.eachSeries(function(i){i.get("coordinateSystem")==="calendar"&&(i.coordinateSystem=r[i.get("calendarIndex")||0])}),r},e.dimensions=["time","value"],e}();function N6(e){var t=e.calendarModel,n=e.seriesModel,r=t?t.coordinateSystem:n?n.coordinateSystem:null;return r}function WCt(e){e.registerComponentModel(VCt),e.registerComponentView(GCt),e.registerCoordinateSystem("calendar",HCt)}function $Ct(e,t){var n=e.existing;if(t.id=e.keyInfo.id,!t.type&&n&&(t.type=n.type),t.parentId==null){var r=t.parentOption;r?t.parentId=r.id:n&&(t.parentId=n.parentId)}t.parentOption=null}function B6(e,t){var n;return R(t,function(r){e[r]!=null&&e[r]!=="auto"&&(n=!0)}),n}function XCt(e,t,n){var r=ut({},n),i=e[t],a=n.$action||"merge";a==="merge"?i?(Xt(i,r,!0),Vf(i,r,{ignoreSize:!0}),bZ(n,i),mw(n,i),mw(n,i,"shape"),mw(n,i,"style"),mw(n,i,"extra"),n.clipPath=i.clipPath):e[t]=r:a==="replace"?e[t]=r:a==="remove"&&i&&(e[t]=null)}var Oet=["transition","enterFrom","leaveTo"],jCt=Oet.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function mw(e,t,n){if(n&&(!e[n]&&t[n]&&(e[n]={}),e=e[n],t=t[n]),!(!e||!t))for(var r=n?Oet:jCt,i=0;i<r.length;i++){var a=r[i];e[a]==null&&t[a]!=null&&(e[a]=t[a])}}function YCt(e,t){if(e&&(e.hv=t.hv=[B6(t,["left","right"]),B6(t,["top","bottom"])],e.type==="group")){var n=e,r=t;n.width==null&&(n.width=r.width=0),n.height==null&&(n.height=r.height=0)}}var qCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.preventAutoZ=!0,n}return t.prototype.mergeOption=function(n,r){var i=this.option.elements;this.option.elements=null,e.prototype.mergeOption.call(this,n,r),this.option.elements=i},t.prototype.optionUpdated=function(n,r){var i=this.option,a=(r?i:n).elements,o=i.elements=r?[]:i.elements,s=[];this._flatten(a,s,null);var l=yK(o,s,"normalMerge"),u=this._elOptionsToUpdate=[];R(l,function(c,h){var f=c.newOption;f&&(u.push(f),$Ct(c,f),XCt(o,h,f),YCt(o[h],f))},this),i.elements=Gn(o,function(c){return c&&delete c.$action,c!=null})},t.prototype._flatten=function(n,r,i){R(n,function(a){if(a){i&&(a.parentOption=i),r.push(a);var o=a.children;o&&o.length&&this._flatten(o,r,a),delete a.children}},this)},t.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},t.type="graphic",t.defaultOption={elements:[]},t}(Ie),k6={path:null,compoundPath:null,group:he,image:Wi,text:Qe},_s=vn(),KCt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this._elMap=jt()},t.prototype.render=function(n,r,i){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,i)},t.prototype._updateElements=function(n){var r=n.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,o=n.get("z"),s=n.get("zlevel");R(r,function(l){var u=pi(l.id,null),c=u!=null?i.get(u):null,h=pi(l.parentId,null),f=h!=null?i.get(h):a,d=l.type,p=l.style;d==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var v=l.textContent,g=l.textConfig;if(p&&det(p,d,!!g,!!v)){var m=pet(p,d,!0);!g&&m.textConfig&&(g=l.textConfig=m.textConfig),!v&&m.textContent&&(v=m.textContent)}var _=ZCt(l),y=l.$action||"merge",x=y==="merge",S=y==="replace";if(x){var b=!c,w=c;b?w=F6(u,f,l.type,i):(w&&(_s(w).isNew=!1),yet(w)),w&&(rM(w,_,n,{isInit:b}),z6(w,l,o,s))}else if(S){oM(c,l,i,n);var A=F6(u,f,l.type,i);A&&(rM(A,_,n,{isInit:!0}),z6(A,l,o,s))}else y==="remove"&&(get(c,l),oM(c,l,i,n));var T=i.get(u);if(T&&v)if(x){var M=T.getTextContent();M?M.attr(v):T.setTextContent(new Qe(v))}else S&&T.setTextContent(new Qe(v));if(T){var C=l.clipPath;if(C){var E=C.type,D=void 0,b=!1;if(x){var I=T.getClipPath();b=!I||_s(I).type!==E,D=b?TN(E):I}else S&&(b=!0,D=TN(E));T.setClipPath(D),rM(D,C,n,{isInit:b}),yA(D,C.keyframeAnimation,n)}var L=_s(T);T.setTextConfig(g),L.option=l,JCt(T,n,l),i0({el:T,componentModel:n,itemName:T.name,itemTooltipOption:l.tooltip}),yA(T,l.keyframeAnimation,n)}})}},t.prototype._relocate=function(n,r){for(var i=n.option.elements,a=this.group,o=this._elMap,s=r.getWidth(),l=r.getHeight(),u=["x","y"],c=0;c<i.length;c++){var h=i[c],f=pi(h.id,null),d=f!=null?o.get(f):null;if(!(!d||!d.isGroup)){var p=d.parent,v=p===a,g=_s(d),m=_s(p);g.width=Dt(g.option.width,v?s:m.width)||0,g.height=Dt(g.option.height,v?l:m.height)||0}}for(var c=i.length-1;c>=0;c--){var h=i[c],f=pi(h.id,null),d=f!=null?o.get(f):null;if(d){var p=d.parent,m=_s(p),_=p===a?{width:s,height:l}:{width:m.width,height:m.height},y={},x=_E(d,h,_,null,{hv:h.hv,boundingMode:h.bounding},y);if(!_s(d).isNew&&x){for(var S=h.transition,b={},w=0;w<u.length;w++){var A=u[w],T=y[A];S&&(rv(S)||Le(S,A)>=0)?b[A]=T:d[A]=T}Tn(d,b,n,0)}else d.attr(y)}}},t.prototype._clear=function(){var n=this,r=this._elMap;r.each(function(i){oM(i,_s(i).option,r,n._lastGraphicModel)}),this._elMap=jt()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(Zn);function TN(e){var t=$t(k6,e)?k6[e]:qB(e),n=new t({});return _s(n).type=e,n}function F6(e,t,n,r){var i=TN(n);return t.add(i),r.set(e,i),_s(i).id=e,_s(i).isNew=!0,i}function oM(e,t,n,r){var i=e&&e.parent;i&&(e.type==="group"&&e.traverse(function(a){oM(a,t,n,r)}),OE(e,t,r),n.removeKey(_s(e).id))}function z6(e,t,n,r){e.isGroup||R([["cursor",Gs.prototype.cursor],["zlevel",r||0],["z",n||0],["z2",0]],function(i){var a=i[0];$t(t,a)?e[a]=xe(t[a],i[1]):e[a]==null&&(e[a]=i[1])}),R(Je(t),function(i){if(i.indexOf("on")===0){var a=t[i];e[i]=ae(a)?a:null}}),$t(t,"draggable")&&(e.draggable=t.draggable),t.name!=null&&(e.name=t.name),t.id!=null&&(e.id=t.id)}function ZCt(e){return e=ut({},e),R(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(xZ),function(t){delete e[t]}),e}function JCt(e,t,n){var r=fe(e).eventData;!e.silent&&!e.ignore&&!r&&(r=fe(e).eventData={componentType:"graphic",componentIndex:t.componentIndex,name:e.name}),r&&(r.info=n.info)}function QCt(e){e.registerComponentModel(qCt),e.registerComponentView(KCt),e.registerPreprocessor(function(t){var n=t.graphic;ht(n)?!n[0]||!n[0].elements?t.graphic=[{elements:n}]:t.graphic=[t.graphic[0]]:n&&!n.elements&&(t.graphic=[{elements:[n]}])})}var U6=["x","y","radius","angle","single"],tEt=["cartesian2d","polar","singleAxis"];function eEt(e){var t=e.get("coordinateSystem");return Le(tEt,t)>=0}function Tf(e){return e+"Axis"}function nEt(e,t){var n=jt(),r=[],i=jt();e.eachComponent({mainType:"dataZoom",query:t},function(c){i.get(c.uid)||s(c)});var a;do a=!1,e.eachComponent("dataZoom",o);while(a);function o(c){!i.get(c.uid)&&l(c)&&(s(c),a=!0)}function s(c){i.set(c.uid,!0),r.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(f,d){var p=n.get(f);p&&p[d]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,f){(n.get(h)||n.set(h,[]))[f]=!0})}return r}function Net(e){var t=e.ecModel,n={infoList:[],infoMap:jt()};return e.eachTargetAxis(function(r,i){var a=t.getComponent(Tf(r),i);if(a){var o=a.getCoordSysModel();if(o){var s=o.uid,l=n.infoMap.get(s);l||(l={model:o,axisModels:[]},n.infoList.push(l),n.infoMap.set(s,l)),l.axisModels.push(a)}}}),n}var tL=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},e}(),Eb=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return t.prototype.init=function(n,r,i){var a=V6(n);this.settledOption=a,this.mergeDefaultAndTheme(n,i),this._doInit(a)},t.prototype.mergeOption=function(n){var r=V6(n);Xt(this.option,n,!0),Xt(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(n){var r=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var i=this.settledOption;R([["start","startValue"],["end","endValue"]],function(a,o){this._rangePropMode[o]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var n=this.get("orient",!0),r=this._targetAxisInfoMap=jt(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(n){var r=!1;return R(U6,function(i){var a=this.getReferringComponents(Tf(i),rpt);if(a.specified){r=!0;var o=new tL;R(a.models,function(s){o.add(s.componentIndex)}),n.set(i,o)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(n,r){var i=this.ecModel,a=!0;if(a){var o=r==="vertical"?"y":"x",s=i.findComponents({mainType:o+"Axis"});l(s,o)}if(a){var s=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(s,"single")}function l(u,c){var h=u[0];if(h){var f=new tL;if(f.add(h.componentIndex),n.set(c,f),a=!1,c==="x"||c==="y"){var d=h.getReferringComponents("grid",ai).models[0];d&&R(u,function(p){h.componentIndex!==p.componentIndex&&d===p.getReferringComponents("grid",ai).models[0]&&f.add(p.componentIndex)})}}}a&&R(U6,function(u){if(a){var c=i.findComponents({mainType:Tf(u),filter:function(f){return f.get("type",!0)==="category"}});if(c[0]){var h=new tL;h.add(c[0].componentIndex),n.set(u,h),a=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(r){!n&&(n=r)},this),n==="y"?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(n){var r=this._rangePropMode,i=this.get("rangeMode");R([["start","startValue"],["end","endValue"]],function(a,o){var s=n[a[0]]!=null,l=n[a[1]]!=null;s&&!l?r[o]="percent":!s&&l?r[o]="value":i?r[o]=i[o]:s&&(r[o]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(r,i){n==null&&(n=this.ecModel.getComponent(Tf(r),i))},this),n},t.prototype.eachTargetAxis=function(n,r){this._targetAxisInfoMap.each(function(i,a){R(i.indexList,function(o){n.call(r,a,o)})})},t.prototype.getAxisProxy=function(n,r){var i=this.getAxisModel(n,r);if(i)return i.__dzAxisProxy},t.prototype.getAxisModel=function(n,r){var i=this._targetAxisInfoMap.get(n);if(i&&i.indexMap[r])return this.ecModel.getComponent(Tf(n),r)},t.prototype.setRawRange=function(n){var r=this.option,i=this.settledOption;R([["start","startValue"],["end","endValue"]],function(a){(n[a[0]]!=null||n[a[1]]!=null)&&(r[a[0]]=i[a[0]]=n[a[0]],r[a[1]]=i[a[1]]=n[a[1]])},this),this._updateRangeUse(n)},t.prototype.setCalculatedRange=function(n){var r=this.option;R(["start","startValue","end","endValue"],function(i){r[i]=n[i]})},t.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},t.prototype.getValueRange=function(n,r){if(n==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(n,r).getDataValueWindow()},t.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var o=i[a],s=this._targetAxisInfoMap.get(o),l=0;l<s.indexList.length;l++){var u=this.getAxisProxy(o,s.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(Ie);function V6(e){var t={};return R(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var rEt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(Eb),AF=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i,a){this.dataZoomModel=n,this.ecModel=r,this.api=i},t.type="dataZoom",t}(Zn),iEt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.select",t}(AF),im=R,G6=Ns,aEt=function(){function e(t,n,r,i){this._dimName=t,this._axisIndex=n,this.ecModel=i,this._dataZoomModel=r}return e.prototype.hostedBy=function(t){return this._dataZoomModel===t},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(n){if(eEt(n)){var r=Tf(this._dimName),i=n.getReferringComponents(r,ai).models[0];i&&this._axisIndex===i.componentIndex&&t.push(n)}},this),t},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return ce(this._minMaxSpan)},e.prototype.calculateDataWindow=function(t){var n=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),o=[0,100],s=[],l=[],u;im(["start","end"],function(f,d){var p=t[f],v=t[f+"Value"];a[d]==="percent"?(p==null&&(p=o[d]),v=i.parse(Cn(p,o,n))):(u=!0,v=v==null?n[d]:i.parse(v),p=Cn(v,n,o)),l[d]=v==null||isNaN(v)?n[d]:v,s[d]=p==null||isNaN(p)?o[d]:p}),G6(l),G6(s);var c=this._minMaxSpan;u?h(l,s,n,o,!1):h(s,l,o,n,!0);function h(f,d,p,v,g){var m=g?"Span":"ValueSpan";$v(0,f,p,"all",c["min"+m],c["max"+m]);for(var _=0;_<2;_++)d[_]=Cn(f[_],p,v,!0),g&&(d[_]=i.parse(d[_]))}return{valueWindow:l,percentWindow:s}},e.prototype.reset=function(t){if(t===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=oEt(this,this._dimName,n),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(t,n){if(t!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=t.get("filterMode"),o=this._valueWindow;if(a==="none")return;im(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var h=u.getStore(),f=yt(c,function(d){return u.getDimensionIndex(d)},u);u.filterSelf(function(d){for(var p,v,g,m=0;m<c.length;m++){var _=h.get(f[m],d),y=!isNaN(_),x=_<o[0],S=_>o[1];if(y&&!x&&!S)return!0;y&&(g=!0),x&&(p=!0),S&&(v=!0)}return g&&p&&v})}else im(c,function(d){if(a==="empty")l.setData(u=u.map(d,function(v){return s(v)?v:NaN}));else{var p={};p[d]=o,u.selectRange(p)}});im(c,function(d){u.setApproximateExtent(o,d)})}});function s(l){return l>=o[0]&&l<=o[1]}},e.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},n=this._dataZoomModel,r=this._dataExtent;im(["min","max"],function(i){var a=n.get(i+"Span"),o=n.get(i+"ValueSpan");o!=null&&(o=this.getAxisModel().axis.scale.parse(o)),o!=null?a=Cn(r[0]+o,r,[0,100],!0):a!=null&&(o=Cn(a,[0,100],r,!0)-r[0]),t[i+"Span"]=a,t[i+"ValueSpan"]=o},this)},e.prototype._setAxisModel=function(){var t=this.getAxisModel(),n=this._percentWindow,r=this._valueWindow;if(n){var i=cK(r,[0,500]);i=Math.min(i,20);var a=t.axis.scale.rawExtentInfo;n[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),n[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},e}();function oEt(e,t,n){var r=[1/0,-1/0];im(n,function(o){H0t(r,o.getData(),t)});var i=e.getAxisModel(),a=KJ(i.axis.scale,i,r).calculate();return[a.min,a.max]}var sEt={getTargetSeries:function(e){function t(i){e.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(o,s){var l=e.getComponent(Tf(o),s);i(o,s,l,a)})})}t(function(i,a,o,s){o.__dzAxisProxy=null});var n=[];t(function(i,a,o,s){o.__dzAxisProxy||(o.__dzAxisProxy=new aEt(i,a,s,e),n.push(o.__dzAxisProxy))});var r=jt();return R(n,function(i){R(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).reset(n)}),n.eachTargetAxis(function(r,i){n.getAxisProxy(r,i).filterData(n,t)})}),e.eachComponent("dataZoom",function(n){var r=n.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();n.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function lEt(e){e.registerAction("dataZoom",function(t,n){var r=nEt(n,t);R(r,function(i){i.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})})}var H6=!1;function CF(e){H6||(H6=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,sEt),lEt(e),e.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function uEt(e){e.registerComponentModel(rEt),e.registerComponentView(iEt),CF(e)}var Ss=function(){function e(){}return e}(),Bet={};function am(e,t){Bet[e]=t}function ket(e){return Bet[e]}var cEt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;R(this.option.feature,function(r,i){var a=ket(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(n)),Xt(r,a.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(Ie);function hEt(e,t,n){var r=t.getBoxLayoutParams(),i=t.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=Gr(r,a,i);ev(t.get("orient"),e,t.get("itemGap"),o.width,o.height),_E(e,r,a,i)}function Fet(e,t){var n=s0(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),e=new nn({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1}),e}var fEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r,i,a){var o=this.group;if(o.removeAll(),!n.get("show"))return;var s=+n.get("itemSize"),l=n.get("orient")==="vertical",u=n.get("feature")||{},c=this._features||(this._features={}),h=[];R(u,function(p,v){h.push(v)}),new Zc(this._featureNames||[],h).add(f).update(f).remove(_e(f,null)).execute(),this._featureNames=h;function f(p,v){var g=h[p],m=h[v],_=u[g],y=new pn(_,n,n.ecModel),x;if(a&&a.newTitle!=null&&a.featureName===g&&(_.title=a.newTitle),g&&!m){if(dEt(g))x={onclick:y.option.onclick,featureName:g};else{var S=ket(g);if(!S)return;x=new S}c[g]=x}else if(x=c[m],!x)return;x.uid=o0("toolbox-feature"),x.model=y,x.ecModel=r,x.api=i;var b=x instanceof Ss;if(!g&&m){b&&x.dispose&&x.dispose(r,i);return}if(!y.get("show")||b&&x.unusable){b&&x.remove&&x.remove(r,i);return}d(y,x,g),y.setIconStatus=function(w,A){var T=this.option,M=this.iconPaths;T.iconStatus=T.iconStatus||{},T.iconStatus[w]=A,M[w]&&(A==="emphasis"?qc:Kc)(M[w])},x instanceof Ss&&x.render&&x.render(y,r,i,a)}function d(p,v,g){var m=p.getModel("iconStyle"),_=p.getModel(["emphasis","iconStyle"]),y=v instanceof Ss&&v.getIcons?v.getIcons():p.get("icon"),x=p.get("title")||{},S,b;Ft(y)?(S={},S[g]=y):S=y,Ft(x)?(b={},b[g]=x):b=x;var w=p.iconPaths={};R(S,function(A,T){var M=S1(A,{},{x:-s/2,y:-s/2,width:s,height:s});M.setStyle(m.getItemStyle());var C=M.ensureState("emphasis");C.style=_.getItemStyle();var E=new Qe({style:{text:b[T],align:_.get("textAlign"),borderRadius:_.get("textBorderRadius"),padding:_.get("textPadding"),fill:null,font:KB({fontStyle:_.get("textFontStyle"),fontFamily:_.get("textFontFamily"),fontSize:_.get("textFontSize"),fontWeight:_.get("textFontWeight")},r)},ignore:!0});M.setTextContent(E),i0({el:M,componentModel:n,itemName:T,formatterParamsExtra:{title:b[T]}}),M.__title=b[T],M.on("mouseover",function(){var D=_.getItemStyle(),I=l?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";E.setStyle({fill:_.get("textFill")||D.fill||D.stroke||"#000",backgroundColor:_.get("textBackgroundColor")}),M.setTextConfig({position:_.get("textPosition")||I}),E.ignore=!n.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){p.get(["iconStatus",T])!=="emphasis"&&i.leaveEmphasis(this),E.hide()}),(p.get(["iconStatus",T])==="emphasis"?qc:Kc)(M),o.add(M),M.on("click",Vt(v.onclick,v,r,i,T)),w[T]=M})}hEt(o,n,i),o.add(Fet(o.getBoundingRect(),n)),l||o.eachChild(function(p){var v=p.__title,g=p.ensureState("emphasis"),m=g.textConfig||(g.textConfig={}),_=p.getTextContent(),y=_&&_.ensureState("emphasis");if(y&&!ae(y)&&v){var x=y.style||(y.style={}),S=v1(v,Qe.makeFont(x)),b=p.x+o.x,w=p.y+o.y+s,A=!1;w+S.height>i.getHeight()&&(m.position="top",A=!0);var T=A?-5-S.height:s+10;b+S.width/2>i.getWidth()?(m.position=["100%",T],x.align="right"):b-S.width/2<0&&(m.position=[0,T],x.align="left")}})},t.prototype.updateView=function(n,r,i,a){R(this._features,function(o){o instanceof Ss&&o.updateView&&o.updateView(o.model,r,i,a)})},t.prototype.remove=function(n,r){R(this._features,function(i){i instanceof Ss&&i.remove&&i.remove(n,r)}),this.group.removeAll()},t.prototype.dispose=function(n,r){R(this._features,function(i){i instanceof Ss&&i.dispose&&i.dispose(n,r)})},t.type="toolbox",t}(Zn);function dEt(e){return e.indexOf("my")===0}var pEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){var i=this.model,a=i.get("name")||n.get("title.0.text")||"echarts",o=r.getZr().painter.getType()==="svg",s=o?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:s,backgroundColor:i.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=qe.browser;if(ae(MouseEvent)&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+s,c.target="_blank",c.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||o){var f=l.split(","),d=f[0].indexOf("base64")>-1,p=o?decodeURIComponent(f[1]):f[1];d&&(p=window.atob(p));var v=a+"."+s;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,m=new Uint8Array(g);g--;)m[g]=p.charCodeAt(g);var _=new Blob([m]);window.navigator.msSaveOrOpenBlob(_,v)}else{var y=document.createElement("iframe");document.body.appendChild(y);var x=y.contentWindow,S=x.document;S.open("image/svg+xml","replace"),S.write(p),S.close(),x.focus(),S.execCommand("SaveAs",!0,v),document.body.removeChild(y)}}else{var b=i.get("lang"),w='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(b&&b[0]||"")+'" /></body>',A=window.open();A.document.write(w),A.document.title=a}},t.getDefaultOption=function(n){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},t}(Ss),W6="__ec_magicType_stack__",vEt=[["line","bar"],["stack"]],gEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getIcons=function(){var n=this.model,r=n.get("icon"),i={};return R(n.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},t.getDefaultOption=function(n){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},t.prototype.onclick=function(n,r,i){var a=this.model,o=a.get(["seriesIndex",i]);if($6[i]){var s={series:[]},l=function(h){var f=h.subType,d=h.id,p=$6[i](f,d,h,a);p&&(te(p,h.option),s.series.push(p));var v=h.coordinateSystem;if(v&&v.type==="cartesian2d"&&(i==="line"||i==="bar")){var g=v.getAxesByScale("ordinal")[0];if(g){var m=g.dim,_=m+"Axis",y=h.getReferringComponents(_,ai).models[0],x=y.componentIndex;s[_]=s[_]||[];for(var S=0;S<=x;S++)s[_][x]=s[_][x]||{};s[_][x].boundaryGap=i==="bar"}}};R(vEt,function(h){Le(h,i)>=0&&R(h,function(f){a.setIconStatus(f,"normal")})}),a.setIconStatus(i,"emphasis"),n.eachComponent({mainType:"series",query:o==null?null:{seriesIndex:o}},l);var u,c=i;i==="stack"&&(u=Xt({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:s,newTitle:u,featureName:"magicType"})}},t}(Ss),$6={line:function(e,t,n,r){if(e==="bar")return Xt({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(e,t,n,r){if(e==="line")return Xt({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(e,t,n,r){var i=n.get("stack")===W6;if(e==="line"||e==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),Xt({id:t,stack:i?"":W6},r.get(["option","stack"])||{},!0)}};Ju({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)});var NE=new Array(60).join("-"),vy="	";function mEt(e){var t={},n=[],r=[];return e.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var o=a.getBaseAxis();if(o.type==="category"){var s=o.dim+"_"+o.index;t[s]||(t[s]={categoryAxis:o,valueAxis:a.getOtherAxis(o),series:[]},r.push({axisDim:o.dim,axisIndex:o.index})),t[s].series.push(i)}else n.push(i)}else n.push(i)}),{seriesGroupByCategoryAxis:t,other:n,meta:r}}function yEt(e){var t=[];return R(e,function(n,r){var i=n.categoryAxis,a=n.valueAxis,o=a.dim,s=[" "].concat(yt(n.series,function(d){return d.name})),l=[i.model.getCategories()];R(n.series,function(d){var p=d.getRawData();l.push(d.getRawData().mapArray(p.mapDimension(o),function(v){return v}))});for(var u=[s.join(vy)],c=0;c<l[0].length;c++){for(var h=[],f=0;f<l.length;f++)h.push(l[f][c]);u.push(h.join(vy))}t.push(u.join(`
`))}),t.join(`

`+NE+`

`)}function _Et(e){return yt(e,function(t){var n=t.getRawData(),r=[t.name],i=[];return n.each(n.dimensions,function(){for(var a=arguments.length,o=arguments[a-1],s=n.getName(o),l=0;l<a-1;l++)i[l]=arguments[l];r.push((s?s+vy:"")+i.join(vy))}),r.join(`
`)}).join(`

`+NE+`

`)}function xEt(e){var t=mEt(e);return{value:Gn([yEt(t.seriesGroupByCategoryAxis),_Et(t.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+NE+`

`),meta:t.meta}}function bA(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function bEt(e){var t=e.slice(0,e.indexOf(`
`));if(t.indexOf(vy)>=0)return!0}var MN=new RegExp("["+vy+"]+","g");function SEt(e){for(var t=e.split(/\n+/g),n=bA(t.shift()).split(MN),r=[],i=yt(n,function(l){return{name:l,data:[]}}),a=0;a<t.length;a++){var o=bA(t[a]).split(MN);r.push(o.shift());for(var s=0;s<o.length;s++)i[s]&&(i[s].data[a]=o[s])}return{series:i,categories:r}}function wEt(e){for(var t=e.split(/\n+/g),n=bA(t.shift()),r=[],i=0;i<t.length;i++){var a=bA(t[i]);if(a){var o=a.split(MN),s="",l=void 0,u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<o.length;c++)l.push(+o[c]);l.length===1&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:n,data:r}}function TEt(e,t){var n=e.split(new RegExp(`
*`+NE+`
*`,"g")),r={series:[]};return R(n,function(i,a){if(bEt(i)){var o=SEt(i),s=t[a],l=s.axisDim+"Axis";s&&(r[l]=r[l]||[],r[l][s.axisIndex]={data:o.categories},r.series=r.series.concat(o.series))}else{var o=wEt(i);r.series.push(o)}}),r}var MEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=a.get("backgroundColor")||"#fff";var s=document.createElement("h4"),l=a.get("lang")||[];s.innerHTML=l[0]||a.get("title"),s.style.cssText="margin:10px 20px",s.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=a.get("optionToContent"),f=a.get("contentToOption"),d=xEt(n);if(ae(h)){var p=h(r.getOption());Ft(p)?u.innerHTML=p:iy(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var v=c.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=a.get("textColor"),v.borderColor=a.get("textareaBorderColor"),v.backgroundColor=a.get("textareaColor"),c.value=d.value,u.appendChild(c)}var g=d.meta,m=document.createElement("div");m.style.cssText="position:absolute;bottom:5px;left:0;right:0";var _="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",y=document.createElement("div"),x=document.createElement("div");_+=";background-color:"+a.get("buttonColor"),_+=";color:"+a.get("buttonTextColor");var S=this;function b(){i.removeChild(o),S._dom=null}nO(y,"click",b),nO(x,"click",function(){if(f==null&&h!=null||f!=null&&h==null){b();return}var w;try{ae(f)?w=f(u,r.getOption()):w=TEt(c.value,g)}catch(A){throw b(),new Error("Data view format error "+A)}w&&r.dispatchAction({type:"changeDataView",newOption:w}),b()}),y.innerHTML=l[1],x.innerHTML=l[2],x.style.cssText=y.style.cssText=_,!a.get("readOnly")&&m.appendChild(x),m.appendChild(y),o.appendChild(s),o.appendChild(u),o.appendChild(m),u.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},t.prototype.remove=function(n,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(n,r){this.remove(n,r)},t.getDefaultOption=function(n){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return r},t}(Ss);function AEt(e,t){return yt(e,function(n,r){var i=t&&t[r];if(se(i)&&!ht(i)){var a=se(n)&&!ht(n);a||(n={value:n});var o=i.name!=null&&n.name==null;return n=te(n,i),o&&delete n.name,n}else return n})}Ju({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];R(e.newOption.series,function(r){var i=t.getSeriesByName(r.name)[0];if(!i)n.push(ut({type:"scatter"},r));else{var a=i.get("data");n.push({name:r.name,data:AEt(r.data,a)})}}),t.mergeOption(te({series:n},e.newOption))});var zet=R,Uet=vn();function CEt(e,t){var n=EF(e);zet(t,function(r,i){for(var a=n.length-1;a>=0;a--){var o=n[a];if(o[i])break}if(a<0){var s=e.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(s){var l=s.getPercentRange();n[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),n.push(t)}function EEt(e){var t=EF(e),n=t[t.length-1];t.length>1&&t.pop();var r={};return zet(n,function(i,a){for(var o=t.length-1;o>=0;o--)if(i=t[o][a],i){r[a]=i;break}}),r}function DEt(e){Uet(e).snapshots=null}function IEt(e){return EF(e).length}function EF(e){var t=Uet(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var LEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.onclick=function(n,r){DEt(n),r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(n){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return r},t}(Ss);Ju({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var PEt=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],DF=function(){function e(t,n,r){var i=this;this._targetInfoList=[];var a=X6(n,t);R(REt,function(o,s){(!r||!r.include||Le(r.include,s)>=0)&&o(a,i._targetInfoList)})}return e.prototype.setOutputRanges=function(t,n){return this.matchOutputRanges(t,n,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var o=eL[r.brushType](0,a,i);r.__rangeOffset={offset:K6[r.brushType](o.values,r.range,[1,1]),xyMinMax:o.xyMinMax}}}),t},e.prototype.matchOutputRanges=function(t,n,r){R(t,function(i){var a=this.findTargetInfo(i,n);a&&a!==!0&&R(a.coordSyses,function(o){var s=eL[i.brushType](1,o,i.range,!0);r(i,s.values,o,n)})},this)},e.prototype.setInputRanges=function(t,n){R(t,function(r){var i=this.findTargetInfo(r,n);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=eL[r.brushType](0,i.coordSys,r.coordRange),o=r.__rangeOffset;r.range=o?K6[r.brushType](a.values,o.offset,OEt(a.xyMinMax,o.xyMinMax)):a.values}},this)},e.prototype.makePanelOpts=function(t,n){return yt(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:n?n(r):null,clipPath:Xtt(i),isTargetByCursor:Ytt(i,t,r.coordSysModel),getLinearBrushOtherExtent:jtt(i)}})},e.prototype.controlSeries=function(t,n,r){var i=this.findTargetInfo(t,r);return i===!0||i&&Le(i.coordSyses,n.coordinateSystem)>=0},e.prototype.findTargetInfo=function(t,n){for(var r=this._targetInfoList,i=X6(n,t),a=0;a<r.length;a++){var o=r[a],s=t.panelId;if(s){if(o.panelId===s)return o}else for(var l=0;l<j6.length;l++)if(j6[l](i,o))return o}return!0},e}();function AN(e){return e[0]>e[1]&&e.reverse(),e}function X6(e,t){return Lx(e,t,{includeMainTypes:PEt})}var REt={grid:function(e,t){var n=e.xAxisModels,r=e.yAxisModels,i=e.gridModels,a=jt(),o={},s={};!n&&!r&&!i||(R(n,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),R(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),R(i,function(l){a.set(l.id,l),o[l.id]=!0,s[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];R(u.getCartesians(),function(h,f){(Le(n,h.getAxis("x").model)>=0||Le(r,h.getAxis("y").model)>=0)&&c.push(h)}),t.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Y6.grid,xAxisDeclared:o[l.id],yAxisDeclared:s[l.id]})}))},geo:function(e,t){R(e.geoModels,function(n){var r=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:r,coordSyses:[r],getPanelRect:Y6.geo})})}},j6=[function(e,t){var n=e.xAxisModel,r=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],Y6={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(tv(e)),t}},eL={lineX:_e(q6,0),lineY:_e(q6,1),rect:function(e,t,n,r){var i=e?t.pointToData([n[0][0],n[1][0]],r):t.dataToPoint([n[0][0],n[1][0]],r),a=e?t.pointToData([n[0][1],n[1][1]],r):t.dataToPoint([n[0][1],n[1][1]],r),o=[AN([i[0],a[0]]),AN([i[1],a[1]])];return{values:o,xyMinMax:o}},polygon:function(e,t,n,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=yt(n,function(o){var s=e?t.pointToData(o,r):t.dataToPoint(o,r);return i[0][0]=Math.min(i[0][0],s[0]),i[1][0]=Math.min(i[1][0],s[1]),i[0][1]=Math.max(i[0][1],s[0]),i[1][1]=Math.max(i[1][1],s[1]),s});return{values:a,xyMinMax:i}}};function q6(e,t,n,r){var i=n.getAxis(["x","y"][e]),a=AN(yt([0,1],function(s){return t?i.coordToData(i.toLocalCoord(r[s]),!0):i.toGlobalCoord(i.dataToCoord(r[s]))})),o=[];return o[e]=a,o[1-e]=[NaN,NaN],{values:a,xyMinMax:o}}var K6={lineX:_e(Z6,0),lineY:_e(Z6,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return yt(e,function(r,i){return[r[0]-n[0]*t[i][0],r[1]-n[1]*t[i][1]]})}};function Z6(e,t,n,r){return[t[0]-r[e]*n[0],t[1]-r[e]*n[1]]}function OEt(e,t){var n=J6(e),r=J6(t),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function J6(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var CN=R,NEt=Jdt("toolbox-dataZoom_"),BEt=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r,i,a){this._brushController||(this._brushController=new iF(i.getZr()),this._brushController.on("brush",Vt(this._onBrush,this)).mount()),zEt(n,r,this,a,i),FEt(n,r)},t.prototype.onclick=function(n,r,i){kEt[i].call(this)},t.prototype.remove=function(n,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(n,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(n){var r=n.areas;if(!n.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var o=new DF(IF(this.model),a,{include:["grid"]});o.matchOutputRanges(r,a,function(u,c,h){if(h.type==="cartesian2d"){var f=u.brushType;f==="rect"?(s("x",h,c[0]),s("y",h,c[1])):s({lineX:"x",lineY:"y"}[f],h,c)}}),CEt(a,i),this._dispatchZoomAction(i);function s(u,c,h){var f=c.getAxis(u),d=f.model,p=l(u,d,a),v=p.findRepresentativeAxisProxy(d).getMinMaxSpan();(v.minValueSpan!=null||v.maxValueSpan!=null)&&(h=$v(0,h.slice(),f.scale.getExtent(),0,v.minValueSpan,v.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:h[0],endValue:h[1]})}function l(u,c,h){var f;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(d){var p=d.getAxisModel(u,c.componentIndex);p&&(f=d)}),f}},t.prototype._dispatchZoomAction=function(n){var r=[];CN(n,function(i,a){r.push(ce(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(n){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return r},t}(Ss),kEt={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(EEt(this.ecModel))}};function IF(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return t.xAxisIndex==null&&t.xAxisId==null&&(t.xAxisIndex="all"),t.yAxisIndex==null&&t.yAxisId==null&&(t.yAxisIndex="all"),t}function FEt(e,t){e.setIconStatus("back",IEt(t)>1?"emphasis":"normal")}function zEt(e,t,n,r,i){var a=n._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),n._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var o=new DF(IF(e),t,{include:["grid"]}),s=o.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(s).enableBrush(a&&s.length?{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()}:!1)}wgt("dataZoom",function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(!t||t.get(n)==null)return;var r=t.getModel(n),i=[],a=IF(r),o=Lx(e,a);CN(o.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),CN(o.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")});function s(l,u,c){var h=l.componentIndex,f={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:NEt+u+h};f[c]=h,i.push(f)}return i});function UEt(e){e.registerComponentModel(cEt),e.registerComponentView(fEt),am("saveAsImage",pEt),am("magicType",gEt),am("dataView",MEt),am("dataZoom",BEt),am("restore",LEt),ue(uEt)}var VEt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Ie);function Vet(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function Get(e){if(qe.domSupported){for(var t=document.documentElement.style,n=0,r=e.length;n<r;n++)if(e[n]in t)return e[n]}}var Het=Get(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),GEt=Get(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Wet(e,t){if(!e)return t;t=yZ(t,!0);var n=e.indexOf(t);return e=n===-1?t:"-"+e.slice(0,n)+"-"+t,e.toLowerCase()}function HEt(e,t){var n=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return n?n[t]:null}var WEt=Wet(GEt,"transition"),LF=Wet(Het,"transform"),$Et="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(qe.transform3dSupported?"will-change:transform;":"");function XEt(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function jEt(e,t,n){if(!Ft(n)||n==="inside")return"";var r=e.get("backgroundColor"),i=e.get("borderWidth");t=vv(t);var a=XEt(n),o=Math.max(Math.round(i)*1.5,6),s="",l=LF+":",u;Le(["left","right"],a)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,h=o+i,f=h*Math.abs(Math.cos(c))+h*Math.abs(Math.sin(c)),d=Math.round(((f-Math.SQRT2*i)/2+Math.SQRT2*i-(f-h)/2)*100)/100;s+=";"+a+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+o+"px;height:"+o+"px;z-index:-1;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+v.join("")+'"></div>'}function YEt(e,t){var n="cubic-bezier(0.23,1,0.32,1)",r=" "+e/2+"s "+n,i="opacity"+r+",visibility"+r;return t||(r=" "+e+"s "+n,i+=qe.transformSupported?","+LF+r:",left"+r+",top"+r),WEt+":"+i}function Q6(e,t,n){var r=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!qe.transformSupported)return n?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=qe.transform3dSupported,o="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return n?"top:0;left:0;"+LF+":"+o+";":[["top",0],["left",0],[Het,o]]}function qEt(e){var t=[],n=e.get("fontSize"),r=e.getTextColor();r&&t.push("color:"+r),t.push("font:"+e.getFont()),n&&t.push("line-height:"+Math.round(n*3/2)+"px");var i=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,o=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&a&&t.push("text-shadow:"+o+"px "+s+"px "+a+"px "+i),R(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function KEt(e,t,n){var r=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),o=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),h=JZ(e,"html"),f=l+"px "+u+"px "+o+"px "+s;return r.push("box-shadow:"+f),t&&i&&r.push(YEt(i,n)),a&&r.push("background-color:"+a),R(["width","color","radius"],function(d){var p="border-"+d,v=yZ(p),g=e.get(v);g!=null&&r.push(p+":"+g+(d==="color"?"":"px"))}),r.push(qEt(c)),h!=null&&r.push("padding:"+s0(h).join("px ")+"px"),r.join(";")+";"}function t8(e,t,n,r,i){var a=t&&t.painter;if(n){var o=a&&a.getViewportRoot();o&&Lft(e,o,n,r,i)}else{e[0]=r,e[1]=i;var s=a&&a.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var ZEt=function(){function e(t,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,qe.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=t.getZr(),a=n.appendTo,o=a&&(Ft(a)?document.querySelector(a):iy(a)?a:ae(a)&&a(t.getDom()));t8(this._styleCoord,i,o,t.getWidth()/2,t.getHeight()/2),(o||t.getDom()).appendChild(r),this._api=t,this._container=o;var s=this;r.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=i.handler,c=i.painter.getViewportRoot();gs(c,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){if(!this._container){var n=this._api.getDom(),r=HEt(n,"position"),i=n.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this.el.className=t.get("className")||""},e.prototype.show=function(t,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=$Et+KEt(t,!this._firstShow,this._longHide)+Q6(a[0],a[1],!0)+("border-color:"+vv(n)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,n,r,i,a){var o=this.el;if(t==null){o.innerHTML="";return}var s="";if(Ft(a)&&r.get("trigger")==="item"&&!Vet(r)&&(s=jEt(r,i,a)),Ft(t))o.innerHTML=t+s;else if(t){o.innerHTML="",ht(t)||(t=[t]);for(var l=0;l<t.length;l++)iy(t[l])&&t[l].parentNode!==o&&o.appendChild(t[l]);if(s&&o.childNodes.length){var u=document.createElement("div");u.innerHTML=s,o.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,n){var r=this._styleCoord;if(t8(r,this._zr,this._container,t,n),r[0]!=null&&r[1]!=null){var i=this.el.style,a=Q6(r[0],r[1]);R(a,function(o){i[o[0]]=o[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},e.prototype.hide=function(){var t=this,n=this.el.style;n.visibility="hidden",n.opacity="0",qe.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},e}(),JEt=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),n8(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var n=t.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,n,r,i,a){var o=this;se(t)&&En(""),this.el&&this._zr.remove(this.el);var s=r.getModel("textStyle");this.el=new Qe({style:{rich:n.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:JZ(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),R(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){o.el.style[u]=r.get(u)}),R(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){o.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,n=this.el.getBoundingRect(),r=e8(t.style);return[n.width+r.left+r.right,n.height+r.top+r.bottom]},e.prototype.moveTo=function(t,n){var r=this.el;if(r){var i=this._styleCoord;n8(i,this._zr,t,n),t=i[0],n=i[1];var a=r.style,o=sf(a.borderWidth||0),s=e8(a);r.x=t+o+s.left,r.y=n+o+s.top,r.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),n*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function sf(e){return Math.max(0,e)}function e8(e){var t=sf(e.shadowBlur||0),n=sf(e.shadowOffsetX||0),r=sf(e.shadowOffsetY||0);return{left:sf(t-n),right:sf(t+n),top:sf(t-r),bottom:sf(t+r)}}function n8(e,t,n,r){e[0]=n,e[1]=r,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var QEt=new nn({shape:{x:-1,y:-1,width:2,height:2}}),t2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){if(!(qe.node||!r.getDom())){var i=n.getComponent("tooltip"),a=this._renderMode=apt(i.get("renderMode"));this._tooltipContent=a==="richText"?new JEt(r):new ZEt(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},t.prototype.render=function(n,r,i){if(!(qe.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(n),a.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?f0(this,"_updatePosition",50,"fixRate"):vb(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var n=this._tooltipModel,r=n.get("triggerOn");Eet("itemTooltip",this._api,Vt(function(i,a,o){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,o):i==="leave"&&this._hide(o))},this))},t.prototype._keepShow=function(){var n=this._tooltipModel,r=this._ecModel,i=this._api,a=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&o.manuallyShowTip(n,r,i,{x:o._lastX,y:o._lastY,dataByCoordSys:o._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(n,r,i,a){if(!(a.from===this.uid||qe.node||!i.getDom())){var o=r8(a,i);this._ticket="";var s=a.dataByCoordSys,l=i2t(a,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},o)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=QEt;c.x=a.x,c.y=a.y,c.update(),fe(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},o)}else if(s)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:s,tooltipOption:a.tooltipOption},o);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(n,r,i,a))return;var h=Det(a,r),f=h.point[0],d=h.point[1];f!=null&&d!=null&&this._tryShow({offsetX:f,offsetY:d,target:h.el,position:a.position,positionDefault:"bottom"},o)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},o))}},t.prototype.manuallyHideTip=function(n,r,i,a){var o=this._tooltipContent;this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(r8(a,i))},t.prototype._manuallyAxisShowTip=function(n,r,i,a){var o=a.seriesIndex,s=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(o==null||s==null||l==null)){var u=r.getSeriesByIndex(o);if(u){var c=u.getData(),h=__([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:s,position:a.position}),!0}}},t.prototype._tryShow=function(n,r){var i=n.target,a=this._tooltipModel;if(a){this._lastX=n.offsetX,this._lastY=n.offsetY;var o=n.dataByCoordSys;if(o&&o.length)this._showAxisTooltip(o,n);else if(i){var s=fe(i);if(s.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;Pp(i,function(c){if(fe(c).dataIndex!=null)return l=c,!0;if(fe(c).tooltipConfig!=null)return u=c,!0},!0),l?this._showSeriesItemTooltip(n,l,r):u?this._showComponentItemTooltip(n,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(n,r){var i=n.get("showDelay");r=Vt(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},t.prototype._showAxisTooltip=function(n,r){var i=this._ecModel,a=this._tooltipModel,o=[r.offsetX,r.offsetY],s=__([r.tooltipOption],a),l=this._renderMode,u=[],c=zi("section",{blocks:[],noHeader:!0}),h=[],f=new UD;R(n,function(_){R(_.dataByAxis,function(y){var x=i.getComponent(y.axisDim+"Axis",y.axisIndex),S=y.value;if(!(!x||S==null)){var b=Met(S,x.axis,i,y.seriesDataIndices,y.valueLabelOpt),w=zi("section",{header:b,noHeader:!Sl(b),sortBlocks:!0,blocks:[]});c.blocks.push(w),R(y.seriesDataIndices,function(A){var T=i.getSeriesByIndex(A.seriesIndex),M=A.dataIndexInside,C=T.getDataParams(M);if(!(C.dataIndex<0)){C.axisDim=y.axisDim,C.axisIndex=y.axisIndex,C.axisType=y.axisType,C.axisId=y.axisId,C.axisValue=Ek(x.axis,{value:S}),C.axisValueLabel=b,C.marker=f.makeTooltipMarker("item",vv(C.color),l);var E=H5(T.formatTooltip(M,!0,null)),D=E.frag;if(D){var I=__([T],a).get("valueFormatter");w.blocks.push(I?ut({valueFormatter:I},D):D)}E.text&&h.push(E.text),u.push(C)}})}})}),c.blocks.reverse(),h.reverse();var d=r.position,p=s.get("order"),v=q5(c,f,l,p,i.get("useUTC"),s.get("textStyle"));v&&h.unshift(v);var g=l==="richText"?`

`:"<br/>",m=h.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(n,u)?this._updatePosition(s,d,o[0],o[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",o[0],o[1],d,null,f)})},t.prototype._showSeriesItemTooltip=function(n,r,i){var a=this._ecModel,o=fe(r),s=o.seriesIndex,l=a.getSeriesByIndex(s),u=o.dataModel||l,c=o.dataIndex,h=o.dataType,f=u.getData(h),d=this._renderMode,p=n.positionDefault,v=__([f.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,h),_=new UD;m.marker=_.makeTooltipMarker("item",vv(m.color),d);var y=H5(u.formatTooltip(c,!1,h)),x=v.get("order"),S=v.get("valueFormatter"),b=y.frag,w=b?q5(S?ut({valueFormatter:S},b):b,_,d,x,a.get("useUTC"),v.get("textStyle")):y.text,A="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,w,m,A,n.offsetX,n.offsetY,n.position,n.target,_)}),i({type:"showTip",dataIndexInside:c,dataIndex:f.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(n,r,i){var a=fe(r),o=a.tooltipConfig,s=o.option||{};if(Ft(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(a.componentMainType,a.componentIndex);c&&u.push(c),u.push({formatter:s.content});var h=n.positionDefault,f=__(u,this._tooltipModel,h?{position:h}:null),d=f.get("content"),p=Math.random()+"",v=new UD;this._showOrMove(f,function(){var g=ce(f.get("formatterParams")||{});this._showTooltipContent(f,d,g,p,n.offsetX,n.offsetY,n.position,r,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(n,r,i,a,o,s,l,u,c){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var h=this._tooltipContent;h.setEnterable(n.get("enterable"));var f=n.get("formatter");l=l||n.get("position");var d=r,p=this._getNearestPoint([o,s],i,n.get("trigger"),n.get("borderColor")),v=p.color;if(f)if(Ft(f)){var g=n.ecModel.get("useUTC"),m=ht(i)?i[0]:i,_=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=f,_&&(d=pE(m.axisValue,d,g)),d=nk(d,i,!0)}else if(ae(f)){var y=Vt(function(x,S){x===this._ticket&&(h.setContent(S,c,n,v,l),this._updatePosition(n,l,o,s,h,i,u))},this);this._ticket=a,d=f(i,a,y)}else d=f;h.setContent(d,c,n,v,l),h.show(n,v),this._updatePosition(n,l,o,s,h,i,u)}},t.prototype._getNearestPoint=function(n,r,i,a){if(i==="axis"||ht(r))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!ht(r))return{color:a||r.color||r.borderColor}},t.prototype._updatePosition=function(n,r,i,a,o,s,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||n.get("position");var h=o.getSize(),f=n.get("align"),d=n.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),ae(r)&&(r=r([i,a],s,o.el,p,{viewSize:[u,c],contentSize:h.slice()})),ht(r))i=Dt(r[0],u),a=Dt(r[1],c);else if(se(r)){var v=r;v.width=h[0],v.height=h[1];var g=Gr(v,{width:u,height:c});i=g.x,a=g.y,f=null,d=null}else if(Ft(r)&&l){var m=r2t(r,p,h,n.get("borderWidth"));i=m[0],a=m[1]}else{var m=e2t(i,a,o,u,c,f?null:20,d?null:20);i=m[0],a=m[1]}if(f&&(i-=i8(f)?h[0]/2:f==="right"?h[0]:0),d&&(a-=i8(d)?h[1]/2:d==="bottom"?h[1]:0),Vet(n)){var m=n2t(i,a,o,u,c);i=m[0],a=m[1]}o.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(n,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,o=!!i&&i.length===n.length;return o&&R(i,function(s,l){var u=s.dataByAxis||[],c=n[l]||{},h=c.dataByAxis||[];o=o&&u.length===h.length,o&&R(u,function(f,d){var p=h[d]||{},v=f.seriesDataIndices||[],g=p.seriesDataIndices||[];o=o&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&v.length===g.length,o&&R(v,function(m,_){var y=g[_];o=o&&m.seriesIndex===y.seriesIndex&&m.dataIndex===y.dataIndex}),a&&R(f.seriesDataIndices,function(m){var _=m.seriesIndex,y=r[_],x=a[_];y&&x&&x.data!==y.data&&(o=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=r,!!o},t.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},t.prototype.dispose=function(n,r){qe.node||!r.getDom()||(vb(this,"_updatePosition"),this._tooltipContent.dispose(),SN("itemTooltip",r))},t.type="tooltip",t}(Zn);function __(e,t,n){var r=t.ecModel,i;n?(i=new pn(n,r,r),i=new pn(t.option,i,r)):i=t;for(var a=e.length-1;a>=0;a--){var o=e[a];o&&(o instanceof pn&&(o=o.get("tooltip",!0)),Ft(o)&&(o={formatter:o}),o&&(i=new pn(o,i,r)))}return i}function r8(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function e2t(e,t,n,r,i,a,o){var s=n.getSize(),l=s[0],u=s[1];return a!=null&&(e+l+a+2>r?e-=l+a:e+=a),o!=null&&(t+u+o>i?t-=u+o:t+=o),[e,t]}function n2t(e,t,n,r,i){var a=n.getSize(),o=a[0],s=a[1];return e=Math.min(e+o,r)-o,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function r2t(e,t,n,r){var i=n[0],a=n[1],o=Math.ceil(Math.SQRT2*r)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-a/2;break;case"top":s=t.x+u/2-i/2,l=t.y-a-o;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+o;break;case"left":s=t.x-i-o,l=t.y+c/2-a/2;break;case"right":s=t.x+u+o,l=t.y+c/2-a/2}return[s,l]}function i8(e){return e==="center"||e==="middle"}function i2t(e,t,n){var r=kB(e).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=g1(t,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),o=a.models[0];if(o){var s=n.getViewOfComponentModel(o),l;if(s.group.traverse(function(u){var c=fe(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:o.componentIndex,el:l}}}}function a2t(e){ue(N1),e.registerComponentModel(VEt),e.registerComponentView(t2t),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Zr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Zr)}var o2t=["rect","polygon","keep","clear"];function s2t(e,t){var n=jn(e?e.brush:[]);if(n.length){var r=[];R(n,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(r=r.concat(u))});var i=e&&e.toolbox;ht(i)&&(i=i[0]),i||(i={feature:{}},e.toolbox=[i]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),l2t(s),t&&!s.length&&s.push.apply(s,o2t)}}function l2t(e){var t={};R(e,function(n){t[n]=1}),e.length=0,R(t,function(n,r){e.push(r)})}var a8=R;function o8(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function EN(e,t,n){var r={};return a8(t,function(a){var o=r[a]=i();a8(e[a],function(s,l){if(Ni.isValidType(l)){var u={type:l,visual:s};n&&n(u,a),o[l]=new Ni(u),l==="opacity"&&(u=ce(u),u.type="colorAlpha",o.__hidden.__alphaForOpacity=new Ni(u))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var o=new a;return o}}function $et(e,t,n){var r;R(n,function(i){t.hasOwnProperty(i)&&o8(t[i])&&(r=!0)}),r&&R(n,function(i){t.hasOwnProperty(i)&&o8(t[i])?e[i]=ce(t[i]):delete e[i]})}function u2t(e,t,n,r,i,a){var o={};R(e,function(h){var f=Ni.prepareVisualTypes(t[h]);o[h]=f});var s;function l(h){return pk(n,s,h)}function u(h,f){lJ(n,s,h,f)}n.each(c);function c(h,f){s=h;var d=n.getRawDataItem(s);if(!(d&&d.visualMap===!1))for(var p=r.call(i,h),v=t[p],g=o[p],m=0,_=g.length;m<_;m++){var y=g[m];v[y]&&v[y].applyVisual(h,l,u)}}}function c2t(e,t,n,r){var i={};return R(e,function(a){var o=Ni.prepareVisualTypes(t[a]);i[a]=o}),{progress:function(o,s){var l;r!=null&&(l=s.getDimensionIndex(r));function u(S){return pk(s,h,S)}function c(S,b){lJ(s,h,S,b)}for(var h,f=s.getStore();(h=o.next())!=null;){var d=s.getRawDataItem(h);if(!(d&&d.visualMap===!1))for(var p=r!=null?f.get(l,h):h,v=n(p),g=t[v],m=i[v],_=0,y=m.length;_<y;_++){var x=m[_];g[x]&&g[x].applyVisual(p,u,c)}}}}}function h2t(e){var t=e.brushType,n={point:function(r){return s8[t].point(r,n,e)},rect:function(r){return s8[t].rect(r,n,e)}};return n}var s8={lineX:l8(0),lineY:l8(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&xp(n.range,e[0],e[1])},rect:function(e,t,n){var r=n.range;if(!e||r.length<=1)return!1;var i=e.x,a=e.y,o=e.width,s=e.height,l=r[0];if(xp(r,i,a)||xp(r,i+o,a)||xp(r,i,a+s)||xp(r,i+o,a+s)||Ae.create(e).contain(l[0],l[1])||ex(i,a,i+o,a,r)||ex(i,a,i,a+s,r)||ex(i+o,a,i+o,a+s,r)||ex(i,a+s,i+o,a+s,r))return!0}}};function l8(e){var t=["x","y"],n=["width","height"];return{point:function(r,i,a){if(r){var o=a.range,s=r[e];return x_(s,o)}},rect:function(r,i,a){if(r){var o=a.range,s=[r[t[e]],r[t[e]]+r[n[e]]];return s[1]<s[0]&&s.reverse(),x_(s[0],o)||x_(s[1],o)||x_(o[0],s)||x_(o[1],s)}}}}function x_(e,t){return t[0]<=e&&e<=t[1]}var u8=["inBrush","outOfBrush"],nL="__ecBrushSelect",DN="__ecInBrushSelectEvent";function Xet(e){e.eachComponent({mainType:"brush"},function(t){var n=t.brushTargetManager=new DF(t.option,e);n.setInputRanges(t.areas,e)})}function f2t(e,t,n){var r=[],i,a;e.eachComponent({mainType:"brush"},function(o){n&&n.type==="takeGlobalCursor"&&o.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),Xet(e),e.eachComponent({mainType:"brush"},function(o,s){var l={brushId:o.id,brushIndex:s,brushName:o.name,areas:ce(o.areas),selected:[]};r.push(l);var u=o.option,c=u.brushLink,h=[],f=[],d=[],p=!1;s||(i=u.throttleType,a=u.throttleDelay);var v=yt(o.areas,function(S){var b=g2t[S.brushType],w=te({boundingRect:b?b(S):void 0},S);return w.selectors=h2t(w),w}),g=EN(o.option,u8,function(S){S.mappingMethod="fixed"});ht(c)&&R(c,function(S){h[S]=1});function m(S){return c==="all"||!!h[S]}function _(S){return!!S.length}e.eachSeries(function(S,b){var w=d[b]=[];S.subType==="parallel"?y(S,b):x(S,b,w)});function y(S,b){var w=S.coordinateSystem;p=p||w.hasAxisBrushed(),m(b)&&w.eachActiveState(S.getData(),function(A,T){A==="active"&&(f[T]=1)})}function x(S,b,w){if(!(!S.brushSelector||v2t(o,b))&&(R(v,function(T){o.brushTargetManager.controlSeries(T,S,e)&&w.push(T),p=p||_(w)}),m(b)&&_(w))){var A=S.getData();A.each(function(T){c8(S,w,A,T)&&(f[T]=1)})}}e.eachSeries(function(S,b){var w={seriesId:S.id,seriesIndex:b,seriesName:S.name,dataIndex:[]};l.selected.push(w);var A=d[b],T=S.getData(),M=m(b)?function(C){return f[C]?(w.dataIndex.push(T.getRawIndex(C)),"inBrush"):"outOfBrush"}:function(C){return c8(S,A,T,C)?(w.dataIndex.push(T.getRawIndex(C)),"inBrush"):"outOfBrush"};(m(b)?p:_(A))&&u2t(u8,g,T,M)})}),d2t(t,i,a,r,n)}function d2t(e,t,n,r,i){if(i){var a=e.getZr();if(!a[DN]){a[nL]||(a[nL]=p2t);var o=f0(a,nL,n,t);o(e,r)}}}function p2t(e,t){if(!e.isDisposed()){var n=e.getZr();n[DN]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[DN]=!1}}function c8(e,t,n,r){for(var i=0,a=t.length;i<a;i++){var o=t[i];if(e.brushSelector(r,n,o.selectors,o))return!0}}function v2t(e,t){var n=e.option.seriesIndex;return n!=null&&n!=="all"&&(ht(n)?Le(n,t)<0:t!==n)}var g2t={rect:function(e){return h8(e.range)},polygon:function(e){for(var t,n=e.range,r=0,i=n.length;r<i;r++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=n[r];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&h8(t)}};function h8(e){return new Ae(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var m2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){this.ecModel=n,this.api=r,this.model,(this._brushController=new iF(r.getZr())).on("brush",Vt(this._onBrush,this)).mount()},t.prototype.render=function(n,r,i,a){this.model=n,this._updateController(n,r,i,a)},t.prototype.updateTransform=function(n,r,i,a){Xet(r),this._updateController(n,r,i,a)},t.prototype.updateVisual=function(n,r,i,a){this.updateTransform(n,r,i,a)},t.prototype.updateView=function(n,r,i,a){this._updateController(n,r,i,a)},t.prototype._updateController=function(n,r,i,a){(!a||a.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(i)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(n){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:ce(i),$from:r}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:ce(i),$from:r})},t.type="brush",t}(Zn),y2t="#ddd",_2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.areas=[],n.brushOption={},n}return t.prototype.optionUpdated=function(n,r){var i=this.option;!r&&$et(i,n,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:y2t},a.hasOwnProperty("liftZ")||(a.liftZ=5)},t.prototype.setAreas=function(n){n&&(this.areas=yt(n,function(r){return f8(this.option,r)},this))},t.prototype.setBrushOption=function(n){this.brushOption=f8(this.option,n),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(Ie);function f8(e,t){return Xt({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new pn(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}var x2t=["rect","polygon","lineX","lineY","keep","clear"],b2t=function(e){it(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.render=function(n,r,i){var a,o,s;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,o=l.brushOption.brushMode||"single",s=s||!!l.areas.length}),this._brushType=a,this._brushMode=o,R(n.get("type",!0),function(l){n.setIconStatus(l,(l==="keep"?o==="multiple":l==="clear"?s:l===a)?"emphasis":"normal")})},t.prototype.updateView=function(n,r,i){this.render(n,r,i)},t.prototype.getIcons=function(){var n=this.model,r=n.get("icon",!0),i={};return R(n.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},t.prototype.onclick=function(n,r,i){var a=this._brushType,o=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?o==="multiple"?"single":"multiple":o}})},t.getDefaultOption=function(n){var r={show:!0,type:x2t.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return r},t}(Ss);function S2t(e){e.registerComponentView(m2t),e.registerComponentModel(_2t),e.registerPreprocessor(s2t),e.registerVisual(e.PRIORITY.VISUAL.BRUSH,f2t),e.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,n){n.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),e.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Zr),e.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Zr),am("brush",b2t)}var w2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Ie),T2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.render=function(n,r,i){if(this.group.removeAll(),!!n.get("show")){var a=this.group,o=n.getModel("textStyle"),s=n.getModel("subtextStyle"),l=n.get("textAlign"),u=xe(n.get("textBaseline"),n.get("textVerticalAlign")),c=new Qe({style:Hn(o,{text:n.get("text"),fill:o.getTextColor()},{disableBox:!0}),z2:10}),h=c.getBoundingRect(),f=n.get("subtext"),d=new Qe({style:Hn(s,{text:f,fill:s.getTextColor(),y:h.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=n.get("link"),v=n.get("sublink"),g=n.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){KM(p,"_"+n.get("target"))}),v&&d.on("click",function(){KM(v,"_"+n.get("subtarget"))}),fe(c).eventData=fe(d).eventData=g?{componentType:"title",componentIndex:n.componentIndex}:null,a.add(c),f&&a.add(d);var m=a.getBoundingRect(),_=n.getBoxLayoutParams();_.width=m.width,_.height=m.height;var y=Gr(_,{width:i.getWidth(),height:i.getHeight()},n.get("padding"));l||(l=n.get("left")||n.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),u||(u=n.get("top")||n.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?y.y+=y.height:u==="middle"&&(y.y+=y.height/2),u=u||"top"),a.x=y.x,a.y=y.y,a.markRedraw();var x={align:l,verticalAlign:u};c.setStyle(x),d.setStyle(x),m=a.getBoundingRect();var S=y.margin,b=n.getItemStyle(["color","opacity"]);b.fill=n.get("backgroundColor");var w=new nn({shape:{x:m.x-S[3],y:m.y-S[0],width:m.width+S[1]+S[3],height:m.height+S[0]+S[2],r:n.get("borderRadius")},style:b,subPixelOptimize:!0,silent:!0});a.add(w)}},t.type="title",t}(Zn);function M2t(e){e.registerComponentModel(w2t),e.registerComponentView(T2t)}var d8=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode="box",n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._initData()},t.prototype.mergeOption=function(n){e.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var r=this._data.count();this.option.loop?n=(n%r+r)%r:(n>=r&&(n=r-1),n<0&&(n=0)),this.option.currentIndex=n},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(n){this.option.autoPlay=!!n},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var n=this.option,r=n.data||[],i=n.axisType,a=this._names=[],o;i==="category"?(o=[],R(r,function(u,c){var h=pi(e0(u),""),f;se(u)?(f=ce(u),f.value=c):f=c,o.push(f),a.push(h)})):o=r;var s={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new Ir([{name:"value",type:s}],this);l.initData(o,a)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(Ie),jet=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="timeline.slider",t.defaultOption=ld(d8.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(d8);ti(jet,hk.prototype);var A2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="timeline",t}(Zn),C2t=function(e){it(t,e);function t(n,r,i,a){var o=e.call(this,n,r,i)||this;return o.type=a||"value",o}return t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},t}(Qa),rL=Math.PI,p8=vn(),E2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(n,r){this.api=r},t.prototype.render=function(n,r,i){if(this.model=n,this.api=i,this.ecModel=r,this.group.removeAll(),n.get("show",!0)){var a=this._layout(n,i),o=this._createGroup("_mainGroup"),s=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,n);n.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return zi("nameValue",{noName:!0,value:c})},R(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,o,l,n)},this),this._renderAxisLabel(a,s,l,n),this._position(a,n)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(n,r){var i=n.get(["label","position"]),a=n.get("orient"),o=I2t(n,r),s;i==null||i==="auto"?s=a==="horizontal"?o.y+o.height/2<r.getHeight()/2?"-":"+":o.x+o.width/2<r.getWidth()/2?"+":"-":Ft(i)?s={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:s=i;var l={horizontal:"center",vertical:s>=0||s==="+"?"left":"right"},u={horizontal:s>=0||s==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:rL/2},h=a==="vertical"?o.height:o.width,f=n.getModel("controlStyle"),d=f.get("show",!0),p=d?f.get("itemSize"):0,v=d?f.get("itemGap"):0,g=p+v,m=n.get(["label","rotate"])||0;m=m*rL/180;var _,y,x,S=f.get("position",!0),b=d&&f.get("showPlayBtn",!0),w=d&&f.get("showPrevBtn",!0),A=d&&f.get("showNextBtn",!0),T=0,M=h;S==="left"||S==="bottom"?(b&&(_=[0,0],T+=g),w&&(y=[T,0],T+=g),A&&(x=[M-p,0],M-=g)):(b&&(_=[M-p,0],M-=g),w&&(y=[0,0],T+=g),A&&(x=[M-p,0],M-=g));var C=[T,M];return n.get("inverse")&&C.reverse(),{viewRect:o,mainLength:h,orient:a,rotation:c[a],labelRotation:m,labelPosOpt:s,labelAlign:n.get(["label","align"])||l[a],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||u[a],playPosition:_,prevBtnPosition:y,nextBtnPosition:x,axisExtent:C,controlSize:p,controlGap:v}},t.prototype._position=function(n,r){var i=this._mainGroup,a=this._labelGroup,o=n.viewRect;if(n.orient==="vertical"){var s=_o(),l=o.x,u=o.y+o.height;ku(s,s,[-l,-u]),Fv(s,s,-rL/2),ku(s,s,[l,u]),o=o.clone(),o.applyTransform(s)}var c=_(o),h=_(i.getBoundingRect()),f=_(a.getBoundingRect()),d=[i.x,i.y],p=[a.x,a.y];p[0]=d[0]=c[0][0];var v=n.labelPosOpt;if(v==null||Ft(v)){var g=v==="+"?0:1;y(d,h,c,1,g),y(p,f,c,1,1-g)}else{var g=v>=0?0:1;y(d,h,c,1,g),p[1]=d[1]+v}i.setPosition(d),a.setPosition(p),i.rotation=a.rotation=n.rotation,m(i),m(a);function m(x){x.originX=c[0][0]-x.x,x.originY=c[1][0]-x.y}function _(x){return[[x.x,x.x+x.width],[x.y,x.y+x.height]]}function y(x,S,b,w,A){x[w]+=b[w][A]-S[w][A]}},t.prototype._createAxis=function(n,r){var i=r.getData(),a=r.get("axisType"),o=D2t(r,a);o.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var s=i.getDataExtent("value");o.setExtent(s[0],s[1]),o.calcNiceTicks();var l=new C2t("value",o,n.axisExtent,a);return l.model=r,l},t.prototype._createGroup=function(n){var r=this[n]=new he;return this.group.add(r),r},t.prototype._renderAxisLine=function(n,r,i,a){var o=i.getExtent();if(a.get(["lineStyle","show"])){var s=new Ei({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:ut({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(s);var l=this._progressLine=new Ei({shape:{x1:o[0],x2:this._currentPointer?this._currentPointer.x:o[0],y1:0,y2:0},style:te({lineCap:"round",lineWidth:s.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},t.prototype._renderAxisTick=function(n,r,i,a){var o=this,s=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],R(l,function(u){var c=i.dataToCoord(u.value),h=s.getItemModel(u.value),f=h.getModel("itemStyle"),d=h.getModel(["emphasis","itemStyle"]),p=h.getModel(["progress","itemStyle"]),v={x:c,y:0,onclick:Vt(o._changeTimeline,o,u.value)},g=v8(h,f,r,v);g.ensureState("emphasis").style=d.getItemStyle(),g.ensureState("progress").style=p.getItemStyle(),Qp(g);var m=fe(g);h.get("tooltip")?(m.dataIndex=u.value,m.dataModel=a):m.dataIndex=m.dataModel=null,o._tickSymbols.push(g)})},t.prototype._renderAxisLabel=function(n,r,i,a){var o=this,s=i.getLabelModel();if(s.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],R(u,function(c){var h=c.tickValue,f=l.getItemModel(h),d=f.getModel("label"),p=f.getModel(["emphasis","label"]),v=f.getModel(["progress","label"]),g=i.dataToCoord(c.tickValue),m=new Qe({x:g,y:0,rotation:n.labelRotation-n.rotation,onclick:Vt(o._changeTimeline,o,h),silent:!1,style:Hn(d,{text:c.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});m.ensureState("emphasis").style=Hn(p),m.ensureState("progress").style=Hn(v),r.add(m),Qp(m),p8(m).dataIndex=h,o._tickLabels.push(m)})}},t.prototype._renderControl=function(n,r,i,a){var o=n.controlSize,s=n.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),h=a.get("inverse",!0);f(n.nextBtnPosition,"next",Vt(this._changeTimeline,this,h?"-":"+")),f(n.prevBtnPosition,"prev",Vt(this._changeTimeline,this,h?"+":"-")),f(n.playPosition,c?"stop":"play",Vt(this._handlePlayClick,this,!c),!0);function f(d,p,v,g){if(d){var m=Rl(xe(a.get(["controlStyle",p+"BtnSize"]),o),o),_=[0,-m/2,m,m],y=L2t(a,p+"Icon",_,{x:d[0],y:d[1],originX:o/2,originY:0,rotation:g?-s:0,rectHover:!0,style:l,onclick:v});y.ensureState("emphasis").style=u,r.add(y),Qp(y)}}},t.prototype._renderCurrentPointer=function(n,r,i,a){var o=a.getData(),s=a.getCurrentIndex(),l=o.getItemModel(s).getModel("checkpointStyle"),u=this,c={onCreate:function(h){h.draggable=!0,h.drift=Vt(u._handlePointerDrag,u),h.ondragend=Vt(u._handlePointerDragend,u),g8(h,u._progressLine,s,i,a,!0)},onUpdate:function(h){g8(h,u._progressLine,s,i,a)}};this._currentPointer=v8(l,l,this._mainGroup,{},this._currentPointer,c)},t.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},t.prototype._handlePointerDrag=function(n,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},t.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},t.prototype._pointerChangeTimeline=function(n,r){var i=this._toAxisCoord(n)[0],a=this._axis,o=Ns(a.getExtent().slice());i>o[1]&&(i=o[1]),i<o[0]&&(i=o[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=i,s.dirty());var l=this._findNearestTick(i),u=this.model;(r||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=n.model;n._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(n){var r=this._mainGroup.getLocalTransform();return Cl(n,r,!0)},t.prototype._findNearestTick=function(n){var r=this.model.getData(),i=1/0,a,o=this._axis;return r.each(["value"],function(s,l){var u=o.dataToCoord(s),c=Math.abs(u-n);c<i&&(i=c,a=l)}),a},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(n){var r=this.model.getCurrentIndex();n==="+"?n=r+1:n==="-"&&(n=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},t.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<n);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",p8(i[a]).dataIndex<=n)},t.type="timeline.slider",t}(A2t);function D2t(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new CE({ordinalMeta:e.getCategories(),extent:[1/0,-1/0]});case"time":return new Ak({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new Qc}}function I2t(e,t){return Gr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()},e.get("padding"))}function L2t(e,t,n,r){var i=r.style,a=S1(e.get(["controlStyle",t]),r||{},new Ae(n[0],n[1],n[2],n[3]));return i&&a.setStyle(i),a}function v8(e,t,n,r,i,a){var o=t.get("color");if(i)i.setColor(o),n.add(i),a&&a.onUpdate(i);else{var s=e.get("symbol");i=Jr(s,-1,-1,2,2,o),i.setStyle("strokeNoScale",!0),n.add(i),a&&a.onCreate(i)}var l=t.getItemStyle(["color"]);i.setStyle(l),r=Xt({rectHover:!0,z2:100},r,!0);var u=d0(e.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var c=Vv(e.get("symbolOffset"),u);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var h=e.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function g8(e,t,n,r,i,a){if(!e.dragging){var o=i.getModel("checkpointStyle"),s=r.dataToCoord(i.getData().get("value",n));if(a||!o.get("animation",!0))e.attr({x:s,y:0}),t&&t.attr({shape:{x2:s}});else{var l={duration:o.get("animationDuration",!0),easing:o.get("animationEasing",!0)};e.stopAnimation(null,!0),e.animateTo({x:s,y:0},l),t&&t.animateTo({shape:{x2:s}},l)}}}function P2t(e){e.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,n,r){var i=n.getComponent("timeline");return i&&t.currentIndex!=null&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),n.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),te({currentIndex:i.option.currentIndex},t)}),e.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,n){var r=n.getComponent("timeline");r&&t.playState!=null&&r.setPlayState(t.playState)})}function R2t(e){var t=e&&e.timeline;ht(t)||(t=t?[t]:[]),R(t,function(n){n&&O2t(n)})}function O2t(e){var t=e.type,n={number:"value",time:"time"};if(n[t]&&(e.axisType=n[t],delete e.type),m8(e),wp(e,"controlPosition")){var r=e.controlStyle||(e.controlStyle={});wp(r,"position")||(r.position=e.controlPosition),r.position==="none"&&!wp(r,"show")&&(r.show=!1,delete r.position),delete e.controlPosition}R(e.data||[],function(i){se(i)&&!ht(i)&&(!wp(i,"value")&&wp(i,"name")&&(i.value=i.name),m8(i))})}function m8(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),r=e.label||e.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};R(r,function(o,s){!a[s]&&!wp(i,s)&&(i[s]=o)}),n.label&&!wp(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function wp(e,t){return e.hasOwnProperty(t)}function N2t(e){e.registerComponentModel(jet),e.registerComponentView(E2t),e.registerSubTypeDefaulter("timeline",function(){return"slider"}),P2t(e),e.registerPreprocessor(R2t)}function PF(e,t){if(!e)return!1;for(var n=ht(e)?e:[e],r=0;r<n.length;r++)if(n[r]&&n[r][t])return!0;return!1}function yw(e){hv(e,"label",["show"])}var _w=vn(),eh=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.createdBySelf=!1,n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),this._mergeOption(n,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(qe.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},t.prototype.mergeOption=function(n,r){this._mergeOption(n,r,!1,!1)},t.prototype._mergeOption=function(n,r,i,a){var o=this.mainType;i||r.eachSeries(function(s){var l=s.get(this.mainType,!0),u=_w(s)[o];if(!l||!l.data){_w(s)[o]=null;return}u?u._mergeOption(l,r,!0):(a&&yw(l),R(l.data,function(c){c instanceof Array?(yw(c[0]),yw(c[1])):yw(c)}),u=this.createMarkerModelFromSeries(l,this,r),ut(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),_w(s)[o]=u},this)},t.prototype.formatTooltip=function(n,r,i){var a=this.getData(),o=this.getRawValue(n),s=a.getName(n);return zi("section",{header:this.name,blocks:[zi("nameValue",{name:s,value:o,noName:!s,noValue:o==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(n){this._data=n},t.getMarkerModelFromSeries=function(n,r){return _w(n)[r]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ie);ti(eh,hk.prototype);var B2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,r,i){return new t(n,r,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(eh);function IN(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function k2t(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function xw(e,t,n,r,i,a){var o=[],s=Jc(t,r),l=s?t.getCalculationInfo("stackResultDimension"):r,u=RF(t,l,e),c=t.indicesOfNearest(l,u)[0];o[i]=t.get(n,c),o[a]=t.get(l,c);var h=t.get(r,c),f=Su(t.get(r,c));return f=Math.min(f,20),f>=0&&(o[a]=+o[a].toFixed(f)),[o,h]}var iL={min:_e(xw,"min"),max:_e(xw,"max"),average:_e(xw,"average"),median:_e(xw,"median")};function Db(e,t){if(t){var n=e.getData(),r=e.coordinateSystem,i=r&&r.dimensions;if(!k2t(t)&&!ht(t.coord)&&ht(i)){var a=Yet(t,n,r,e);if(t=ce(t),t.type&&iL[t.type]&&a.baseAxis&&a.valueAxis){var o=Le(i,a.baseAxis.dim),s=Le(i,a.valueAxis.dim),l=iL[t.type](n,a.baseDataDim,a.valueDataDim,o,s);t.coord=l[0],t.value=l[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null||!ht(i))t.coord=[];else for(var u=t.coord,c=0;c<2;c++)iL[u[c]]&&(u[c]=RF(n,n.mapDimension(i[c]),u[c]));return t}}function Yet(e,t,n,r){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=n.getAxis(F2t(r,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function F2t(e,t){var n=e.getData().getDimensionInfo(t);return n&&n.coordDim}function Ib(e,t){return e&&e.containData&&t.coord&&!IN(t)?e.containData(t.coord):!0}function z2t(e,t,n){return e&&e.containZone&&t.coord&&n.coord&&!IN(t)&&!IN(n)?e.containZone(t.coord,n.coord):!0}function qet(e,t){return e?function(n,r,i,a){var o=a<2?n.coord&&n.coord[a]:n.value;return Lf(o,t[a])}:function(n,r,i,a){return Lf(n.value,t[a])}}function RF(e,t,n){if(n==="average"){var r=0,i=0;return e.each(t,function(a,o){isNaN(a)||(r+=a,i++)}),r/i}else return n==="median"?e.getMedian(t):e.getDataExtent(t)[n==="max"?1:0]}var aL=vn(),OF=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(n,r,i){var a=this,o=this.markerGroupMap;o.each(function(s){aL(s).keep=!1}),r.eachSeries(function(s){var l=eh.getMarkerModelFromSeries(s,a.type);l&&a.renderSeries(s,l,r,i)}),o.each(function(s){!aL(s).keep&&a.group.remove(s.group)})},t.prototype.markKeep=function(n){aL(n).keep=!0},t.prototype.toggleBlurSeries=function(n,r){var i=this;R(n,function(a){var o=eh.getMarkerModelFromSeries(a,i.type);if(o){var s=o.getData();s.eachItemGraphicEl(function(l){l&&(r?kK(l):WB(l))})}})},t.type="marker",t}(Zn);function y8(e,t,n){var r=t.coordinateSystem;e.each(function(i){var a=e.getItemModel(i),o,s=Dt(a.get("x"),n.getWidth()),l=Dt(a.get("y"),n.getHeight());if(!isNaN(s)&&!isNaN(l))o=[s,l];else if(t.getMarkerPosition)o=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(r){var u=e.get(r.dimensions[0],i),c=e.get(r.dimensions[1],i);o=r.dataToPoint([u,c])}isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),e.setItemLayout(i,o)})}var U2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=eh.getMarkerModelFromSeries(a,"markPoint");o&&(y8(o.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new E1),h=V2t(o,n,r);r.setData(h),y8(r.getData(),n,a),h.each(function(f){var d=h.getItemModel(f),p=d.getShallow("symbol"),v=d.getShallow("symbolSize"),g=d.getShallow("symbolRotate"),m=d.getShallow("symbolOffset"),_=d.getShallow("symbolKeepAspect");if(ae(p)||ae(v)||ae(g)||ae(m)){var y=r.getRawValue(f),x=r.getDataParams(f);ae(p)&&(p=p(y,x)),ae(v)&&(v=v(y,x)),ae(g)&&(g=g(y,x)),ae(m)&&(m=m(y,x))}var S=d.getModel("itemStyle").getItemStyle(),b=w1(l,"color");S.fill||(S.fill=b),h.setItemVisual(f,{symbol:p,symbolSize:v,symbolRotate:g,symbolOffset:m,symbolKeepAspect:_,style:S})}),c.updateData(h),this.group.add(c.group),h.eachItemGraphicEl(function(f){f.traverse(function(d){fe(d).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},t.type="markPoint",t}(OF);function V2t(e,t,n){var r;e?r=yt(e&&e.dimensions,function(s){var l=t.getData().getDimensionInfo(t.getData().mapDimension(s))||{};return ut(ut({},l),{name:s,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new Ir(r,n),a=yt(n.get("data"),_e(Db,t));e&&(a=Gn(a,_e(Ib,e)));var o=qet(!!e,r);return i.initData(a,null,o),i}function G2t(e){e.registerComponentModel(B2t),e.registerComponentView(U2t),e.registerPreprocessor(function(t){PF(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}var H2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,r,i){return new t(n,r,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(eh),bw=vn(),W2t=function(e,t,n,r){var i=e.getData(),a;if(ht(r))a=r;else{var o=r.type;if(o==="min"||o==="max"||o==="average"||o==="median"||r.xAxis!=null||r.yAxis!=null){var s=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)s=t.getAxis(r.yAxis!=null?"y":"x"),l=Qi(r.yAxis,r.xAxis);else{var u=Yet(r,i,t,e);s=u.valueAxis;var c=wk(i,u.valueDataDim);l=RF(i,c,o)}var h=s.dim==="x"?0:1,f=1-h,d=ce(r),p={coord:[]};d.type=null,d.coord=[],d.coord[f]=-1/0,p.coord[f]=1/0;var v=n.get("precision");v>=0&&xn(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[h]=p.coord[h]=l,a=[d,p,{type:o,valueIndex:r.valueIndex,value:l}]}else a=[]}var g=[Db(e,a[0]),Db(e,a[1]),ut({},a[2])];return g[2].type=g[2].type||null,Xt(g[2],g[0]),Xt(g[2],g[1]),g};function SA(e){return!isNaN(e)&&!isFinite(e)}function _8(e,t,n,r){var i=1-e,a=r.dimensions[e];return SA(t[i])&&SA(n[i])&&t[e]===n[e]&&r.getAxis(a).containData(t[e])}function $2t(e,t){if(e.type==="cartesian2d"){var n=t[0].coord,r=t[1].coord;if(n&&r&&(_8(1,n,r,e)||_8(0,n,r,e)))return!0}return Ib(e,t[0])&&Ib(e,t[1])}function oL(e,t,n,r,i){var a=r.coordinateSystem,o=e.getItemModel(t),s,l=Dt(o.get("x"),i.getWidth()),u=Dt(o.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition)s=r.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=a.dimensions,h=e.get(c[0],t),f=e.get(c[1],t);s=a.dataToPoint([h,f])}if(Hv(a,"cartesian2d")){var d=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;SA(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[n?0:1]):SA(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var X2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=eh.getMarkerModelFromSeries(a,"markLine");if(o){var s=o.getData(),l=bw(o).from,u=bw(o).to;l.each(function(c){oL(l,c,!0,a,i),oL(u,c,!1,a,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},t.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new rF);this.group.add(c.group);var h=j2t(o,n,r),f=h.from,d=h.to,p=h.line;bw(r).from=f,bw(r).to=d,r.setData(p);var v=r.get("symbol"),g=r.get("symbolSize"),m=r.get("symbolRotate"),_=r.get("symbolOffset");ht(v)||(v=[v,v]),ht(g)||(g=[g,g]),ht(m)||(m=[m,m]),ht(_)||(_=[_,_]),h.from.each(function(x){y(f,x,!0),y(d,x,!1)}),p.each(function(x){var S=p.getItemModel(x).getModel("lineStyle").getLineStyle();p.setItemLayout(x,[f.getItemLayout(x),d.getItemLayout(x)]),S.stroke==null&&(S.stroke=f.getItemVisual(x,"style").fill),p.setItemVisual(x,{fromSymbolKeepAspect:f.getItemVisual(x,"symbolKeepAspect"),fromSymbolOffset:f.getItemVisual(x,"symbolOffset"),fromSymbolRotate:f.getItemVisual(x,"symbolRotate"),fromSymbolSize:f.getItemVisual(x,"symbolSize"),fromSymbol:f.getItemVisual(x,"symbol"),toSymbolKeepAspect:d.getItemVisual(x,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(x,"symbolOffset"),toSymbolRotate:d.getItemVisual(x,"symbolRotate"),toSymbolSize:d.getItemVisual(x,"symbolSize"),toSymbol:d.getItemVisual(x,"symbol"),style:S})}),c.updateData(p),h.line.eachItemGraphicEl(function(x){fe(x).dataModel=r,x.traverse(function(S){fe(S).dataModel=r})});function y(x,S,b){var w=x.getItemModel(S);oL(x,S,b,n,a);var A=w.getModel("itemStyle").getItemStyle();A.fill==null&&(A.fill=w1(l,"color")),x.setItemVisual(S,{symbolKeepAspect:w.get("symbolKeepAspect"),symbolOffset:xe(w.get("symbolOffset",!0),_[b?0:1]),symbolRotate:xe(w.get("symbolRotate",!0),m[b?0:1]),symbolSize:xe(w.get("symbolSize"),g[b?0:1]),symbol:xe(w.get("symbol",!0),v[b?0:1]),style:A})}this.markKeep(c),c.group.silent=r.get("silent")||n.get("silent")},t.type="markLine",t}(OF);function j2t(e,t,n){var r;e?r=yt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ut(ut({},c),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new Ir(r,n),a=new Ir(r,n),o=new Ir([],n),s=yt(n.get("data"),_e(W2t,t,e,n));e&&(s=Gn(s,_e($2t,e)));var l=qet(!!e,r);return i.initData(yt(s,function(u){return u[0]}),null,l),a.initData(yt(s,function(u){return u[1]}),null,l),o.initData(yt(s,function(u){return u[2]})),o.hasItemOption=!0,{from:i,to:a,line:o}}function Y2t(e){e.registerComponentModel(H2t),e.registerComponentView(X2t),e.registerPreprocessor(function(t){PF(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var q2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.createMarkerModelFromSeries=function(n,r,i){return new t(n,r,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(eh),Sw=vn(),K2t=function(e,t,n,r){var i=r[0],a=r[1];if(!(!i||!a)){var o=Db(e,i),s=Db(e,a),l=o.coord,u=s.coord;l[0]=Qi(l[0],-1/0),l[1]=Qi(l[1],-1/0),u[0]=Qi(u[0],1/0),u[1]=Qi(u[1],1/0);var c=MB([{},o,s]);return c.coord=[o.coord,s.coord],c.x0=o.x,c.y0=o.y,c.x1=s.x,c.y1=s.y,c}};function wA(e){return!isNaN(e)&&!isFinite(e)}function x8(e,t,n,r){var i=1-e;return wA(t[i])&&wA(n[i])}function Z2t(e,t){var n=t.coord[0],r=t.coord[1],i={coord:n,x:t.x0,y:t.y0},a={coord:r,x:t.x1,y:t.y1};return Hv(e,"cartesian2d")?n&&r&&(x8(1,n,r)||x8(0,n,r))?!0:z2t(e,i,a):Ib(e,i)||Ib(e,a)}function b8(e,t,n,r,i){var a=r.coordinateSystem,o=e.getItemModel(t),s,l=Dt(o.get(n[0]),i.getWidth()),u=Dt(o.get(n[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(r.getMarkerPosition){var c=e.getValues(["x0","y0"],t),h=e.getValues(["x1","y1"],t),f=a.clampData(c),d=a.clampData(h),p=[];n[0]==="x0"?p[0]=f[0]>d[0]?h[0]:c[0]:p[0]=f[0]>d[0]?c[0]:h[0],n[1]==="y0"?p[1]=f[1]>d[1]?h[1]:c[1]:p[1]=f[1]>d[1]?c[1]:h[1],s=r.getMarkerPosition(p,n,!0)}else{var v=e.get(n[0],t),g=e.get(n[1],t),m=[v,g];a.clampData&&a.clampData(m,m),s=a.dataToPoint(m,!0)}if(Hv(a,"cartesian2d")){var _=a.getAxis("x"),y=a.getAxis("y"),v=e.get(n[0],t),g=e.get(n[1],t);wA(v)?s[0]=_.toGlobalCoord(_.getExtent()[n[0]==="x0"?0:1]):wA(g)&&(s[1]=y.toGlobalCoord(y.getExtent()[n[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var S8=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],J2t=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.updateTransform=function(n,r,i){r.eachSeries(function(a){var o=eh.getMarkerModelFromSeries(a,"markArea");if(o){var s=o.getData();s.each(function(l){var u=yt(S8,function(h){return b8(s,l,h,a,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(n,r,i,a){var o=n.coordinateSystem,s=n.id,l=n.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new he});this.group.add(c.group),this.markKeep(c);var h=Q2t(o,n,r);r.setData(h),h.each(function(f){var d=yt(S8,function(A){return b8(h,f,A,n,a)}),p=o.getAxis("x").scale,v=o.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),_=[p.parse(h.get("x0",f)),p.parse(h.get("x1",f))],y=[v.parse(h.get("y0",f)),v.parse(h.get("y1",f))];Ns(_),Ns(y);var x=!(g[0]>_[1]||g[1]<_[0]||m[0]>y[1]||m[1]<y[0]),S=!x;h.setItemLayout(f,{points:d,allClipped:S});var b=h.getItemModel(f).getModel("itemStyle").getItemStyle(),w=w1(l,"color");b.fill||(b.fill=w,Ft(b.fill)&&(b.fill=kM(b.fill,.4))),b.stroke||(b.stroke=w),h.setItemVisual(f,"style",b)}),h.diff(Sw(c).data).add(function(f){var d=h.getItemLayout(f);if(!d.allClipped){var p=new ja({shape:{points:d.points}});h.setItemGraphicEl(f,p),c.group.add(p)}}).update(function(f,d){var p=Sw(c).data.getItemGraphicEl(d),v=h.getItemLayout(f);v.allClipped?p&&c.group.remove(p):(p?Tn(p,{shape:{points:v.points}},r,f):p=new ja({shape:{points:v.points}}),h.setItemGraphicEl(f,p),c.group.add(p))}).remove(function(f){var d=Sw(c).data.getItemGraphicEl(f);c.group.remove(d)}).execute(),h.eachItemGraphicEl(function(f,d){var p=h.getItemModel(d),v=h.getItemVisual(d,"style");f.useStyle(h.getItemVisual(d,"style")),ha(f,Fi(p),{labelFetcher:r,labelDataIndex:d,defaultText:h.getName(d)||"",inheritColor:Ft(v.fill)?kM(v.fill,1):"#000"}),ca(f,p),Vr(f,null,null,p.get(["emphasis","disabled"])),fe(f).dataModel=r}),Sw(c).data=h,c.group.silent=r.get("silent")||n.get("silent")},t.type="markArea",t}(OF);function Q2t(e,t,n){var r,i,a=["x0","y0","x1","y1"];if(e){var o=yt(e&&e.dimensions,function(u){var c=t.getData(),h=c.getDimensionInfo(c.mapDimension(u))||{};return ut(ut({},h),{name:u,ordinalMeta:null})});i=yt(a,function(u,c){return{name:u,type:o[c%2].type}}),r=new Ir(i,n)}else i=[{name:"value",type:"float"}],r=new Ir(i,n);var s=yt(n.get("data"),_e(K2t,t,e,n));e&&(s=Gn(s,_e(Z2t,e)));var l=e?function(u,c,h,f){var d=u.coord[Math.floor(f/2)][f%2];return Lf(d,i[f])}:function(u,c,h,f){return Lf(u.value,i[f])};return r.initData(s,null,l),r.hasItemOption=!0,r}function tDt(e){e.registerComponentModel(q2t),e.registerComponentView(J2t),e.registerPreprocessor(function(t){PF(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var eDt=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},LN=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i),n.selected=n.selected||{},this._updateSelector(n)},t.prototype.mergeOption=function(n,r){e.prototype.mergeOption.call(this,n,r),this._updateSelector(n)},t.prototype._updateSelector=function(n){var r=n.selector,i=this.ecModel;r===!0&&(r=n.selector=["all","inverse"]),ht(r)&&R(r,function(a,o){Ft(a)&&(a={type:a}),r[o]=Xt(a,eDt(i,a.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<n.length;i++){var a=n[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(n[0].get("name"))}},t.prototype._updateData=function(n){var r=[],i=[];n.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var h=l.legendVisualProvider,f=h.getAllNames();n.isSeriesFiltered(l)||(i=i.concat(f)),f.length?r=r.concat(f):c=!0}else c=!0;c&&BB(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,o=jt(),s=yt(a,function(l){return(Ft(l)||xn(l))&&(l={name:l}),o.get(l.name)?null:(o.set(l.name,!0),new pn(l,this,this.ecModel))},this);this._data=Gn(s,function(l){return!!l})},t.prototype.getData=function(){return this._data},t.prototype.select=function(n){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;R(a,function(o){r[o.get("name")]=!1})}r[n]=!0},t.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},t.prototype.toggleSelected=function(n){var r=this.option.selected;r.hasOwnProperty(n)||(r[n]=!0),this[r[n]?"unSelect":"select"](n)},t.prototype.allSelect=function(){var n=this._data,r=this.option.selected;R(n,function(i){r[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var n=this._data,r=this.option.selected;R(n,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},t.prototype.isSelected=function(n){var r=this.option.selected;return!(r.hasOwnProperty(n)&&!r[n])&&Le(this._availableNames,n)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Ie),pg=_e,PN=R,ww=he,Ket=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return t.prototype.init=function(){this.group.add(this._contentGroup=new ww),this.group.add(this._selectorGroup=new ww),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(n,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var o=n.get("align"),s=n.get("orient");(!o||o==="auto")&&(o=n.get("left")==="right"&&s==="vertical"?"right":"left");var l=n.get("selector",!0),u=n.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(o,n,r,i,l,s,u);var c=n.getBoxLayoutParams(),h={width:i.getWidth(),height:i.getHeight()},f=n.get("padding"),d=Gr(c,h,f),p=this.layoutInner(n,o,d,a,l,u),v=Gr(te({width:p.width,height:p.height},c),h,f);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Fet(p,n))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this.getContentGroup(),c=jt(),h=r.get("selectedMode"),f=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&f.push(d.id)}),PN(r.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new ww;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var _=m.getData(),y=_.getVisual("legendLineStyle")||{},x=_.getVisual("legendIcon"),S=_.getVisual("style"),b=this._createItem(m,v,p,d,r,n,y,S,x,h,a);b.on("click",pg(w8,v,null,a,f)).on("mouseover",pg(RN,m.name,null,a,f)).on("mouseout",pg(ON,m.name,null,a,f)),i.ssr&&b.eachChild(function(w){var A=fe(w);A.seriesIndex=m.seriesIndex,A.dataIndex=p,A.ssrType="legend"}),c.set(v,!0)}else i.eachRawSeries(function(w){if(!c.get(v)&&w.legendVisualProvider){var A=w.legendVisualProvider;if(!A.containName(v))return;var T=A.indexOfName(v),M=A.getItemVisual(T,"style"),C=A.getItemVisual(T,"legendIcon"),E=Va(M.fill);E&&E[3]===0&&(E[3]=.2,M=ut(ut({},M),{fill:Vc(E,"rgba")}));var D=this._createItem(w,v,p,d,r,n,{},M,C,h,a);D.on("click",pg(w8,null,v,a,f)).on("mouseover",pg(RN,null,v,a,f)).on("mouseout",pg(ON,null,v,a,f)),i.ssr&&D.eachChild(function(I){var L=fe(I);L.seriesIndex=w.seriesIndex,L.dataIndex=p,L.ssrType="legend"}),c.set(v,!0)}},this)},this),o&&this._createSelector(o,r,a,s,l)},t.prototype._createSelector=function(n,r,i,a,o){var s=this.getSelectorGroup();PN(n,function(u){var c=u.type,h=new Qe({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(h);var f=r.getModel("selectorLabel"),d=r.getModel(["emphasis","selectorLabel"]);ha(h,{normal:f,emphasis:d},{defaultText:u.title}),Qp(h)})},t.prototype._createItem=function(n,r,i,a,o,s,l,u,c,h,f){var d=n.visualDrawType,p=o.get("itemWidth"),v=o.get("itemHeight"),g=o.isSelected(r),m=a.get("symbolRotate"),_=a.get("symbolKeepAspect"),y=a.get("icon");c=y||c||"roundRect";var x=nDt(c,a,l,u,d,g,f),S=new ww,b=a.getModel("textStyle");if(ae(n.getLegendIcon)&&(!y||y==="inherit"))S.add(n.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:_}));else{var w=y==="inherit"&&n.getData().getVisual("symbol")?m==="inherit"?n.getData().getVisual("symbolRotate"):m:0;S.add(rDt({itemWidth:p,itemHeight:v,icon:c,iconRotate:w,itemStyle:x.itemStyle,lineStyle:x.lineStyle,symbolKeepAspect:_}))}var A=s==="left"?p+5:-5,T=s,M=o.get("formatter"),C=r;Ft(M)&&M?C=M.replace("{name}",r??""):ae(M)&&(C=M(r));var E=g?b.getTextColor():a.get("inactiveColor");S.add(new Qe({style:Hn(b,{text:C,x:A,y:v/2,fill:E,align:T,verticalAlign:"middle"},{inheritColor:E})}));var D=new nn({shape:S.getBoundingRect(),style:{fill:"transparent"}}),I=a.getModel("tooltip");return I.get("show")&&i0({el:D,componentModel:o,itemName:r,itemTooltipOption:I.option}),S.add(D),S.eachChild(function(L){L.silent=!0}),D.silent=!h,this.getContentGroup().add(S),Qp(S),S.__legendDataIndex=i,S},t.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getContentGroup(),u=this.getSelectorGroup();ev(n.get("orient"),l,n.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),o){ev("horizontal",u,n.get("selectorItemGap",!0));var f=u.getBoundingRect(),d=[-f.x,-f.y],p=n.get("selectorButtonGap",!0),v=n.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",_=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:h[v]+=f[g]+p,d[1-v]+=c[m]/2-f[m]/2,u.x=d[0],u.y=d[1],l.x=h[0],l.y=h[1];var y={x:0,y:0};return y[g]=c[g]+p+f[g],y[m]=Math.max(c[m],f[m]),y[_]=Math.min(0,f[_]+d[1-v]),y}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(Zn);function nDt(e,t,n,r,i,a,o){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),PN(g,function(_,y){g[y]==="inherit"&&(g[y]=m[y])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");u.decal=!h||h==="inherit"?r.decal:cy(h,o),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:n).opacity),s(u,r);var f=t.getModel("lineStyle"),d=f.getLineStyle();if(s(d,n),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),d.stroke==="auto"&&(d.stroke=r.fill),!a){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=f.get("inactiveColor"),d.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function rDt(e){var t=e.icon||"roundRect",n=Jr(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function w8(e,t,n,r){ON(e,t,n,r),n.dispatchAction({type:"legendToggleSelect",name:e??t}),RN(e,t,n,r)}function Zet(e){for(var t=e.getZr().storage.getDisplayList(),n,r=0,i=t.length;r<i&&!(n=t[r].states.emphasis);)r++;return n&&n.hoverLayer}function RN(e,t,n,r){Zet(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:r})}function ON(e,t,n,r){Zet(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:r})}function iDt(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var r=0;r<t.length;r++)if(!t[r].isSelected(n.name))return!1;return!0})}function b_(e,t,n){var r={},i=e==="toggleSelected",a;return n.eachComponent("legend",function(o){i&&a!=null?o[a?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?o[e]():(o[e](t.name),a=o.isSelected(t.name));var s=o.getData();R(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=o.isSelected(u);r.hasOwnProperty(u)?r[u]=r[u]&&c:r[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:r}:{name:t.name,selected:r}}function aDt(e){e.registerAction("legendToggleSelect","legendselectchanged",_e(b_,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",_e(b_,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",_e(b_,"inverseSelect")),e.registerAction("legendSelect","legendselected",_e(b_,"select")),e.registerAction("legendUnSelect","legendunselected",_e(b_,"unSelect"))}function Jet(e){e.registerComponentModel(LN),e.registerComponentView(Ket),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,iDt),e.registerSubTypeDefaulter("legend",function(){return"plain"}),aDt(e)}var oDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},t.prototype.init=function(n,r,i){var a=l0(n);e.prototype.init.call(this,n,r,i),T8(this,n,a)},t.prototype.mergeOption=function(n,r){e.prototype.mergeOption.call(this,n,r),T8(this,this.option,n)},t.type="legend.scroll",t.defaultOption=ld(LN.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(LN);function T8(e,t,n){var r=e.getOrient(),i=[1,1];i[r.index]=0,Vf(t,n,{type:"box",ignoreSize:!!i})}var M8=he,sL=["width","height"],lL=["x","y"],sDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new M8),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new M8)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(n,r,i,a,o,s,l){var u=this;e.prototype.renderInner.call(this,n,r,i,a,o,s,l);var c=this._controllerGroup,h=r.get("pageIconSize",!0),f=ht(h)?h:[h,h];p("pagePrev",0);var d=r.getModel("pageTextStyle");c.add(new Qe({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",_=S1(r.get("pageIcons",!0)[r.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,r,a)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});_.name=v,c.add(_)}},t.prototype.layoutInner=function(n,r,i,a,o,s){var l=this.getSelectorGroup(),u=n.getOrient().index,c=sL[u],h=lL[u],f=sL[1-u],d=lL[1-u];o&&ev("horizontal",l,n.get("selectorItemGap",!0));var p=n.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=ce(i);o&&(m[c]=i[c]-v[c]-p);var _=this._layoutContentAndController(n,a,m,u,c,f,d,h);if(o){if(s==="end")g[u]+=_[c]+p;else{var y=v[c]+p;g[u]-=y,_[h]-=y}_[c]+=v[c]+p,g[1-u]+=_[d]+_[f]/2-v[f]/2,_[f]=Math.max(_[f],v[f]),_[d]=Math.min(_[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return _},t.prototype._layoutContentAndController=function(n,r,i,a,o,s,l,u){var c=this.getContentGroup(),h=this._containerGroup,f=this._controllerGroup;ev(n.get("orient"),c,n.get("itemGap"),a?i.width:null,a?null:i.height),ev("horizontal",f,n.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=f.getBoundingRect(),v=this._showController=d[o]>i[o],g=[-d.x,-d.y];r||(g[a]=c[u]);var m=[0,0],_=[-p.x,-p.y],y=xe(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(v){var x=n.get("pageButtonPosition",!0);x==="end"?_[a]+=i[o]-p[o]:m[a]+=p[o]+y}_[1-a]+=d[s]/2-p[s]/2,c.setPosition(g),h.setPosition(m),f.setPosition(_);var S={x:0,y:0};if(S[o]=v?i[o]:d[o],S[s]=Math.max(d[s],p[s]),S[l]=Math.min(0,p[l]+_[1-a]),h.__rectSize=i[o],v){var b={x:0,y:0};b[o]=Math.max(i[o]-p[o]-y,0),b[s]=S[s],h.setClipPath(new nn({shape:b})),h.__rectSize=b[o]}else f.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var w=this._getPageInfo(n);return w.pageIndex!=null&&Tn(c,{x:w.contentPosition[0],y:w.contentPosition[1]},v?n:null),this._updatePageInfoView(n,w),S},t.prototype._pageGo=function(n,r,i){var a=this._getPageInfo(r)[n];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},t.prototype._updatePageInfoView=function(n,r){var i=this._controllerGroup;R(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",f=r[h]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",f?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),d.cursor=f?"pointer":"default")});var a=i.childOfName("pageText"),o=n.get("pageFormatter"),s=r.pageIndex,l=s!=null?s+1:0,u=r.pageCount;a&&o&&a.setStyle("text",Ft(o)?o.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):o({current:l,total:u}))},t.prototype._getPageInfo=function(n){var r=n.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,o=n.getOrient().index,s=sL[o],l=lL[o],u=this._findTargetItemIndex(r),c=i.children(),h=c[u],f=c.length,d=f?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var v=x(h);p.contentPosition[o]=-v.s;for(var g=u+1,m=v,_=v,y=null;g<=f;++g)y=x(c[g]),(!y&&_.e>m.s+a||y&&!S(y,m.s))&&(_.i>m.i?m=_:m=y,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),_=y;for(var g=u-1,m=v,_=v,y=null;g>=-1;--g)y=x(c[g]),(!y||!S(_,y.s))&&m.i<_.i&&(_=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=y;return p;function x(b){if(b){var w=b.getBoundingRect(),A=w[l]+b[l];return{s:A,e:A+w[s],i:b.__legendDataIndex}}}function S(b,w){return b.e>=w&&b.s<=w+a}},t.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(o,s){var l=o.__legendDataIndex;a==null&&l!=null&&(a=s),l===n&&(r=s)}),r??a},t.type="legend.scroll",t}(Ket);function lDt(e){e.registerAction("legendScroll","legendscroll",function(t,n){var r=t.scrollDataIndex;r!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(r)})})}function uDt(e){ue(Jet),e.registerComponentModel(oDt),e.registerComponentView(sDt),lDt(e)}function cDt(e){ue(Jet),ue(uDt)}var hDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.inside",t.defaultOption=ld(Eb.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(Eb),NF=vn();function fDt(e,t,n){NF(e).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(t.uid);i&&(i.getRange=n)})}function dDt(e,t){for(var n=NF(e).coordSysRecordMap,r=n.keys(),i=0;i<r.length;i++){var a=r[i],o=n.get(a),s=o.dataZoomInfoMap;if(s){var l=t.uid,u=s.get(l);u&&(s.removeKey(l),s.keys().length||Qet(n,o))}}}function Qet(e,t){if(t){e.removeKey(t.model.uid);var n=t.controller;n&&n.dispose()}}function pDt(e,t){var n={model:t,containsPoint:_e(gDt,t),dispatchAction:_e(vDt,e),dataZoomInfoMap:null,controller:null},r=n.controller=new R1(e.getZr());return R(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var o=[];n.dataZoomInfoMap.each(function(s){if(a.isAvailableBehavior(s.model.option)){var l=(s.getRange||{})[i],u=l&&l(s.dzReferCoordSysInfo,n.model.mainType,n.controller,a);!s.model.get("disabled",!0)&&u&&o.push({dataZoomId:s.model.id,start:u[0],end:u[1]})}}),o.length&&n.dispatchAction(o)})}),n}function vDt(e,t){e.isDisposed()||e.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function gDt(e,t,n,r){return e.coordinateSystem.containPoint([n,r])}function mDt(e){var t,n="type_",r={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return e.each(function(a){var o=a.model,s=o.get("disabled",!0)?!1:o.get("zoomLock",!0)?"move":!0;r[n+s]>r[n+t]&&(t=s),i=i&&o.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function yDt(e){e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,function(t,n){var r=NF(n),i=r.coordSysRecordMap||(r.coordSysRecordMap=jt());i.each(function(a){a.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var o=Net(a);R(o.infoList,function(s){var l=s.model.uid,u=i.get(l)||i.set(l,pDt(n,s.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=jt());c.set(a.uid,{dzReferCoordSysInfo:s,model:a,getRange:null})})}),i.each(function(a){var o=a.controller,s,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(s=l.get(u))}if(!s){Qet(i,a);return}var c=mDt(l);o.enable(c.controlType,c.opt),o.setPointerChecker(a.containsPoint),f0(a,"dispatchAction",s.model.get("throttle",!0),"fixRate")})})}var _Dt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return t.prototype.render=function(n,r,i){if(e.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),fDt(i,n,{pan:Vt(uL.pan,this),zoom:Vt(uL.zoom,this),scrollMove:Vt(uL.scrollMove,this)})},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){dDt(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(AF),uL={zoom:function(e,t,n,r){var i=this.range,a=i.slice(),o=e.axisModels[0];if(o){var s=cL[t](null,[r.originX,r.originY],o,n,e),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/r.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if($v(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:A8(function(e,t,n,r,i,a){var o=cL[r]([a.oldX,a.oldY],[a.newX,a.newY],t,i,n);return o.signal*(e[1]-e[0])*o.pixel/o.pixelLength}),scrollMove:A8(function(e,t,n,r,i,a){var o=cL[r]([0,0],[a.scrollDelta,a.scrollDelta],t,i,n);return o.signal*(e[1]-e[0])*a.scrollDelta})};function A8(e){return function(t,n,r,i){var a=this.range,o=a.slice(),s=t.axisModels[0];if(s){var l=e(o,s,t,n,r,i);if($v(l,o,[0,100],"all"),this.range=o,a[0]!==o[0]||a[1]!==o[1])return o}}}var cL={grid:function(e,t,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem.getRect();return e=e||[0,0],a.dim==="x"?(o.pixel=t[0]-e[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(e,t,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),n.mainType==="radiusAxis"?(o.pixel=t[0]-e[0],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?1:-1):(o.pixel=t[1]-e[1],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?-1:1),o},singleAxis:function(e,t,n,r,i){var a=n.axis,o=i.model.coordinateSystem.getRect(),s={};return e=e||[0,0],a.orient==="horizontal"?(s.pixel=t[0]-e[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};function tnt(e){CF(e),e.registerComponentModel(hDt),e.registerComponentView(_Dt),yDt(e)}var xDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=ld(Eb.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(Eb),S_=nn,C8=7,bDt=1,hL=30,SDt=7,w_="horizontal",E8="vertical",wDt=5,TDt=["line","bar","candlestick","scatter"],MDt={easing:"cubicOut",duration:100,delay:0},ADt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._displayables={},n}return t.prototype.init=function(n,r){this.api=r,this._onBrush=Vt(this._onBrush,this),this._onBrushEnd=Vt(this._onBrushEnd,this)},t.prototype.render=function(n,r,i,a){if(e.prototype.render.apply(this,arguments),f0(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},t.prototype.dispose=function(){this._clear(),e.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){vb(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new he;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var n=this.dataZoomModel,r=this.api,i=n.get("brushSelect"),a=i?SDt:0,o=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===w_?{right:s.width-o.x-o.width,top:s.height-hL-C8-a,width:o.width,height:hL}:{right:C8,top:o.y,width:hL,height:o.height},u=l0(n.option);R(["right","top","width","height"],function(h){u[h]==="ph"&&(u[h]=l[h])});var c=Gr(u,s);this._location={x:c.x,y:c.y},this._size=[c.width,c.height],this._orient===E8&&this._size.reverse()},t.prototype._positionGroup=function(){var n=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),o=a&&a.get("inverse"),s=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;s.attr(i===w_&&!o?{scaleY:l?1:-1,scaleX:1}:i===w_&&o?{scaleY:l?1:-1,scaleX:-1}:i===E8&&!o?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=n.getBoundingRect([s]);n.x=r.x-u.x,n.y=r.y-u.y,n.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var n=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=n.get("brushSelect");i.add(new S_({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var o=new S_({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Vt(this._onClickPanel,this)}),s=this.api.getZr();a?(o.on("mousedown",this._onBrushStart,this),o.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(o)},t.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var r=this._size,i=this._shadowSize||[],a=n.series,o=a.getRawData(),s=a.getShadowDim&&a.getShadowDim(),l=s&&o.getDimensionInfo(s)?a.getShadowDim():n.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(o!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var h=o.getDataExtent(l),f=(h[1]-h[0])*.3;h=[h[0]-f,h[1]+f];var d=[0,r[1]],p=[0,r[0]],v=[[r[0],0],[0,0]],g=[],m=p[1]/(o.count()-1),_=0,y=Math.round(o.count()/r[0]),x;o.each([l],function(T,M){if(y>0&&M%y){_+=m;return}var C=T==null||isNaN(T)||T==="",E=C?0:Cn(T,h,d,!0);C&&!x&&M?(v.push([v[v.length-1][0],0]),g.push([g[g.length-1][0],0])):!C&&x&&(v.push([_,0]),g.push([_,0])),v.push([_,E]),g.push([_,E]),_+=m,x=C}),u=this._shadowPolygonPts=v,c=this._shadowPolylinePts=g}this._shadowData=o,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var S=this.dataZoomModel;function b(T){var M=S.getModel(T?"selectedDataBackground":"dataBackground"),C=new he,E=new ja({shape:{points:u},segmentIgnoreThreshold:1,style:M.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),D=new Ja({shape:{points:c},segmentIgnoreThreshold:1,style:M.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return C.add(E),C.add(D),C}for(var w=0;w<3;w++){var A=b(w===1);this._displayables.sliderGroup.add(A),this._displayables.dataShadowSegs.push(A)}},t.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,r=n.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return n.eachTargetAxis(function(o,s){var l=n.getAxisProxy(o,s).getTargetSeriesModels();R(l,function(u){if(!i&&!(r!==!0&&Le(TDt,u.get("type"))<0)){var c=a.getComponent(Tf(o),s).axis,h=CDt(o),f,d=u.coordinateSystem;h!=null&&d.getOtherAxis&&(f=d.getOtherAxis(c).inverse),h=u.getData().mapDimension(h),i={thisAxis:c,series:u,thisDim:o,otherDim:h,otherAxisInverse:f}}},this)},this),i}},t.prototype._renderHandle=function(){var n=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],o=this._displayables.sliderGroup,s=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),f=r.filler=new S_({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});o.add(f),o.add(new S_({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:bDt,fill:"rgba(0,0,0,0)"}})),R([0,1],function(y){var x=l.get("handleIcon");!QM[x]&&x.indexOf("path://")<0&&x.indexOf("image://")<0&&(x="path://"+x);var S=Jr(x,-1,0,2,2,null,!0);S.attr({cursor:D8(this._orient),draggable:!0,drift:Vt(this._onDragMove,this,y),ondragend:Vt(this._onDragEnd,this),onmouseover:Vt(this._showDataInfo,this,!0),onmouseout:Vt(this._showDataInfo,this,!1),z2:5});var b=S.getBoundingRect(),w=l.get("handleSize");this._handleHeight=Dt(w,this._size[1]),this._handleWidth=b.width/b.height*this._handleHeight,S.setStyle(l.getModel("handleStyle").getItemStyle()),S.style.strokeNoScale=!0,S.rectHover=!0,S.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Qp(S);var A=l.get("handleColor");A!=null&&(S.style.fill=A),o.add(i[y]=S);var T=l.getModel("textStyle");n.add(a[y]=new Qe({silent:!0,invisible:!0,style:Hn(T,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:T.getTextColor(),font:T.getFont()}),z2:10}))},this);var d=f;if(h){var p=Dt(l.get("moveHandleSize"),s[1]),v=r.moveHandle=new nn({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:p}}),g=p*.8,m=r.moveHandleIcon=Jr(l.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=s[1]+p/2-.5,v.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var _=Math.min(s[1]/2,Math.max(p,10));d=r.moveZone=new nn({invisible:!0,shape:{y:s[1]-_,height:p+_}}),d.on("mouseover",function(){u.enterEmphasis(v)}).on("mouseout",function(){u.leaveEmphasis(v)}),o.add(v),o.add(m),o.add(d)}d.attr({draggable:!0,cursor:D8(this._orient),drift:Vt(this._onDragMove,this,"all"),ondragstart:Vt(this._showDataInfo,this,!0),ondragend:Vt(this._onDragEnd,this),onmouseover:Vt(this._showDataInfo,this,!0),onmouseout:Vt(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Cn(n[0],[0,100],r,!0),Cn(n[1],[0,100],r,!0)]},t.prototype._updateInterval=function(n,r){var i=this.dataZoomModel,a=this._handleEnds,o=this._getViewExtent(),s=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];$v(r,a,o,i.get("zoomLock")?"all":n,s.minSpan!=null?Cn(s.minSpan,l,o,!0):null,s.maxSpan!=null?Cn(s.maxSpan,l,o,!0):null);var u=this._range,c=this._range=Ns([Cn(a[0],o,l,!0),Cn(a[1],o,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},t.prototype._updateView=function(n){var r=this._displayables,i=this._handleEnds,a=Ns(i.slice()),o=this._size;R([0,1],function(d){var p=r.handles[d],v=this._handleHeight;p.attr({scaleX:v/2,scaleY:v/2,x:i[d]+(d?-1:1),y:o[1]/2-v/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:o[1]});var s={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(s),r.moveZone.setShape(s),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",s.x+s.width/2));for(var l=r.dataShadowSegs,u=[0,a[0],a[1],o[0]],c=0;c<l.length;c++){var h=l[c],f=h.getClipPath();f||(f=new nn,h.setClipPath(f)),f.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:o[1]})}this._updateDataInfo(n)},t.prototype._updateDataInfo=function(n){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,o=this._orient,s=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=n?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();s=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var f=Ns(this._handleEnds.slice());d.call(this,0),d.call(this,1);function d(p){var v=tv(i.handles[p].parent,this.group),g=fE(p===0?"right":"left",v),m=this._handleWidth/2+wDt,_=Cl([f[p]+(p===0?-m:m),this._size[1]/2],v);a[p].setStyle({x:_[0],y:_[1],verticalAlign:o===w_?"middle":g,align:o===w_?g:"center",text:s[p]})}},t.prototype._formatLabel=function(n,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),o=i.get("labelPrecision");(o==null||o==="auto")&&(o=r.getPixelPrecision());var s=n==null||isNaN(n)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(o,20));return ae(a)?a(n,s):Ft(a)?a.replace("{value}",s):s},t.prototype._showDataInfo=function(n){n=this._dragging||n;var r=this._displayables,i=r.handleLabels;i[0].attr("invisible",!n),i[1].attr("invisible",!n),r.moveHandle&&this.api[n?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},t.prototype._onDragMove=function(n,r,i,a){this._dragging=!0,jc(a.event);var o=this._displayables.sliderGroup.getLocalTransform(),s=Cl([r,i],o,!0),l=this._updateInterval(n,s[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(n){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,o=(a[0]+a[1])/2,s=this._updateInterval("all",i[0]-o);this._updateView(),s&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(n){var r=n.offsetX,i=n.offsetY;this._brushStart=new Me(r,i),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(n){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),s=[0,100];this._range=Ns([Cn(i.x,o,s,!0),Cn(i.x+i.width,o,s,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(n){this._brushing&&(jc(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},t.prototype._updateBrushRect=function(n,r){var i=this._displayables,a=this.dataZoomModel,o=i.brushRect;o||(o=i.brushRect=new S_({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(o)),o.attr("ignore",!1);var s=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(n,r),c=l.transformCoordToLocal(s.x,s.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),o.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},t.prototype._dispatchZoomAction=function(n){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?MDt:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var n,r=Net(this.dataZoomModel).infoList;if(!n&&r.length){var i=r[0].model.coordinateSystem;n=i.getRect&&i.getRect()}if(!n){var a=this.api.getWidth(),o=this.api.getHeight();n={x:a*.2,y:o*.2,width:a*.6,height:o*.6}}return n},t.type="dataZoom.slider",t}(AF);function CDt(e){var t={x:"y",y:"x",radius:"angle",angle:"radius"};return t[e]}function D8(e){return e==="vertical"?"ns-resize":"ew-resize"}function ent(e){e.registerComponentModel(xDt),e.registerComponentView(ADt),CF(e)}function EDt(e){ue(tnt),ue(ent)}var nnt={get:function(e,t,n){var r=ce((DDt[e]||{})[t]);return n&&ht(r)?r[r.length-1]:r}},DDt={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},I8=Ni.mapVisual,IDt=Ni.eachVisual,LDt=ht,L8=R,PDt=Ns,RDt=Cn,TA=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return t.prototype.init=function(n,r,i){this.mergeDefaultAndTheme(n,i)},t.prototype.optionUpdated=function(n,r){var i=this.option;!r&&$et(i,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(n){var r=this.stateList;n=Vt(n,this),this.controllerVisuals=EN(this.option.controller,r,n),this.targetVisuals=EN(this.option.target,r,n)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,r=[];return n==null||n==="all"?this.ecModel.eachSeries(function(i,a){r.push(a)}):r=jn(n),r},t.prototype.eachTargetSeries=function(n,r){R(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&n.call(r,a)},this)},t.prototype.isTargetSeries=function(n){var r=!1;return this.eachTargetSeries(function(i){i===n&&(r=!0)}),r},t.prototype.formatValueText=function(n,r,i){var a=this.option,o=a.precision,s=this.dataBound,l=a.formatter,u;i=i||["<",">"],ht(n)&&(n=n.slice(),u=!0);var c=r?n:u?[h(n[0]),h(n[1])]:h(n);if(Ft(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(ae(l))return u?l(n[0],n[1]):l(n);if(u)return n[0]===s[0]?i[0]+" "+c[1]:n[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(f){return f===s[0]?"min":f===s[1]?"max":(+f).toFixed(Math.min(o,20))}},t.prototype.resetExtent=function(){var n=this.option,r=PDt([n.min,n.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(n){var r=this.option.dimension;if(r!=null)return n.getDimensionIndex(r);for(var i=n.dimensions,a=i.length-1;a>=0;a--){var o=i[a],s=n.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var n=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),o=r.controller||(r.controller={});Xt(a,i),Xt(o,i);var s=this.isCategory();l.call(this,a),l.call(this,o),u.call(this,a,"inRange","outOfRange"),c.call(this,o);function l(h){LDt(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:n.get("gradientColor")}}function u(h,f,d){var p=h[f],v=h[d];p&&!v&&(v=h[d]={},L8(p,function(g,m){if(Ni.isValidType(m)){var _=nnt.get(m,"inactive",s);_!=null&&(v[m]=_,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(h){var f=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,d=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";L8(this.stateList,function(m){var _=this.itemSize,y=h[m];y||(y=h[m]={color:s?p:[p]}),y.symbol==null&&(y.symbol=f&&ce(f)||(s?g:[g])),y.symbolSize==null&&(y.symbolSize=d&&ce(d)||(s?_[0]:[_[0],_[0]])),y.symbol=I8(y.symbol,function(b){return b==="none"?g:b});var x=y.symbolSize;if(x!=null){var S=-1/0;IDt(x,function(b){b>S&&(S=b)}),y.symbolSize=I8(x,function(b){return RDt(b,[0,S],[0,_[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(n){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(n){return null},t.prototype.getVisualMeta=function(n){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ie),P8=[20,140],ODt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.optionUpdated=function(n,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=P8[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=P8[1])},t.prototype._resetRange=function(){var n=this.getExtent(),r=this.option.range;!r||r.auto?(n.auto=1,this.option.range=n):ht(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],n[0]),r[1]=Math.min(r[1],n[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),R(this.stateList,function(n){var r=this.option.controller[n].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},t.prototype.getSelected=function(){var n=this.getExtent(),r=Ns((this.get("range")||[]).slice());return r[0]>n[1]&&(r[0]=n[1]),r[1]>n[1]&&(r[1]=n[1]),r[0]<n[0]&&(r[0]=n[0]),r[1]<n[0]&&(r[1]=n[0]),r},t.prototype.getValueState=function(n){var r=this.option.range,i=this.getExtent();return(r[0]<=i[0]||r[0]<=n)&&(r[1]>=i[1]||n<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var r=[];return this.eachTargetSeries(function(i){var a=[],o=i.getData();o.each(this.getDataDimensionIndex(o),function(s,l){n[0]<=s&&s<=n[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},t.prototype.getVisualMeta=function(n){var r=R8(this,"outOfRange",this.getExtent()),i=R8(this,"inRange",this.option.range.slice()),a=[];function o(d,p){a.push({value:d,color:n(d,p)})}for(var s=0,l=0,u=i.length,c=r.length;l<c&&(!i.length||r[l]<=i[0]);l++)r[l]<i[s]&&o(r[l],"outOfRange");for(var h=1;s<u;s++,h=0)h&&a.length&&o(i[s],"outOfRange"),o(i[s],"inRange");for(var h=1;l<c;l++)(!i.length||i[i.length-1]<r[l])&&(h&&(a.length&&o(a[a.length-1].value,"outOfRange"),h=0),o(r[l],"outOfRange"));var f=a.length;return{stops:a,outerColors:[f?a[0].color:"transparent",f?a[f-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=ld(TA.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(TA);function R8(e,t,n){if(n[0]===n[1])return n.slice();for(var r=200,i=(n[1]-n[0])/r,a=n[0],o=[],s=0;s<=r&&a<n[1];s++)o.push(a),a+=i;return o.push(n[1]),o}var rnt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return t.prototype.init=function(n,r){this.ecModel=n,this.api=r},t.prototype.render=function(n,r,i,a){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,r,i,a)},t.prototype.renderBackground=function(n){var r=this.visualMapModel,i=s0(r.get("padding")||0),a=n.getBoundingRect();n.add(new nn({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(n,r,i){i=i||{};var a=i.forceState,o=this.visualMapModel,s={};if(r==="color"){var l=o.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var h=o.controllerVisuals[a||o.getValueState(n)],f=Ni.prepareVisualTypes(h);return R(f,function(d){var p=h[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=h.__alphaForOpacity),Ni.dependsOn(d,r)&&p&&p.applyVisual(n,u,c)}),s[r]},t.prototype.positionGroup=function(n){var r=this.visualMapModel,i=this.api;_E(n,r.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(n,r,i,a){},t.type="visualMap",t}(Zn),O8=[["left","right","width"],["top","bottom","height"]];function int(e,t,n){var r=e.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:t.getWidth(),height:t.getHeight()},o=r.orient==="horizontal"?1:0,s=O8[o],l=[0,null,10],u={},c=0;c<3;c++)u[O8[1-o][c]]=l[c],u[s[c]]=c===2?n[0]:r[s[c]];var h=[["x","width",3],["y","height",0]][o],f=Gr(u,a,r.padding);return s[(f.margin[h[2]]||0)+f[h[0]]+f[h[1]]*.5<a[h[1]]*.5?0:1]}function sM(e,t){return R(e||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var tu=Cn,NDt=R,N8=Math.min,fL=Math.max,BDt=12,kDt=6,FDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return t.prototype.init=function(n,r){e.prototype.init.call(this,n,r),this._hoverLinkFromSeriesMouseOver=Vt(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Vt(this._hideIndicator,this)},t.prototype.doRender=function(n,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,r=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(r);var i=n.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(n,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),h=this._applyTransform(i===0?"bottom":"top",u),f=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Qe({style:Hn(d,{x:c[0],y:c[1],verticalAlign:f==="horizontal"?"middle":h,align:f==="horizontal"?h:"center",text:a})}))}},t.prototype._renderBar=function(n){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,o=this._orient,s=this._useHandle,l=int(r,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new he;u.add(c),c.add(i.outOfRange=B8()),c.add(i.inRange=B8(null,s?F8(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new nn({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=r.textStyleModel.getTextRect(""),f=fL(h.width,h.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,u,0,a,f,o),this._createHandle(r,u,1,a,f,o)),this._createIndicator(r,u,a,f,o),n.add(u)},t.prototype._createHandle=function(n,r,i,a,o,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=Rl(n.get("handleSize"),a[0]),h=Jr(n.get("handleIcon"),-c/2,-c/2,c,c,null,!0),f=F8(this._orient);h.attr({cursor:f,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){jc(m.event)}}),h.x=a[0]/2,h.useStyle(n.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),Ip(h,!0),r.add(h);var d=this.visualMapModel.textStyleModel,p=new Qe({cursor:f,draggable:!0,drift:l,onmousemove:function(m){jc(m.event)},ondragend:u,style:Hn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=h,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(n,r,i,a,o){var s=Rl(n.get("indicatorSize"),i[0]),l=Jr(n.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=n.getModel("indicatorStyle").getItemStyle();if(l instanceof Wi){var c=l.style;l.useStyle(ut({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);r.add(l);var h=this.visualMapModel.textStyleModel,f=new Qe({silent:!0,invisible:!0,style:Hn(h,{x:0,y:0,text:""})});this.group.add(f);var d=[(o==="horizontal"?a/2:kDt)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=f,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(n,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var o=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(n,o[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():k8(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},t.prototype._resetInterval=function(){var n=this.visualMapModel,r=this._dataInterval=n.getSelected(),i=n.getExtent(),a=[0,n.itemSize[1]];this._handleEnds=[tu(r[0],i,a,!0),tu(r[1],i,a,!0)]},t.prototype._updateInterval=function(n,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,o=[0,i.itemSize[1]];$v(r,a,o,n,0);var s=i.getExtent();this._dataInterval=[tu(a[0],o,s,!0),tu(a[1],o,s,!0)]},t.prototype._updateView=function(n){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,o=[0,r.itemSize[1]],s=n?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,o,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(n,r,i,a){var o={forceState:a,convertOpacityToAlpha:!0},s=this._makeColorGradient(n,o),l=[this.getControllerVisual(n[0],"symbolSize",o),this.getControllerVisual(n[1],"symbolSize",o)],u=this._createBarPoints(i,l);return{barColor:new x1(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(n,r){var i=100,a=[],o=(n[1]-n[0])/i;a.push({color:this.getControllerVisual(n[0],"color",r),offset:0});for(var s=1;s<i;s++){var l=n[0]+o*s;if(l>n[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:s/i})}return a.push({color:this.getControllerVisual(n[1],"color",r),offset:1}),a},t.prototype._createBarPoints=function(n,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],n[0]],[i[0],n[0]],[i[0],n[1]],[i[0]-r[1],n[1]]]},t.prototype._createBarGroup=function(n){var r=this._orient,i=this.visualMapModel.get("inverse");return new he(r==="horizontal"&&!i?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},t.prototype._updateHandle=function(n,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,o=i.handleThumbs,s=i.handleLabels,l=a.itemSize,u=a.getExtent();NDt([0,1],function(c){var h=o[c];h.setStyle("fill",r.handlesColor[c]),h.y=n[c];var f=tu(n[c],[0,l[1]],u,!0),d=this.getControllerVisual(f,"symbolSize");h.scaleX=h.scaleY=d/l[0],h.x=l[0]-d/2;var p=Cl(i.handleLabelPoints[c],tv(h,this.group));s[c].setStyle({x:p[0],y:p[1],text:a.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(n,r,i,a){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var f={convertOpacityToAlpha:!0},d=this.getControllerVisual(n,"color",f),p=this.getControllerVisual(n,"symbolSize"),v=tu(n,s,u,!0),g=l[0]-p/2,m={x:h.x,y:h.y};h.y=v,h.x=g;var _=Cl(c.indicatorLabelPoint,tv(h,this.group)),y=c.indicatorLabel;y.attr("invisible",!1);var x=this._applyTransform("left",c.mainGroup),S=this._orient,b=S==="horizontal";y.setStyle({text:(i||"")+o.formatValueText(r),verticalAlign:b?x:"middle",align:b?"center":x});var w={x:g,y:v,style:{fill:d}},A={style:{x:_[0],y:_[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var T={duration:100,easing:"cubicInOut",additive:!0};h.x=m.x,h.y=m.y,h.animateTo(w,T),y.animateTo(A,T)}else h.attr(w),y.attr(A);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var C=0;C<M.length;C++)this.api.enterBlur(M[C])}},t.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(r){if(n._hovering=!0,!n._dragging){var i=n.visualMapModel.itemSize,a=n._applyTransform([r.offsetX,r.offsetY],n._shapes.mainGroup,!0,!0);a[1]=N8(fL(0,a[1]),i[1]),n._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(n,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var o=[0,a[1]],s=i.getExtent();n=N8(fL(o[0],n),o[1]);var l=zDt(i,s,o),u=[n-l,n+l],c=tu(n,o,s,!0),h=[tu(u[0],o,s,!0),tu(u[1],o,s,!0)];u[0]<o[0]&&(h[0]=-1/0),u[1]>o[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c," ",l));var f=this._hoverLinkDataIndices,d=[];(r||k8(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(h));var p=ept(f,d);this._dispatchHighDown("downplay",sM(p[0],i)),this._dispatchHighDown("highlight",sM(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(n){var r;if(Pp(n.target,function(l){var u=fe(l);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var o=i.getData(r.dataType),s=o.getStore().get(a.getDataDimensionIndex(o),r.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",sM(n,this.visualMapModel)),n.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(n,r,i,a){var o=tv(r,a?null:this.group);return ht(n)?Cl(n,o,i):fE(n,o,i)},t.prototype._dispatchHighDown=function(n,r){r&&r.length&&this.api.dispatchAction({type:n,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(rnt);function B8(e,t,n,r){return new ja({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(i){jc(i.event)},ondragend:r})}function zDt(e,t,n){var r=BDt/2,i=e.get("hoverLinkDataSize");return i&&(r=tu(i,t,n,!0)/2),r}function k8(e){var t=e.get("hoverLinkOnHandle");return!!(t??e.get("realtime"))}function F8(e){return e==="vertical"?"ns-resize":"ew-resize"}var UDt={type:"selectDataRange",event:"dataRangeSelected",update:"update"},VDt=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})},GDt=[{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(r){var i=e.pipelineContext;!r.isTargetSeries(e)||i&&i.large||n.push(c2t(r.stateList,r.targetVisuals,Vt(r.getValueState,r),r.getDataDimensionIndex(e.getData())))}),n}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),r=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var a=i.getVisualMeta(Vt(HDt,null,e,i))||{stops:[],outerColors:[]},o=i.getDataDimensionIndex(n);o>=0&&(a.dimension=o,r.push(a))}}),e.getData().setVisual("visualMeta",r)}}];function HDt(e,t,n,r){for(var i=t.targetVisuals[r],a=Ni.prepareVisualTypes(i),o={color:w1(e.getData(),"color")},s=0,l=a.length;s<l;s++){var u=a[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(n,h,f)}return o.color;function h(d){return o[d]}function f(d,p){o[d]=p}}var z8=R;function WDt(e){var t=e&&e.visualMap;ht(t)||(t=t?[t]:[]),z8(t,function(n){if(n){vg(n,"splitList")&&!vg(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var r=n.pieces;r&&ht(r)&&z8(r,function(i){se(i)&&(vg(i,"start")&&!vg(i,"min")&&(i.min=i.start),vg(i,"end")&&!vg(i,"max")&&(i.max=i.end))})}})}function vg(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var U8=!1;function ant(e){U8||(U8=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(UDt,VDt),R(GDt,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(WDt))}function ont(e){e.registerComponentModel(ODt),e.registerComponentView(FDt),ant(e)}var $Dt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n._pieceList=[],n}return t.prototype.optionUpdated=function(n,r){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],XDt[this._mode].call(this,this._pieceList),this._resetSelected(n,r);var a=this.option.categories;this.resetVisual(function(o,s){i==="categories"?(o.mappingMethod="category",o.categories=ce(a)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=yt(this._pieceList,function(l){return l=ce(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var n=this.option,r={},i=Ni.listVisualTypes(),a=this.isCategory();R(n.pieces,function(s){R(i,function(l){s.hasOwnProperty(l)&&(r[l]=1)})}),R(r,function(s,l){var u=!1;R(this.stateList,function(c){u=u||o(n,c,l)||o(n.target,c,l)},this),!u&&R(this.stateList,function(c){(n[c]||(n[c]={}))[l]=nnt.get(l,c==="inRange"?"active":"inactive",a)})},this);function o(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(n,r){var i=this.option,a=this._pieceList,o=(r?i:n).selected||{};if(i.selected=o,R(a,function(l,u){var c=this.getSelectedMapKey(l);o.hasOwnProperty(c)||(o[c]=!0)},this),i.selectedMode==="single"){var s=!1;R(a,function(l,u){var c=this.getSelectedMapKey(l);o[c]&&(s?o[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(n){this.option.selected=ce(n)},t.prototype.getValueState=function(n){var r=Ni.findPieceIndex(n,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(n){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var o=[],s=a.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=Ni.findPieceIndex(l,i);c===n&&o.push(u)},this),r.push({seriesId:a.id,dataIndex:o})},this),r},t.prototype.getRepresentValue=function(n){var r;if(this.isCategory())r=n.value;else if(n.value!=null)r=n.value;else{var i=n.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},t.prototype.getVisualMeta=function(n){if(this.isCategory())return;var r=[],i=["",""],a=this;function o(c,h){var f=a.getRepresentValue({interval:c});h||(h=a.getValueState(f));var d=n(f,h);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:r.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return R(s,function(c){var h=c.interval;h&&(h[0]>u&&o([u,h[0]],"outOfRange"),o(h.slice()),u=h[1])},this),{stops:r,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=ld(TA.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(TA),XDt={splitNumber:function(e){var t=this.option,n=Math.min(t.precision,20),r=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n),t.minOpen&&e.push({interval:[-1/0,r[0]],close:[0,0]});for(var o=0,s=r[0];o<i;s+=a,o++){var l=o===i-1?r[1]:s+a;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[r[1],1/0],close:[0,0]}),N4(e),R(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;R(t.categories,function(n){e.push({text:this.formatValueText(n,!0),value:n})},this),V8(t,e)},pieces:function(e){var t=this.option;R(t.pieces,function(n,r){se(n)||(n={value:n});var i={text:"",index:r};if(n.label!=null&&(i.text=n.label),n.hasOwnProperty("value")){var a=i.value=n.value;i.interval=[a,a],i.close=[1,1]}else{for(var o=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],d=0;d<3&&o[h]==null;d++)o[h]=n[f[d]],s[h]=l[d],c[h]=d===2;o[h]==null&&(o[h]=u[h])}c[0]&&o[1]===1/0&&(s[0]=0),c[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(i.value=o[0])}i.visual=Ni.retrieveVisuals(n),e.push(i)},this),V8(t,e),N4(e),R(e,function(n){var r=n.close,i=[["<",""][r[1]],[">",""][r[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,i)},this)}};function V8(e,t){var n=e.inverse;(e.orient==="vertical"?!n:n)&&t.reverse()}var jDt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=t.type,n}return t.prototype.doRender=function(){var n=this.group;n.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,o=a.getFont(),s=a.getTextColor(),l=this._getItemAlign(),u=r.itemSize,c=this._getViewData(),h=c.endsText,f=Qi(r.get("showLabel",!0),!h);h&&this._renderEndsText(n,h[0],u,f,l),R(c.viewPieceList,function(d){var p=d.piece,v=new he;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=r.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),f){var m=this.visualMapModel.getValueState(g);v.add(new Qe({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:m==="outOfRange"?.5:1}}))}n.add(v)},this),h&&this._renderEndsText(n,h[1],u,f,l),ev(r.get("orient"),n,r.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},t.prototype._enableHoverLink=function(n,r){var i=this;n.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(o){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:o,batch:sM(s.findTargetDataIndices(r),s)})}},t.prototype._getItemAlign=function(){var n=this.visualMapModel,r=n.option;if(r.orient==="vertical")return int(n,this.api,n.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(n,r,i,a,o){if(r){var s=new he,l=this.visualMapModel.textStyleModel;s.add(new Qe({style:Hn(l,{x:a?o==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?o:"center",text:r})})),n.add(s)}},t.prototype._getViewData=function(){var n=this.visualMapModel,r=yt(n.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=n.get("text"),a=n.get("orient"),o=n.get("inverse");return(a==="horizontal"?o:!o)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},t.prototype._createItemSymbol=function(n,r,i){n.add(Jr(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color")))},t.prototype._onItemClick=function(n){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var o=ce(i.selected),s=r.getSelectedMapKey(n);a==="single"||a===!0?(o[s]=!0,R(o,function(l,u){o[u]=u===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},t.type="visualMap.piecewise",t}(rnt);function snt(e){e.registerComponentModel($Dt),e.registerComponentView(jDt),ant(e)}function YDt(e){ue(ont),ue(snt)}var qDt={label:{enabled:!0},decal:{show:!1}},G8=vn(),KDt={};function ZDt(e,t){var n=e.getModel("aria");if(!n.get("enabled"))return;var r=ce(qDt);Xt(r.label,e.getLocaleModel().get("aria"),!1),Xt(n.option,r,!1),i(),a();function i(){var u=n.getModel("decal"),c=u.get("show");if(c){var h=jt();e.eachSeries(function(f){if(!f.isColorBySeries()){var d=h.get(f.type);d||(d={},h.set(f.type,d)),G8(f).scope=d}}),e.eachRawSeries(function(f){if(e.isSeriesFiltered(f))return;if(ae(f.enableAriaDecal)){f.enableAriaDecal();return}var d=f.getData();if(f.isColorBySeries()){var _=RO(f.ecModel,f.name,KDt,e.getSeriesCount()),y=d.getVisual("decal");d.setVisual("decal",x(y,_))}else{var p=f.getRawData(),v={},g=G8(f).scope;d.each(function(S){var b=d.getRawIndex(S);v[b]=S});var m=p.count();p.each(function(S){var b=v[S],w=p.getName(S)||S+"",A=RO(f.ecModel,w,g,m),T=d.getItemVisual(b,"decal");d.setItemVisual(b,"decal",x(T,A))})}function x(S,b){var w=S?ut(ut({},b),S):b;return w.dirty=!0,w}})}}function a(){var u=e.getLocaleModel().get("aria"),c=n.getModel("label");if(c.option=te(c.option,u),!!c.get("enabled")){var h=t.getZr().dom;if(c.get("description")){h.setAttribute("aria-label",c.get("description"));return}var f=e.getSeriesCount(),d=c.get(["data","maxCount"])||10,p=c.get(["series","maxCount"])||10,v=Math.min(f,p),g;if(!(f<1)){var m=s();if(m){var _=c.get(["general","withTitle"]);g=o(_,{title:m})}else g=c.get(["general","withoutTitle"]);var y=[],x=f>1?c.get(["series","multiple","prefix"]):c.get(["series","single","prefix"]);g+=o(x,{seriesCount:f}),e.eachSeries(function(A,T){if(T<v){var M=void 0,C=A.get("name"),E=C?"withName":"withoutName";M=f>1?c.get(["series","multiple",E]):c.get(["series","single",E]),M=o(M,{seriesId:A.seriesIndex,seriesName:A.get("name"),seriesType:l(A.subType)});var D=A.getData();if(D.count()>d){var I=c.get(["data","partialData"]);M+=o(I,{displayCnt:d})}else M+=c.get(["data","allData"]);for(var L=c.get(["data","separator","middle"]),P=c.get(["data","separator","end"]),B=[],N=0;N<D.count();N++)if(N<d){var k=D.getName(N),U=D.getValues(N),Z=c.get(["data",k?"withName":"withoutName"]);B.push(o(Z,{name:k,value:U.join(L)}))}M+=B.join(L)+P,y.push(M)}});var S=c.getModel(["series","multiple","separator"]),b=S.get("middle"),w=S.get("end");g+=y.join(b)+w,h.setAttribute("aria-label",g)}}}function o(u,c){if(!Ft(u))return u;var h=u;return R(c,function(f,d){h=h.replace(new RegExp("\\{\\s*"+d+"\\s*\\}","g"),f)}),h}function s(){var u=e.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=e.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function JDt(e){if(!(!e||!e.aria)){var t=e.aria;t.show!=null&&(t.enabled=t.show),t.label=t.label||{},R(["description","general","series","data"],function(n){t[n]!=null&&(t.label[n]=t[n])})}}function QDt(e){e.registerPreprocessor(JDt),e.registerVisual(e.PRIORITY.VISUAL.ARIA,ZDt)}var H8={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},tIt=function(){function e(t){var n=this._condVal=Ft(t)?new RegExp(t):Sft(t)?t:null;if(n==null){var r="";En(r)}}return e.prototype.evaluate=function(t){var n=typeof t;return Ft(n)?this._condVal.test(t):xn(n)?this._condVal.test(t+""):!1},e}(),eIt=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),nIt=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,n=0;n<t.length;n++)if(!t[n].evaluate())return!1;return!0},e}(),rIt=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,n=0;n<t.length;n++)if(t[n].evaluate())return!0;return!1},e}(),iIt=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),aIt=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,n=this.getValue,r=n(this.valueGetterParam),i=t?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(t?i:r))return!1;return!0},e}();function BF(e,t){if(e===!0||e===!1){var n=new eIt;return n.value=e,n}var r="";return lnt(e)||En(r),e.and?W8("and",e,t):e.or?W8("or",e,t):e.not?oIt(e,t):sIt(e,t)}function W8(e,t,n){var r=t[e],i="";ht(r)||En(i),r.length||En(i);var a=e==="and"?new nIt:new rIt;return a.children=yt(r,function(o){return BF(o,n)}),a.children.length||En(i),a}function oIt(e,t){var n=e.not,r="";lnt(n)||En(r);var i=new iIt;return i.child=BF(n,t),i.child||En(r),i}function sIt(e,t){for(var n="",r=t.prepareGetValue(e),i=[],a=Je(e),o=e.parser,s=o?zZ(o):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=$t(H8,u)?H8[u]:u,h=e[u],f=s?s(h):h,d=imt(c,f)||c==="reg"&&new tIt(f);d||En(n),i.push(d)}}i.length||En(n);var p=new aIt;return p.valueGetterParam=r,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function lnt(e){return se(e)&&!Aa(e)}var lIt=function(){function e(t,n){this._cond=BF(t,n)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function uIt(e,t){return new lIt(e,t)}var cIt={type:"echarts:filter",transform:function(e){for(var t=e.upstream,n,r=uIt(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;$t(s,"dimension")||En(l);var c=t.getDimensionInfo(u);return c||En(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(n,s.dimIdx)}}),i=[],a=0,o=t.count();a<o;a++)n=t.getRawDataItem(a),r.evaluate()&&i.push(n);return{data:i}}},hIt={type:"echarts:sort",transform:function(e){var t=e.upstream,n=e.config,r="",i=jn(n);i.length||En(r);var a=[];R(i,function(c){var h=c.dimension,f=c.order,d=c.parser,p=c.incomparable;if(h==null&&En(r),f!=="asc"&&f!=="desc"&&En(r),p&&p!=="min"&&p!=="max"){var v="";En(v)}if(f!=="asc"&&f!=="desc"){var g="";En(g)}var m=t.getDimensionInfo(h);m||En(r);var _=d?zZ(d):null;d&&!_&&En(r),a.push({dimIdx:m.index,parser:_,comparator:new VZ(f,p)})});var o=t.sourceFormat;o!==Ca&&o!==Zs&&En(r);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,h){for(var f=0;f<a.length;f++){var d=a[f],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(h,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function fIt(e){e.registerTransform(cIt),e.registerTransform(hIt)}var dIt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return t.prototype.init=function(n,r,i){e.prototype.init.call(this,n,r,i),this._sourceManager=new $Z(this),j5(this)},t.prototype.mergeOption=function(n,r){e.prototype.mergeOption.call(this,n,r),j5(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Iu},t}(Ie),pIt=function(e){it(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type="dataset",n}return t.type="dataset",t}(Zn);function unt(e){e.registerComponentModel(dIt),e.registerComponentView(pIt)}var ql=zu.CMD;function mm(e,t){return Math.abs(e-t)<1e-5}function NN(e){var t=e.data,n=e.len(),r=[],i,a=0,o=0,s=0,l=0;function u(D,I){i&&i.length>2&&r.push(i),i=[D,I]}function c(D,I,L,P){mm(D,L)&&mm(I,P)||i.push(D,I,L,P,L,P)}function h(D,I,L,P,B,N){var k=Math.abs(I-D),U=Math.tan(k/4)*4/3,Z=I<D?-1:1,nt=Math.cos(D),ct=Math.sin(D),K=Math.cos(I),$=Math.sin(I),ot=nt*B+L,tt=ct*N+P,et=K*B+L,xt=$*N+P,St=B*U*Z,X=N*U*Z;i.push(ot-St*ct,tt+X*nt,et+St*$,xt-X*K,et,xt)}for(var f,d,p,v,g=0;g<n;){var m=t[g++],_=g===1;switch(_&&(a=t[g],o=t[g+1],s=a,l=o,(m===ql.L||m===ql.C||m===ql.Q)&&(i=[s,l])),m){case ql.M:a=s=t[g++],o=l=t[g++],u(s,l);break;case ql.L:f=t[g++],d=t[g++],c(a,o,f,d),a=f,o=d;break;case ql.C:i.push(t[g++],t[g++],t[g++],t[g++],a=t[g++],o=t[g++]);break;case ql.Q:f=t[g++],d=t[g++],p=t[g++],v=t[g++],i.push(a+2/3*(f-a),o+2/3*(d-o),p+2/3*(f-p),v+2/3*(d-v),p,v),a=p,o=v;break;case ql.A:var y=t[g++],x=t[g++],S=t[g++],b=t[g++],w=t[g++],A=t[g++]+w;g+=1;var T=!t[g++];f=Math.cos(w)*S+y,d=Math.sin(w)*b+x,_?(s=f,l=d,u(s,l)):c(a,o,f,d),a=Math.cos(A)*S+y,o=Math.sin(A)*b+x;for(var M=(T?-1:1)*Math.PI/2,C=w;T?C>A:C<A;C+=M){var E=T?Math.max(C+M,A):Math.min(C+M,A);h(C,E,y,x,S,b)}break;case ql.R:s=a=t[g++],l=o=t[g++],f=s+t[g++],d=l+t[g++],u(f,l),c(f,l,f,d),c(f,d,s,d),c(s,d,s,l),c(s,l,f,l);break;case ql.Z:i&&c(a,o,s,l),a=s,o=l;break}}return i&&i.length>2&&r.push(i),r}function BN(e,t,n,r,i,a,o,s,l,u){if(mm(e,n)&&mm(t,r)&&mm(i,o)&&mm(a,s)){l.push(o,s);return}var c=2/u,h=c*c,f=o-e,d=s-t,p=Math.sqrt(f*f+d*d);f/=p,d/=p;var v=n-e,g=r-t,m=i-o,_=a-s,y=v*v+g*g,x=m*m+_*_;if(y<h&&x<h){l.push(o,s);return}var S=f*v+d*g,b=-f*m-d*_,w=y-S*S,A=x-b*b;if(w<h&&S>=0&&A<h&&b>=0){l.push(o,s);return}var T=[],M=[];zf(e,n,i,o,.5,T),zf(t,r,a,s,.5,M),BN(T[0],M[0],T[1],M[1],T[2],M[2],T[3],M[3],l,u),BN(T[4],M[4],T[5],M[5],T[6],M[6],T[7],M[7],l,u)}function vIt(e,t){var n=NN(e),r=[];t=t||1;for(var i=0;i<n.length;i++){var a=n[i],o=[],s=a[0],l=a[1];o.push(s,l);for(var u=2;u<a.length;){var c=a[u++],h=a[u++],f=a[u++],d=a[u++],p=a[u++],v=a[u++];BN(s,l,c,h,f,d,p,v,o,t),s=p,l=v}r.push(o)}return r}function cnt(e,t,n){var r=e[t],i=e[1-t],a=Math.abs(r/i),o=Math.ceil(Math.sqrt(a*n)),s=Math.floor(n/o);s===0&&(s=1,o=n);for(var l=[],u=0;u<o;u++)l.push(s);var c=o*s,h=n-c;if(h>0)for(var u=0;u<h;u++)l[u%o]+=1;return l}function $8(e,t,n){for(var r=e.r0,i=e.r,a=e.startAngle,o=e.endAngle,s=Math.abs(o-a),l=s*i,u=i-r,c=l>Math.abs(u),h=cnt([l,u],c?0:1,t),f=(c?s:u)/h.length,d=0;d<h.length;d++)for(var p=(c?u:s)/h[d],v=0;v<h[d];v++){var g={};c?(g.startAngle=a+f*d,g.endAngle=a+f*(d+1),g.r0=r+p*v,g.r=r+p*(v+1)):(g.startAngle=a+p*v,g.endAngle=a+p*(v+1),g.r0=r+f*d,g.r=r+f*(d+1)),g.clockwise=e.clockwise,g.cx=e.cx,g.cy=e.cy,n.push(g)}}function gIt(e,t,n){for(var r=e.width,i=e.height,a=r>i,o=cnt([r,i],a?0:1,t),s=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",h=e[s]/o.length,f=0;f<o.length;f++)for(var d=e[l]/o[f],p=0;p<o[f];p++){var v={};v[u]=f*h,v[c]=p*d,v[s]=h,v[l]=d,v.x+=e.x,v.y+=e.y,n.push(v)}}function X8(e,t,n,r){return e*r-n*t}function mIt(e,t,n,r,i,a,o,s){var l=n-e,u=r-t,c=o-i,h=s-a,f=X8(c,h,l,u);if(Math.abs(f)<1e-6)return null;var d=e-i,p=t-a,v=X8(d,p,c,h)/f;return v<0||v>1?null:new Me(v*l+e,v*u+t)}function yIt(e,t,n){var r=new Me;Me.sub(r,n,t),r.normalize();var i=new Me;Me.sub(i,e,t);var a=i.dot(r);return a}function gg(e,t){var n=e[e.length-1];n&&n[0]===t[0]&&n[1]===t[1]||e.push(t)}function _It(e,t,n){for(var r=e.length,i=[],a=0;a<r;a++){var o=e[a],s=e[(a+1)%r],l=mIt(o[0],o[1],s[0],s[1],t.x,t.y,n.x,n.y);l&&i.push({projPt:yIt(l,t,n),pt:l,idx:a})}if(i.length<2)return[{points:e},{points:e}];i.sort(function(g,m){return g.projPt-m.projPt});var u=i[0],c=i[i.length-1];if(c.idx<u.idx){var h=u;u=c,c=h}for(var f=[u.pt.x,u.pt.y],d=[c.pt.x,c.pt.y],p=[f],v=[d],a=u.idx+1;a<=c.idx;a++)gg(p,e[a].slice());gg(p,d),gg(p,f);for(var a=c.idx+1;a<=u.idx+r;a++)gg(v,e[a%r].slice());return gg(v,f),gg(v,d),[{points:p},{points:v}]}function j8(e){var t=e.points,n=[],r=[];oE(t,n,r);var i=new Ae(n[0],n[1],r[0]-n[0],r[1]-n[1]),a=i.width,o=i.height,s=i.x,l=i.y,u=new Me,c=new Me;return a>o?(u.x=c.x=s+a/2,u.y=l,c.y=l+o):(u.y=c.y=l+o/2,u.x=s,c.x=s+a),_It(t,u,c)}function MA(e,t,n,r){if(n===1)r.push(t);else{var i=Math.floor(n/2),a=e(t);MA(e,a[0],i,r),MA(e,a[1],n-i,r)}return r}function xIt(e,t){for(var n=[],r=0;r<t;r++)n.push(XB(e));return n}function bIt(e,t){t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel}function SIt(e){for(var t=[],n=0;n<e.length;)t.push([e[n++],e[n++]]);return t}function wIt(e,t){var n=[],r=e.shape,i;switch(e.type){case"rect":gIt(r,t,n),i=nn;break;case"sector":$8(r,t,n),i=Xa;break;case"circle":$8({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},t,n),i=Xa;break;default:var a=e.getComputedTransform(),o=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,s=yt(vIt(e.getUpdatedPathProxy(),o),function(m){return SIt(m)}),l=s.length;if(l===0)MA(j8,{points:s[0]},t,n);else if(l===t)for(var u=0;u<l;u++)n.push({points:s[u]});else{var c=0,h=yt(s,function(m){var _=[],y=[];oE(m,_,y);var x=(y[1]-_[1])*(y[0]-_[0]);return c+=x,{poly:m,area:x}});h.sort(function(m,_){return _.area-m.area});for(var f=t,u=0;u<l;u++){var d=h[u];if(f<=0)break;var p=u===l-1?f:Math.ceil(d.area/c*t);p<0||(MA(j8,{points:d.poly},p,n),f-=p)}}i=ja;break}if(!i)return xIt(e,t);for(var v=[],u=0;u<n.length;u++){var g=new i;g.setShape(n[u]),bIt(e,g),v.push(g)}return v}function TIt(e,t){var n=e.length,r=t.length;if(n===r)return[e,t];for(var i=[],a=[],o=n<r?e:t,s=Math.min(n,r),l=Math.abs(r-n)/6,u=(s-2)/6,c=Math.ceil(l/u)+1,h=[o[0],o[1]],f=l,d=2;d<s;){var p=o[d-2],v=o[d-1],g=o[d++],m=o[d++],_=o[d++],y=o[d++],x=o[d++],S=o[d++];if(f<=0){h.push(g,m,_,y,x,S);continue}for(var b=Math.min(f,c-1)+1,w=1;w<=b;w++){var A=w/b;zf(p,g,_,x,A,i),zf(v,m,y,S,A,a),p=i[3],v=a[3],h.push(i[1],a[1],i[2],a[2],p,v),g=i[5],m=a[5],_=i[6],y=a[6]}f-=b-1}return o===e?[h,t]:[e,h]}function Y8(e,t){for(var n=e.length,r=e[n-2],i=e[n-1],a=[],o=0;o<t.length;)a[o++]=r,a[o++]=i;return a}function MIt(e,t){for(var n,r,i,a=[],o=[],s=0;s<Math.max(e.length,t.length);s++){var l=e[s],u=t[s],c=void 0,h=void 0;l?u?(n=TIt(l,u),c=n[0],h=n[1],r=c,i=h):(h=Y8(i||l,l),c=l):(c=Y8(r||u,u),h=u),a.push(c),o.push(h)}return[a,o]}function q8(e){for(var t=0,n=0,r=0,i=e.length,a=0,o=i-2;a<i;o=a,a+=2){var s=e[o],l=e[o+1],u=e[a],c=e[a+1],h=s*c-u*l;t+=h,n+=(s+u)*h,r+=(l+c)*h}return t===0?[e[0]||0,e[1]||0]:[n/t/3,r/t/3,t]}function AIt(e,t,n,r){for(var i=(e.length-2)/6,a=1/0,o=0,s=e.length,l=s-2,u=0;u<i;u++){for(var c=u*6,h=0,f=0;f<s;f+=2){var d=f===0?c:(c+f-2)%l+2,p=e[d]-n[0],v=e[d+1]-n[1],g=t[f]-r[0],m=t[f+1]-r[1],_=g-p,y=m-v;h+=_*_+y*y}h<a&&(a=h,o=u)}return o}function CIt(e){for(var t=[],n=e.length,r=0;r<n;r+=2)t[r]=e[n-r-2],t[r+1]=e[n-r-1];return t}function EIt(e,t,n,r){for(var i=[],a,o=0;o<e.length;o++){var s=e[o],l=t[o],u=q8(s),c=q8(l);a==null&&(a=u[2]<0!=c[2]<0);var h=[],f=[],d=0,p=1/0,v=[],g=s.length;a&&(s=CIt(s));for(var m=AIt(s,l,u,c)*6,_=g-2,y=0;y<_;y+=2){var x=(m+y)%_+2;h[y+2]=s[x]-u[0],h[y+3]=s[x+1]-u[1]}h[0]=s[m]-u[0],h[1]=s[m+1]-u[1];for(var S=r/n,b=-r/2;b<=r/2;b+=S){for(var w=Math.sin(b),A=Math.cos(b),T=0,y=0;y<s.length;y+=2){var M=h[y],C=h[y+1],E=l[y]-c[0],D=l[y+1]-c[1],I=E*A-D*w,L=E*w+D*A;v[y]=I,v[y+1]=L;var P=I-M,B=L-C;T+=P*P+B*B}if(T<p){p=T,d=b;for(var N=0;N<v.length;N++)f[N]=v[N]}}i.push({from:h,to:f,fromCp:u,toCp:c,rotation:-d})}return i}function AA(e){return e.__isCombineMorphing}var hnt="__mOriginal_";function CA(e,t,n){var r=hnt+t,i=e[r]||e[t];e[r]||(e[r]=e[t]);var a=n.replace,o=n.after,s=n.before;e[t]=function(){var l=arguments,u;return s&&s.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),o&&o.apply(this,l),u}}function Vx(e,t){var n=hnt+t;e[n]&&(e[t]=e[n],e[n]=null)}function K8(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;){var a=r[i],o=r[i+1];r[i++]=t[0]*a+t[2]*o+t[4],r[i++]=t[1]*a+t[3]*o+t[5]}}function fnt(e,t){var n=e.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),i=MIt(NN(n),NN(r)),a=i[0],o=i[1],s=e.getComputedTransform(),l=t.getComputedTransform();function u(){this.transform=null}s&&K8(a,s),l&&K8(o,l),CA(t,"updateTransform",{replace:u}),t.transform=null;var c=EIt(a,o,10,Math.PI),h=[];CA(t,"buildPath",{replace:function(f){for(var d=t.__morphT,p=1-d,v=[],g=0;g<c.length;g++){var m=c[g],_=m.from,y=m.to,x=m.rotation*d,S=m.fromCp,b=m.toCp,w=Math.sin(x),A=Math.cos(x);HT(v,S,b,d);for(var T=0;T<_.length;T+=2){var M=_[T],C=_[T+1],E=y[T],D=y[T+1],I=M*p+E*d,L=C*p+D*d;h[T]=I*A-L*w+v[0],h[T+1]=I*w+L*A+v[1]}var P=h[0],B=h[1];f.moveTo(P,B);for(var T=2;T<_.length;){var E=h[T++],D=h[T++],N=h[T++],k=h[T++],U=h[T++],Z=h[T++];P===E&&B===D&&N===U&&k===Z?f.lineTo(U,Z):f.bezierCurveTo(E,D,N,k,U,Z),P=U,B=Z}}}})}function kF(e,t,n){if(!e||!t)return t;var r=n.done,i=n.during;fnt(e,t),t.__morphT=0;function a(){Vx(t,"buildPath"),Vx(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape()}return t.animateTo({__morphT:1},te({during:function(o){t.dirtyShape(),i&&i(o)},done:function(){a(),r&&r()}},n)),t}function DIt(e,t,n,r,i,a){var o=16;e=i===n?0:Math.round(32767*(e-n)/(i-n)),t=a===r?0:Math.round(32767*(t-r)/(a-r));for(var s=0,l,u=(1<<o)/2;u>0;u/=2){var c=0,h=0;(e&u)>0&&(c=1),(t&u)>0&&(h=1),s+=u*u*(3*c^h),h===0&&(c===1&&(e=u-1-e,t=u-1-t),l=e,e=t,t=l)}return s}function EA(e){var t=1/0,n=1/0,r=-1/0,i=-1/0,a=yt(e,function(s){var l=s.getBoundingRect(),u=s.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),h=l.y+l.height/2+(u?u[5]:0);return t=Math.min(c,t),n=Math.min(h,n),r=Math.max(c,r),i=Math.max(h,i),[c,h]}),o=yt(a,function(s,l){return{cp:s,z:DIt(s[0],s[1],t,n,r,i),path:e[l]}});return o.sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function dnt(e){return wIt(e.path,e.count)}function kN(){return{fromIndividuals:[],toIndividuals:[],count:0}}function IIt(e,t,n){var r=[];function i(S){for(var b=0;b<S.length;b++){var w=S[b];AA(w)?i(w.childrenRef()):w instanceof Ve&&r.push(w)}}i(e);var a=r.length;if(!a)return kN();var o=n.dividePath||dnt,s=o({path:t,count:a});if(s.length!==a)return console.error("Invalid morphing: unmatched splitted path"),kN();r=EA(r),s=EA(s);for(var l=n.done,u=n.during,c=n.individualDelay,h=new Oc,f=0;f<a;f++){var d=r[f],p=s[f];p.parent=t,p.copyTransform(h),c||fnt(d,p)}t.__isCombineMorphing=!0,t.childrenRef=function(){return s};function v(S){for(var b=0;b<s.length;b++)s[b].addSelfToZr(S)}CA(t,"addSelfToZr",{after:function(S){v(S)}}),CA(t,"removeSelfFromZr",{after:function(S){for(var b=0;b<s.length;b++)s[b].removeSelfFromZr(S)}});function g(){t.__isCombineMorphing=!1,t.__morphT=-1,t.childrenRef=null,Vx(t,"addSelfToZr"),Vx(t,"removeSelfFromZr")}var m=s.length;if(c)for(var _=m,y=function(){_--,_===0&&(g(),l&&l())},f=0;f<m;f++){var x=c?te({delay:(n.delay||0)+c(f,m,r[f],s[f]),done:y},n):n;kF(r[f],s[f],x)}else t.__morphT=0,t.animateTo({__morphT:1},te({during:function(S){for(var b=0;b<m;b++){var w=s[b];w.__morphT=t.__morphT,w.dirtyShape()}u&&u(S)},done:function(){g();for(var S=0;S<e.length;S++)Vx(e[S],"updateTransform");l&&l()}},n));return t.__zr&&v(t.__zr),{fromIndividuals:r,toIndividuals:s,count:m}}function LIt(e,t,n){var r=t.length,i=[],a=n.dividePath||dnt;function o(d){for(var p=0;p<d.length;p++){var v=d[p];AA(v)?o(v.childrenRef()):v instanceof Ve&&i.push(v)}}if(AA(e)){o(e.childrenRef());var s=i.length;if(s<r)for(var l=0,u=s;u<r;u++)i.push(XB(i[l++%s]));i.length=r}else{i=a({path:e,count:r});for(var c=e.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),kN()}i=EA(i),t=EA(t);for(var h=n.individualDelay,u=0;u<r;u++){var f=h?te({delay:(n.delay||0)+h(u,r,i[u],t[u])},n):n;kF(i[u],t[u],f)}return{fromIndividuals:i,toIndividuals:t,count:t.length}}function Z8(e){return ht(e[0])}function J8(e,t){for(var n=[],r=e.length,i=0;i<r;i++)n.push({one:e[i],many:[]});for(var i=0;i<t.length;i++){var a=t[i].length,o=void 0;for(o=0;o<a;o++)n[o%r].many.push(t[i][o])}for(var s=0,i=r-1;i>=0;i--)if(!n[i].many.length){var l=n[s].many;if(l.length<=1)if(s)s=0;else return n;var a=l.length,u=Math.ceil(a/2);n[i].many=l.slice(u,a),n[s].many=l.slice(0,u),s++}return n}var PIt={clone:function(e){for(var t=[],n=1-Math.pow(1-e.path.style.opacity,1/e.count),r=0;r<e.count;r++){var i=XB(e.path);i.setStyle("opacity",n),t.push(i)}return t},split:null};function dL(e,t,n,r,i,a){if(!e.length||!t.length)return;var o=r0("update",r,i);if(!(o&&o.duration>0))return;var s=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},o),u,c;Z8(e)&&(u=e,c=t),Z8(t)&&(u=t,c=e);function h(m,_,y,x,S){var b=m.many,w=m.one;if(b.length===1&&!S){var A=_?b[0]:w,T=_?w:b[0];if(AA(A))h({many:[A],one:T},!0,y,x,!0);else{var M=s?te({delay:s(y,x)},l):l;kF(A,T,M),a(A,T,A,T,M)}}else for(var C=te({dividePath:PIt[n],individualDelay:s&&function(B,N,k,U){return s(B+y,x)}},l),E=_?IIt(b,w,C):LIt(w,b,C),D=E.fromIndividuals,I=E.toIndividuals,L=D.length,P=0;P<L;P++){var M=s?te({delay:s(P,L)},l):l;a(D[P],I[P],_?b[P]:m.one,_?m.one:b[P],M)}}for(var f=u?u===e:e.length>t.length,d=u?J8(c,u):J8(f?t:e,[f?e:t]),p=0,v=0;v<d.length;v++)p+=d[v].many.length;for(var g=0,v=0;v<d.length;v++)h(d[v],f,g,p),g+=d[v].many.length}function vp(e){if(!e)return[];if(ht(e)){for(var t=[],n=0;n<e.length;n++)t.push(vp(e[n]));return t}var r=[];return e.traverse(function(i){i instanceof Ve&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var pnt=1e4,RIt=0,Q8=1,t$=2,OIt=vn();function NIt(e,t){for(var n=e.dimensions,r=0;r<n.length;r++){var i=e.getDimensionInfo(n[r]);if(i&&i.otherDims[t]===0)return n[r]}}function BIt(e,t,n){var r=e.getDimensionInfo(n),i=r&&r.ordinalMeta;if(r){var a=e.get(r.name,t);return i&&i.categories[a]||a+""}}function e$(e,t,n,r){var i=r?"itemChildGroupId":"itemGroupId",a=NIt(e,i);if(a){var o=BIt(e,t,a);return o}var s=e.getRawDataItem(t),l=r?"childGroupId":"groupId";if(s&&s[l])return s[l]+"";if(!r)return n||e.getId(t)}function n$(e){var t=[];return R(e,function(n){var r=n.data,i=n.dataGroupId;if(!(r.count()>pnt))for(var a=r.getIndices(),o=0;o<a.length;o++)t.push({data:r,groupId:e$(r,o,i,!1),childGroupId:e$(r,o,i,!0),divide:n.divide,dataIndex:o})}),t}function pL(e,t,n){e.traverse(function(r){r instanceof Ve&&xr(r,{style:{opacity:0}},t,{dataIndex:n,isFrom:!0})})}function vL(e){if(e.parent){var t=e.getComputedTransform();e.setLocalTransform(t),e.parent.remove(e)}}function mg(e){e.stopAnimation(),e.isGroup&&e.traverse(function(t){t.stopAnimation()})}function kIt(e,t,n){var r=r0("update",n,t);r&&e.traverse(function(i){if(i instanceof Gs){var a=Vvt(i);a&&i.animateFrom({style:a},r)}})}function FIt(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++){var i=e[r],a=t[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function vnt(e,t,n){var r=n$(e),i=n$(t);function a(y,x,S,b,w){(S||y)&&x.animateFrom({style:S&&S!==y?ut(ut({},S.style),y.style):y.style},w)}var o=!1,s=RIt,l=jt(),u=jt();r.forEach(function(y){y.groupId&&l.set(y.groupId,!0),y.childGroupId&&u.set(y.childGroupId,!0)});for(var c=0;c<i.length;c++){var h=i[c].groupId;if(u.get(h)){s=Q8;break}var f=i[c].childGroupId;if(f&&l.get(f)){s=t$;break}}function d(y,x){return function(S){var b=S.data,w=S.dataIndex;return x?b.getId(w):y?s===Q8?S.childGroupId:S.groupId:s===t$?S.childGroupId:S.groupId}}var p=FIt(r,i),v={};if(!p)for(var c=0;c<i.length;c++){var g=i[c],m=g.data.getItemGraphicEl(g.dataIndex);m&&(v[m.id]=!0)}function _(y,x){var S=r[x],b=i[y],w=b.data.hostModel,A=S.data.getItemGraphicEl(S.dataIndex),T=b.data.getItemGraphicEl(b.dataIndex);if(A===T){T&&kIt(T,b.dataIndex,w);return}A&&v[A.id]||T&&(mg(T),A?(mg(A),vL(A),o=!0,dL(vp(A),vp(T),b.divide,w,y,a)):pL(T,w,y))}new Zc(r,i,d(!0,p),d(!1,p),null,"multiple").update(_).updateManyToOne(function(y,x){var S=i[y],b=S.data,w=b.hostModel,A=b.getItemGraphicEl(S.dataIndex),T=Gn(yt(x,function(M){return r[M].data.getItemGraphicEl(r[M].dataIndex)}),function(M){return M&&M!==A&&!v[M.id]});A&&(mg(A),T.length?(R(T,function(M){mg(M),vL(M)}),o=!0,dL(vp(T),vp(A),S.divide,w,y,a)):pL(A,w,S.dataIndex))}).updateOneToMany(function(y,x){var S=r[x],b=S.data.getItemGraphicEl(S.dataIndex);if(!(b&&v[b.id])){var w=Gn(yt(y,function(T){return i[T].data.getItemGraphicEl(i[T].dataIndex)}),function(T){return T&&T!==b}),A=i[y[0]].data.hostModel;w.length&&(R(w,function(T){return mg(T)}),b?(mg(b),vL(b),o=!0,dL(vp(b),vp(w),S.divide,A,y[0],a)):R(w,function(T){return pL(T,A,y[0])}))}}).updateManyToMany(function(y,x){new Zc(x,y,function(S){return r[S].data.getId(r[S].dataIndex)},function(S){return i[S].data.getId(i[S].dataIndex)}).update(function(S,b){_(y[S],x[b])}).execute()}).execute(),o&&R(t,function(y){var x=y.data,S=x.hostModel,b=S&&n.getViewOfSeriesModel(S),w=r0("update",S,0);b&&S.isAnimationEnabled()&&w&&w.duration>0&&b.group.traverse(function(A){A instanceof Ve&&!A.animators.length&&A.animateFrom({style:{opacity:0}},w)})})}function r$(e){var t=e.getModel("universalTransition").get("seriesKey");return t||e.id}function i$(e){return ht(e)?e.sort().join(","):e}function hf(e){if(e.hostModel)return e.hostModel.getModel("universalTransition").get("divideShape")}function zIt(e,t){var n=jt(),r=jt(),i=jt();return R(e.oldSeries,function(a,o){var s=e.oldDataGroupIds[o],l=e.oldData[o],u=r$(a),c=i$(u);r.set(c,{dataGroupId:s,data:l}),ht(u)&&R(u,function(h){i.set(h,{key:c,dataGroupId:s,data:l})})}),R(t.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var o=a.get("dataGroupId"),s=a.getData(),l=r$(a),u=i$(l),c=r.get(u);if(c)n.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:hf(c.data),data:c.data}],newSeries:[{dataGroupId:o,divide:hf(s),data:s}]});else if(ht(l)){var h=[];R(l,function(p){var v=r.get(p);v.data&&h.push({dataGroupId:v.dataGroupId,divide:hf(v.data),data:v.data})}),h.length&&n.set(u,{oldSeries:h,newSeries:[{dataGroupId:o,data:s,divide:hf(s)}]})}else{var f=i.get(l);if(f){var d=n.get(f.key);d||(d={oldSeries:[{dataGroupId:f.dataGroupId,data:f.data,divide:hf(f.data)}],newSeries:[]},n.set(f.key,d)),d.newSeries.push({dataGroupId:o,data:s,divide:hf(s)})}}}}),n}function a$(e,t){for(var n=0;n<e.length;n++){var r=t.seriesIndex!=null&&t.seriesIndex===e[n].seriesIndex||t.seriesId!=null&&t.seriesId===e[n].id;if(r)return n}}function UIt(e,t,n,r){var i=[],a=[];R(jn(e.from),function(o){var s=a$(t.oldSeries,o);s>=0&&i.push({dataGroupId:t.oldDataGroupIds[s],data:t.oldData[s],divide:hf(t.oldData[s]),groupIdDim:o.dimension})}),R(jn(e.to),function(o){var s=a$(n.updatedSeries,o);if(s>=0){var l=n.updatedSeries[s].getData();a.push({dataGroupId:t.oldDataGroupIds[s],data:l,divide:hf(l),groupIdDim:o.dimension})}}),i.length>0&&a.length>0&&vnt(i,a,r)}function VIt(e){e.registerUpdateLifecycle("series:beforeupdate",function(t,n,r){R(jn(r.seriesTransition),function(i){R(jn(i.to),function(a){for(var o=r.updatedSeries,s=0;s<o.length;s++)(a.seriesIndex!=null&&a.seriesIndex===o[s].seriesIndex||a.seriesId!=null&&a.seriesId===o[s].id)&&(o[s][tM]=!0)})})}),e.registerUpdateLifecycle("series:transition",function(t,n,r){var i=OIt(n);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)R(jn(a),function(d){UIt(d,i,r,n)});else{var o=zIt(i,r);R(o.keys(),function(d){var p=o.get(d);vnt(p.oldSeries,p.newSeries,n)})}R(r.updatedSeries,function(d){d[tM]&&(d[tM]=!1)})}for(var s=t.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],c=i.oldData=[],h=0;h<s.length;h++){var f=s[h].getData();f.count()<pnt&&(l.push(s[h]),u.push(s[h].get("dataGroupId")),c.push(f))}})}ue([IQ]);ue([Z_t]);ue([bxt,Bxt,Xxt,Tbt,Nbt,x1t,Y1t,LSt,JSt,iwt,dwt,sTt,PTt,HTt,aMt,uMt,_Mt,AMt,kMt,HMt,QMt,BAt]);ue(eCt);ue(CCt);ue(ctt);ue(UCt);ue(qtt);ue(WCt);ue(QCt);ue(UEt);ue(a2t);ue(N1);ue(S2t);ue(M2t);ue(N2t);ue(G2t);ue(Y2t);ue(tDt);ue(cDt);ue(EDt);ue(tnt);ue(ent);ue(YDt);ue(ont);ue(snt);ue(QDt);ue(fIt);ue(unt);ue(VIt);ue(pQ);ue([IQ,unt]);ue(pQ);function o$(e,t,n){typeof t=="object"&&(n=t,t=null);var r=this,i;if(!(e instanceof Function)){i=[];for(var a in e)e.hasOwnProperty(a)&&i.push(a)}var o=function(l){if(r.apply(this,arguments),e instanceof Function?s$(this,e.call(this,l)):GIt(this,e,i),this.constructor===o)for(var u=o.__initializers__,c=0;c<u.length;c++)u[c].apply(this,arguments)};o.__super__=r,r.__initializers__?o.__initializers__=r.__initializers__.slice():o.__initializers__=[],t&&o.__initializers__.push(t);var s=function(){};return s.prototype=r.prototype,o.prototype=new s,o.prototype.constructor=o,s$(o.prototype,n),o.extend=r.extend,o.derive=r.extend,o}function s$(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function GIt(e,t,n){for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}}const HIt={extend:o$,derive:o$};function WIt(e,t){this.action=e,this.context=t}var FF={trigger:function(e){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(e)){var t=this.__handlers__[e],n=t.length,r=-1,i=arguments;switch(i.length){case 1:for(;++r<n;)t[r].action.call(t[r].context);return;case 2:for(;++r<n;)t[r].action.call(t[r].context,i[1]);return;case 3:for(;++r<n;)t[r].action.call(t[r].context,i[1],i[2]);return;case 4:for(;++r<n;)t[r].action.call(t[r].context,i[1],i[2],i[3]);return;case 5:for(;++r<n;)t[r].action.call(t[r].context,i[1],i[2],i[3],i[4]);return;default:for(;++r<n;)t[r].action.apply(t[r].context,Array.prototype.slice.call(i,1));return}}},on:function(e,t,n){if(!(!e||!t)){var r=this.__handlers__||(this.__handlers__={});if(!r[e])r[e]=[];else if(this.has(e,t))return;var i=new WIt(t,n||this);return r[e].push(i),this}},once:function(e,t,n){if(!e||!t)return;var r=this;function i(){r.off(e,i),t.apply(this,arguments)}return this.on(e,i,n)},before:function(e,t,n){if(!(!e||!t))return e="before"+e,this.on(e,t,n)},after:function(e,t,n){if(!(!e||!t))return e="after"+e,this.on(e,t,n)},success:function(e,t){return this.once("success",e,t)},error:function(e,t){return this.once("error",e,t)},off:function(e,t){var n=this.__handlers__||(this.__handlers__={});if(!t){n[e]=[];return}if(n[e]){for(var r=n[e],i=[],a=0;a<r.length;a++)t&&r[a].action!==t&&i.push(r[a]);n[e]=i}return this},has:function(e,t){var n=this.__handlers__;if(!n||!n[e])return!1;for(var r=n[e],i=0;i<r.length;i++)if(r[i].action===t)return!0}},$It=0,XIt=Array.prototype,jIt=XIt.forEach,Kr={genGUID:function(){return++$It},relative2absolute:function(e,t){if(!t||e.match(/^\//))return e;for(var n=e.split("/"),r=t.split("/"),i=n[0];i==="."||i==="..";)i===".."&&r.pop(),n.shift(),i=n[0];return r.join("/")+"/"+n.join("/")},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},defaults:function(e,t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e},extendWithPropList:function(e,t,n){if(t)for(var r=0;r<n.length;r++){var i=n[r];e[i]=t[i]}return e},defaultsWithPropList:function(e,t,n){if(t)for(var r=0;r<n.length;r++){var i=n[r];e[i]==null&&(e[i]=t[i])}return e},each:function(e,t,n){if(e&&t)if(e.forEach&&e.forEach===jIt)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(n,e[a],a,e)},isObject:function(e){return e===Object(e)},isArray:function(e){return Array.isArray(e)},isArrayLike:function(e){return e?e.length===+e.length:!1},clone:function(e){if(Kr.isObject(e)){if(Kr.isArray(e))return e.slice();if(Kr.isArrayLike(e)){for(var t=new e.constructor(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}else return Kr.extend({},e)}else return e}},ta=function(){this.__uid__=Kr.genGUID()};ta.__initializers__=[function(e){Kr.extend(this,e)}];Kr.extend(ta,HIt);Kr.extend(ta.prototype,FF);var l$=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],u$=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function YIt(e){for(var t={},n={},r=0;r<l$.length;r++){var i=l$[r];o(i)}for(var r=0;r<u$.length;r++){var a=u$[r];n[a]=e.getParameter(e[a])}this.getExtension=function(s){return s in t||o(s),t[s]},this.getParameter=function(s){return n[s]};function o(s){if(e.getExtension){var l=e.getExtension(s);l||(l=e.getExtension("MOZ_"+s)),l||(l=e.getExtension("WEBKIT_"+s)),t[s]=l}}}const wt={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444};function qIt(e){var t=new XMLHttpRequest;t.open("get",e.url),t.responseType=e.responseType||"text",e.onprogress&&(t.onprogress=function(n){if(n.lengthComputable){var r=n.loaded/n.total;e.onprogress(r,n.loaded,n.total)}else e.onprogress(null)}),t.onload=function(n){t.status>=400?e.onerror&&e.onerror():e.onload&&e.onload(t.response)},e.onerror&&(t.onerror=e.onerror),t.send(null)}const KIt={get:qIt};var gL,Nn={};Nn.supportWebGL=function(){if(gL==null)try{var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");if(!t)throw new Error}catch{gL=!1}return gL};Nn.Int8Array=typeof Int8Array>"u"?Array:Int8Array;Nn.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array;Nn.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array;Nn.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array;Nn.Int16Array=typeof Int16Array>"u"?Array:Int16Array;Nn.Float32Array=typeof Float32Array>"u"?Array:Float32Array;Nn.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var Bp={};typeof window<"u"?Bp=window:typeof global<"u"&&(Bp=global);Nn.requestAnimationFrame=Bp.requestAnimationFrame||Bp.msRequestAnimationFrame||Bp.mozRequestAnimationFrame||Bp.webkitRequestAnimationFrame||function(e){setTimeout(e,16)};Nn.createCanvas=function(){return document.createElement("canvas")};Nn.createImage=function(){return new Bp.Image};Nn.request={get:KIt.get};Nn.addEventListener=function(e,t,n,r){e.addEventListener(t,n,r)};Nn.removeEventListener=function(e,t,n){e.removeEventListener(t,n)};var Ui=function(){this.head=null,this.tail=null,this._length=0};Ui.prototype.insert=function(e){var t=new Ui.Entry(e);return this.insertEntry(t),t};Ui.prototype.insertAt=function(e,t){if(!(e<0)){for(var n=this.head,r=0;n&&r!=e;)n=n.next,r++;if(n){var i=new Ui.Entry(t),a=n.prev;a?(a.next=i,i.prev=a):this.head=i,i.next=n,n.prev=i}else this.insert(t)}};Ui.prototype.insertBeforeEntry=function(e,t){var n=new Ui.Entry(e),r=t.prev;r?(r.next=n,n.prev=r):this.head=n,n.next=t,t.prev=n,this._length++};Ui.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this._length++};Ui.prototype.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._length--};Ui.prototype.removeAt=function(e){if(!(e<0)){for(var t=this.head,n=0;t&&n!=e;)t=t.next,n++;if(t)return this.remove(t),t.value}};Ui.prototype.getHead=function(){if(this.head)return this.head.value};Ui.prototype.getTail=function(){if(this.tail)return this.tail.value};Ui.prototype.getAt=function(e){if(!(e<0)){for(var t=this.head,n=0;t&&n!=e;)t=t.next,n++;return t.value}};Ui.prototype.indexOf=function(e){for(var t=this.head,n=0;t;){if(t.value===e)return n;t=t.next,n++}};Ui.prototype.length=function(){return this._length};Ui.prototype.isEmpty=function(){return this._length===0};Ui.prototype.forEach=function(e,t){for(var n=this.head,r=0,i=typeof t<"u";n;)i?e.call(t,n.value,r):e(n.value,r),n=n.next,r++};Ui.prototype.clear=function(){this.tail=this.head=null,this._length=0};Ui.Entry=function(e){this.value=e,this.next=null,this.prev=null};var Xv=function(e){this._list=new Ui,this._map={},this._maxSize=e||10};Xv.prototype.setMaxSize=function(e){this._maxSize=e};Xv.prototype.put=function(e,t){if(!this._map.hasOwnProperty(e)){var n=this._list.length();if(n>=this._maxSize&&n>0){var r=this._list.head;this._list.remove(r),delete this._map[r.key]}var i=this._list.insert(t);i.key=e,this._map[e]=i}};Xv.prototype.get=function(e){var t=this._map[e];if(this._map.hasOwnProperty(e))return t!==this._list.tail&&(this._list.remove(t),this._list.insertEntry(t)),t.value};Xv.prototype.remove=function(e){var t=this._map[e];typeof t<"u"&&(delete this._map[e],this._list.remove(t))};Xv.prototype.clear=function(){this._list.clear(),this._map={}};var Dr={},c$={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function El(e){return e=Math.round(e),e<0?0:e>255?255:e}function ZIt(e){return e=Math.round(e),e<0?0:e>360?360:e}function Lb(e){return e<0?0:e>1?1:e}function mL(e){return e.length&&e.charAt(e.length-1)==="%"?El(parseFloat(e)/100*255):El(parseInt(e,10))}function gy(e){return e.length&&e.charAt(e.length-1)==="%"?Lb(parseFloat(e)/100):Lb(parseFloat(e))}function yL(e,t,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}function Mf(e,t,n){return e+(t-e)*n}function ll(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function FN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var gnt=new Xv(20),Tw=null;function yg(e,t){Tw&&FN(Tw,t),Tw=gnt.put(e,Tw||t.slice())}Dr.parse=function(e,t){if(e){t=t||[];var n=gnt.get(e);if(n)return FN(t,n);e=e+"";var r=e.replace(/ /g,"").toLowerCase();if(r in c$)return FN(t,c$[r]),yg(e,t),t;if(r.charAt(0)==="#"){if(r.length===4){var i=parseInt(r.substr(1),16);if(!(i>=0&&i<=4095)){ll(t,0,0,0,1);return}return ll(t,(i&3840)>>4|(i&3840)>>8,i&240|(i&240)>>4,i&15|(i&15)<<4,1),yg(e,t),t}else if(r.length===7){var i=parseInt(r.substr(1),16);if(!(i>=0&&i<=16777215)){ll(t,0,0,0,1);return}return ll(t,(i&16711680)>>16,(i&65280)>>8,i&255,1),yg(e,t),t}return}var a=r.indexOf("("),o=r.indexOf(")");if(a!==-1&&o+1===r.length){var s=r.substr(0,a),l=r.substr(a+1,o-(a+1)).split(","),u=1;switch(s){case"rgba":if(l.length!==4){ll(t,0,0,0,1);return}u=gy(l.pop());case"rgb":if(l.length!==3){ll(t,0,0,0,1);return}return ll(t,mL(l[0]),mL(l[1]),mL(l[2]),u),yg(e,t),t;case"hsla":if(l.length!==4){ll(t,0,0,0,1);return}return l[3]=gy(l[3]),zN(l,t),yg(e,t),t;case"hsl":if(l.length!==3){ll(t,0,0,0,1);return}return zN(l,t),yg(e,t),t;default:return}}ll(t,0,0,0,1)}};Dr.parseToFloat=function(e,t){if(t=Dr.parse(e,t),!!t)return t[0]/=255,t[1]/=255,t[2]/=255,t};function zN(e,t){var n=(parseFloat(e[0])%360+360)%360/360,r=gy(e[1]),i=gy(e[2]),a=i<=.5?i*(r+1):i+r-i*r,o=i*2-a;return t=t||[],ll(t,El(yL(o,a,n+1/3)*255),El(yL(o,a,n)*255),El(yL(o,a,n-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function JIt(e){if(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=a-i,s=(a+i)/2,l,u;if(o===0)l=0,u=0;else{s<.5?u=o/(a+i):u=o/(2-a-i);var c=((a-t)/6+o/2)/o,h=((a-n)/6+o/2)/o,f=((a-r)/6+o/2)/o;t===a?l=f-h:n===a?l=1/3+c-f:r===a&&(l=2/3+h-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}Dr.lift=function(e,t){var n=Dr.parse(e);if(n){for(var r=0;r<3;r++)t<0?n[r]=n[r]*(1-t)|0:n[r]=(255-n[r])*t+n[r]|0;return Dr.stringify(n,n.length===4?"rgba":"rgb")}};Dr.toHex=function(e){var t=Dr.parse(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)};Dr.fastLerp=function(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){n=n||[];var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=t[i],s=t[a],l=r-i;return n[0]=El(Mf(o[0],s[0],l)),n[1]=El(Mf(o[1],s[1],l)),n[2]=El(Mf(o[2],s[2],l)),n[3]=Lb(Mf(o[3],s[3],l)),n}};Dr.fastMapToColor=Dr.fastLerp;Dr.lerp=function(e,t,n){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var r=e*(t.length-1),i=Math.floor(r),a=Math.ceil(r),o=Dr.parse(t[i]),s=Dr.parse(t[a]),l=r-i,u=Dr.stringify([El(Mf(o[0],s[0],l)),El(Mf(o[1],s[1],l)),El(Mf(o[2],s[2],l)),Lb(Mf(o[3],s[3],l))],"rgba");return n?{color:u,leftIndex:i,rightIndex:a,value:r}:u}};Dr.mapToColor=Dr.lerp;Dr.modifyHSL=function(e,t,n,r){if(e=Dr.parse(e),e)return e=JIt(e),t!=null&&(e[0]=ZIt(t)),n!=null&&(e[1]=gy(n)),r!=null&&(e[2]=gy(r)),Dr.stringify(zN(e),"rgba")};Dr.modifyAlpha=function(e,t){if(e=Dr.parse(e),e&&t!=null)return e[3]=Lb(t),Dr.stringify(e,"rgba")};Dr.stringify=function(e,t){if(!(!e||!e.length)){var n=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(n+=","+e[3]),t+"("+n+")"}};var QIt=Dr.parseToFloat,_L={};function h$(e){var t=Object.keys(e);t.sort();for(var n=[],r=0;r<t.length;r++){var i=t[r],a=e[i];a===null?n.push(i):n.push(i+" "+a.toString())}return n.join(`
`)}function tLt(e,t,n){n.sort();for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(a)}var o=h$(e)+`
`+h$(t)+`
`+r.join(`
`);if(_L[o])return _L[o];var s=Kr.genGUID();return _L[o]=s,s}var ks=ta.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(e,t){t===void 0&&console.warn('Uniform value "'+e+'" is undefined');var n=this.uniforms[e];n&&(typeof t=="string"&&(t=QIt(t)||t),n.value=t,this.autoUpdateTextureStatus&&n.type==="t"&&(t?this.enableTexture(e):this.disableTexture(e)))},setUniforms:function(e){for(var t in e){var n=e[t];this.setUniform(t,n)}},isUniformEnabled:function(e){return this._enabledUniforms.indexOf(e)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(e,t){if(typeof e=="object")for(var n in e){var r=e[n];this.setUniform(n,r)}else this.setUniform(e,t)},get:function(e){var t=this.uniforms[e];if(t)return t.value},attachShader:function(e,t){var n=this.uniforms;this.uniforms=e.createUniforms(),this.shader=e;var r=this.uniforms;this._enabledUniforms=Object.keys(r),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(u){var c=this.uniforms[u].type;return c==="t"||c==="tv"},this);var i=this.vertexDefines,a=this.fragmentDefines;if(this.vertexDefines=Kr.clone(e.vertexDefines),this.fragmentDefines=Kr.clone(e.fragmentDefines),t){for(var o in n)r[o]&&(r[o].value=n[o].value);Kr.defaults(this.vertexDefines,i),Kr.defaults(this.fragmentDefines,a)}var s={};for(var l in e.textures)s[l]={shaderType:e.textures[l].shaderType,type:e.textures[l].type,enabled:t&&this._textureStatus[l]?this._textureStatus[l].enabled:!1};this._textureStatus=s,this._programKey=""},clone:function(){var e=new this.constructor({name:this.name,shader:this.shader});for(var t in this.uniforms)e.uniforms[t].value=this.uniforms[t].value;return e.depthTest=this.depthTest,e.depthMask=this.depthMask,e.transparent=this.transparent,e.blend=this.blend,e.vertexDefines=Kr.clone(this.vertexDefines),e.fragmentDefines=Kr.clone(this.fragmentDefines),e.enableTexture(this.getEnabledTextures()),e.precision=this.precision,e},define:function(e,t,n){var r=this.vertexDefines,i=this.fragmentDefines;e!=="vertex"&&e!=="fragment"&&e!=="both"&&arguments.length<3&&(n=t,t=e,e="both"),n=n??null,(e==="vertex"||e==="both")&&r[t]!==n&&(r[t]=n,this._programKey=""),(e==="fragment"||e==="both")&&i[t]!==n&&(i[t]=n,e!=="both"&&(this._programKey=""))},undefine:function(e,t){e!=="vertex"&&e!=="fragment"&&e!=="both"&&arguments.length<2&&(t=e,e="both"),(e==="vertex"||e==="both")&&this.isDefined("vertex",t)&&(delete this.vertexDefines[t],this._programKey=""),(e==="fragment"||e==="both")&&this.isDefined("fragment",t)&&(delete this.fragmentDefines[t],e!=="both"&&(this._programKey=""))},isDefined:function(e,t){switch(e){case"vertex":return this.vertexDefines[t]!==void 0;case"fragment":return this.fragmentDefines[t]!==void 0}},getDefine:function(e,t){switch(e){case"vertex":return this.vertexDefines[t];case"fragment":return this.fragmentDefines[t]}},enableTexture:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)this.enableTexture(e[t]);return}var n=this._textureStatus[e];if(n){var r=n.enabled;r||(n.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var e=this._textureStatus;for(var t in e)e[t].enabled=!0;this._programKey=""},disableTexture:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)this.disableTexture(e[t]);return}var n=this._textureStatus[e];if(n){var r=!n.enabled;r||(n.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var e=this._textureStatus;for(var t in e)e[t].enabled=!1;this._programKey=""},isTextureEnabled:function(e){var t=this._textureStatus;return!!t[e]&&t[e].enabled},getEnabledTextures:function(){var e=[],t=this._textureStatus;for(var n in t)t[n].enabled&&e.push(n);return e},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=tLt(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),lM=1e-6,ea=Array,ym=Math.random,Lt={};Lt.create=function(){var e=new ea(2);return e[0]=0,e[1]=0,e};Lt.clone=function(e){var t=new ea(2);return t[0]=e[0],t[1]=e[1],t};Lt.fromValues=function(e,t){var n=new ea(2);return n[0]=e,n[1]=t,n};Lt.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e};Lt.set=function(e,t,n){return e[0]=t,e[1]=n,e};Lt.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e};Lt.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};Lt.sub=Lt.subtract;Lt.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e};Lt.mul=Lt.multiply;Lt.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e};Lt.div=Lt.divide;Lt.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e};Lt.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e};Lt.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e};Lt.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e};Lt.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)};Lt.dist=Lt.distance;Lt.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r};Lt.sqrDist=Lt.squaredDistance;Lt.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)};Lt.len=Lt.length;Lt.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n};Lt.sqrLen=Lt.squaredLength;Lt.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e};Lt.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e};Lt.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e};Lt.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]};Lt.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e};Lt.lerp=function(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e};Lt.random=function(e,t){t=t||1;var n=GLMAT_RANDOM()*2*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e};Lt.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e};Lt.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e};Lt.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e};Lt.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e};Lt.forEach=function(){var e=Lt.create();return function(t,n,r,i,a,o){var s,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}}();var De=function(e,t){e=e||0,t=t||0,this.array=Lt.fromValues(e,t),this._dirty=!0};De.prototype={constructor:De,add:function(e){return Lt.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,t){return this.array[0]=e,this.array[1]=t,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this._dirty=!0,this},clone:function(){return new De(this.x,this.y)},copy:function(e){return Lt.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,t){return Lt.cross(e.array,this.array,t.array),e._dirty=!0,this},dist:function(e){return Lt.dist(this.array,e.array)},distance:function(e){return Lt.distance(this.array,e.array)},div:function(e){return Lt.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Lt.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Lt.dot(this.array,e.array)},len:function(){return Lt.len(this.array)},length:function(){return Lt.length(this.array)},lerp:function(e,t,n){return Lt.lerp(this.array,e.array,t.array,n),this._dirty=!0,this},min:function(e){return Lt.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Lt.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Lt.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Lt.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Lt.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Lt.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Lt.random(this.array,e),this._dirty=!0,this},scale:function(e){return Lt.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,t){return Lt.scaleAndAdd(this.array,this.array,e.array,t),this._dirty=!0,this},sqrDist:function(e){return Lt.sqrDist(this.array,e.array)},squaredDistance:function(e){return Lt.squaredDistance(this.array,e.array)},sqrLen:function(){return Lt.sqrLen(this.array)},squaredLength:function(){return Lt.squaredLength(this.array)},sub:function(e){return Lt.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Lt.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat2:function(e){return Lt.transformMat2(this.array,this.array,e.array),this._dirty=!0,this},transformMat2d:function(e){return Lt.transformMat2d(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Lt.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Lt.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};if(Object.defineProperty){var f$=De.prototype;Object.defineProperty(f$,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Object.defineProperty(f$,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}})}De.add=function(e,t,n){return Lt.add(e.array,t.array,n.array),e._dirty=!0,e};De.set=function(e,t,n){return Lt.set(e.array,t,n),e._dirty=!0,e};De.copy=function(e,t){return Lt.copy(e.array,t.array),e._dirty=!0,e};De.cross=function(e,t,n){return Lt.cross(e.array,t.array,n.array),e._dirty=!0,e};De.dist=function(e,t){return Lt.distance(e.array,t.array)};De.distance=De.dist;De.div=function(e,t,n){return Lt.divide(e.array,t.array,n.array),e._dirty=!0,e};De.divide=De.div;De.dot=function(e,t){return Lt.dot(e.array,t.array)};De.len=function(e){return Lt.length(e.array)};De.lerp=function(e,t,n,r){return Lt.lerp(e.array,t.array,n.array,r),e._dirty=!0,e};De.min=function(e,t,n){return Lt.min(e.array,t.array,n.array),e._dirty=!0,e};De.max=function(e,t,n){return Lt.max(e.array,t.array,n.array),e._dirty=!0,e};De.mul=function(e,t,n){return Lt.multiply(e.array,t.array,n.array),e._dirty=!0,e};De.multiply=De.mul;De.negate=function(e,t){return Lt.negate(e.array,t.array),e._dirty=!0,e};De.normalize=function(e,t){return Lt.normalize(e.array,t.array),e._dirty=!0,e};De.random=function(e,t){return Lt.random(e.array,t),e._dirty=!0,e};De.scale=function(e,t,n){return Lt.scale(e.array,t.array,n),e._dirty=!0,e};De.scaleAndAdd=function(e,t,n,r){return Lt.scaleAndAdd(e.array,t.array,n.array,r),e._dirty=!0,e};De.sqrDist=function(e,t){return Lt.sqrDist(e.array,t.array)};De.squaredDistance=De.sqrDist;De.sqrLen=function(e){return Lt.sqrLen(e.array)};De.squaredLength=De.sqrLen;De.sub=function(e,t,n){return Lt.subtract(e.array,t.array,n.array),e._dirty=!0,e};De.subtract=De.sub;De.transformMat2=function(e,t,n){return Lt.transformMat2(e.array,t.array,n.array),e._dirty=!0,e};De.transformMat2d=function(e,t,n){return Lt.transformMat2d(e.array,t.array,n.array),e._dirty=!0,e};De.transformMat3=function(e,t,n){return Lt.transformMat3(e.array,t.array,n.array),e._dirty=!0,e};De.transformMat4=function(e,t,n){return Lt.transformMat4(e.array,t.array,n.array),e._dirty=!0,e};var d$=1,p$=2,xL=3,v$={};function eLt(e){for(var t=e.split(`
`),n=0,r=t.length;n<r;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function g$(e,t,n){if(!e.getShaderParameter(t,e.COMPILE_STATUS))return[e.getShaderInfoLog(t),eLt(n)].join(`
`)}var m$=new Nn.Float32Array(16),nLt=ta.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(e){this._textureSlot=0,e.gl.useProgram(this._program)},hasUniform:function(e){var t=this._locations[e];return t!=null},useTextureSlot:function(e,t,n){t&&(e.gl.activeTexture(e.gl.TEXTURE0+n),t.isRenderable()?t.bind(e):t.unbind(e))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(e){this._textureSlot=e||0},takeCurrentTextureSlot:function(e,t){var n=this._textureSlot;return this.useTextureSlot(e,t,n),this._textureSlot++,n},setUniform:function(e,t,n,r){var i=this._locations,a=i[n];if(a==null)return!1;switch(t){case"m4":if(!(r instanceof Float32Array)){for(var o=0;o<r.length;o++)m$[o]=r[o];r=m$}e.uniformMatrix4fv(a,!1,r);break;case"2i":e.uniform2i(a,r[0],r[1]);break;case"2f":e.uniform2f(a,r[0],r[1]);break;case"3i":e.uniform3i(a,r[0],r[1],r[2]);break;case"3f":e.uniform3f(a,r[0],r[1],r[2]);break;case"4i":e.uniform4i(a,r[0],r[1],r[2],r[3]);break;case"4f":e.uniform4f(a,r[0],r[1],r[2],r[3]);break;case"1i":e.uniform1i(a,r);break;case"1f":e.uniform1f(a,r);break;case"1fv":e.uniform1fv(a,r);break;case"1iv":e.uniform1iv(a,r);break;case"2iv":e.uniform2iv(a,r);break;case"2fv":e.uniform2fv(a,r);break;case"3iv":e.uniform3iv(a,r);break;case"3fv":e.uniform3fv(a,r);break;case"4iv":e.uniform4iv(a,r);break;case"4fv":e.uniform4fv(a,r);break;case"m2":case"m2v":e.uniformMatrix2fv(a,!1,r);break;case"m3":case"m3v":e.uniformMatrix3fv(a,!1,r);break;case"m4v":if(Array.isArray(r)&&Array.isArray(r[0])){for(var s=new Nn.Float32Array(r.length*16),l=0,o=0;o<r.length;o++)for(var u=r[o],c=0;c<16;c++)s[l++]=u[c];e.uniformMatrix4fv(a,!1,s)}else e.uniformMatrix4fv(a,!1,r);break}return!0},setUniformOfSemantic:function(e,t,n){var r=this.uniformSemantics[t];return r?this.setUniform(e,r.type,r.symbol,n):!1},enableAttributes:function(e,t,n){var r=e.gl,i=this._program,a=this._locations,o;n?o=n.__enabledAttributeList:o=v$[e.__uid__],o||(n?o=n.__enabledAttributeList=[]:o=v$[e.__uid__]=[]);for(var s=[],l=0;l<t.length;l++){var u=t[l];if(!this.attributes[u]){s[l]=-1;continue}var c=a[u];if(c==null){if(c=r.getAttribLocation(i,u),c===-1){s[l]=-1;continue}a[u]=c}s[l]=c,o[c]?o[c]=p$:o[c]=d$}for(var l=0;l<o.length;l++)switch(o[l]){case d$:r.enableVertexAttribArray(l),o[l]=xL;break;case p$:o[l]=xL;break;case xL:r.disableVertexAttribArray(l),o[l]=0;break}return s},getAttribLocation:function(e,t){var n=this._locations,r=n[t];return r==null&&(r=e.getAttribLocation(this._program,t),n[t]=r),r},buildProgram:function(e,t,n,r){var i=e.createShader(e.VERTEX_SHADER),a=e.createProgram();e.shaderSource(i,n),e.compileShader(i);var o=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(o,r),e.compileShader(o);var s=g$(e,i,n);if(s||(s=g$(e,o,r),s))return s;if(e.attachShader(a,i),e.attachShader(a,o),t.attributeSemantics.POSITION)e.bindAttribLocation(a,0,t.attributeSemantics.POSITION.symbol);else{var l=Object.keys(this.attributes);e.bindAttribLocation(a,0,l[0])}if(e.linkProgram(a),e.deleteShader(i),e.deleteShader(o),this._program=a,this.vertexCode=n,this.fragmentCode=r,!e.getProgramParameter(a,e.LINK_STATUS))return`Could not link program
`+e.getProgramInfoLog(a);for(var u=0;u<t.uniforms.length;u++){var c=t.uniforms[u];this._locations[c]=e.getUniformLocation(a,c)}}}),rLt=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function y$(e,t,n){function r(o,s,l,u){var c="";isNaN(s)&&(s in t?s=t[s]:s=i[s]),isNaN(l)&&(l in t?l=t[l]:l=i[l]);for(var h=parseInt(s);h<parseInt(l);h++)c+="{"+u.replace(/float\s*\(\s*_idx_\s*\)/g,h.toFixed(1)).replace(/_idx_/g,h)+"}";return c}var i={};for(var a in n)i[a+"_COUNT"]=n[a];return e.replace(rLt,r)}function bL(e,t,n){var r=[];if(t)for(var i in t){var a=t[i];a>0&&r.push("#define "+i.toUpperCase()+"_COUNT "+a)}if(n)for(var o=0;o<n.length;o++){var s=n[o];r.push("#define "+s.toUpperCase()+"_ENABLED")}for(var s in e){var l=e[s];l===null?r.push("#define "+s):r.push("#define "+s+" "+l.toString())}return r.join(`
`)}function iLt(e){for(var t=[],n=0;n<e.length;n++)t.push("#extension GL_"+e[n]+" : enable");return t.join(`
`)}function aLt(e){return["precision",e,"float"].join(" ")+`;
`+["precision",e,"int"].join(" ")+`;
`+["precision",e,"sampler2D"].join(" ")+`;
`}function mnt(e){this._renderer=e,this._cache={}}mnt.prototype.getProgram=function(e,t,n){var r=this._cache,i=e.isSkinnedMesh&&e.isSkinnedMesh(),a=e.isInstancedMesh&&e.isInstancedMesh(),o="s"+t.shader.shaderID+"m"+t.getProgramKey();n&&(o+="se"+n.getProgramKey(e.lightGroup)),i&&(o+=",sk"+e.joints.length),a&&(o+=",is");var x=r[o];if(x)return x;var s=n?n.getLightsNumbers(e.lightGroup):{},l=this._renderer,u=l.gl,c=t.getEnabledTextures(),h="";if(i){var f={SKINNING:null,JOINT_COUNT:e.joints.length};e.joints.length>l.getMaxJointNumber()&&(f.USE_SKIN_MATRICES_TEXTURE=null),h+=`
`+bL(f)+`
`}a&&(h+=`
#define INSTANCING
`);var d=h+bL(t.vertexDefines,s,c),p=h+bL(t.fragmentDefines,s,c),v=d+`
`+t.shader.vertex,g=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(b){return l.getGLExtension(b)!=null});g.indexOf("EXT_shader_texture_lod")>=0&&(p+=`
#define SUPPORT_TEXTURE_LOD`),g.indexOf("OES_standard_derivatives")>=0&&(p+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var m=iLt(g)+`
`+aLt(t.precision)+`
`+p+`
`+t.shader.fragment,_=y$(v,t.vertexDefines,s),y=y$(m,t.fragmentDefines,s),x=new nLt;x.uniformSemantics=t.shader.uniformSemantics,x.attributes=t.shader.attributes;var S=x.buildProgram(u,t.shader,_,y);return x.__error=S,r[o]=x,x};var _$=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,oLt=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,x$=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,sLt={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function uc(e){for(var t=[],n=0;n<e;n++)t[n]=0;return t}var b$={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return uc(2)},vec3:function(){return uc(3)},vec4:function(){return uc(4)},ivec2:function(){return uc(2)},ivec3:function(){return uc(3)},ivec4:function(){return uc(4)},mat2:function(){return uc(4)},mat3:function(){return uc(9)},mat4:function(){return uc(16)},array:function(){return[]}},UN=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],ynt=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],_nt=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],lLt={vec4:4,vec3:3,vec2:2,float:1},SL={},xnt={};function uLt(e,t){var n="vertex:"+e+"fragment:"+t;if(SL[n])return SL[n];var r=Kr.genGUID();return SL[n]=r,xnt[r]={vertex:e,fragment:t},r}function S$(e){return e.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function _g(){console.error("Wrong uniform/attributes syntax")}function w$(e,t){for(var n=/[,=\(\):]/,r=t.replace(/:\s*\[\s*(.*)\s*\]/g,"="+e+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),i=[],a=0;a<r.length;a++)r[a].match(n)?i.push(r[a].charAt(0),r[a].slice(1)):i.push(r[a]);r=i;var o=0,s=1,l=2,u=3,c=4,h=5,f=o,d={},p=null,v;g(r[0]);function g(y){y||_g();var x=y.match(/\[(.*?)\]/);v=y.replace(/\[(.*?)\]/,""),d[v]={},x&&(d[v].isArray=!0,d[v].arraySize=x[1])}for(var a=1;a<r.length;a++){var m=r[a];if(m){if(m==="="){if(f!==o&&f!==u){_g();break}f=s;continue}else if(m===":"){f=c;continue}else if(m===","){if(f===l){if(!(p instanceof Array)){_g();break}p.push(+r[++a])}else f=h;continue}else if(m===")"){d[v].value=new Nn.Float32Array(p),p=null,f=h;continue}else if(m==="("){if(f!==l){_g();break}if(!(p instanceof Array)){_g();break}p.push(+r[++a]);continue}else if(m.indexOf("vec")>=0){if(f!==s&&f!==c){_g();break}f=l,p=[];continue}else if(f===s){e==="bool"?d[v].value=m==="true":d[v].value=parseFloat(m),p=null;continue}else if(f===c){var _=m;UN.indexOf(_)>=0||ynt.indexOf(_)>=0||_nt.indexOf(_)>=0?d[v].semantic=_:_==="ignore"||_==="unconfigurable"?d[v].ignore=!0:e==="bool"?d[v].value=_==="true":d[v].value=parseFloat(_);continue}g(m),f=o}}return d}function kt(e,t){typeof e=="object"&&(t=e.fragment,e=e.vertex),e=S$(e),t=S$(t),this._shaderID=uLt(e,t),this._vertexCode=kt.parseImport(e),this._fragmentCode=kt.parseImport(t),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}kt.prototype={constructor:kt,createUniforms:function(){var e={};for(var t in this.uniformTemplates){var n=this.uniformTemplates[t];e[t]={type:n.type,value:n.value()}}return e},_parseImport:function(){this._vertexCode=kt.parseImport(this.vertex),this._fragmentCode=kt.parseImport(this.fragment)},_addSemanticUniform:function(e,t,n){if(UN.indexOf(n)>=0)this.attributeSemantics[n]={symbol:e,type:t};else if(_nt.indexOf(n)>=0){var r=!1,i=n;n.match(/TRANSPOSE$/)&&(r=!0,i=n.slice(0,-9)),this.matrixSemantics[n]={symbol:e,type:t,isTranspose:r,semanticNoTranspose:i}}else ynt.indexOf(n)>=0&&(this.uniformSemantics[n]={symbol:e,type:t})},_addMaterialUniform:function(e,t,n,r,i,a){a[e]={type:n,value:i?b$.array:r||b$[t],semantic:null}},_parseUniforms:function(){var e={},t=this,n="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(_$,i),n="fragment",this._fragmentCode=this._fragmentCode.replace(_$,i),t.matrixSemanticKeys=Object.keys(this.matrixSemantics);function r(a){return a!=null?function(){return a}:null}function i(a,o,s){var l=w$(o,s),u=[];for(var c in l){var h=l[c],f=h.semantic,d=c,p=sLt[o],v=r(l[c].value);l[c].isArray&&(d+="["+l[c].arraySize+"]",p+="v"),u.push(d),t._uniformList.push(c),h.ignore||((o==="sampler2D"||o==="samplerCube")&&(t.textures[c]={shaderType:n,type:o}),f?t._addSemanticUniform(c,p,f):t._addMaterialUniform(c,o,p,v,l[c].isArray,e))}return u.length>0?"uniform "+o+" "+u.join(",")+`;
`:""}this.uniformTemplates=e},_parseAttributes:function(){var e={},t=this;this._vertexCode=this._vertexCode.replace(oLt,n);function n(r,i,a){var o=w$(i,a),s=lLt[i]||1,l=[];for(var u in o){var c=o[u].semantic;if(e[u]={type:"float",size:s,semantic:c||null},c){if(UN.indexOf(c)<0)throw new Error('Unkown semantic "'+c+'"');t.attributeSemantics[c]={symbol:u,type:i}}l.push(u)}return"attribute "+i+" "+l.join(",")+`;
`}this.attributes=e},_parseDefines:function(){var e=this,t="vertex";this._vertexCode=this._vertexCode.replace(x$,n),t="fragment",this._fragmentCode=this._fragmentCode.replace(x$,n);function n(r,i,a){var o=t==="vertex"?e.vertexDefines:e.fragmentDefines;return o[i]||(a==="false"?o[i]=!1:a==="true"?o[i]=!0:o[i]=a?isNaN(parseFloat(a))?a.trim():parseFloat(a):null),""}},clone:function(){var e=xnt[this._shaderID],t=new kt(e.vertex,e.fragment);return t}};Object.defineProperty&&(Object.defineProperty(kt.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(kt.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(kt.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(kt.prototype,"uniforms",{get:function(){return this._uniformList}}));var cLt=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;kt.parseImport=function(e){return e=e.replace(cLt,function(i,n,r){var i=kt.source(r);return i?kt.parseImport(i):(console.error('Shader chunk "'+r+'" not existed in library'),"")}),e};var hLt=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;kt.import=function(e){e.replace(hLt,function(t,n,r,a){var a=a.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(a){for(var o=r.split("."),s=kt.codes,l=0,u;l<o.length-1;)u=o[l++],s[u]||(s[u]={}),s=s[u];u=o[l],s[u]=a}return a})};kt.codes={};kt.source=function(e){for(var t=e.split("."),n=kt.codes,r=0;n&&r<t.length;){var i=t[r++];n=n[i]}return typeof n!="string"?(console.error('Shader "'+e+'" not existed in library'),""):n};const bnt=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`;var Mt={};Mt.create=function(){var e=new ea(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Mt.clone=function(e){var t=new ea(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t};Mt.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};Mt.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Mt.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e};Mt.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=n*s-r*o,y=n*l-i*o,x=n*u-a*o,S=r*l-i*s,b=r*u-a*s,w=i*u-a*l,A=c*v-h*p,T=c*g-f*p,M=c*m-d*p,C=h*g-f*v,E=h*m-d*v,D=f*m-d*g,I=_*D-y*E+x*C+S*M-b*T+w*A;return I?(I=1/I,e[0]=(s*D-l*E+u*C)*I,e[1]=(i*E-r*D-a*C)*I,e[2]=(v*w-g*b+m*S)*I,e[3]=(f*b-h*w-d*S)*I,e[4]=(l*M-o*D-u*T)*I,e[5]=(n*D-i*M+a*T)*I,e[6]=(g*x-p*w-m*y)*I,e[7]=(c*w-f*x+d*y)*I,e[8]=(o*E-s*M+u*A)*I,e[9]=(r*M-n*E-a*A)*I,e[10]=(p*b-v*x+m*_)*I,e[11]=(h*x-c*b-d*_)*I,e[12]=(s*T-o*C-l*A)*I,e[13]=(n*C-r*T+i*A)*I,e[14]=(v*y-p*S-g*_)*I,e[15]=(c*S-h*y+f*_)*I,e):null};Mt.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15];return e[0]=s*(f*m-d*g)-h*(l*m-u*g)+v*(l*d-u*f),e[1]=-(r*(f*m-d*g)-h*(i*m-a*g)+v*(i*d-a*f)),e[2]=r*(l*m-u*g)-s*(i*m-a*g)+v*(i*u-a*l),e[3]=-(r*(l*d-u*f)-s*(i*d-a*f)+h*(i*u-a*l)),e[4]=-(o*(f*m-d*g)-c*(l*m-u*g)+p*(l*d-u*f)),e[5]=n*(f*m-d*g)-c*(i*m-a*g)+p*(i*d-a*f),e[6]=-(n*(l*m-u*g)-o*(i*m-a*g)+p*(i*u-a*l)),e[7]=n*(l*d-u*f)-o*(i*d-a*f)+c*(i*u-a*l),e[8]=o*(h*m-d*v)-c*(s*m-u*v)+p*(s*d-u*h),e[9]=-(n*(h*m-d*v)-c*(r*m-a*v)+p*(r*d-a*h)),e[10]=n*(s*m-u*v)-o*(r*m-a*v)+p*(r*u-a*s),e[11]=-(n*(s*d-u*h)-o*(r*d-a*h)+c*(r*u-a*s)),e[12]=-(o*(h*g-f*v)-c*(s*g-l*v)+p*(s*f-l*h)),e[13]=n*(h*g-f*v)-c*(r*g-i*v)+p*(r*f-i*h),e[14]=-(n*(s*g-l*v)-o*(r*g-i*v)+p*(r*l-i*s)),e[15]=n*(s*f-l*h)-o*(r*f-i*h)+c*(r*l-i*s),e};Mt.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*o-n*a,_=t*s-r*a,y=t*l-i*a,x=n*s-r*o,S=n*l-i*o,b=r*l-i*s,w=u*p-c*d,A=u*v-h*d,T=u*g-f*d,M=c*v-h*p,C=c*g-f*p,E=h*g-f*v;return m*E-_*C+y*M+x*T-S*A+b*w};Mt.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15],y=n[0],x=n[1],S=n[2],b=n[3];return e[0]=y*r+x*s+S*h+b*v,e[1]=y*i+x*l+S*f+b*g,e[2]=y*a+x*u+S*d+b*m,e[3]=y*o+x*c+S*p+b*_,y=n[4],x=n[5],S=n[6],b=n[7],e[4]=y*r+x*s+S*h+b*v,e[5]=y*i+x*l+S*f+b*g,e[6]=y*a+x*u+S*d+b*m,e[7]=y*o+x*c+S*p+b*_,y=n[8],x=n[9],S=n[10],b=n[11],e[8]=y*r+x*s+S*h+b*v,e[9]=y*i+x*l+S*f+b*g,e[10]=y*a+x*u+S*d+b*m,e[11]=y*o+x*c+S*p+b*_,y=n[12],x=n[13],S=n[14],b=n[15],e[12]=y*r+x*s+S*h+b*v,e[13]=y*i+x*l+S*f+b*g,e[14]=y*a+x*u+S*d+b*m,e[15]=y*o+x*c+S*p+b*_,e};Mt.multiplyAffine=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[4],s=t[5],l=t[6],u=t[8],c=t[9],h=t[10],f=t[12],d=t[13],p=t[14],v=n[0],g=n[1],m=n[2];return e[0]=v*r+g*o+m*u,e[1]=v*i+g*s+m*c,e[2]=v*a+g*l+m*h,v=n[4],g=n[5],m=n[6],e[4]=v*r+g*o+m*u,e[5]=v*i+g*s+m*c,e[6]=v*a+g*l+m*h,v=n[8],g=n[9],m=n[10],e[8]=v*r+g*o+m*u,e[9]=v*i+g*s+m*c,e[10]=v*a+g*l+m*h,v=n[12],g=n[13],m=n[14],e[12]=v*r+g*o+m*u+f,e[13]=v*i+g*s+m*c+d,e[14]=v*a+g*l+m*h+p,e};Mt.mul=Mt.multiply;Mt.mulAffine=Mt.multiplyAffine;Mt.translate=function(e,t,n){var r=n[0],i=n[1],a=n[2],o,s,l,u,c,h,f,d,p,v,g,m;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],h=t[5],f=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=h,e[6]=f,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=o*r+c*i+p*a+t[12],e[13]=s*r+h*i+v*a+t[13],e[14]=l*r+f*i+g*a+t[14],e[15]=u*r+d*i+m*a+t[15]),e};Mt.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e};Mt.rotate=function(e,t,n,r){var i=r[0],a=r[1],o=r[2],s=Math.sqrt(i*i+a*a+o*o),l,u,c,h,f,d,p,v,g,m,_,y,x,S,b,w,A,T,M,C,E,D,I,L;return Math.abs(s)<lM?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(n),u=Math.cos(n),c=1-u,h=t[0],f=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],_=t[7],y=t[8],x=t[9],S=t[10],b=t[11],w=i*i*c+u,A=a*i*c+o*l,T=o*i*c-a*l,M=i*a*c-o*l,C=a*a*c+u,E=o*a*c+i*l,D=i*o*c+a*l,I=a*o*c-i*l,L=o*o*c+u,e[0]=h*w+v*A+y*T,e[1]=f*w+g*A+x*T,e[2]=d*w+m*A+S*T,e[3]=p*w+_*A+b*T,e[4]=h*M+v*C+y*E,e[5]=f*M+g*C+x*E,e[6]=d*M+m*C+S*E,e[7]=p*M+_*C+b*E,e[8]=h*D+v*I+y*L,e[9]=f*D+g*I+x*L,e[10]=d*D+m*I+S*L,e[11]=p*D+_*I+b*L,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)};Mt.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=l*i+f*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=f*i-l*r,e};Mt.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=l*i-f*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=l*r+f*i,e};Mt.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=l*i+f*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=f*i-l*r,e};Mt.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,u=a+a,c=r*s,h=r*l,f=r*u,d=i*l,p=i*u,v=a*u,g=o*s,m=o*l,_=o*u;return e[0]=1-(d+v),e[1]=h+_,e[2]=f-m,e[3]=0,e[4]=h-_,e[5]=1-(c+v),e[6]=p+g,e[7]=0,e[8]=f+m,e[9]=p-g,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e};Mt.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,h=r*s,f=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return e[0]=1-h-p,e[1]=c+m,e[2]=f-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=f+g,e[9]=d-v,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};Mt.frustum=function(e,t,n,r,i,a,o){var s=1/(n-t),l=1/(i-r),u=1/(a-o);return e[0]=a*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(o+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*u,e[15]=0,e};Mt.perspective=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e};Mt.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e};Mt.lookAt=function(e,t,n,r){var i,a,o,s,l,u,c,h,f,d,p=t[0],v=t[1],g=t[2],m=r[0],_=r[1],y=r[2],x=n[0],S=n[1],b=n[2];return Math.abs(p-x)<lM&&Math.abs(v-S)<lM&&Math.abs(g-b)<lM?Mt.identity(e):(c=p-x,h=v-S,f=g-b,d=1/Math.sqrt(c*c+h*h+f*f),c*=d,h*=d,f*=d,i=_*f-y*h,a=y*c-m*f,o=m*h-_*c,d=Math.sqrt(i*i+a*a+o*o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=h*o-f*a,l=f*i-c*o,u=c*a-h*i,d=Math.sqrt(s*s+l*l+u*u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(i*p+a*v+o*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+h*v+f*g),e[15]=1,e)};Mt.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))};var Q={};Q.create=function(){var e=new ea(3);return e[0]=0,e[1]=0,e[2]=0,e};Q.clone=function(e){var t=new ea(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t};Q.fromValues=function(e,t,n){var r=new ea(3);return r[0]=e,r[1]=t,r[2]=n,r};Q.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e};Q.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e};Q.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e};Q.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};Q.sub=Q.subtract;Q.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e};Q.mul=Q.multiply;Q.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e};Q.div=Q.divide;Q.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e};Q.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e};Q.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e};Q.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e};Q.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)};Q.dist=Q.distance;Q.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i};Q.sqrDist=Q.squaredDistance;Q.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)};Q.len=Q.length;Q.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r};Q.sqrLen=Q.squaredLength;Q.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e};Q.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e};Q.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e};Q.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]};Q.cross=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e};Q.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e};Q.random=function(e,t){t=t||1;var n=ym()*2*Math.PI,r=ym()*2-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e};Q.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e};Q.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e};Q.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*i,h=u*i+l*r-o*a,f=u*a+o*i-s*r,d=-o*r-s*i-l*a;return e[0]=c*u+d*-o+h*-l-f*-s,e[1]=h*u+d*-s+f*-o-c*-l,e[2]=f*u+d*-l+c*-s-h*-o,e};Q.rotateX=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e};Q.rotateY=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e};Q.rotateZ=function(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e};Q.forEach=function(){var e=Q.create();return function(t,n,r,i,a,o){var s,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}();Q.angle=function(e,t){var n=Q.fromValues(e[0],e[1],e[2]),r=Q.fromValues(t[0],t[1],t[2]);Q.normalize(n,n),Q.normalize(r,r);var i=Q.dot(n,r);return i>1?0:Math.acos(i)};kt.import(bnt);var wr=Mt.create,T$={};function M$(e){return e.material}function fLt(e,t,n){return t.uniforms[n].value}function dLt(e,t,n,r){return n!==r}function pLt(e){return!0}function A$(){}var C$={float:wt.FLOAT,byte:wt.BYTE,ubyte:wt.UNSIGNED_BYTE,short:wt.SHORT,ushort:wt.UNSIGNED_SHORT};function vLt(e,t,n){this.availableAttributes=e,this.availableAttributeSymbols=t,this.indicesBuffer=n,this.vao=null}function gLt(e){var t,n;this.bind=function(r){t||(t=Nn.createCanvas(),t.width=t.height=1,t.getContext("2d"));var i=r.gl,a=!n;a&&(n=i.createTexture()),i.bindTexture(i.TEXTURE_2D,n),a&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,t)},this.unbind=function(r){r.gl.bindTexture(r.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Fs=ta.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=Nn.createCanvas());var e=this.canvas;try{var t={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!this.gl)throw new Error;this._glinfo=new YIt(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(n){throw"Error creating WebGL Context "+n}this._programMgr=new mnt(this),this._placeholderTexture=new gLt},{resize:function(e,t){var n=this.canvas,r=this.devicePixelRatio;e!=null?(n.style&&(n.style.width=e+"px",n.style.height=t+"px"),n.width=e*r,n.height=t*r,this._width=e,this._height=t):(this._width=n.width/r,this._height=n.height/r),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var e=this.viewport;return e.width/e.height},setDevicePixelRatio:function(e){this.devicePixelRatio=e,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(e){return this._glinfo.getExtension(e)},getGLParameter:function(e){return this._glinfo.getParameter(e)},setViewport:function(e,t,n,r,i){if(typeof e=="object"){var a=e;e=a.x,t=a.y,n=a.width,r=a.height,i=a.devicePixelRatio}i=i||this.devicePixelRatio,this.gl.viewport(e*i,t*i,n*i,r*i),this.viewport={x:e,y:t,width:n,height:r,devicePixelRatio:i}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var e=this._clearStack.pop();this.clearColor=e.clearColor,this.clearBit=e.clearBit}},bindSceneRendering:function(e){this._sceneRendering=e},render:function(e,t,n,r){var i=this.gl,a=this.clearColor;if(this.clearBit){i.colorMask(!0,!0,!0,!0),i.depthMask(!0);var o=this.viewport,s=!1,l=o.devicePixelRatio;(o.width!==this._width||o.height!==this._height||l&&l!==this.devicePixelRatio||o.x||o.y)&&(s=!0,i.enable(i.SCISSOR_TEST),i.scissor(o.x*l,o.y*l,o.width*l,o.height*l)),i.clearColor(a[0],a[1],a[2],a[3]),i.clear(this.clearBit),s&&i.disable(i.SCISSOR_TEST)}if(n||e.update(!1),e.updateLights(),t=t||e.getMainCamera(),!t){console.error("Can't find camera in the scene.");return}t.update();var u=e.updateRenderList(t,!0);this._sceneRendering=e;var c=u.opaque,h=u.transparent,f=e.material;e.trigger("beforerender",this,e,t,u),r?(this.renderPreZ(c,e,t),i.depthFunc(i.LEQUAL)):i.depthFunc(i.LESS);for(var d=wr(),p=Q.create(),v=0;v<h.length;v++){var g=h[v];Mt.multiplyAffine(d,t.viewMatrix.array,g.worldTransform.array),Q.transformMat4(p,g.position.array,d),g.__depth=p[2]}this.renderPass(c,t,{getMaterial:function(m){return f||m.material},sortCompare:this.opaqueSortCompare}),this.renderPass(h,t,{getMaterial:function(m){return f||m.material},sortCompare:this.transparentSortCompare}),e.trigger("afterrender",this,e,t,u),this._sceneRendering=null},getProgram:function(e,t,n){return t=t||e.material,this._programMgr.getProgram(e,t,n)},validateProgram:function(e){if(e.__error){var t=e.__error;if(T$[e.__uid__])return;if(T$[e.__uid__]=!0,this.throwError)throw new Error(t);this.trigger("error",t)}},updatePrograms:function(e,t,n){var r=n&&n.getMaterial||M$;t=t||null;for(var i=0;i<e.length;i++){var a=e[i],o=r.call(this,a);if(i>0){var s=e[i-1],l=s.joints?s.joints.length:0,u=a.joints?a.joints.length:0;if(u===l&&a.material===s.material&&a.lightGroup===s.lightGroup){a.__program=s.__program;continue}}var c=this._programMgr.getProgram(a,o,t);this.validateProgram(c),a.__program=c}},renderPass:function(e,t,n){this.trigger("beforerenderpass",this,e,t,n),n=n||{},n.getMaterial=n.getMaterial||M$,n.getUniform=n.getUniform||fLt,n.isMaterialChanged=n.isMaterialChanged||dLt,n.beforeRender=n.beforeRender||A$,n.afterRender=n.afterRender||A$;var r=n.ifRender||pLt;this.updatePrograms(e,this._sceneRendering,n),n.sortCompare&&e.sort(n.sortCompare);var i=this.viewport,a=i.devicePixelRatio,o=[i.x*a,i.y*a,i.width*a,i.height*a],s=this.devicePixelRatio,l=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*s,this._height*s],u=[o[2],o[3]],c=Date.now();t?(Mt.copy(Sr.VIEW,t.viewMatrix.array),Mt.copy(Sr.PROJECTION,t.projectionMatrix.array),Mt.copy(Sr.VIEWINVERSE,t.worldTransform.array)):(Mt.identity(Sr.VIEW),Mt.identity(Sr.PROJECTION),Mt.identity(Sr.VIEWINVERSE)),Mt.multiply(Sr.VIEWPROJECTION,Sr.PROJECTION,Sr.VIEW),Mt.invert(Sr.PROJECTIONINVERSE,Sr.PROJECTION),Mt.invert(Sr.VIEWPROJECTIONINVERSE,Sr.VIEWPROJECTION);for(var h=this.gl,f=this._sceneRendering,d,p,v,g,m,_,y,x,S,b,w,A,T=null,M=0;M<e.length;M++){var C=e[M],E=C.worldTransform!=null,D;if(r(C)){E&&(D=C.isSkinnedMesh&&C.isSkinnedMesh()?C.offsetMatrix?C.offsetMatrix.array:Sr.IDENTITY:C.worldTransform.array);var I=C.geometry,L=n.getMaterial.call(this,C),P=C.__program,B=L.shader,N=I.__uid__+"-"+P.__uid__,k=N!==b;b=N,k&&T&&T.bindVertexArrayOES(null),E&&(Mt.copy(Sr.WORLD,D),Mt.multiply(Sr.WORLDVIEWPROJECTION,Sr.VIEWPROJECTION,D),Mt.multiplyAffine(Sr.WORLDVIEW,Sr.VIEW,D),(B.matrixSemantics.WORLDINVERSE||B.matrixSemantics.WORLDINVERSETRANSPOSE)&&Mt.invert(Sr.WORLDINVERSE,D),(B.matrixSemantics.WORLDVIEWINVERSE||B.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&Mt.invert(Sr.WORLDVIEWINVERSE,Sr.WORLDVIEW),(B.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||B.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&Mt.invert(Sr.WORLDVIEWPROJECTIONINVERSE,Sr.WORLDVIEWPROJECTION)),C.beforeRender&&C.beforeRender(this),n.beforeRender.call(this,C,L,d);var U=P!==p;U?(P.bind(this),P.setUniformOfSemantic(h,"VIEWPORT",o),P.setUniformOfSemantic(h,"WINDOW_SIZE",l),t&&(P.setUniformOfSemantic(h,"NEAR",t.near),P.setUniformOfSemantic(h,"FAR",t.far)),P.setUniformOfSemantic(h,"DEVICEPIXELRATIO",a),P.setUniformOfSemantic(h,"TIME",c),P.setUniformOfSemantic(h,"VIEWPORT_SIZE",u),f&&f.setLightUniforms(P,C.lightGroup,this)):P=p,(U||n.isMaterialChanged(C,v,L,d))&&(L.depthTest!==g&&(L.depthTest?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),g=L.depthTest),L.depthMask!==m&&(h.depthMask(L.depthMask),m=L.depthMask),L.transparent!==S&&(L.transparent?h.enable(h.BLEND):h.disable(h.BLEND),S=L.transparent),L.transparent&&(L.blend?L.blend(h):(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA))),A=this._bindMaterial(C,L,P,v||null,d||null,p||null,n.getUniform),d=L);var Z=B.matrixSemanticKeys;if(E)for(var nt=0;nt<Z.length;nt++){var ct=Z[nt],K=B.matrixSemantics[ct],$=Sr[ct];if(K.isTranspose){var ot=Sr[K.semanticNoTranspose];Mt.transpose($,ot)}P.setUniform(h,K.type,K.symbol,$)}C.cullFace!==y&&(y=C.cullFace,h.cullFace(y)),C.frontFace!==x&&(x=C.frontFace,h.frontFace(x)),C.culling!==_&&(_=C.culling,_?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE)),this._updateSkeleton(C,P,A),k&&(w=this._bindVAO(T,B,I,P)),this._renderObject(C,w,P),n.afterRender(this,C),C.afterRender&&C.afterRender(this),p=P,v=C}}this.trigger("afterrenderpass",this,e,t,n)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(e,t,n){var r=this.gl,i=e.skeleton;if(i)if(i.update(),e.joints.length>this.getMaxJointNumber()){var a=i.getSubSkinMatricesTexture(e.__uid__,e.joints);t.useTextureSlot(this,a,n),t.setUniform(r,"1i","skinMatricesTexture",n),t.setUniform(r,"1f","skinMatricesTextureSize",a.width)}else{var o=i.getSubSkinMatrices(e.__uid__,e.joints);t.setUniformOfSemantic(r,"SKIN_MATRIX",o)}},_renderObject:function(e,t,n){var r=this.gl,i=e.geometry,a=e.mode;a==null&&(a=4);var o=null,s=e.isInstancedMesh&&e.isInstancedMesh();if(s&&(o=this.getGLExtension("ANGLE_instanced_arrays"),!o)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var l;if(s&&(l=this._bindInstancedAttributes(e,n,o)),t.indicesBuffer){var u=this.getGLExtension("OES_element_index_uint"),c=u&&i.indices instanceof Uint32Array,h=c?r.UNSIGNED_INT:r.UNSIGNED_SHORT;s?o.drawElementsInstancedANGLE(a,t.indicesBuffer.count,h,0,e.getInstanceCount()):r.drawElements(a,t.indicesBuffer.count,h,0)}else s?o.drawArraysInstancedANGLE(a,0,i.vertexCount,e.getInstanceCount()):r.drawArrays(a,0,i.vertexCount);if(s)for(var f=0;f<l.length;f++)r.disableVertexAttribArray(l[f])},_bindInstancedAttributes:function(e,t,n){for(var r=this.gl,i=e.getInstancedAttributesBuffers(this),a=[],o=0;o<i.length;o++){var s=i[o],l=t.getAttribLocation(r,s.symbol);if(!(l<0)){var u=C$[s.type]||r.FLOAT;r.enableVertexAttribArray(l),r.bindBuffer(r.ARRAY_BUFFER,s.buffer),r.vertexAttribPointer(l,s.size,u,!1,0,0),n.vertexAttribDivisorANGLE(l,s.divisor),a.push(l)}}return a},_bindMaterial:function(e,t,n,r,i,a,o){for(var s=this.gl,l=a===n,u=n.currentTextureSlot(),c=t.getEnabledUniforms(),h=t.getTextureUniforms(),f=this._placeholderTexture,d=0;d<h.length;d++){var p=h[d],v=o(e,t,p),g=t.uniforms[p].type;if(g==="t"&&v)v.__slot=-1;else if(g==="tv")for(var m=0;m<v.length;m++)v[m]&&(v[m].__slot=-1)}f.__slot=-1;for(var d=0;d<c.length;d++){var p=c[d],_=t.uniforms[p],v=o(e,t,p),g=_.type,y=g==="t";if(y&&(!v||!v.isRenderable())&&(v=f),i&&l){var x=o(r,i,p);if(y&&(!x||!x.isRenderable())&&(x=f),x===v){if(y)n.takeCurrentTextureSlot(this,null);else if(g==="tv"&&v)for(var m=0;m<v.length;m++)n.takeCurrentTextureSlot(this,null);continue}}if(v!=null)if(y)if(v.__slot<0){var S=n.currentTextureSlot(),b=n.setUniform(s,"1i",p,S);b&&(n.takeCurrentTextureSlot(this,v),v.__slot=S)}else n.setUniform(s,"1i",p,v.__slot);else if(Array.isArray(v)){if(v.length===0)continue;if(g==="tv"){if(!n.hasUniform(p))continue;for(var w=[],m=0;m<v.length;m++){var A=v[m];if(A.__slot<0){var S=n.currentTextureSlot();w.push(S),n.takeCurrentTextureSlot(this,A),A.__slot=S}else w.push(A.__slot)}n.setUniform(s,"1iv",p,w)}else n.setUniform(s,_.type,p,v)}else n.setUniform(s,_.type,p,v)}var T=n.currentTextureSlot();return n.resetTextureSlot(u),T},_bindVAO:function(e,t,n,r){var i=!n.dynamic,a=this.gl,o=this.__uid__+"-"+r.__uid__,s=n.__vaoCache[o];if(!s){var l=n.getBufferChunks(this);if(!l||!l.length)return;for(var u=l[0],c=u.attributeBuffers,x=u.indicesBuffer,y=[],h=[],f=0;f<c.length;f++){var d=c[f],p=d.name,v=d.semantic,g;if(v){var m=t.attributeSemantics[v];g=m&&m.symbol}else g=p;g&&r.attributes[g]&&(y.push(d),h.push(g))}s=new vLt(y,h,x),i&&(n.__vaoCache[o]=s)}var _=!0;e&&i&&(s.vao==null?s.vao=e.createVertexArrayOES():_=!1,e.bindVertexArrayOES(s.vao));var y=s.availableAttributes,x=s.indicesBuffer;if(_){for(var S=r.enableAttributes(this,s.availableAttributeSymbols,e&&i&&s),f=0;f<y.length;f++){var b=S[f];if(b!==-1){var d=y[f],w=d.buffer,A=d.size,T=C$[d.type]||a.FLOAT;a.bindBuffer(a.ARRAY_BUFFER,w),a.vertexAttribPointer(b,A,T,!1,0,0)}}n.isUseIndices()&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,x.buffer)}return s},renderPreZ:function(e,t,n){var r=this.gl,i=this._prezMaterial||new ks({shader:new kt(kt.source("clay.prez.vertex"),kt.source("clay.prez.fragment"))});this._prezMaterial=i,r.colorMask(!1,!1,!1,!1),r.depthMask(!0),this.renderPass(e,n,{ifRender:function(a){return!a.ignorePreZ},isMaterialChanged:function(a,o){var s=a.material,l=o.material;return s.get("diffuseMap")!==l.get("diffuseMap")||(s.get("alphaCutoff")||0)!==(l.get("alphaCutoff")||0)},getUniform:function(a,o,s){if(s==="alphaMap")return a.material.get("diffuseMap");if(s==="alphaCutoff"){if(a.material.isDefined("fragment","ALPHA_TEST")&&a.material.get("diffuseMap")){var l=a.material.get("alphaCutoff");return l||0}return 0}else return s==="uvRepeat"?a.material.get("uvRepeat"):s==="uvOffset"?a.material.get("uvOffset"):o.get(s)},getMaterial:function(){return i},sort:this.opaqueSortCompare}),r.colorMask(!0,!0,!0,!0),r.depthMask(!0)},disposeScene:function(e){this.disposeNode(e,!0,!0),e.dispose()},disposeNode:function(e,t,n){e.getParent()&&e.getParent().remove(e);var r={};e.traverse(function(i){var a=i.material;if(i.geometry&&t&&i.geometry.dispose(this),n&&a&&!r[a.__uid__]){for(var o=a.getTextureUniforms(),s=0;s<o.length;s++){var l=o[s],u=a.uniforms[l].value,c=a.uniforms[l].type;if(u){if(c==="t")u.dispose&&u.dispose(this);else if(c==="tv")for(var h=0;h<u.length;h++)u[h]&&u[h].dispose&&u[h].dispose(this)}}r[a.__uid__]=!0}i.dispose&&i.dispose(this)},this)},disposeGeometry:function(e){e.dispose(this)},disposeTexture:function(e){e.dispose(this)},disposeFrameBuffer:function(e){e.dispose(this)},dispose:function(){},screenToNDC:function(e,t,n){n||(n=new De),t=this._height-t;var r=this.viewport,i=n.array;return i[0]=(e-r.x)/r.width,i[0]=i[0]*2-1,i[1]=(t-r.y)/r.height,i[1]=i[1]*2-1,n}});Fs.opaqueSortCompare=Fs.prototype.opaqueSortCompare=function(e,t){return e.renderOrder===t.renderOrder?e.__program===t.__program?e.material===t.material?e.geometry.__uid__-t.geometry.__uid__:e.material.__uid__-t.material.__uid__:e.__program&&t.__program?e.__program.__uid__-t.__program.__uid__:0:e.renderOrder-t.renderOrder};Fs.transparentSortCompare=Fs.prototype.transparentSortCompare=function(e,t){return e.renderOrder===t.renderOrder?e.__depth===t.__depth?e.__program===t.__program?e.material===t.material?e.geometry.__uid__-t.geometry.__uid__:e.material.__uid__-t.material.__uid__:e.__program&&t.__program?e.__program.__uid__-t.__program.__uid__:0:e.__depth-t.__depth:e.renderOrder-t.renderOrder};var Sr={IDENTITY:wr(),WORLD:wr(),VIEW:wr(),PROJECTION:wr(),WORLDVIEW:wr(),VIEWPROJECTION:wr(),WORLDVIEWPROJECTION:wr(),WORLDINVERSE:wr(),VIEWINVERSE:wr(),PROJECTIONINVERSE:wr(),WORLDVIEWINVERSE:wr(),VIEWPROJECTIONINVERSE:wr(),WORLDVIEWPROJECTIONINVERSE:wr(),WORLDTRANSPOSE:wr(),VIEWTRANSPOSE:wr(),PROJECTIONTRANSPOSE:wr(),WORLDVIEWTRANSPOSE:wr(),VIEWPROJECTIONTRANSPOSE:wr(),WORLDVIEWPROJECTIONTRANSPOSE:wr(),WORLDINVERSETRANSPOSE:wr(),VIEWINVERSETRANSPOSE:wr(),PROJECTIONINVERSETRANSPOSE:wr(),WORLDVIEWINVERSETRANSPOSE:wr(),VIEWPROJECTIONINVERSETRANSPOSE:wr(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:wr()};Fs.COLOR_BUFFER_BIT=wt.COLOR_BUFFER_BIT;Fs.DEPTH_BUFFER_BIT=wt.DEPTH_BUFFER_BIT;Fs.STENCIL_BUFFER_BIT=wt.STENCIL_BUFFER_BIT;var gt=function(e,t,n){e=e||0,t=t||0,n=n||0,this.array=Q.fromValues(e,t,n),this._dirty=!0};gt.prototype={constructor:gt,add:function(e){return Q.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,t,n){return this.array[0]=e,this.array[1]=t,this.array[2]=n,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this._dirty=!0,this},clone:function(){return new gt(this.x,this.y,this.z)},copy:function(e){return Q.copy(this.array,e.array),this._dirty=!0,this},cross:function(e,t){return Q.cross(this.array,e.array,t.array),this._dirty=!0,this},dist:function(e){return Q.dist(this.array,e.array)},distance:function(e){return Q.distance(this.array,e.array)},div:function(e){return Q.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Q.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Q.dot(this.array,e.array)},len:function(){return Q.len(this.array)},length:function(){return Q.length(this.array)},lerp:function(e,t,n){return Q.lerp(this.array,e.array,t.array,n),this._dirty=!0,this},min:function(e){return Q.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Q.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Q.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Q.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Q.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Q.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Q.random(this.array,e),this._dirty=!0,this},scale:function(e){return Q.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,t){return Q.scaleAndAdd(this.array,this.array,e.array,t),this._dirty=!0,this},sqrDist:function(e){return Q.sqrDist(this.array,e.array)},squaredDistance:function(e){return Q.squaredDistance(this.array,e.array)},sqrLen:function(){return Q.sqrLen(this.array)},squaredLength:function(){return Q.squaredLength(this.array)},sub:function(e){return Q.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Q.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat3:function(e){return Q.transformMat3(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Q.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Q.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},applyProjection:function(e){var t=this.array;if(e=e.array,e[15]===0){var n=-1/t[2];t[0]=e[0]*t[0]*n,t[1]=e[5]*t[1]*n,t[2]=(e[10]*t[2]+e[14])*n}else t[0]=e[0]*t[0]+e[12],t[1]=e[5]*t[1]+e[13],t[2]=e[10]*t[2]+e[14];return this._dirty=!0,this},eulerFromQuat:function(e,t){gt.eulerFromQuat(this,e,t)},eulerFromMat3:function(e,t){gt.eulerFromMat3(this,e,t)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Mw=Object.defineProperty;if(Mw){var wL=gt.prototype;Mw(wL,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),Mw(wL,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),Mw(wL,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}})}gt.add=function(e,t,n){return Q.add(e.array,t.array,n.array),e._dirty=!0,e};gt.set=function(e,t,n,r){Q.set(e.array,t,n,r),e._dirty=!0};gt.copy=function(e,t){return Q.copy(e.array,t.array),e._dirty=!0,e};gt.cross=function(e,t,n){return Q.cross(e.array,t.array,n.array),e._dirty=!0,e};gt.dist=function(e,t){return Q.distance(e.array,t.array)};gt.distance=gt.dist;gt.div=function(e,t,n){return Q.divide(e.array,t.array,n.array),e._dirty=!0,e};gt.divide=gt.div;gt.dot=function(e,t){return Q.dot(e.array,t.array)};gt.len=function(e){return Q.length(e.array)};gt.lerp=function(e,t,n,r){return Q.lerp(e.array,t.array,n.array,r),e._dirty=!0,e};gt.min=function(e,t,n){return Q.min(e.array,t.array,n.array),e._dirty=!0,e};gt.max=function(e,t,n){return Q.max(e.array,t.array,n.array),e._dirty=!0,e};gt.mul=function(e,t,n){return Q.multiply(e.array,t.array,n.array),e._dirty=!0,e};gt.multiply=gt.mul;gt.negate=function(e,t){return Q.negate(e.array,t.array),e._dirty=!0,e};gt.normalize=function(e,t){return Q.normalize(e.array,t.array),e._dirty=!0,e};gt.random=function(e,t){return Q.random(e.array,t),e._dirty=!0,e};gt.scale=function(e,t,n){return Q.scale(e.array,t.array,n),e._dirty=!0,e};gt.scaleAndAdd=function(e,t,n,r){return Q.scaleAndAdd(e.array,t.array,n.array,r),e._dirty=!0,e};gt.sqrDist=function(e,t){return Q.sqrDist(e.array,t.array)};gt.squaredDistance=gt.sqrDist;gt.sqrLen=function(e){return Q.sqrLen(e.array)};gt.squaredLength=gt.sqrLen;gt.sub=function(e,t,n){return Q.subtract(e.array,t.array,n.array),e._dirty=!0,e};gt.subtract=gt.sub;gt.transformMat3=function(e,t,n){return Q.transformMat3(e.array,t.array,n.array),e._dirty=!0,e};gt.transformMat4=function(e,t,n){return Q.transformMat4(e.array,t.array,n.array),e._dirty=!0,e};gt.transformQuat=function(e,t,n){return Q.transformQuat(e.array,t.array,n.array),e._dirty=!0,e};function ws(e,t,n){return e<t?t:e>n?n:e}var tr=Math.atan2,Ts=Math.asin,xg=Math.abs;gt.eulerFromQuat=function(e,t,f){e._dirty=!0,t=t.array;var r=e.array,i=t[0],a=t[1],o=t[2],s=t[3],l=i*i,u=a*a,c=o*o,h=s*s,f=(f||"XYZ").toUpperCase();switch(f){case"XYZ":r[0]=tr(2*(i*s-a*o),h-l-u+c),r[1]=Ts(ws(2*(i*o+a*s),-1,1)),r[2]=tr(2*(o*s-i*a),h+l-u-c);break;case"YXZ":r[0]=Ts(ws(2*(i*s-a*o),-1,1)),r[1]=tr(2*(i*o+a*s),h-l-u+c),r[2]=tr(2*(i*a+o*s),h-l+u-c);break;case"ZXY":r[0]=Ts(ws(2*(i*s+a*o),-1,1)),r[1]=tr(2*(a*s-o*i),h-l-u+c),r[2]=tr(2*(o*s-i*a),h-l+u-c);break;case"ZYX":r[0]=tr(2*(i*s+o*a),h-l-u+c),r[1]=Ts(ws(2*(a*s-i*o),-1,1)),r[2]=tr(2*(i*a+o*s),h+l-u-c);break;case"YZX":r[0]=tr(2*(i*s-o*a),h-l+u-c),r[1]=tr(2*(a*s-i*o),h+l-u-c),r[2]=Ts(ws(2*(i*a+o*s),-1,1));break;case"XZY":r[0]=tr(2*(i*s+a*o),h-l+u-c),r[1]=tr(2*(i*o+a*s),h+l-u-c),r[2]=Ts(ws(2*(o*s-i*a),-1,1));break;default:console.warn("Unkown order: "+f)}return e};gt.eulerFromMat3=function(e,t,p){var r=t.array,i=r[0],a=r[3],o=r[6],s=r[1],l=r[4],u=r[7],c=r[2],h=r[5],f=r[8],d=e.array,p=(p||"XYZ").toUpperCase();switch(p){case"XYZ":d[1]=Ts(ws(o,-1,1)),xg(o)<.99999?(d[0]=tr(-u,f),d[2]=tr(-a,i)):(d[0]=tr(h,l),d[2]=0);break;case"YXZ":d[0]=Ts(-ws(u,-1,1)),xg(u)<.99999?(d[1]=tr(o,f),d[2]=tr(s,l)):(d[1]=tr(-c,i),d[2]=0);break;case"ZXY":d[0]=Ts(ws(h,-1,1)),xg(h)<.99999?(d[1]=tr(-c,f),d[2]=tr(-a,l)):(d[1]=0,d[2]=tr(s,i));break;case"ZYX":d[1]=Ts(-ws(c,-1,1)),xg(c)<.99999?(d[0]=tr(h,f),d[2]=tr(s,i)):(d[0]=0,d[2]=tr(-a,l));break;case"YZX":d[2]=Ts(ws(s,-1,1)),xg(s)<.99999?(d[0]=tr(-u,l),d[1]=tr(-c,i)):(d[0]=0,d[1]=tr(o,f));break;case"XZY":d[2]=Ts(-ws(a,-1,1)),xg(a)<.99999?(d[0]=tr(h,l),d[1]=tr(o,i)):(d[0]=tr(-u,f),d[1]=0);break;default:console.warn("Unkown order: "+p)}return e._dirty=!0,e};Object.defineProperties(gt,{POSITIVE_X:{get:function(){return new gt(1,0,0)}},NEGATIVE_X:{get:function(){return new gt(-1,0,0)}},POSITIVE_Y:{get:function(){return new gt(0,1,0)}},NEGATIVE_Y:{get:function(){return new gt(0,-1,0)}},POSITIVE_Z:{get:function(){return new gt(0,0,1)}},NEGATIVE_Z:{get:function(){return new gt(0,0,-1)}},UP:{get:function(){return new gt(0,1,0)}},ZERO:{get:function(){return new gt}}});var TL=1e-5,iv=function(e,t){this.origin=e||new gt,this.direction=t||new gt};iv.prototype={constructor:iv,intersectPlane:function(e,t){var n=e.normal.array,r=e.distance,i=this.origin.array,a=this.direction.array,o=Q.dot(n,a);if(o===0)return null;t||(t=new gt);var s=(Q.dot(n,i)-r)/o;return Q.scaleAndAdd(t.array,i,a,-s),t._dirty=!0,t},mirrorAgainstPlane:function(e){var t=Q.dot(e.normal.array,this.direction.array);Q.scaleAndAdd(this.direction.array,this.direction.array,e.normal.array,-t*2),this.direction._dirty=!0},distanceToPoint:function(){var e=Q.create();return function(t){Q.sub(e,t,this.origin.array);var n=Q.dot(e,this.direction.array);if(n<0)return Q.distance(this.origin.array,t);var r=Q.lenSquared(e);return Math.sqrt(r-n*n)}}(),intersectSphere:function(){var e=Q.create();return function(t,n,r){var i=this.origin.array,a=this.direction.array;t=t.array,Q.sub(e,t,i);var o=Q.dot(e,a),s=Q.squaredLength(e),l=s-o*o,u=n*n;if(!(l>u)){var c=Math.sqrt(u-l),h=o-c,f=o+c;return r||(r=new gt),h<0?f<0?null:(Q.scaleAndAdd(r.array,i,a,f),r):(Q.scaleAndAdd(r.array,i,a,h),r)}}}(),intersectBoundingBox:function(e,t){var n=this.direction.array,r=this.origin.array,i=e.min.array,a=e.max.array,o=1/n[0],s=1/n[1],l=1/n[2],u,c,h,f,d,p;if(o>=0?(u=(i[0]-r[0])*o,c=(a[0]-r[0])*o):(c=(i[0]-r[0])*o,u=(a[0]-r[0])*o),s>=0?(h=(i[1]-r[1])*s,f=(a[1]-r[1])*s):(f=(i[1]-r[1])*s,h=(a[1]-r[1])*s),u>f||h>c||((h>u||u!==u)&&(u=h),(f<c||c!==c)&&(c=f),l>=0?(d=(i[2]-r[2])*l,p=(a[2]-r[2])*l):(p=(i[2]-r[2])*l,d=(a[2]-r[2])*l),u>p||d>c)||((d>u||u!==u)&&(u=d),(p<c||c!==c)&&(c=p),c<0))return null;var v=u>=0?u:c;return t||(t=new gt),Q.scaleAndAdd(t.array,r,n,v),t},intersectTriangle:function(){var e=Q.create(),t=Q.create(),n=Q.create(),r=Q.create();return function(i,a,o,s,l,u){var c=this.direction.array,h=this.origin.array;i=i.array,a=a.array,o=o.array,Q.sub(e,a,i),Q.sub(t,o,i),Q.cross(r,t,c);var f=Q.dot(e,r);if(s){if(f>-TL)return null}else if(f>-TL&&f<TL)return null;Q.sub(n,h,i);var d=Q.dot(r,n)/f;if(d<0||d>1)return null;Q.cross(r,e,n);var p=Q.dot(c,r)/f;if(p<0||p>1||d+p>1)return null;Q.cross(r,e,t);var v=-Q.dot(n,r)/f;return v<0?null:(l||(l=new gt),u&&gt.set(u,1-d-p,d,p),Q.scaleAndAdd(l.array,h,c,v),l)}}(),applyTransform:function(e){gt.add(this.direction,this.direction,this.origin),gt.transformMat4(this.origin,this.origin,e),gt.transformMat4(this.direction,this.direction,e),gt.sub(this.direction,this.direction,this.origin),gt.normalize(this.direction,this.direction)},copy:function(e){gt.copy(this.origin,e.origin),gt.copy(this.direction,e.direction)},clone:function(){var e=new iv;return e.copy(this),e}};var Tt={};Tt.create=function(){var e=new ea(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e};Tt.clone=function(e){var t=new ea(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Tt.fromValues=function(e,t,n,r){var i=new ea(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i};Tt.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};Tt.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e};Tt.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e};Tt.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e};Tt.sub=Tt.subtract;Tt.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e};Tt.mul=Tt.multiply;Tt.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e};Tt.div=Tt.divide;Tt.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e};Tt.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e};Tt.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e};Tt.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e};Tt.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)};Tt.dist=Tt.distance;Tt.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a};Tt.sqrDist=Tt.squaredDistance;Tt.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)};Tt.len=Tt.length;Tt.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i};Tt.sqrLen=Tt.squaredLength;Tt.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e};Tt.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e};Tt.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o),e};Tt.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]};Tt.lerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e};Tt.random=function(e,t){return t=t||1,e[0]=ym(),e[1]=ym(),e[2]=ym(),e[3]=ym(),Tt.normalize(e,e),Tt.scale(e,e,t),e};Tt.transformMat4=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e};Tt.transformQuat=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*i,h=u*i+l*r-o*a,f=u*a+o*i-s*r,d=-o*r-s*i-l*a;return e[0]=c*u+d*-o+h*-l-f*-s,e[1]=h*u+d*-s+f*-o-c*-l,e[2]=f*u+d*-l+c*-s-h*-o,e};Tt.forEach=function(){var e=Tt.create();return function(t,n,r,i,a,o){var s,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();var ye={};ye.create=function(){var e=new ea(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};ye.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e};ye.clone=function(e){var t=new ea(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t};ye.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e};ye.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};ye.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e};ye.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*o-s*u,f=-c*a+s*l,d=u*a-o*l,p=n*h+r*f+i*d;return p?(p=1/p,e[0]=h*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*o)*p,e[3]=f*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*a)*p,e[6]=d*p,e[7]=(-u*n+r*l)*p,e[8]=(o*n-r*a)*p,e):null};ye.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*o,e[3]=s*l-a*c,e[4]=n*c-i*l,e[5]=i*a-n*s,e[6]=a*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*a,e};ye.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-o*l)+n*(-u*i+o*s)+r*(l*i-a*s)};ye.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=n[0],d=n[1],p=n[2],v=n[3],g=n[4],m=n[5],_=n[6],y=n[7],x=n[8];return e[0]=f*r+d*o+p*u,e[1]=f*i+d*s+p*c,e[2]=f*a+d*l+p*h,e[3]=v*r+g*o+m*u,e[4]=v*i+g*s+m*c,e[5]=v*a+g*l+m*h,e[6]=_*r+y*o+x*u,e[7]=_*i+y*s+x*c,e[8]=_*a+y*l+x*h,e};ye.mul=ye.multiply;ye.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=f*r+d*o+u,e[7]=f*i+d*s+c,e[8]=f*a+d*l+h,e};ye.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*r+f*o,e[1]=d*i+f*s,e[2]=d*a+f*l,e[3]=d*o-f*r,e[4]=d*s-f*i,e[5]=d*l-f*a,e[6]=u,e[7]=c,e[8]=h,e};ye.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e};ye.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e};ye.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,h=r*s,f=i*o,d=i*s,p=i*l,v=a*o,g=a*s,m=a*l;return e[0]=1-h-p,e[3]=c-m,e[6]=f+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=f-g,e[5]=d+v,e[8]=1-u-h,e};ye.normalFromMat4=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=n*s-r*o,y=n*l-i*o,x=n*u-a*o,S=r*l-i*s,b=r*u-a*s,w=i*u-a*l,A=c*v-h*p,T=c*g-f*p,M=c*m-d*p,C=h*g-f*v,E=h*m-d*v,D=f*m-d*g,I=_*D-y*E+x*C+S*M-b*T+w*A;return I?(I=1/I,e[0]=(s*D-l*E+u*C)*I,e[1]=(l*M-o*D-u*T)*I,e[2]=(o*E-s*M+u*A)*I,e[3]=(i*E-r*D-a*C)*I,e[4]=(n*D-i*M+a*T)*I,e[5]=(r*M-n*E-a*A)*I,e[6]=(v*w-g*b+m*S)*I,e[7]=(g*x-p*w-m*y)*I,e[8]=(p*b-v*x+m*_)*I,e):null};ye.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))};var Wt={};Wt.create=function(){var e=new ea(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e};Wt.rotationTo=function(){var e=Q.create(),t=Q.fromValues(1,0,0),n=Q.fromValues(0,1,0);return function(r,i,a){var o=Q.dot(i,a);return o<-.999999?(Q.cross(e,t,i),Q.length(e)<1e-6&&Q.cross(e,n,i),Q.normalize(e,e),Wt.setAxisAngle(r,e,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Q.cross(e,i,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+o,Wt.normalize(r,r))}}();Wt.setAxes=function(){var e=ye.create();return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],Wt.normalize(t,Wt.fromMat3(t,e))}}();Wt.clone=Tt.clone;Wt.fromValues=Tt.fromValues;Wt.copy=Tt.copy;Wt.set=Tt.set;Wt.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e};Wt.setAxisAngle=function(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e};Wt.add=Tt.add;Wt.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+o*s+i*u-a*l,e[1]=i*c+o*l+a*s-r*u,e[2]=a*c+o*u+r*l-i*s,e[3]=o*c-r*s-i*l-a*u,e};Wt.mul=Wt.multiply;Wt.scale=Tt.scale;Wt.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-r*s,e};Wt.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=i*l+o*s,e[2]=a*l+r*s,e[3]=o*l-i*s,e};Wt.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e};Wt.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e};Wt.dot=Tt.dot;Wt.lerp=Tt.lerp;Wt.slerp=function(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],l=n[0],u=n[1],c=n[2],h=n[3],f,d,p,v,g;return d=i*l+a*u+o*c+s*h,d<0&&(d=-d,l=-l,u=-u,c=-c,h=-h),1-d>1e-6?(f=Math.acos(d),p=Math.sin(f),v=Math.sin((1-r)*f)/p,g=Math.sin(r*f)/p):(v=1-r,g=r),e[0]=v*i+g*l,e[1]=v*a+g*u,e[2]=v*o+g*c,e[3]=v*s+g*h,e};Wt.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e};Wt.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e};Wt.length=Tt.length;Wt.len=Wt.length;Wt.squaredLength=Tt.squaredLength;Wt.sqrLen=Wt.squaredLength;Wt.normalize=Tt.normalize;Wt.fromMat3=function(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[i*3+i]-t[a*3+a]-t[o*3+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[a*3+o]-t[o*3+a])*r,e[a]=(t[a*3+i]+t[i*3+a])*r,e[o]=(t[o*3+i]+t[i*3+o])*r}return e};var Ht=function(){this._axisX=new gt,this._axisY=new gt,this._axisZ=new gt,this.array=Mt.create(),this._dirty=!0};Ht.prototype={constructor:Ht,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},adjoint:function(){return Mt.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new Ht().copy(this)},copy:function(e){return Mt.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return Mt.determinant(this.array)},fromQuat:function(e){return Mt.fromQuat(this.array,e.array),this._dirty=!0,this},fromRotationTranslation:function(e,t){return Mt.fromRotationTranslation(this.array,e.array,t.array),this._dirty=!0,this},fromMat2d:function(e){return Ht.fromMat2d(this,e),this},frustum:function(e,t,n,r,i,a){return Mt.frustum(this.array,e,t,n,r,i,a),this._dirty=!0,this},identity:function(){return Mt.identity(this.array),this._dirty=!0,this},invert:function(){return Mt.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(e,t,n){return Mt.lookAt(this.array,e.array,t.array,n.array),this._dirty=!0,this},mul:function(e){return Mt.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Mt.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Mt.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Mt.multiply(this.array,e.array,this.array),this._dirty=!0,this},ortho:function(e,t,n,r,i,a){return Mt.ortho(this.array,e,t,n,r,i,a),this._dirty=!0,this},perspective:function(e,t,n,r){return Mt.perspective(this.array,e,t,n,r),this._dirty=!0,this},rotate:function(e,t){return Mt.rotate(this.array,this.array,e,t.array),this._dirty=!0,this},rotateX:function(e){return Mt.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Mt.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Mt.rotateZ(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Mt.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return Mt.translate(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Mt.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var e=Q.create(),t=Q.create(),n=Q.create(),r=ye.create();return function(i,a,o){var s=this.array;Q.set(e,s[0],s[1],s[2]),Q.set(t,s[4],s[5],s[6]),Q.set(n,s[8],s[9],s[10]);var l=Q.length(e),u=Q.length(t),c=Q.length(n),h=this.determinant();h<0&&(l=-l),i&&i.set(l,u,c),o.set(s[12],s[13],s[14]),ye.fromMat4(r,s),r[0]/=l,r[1]/=l,r[2]/=l,r[3]/=u,r[4]/=u,r[5]/=u,r[6]/=c,r[7]/=c,r[8]/=c,Wt.fromMat3(a.array,r),Wt.normalize(a.array,a.array),a._dirty=!0,o._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Aw=Object.defineProperty;if(Aw){var ML=Ht.prototype;Aw(ML,"z",{get:function(){var e=this.array;return this._axisZ.set(e[8],e[9],e[10]),this._axisZ},set:function(e){var t=this.array;e=e.array,t[8]=e[0],t[9]=e[1],t[10]=e[2],this._dirty=!0}}),Aw(ML,"y",{get:function(){var e=this.array;return this._axisY.set(e[4],e[5],e[6]),this._axisY},set:function(e){var t=this.array;e=e.array,t[4]=e[0],t[5]=e[1],t[6]=e[2],this._dirty=!0}}),Aw(ML,"x",{get:function(){var e=this.array;return this._axisX.set(e[0],e[1],e[2]),this._axisX},set:function(e){var t=this.array;e=e.array,t[0]=e[0],t[1]=e[1],t[2]=e[2],this._dirty=!0}})}Ht.adjoint=function(e,t){return Mt.adjoint(e.array,t.array),e._dirty=!0,e};Ht.copy=function(e,t){return Mt.copy(e.array,t.array),e._dirty=!0,e};Ht.determinant=function(e){return Mt.determinant(e.array)};Ht.identity=function(e){return Mt.identity(e.array),e._dirty=!0,e};Ht.ortho=function(e,t,n,r,i,a,o){return Mt.ortho(e.array,t,n,r,i,a,o),e._dirty=!0,e};Ht.perspective=function(e,t,n,r,i){return Mt.perspective(e.array,t,n,r,i),e._dirty=!0,e};Ht.lookAt=function(e,t,n,r){return Mt.lookAt(e.array,t.array,n.array,r.array),e._dirty=!0,e};Ht.invert=function(e,t){return Mt.invert(e.array,t.array),e._dirty=!0,e};Ht.mul=function(e,t,n){return Mt.mul(e.array,t.array,n.array),e._dirty=!0,e};Ht.multiply=Ht.mul;Ht.fromQuat=function(e,t){return Mt.fromQuat(e.array,t.array),e._dirty=!0,e};Ht.fromRotationTranslation=function(e,t,n){return Mt.fromRotationTranslation(e.array,t.array,n.array),e._dirty=!0,e};Ht.fromMat2d=function(r,n){r._dirty=!0;var n=n.array,r=r.array;return r[0]=n[0],r[4]=n[2],r[12]=n[4],r[1]=n[1],r[5]=n[3],r[13]=n[5],r};Ht.rotate=function(e,t,n,r){return Mt.rotate(e.array,t.array,n,r.array),e._dirty=!0,e};Ht.rotateX=function(e,t,n){return Mt.rotateX(e.array,t.array,n),e._dirty=!0,e};Ht.rotateY=function(e,t,n){return Mt.rotateY(e.array,t.array,n),e._dirty=!0,e};Ht.rotateZ=function(e,t,n){return Mt.rotateZ(e.array,t.array,n),e._dirty=!0,e};Ht.scale=function(e,t,n){return Mt.scale(e.array,t.array,n.array),e._dirty=!0,e};Ht.transpose=function(e,t){return Mt.transpose(e.array,t.array),e._dirty=!0,e};Ht.translate=function(e,t,n){return Mt.translate(e.array,t.array,n.array),e._dirty=!0,e};var Wn=function(e,t,n,r){e=e||0,t=t||0,n=n||0,r=r===void 0?1:r,this.array=Wt.fromValues(e,t,n,r),this._dirty=!0};Wn.prototype={constructor:Wn,add:function(e){return Wt.add(this.array,this.array,e.array),this._dirty=!0,this},calculateW:function(){return Wt.calculateW(this.array,this.array),this._dirty=!0,this},set:function(e,t,n,r){return this.array[0]=e,this.array[1]=t,this.array[2]=n,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new Wn(this.x,this.y,this.z,this.w)},conjugate:function(){return Wt.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(e){return Wt.copy(this.array,e.array),this._dirty=!0,this},dot:function(e){return Wt.dot(this.array,e.array)},fromMat3:function(e){return Wt.fromMat3(this.array,e.array),this._dirty=!0,this},fromMat4:function(){var e=ye.create();return function(t){return ye.fromMat4(e,t.array),ye.transpose(e,e),Wt.fromMat3(this.array,e),this._dirty=!0,this}}(),identity:function(){return Wt.identity(this.array),this._dirty=!0,this},invert:function(){return Wt.invert(this.array,this.array),this._dirty=!0,this},len:function(){return Wt.len(this.array)},length:function(){return Wt.length(this.array)},lerp:function(e,t,n){return Wt.lerp(this.array,e.array,t.array,n),this._dirty=!0,this},mul:function(e){return Wt.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Wt.multiply(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Wt.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Wt.multiply(this.array,e.array,this.array),this._dirty=!0,this},normalize:function(){return Wt.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(e){return Wt.rotateX(this.array,this.array,e),this._dirty=!0,this},rotateY:function(e){return Wt.rotateY(this.array,this.array,e),this._dirty=!0,this},rotateZ:function(e){return Wt.rotateZ(this.array,this.array,e),this._dirty=!0,this},rotationTo:function(e,t){return Wt.rotationTo(this.array,e.array,t.array),this._dirty=!0,this},setAxes:function(e,t,n){return Wt.setAxes(this.array,e.array,t.array,n.array),this._dirty=!0,this},setAxisAngle:function(e,t){return Wt.setAxisAngle(this.array,e.array,t),this._dirty=!0,this},slerp:function(e,t,n){return Wt.slerp(this.array,e.array,t.array,n),this._dirty=!0,this},sqrLen:function(){return Wt.sqrLen(this.array)},squaredLength:function(){return Wt.squaredLength(this.array)},fromEuler:function(e,t){return Wn.fromEuler(this,e,t)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var T_=Object.defineProperty;if(T_){var Cw=Wn.prototype;T_(Cw,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),T_(Cw,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),T_(Cw,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),T_(Cw,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}Wn.add=function(e,t,n){return Wt.add(e.array,t.array,n.array),e._dirty=!0,e};Wn.set=function(e,t,n,r,i){Wt.set(e.array,t,n,r,i),e._dirty=!0};Wn.copy=function(e,t){return Wt.copy(e.array,t.array),e._dirty=!0,e};Wn.calculateW=function(e,t){return Wt.calculateW(e.array,t.array),e._dirty=!0,e};Wn.conjugate=function(e,t){return Wt.conjugate(e.array,t.array),e._dirty=!0,e};Wn.identity=function(e){return Wt.identity(e.array),e._dirty=!0,e};Wn.invert=function(e,t){return Wt.invert(e.array,t.array),e._dirty=!0,e};Wn.dot=function(e,t){return Wt.dot(e.array,t.array)};Wn.len=function(e){return Wt.length(e.array)};Wn.lerp=function(e,t,n,r){return Wt.lerp(e.array,t.array,n.array,r),e._dirty=!0,e};Wn.slerp=function(e,t,n,r){return Wt.slerp(e.array,t.array,n.array,r),e._dirty=!0,e};Wn.mul=function(e,t,n){return Wt.multiply(e.array,t.array,n.array),e._dirty=!0,e};Wn.multiply=Wn.mul;Wn.rotateX=function(e,t,n){return Wt.rotateX(e.array,t.array,n),e._dirty=!0,e};Wn.rotateY=function(e,t,n){return Wt.rotateY(e.array,t.array,n),e._dirty=!0,e};Wn.rotateZ=function(e,t,n){return Wt.rotateZ(e.array,t.array,n),e._dirty=!0,e};Wn.setAxisAngle=function(e,t,n){return Wt.setAxisAngle(e.array,t.array,n),e._dirty=!0,e};Wn.normalize=function(e,t){return Wt.normalize(e.array,t.array),e._dirty=!0,e};Wn.sqrLen=function(e){return Wt.sqrLen(e.array)};Wn.squaredLength=Wn.sqrLen;Wn.fromMat3=function(e,t){return Wt.fromMat3(e.array,t.array),e._dirty=!0,e};Wn.setAxes=function(e,t,n,r){return Wt.setAxes(e.array,t.array,n.array,r.array),e._dirty=!0,e};Wn.rotationTo=function(e,t,n){return Wt.rotationTo(e.array,t.array,n.array),e._dirty=!0,e};Wn.fromEuler=function(e,t,c){e._dirty=!0,t=t.array;var r=e.array,i=Math.cos(t[0]/2),a=Math.cos(t[1]/2),o=Math.cos(t[2]/2),s=Math.sin(t[0]/2),l=Math.sin(t[1]/2),u=Math.sin(t[2]/2),c=(c||"XYZ").toUpperCase();switch(c){case"XYZ":r[0]=s*a*o+i*l*u,r[1]=i*l*o-s*a*u,r[2]=i*a*u+s*l*o,r[3]=i*a*o-s*l*u;break;case"YXZ":r[0]=s*a*o+i*l*u,r[1]=i*l*o-s*a*u,r[2]=i*a*u-s*l*o,r[3]=i*a*o+s*l*u;break;case"ZXY":r[0]=s*a*o-i*l*u,r[1]=i*l*o+s*a*u,r[2]=i*a*u+s*l*o,r[3]=i*a*o-s*l*u;break;case"ZYX":r[0]=s*a*o-i*l*u,r[1]=i*l*o+s*a*u,r[2]=i*a*u-s*l*o,r[3]=i*a*o+s*l*u;break;case"YZX":r[0]=s*a*o+i*l*u,r[1]=i*l*o+s*a*u,r[2]=i*a*u-s*l*o,r[3]=i*a*o-s*l*u;break;case"XZY":r[0]=s*a*o-i*l*u,r[1]=i*l*o-s*a*u,r[2]=i*a*u+s*l*o,r[3]=i*a*o+s*l*u;break}};var Gh=Q.set,Ew=Q.copy,Ji=function(e,t){this.min=e||new gt(1/0,1/0,1/0),this.max=t||new gt(-1/0,-1/0,-1/0),this.vertices=null};Ji.prototype={constructor:Ji,updateFromVertices:function(e){if(e.length>0){var t=this.min,n=this.max,r=t.array,i=n.array;Ew(r,e[0]),Ew(i,e[0]);for(var a=1;a<e.length;a++){var o=e[a];o[0]<r[0]&&(r[0]=o[0]),o[1]<r[1]&&(r[1]=o[1]),o[2]<r[2]&&(r[2]=o[2]),o[0]>i[0]&&(i[0]=o[0]),o[1]>i[1]&&(i[1]=o[1]),o[2]>i[2]&&(i[2]=o[2])}t._dirty=!0,n._dirty=!0}},union:function(e){var t=this.min,n=this.max;return Q.min(t.array,t.array,e.min.array),Q.max(n.array,n.array,e.max.array),t._dirty=!0,n._dirty=!0,this},intersection:function(e){var t=this.min,n=this.max;return Q.max(t.array,t.array,e.min.array),Q.min(n.array,n.array,e.max.array),t._dirty=!0,n._dirty=!0,this},intersectBoundingBox:function(e){var t=this.min.array,n=this.max.array,r=e.min.array,i=e.max.array;return!(t[0]>i[0]||t[1]>i[1]||t[2]>i[2]||n[0]<r[0]||n[1]<r[1]||n[2]<r[2])},containBoundingBox:function(e){var t=this.min.array,n=this.max.array,r=e.min.array,i=e.max.array;return t[0]<=r[0]&&t[1]<=r[1]&&t[2]<=r[2]&&n[0]>=i[0]&&n[1]>=i[1]&&n[2]>=i[2]},containPoint:function(e){var t=this.min.array,n=this.max.array,r=e.array;return t[0]<=r[0]&&t[1]<=r[1]&&t[2]<=r[2]&&n[0]>=r[0]&&n[1]>=r[1]&&n[2]>=r[2]},isFinite:function(){var e=this.min.array,t=this.max.array;return isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])},applyTransform:function(e){this.transformFrom(this,e)},transformFrom:function(){var e=Q.create(),t=Q.create(),n=Q.create(),r=Q.create(),i=Q.create(),a=Q.create();return function(o,s){var l=o.min.array,u=o.max.array,c=s.array;return e[0]=c[0]*l[0],e[1]=c[1]*l[0],e[2]=c[2]*l[0],t[0]=c[0]*u[0],t[1]=c[1]*u[0],t[2]=c[2]*u[0],n[0]=c[4]*l[1],n[1]=c[5]*l[1],n[2]=c[6]*l[1],r[0]=c[4]*u[1],r[1]=c[5]*u[1],r[2]=c[6]*u[1],i[0]=c[8]*l[2],i[1]=c[9]*l[2],i[2]=c[10]*l[2],a[0]=c[8]*u[2],a[1]=c[9]*u[2],a[2]=c[10]*u[2],l=this.min.array,u=this.max.array,l[0]=Math.min(e[0],t[0])+Math.min(n[0],r[0])+Math.min(i[0],a[0])+c[12],l[1]=Math.min(e[1],t[1])+Math.min(n[1],r[1])+Math.min(i[1],a[1])+c[13],l[2]=Math.min(e[2],t[2])+Math.min(n[2],r[2])+Math.min(i[2],a[2])+c[14],u[0]=Math.max(e[0],t[0])+Math.max(n[0],r[0])+Math.max(i[0],a[0])+c[12],u[1]=Math.max(e[1],t[1])+Math.max(n[1],r[1])+Math.max(i[1],a[1])+c[13],u[2]=Math.max(e[2],t[2])+Math.max(n[2],r[2])+Math.max(i[2],a[2])+c[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(e){var t=this.min.array,n=this.max.array,r=e.array,i=t[0],a=t[1],o=t[2],s=n[0],l=n[1],u=t[2],c=n[0],h=n[1],f=n[2];if(r[15]===1)t[0]=r[0]*i+r[12],t[1]=r[5]*a+r[13],n[2]=r[10]*o+r[14],n[0]=r[0]*c+r[12],n[1]=r[5]*h+r[13],t[2]=r[10]*f+r[14];else{var d=-1/o;t[0]=r[0]*i*d,t[1]=r[5]*a*d,n[2]=(r[10]*o+r[14])*d,d=-1/u,n[0]=r[0]*s*d,n[1]=r[5]*l*d,d=-1/f,t[2]=(r[10]*f+r[14])*d}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var e=this.vertices;if(!e){e=[];for(var t=0;t<8;t++)e[t]=Q.fromValues(0,0,0);this.vertices=e}var n=this.min.array,r=this.max.array;return Gh(e[0],n[0],n[1],n[2]),Gh(e[1],n[0],r[1],n[2]),Gh(e[2],r[0],n[1],n[2]),Gh(e[3],r[0],r[1],n[2]),Gh(e[4],n[0],n[1],r[2]),Gh(e[5],n[0],r[1],r[2]),Gh(e[6],r[0],n[1],r[2]),Gh(e[7],r[0],r[1],r[2]),this},copy:function(e){var t=this.min,n=this.max;return Ew(t.array,e.min.array),Ew(n.array,e.max.array),t._dirty=!0,n._dirty=!0,this},clone:function(){var e=new Ji;return e.copy(this),e}};var mLt=0,Lu=ta.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+mLt++),this.position||(this.position=new gt),this.rotation||(this.rotation=new Wn),this.scale||(this.scale=new gt(1,1,1)),this.worldTransform=new Ht,this.localTransform=new Ht,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(e){var t=this._scene;if(t){var n=t._nodeRepository;delete n[this.name],n[e]=this}this.name=e},add:function(e){var t=e._parent;if(t!==this){t&&t.remove(e),e._parent=this,this._children.push(e);var n=this._scene;n&&n!==e.scene&&e.traverse(this._addSelfToScene,this),e._needsUpdateWorldTransform=!0}},remove:function(e){var t=this._children,n=t.indexOf(e);n<0||(t.splice(n,1),e._parent=null,this._scene&&e.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var e=this._children,t=0;t<e.length;t++)e[t]._parent=null,this._scene&&e[t].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(e){e._scene.removeFromScene(e),e._scene=null},_addSelfToScene:function(e){this._scene.addToScene(e),e._scene=this._scene},isAncestor:function(e){for(var t=e._parent;t;){if(t===this)return!0;t=t._parent}return!1},children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},getChildByName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},getDescendantByName:function(e){for(var t=this._children,n=0;n<t.length;n++){var r=t[n];if(r.name===e)return r;var i=r.getDescendantByName(e);if(i)return i}},queryNode:function(e){if(e){for(var t=e.split("/"),n=this,r=0;r<t.length;r++){var i=t[r];if(i){for(var a=!1,o=n._children,s=0;s<o.length;s++){var l=o[s];if(l.name===i){n=l,a=!0;break}}if(!a)return}}return n}},getPath:function(e){if(!this._parent)return"/";for(var t=this._parent,n=this.name;t._parent&&(n=t.name+"/"+n,t._parent!=e);)t=t._parent;return!t._parent&&e?null:n},traverse:function(e,t){e.call(t,this);for(var n=this._children,r=0,i=n.length;r<i;r++)n[r].traverse(e,t)},eachChild:function(e,t){for(var n=this._children,r=0,i=n.length;r<i;r++){var a=n[r];e.call(t,a,r)}},setLocalTransform:function(e){Mt.copy(this.localTransform.array,e.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(e){var t=e?null:this.scale;this.localTransform.decomposeMatrix(t,this.rotation,this.position)},setWorldTransform:function(e){Mt.copy(this.worldTransform.array,e.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var e=Mt.create();return function(t){var n=this.localTransform,r=this.worldTransform;this._parent?(Mt.invert(e,this._parent.worldTransform.array),Mt.multiply(n.array,e,r.array)):Mt.copy(n.array,r.array);var i=t?null:this.scale;n.decomposeMatrix(i,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var e=this.position,t=this.rotation,n=this.scale;if(this.transformNeedsUpdate()){var r=this.localTransform.array;Mt.fromRotationTranslation(r,t.array,e.array),Mt.scale(r,r,n.array),t._dirty=!1,n._dirty=!1,e._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var e=this.localTransform.array,t=this.worldTransform.array;this._parent?Mt.multiplyAffine(t,this._parent.worldTransform.array,e):Mt.copy(t,e)},updateWorldTransform:function(){for(var e=this;e&&e.getParent()&&e.getParent().transformNeedsUpdate();)e=e.getParent();e.update()},update:function(e){this.autoUpdateLocalTransform?this.updateLocalTransform():e=!0,(e||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),e=!0,this._needsUpdateWorldTransform=!1);for(var t=this._children,n=0,r=t.length;n<r;n++)t[n].update(e)},getBoundingBox:function(){function e(i){return!i.invisible&&i.geometry}var t=new Ji,n=new Ht,r=new Ht;return function(i,a){return a=a||new Ji,this._parent?Ht.invert(r,this._parent.worldTransform):Ht.identity(r),this.traverse(function(o){o.geometry&&o.geometry.boundingBox&&(t.copy(o.geometry.boundingBox),Ht.multiply(n,r,o.worldTransform),t.applyTransform(n),a.union(t))},this,e),a}}(),getWorldPosition:function(e){this.transformNeedsUpdate()&&this.updateWorldTransform();var t=this.worldTransform.array;if(e){var n=e.array;return n[0]=t[12],n[1]=t[13],n[2]=t[14],e}else return new gt(t[12],t[13],t[14])},clone:function(){var e=new this.constructor,t=this._children;e.setName(this.name),e.position.copy(this.position),e.rotation.copy(this.rotation),e.scale.copy(this.scale);for(var n=0;n<t.length;n++)e.add(t[n].clone());return e},rotateAround:function(){var e=new gt,t=new Ht;return function(n,r,i){e.copy(this.position).subtract(n);var a=this.localTransform;a.identity(),a.translate(n),a.rotate(i,r),t.fromRotationTranslation(this.rotation,e),a.multiply(t),a.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var e=new Ht;return function(t,n){e.lookAt(this.position,t,n||this.localTransform.y).invert(),this.setLocalTransform(e),this.target=t}}()}),Ya=Lu.extend({material:null,geometry:null,mode:wt.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:wt.BACK,frontFace:wt.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(e){},afterRender:function(e,t){},getBoundingBox:function(e,t){return t=Lu.prototype.getBoundingBox.call(this,e,t),this.geometry&&this.geometry.boundingBox&&t.union(this.geometry.boundingBox),t},clone:function(){var e=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var t=Lu.prototype.clone.call(this);t.geometry=this.geometry,t.material=this.material;for(var n=0;n<e.length;n++){var r=e[n];t[r]!==this[r]&&(t[r]=this[r])}return t}}()});Ya.POINTS=wt.POINTS;Ya.LINES=wt.LINES;Ya.LINE_LOOP=wt.LINE_LOOP;Ya.LINE_STRIP=wt.LINE_STRIP;Ya.TRIANGLES=wt.TRIANGLES;Ya.TRIANGLE_STRIP=wt.TRIANGLE_STRIP;Ya.TRIANGLE_FAN=wt.TRIANGLE_FAN;Ya.BACK=wt.BACK;Ya.FRONT=wt.FRONT;Ya.FRONT_AND_BACK=wt.FRONT_AND_BACK;Ya.CW=wt.CW;Ya.CCW=wt.CCW;var zF=ta.extend({scene:null,camera:null,renderer:null},function(){this._ray=new iv,this._ndc=new De},{pick:function(e,t,n){var r=this.pickAll(e,t,[],n);return r[0]||null},pickAll:function(e,t,n,r){return this.renderer.screenToNDC(e,t,this._ndc),this.camera.castRay(this._ndc,this._ray),n=n||[],this._intersectNode(this.scene,n,r||!1),n.sort(this._intersectionCompareFunc),n},_intersectNode:function(e,t,n){e instanceof Ya&&e.isRenderable()&&(!e.ignorePicking||n)&&(e.mode===wt.TRIANGLES&&e.geometry.isUseIndices()||e.geometry.pickByRay||e.geometry.pick)&&this._intersectRenderable(e,t);for(var r=0;r<e._children.length;r++)this._intersectNode(e._children[r],t,n)},_intersectRenderable:function(){var e=new gt,t=new gt,n=new gt,r=new iv,i=new Ht;return function(a,o){var s=a.isSkinnedMesh();r.copy(this._ray),Ht.invert(i,a.worldTransform),s||r.applyTransform(i);var l=a.geometry,u=s?a.skeleton.boundingBox:l.boundingBox;if(!(u&&!r.intersectBoundingBox(u))){if(l.pick){l.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,a,o);return}else if(l.pickByRay){l.pickByRay(r,a,o);return}var c=a.cullFace===wt.BACK&&a.frontFace===wt.CCW||a.cullFace===wt.FRONT&&a.frontFace===wt.CW,h,f=l.indices,d=l.attributes.position,p=l.attributes.weight,v=l.attributes.joint,g,m=[];if(!(!d||!d.value||!f)){if(s){g=a.skeleton.getSubSkinMatrices(a.__uid__,a.joints);for(var _=0;_<a.joints.length;_++){m[_]=m[_]||[];for(var y=0;y<16;y++)m[_][y]=g[_*16+y]}var x=[],S=[],b=[],w=[],A=[],T=l.attributes.skinnedPosition;(!T||!T.value)&&(l.createAttribute("skinnedPosition","f",3),T=l.attributes.skinnedPosition,T.init(l.vertexCount));for(var _=0;_<l.vertexCount;_++){d.get(_,x),p.get(_,S),v.get(_,b),S[3]=1-S[0]-S[1]-S[2],Q.set(w,0,0,0);for(var y=0;y<4;y++)b[y]>=0&&S[y]>1e-4&&(Q.transformMat4(A,x,m[b[y]]),Q.scaleAndAdd(w,w,A,S[y]));T.set(_,w)}}for(var _=0;_<f.length;_+=3){var M=f[_],C=f[_+1],E=f[_+2],D=s?l.attributes.skinnedPosition:d;if(D.get(M,e.array),D.get(C,t.array),D.get(E,n.array),c?h=r.intersectTriangle(e,t,n,a.culling):h=r.intersectTriangle(e,n,t,a.culling),h){var I=new gt;s?gt.copy(I,h):gt.transformMat4(I,h,a.worldTransform),o.push(new zF.Intersection(h,I,a,[M,C,E],_/3,gt.dist(I,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(e,t){return e.distance-t.distance}});zF.Intersection=function(e,t,n,r,i,a){this.point=e,this.pointWorld=t,this.target=n,this.triangle=r,this.triangleIndex=i,this.distance=a};var M_="__dt__",my=function(){this._contextId=0,this._caches=[],this._context={}};my.prototype={use:function(e,t){var n=this._caches;n[e]||(n[e]={},t&&(n[e]=t())),this._contextId=e,this._context=n[e]},put:function(e,t){this._context[e]=t},get:function(e){return this._context[e]},dirty:function(e){e=e||"";var t=M_+e;this.put(t,!0)},dirtyAll:function(e){e=e||"";for(var t=M_+e,n=this._caches,r=0;r<n.length;r++)n[r]&&(n[r][t]=!0)},fresh:function(e){e=e||"";var t=M_+e;this.put(t,!1)},freshAll:function(e){e=e||"";for(var t=M_+e,n=this._caches,r=0;r<n.length;r++)n[r]&&(n[r][t]=!1)},isDirty:function(e){e=e||"";var t=M_+e,n=this._context;return!n.hasOwnProperty(t)||n[t]===!0},deleteContext:function(e){delete this._caches[e],this._context={}},delete:function(e){delete this._context[e]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(e,t){var n=Object.keys(this._caches);n.forEach(function(r){e&&e.call(t,r)})},miss:function(e){return!this._context.hasOwnProperty(e)}};my.prototype.constructor=my;var Nt=ta.extend({width:512,height:512,type:wt.UNSIGNED_BYTE,format:wt.RGBA,wrapS:wt.REPEAT,wrapT:wt.REPEAT,minFilter:wt.LINEAR_MIPMAP_LINEAR,magFilter:wt.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new my},{getWebGLTexture:function(e){var t=e.gl,n=this._cache;return n.use(e.__uid__),n.miss("webgl_texture")&&n.put("webgl_texture",t.createTexture()),this.dynamic?this.update(e):n.isDirty()&&(this.update(e),n.fresh()),n.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(e){},updateCommon:function(e){var t=e.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===wt.DEPTH_COMPONENT&&(this.useMipmap=!1);var n=e.getGLExtension("EXT_sRGB");this.format===Nt.SRGB&&!n&&(this.format=Nt.RGB),this.format===Nt.SRGB_ALPHA&&!n&&(this.format=Nt.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?wt.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?wt.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var e=this.minFilter;return this.NPOT||!this.useMipmap?e===wt.NEAREST_MIPMAP_NEAREST||e===wt.NEAREST_MIPMAP_LINEAR?wt.NEAREST:e===wt.LINEAR_MIPMAP_LINEAR||e===wt.LINEAR_MIPMAP_NEAREST?wt.LINEAR:e:e},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(e){--e;for(var t=1;t<32;t<<=1)e=e|e>>t;return e+1},dispose:function(e){var t=this._cache;t.use(e.__uid__);var n=t.get("webgl_texture");n&&e.gl.deleteTexture(n),t.deleteContext(e.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Nt.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}});Object.defineProperty(Nt.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}});Nt.BYTE=wt.BYTE;Nt.UNSIGNED_BYTE=wt.UNSIGNED_BYTE;Nt.SHORT=wt.SHORT;Nt.UNSIGNED_SHORT=wt.UNSIGNED_SHORT;Nt.INT=wt.INT;Nt.UNSIGNED_INT=wt.UNSIGNED_INT;Nt.FLOAT=wt.FLOAT;Nt.HALF_FLOAT=36193;Nt.UNSIGNED_INT_24_8_WEBGL=34042;Nt.DEPTH_COMPONENT=wt.DEPTH_COMPONENT;Nt.DEPTH_STENCIL=wt.DEPTH_STENCIL;Nt.ALPHA=wt.ALPHA;Nt.RGB=wt.RGB;Nt.RGBA=wt.RGBA;Nt.LUMINANCE=wt.LUMINANCE;Nt.LUMINANCE_ALPHA=wt.LUMINANCE_ALPHA;Nt.SRGB=35904;Nt.SRGB_ALPHA=35906;Nt.COMPRESSED_RGB_S3TC_DXT1_EXT=33776;Nt.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777;Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778;Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779;Nt.NEAREST=wt.NEAREST;Nt.LINEAR=wt.LINEAR;Nt.NEAREST_MIPMAP_NEAREST=wt.NEAREST_MIPMAP_NEAREST;Nt.LINEAR_MIPMAP_NEAREST=wt.LINEAR_MIPMAP_NEAREST;Nt.NEAREST_MIPMAP_LINEAR=wt.NEAREST_MIPMAP_LINEAR;Nt.LINEAR_MIPMAP_LINEAR=wt.LINEAR_MIPMAP_LINEAR;Nt.REPEAT=wt.REPEAT;Nt.CLAMP_TO_EDGE=wt.CLAMP_TO_EDGE;Nt.MIRRORED_REPEAT=wt.MIRRORED_REPEAT;var Ii=Ya.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var e=Ya.prototype.clone.call(this);return e.skeleton=this.skeleton,this.joints&&(e.joints=this.joints.slice()),e}});Ii.POINTS=wt.POINTS;Ii.LINES=wt.LINES;Ii.LINE_LOOP=wt.LINE_LOOP;Ii.LINE_STRIP=wt.LINE_STRIP;Ii.TRIANGLES=wt.TRIANGLES;Ii.TRIANGLE_STRIP=wt.TRIANGLE_STRIP;Ii.TRIANGLE_FAN=wt.TRIANGLE_FAN;Ii.BACK=wt.BACK;Ii.FRONT=wt.FRONT;Ii.FRONT_AND_BACK=wt.FRONT_AND_BACK;Ii.CW=wt.CW;Ii.CCW=wt.CCW;var B1={};B1.isPowerOfTwo=function(e){return(e&e-1)===0};B1.nextPowerOfTwo=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e};B1.nearestPowerOfTwo=function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))};var E$=B1.isPowerOfTwo;function D$(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function yLt(e,t){var n=D$(e.width),r=D$(e.height);t=t||document.createElement("canvas"),t.width=n,t.height=r;var i=t.getContext("2d");return i.drawImage(e.image,0,0,n,r),t}var Ye=Nt.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(e){var t=e.gl;t.bindTexture(t.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(e);var n=this.format,r=this.type,i=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===Nt.REPEAT||this.wrapT===Nt.REPEAT)&&this.NPOT);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,i?this.wrapS:this.getAvailableWrapS()),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,i?this.wrapT:this.getAvailableWrapT()),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i?this.magFilter:this.getAvailableMagFilter()),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i?this.minFilter:this.getAvailableMinFilter());var a=e.getGLExtension("EXT_texture_filter_anisotropic");if(a&&this.anisotropic>1&&t.texParameterf(t.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),r===36193){var o=e.getGLExtension("OES_texture_half_float");o||(r=wt.FLOAT)}if(this.mipmaps.length)for(var s=this.width,l=this.height,u=0;u<this.mipmaps.length;u++){var c=this.mipmaps[u];this._updateTextureData(t,c,u,s,l,n,r,!1),s/=2,l/=2}else this._updateTextureData(t,this,0,this.width,this.height,n,r,i),this.useMipmap&&(!this.NPOT||i)&&t.generateMipmap(t.TEXTURE_2D);t.bindTexture(t.TEXTURE_2D,null)},_updateTextureData:function(e,t,n,r,i,a,o,s){if(t.image){var l=t.image;s&&(this._potCanvas=yLt(this,this._potCanvas),l=this._potCanvas),e.texImage2D(e.TEXTURE_2D,n,a,a,o,l)}else a<=Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT&&a>=Nt.COMPRESSED_RGB_S3TC_DXT1_EXT?e.compressedTexImage2D(e.TEXTURE_2D,n,a,r,i,0,t.pixels):e.texImage2D(e.TEXTURE_2D,n,a,r,i,0,a,o,t.pixels)},generateMipmap:function(e){var t=e.gl;this.useMipmap&&!this.NPOT&&(t.bindTexture(t.TEXTURE_2D,this._cache.get("webgl_texture")),t.generateMipmap(t.TEXTURE_2D))},isPowerOfTwo:function(){return E$(this.width)&&E$(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_2D,null)},load:function(e,t){var n=Nn.createImage();t&&(n.crossOrigin=t);var r=this;return n.onload=function(){r.dirty(),r.trigger("success",r)},n.onerror=function(){r.trigger("error",r)},n.src=e,this.image=n,this}});Object.defineProperty(Ye.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(e){this.image?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}});Object.defineProperty(Ye.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(e){this.image?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});function Snt(e){return{byte:Nn.Int8Array,ubyte:Nn.Uint8Array,short:Nn.Int16Array,ushort:Nn.Uint16Array}[e]||Nn.Float32Array}function AL(e){return"attr_"+e}function yy(e,t,n,r){switch(this.name=e,this.type=t,this.size=n,this.semantic=r||"",this.value=null,n){case 1:this.get=function(i){return this.value[i]},this.set=function(i,a){this.value[i]=a},this.copy=function(i,a){this.value[i]=this.value[i]};break;case 2:this.get=function(i,a){var o=this.value;return a[0]=o[i*2],a[1]=o[i*2+1],a},this.set=function(i,a){var o=this.value;o[i*2]=a[0],o[i*2+1]=a[1]},this.copy=function(i,a){var o=this.value;a*=2,i*=2,o[i]=o[a],o[i+1]=o[a+1]};break;case 3:this.get=function(i,a){var o=i*3,s=this.value;return a[0]=s[o],a[1]=s[o+1],a[2]=s[o+2],a},this.set=function(i,a){var o=i*3,s=this.value;s[o]=a[0],s[o+1]=a[1],s[o+2]=a[2]},this.copy=function(i,a){var o=this.value;a*=3,i*=3,o[i]=o[a],o[i+1]=o[a+1],o[i+2]=o[a+2]};break;case 4:this.get=function(i,a){var o=this.value,s=i*4;return a[0]=o[s],a[1]=o[s+1],a[2]=o[s+2],a[3]=o[s+3],a},this.set=function(i,a){var o=this.value,s=i*4;o[s]=a[0],o[s+1]=a[1],o[s+2]=a[2],o[s+3]=a[3]},this.copy=function(i,a){var o=this.value;a*=4,i*=4,o[i]=o[a],o[i+1]=o[a+1],o[i+2]=o[a+2],o[i+3]=o[a+3]}}}yy.prototype.init=function(e){if(!this.value||this.value.length!==e*this.size){var t=Snt(this.type);this.value=new t(e*this.size)}};yy.prototype.fromArray=function(e){var t=Snt(this.type),n;if(e[0]&&e[0].length){var r=0,i=this.size;n=new t(e.length*i);for(var a=0;a<e.length;a++)for(var o=0;o<i;o++)n[r++]=e[a][o]}else n=new t(e);this.value=n};yy.prototype.clone=function(e){var t=new yy(this.name,this.type,this.size,this.semantic);return e&&console.warn("todo"),t};function wnt(e,t,n,r,i){this.name=e,this.type=t,this.buffer=n,this.size=r,this.semantic=i,this.symbol="",this.needsRemove=!1}function Tnt(e){this.buffer=e,this.count=0}var qa=ta.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new my,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var e=this.getEnabledAttributes(),t=0;t<e.length;t++)this.dirtyAttribute(e[t]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(e){this._cache.dirtyAll(AL(e)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(e,t){if(e<this.triangleCount&&e>=0){t||(t=[]);var n=this.indices;return t[0]=n[e*3],t[1]=n[e*3+1],t[2]=n[e*3+2],t}},setTriangleIndices:function(e,t){var n=this.indices;n[e*3]=t[0],n[e*3+1]=t[1],n[e*3+2]=t[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(e){var t,n=this.vertexCount>65535?Nn.Uint32Array:Nn.Uint16Array;if(e[0]&&e[0].length){var r=0,i=3;t=new n(e.length*i);for(var a=0;a<e.length;a++)for(var o=0;o<i;o++)t[r++]=e[a][o]}else t=new n(e);this.indices=t},createAttribute:function(e,t,n,r){var i=new yy(e,t,n,r);return this.attributes[e]&&this.removeAttribute(e),this.attributes[e]=i,this._attributeList.push(e),i},removeAttribute:function(e){var t=this._attributeList,n=t.indexOf(e);return n>=0?(t.splice(n,1),delete this.attributes[e],!0):!1},getAttribute:function(e){return this.attributes[e]},getEnabledAttributes:function(){var e=this._enabledAttributes,t=this._attributeList;if(e)return e;for(var n=[],r=this.vertexCount,i=0;i<t.length;i++){var a=t[i],o=this.attributes[a];o.value&&o.value.length===r*o.size&&n.push(a)}return this._enabledAttributes=n,n},getBufferChunks:function(e){var t=this._cache;t.use(e.__uid__);var n=t.isDirty("attributes"),r=t.isDirty("indices");if(n||r){this._updateBuffer(e.gl,n,r);for(var i=this.getEnabledAttributes(),a=0;a<i.length;a++)t.fresh(AL(i[a]));t.fresh("attributes"),t.fresh("indices")}return t.fresh("any"),t.get("chunks")},_updateBuffer:function(e,t,n){var r=this._cache,i=r.get("chunks"),a=!1;i||(i=[],i[0]={attributeBuffers:[],indicesBuffer:null},r.put("chunks",i),a=!0);var o=i[0],s=o.attributeBuffers,l=o.indicesBuffer;if(t||a){var u=this.getEnabledAttributes(),c={};if(!a)for(var h=0;h<s.length;h++)c[s[h].name]=s[h];for(var f=0;f<u.length;f++){var d=u[f],p=this.attributes[d],v;a||(v=c[d]);var g;v?g=v.buffer:g=e.createBuffer(),r.isDirty(AL(d))&&(e.bindBuffer(e.ARRAY_BUFFER,g),e.bufferData(e.ARRAY_BUFFER,p.value,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW)),s[f]=new wnt(d,p.type,g,p.size,p.semantic)}for(var h=f;h<s.length;h++)e.deleteBuffer(s[h].buffer);s.length=f}this.isUseIndices()&&(n||a)&&(l||(l=new Tnt(e.createBuffer()),o.indicesBuffer=l),l.count=this.indices.length,e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW))},dispose:function(e){var t=this._cache;t.use(e.__uid__);var n=t.get("chunks");if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=0;a<i.attributeBuffers.length;a++){var o=i.attributeBuffers[a];e.gl.deleteBuffer(o.buffer)}i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var s=e.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var u=this.__vaoCache[l].vao;u&&s.deleteVertexArrayOES(u)}}this.__vaoCache={},t.deleteContext(e.__uid__)}});Object.defineProperty&&(Object.defineProperty(qa.prototype,"vertexCount",{enumerable:!1,get:function(){var e=this.attributes[this.mainAttribute];return e||(e=this.attributes[this._attributeList[0]]),!e||!e.value?0:e.value.length/e.size}}),Object.defineProperty(qa.prototype,"triangleCount",{enumerable:!1,get:function(){var e=this.indices;return e?e.length/3:0}}));qa.STATIC_DRAW=wt.STATIC_DRAW;qa.DYNAMIC_DRAW=wt.DYNAMIC_DRAW;qa.STREAM_DRAW=wt.STREAM_DRAW;qa.AttributeBuffer=wnt;qa.IndicesBuffer=Tnt;qa.Attribute=yy;var Ia=Q.create,bg=Q.add,Kd=Q.set,eu=qa.Attribute,cn=qa.extend(function(){return{attributes:{position:new eu("position","float",3,"POSITION"),texcoord0:new eu("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new eu("texcoord1","float",2,"TEXCOORD_1"),normal:new eu("normal","float",3,"NORMAL"),tangent:new eu("tangent","float",4,"TANGENT"),color:new eu("color","float",4,"COLOR"),weight:new eu("weight","float",3,"WEIGHT"),joint:new eu("joint","float",4,"JOINT"),barycentric:new eu("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var e=this.boundingBox;e||(e=this.boundingBox=new Ji);var t=this.attributes.position.value;if(t&&t.length){var n=e.min,r=e.max,i=n.array,a=r.array;Q.set(i,t[0],t[1],t[2]),Q.set(a,t[0],t[1],t[2]);for(var o=3;o<t.length;){var s=t[o++],l=t[o++],u=t[o++];s<i[0]&&(i[0]=s),l<i[1]&&(i[1]=l),u<i[2]&&(i[2]=u),s>a[0]&&(a[0]=s),l>a[1]&&(a[1]=l),u>a[2]&&(a[2]=u)}n._dirty=!0,r._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var e=this.indices,t=this.attributes,n=t.position.value,r=t.normal.value;if(!r||r.length!==n.length)r=t.normal.value=new Nn.Float32Array(n.length);else for(var i=0;i<r.length;i++)r[i]=0;for(var a=Ia(),o=Ia(),s=Ia(),l=Ia(),u=Ia(),c=Ia(),h=e?e.length:this.vertexCount,f,d,p,v=0;v<h;){e?(f=e[v++],d=e[v++],p=e[v++]):(f=v++,d=v++,p=v++),Kd(a,n[f*3],n[f*3+1],n[f*3+2]),Kd(o,n[d*3],n[d*3+1],n[d*3+2]),Kd(s,n[p*3],n[p*3+1],n[p*3+2]),Q.sub(l,a,o),Q.sub(u,o,s),Q.cross(c,l,u);for(var i=0;i<3;i++)r[f*3+i]=r[f*3+i]+c[i],r[d*3+i]=r[d*3+i]+c[i],r[p*3+i]=r[p*3+i]+c[i]}for(var i=0;i<r.length;)Kd(c,r[i],r[i+1],r[i+2]),Q.normalize(c,c),r[i++]=c[0],r[i++]=c[1],r[i++]=c[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.indices,t=this.attributes,n=t.position.value,r=t.normal.value,i=Ia(),a=Ia(),o=Ia(),s=Ia(),l=Ia(),u=Ia();r||(r=t.normal.value=new Float32Array(n.length));for(var c=e?e.length:this.vertexCount,h,f,d,p=0;p<c;){e?(h=e[p++],f=e[p++],d=e[p++]):(h=p++,f=p++,d=p++),Kd(i,n[h*3],n[h*3+1],n[h*3+2]),Kd(a,n[f*3],n[f*3+1],n[f*3+2]),Kd(o,n[d*3],n[d*3+1],n[d*3+2]),Q.sub(s,i,a),Q.sub(l,a,o),Q.cross(u,s,l),Q.normalize(u,u);for(var v=0;v<3;v++)r[h*3+v]=u[v],r[f*3+v]=u[v],r[d*3+v]=u[v]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var e=this.vertexCount,t=this.attributes;t.tangent.value||(t.tangent.value=new Float32Array(e*4));var n=t.texcoord0.value,r=t.position.value,i=t.tangent.value,a=t.normal.value;if(!n){console.warn("Geometry without texcoords can't generate tangents.");return}for(var o=[],s=[],l=0;l<e;l++)o[l]=[0,0,0],s[l]=[0,0,0];for(var u=[0,0,0],c=[0,0,0],h=this.indices,f=h?h.length:this.vertexCount,d,p,v,l=0;l<f;){h?(d=h[l++],p=h[l++],v=h[l++]):(d=l++,p=l++,v=l++);var g=n[d*2],m=n[p*2],_=n[v*2],y=n[d*2+1],x=n[p*2+1],S=n[v*2+1],b=r[d*3],w=r[p*3],A=r[v*3],T=r[d*3+1],M=r[p*3+1],C=r[v*3+1],E=r[d*3+2],D=r[p*3+2],I=r[v*3+2],L=w-b,P=A-b,B=M-T,N=C-T,k=D-E,U=I-E,Z=m-g,nt=_-g,ct=x-y,K=S-y,$=1/(Z*K-ct*nt);u[0]=(K*L-ct*P)*$,u[1]=(K*B-ct*N)*$,u[2]=(K*k-ct*U)*$,c[0]=(Z*P-nt*L)*$,c[1]=(Z*N-nt*B)*$,c[2]=(Z*U-nt*k)*$,bg(o[d],o[d],u),bg(o[p],o[p],u),bg(o[v],o[v],u),bg(s[d],s[d],c),bg(s[p],s[p],c),bg(s[v],s[v],c)}for(var ot=Ia(),tt=Ia(),et=Ia(),l=0;l<e;l++){et[0]=a[l*3],et[1]=a[l*3+1],et[2]=a[l*3+2];var xt=o[l];Q.scale(ot,et,Q.dot(et,xt)),Q.sub(ot,xt,ot),Q.normalize(ot,ot),Q.cross(tt,et,xt),i[l*4]=ot[0],i[l*4+1]=ot[1],i[l*4+2]=ot[2],i[l*4+3]=Q.dot(tt,s[l])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new Nn.Uint32Array(this.indices));for(var e=this.attributes,t=this.indices,n=this.getEnabledAttributes(),r={},i=0;i<n.length;i++){var a=n[i];r[a]=e[a].value,e[a].init(this.indices.length)}for(var o=0,s=0;s<t.length;s++){for(var l=t[s],i=0;i<n.length;i++)for(var a=n[i],u=e[a].value,c=e[a].size,h=0;h<c;h++)u[o*c+h]=r[a][l*c+h];t[s]=o,o++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var e=this.attributes,t=e.barycentric.value,n=this.indices;if(!(t&&t.length===n.length*3)){t=e.barycentric.value=new Float32Array(n.length*3);for(var r=0;r<(n?n.length:this.vertexCount/3);)for(var i=0;i<3;i++){var a=n?n[r++]:r*3+i;t[a*3+i]=1}this.dirty()}}},applyTransform:function(e){var t=this.attributes,n=t.position.value,r=t.normal.value,i=t.tangent.value;e=e.array;var a=Mt.create();Mt.invert(a,e),Mt.transpose(a,a);var o=Q.transformMat4,s=Q.forEach;s(n,3,0,null,o,e),r&&s(r,3,0,null,o,a),i&&s(i,4,0,null,o,a),this.boundingBox&&this.updateBoundingBox()},dispose:function(e){var t=this._cache;t.use(e.__uid__);var n=t.get("chunks");if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=0;a<i.attributeBuffers.length;a++){var o=i.attributeBuffers[a];e.gl.deleteBuffer(o.buffer)}i.indicesBuffer&&e.gl.deleteBuffer(i.indicesBuffer.buffer)}if(this.__vaoCache){var s=e.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var u=this.__vaoCache[l].vao;u&&s.deleteVertexArrayOES(u)}}this.__vaoCache={},t.deleteContext(e.__uid__)}});cn.STATIC_DRAW=qa.STATIC_DRAW;cn.DYNAMIC_DRAW=qa.DYNAMIC_DRAW;cn.STREAM_DRAW=qa.STREAM_DRAW;cn.AttributeBuffer=qa.AttributeBuffer;cn.IndicesBuffer=qa.IndicesBuffer;cn.Attribute=eu;const _Lt=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`;var nl="uniform vec3 ",A_="uniform float ",Sg="@export clay.header.",wg="@end",ji=":unconfigurable;";const xLt=[Sg+"directional_light",nl+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+ji,nl+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+ji,wg,Sg+"ambient_light",nl+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+ji,wg,Sg+"ambient_sh_light",nl+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+ji,nl+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+ji,_Lt,wg,Sg+"ambient_cubemap_light",nl+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+ji,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+ji,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+ji,wg,Sg+"point_light",nl+"pointLightPosition[POINT_LIGHT_COUNT]"+ji,A_+"pointLightRange[POINT_LIGHT_COUNT]"+ji,nl+"pointLightColor[POINT_LIGHT_COUNT]"+ji,wg,Sg+"spot_light",nl+"spotLightPosition[SPOT_LIGHT_COUNT]"+ji,nl+"spotLightDirection[SPOT_LIGHT_COUNT]"+ji,A_+"spotLightRange[SPOT_LIGHT_COUNT]"+ji,A_+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+ji,A_+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+ji,A_+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+ji,nl+"spotLightColor[SPOT_LIGHT_COUNT]"+ji,wg].join(`
`);kt.import(xLt);var Nl=Lu.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var e=Lu.prototype.clone.call(this);return e.color=Array.prototype.slice.call(this.color),e.intensity=this.intensity,e.castShadow=this.castShadow,e.shadowResolution=this.shadowResolution,e}}),Gx=function(e,t){this.normal=e||new gt(0,1,0),this.distance=t||0};Gx.prototype={constructor:Gx,distanceToPoint:function(e){return Q.dot(e.array,this.normal.array)-this.distance},projectPoint:function(e,t){t||(t=new gt);var n=this.distanceToPoint(e);return Q.scaleAndAdd(t.array,e.array,this.normal.array,-n),t._dirty=!0,t},normalize:function(){var e=1/Q.len(this.normal.array);Q.scale(this.normal.array,e),this.distance*=e},intersectFrustum:function(e){for(var t=e.vertices,n=this.normal.array,r=Q.dot(t[0].array,n)>this.distance,i=1;i<8;i++)if(Q.dot(t[i].array,n)>this.distance!=r)return!0},intersectLine:function(){var e=Q.create();return function(t,n,r){var i=this.distanceToPoint(t),a=this.distanceToPoint(n);if(i>0&&a>0||i<0&&a<0)return null;var o=this.normal.array,s=this.distance,l=t.array;Q.sub(e,n.array,t.array),Q.normalize(e,e);var u=Q.dot(o,e);if(u===0)return null;r||(r=new gt);var c=(Q.dot(o,l)-s)/u;return Q.scaleAndAdd(r.array,l,e,-c),r._dirty=!0,r}}(),applyTransform:function(){var e=Mt.create(),t=Tt.create(),n=Tt.create();return n[3]=1,function(r){r=r.array,Q.scale(n,this.normal.array,this.distance),Tt.transformMat4(n,n,r),this.distance=Q.dot(n,this.normal.array),Mt.invert(e,r),Mt.transpose(e,e),t[3]=0,Q.copy(t,this.normal.array),Tt.transformMat4(t,t,e),Q.copy(this.normal.array,t)}}(),copy:function(e){Q.copy(this.normal.array,e.normal.array),this.normal._dirty=!0,this.distance=e.distance},clone:function(){var e=new Gx;return e.copy(this),e}};var Xr=Q.set,I$=Q.copy,L$=Q.transformMat4,CL=Math.min,EL=Math.max,BE=function(){this.planes=[];for(var e=0;e<6;e++)this.planes.push(new Gx);this.boundingBox=new Ji,this.vertices=[];for(var e=0;e<8;e++)this.vertices[e]=Q.fromValues(0,0,0)};BE.prototype={setFromProjection:function(e){var t=this.planes,n=e.array,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],g=n[13],m=n[14],_=n[15];Xr(t[0].normal.array,o-r,c-s,p-h),t[0].distance=-(_-v),t[0].normalize(),Xr(t[1].normal.array,o+r,c+s,p+h),t[1].distance=-(_+v),t[1].normalize(),Xr(t[2].normal.array,o+i,c+l,p+f),t[2].distance=-(_+g),t[2].normalize(),Xr(t[3].normal.array,o-i,c-l,p-f),t[3].distance=-(_-g),t[3].normalize(),Xr(t[4].normal.array,o-a,c-u,p-d),t[4].distance=-(_-m),t[4].normalize(),Xr(t[5].normal.array,o+a,c+u,p+d),t[5].distance=-(_+m),t[5].normalize();var y=this.boundingBox,x=this.vertices;if(_===0){var S=l/r,b=-m/(d-1),w=-m/(d+1),A=-w/l,T=-b/l;y.min.set(-A*S,-A,w),y.max.set(A*S,A,b),Xr(x[0],-A*S,-A,w),Xr(x[1],-A*S,A,w),Xr(x[2],A*S,-A,w),Xr(x[3],A*S,A,w),Xr(x[4],-T*S,-T,b),Xr(x[5],-T*S,T,b),Xr(x[6],T*S,-T,b),Xr(x[7],T*S,T,b)}else{var M=(-1-v)/r,C=(1-v)/r,E=(1-g)/l,D=(-1-g)/l,I=(-1-m)/d,L=(1-m)/d;y.min.set(Math.min(M,C),Math.min(D,E),Math.min(L,I)),y.max.set(Math.max(C,M),Math.max(E,D),Math.max(I,L));var P=y.min.array,B=y.max.array;Xr(x[0],P[0],P[1],P[2]),Xr(x[1],P[0],B[1],P[2]),Xr(x[2],B[0],P[1],P[2]),Xr(x[3],B[0],B[1],P[2]),Xr(x[4],P[0],P[1],B[2]),Xr(x[5],P[0],B[1],B[2]),Xr(x[6],B[0],P[1],B[2]),Xr(x[7],B[0],B[1],B[2])}},getTransformedBoundingBox:function(){var e=Q.create();return function(t,n){var r=this.vertices,i=n.array,a=t.min,o=t.max,s=a.array,l=o.array,u=r[0];L$(e,u,i),I$(s,e),I$(l,e);for(var c=1;c<8;c++)u=r[c],L$(e,u,i),s[0]=CL(e[0],s[0]),s[1]=CL(e[1],s[1]),s[2]=CL(e[2],s[2]),l[0]=EL(e[0],l[0]),l[1]=EL(e[1],l[1]),l[2]=EL(e[2],l[2]);return a._dirty=!0,o._dirty=!0,t}}()};var _y=Lu.extend(function(){return{projectionMatrix:new Ht,invProjectionMatrix:new Ht,viewMatrix:new Ht,frustum:new BE}},function(){this.update(!0)},{update:function(e){Lu.prototype.update.call(this,e),Ht.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Ht.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(e){Ht.copy(this.viewMatrix,e),Ht.invert(this.worldTransform,e),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(e){Ht.copy(this.projectionMatrix,e),Ht.invert(this.invProjectionMatrix,e),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var e=Tt.create();return function(t,n){var r=n!==void 0?n:new iv,i=t.array[0],a=t.array[1];return Tt.set(e,i,a,-1,1),Tt.transformMat4(e,e,this.invProjectionMatrix.array),Tt.transformMat4(e,e,this.worldTransform.array),Q.scale(r.origin.array,e,1/e[3]),Tt.set(e,i,a,1,1),Tt.transformMat4(e,e,this.invProjectionMatrix.array),Tt.transformMat4(e,e,this.worldTransform.array),Q.scale(e,e,1/e[3]),Q.sub(r.direction.array,e,r.origin.array),Q.normalize(r.direction.array,r.direction.array),r.direction._dirty=!0,r.origin._dirty=!0,r}}()}),bLt=Mt.create(),P$=Mt.create(),DL={};function SLt(e){var t=[],n=Object.keys(e);n.sort();for(var r=0;r<n.length;r++){var i=n[r];t.push(i+" "+e[i])}var a=t.join(`
`);if(DL[a])return DL[a];var o=Kr.genGUID();return DL[a]=o,o}function kE(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}kE.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0};kE.prototype.add=function(e,t){t?this.transparent[this._transparentCount++]=e:this.opaque[this._opaqueCount++]=e};kE.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var ud=Lu.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Ji,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new Xv(20)}},function(){this._scene=this},{addToScene:function(e){e instanceof _y?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(e)):e instanceof Nl&&this.lights.push(e),e.name&&(this._nodeRepository[e.name]=e)},removeFromScene:function(e){var t;e instanceof _y?(t=this._cameraList.indexOf(e),t>=0&&this._cameraList.splice(t,1)):e instanceof Nl&&(t=this.lights.indexOf(e),t>=0&&this.lights.splice(t,1)),e.name&&delete this._nodeRepository[e.name]},getNode:function(e){return this._nodeRepository[e]},setMainCamera:function(e){var t=this._cameraList.indexOf(e);t>=0&&this._cameraList.splice(t,1),this._cameraList.unshift(e)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var e=this.lights;this._previousLightNumber=this._lightNumber;for(var t={},n=0;n<e.length;n++){var r=e[n];if(!r.invisible){var i=r.group;t[i]||(t[i]={}),t[i][r.type]=t[i][r.type]||0,t[i][r.type]++}}this._lightNumber=t;for(var a in t)this._lightProgramKeys[a]=SLt(t[a]);this._updateLightUniforms()},cloneNode:function(e){var t=e.clone(),n={};function r(i,a){n[i.__uid__]=a;for(var o=0;o<i._children.length;o++){var s=i._children[o],l=a._children[o];r(s,l)}}return r(e,t),t.traverse(function(i){i.skeleton&&(i.skeleton=i.skeleton.clone(n)),i.material&&(i.material=i.material.clone())}),t},updateRenderList:function(e,t){var n=e.__uid__,r=this._renderLists.get(n);r||(r=new kE,this._renderLists.put(n,r)),r.startCount(),t&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var i=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,e,i,r,t),r.endCount(),r},getRenderList:function(e){return this._renderLists.get(e.__uid__)},_doUpdateRenderList:function(e,t,n,r,i){if(!e.invisible)for(var a=0;a<e._children.length;a++){var o=e._children[a];if(o.isRenderable()){var s=o.isSkinnedMesh()?bLt:o.worldTransform.array,l=o.geometry;Mt.multiplyAffine(P$,t.viewMatrix.array,s),(i&&!l.boundingBox||!this.isFrustumCulled(o,t,P$))&&r.add(o,o.material.transparent||n)}o._children.length>0&&this._doUpdateRenderList(o,t,n,r,i)}},isFrustumCulled:function(){var e=new Ji,t=new Ht;return function(n,r,i){var a=n.boundingBox;if(a||(n.skeleton&&n.skeleton.boundingBox?a=n.skeleton.boundingBox:a=n.geometry.boundingBox),!a)return!1;if(t.array=i,e.transformFrom(a,t),n.castShadow&&this.viewBoundingBoxLastFrame.union(e),n.frustumCulling){if(!e.intersectBoundingBox(r.frustum.boundingBox))return!0;t.array=r.projectionMatrix.array,e.max.array[2]>0&&e.min.array[2]<0&&(e.max.array[2]=-1e-20),e.applyProjection(t);var o=e.min.array,s=e.max.array;if(s[0]<-1||o[0]>1||s[1]<-1||o[1]>1||s[2]<-1||o[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var e=this.lights;e.sort(wLt);var t=this._lightUniforms;for(var n in t)for(var r in t[n])t[n][r].value.length=0;for(var i=0;i<e.length;i++){var a=e[i];if(!a.invisible){var n=a.group;for(var r in a.uniformTemplates){var o=a.uniformTemplates[r],s=o.value(a);if(s!=null){t[n]||(t[n]={}),t[n][r]||(t[n][r]={type:"",value:[]});var l=t[n][r];switch(l.type=o.type+"v",o.type){case"1i":case"1f":case"t":l.value.push(s);break;case"2f":case"3f":case"4f":for(var u=0;u<s.length;u++)l.value.push(s[u]);break;default:console.error("Unkown light uniform type "+o.type)}}}}}},getLightGroups:function(){var e=[];for(var t in this._lightNumber)e.push(t);return e},getNumberChangedLightGroups:function(){var e=[];for(var t in this._lightNumber)this.isLightNumberChanged(t)&&e.push(t);return e},isLightNumberChanged:function(e){var t=this._previousLightNumber,n=this._lightNumber;for(var r in n[e])if(!t[e]||n[e][r]!==t[e][r])return!0;for(var r in t[e])if(!n[e]||n[e][r]!==t[e][r])return!0;return!1},getLightsNumbers:function(e){return this._lightNumber[e]},getProgramKey:function(e){return this._lightProgramKeys[e]},setLightUniforms:function(){function e(t,n,r){for(var i in t){var a=t[i];if(a.type==="tv"){if(!n.hasUniform(i))continue;for(var o=[],s=0;s<a.value.length;s++){var l=a.value[s],u=n.takeCurrentTextureSlot(r,l);o.push(u)}n.setUniform(r.gl,"1iv",i,o)}else n.setUniform(r.gl,a.type,i,a.value)}}return function(t,n,r){e(this._lightUniforms[n],t,r),e(this.shadowUniforms,t,r)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function wLt(e,t){if(t.castShadow&&!e.castShadow)return!0}var Dw=B1.isPowerOfTwo,TLt=["px","nx","py","ny","pz","nz"],_v=Nt.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(e){var t=e.gl;t.bindTexture(t.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(e);var n=this.format,r=this.type;t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,this.getAvailableWrapS()),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,this.getAvailableWrapT()),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var i=e.getGLExtension("EXT_texture_filter_anisotropic");if(i&&this.anisotropic>1&&t.texParameterf(t.TEXTURE_CUBE_MAP,i.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),r===36193){var a=e.getGLExtension("OES_texture_half_float");a||(r=wt.FLOAT)}if(this.mipmaps.length)for(var o=this.width,s=this.height,l=0;l<this.mipmaps.length;l++){var u=this.mipmaps[l];this._updateTextureData(t,u,l,o,s,n,r),o/=2,s/=2}else this._updateTextureData(t,this,0,this.width,this.height,n,r),!this.NPOT&&this.useMipmap&&t.generateMipmap(t.TEXTURE_CUBE_MAP);t.bindTexture(t.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(e,t,n,r,i,a,o){for(var s=0;s<6;s++){var l=TLt[s],u=t.image&&t.image[l];u?e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,n,a,a,o,u):e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,n,a,r,i,0,a,o,t.pixels&&t.pixels[l])}},generateMipmap:function(e){var t=e.gl;this.useMipmap&&!this.NPOT&&(t.bindTexture(t.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),t.generateMipmap(t.TEXTURE_CUBE_MAP))},bind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(e))},unbind:function(e){e.gl.bindTexture(e.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?Dw(this.image.px.width)&&Dw(this.image.px.height):Dw(this.width)&&Dw(this.height)},isRenderable:function(){return this.image.px?Tg(this.image.px)&&Tg(this.image.nx)&&Tg(this.image.py)&&Tg(this.image.ny)&&Tg(this.image.pz)&&Tg(this.image.nz):!!(this.width&&this.height)},load:function(e,t){var n=0,r=this;return Kr.each(e,function(i,a){var o=Nn.createImage();t&&(o.crossOrigin=t),o.onload=function(){n--,n===0&&(r.dirty(),r.trigger("success",r))},o.onerror=function(){n--},n++,o.src=i,r.image[a]=o}),this}});Object.defineProperty(_v.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==e&&this.dirty(),this._width=e)}});Object.defineProperty(_v.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(e){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==e&&this.dirty(),this._height=e)}});function Tg(e){return e.width>0&&e.height>0}var wi=_y.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var e=this.fov/180*Math.PI;this.projectionMatrix.perspective(e,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array,t=Math.atan(1/e[5])*2;this.fov=t/Math.PI*180,this.aspect=e[5]/e[0],this.near=e[14]/(e[10]-1),this.far=e[14]/(e[10]+1)},clone:function(){var e=_y.prototype.clone.call(this);return e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e}}),Iw="framebuffer",Ac="renderbuffer",R$=Ac+"_width",O$=Ac+"_height",IL=Ac+"_attached",LL="depthtexture_attached",Zd=wt.FRAMEBUFFER,C_=wt.RENDERBUFFER,ux=wt.DEPTH_ATTACHMENT,Mnt=wt.COLOR_ATTACHMENT0,Qr=ta.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new my,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(e){if(e.__currentFrameBuffer){if(e.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}e.__currentFrameBuffer=this;var t=e.gl;t.bindFramebuffer(Zd,this._getFrameBufferGL(e)),this._boundRenderer=e;var n=this._cache;n.put("viewport",e.viewport);var r=!1,i,a;for(var o in this._textures){r=!0;var s=this._textures[o];s&&(i=s.texture.width,a=s.texture.height,this._doAttach(e,s.texture,o,s.target))}this._width=i,this._height=a,!r&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?e.setViewport(this.viewport):e.setViewport(0,0,i,a,1);var l=n.get("attached_textures");if(l){for(var o in l)if(!this._textures[o]){var u=l[o];this._doDetach(t,o,u)}}if(!n.get(LL)&&this.depthBuffer){n.miss(Ac)&&n.put(Ac,t.createRenderbuffer());var c=n.get(Ac);(i!==n.get(R$)||a!==n.get(O$))&&(t.bindRenderbuffer(C_,c),t.renderbufferStorage(C_,t.DEPTH_COMPONENT16,i,a),n.put(R$,i),n.put(O$,a),t.bindRenderbuffer(C_,null)),n.get(IL)||(t.framebufferRenderbuffer(Zd,ux,C_,c),n.put(IL,!0))}},unbind:function(e){e.__currentFrameBuffer=null;var t=e.gl;t.bindFramebuffer(Zd,null),this._boundRenderer=null,this._cache.use(e.__uid__);var n=this._cache.get("viewport");n&&e.setViewport(n),this.updateMipmap(e)},updateMipmap:function(e){var t=e.gl;for(var n in this._textures){var r=this._textures[n];if(r){var i=r.texture;if(!i.NPOT&&i.useMipmap&&i.minFilter===Nt.LINEAR_MIPMAP_LINEAR){var a=i.textureType==="textureCube"?wt.TEXTURE_CUBE_MAP:wt.TEXTURE_2D;t.bindTexture(a,i.getWebGLTexture(e)),t.generateMipmap(a),t.bindTexture(a,null)}}}},checkStatus:function(e){return e.checkFramebufferStatus(Zd)},_getFrameBufferGL:function(e){var t=this._cache;return t.use(e.__uid__),t.miss(Iw)&&t.put(Iw,e.gl.createFramebuffer()),t.get(Iw)},attach:function(e,t,n){if(!e.width)throw new Error("The texture attached to color buffer is not a valid.");t=t||Mnt,n=n||wt.TEXTURE_2D;var r=this._boundRenderer,i=r&&r.gl,a;if(i){var o=this._cache;o.use(r.__uid__),a=o.get("attached_textures")}var s=this._textures[t];if(!(s&&s.target===n&&s.texture===e&&a&&a[t]!=null)){var l=!0;r&&(l=this._doAttach(r,e,t,n),this.viewport||r.setViewport(0,0,e.width,e.height,1)),l&&(this._textures[t]=this._textures[t]||{},this._textures[t].texture=e,this._textures[t].target=n)}},_doAttach:function(e,t,n,r){var i=e.gl,a=t.getWebGLTexture(e),o=this._cache.get("attached_textures");if(o&&o[n]){var s=o[n];if(s.texture===t&&s.target===r)return}n=+n;var l=!0;if(n===ux||n===wt.DEPTH_STENCIL_ATTACHMENT){var u=e.getGLExtension("WEBGL_depth_texture");if(u||(console.error("Depth texture is not supported by the browser"),l=!1),t.format!==wt.DEPTH_COMPONENT&&t.format!==wt.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),l=!1),l){var c=this._cache.get(Ac);c&&(i.framebufferRenderbuffer(Zd,ux,C_,null),i.deleteRenderbuffer(c),this._cache.put(Ac,!1)),this._cache.put(IL,!1),this._cache.put(LL,!0)}}return i.framebufferTexture2D(Zd,n,r,a,0),o||(o={},this._cache.put("attached_textures",o)),o[n]=o[n]||{},o[n].texture=t,o[n].target=r,l},_doDetach:function(e,t,n){e.framebufferTexture2D(Zd,t,n,null,0);var r=this._cache.get("attached_textures");r&&r[t]&&(r[t]=null),(t===ux||t===wt.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(LL,!1)},detach:function(e,t){if(this._textures[e]=null,this._boundRenderer){var n=this._cache;n.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,e,t)}},dispose:function(e){var t=e.gl,n=this._cache;n.use(e.__uid__);var r=n.get(Ac);r&&t.deleteRenderbuffer(r);var i=n.get(Iw);i&&t.deleteFramebuffer(i),n.deleteContext(e.__uid__),this._textures={}}});Qr.DEPTH_ATTACHMENT=ux;Qr.COLOR_ATTACHMENT0=Mnt;Qr.STENCIL_ATTACHMENT=wt.STENCIL_ATTACHMENT;Qr.DEPTH_STENCIL_ATTACHMENT=wt.DEPTH_STENCIL_ATTACHMENT;var MLt=["px","nx","py","ny","pz","nz"],UF=ta.extend(function(){var e={position:new gt,far:1e3,near:.1,texture:null,shadowMapPass:null},t=e._cameras={px:new wi({fov:90}),nx:new wi({fov:90}),py:new wi({fov:90}),ny:new wi({fov:90}),pz:new wi({fov:90}),nz:new wi({fov:90})};return t.px.lookAt(gt.POSITIVE_X,gt.NEGATIVE_Y),t.nx.lookAt(gt.NEGATIVE_X,gt.NEGATIVE_Y),t.py.lookAt(gt.POSITIVE_Y,gt.POSITIVE_Z),t.ny.lookAt(gt.NEGATIVE_Y,gt.NEGATIVE_Z),t.pz.lookAt(gt.POSITIVE_Z,gt.NEGATIVE_Y),t.nz.lookAt(gt.NEGATIVE_Z,gt.NEGATIVE_Y),e._frameBuffer=new Qr,e},{getCamera:function(e){return this._cameras[e]},render:function(e,t,n){var r=e.gl;n||t.update();for(var i=this.texture.width,a=2*Math.atan(i/(i-.5))/Math.PI*180,o=0;o<6;o++){var s=MLt[o],l=this._cameras[s];if(gt.copy(l.position,this.position),l.far=this.far,l.near=this.near,l.fov=a,this.shadowMapPass){l.update();var u=t.getBoundingBox();u.applyTransform(l.viewMatrix),t.viewBoundingBoxLastFrame.copy(u),this.shadowMapPass.render(e,t,l,!0)}this._frameBuffer.attach(this.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+o),this._frameBuffer.bind(e),e.render(t,l,!0),this._frameBuffer.unbind(e)}},dispose:function(e){this._frameBuffer.dispose(e)}}),FE=cn.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var e=this.heightSegments,t=this.widthSegments,n=this.attributes,r=[],i=[],a=[],o=[],s=0;s<=e;s++)for(var l=s/e,u=0;u<=t;u++){var c=u/t;if(r.push([2*c-1,2*l-1,0]),i&&i.push([c,l]),a&&a.push([0,0,1]),u<t&&s<e){var h=u+s*(t+1);o.push([h,h+1,h+t+1]),o.push([h+t+1,h+1,h+t+2])}}n.position.fromArray(r),n.texcoord0.fromArray(i),n.normal.fromArray(a),this.initIndicesFromArray(o),this.boundingBox=new Ji,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),Nr=new Ht,Ant=cn.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var e={px:Mg("px",this.depthSegments,this.heightSegments),nx:Mg("nx",this.depthSegments,this.heightSegments),py:Mg("py",this.widthSegments,this.depthSegments),ny:Mg("ny",this.widthSegments,this.depthSegments),pz:Mg("pz",this.widthSegments,this.heightSegments),nz:Mg("nz",this.widthSegments,this.heightSegments)},t=["position","texcoord0","normal"],n=0,r=0;for(var i in e)n+=e[i].vertexCount,r+=e[i].indices.length;for(var a=0;a<t.length;a++)this.attributes[t[a]].init(n);this.indices=new Nn.Uint16Array(r);var o=0,s=0;for(var i in e){for(var l=e[i],a=0;a<t.length;a++)for(var u=t[a],c=l.attributes[u].value,h=l.attributes[u].size,f=u==="normal",d=0;d<c.length;d++){var p=c[d];this.inside&&f&&(p=-p),this.attributes[u].value[d+h*s]=p}for(var v=l.indices.length,d=0;d<l.indices.length;d++)this.indices[d+o]=s+l.indices[this.inside?v-d-1:d];o+=l.indices.length,s+=l.vertexCount}this.boundingBox=new Ji,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function Mg(e,t,n){Nr.identity();var r=new FE({widthSegments:t,heightSegments:n});switch(e){case"px":Ht.translate(Nr,Nr,gt.POSITIVE_X),Ht.rotateY(Nr,Nr,Math.PI/2);break;case"nx":Ht.translate(Nr,Nr,gt.NEGATIVE_X),Ht.rotateY(Nr,Nr,-Math.PI/2);break;case"py":Ht.translate(Nr,Nr,gt.POSITIVE_Y),Ht.rotateX(Nr,Nr,-Math.PI/2);break;case"ny":Ht.translate(Nr,Nr,gt.NEGATIVE_Y),Ht.rotateX(Nr,Nr,Math.PI/2);break;case"pz":Ht.translate(Nr,Nr,gt.POSITIVE_Z);break;case"nz":Ht.translate(Nr,Nr,gt.NEGATIVE_Z),Ht.rotateY(Nr,Nr,Math.PI);break}return r.applyTransform(Nr),r}const ALt=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;kt.import(ALt);var Pb=Ii.extend(function(){var e=new kt({vertex:kt.source("clay.skybox.vertex"),fragment:kt.source("clay.skybox.fragment")}),t=new ks({shader:e,depthMask:!1});return{scene:null,geometry:new Ant,material:t,environmentMap:null,culling:!1,_dummyCamera:new wi}},function(){var e=this.scene;e&&this.attachScene(e),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(e){this.scene&&this.detachScene(),e.skybox=this,this.scene=e,e.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(e){this.detachScene(),this.geometry.dispose(e)},setEnvironmentMap:function(e){e.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),e.minFilter=Nt.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",e)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(e,t,n){this.renderSkybox(e,n)},renderSkybox:function(e,t){var n=this._dummyCamera;n.aspect=e.getViewportAspect(),n.fov=t.fov||50,n.updateProjectionMatrix(),Ht.invert(n.invProjectionMatrix,n.projectionMatrix),n.worldTransform.copy(t.worldTransform),n.viewMatrix.copy(t.viewMatrix),this.position.copy(t.getWorldPosition()),this.update(),e.gl.disable(e.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),e.renderPass([this],n)}}),CLt=542327876,ELt=131072,DLt=512,ILt=4;function VF(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var LLt=31,PLt=VF("DXT1"),RLt=VF("DXT3"),OLt=VF("DXT5"),NLt=0,BLt=1,kLt=2,FLt=3,zLt=4,ULt=7,VLt=20,GLt=21,HLt=28,WLt={parse:function(e,t){var n=new Int32Array(e,0,LLt);if(n[NLt]!==CLt||!n(VLt)&ILt)return null;var r=n(GLt),i=n[zLt],a=n[FLt],o=n[HLt]&DLt,s=n[kLt]&ELt,l,u;switch(r){case PLt:l=8,u=Nt.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case RLt:l=16,u=Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case OLt:l=16,u=Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var c=n[BLt]+4,h=o?6:1,f=1;s&&(f=Math.max(1,n[ULt]));for(var d=[],p=0;p<h;p++){var v=i,g=a;d[p]=new Ye({width:v,height:g,format:u});for(var m=[],_=0;_<f;_++){var y=Math.max(4,v)/4*Math.max(4,g)/4*l,x=new Uint8Array(e,c,y);c+=y,v*=.5,g*=.5,m[_]=x}d[p].pixels=m[0],s&&(d[p].mipmaps=m)}if(t)t.width=d[0].width,t.height=d[0].height,t.format=d[0].format,t.pixels=d[0].pixels,t.mipmaps=d[0].mipmaps;else return d[0]}},uM=String.fromCharCode,$Lt=8,XLt=32767;function jLt(e,t,n,r){if(e[3]>0){var i=Math.pow(2,e[3]-128-8+r);t[n+0]=e[0]*i,t[n+1]=e[1]*i,t[n+2]=e[2]*i}else t[n+0]=0,t[n+1]=0,t[n+2]=0;return t[n+3]=1,t}function YLt(e,t,n){for(var r="",i=t;i<n;i++)r+=uM(e[i]);return r}function qLt(e,t){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]}function N$(e,t,n,r){for(var i=0,a=0,o=r;o>0;)if(e[a][0]=t[n++],e[a][1]=t[n++],e[a][2]=t[n++],e[a][3]=t[n++],e[a][0]===1&&e[a][1]===1&&e[a][2]===1){for(var s=e[a][3]<<i>>>0;s>0;s--)qLt(e[a-1],e[a]),a++,o--;i+=8}else a++,o--,i=0;return n}function KLt(e,t,n,r){if(r<$Lt|r>XLt)return N$(e,t,n,r);var i=t[n++];if(i!=2)return N$(e,t,n-1,r);if(e[0][1]=t[n++],e[0][2]=t[n++],i=t[n++],(e[0][2]<<8>>>0|i)>>>0!==r)return null;for(var i=0;i<4;i++)for(var a=0;a<r;){var o=t[n++];if(o>128){o=(o&127)>>>0;for(var s=t[n++];o--;)e[a++][i]=s}else for(;o--;)e[a++][i]=t[n++]}return n}var ZLt={parseRGBE:function(e,t,n){n==null&&(n=0);var r=new Uint8Array(e),i=r.length;if(YLt(r,0,2)==="#?"){for(var a=2;a<i&&!(uM(r[a])===`
`&&uM(r[a+1])===`
`);a++);if(!(a>=i)){a+=2;for(var o="";a<i;a++){var s=uM(r[a]);if(s===`
`)break;o+=s}var l=o.split(" "),u=parseInt(l[1]),c=parseInt(l[3]);if(!(!c||!u)){for(var h=a+1,f=[],d=0;d<c;d++){f[d]=[];for(var p=0;p<4;p++)f[d][p]=0}for(var v=new Float32Array(c*u*4),g=0,m=0;m<u;m++){var h=KLt(f,r,h,c);if(!h)return null;for(var d=0;d<c;d++)jLt(f[d],v,g,n),g+=4}return t||(t=new Ye),t.width=c,t.height=u,t.pixels=v,t.type=Nt.FLOAT,t}}}},parseRGBEFromPNG:function(e){}},Pu={loadTexture:function(e,t,n,r){var i;if(typeof t=="function"?(n=t,r=n,t={}):t=t||{},typeof e=="string"){if(e.match(/.hdr$/)||t.fileType==="hdr")return i=new Ye({width:0,height:0,sRGB:!1}),Pu._fetchTexture(e,function(a){ZLt.parseRGBE(a,i,t.exposure),i.dirty(),n&&n(i)},r),i;e.match(/.dds$/)||t.fileType==="dds"?(i=new Ye({width:0,height:0}),Pu._fetchTexture(e,function(a){WLt.parse(a,i),i.dirty(),n&&n(i)},r)):(i=new Ye,i.load(e),i.success(n),i.error(r))}else typeof e=="object"&&typeof e.px<"u"&&(i=new _v,i.load(e),i.success(n),i.error(r));return i},loadPanorama:function(e,t,n,r,i,a){var o=this;typeof r=="function"?(i=r,a=i,r={}):r=r||{},Pu.loadTexture(t,r,function(s){s.flipY=r.flipY||!1,o.panoramaToCubeMap(e,s,n,r),s.dispose(e),i&&i(n)},a)},panoramaToCubeMap:function(e,t,n,r){var i=new UF,a=new Pb({scene:new ud});return a.setEnvironmentMap(t),r=r||{},r.encodeRGBM&&a.material.define("fragment","RGBM_ENCODE"),n.sRGB=t.sRGB,i.texture=n,i.render(e,a.scene),i.texture=null,i.dispose(e),n},heightToNormal:function(e,t){var n=document.createElement("canvas"),r=n.width=e.width,i=n.height=e.height,a=n.getContext("2d");a.drawImage(e,0,0,r,i),t=t||!1;for(var o=a.getImageData(0,0,r,i),s=a.createImageData(r,i),l=0;l<o.data.length;l+=4){if(t){var u=o.data[l],c=o.data[l+1],h=o.data[l+2],f=Math.abs(u-c)+Math.abs(c-h);if(f>20)return console.warn("Given image is not a height map"),e}var d,p,v,g;l%(r*4)===0?(d=o.data[l],v=o.data[l+4]):l%(r*4)===(r-1)*4?(d=o.data[l-4],v=o.data[l]):(d=o.data[l-4],v=o.data[l+4]),l<r*4?(p=o.data[l],g=o.data[l+r*4]):l>r*(i-1)*4?(p=o.data[l-r*4],g=o.data[l]):(p=o.data[l-r*4],g=o.data[l+r*4]),s.data[l]=d-v+127,s.data[l+1]=p-g+127,s.data[l+2]=255,s.data[l+3]=255}return a.putImageData(s,0,0),n},isHeightImage:function(e,t,n){if(!e||!e.width||!e.height)return!1;var r=document.createElement("canvas"),i=r.getContext("2d"),a=t||32;n=n||20,r.width=r.height=a,i.drawImage(e,0,0,a,a);for(var o=i.getImageData(0,0,a,a),s=0;s<o.data.length;s+=4){var l=o.data[s],u=o.data[s+1],c=o.data[s+2],h=Math.abs(l-u)+Math.abs(u-c);if(h>n)return!1}return!0},_fetchTexture:function(e,t,n){Nn.request.get({url:e,responseType:"arraybuffer",onload:t,onerror:n})},createChessboard:function(e,t,n,r){e=e||512,t=t||64,n=n||"black",r=r||"white";var i=Math.ceil(e/t),a=document.createElement("canvas");a.width=e,a.height=e;var o=a.getContext("2d");o.fillStyle=r,o.fillRect(0,0,e,e),o.fillStyle=n;for(var s=0;s<i;s++)for(var l=0;l<i;l++){var u=l%2?s%2:s%2-1;u&&o.fillRect(s*t,l*t,t,t)}var c=new Ye({image:a,anisotropic:8});return c},createBlank:function(e){var t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle=e,n.fillRect(0,0,1,1);var r=new Ye({image:t});return r}},VN=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function GN(e){return"_on"+e}var HN=function(e){var t=this;this._texture=new Ye({anisotropic:32,flipY:!1,surface:this,dispose:function(n){t.dispose(),Ye.prototype.dispose.call(this,n)}}),VN.forEach(function(n){this[GN(n)]=function(r){r.triangle&&this._meshes.forEach(function(i){this.dispatchEvent(n,i,r.triangle,r.point)},this)}},this),this._meshes=[],e&&this.setECharts(e),this.onupdate=null};HN.prototype={constructor:HN,getTexture:function(){return this._texture},setECharts:function(e){this._chart=e;var t=e.getDom();if(!(t instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),t=document.createElement("canvas");else{var n=this,r=e.getZr(),i=r.__oldRefreshImmediately||r.refreshImmediately;r.refreshImmediately=function(){i.call(this),n._texture.dirty(),n.onupdate&&n.onupdate()},r.__oldRefreshImmediately=i}this._texture.image=t,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var e=new gt,t=new gt,n=new gt,r=new De,i=new De,a=new De,o=new De,s=new gt;return function(l,u,c,h){var f=u.geometry,d=f.attributes.position,p=f.attributes.texcoord0,v=gt.dot,g=gt.cross;d.get(c[0],e.array),d.get(c[1],t.array),d.get(c[2],n.array),p.get(c[0],r.array),p.get(c[1],i.array),p.get(c[2],a.array),g(s,t,n);var m=v(e,s),_=v(h,s)/m;g(s,n,e);var y=v(h,s)/m;g(s,e,t);var x=v(h,s)/m;De.scale(o,r,_),De.scaleAndAdd(o,o,i,y),De.scaleAndAdd(o,o,a,x);var S=o.x*this._chart.getWidth(),b=o.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(l,{zrX:S,zrY:b})}}(),attachToMesh:function(e){this._meshes.indexOf(e)>=0||(VN.forEach(function(t){e.on(t,this[GN(t)],this)},this),this._meshes.push(e))},detachFromMesh:function(e){var t=this._meshes.indexOf(e);t>=0&&this._meshes.splice(t,1),VN.forEach(function(n){e.off(n,this[GN(n)])},this)},dispose:function(){this._meshes.forEach(function(e){this.detachFromMesh(e)},this)}};var xy=_y.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var e=this.projectionMatrix.array;this.left=(-1-e[12])/e[0],this.right=(1-e[12])/e[0],this.top=(1-e[13])/e[5],this.bottom=(-1-e[13])/e[5],this.near=-(-1-e[14])/e[10],this.far=-(1-e[14])/e[10]},clone:function(){var e=_y.prototype.clone.call(this);return e.left=this.left,e.right=this.right,e.near=this.near,e.far=this.far,e.top=this.top,e.bottom=this.bottom,e}});const JLt=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;kt.import(JLt);var QLt=new FE,B$=new Ii({geometry:QLt,frustumCulling:!1}),tPt=new xy,oi=ta.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var e=new kt(kt.source("clay.compositor.vertex"),this.fragment),t=new ks({shader:e});t.enableTexturesAll(),this.material=t},{setUniform:function(e,t){this.material.setUniform(e,t)},getUniform:function(e){var t=this.material.uniforms[e];if(t)return t.value},attachOutput:function(e,t){this.outputs||(this.outputs={}),t=t||wt.COLOR_ATTACHMENT0,this.outputs[t]=e},detachOutput:function(e){for(var t in this.outputs)this.outputs[t]===e&&(this.outputs[t]=null)},bind:function(e,t){if(this.outputs)for(var n in this.outputs){var r=this.outputs[n];r&&t.attach(r,n)}t&&t.bind(e)},unbind:function(e,t){t.unbind(e)},render:function(e,t){var n=e.gl;if(t){this.bind(e,t);var r=e.getGLExtension("EXT_draw_buffers");if(r&&this.outputs){var i=[];for(var a in this.outputs)a=+a,a>=n.COLOR_ATTACHMENT0&&a<=n.COLOR_ATTACHMENT0+8&&i.push(a);r.drawBuffersEXT(i)}}this.trigger("beforerender",this,e);var o=this.clearDepth?n.DEPTH_BUFFER_BIT:0;if(n.depthMask(!0),this.clearColor){o=o|n.COLOR_BUFFER_BIT,n.colorMask(!0,!0,!0,!0);var s=this.clearColor;Array.isArray(s)&&n.clearColor(s[0],s[1],s[2],s[3])}n.clear(o),this.blendWithPrevious?(n.enable(n.BLEND),this.material.transparent=!0):(n.disable(n.BLEND),this.material.transparent=!1),this.renderQuad(e),this.trigger("afterrender",this,e),t&&this.unbind(e,t)},renderQuad:function(e){B$.material=this.material,e.renderPass([B$],tPt)},dispose:function(e){}});const ePt=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,nPt=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`;var Ru={},PL=["px","nx","py","ny","pz","nz"];Ru.prefilterEnvironmentMap=function(e,t,n,r,i){(!i||!r)&&(r=Ru.generateNormalDistribution(),i=Ru.integrateBRDF(e,r)),n=n||{};var a=n.width||64,o=n.height||64,s=n.type||t.type,l=new _v({width:a,height:o,type:s,flipY:!1,mipmaps:[]});l.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var u=Math.min(a,o),c=Math.log(u)/Math.log(2)+1,h=new ks({shader:new kt({vertex:kt.source("clay.skybox.vertex"),fragment:nPt})});h.set("normalDistribution",r),n.encodeRGBM&&h.define("fragment","RGBM_ENCODE"),n.decodeRGBM&&h.define("fragment","RGBM_DECODE");var f=new ud,d;if(t.textureType==="texture2D"){var p=new _v({width:a,height:o,type:s===Nt.FLOAT?Nt.HALF_FLOAT:s});Pu.panoramaToCubeMap(e,t,p,{encodeRGBM:n.decodeRGBM}),t=p}d=new Pb({scene:f,material:h}),d.material.set("environmentMap",t);var v=new UF({texture:l});n.encodeRGBM&&(s=l.type=Nt.UNSIGNED_BYTE);for(var g=new Ye({width:a,height:o,type:s}),m=new Qr({depthBuffer:!1}),_=Nn[s===Nt.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],y=0;y<c;y++){l.mipmaps[y]={pixels:{}},d.material.set("roughness",y/(c-1));for(var x=g.width,S=2*Math.atan(x/(x-.5))/Math.PI*180,b=0;b<PL.length;b++){var w=new _(g.width*g.height*4);m.attach(g),m.bind(e);var A=v.getCamera(PL[b]);A.fov=S,e.render(f,A),e.gl.readPixels(0,0,g.width,g.height,Nt.RGBA,s,w),m.unbind(e),l.mipmaps[y].pixels[PL[b]]=w}g.width/=2,g.height/=2,g.dirty()}return m.dispose(e),g.dispose(e),d.dispose(e),r.dispose(e),{environmentMap:l,brdfLookup:i,normalDistribution:r,maxMipmapLevel:c}};Ru.integrateBRDF=function(e,t){t=t||Ru.generateNormalDistribution();var n=new Qr({depthBuffer:!1}),r=new oi({fragment:ePt}),i=new Ye({width:512,height:256,type:Nt.HALF_FLOAT,wrapS:Nt.CLAMP_TO_EDGE,wrapT:Nt.CLAMP_TO_EDGE,minFilter:Nt.NEAREST,magFilter:Nt.NEAREST,useMipmap:!1});return r.setUniform("normalDistribution",t),r.setUniform("viewportSize",[512,256]),r.attachOutput(i),r.render(e,n),n.dispose(e),i};Ru.generateNormalDistribution=function(n,r){for(var n=n||256,r=r||1024,i=new Ye({width:n,height:r,type:Nt.FLOAT,minFilter:Nt.NEAREST,magFilter:Nt.NEAREST,wrapS:Nt.CLAMP_TO_EDGE,wrapT:Nt.CLAMP_TO_EDGE,useMipmap:!1}),a=new Float32Array(r*n*4),o=[],s=0;s<n;s++){for(var l=s/n,u=l*l,c=0;c<r;c++){var h=(c<<16|c>>>16)>>>0;h=((h&1431655765)<<1|(h&2863311530)>>>1)>>>0,h=((h&858993459)<<2|(h&3435973836)>>>2)>>>0,h=((h&252645135)<<4|(h&4042322160)>>>4)>>>0,h=(((h&16711935)<<8|(h&4278255360)>>>8)>>>0)/4294967296;var f=Math.sqrt((1-h)/(1+(u*u-1)*h));o[c]=f}for(var c=0;c<r;c++){var d=(c*n+s)*4,f=o[c],p=Math.sqrt(1-f*f),v=c/r,g=2*Math.PI*v;a[d]=p*Math.cos(g),a[d+1]=f,a[d+2]=p*Math.sin(g),a[d+3]=1}}return i.pixels=a,i};var rPt=Nl.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(e,t){if(!e.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=Ru.generateNormalDistribution(),this._brdfLookup=Ru.integrateBRDF(e,this._normalDistribution));var n=this.cubemap;if(!n.__prefiltered){var r=Ru.prefilterEnvironmentMap(e,n,{encodeRGBM:!0,width:t,height:t},this._normalDistribution,this._brdfLookup);this.cubemap=r.environmentMap,this.cubemap.__prefiltered=!0,n.dispose(e)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}},ambientCubemapLightCubemap:{type:"t",value:function(e){return e.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(e){return e._brdfLookup}}}}),iPt=Nl.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new Nn.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}},ambientSHLightCoefficients:{type:"3f",value:function(e){for(var t=e._coefficientsTmpArr,n=0;n<e.coefficients.length;n++)t[n]=e.coefficients[n];return t}}}}),Cnt={},kp=["px","nx","py","ny","pz","nz"];function aPt(e,t){var n=e[0],r=e[1],i=e[2];return t===0?1:t===1?n:t===2?r:t===3?i:t===4?n*i:t===5?r*i:t===6?n*r:t===7?3*i*i-1:n*n-r*r}var oPt={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function sPt(e,t,n,r){for(var i=new Nn.Float32Array(27),a=Q.create(),o=Q.create(),s=Q.create(),l=0;l<9;l++){for(var u=Q.create(),c=0;c<kp.length;c++){for(var h=t[kp[c]],f=Q.create(),d=0,p=0,v=oPt[kp[c]],g=0;g<r;g++)for(var m=0;m<n;m++){a[0]=m/(n-1)*2-1,a[1]=g/(r-1)*2-1,a[2]=-1,Q.normalize(a,a),s[0]=a[v[0]]*v[3],s[1]=a[v[1]]*v[4],s[2]=a[v[2]]*v[5],o[0]=h[p++]/255,o[1]=h[p++]/255,o[2]=h[p++]/255;var _=h[p++]/255*8.12;o[0]*=_,o[1]*=_,o[2]*=_,Q.scaleAndAdd(f,f,o,aPt(s,l)*-a[2]),d+=-a[2]}Q.scaleAndAdd(u,u,f,1/d)}i[l*3]=u[0]/6,i[l*3+1]=u[1]/6,i[l*3+2]=u[2]/6}return i}Cnt.projectEnvironmentMap=function(e,t,n){n=n||{},n.lod=n.lod||0;var r,i=new ud,a=64;t.textureType==="texture2D"?r=new Pb({scene:i,environmentMap:t}):(a=t.image&&t.image.px?t.image.px.width:t.width,r=new Pb({scene:i,environmentMap:t}));var o=Math.ceil(a/Math.pow(2,n.lod)),s=Math.ceil(a/Math.pow(2,n.lod)),l=new Ye({width:o,height:s}),u=new Qr;r.material.define("fragment","RGBM_ENCODE"),n.decodeRGBM&&r.material.define("fragment","RGBM_DECODE"),r.material.set("lod",n.lod);for(var c=new UF({texture:l}),h={},f=0;f<kp.length;f++){h[kp[f]]=new Uint8Array(o*s*4);var d=c.getCamera(kp[f]);d.fov=90,u.attach(l),u.bind(e),e.render(i,d),e.gl.readPixels(0,0,o,s,Nt.RGBA,Nt.UNSIGNED_BYTE,h[kp[f]]),u.unbind(e)}return r.dispose(e),u.dispose(e),l.dispose(e),sPt(e,h,o,s)};var an={firstNotNull:function(){for(var e=0,t=arguments.length;e<t;e++)if(arguments[e]!=null)return arguments[e]},queryDataIndex:function(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ht(t.dataIndex)?yt(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ht(t.name)?yt(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name)}},lPt=cn.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var e=this.heightSegments,t=this.widthSegments,n=this.attributes.position,r=this.attributes.texcoord0,i=this.attributes.normal,a=(t+1)*(e+1);n.init(a),r.init(a),i.init(a);var o=a>65535?Uint32Array:Uint16Array,s=this.indices=new o(t*e*6),l,u,c,h,f,d,p,y=this.radius,v=this.phiStart,g=this.phiLength,m=this.thetaStart,_=this.thetaLength,y=this.radius,x=[],S=[],b=0,w=1/y;for(p=0;p<=e;p++)for(d=0;d<=t;d++)h=d/t,f=p/e,l=-y*Math.cos(v+h*g)*Math.sin(m+f*_),u=y*Math.cos(m+f*_),c=y*Math.sin(v+h*g)*Math.sin(m+f*_),x[0]=l,x[1]=u,x[2]=c,S[0]=h,S[1]=f,n.set(b,x),r.set(b,S),x[0]*=w,x[1]*=w,x[2]*=w,i.set(b,x),b++;var A,T,M,C,E=t+1,D=0;for(p=0;p<e;p++)for(d=0;d<t;d++)T=p*E+d,A=p*E+d+1,C=(p+1)*E+d+1,M=(p+1)*E+d,s[D++]=A,s[D++]=T,s[D++]=C,s[D++]=T,s[D++]=M,s[D++]=C;this.boundingBox=new Ji,this.boundingBox.max.set(y,y,y),this.boundingBox.min.set(-y,-y,-y)}}),uPt=Nl.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}}}}),cPt=Nl.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new gt,e.__dir.copy(e.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}}},clone:function(){var e=Nl.prototype.clone.call(this);return e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}}),hPt=Nl.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(e){return e.range}},pointLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}}},clone:function(){var e=Nl.prototype.clone.call(this);return e.range=this.range,e}}),fPt=Nl.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(e){return e.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(e){return e.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(e){return Math.cos(e.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(e){return e.falloffFactor}},spotLightDirection:{type:"3f",value:function(e){return e.__dir=e.__dir||new gt,e.__dir.copy(e.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(e){var t=e.color,n=e.intensity;return[t[0]*n,t[1]*n,t[2]*n]}}},clone:function(){var e=Nl.prototype.clone.call(this);return e.range=this.range,e.umbraAngle=this.umbraAngle,e.penumbraAngle=this.penumbraAngle,e.falloffFactor=this.falloffFactor,e.shadowBias=this.shadowBias,e.shadowSlopeScale=this.shadowSlopeScale,e}}),An=function(e,t,n,r){e=e||0,t=t||0,n=n||0,r=r||0,this.array=Tt.fromValues(e,t,n,r),this._dirty=!0};An.prototype={constructor:An,add:function(e){return Tt.add(this.array,this.array,e.array),this._dirty=!0,this},set:function(e,t,n,r){return this.array[0]=e,this.array[1]=t,this.array[2]=n,this.array[3]=r,this._dirty=!0,this},setArray:function(e){return this.array[0]=e[0],this.array[1]=e[1],this.array[2]=e[2],this.array[3]=e[3],this._dirty=!0,this},clone:function(){return new An(this.x,this.y,this.z,this.w)},copy:function(e){return Tt.copy(this.array,e.array),this._dirty=!0,this},dist:function(e){return Tt.dist(this.array,e.array)},distance:function(e){return Tt.distance(this.array,e.array)},div:function(e){return Tt.div(this.array,this.array,e.array),this._dirty=!0,this},divide:function(e){return Tt.divide(this.array,this.array,e.array),this._dirty=!0,this},dot:function(e){return Tt.dot(this.array,e.array)},len:function(){return Tt.len(this.array)},length:function(){return Tt.length(this.array)},lerp:function(e,t,n){return Tt.lerp(this.array,e.array,t.array,n),this._dirty=!0,this},min:function(e){return Tt.min(this.array,this.array,e.array),this._dirty=!0,this},max:function(e){return Tt.max(this.array,this.array,e.array),this._dirty=!0,this},mul:function(e){return Tt.mul(this.array,this.array,e.array),this._dirty=!0,this},multiply:function(e){return Tt.multiply(this.array,this.array,e.array),this._dirty=!0,this},negate:function(){return Tt.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Tt.normalize(this.array,this.array),this._dirty=!0,this},random:function(e){return Tt.random(this.array,e),this._dirty=!0,this},scale:function(e){return Tt.scale(this.array,this.array,e),this._dirty=!0,this},scaleAndAdd:function(e,t){return Tt.scaleAndAdd(this.array,this.array,e.array,t),this._dirty=!0,this},sqrDist:function(e){return Tt.sqrDist(this.array,e.array)},squaredDistance:function(e){return Tt.squaredDistance(this.array,e.array)},sqrLen:function(){return Tt.sqrLen(this.array)},squaredLength:function(){return Tt.squaredLength(this.array)},sub:function(e){return Tt.sub(this.array,this.array,e.array),this._dirty=!0,this},subtract:function(e){return Tt.subtract(this.array,this.array,e.array),this._dirty=!0,this},transformMat4:function(e){return Tt.transformMat4(this.array,this.array,e.array),this._dirty=!0,this},transformQuat:function(e){return Tt.transformQuat(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var E_=Object.defineProperty;if(E_){var Lw=An.prototype;E_(Lw,"x",{get:function(){return this.array[0]},set:function(e){this.array[0]=e,this._dirty=!0}}),E_(Lw,"y",{get:function(){return this.array[1]},set:function(e){this.array[1]=e,this._dirty=!0}}),E_(Lw,"z",{get:function(){return this.array[2]},set:function(e){this.array[2]=e,this._dirty=!0}}),E_(Lw,"w",{get:function(){return this.array[3]},set:function(e){this.array[3]=e,this._dirty=!0}})}An.add=function(e,t,n){return Tt.add(e.array,t.array,n.array),e._dirty=!0,e};An.set=function(e,t,n,r,i){Tt.set(e.array,t,n,r,i),e._dirty=!0};An.copy=function(e,t){return Tt.copy(e.array,t.array),e._dirty=!0,e};An.dist=function(e,t){return Tt.distance(e.array,t.array)};An.distance=An.dist;An.div=function(e,t,n){return Tt.divide(e.array,t.array,n.array),e._dirty=!0,e};An.divide=An.div;An.dot=function(e,t){return Tt.dot(e.array,t.array)};An.len=function(e){return Tt.length(e.array)};An.lerp=function(e,t,n,r){return Tt.lerp(e.array,t.array,n.array,r),e._dirty=!0,e};An.min=function(e,t,n){return Tt.min(e.array,t.array,n.array),e._dirty=!0,e};An.max=function(e,t,n){return Tt.max(e.array,t.array,n.array),e._dirty=!0,e};An.mul=function(e,t,n){return Tt.multiply(e.array,t.array,n.array),e._dirty=!0,e};An.multiply=An.mul;An.negate=function(e,t){return Tt.negate(e.array,t.array),e._dirty=!0,e};An.normalize=function(e,t){return Tt.normalize(e.array,t.array),e._dirty=!0,e};An.random=function(e,t){return Tt.random(e.array,t),e._dirty=!0,e};An.scale=function(e,t,n){return Tt.scale(e.array,t.array,n),e._dirty=!0,e};An.scaleAndAdd=function(e,t,n,r){return Tt.scaleAndAdd(e.array,t.array,n.array,r),e._dirty=!0,e};An.sqrDist=function(e,t){return Tt.sqrDist(e.array,t.array)};An.squaredDistance=An.sqrDist;An.sqrLen=function(e){return Tt.sqrLen(e.array)};An.squaredLength=An.sqrLen;An.sub=function(e,t,n){return Tt.subtract(e.array,t.array,n.array),e._dirty=!0,e};An.subtract=An.sub;An.transformMat4=function(e,t,n){return Tt.transformMat4(e.array,t.array,n.array),e._dirty=!0,e};An.transformQuat=function(e,t,n){return Tt.transformQuat(e.array,t.array,n.array),e._dirty=!0,e};var Mn={};Mn.create=function(){var e=new ea(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e};Mn.clone=function(e){var t=new ea(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t};Mn.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e};Mn.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e};Mn.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e};Mn.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null};Mn.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e};Mn.determinant=function(e){return e[0]*e[3]-e[2]*e[1]};Mn.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+a*l,e[1]=i*s+o*l,e[2]=r*u+a*c,e[3]=i*u+o*c,e};Mn.mul=Mn.multiply;Mn.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l,e};Mn.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*l,e[3]=o*l,e};Mn.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))};Mn.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]};var Ha=function(){this.array=Mn.create(),this._dirty=!0};Ha.prototype={constructor:Ha,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},clone:function(){return new Ha().copy(this)},copy:function(e){return Mn.copy(this.array,e.array),this._dirty=!0,this},adjoint:function(){return Mn.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Mn.determinant(this.array)},identity:function(){return Mn.identity(this.array),this._dirty=!0,this},invert:function(){return Mn.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Mn.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Mn.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Mn.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Mn.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Mn.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Mn.scale(this.array,this.array,e.array),this._dirty=!0,this},transpose:function(){return Mn.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};Ha.adjoint=function(e,t){return Mn.adjoint(e.array,t.array),e._dirty=!0,e};Ha.copy=function(e,t){return Mn.copy(e.array,t.array),e._dirty=!0,e};Ha.determinant=function(e){return Mn.determinant(e.array)};Ha.identity=function(e){return Mn.identity(e.array),e._dirty=!0,e};Ha.invert=function(e,t){return Mn.invert(e.array,t.array),e._dirty=!0,e};Ha.mul=function(e,t,n){return Mn.mul(e.array,t.array,n.array),e._dirty=!0,e};Ha.multiply=Ha.mul;Ha.rotate=function(e,t,n){return Mn.rotate(e.array,t.array,n),e._dirty=!0,e};Ha.scale=function(e,t,n){return Mn.scale(e.array,t.array,n.array),e._dirty=!0,e};Ha.transpose=function(e,t){return Mn.transpose(e.array,t.array),e._dirty=!0,e};var Fn={};Fn.create=function(){var e=new ea(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e};Fn.clone=function(e){var t=new ea(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t};Fn.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e};Fn.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e};Fn.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=n*a-r*i;return l?(l=1/l,e[0]=a*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-a*o)*l,e[5]=(r*o-n*s)*l,e):null};Fn.determinant=function(e){return e[0]*e[3]-e[1]*e[2]};Fn.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1],h=n[2],f=n[3],d=n[4],p=n[5];return e[0]=r*u+a*c,e[1]=i*u+o*c,e[2]=r*h+a*f,e[3]=i*h+o*f,e[4]=r*d+a*p+s,e[5]=i*d+o*p+l,e};Fn.mul=Fn.multiply;Fn.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=i*c+o*u,e[2]=r*-u+a*c,e[3]=i*-u+o*c,e[4]=s,e[5]=l,e};Fn.scale=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=i*u,e[2]=a*c,e[3]=o*c,e[4]=s,e[5]=l,e};Fn.translate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*u+a*c+s,e[5]=i*u+o*c+l,e};Fn.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)};var xo=function(){this.array=Fn.create(),this._dirty=!0};xo.prototype={constructor:xo,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},clone:function(){return new xo().copy(this)},copy:function(e){return Fn.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return Fn.determinant(this.array)},identity:function(){return Fn.identity(this.array),this._dirty=!0,this},invert:function(){return Fn.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return Fn.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return Fn.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return Fn.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return Fn.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return Fn.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return Fn.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return Fn.translate(this.array,this.array,e.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};xo.copy=function(e,t){return Fn.copy(e.array,t.array),e._dirty=!0,e};xo.determinant=function(e){return Fn.determinant(e.array)};xo.identity=function(e){return Fn.identity(e.array),e._dirty=!0,e};xo.invert=function(e,t){return Fn.invert(e.array,t.array),e._dirty=!0,e};xo.mul=function(e,t,n){return Fn.mul(e.array,t.array,n.array),e._dirty=!0,e};xo.multiply=xo.mul;xo.rotate=function(e,t,n){return Fn.rotate(e.array,t.array,n),e._dirty=!0,e};xo.scale=function(e,t,n){return Fn.scale(e.array,t.array,n.array),e._dirty=!0,e};xo.translate=function(e,t,n){return Fn.translate(e.array,t.array,n.array),e._dirty=!0,e};var vi=function(){this.array=ye.create(),this._dirty=!0};vi.prototype={constructor:vi,setArray:function(e){for(var t=0;t<this.array.length;t++)this.array[t]=e[t];return this._dirty=!0,this},adjoint:function(){return ye.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new vi().copy(this)},copy:function(e){return ye.copy(this.array,e.array),this._dirty=!0,this},determinant:function(){return ye.determinant(this.array)},fromMat2d:function(e){return ye.fromMat2d(this.array,e.array),this._dirty=!0,this},fromMat4:function(e){return ye.fromMat4(this.array,e.array),this._dirty=!0,this},fromQuat:function(e){return ye.fromQuat(this.array,e.array),this._dirty=!0,this},identity:function(){return ye.identity(this.array),this._dirty=!0,this},invert:function(){return ye.invert(this.array,this.array),this._dirty=!0,this},mul:function(e){return ye.mul(this.array,this.array,e.array),this._dirty=!0,this},mulLeft:function(e){return ye.mul(this.array,e.array,this.array),this._dirty=!0,this},multiply:function(e){return ye.multiply(this.array,this.array,e.array),this._dirty=!0,this},multiplyLeft:function(e){return ye.multiply(this.array,e.array,this.array),this._dirty=!0,this},rotate:function(e){return ye.rotate(this.array,this.array,e),this._dirty=!0,this},scale:function(e){return ye.scale(this.array,this.array,e.array),this._dirty=!0,this},translate:function(e){return ye.translate(this.array,this.array,e.array),this._dirty=!0,this},normalFromMat4:function(e){return ye.normalFromMat4(this.array,e.array),this._dirty=!0,this},transpose:function(){return ye.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};vi.adjoint=function(e,t){return ye.adjoint(e.array,t.array),e._dirty=!0,e};vi.copy=function(e,t){return ye.copy(e.array,t.array),e._dirty=!0,e};vi.determinant=function(e){return ye.determinant(e.array)};vi.identity=function(e){return ye.identity(e.array),e._dirty=!0,e};vi.invert=function(e,t){return ye.invert(e.array,t.array),e};vi.mul=function(e,t,n){return ye.mul(e.array,t.array,n.array),e._dirty=!0,e};vi.multiply=vi.mul;vi.fromMat2d=function(e,t){return ye.fromMat2d(e.array,t.array),e._dirty=!0,e};vi.fromMat4=function(e,t){return ye.fromMat4(e.array,t.array),e._dirty=!0,e};vi.fromQuat=function(e,t){return ye.fromQuat(e.array,t.array),e._dirty=!0,e};vi.normalFromMat4=function(e,t){return ye.normalFromMat4(e.array,t.array),e._dirty=!0,e};vi.rotate=function(e,t,n){return ye.rotate(e.array,t.array,n),e._dirty=!0,e};vi.scale=function(e,t,n){return ye.scale(e.array,t.array,n.array),e._dirty=!0,e};vi.transpose=function(e,t){return ye.transpose(e.array,t.array),e._dirty=!0,e};vi.translate=function(e,t,n){return ye.translate(e.array,t.array,n.array),e._dirty=!0,e};var dPt={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(e,t){this._animators=this._animators||[];var n=this,r;if(e){for(var i=e.split("."),a=n,o=0,s=i.length;o<s;o++)a&&(a=a[i[o]]);a&&(r=a)}else r=n;if(r==null)throw new Error("Target "+e+" not exists");var l=this._animators,u=new tE(r,t),c=this;return u.during(function(){c.__zr&&c.__zr.refresh()}).done(function(){var h=l.indexOf(u);h>=0&&l.splice(h,1)}),l.push(u),this.__zr&&this.__zr.animation.addAnimator(u),u},stopAnimation:function(e){this._animators=this._animators||[];for(var t=this._animators,n=t.length,r=0;r<n;r++)t[r].stop(e);return t.length=0,this},addAnimatorsToZr:function(e){if(this._animators)for(var t=0;t<this._animators.length;t++)e.animation.addAnimator(this._animators[t])},removeAnimatorsFromZr:function(e){if(this._animators)for(var t=0;t<this._animators.length;t++)e.animation.removeAnimator(this._animators[t])}};const Ent=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,pPt=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,vPt=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,gPt=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,mPt=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,yPt=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,_Pt=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Lu.prototype,dPt);kt.import(Ent);kt.import(bnt);kt.import(pPt);kt.import(vPt);kt.import(gPt);kt.import(mPt);kt.import(yPt);kt.import(_Pt);function xPt(e){return!e||e==="none"}function Dnt(e){return e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof Image}function bPt(e){return e.getZr&&e.setOption}var SPt=ud.prototype.addToScene,wPt=ud.prototype.removeFromScene;ud.prototype.addToScene=function(e){if(SPt.call(this,e),this.__zr){var t=this.__zr;e.traverse(function(n){n.__zr=t,n.addAnimatorsToZr&&n.addAnimatorsToZr(t)})}};ud.prototype.removeFromScene=function(e){wPt.call(this,e),e.traverse(function(t){var n=t.__zr;t.__zr=null,n&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(n)})};ks.prototype.setTextureImage=function(e,t,n,r){if(this.shader){var i=n.getZr(),a=this,o;return a.autoUpdateTextureStatus=!1,a.disableTexture(e),xPt(t)||(o=V.loadTexture(t,n,r,function(s){a.enableTexture(e),i&&i.refresh()}),a.set(e,o)),o}};var V={};V.Renderer=Fs;V.Node=Lu;V.Mesh=Ii;V.Shader=kt;V.Material=ks;V.Texture=Nt;V.Texture2D=Ye;V.Geometry=cn;V.SphereGeometry=lPt;V.PlaneGeometry=FE;V.CubeGeometry=Ant;V.AmbientLight=uPt;V.DirectionalLight=cPt;V.PointLight=hPt;V.SpotLight=fPt;V.PerspectiveCamera=wi;V.OrthographicCamera=xy;V.Vector2=De;V.Vector3=gt;V.Vector4=An;V.Quaternion=Wn;V.Matrix2=Ha;V.Matrix2d=xo;V.Matrix3=vi;V.Matrix4=Ht;V.Plane=Gx;V.Ray=iv;V.BoundingBox=Ji;V.Frustum=BE;var Pw=null;function TPt(){return Pw!==null||(Pw=Pu.createBlank("rgba(255,255,255,0)").image),Pw}function k$(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))}function F$(e){if((e.wrapS===Nt.REPEAT||e.wrapT===Nt.REPEAT)&&e.image){var t=k$(e.width),n=k$(e.height);if(t!==e.width||n!==e.height){var r=document.createElement("canvas");r.width=t,r.height=n;var i=r.getContext("2d");i.drawImage(e.image,0,0,t,n),e.image=r}}}V.loadTexture=function(e,t,n,r){typeof n=="function"&&(r=n,n={}),n=n||{};for(var i=Object.keys(n).sort(),a="",o=0;o<i.length;o++)a+=i[o]+"_"+n[i[o]]+"_";var s=t.__textureCache=t.__textureCache||new t0(20);if(bPt(e)){var l=e.__textureid__,u=s.get(a+l);if(u)u.texture.surface.setECharts(e),r&&r(u.texture);else{var c=new HN(e);c.onupdate=function(){t.getZr().refresh()},u={texture:c.getTexture()};for(var o=0;o<i.length;o++)u.texture[i[o]]=n[i[o]];l=e.__textureid__||"__ecgl_ec__"+u.texture.__uid__,e.__textureid__=l,s.put(a+l,u),r&&r(u.texture)}return u.texture}else if(Dnt(e)){var l=e.__textureid__,u=s.get(a+l);if(!u){u={texture:new V.Texture2D({image:e})};for(var o=0;o<i.length;o++)u.texture[i[o]]=n[i[o]];l=e.__textureid__||"__ecgl_image__"+u.texture.__uid__,e.__textureid__=l,s.put(a+l,u),F$(u.texture),r&&r(u.texture)}return u.texture}else{var u=s.get(a+e);if(u)u.callbacks?u.callbacks.push(r):r&&r(u.texture);else if(e.match(/.hdr$|^data:application\/octet-stream/)){u={callbacks:[r]};var h=Pu.loadTexture(e,{exposure:n.exposure,fileType:"hdr"},function(){h.dirty(),u.callbacks.forEach(function(p){p&&p(h)}),u.callbacks=null});u.texture=h,s.put(a+e,u)}else{for(var h=new V.Texture2D({image:new Image}),o=0;o<i.length;o++)h[i[o]]=n[i[o]];u={texture:h,callbacks:[r]};var f=h.image;f.onload=function(){h.image=f,F$(h),h.dirty(),u.callbacks.forEach(function(v){v&&v(h)}),u.callbacks=null},f.crossOrigin="Anonymous",f.src=e,h.image=TPt(),s.put(a+e,u)}return u.texture}};V.createAmbientCubemap=function(e,t,n,r){e=e||{};var i=e.texture,a=an.firstNotNull(e.exposure,1),o=new rPt({intensity:an.firstNotNull(e.specularIntensity,1)}),s=new iPt({intensity:an.firstNotNull(e.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return o.cubemap=V.loadTexture(i,n,{exposure:a},function(){o.cubemap.flipY=!1,o.prefilter(t,32),s.coefficients=Cnt.projectEnvironmentMap(t,o.cubemap,{lod:1}),r&&r()}),{specular:o,diffuse:s}};V.createBlankTexture=Pu.createBlank;V.isImage=Dnt;V.additiveBlend=function(e){e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)};V.parseColor=function(e,t){return e instanceof Array?(t||(t=[]),t[0]=e[0],t[1]=e[1],t[2]=e[2],e.length>3?t[3]=e[3]:t[3]=1,t):(t=Va(e||"#000",t)||[0,0,0,0],t[0]/=255,t[1]/=255,t[2]/=255,t)};V.directionFromAlphaBeta=function(e,t){var n=e/180*Math.PI+Math.PI/2,r=-t/180*Math.PI+Math.PI/2,i=[],a=Math.sin(n);return i[0]=a*Math.cos(r),i[1]=-Math.cos(n),i[2]=a*Math.sin(r),i};V.getShadowResolution=function(e){var t=1024;switch(e){case"low":t=512;break;case"medium":break;case"high":t=2048;break;case"ultra":t=4096;break}return t};V.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"];V.createShader=function(e){e==="ecgl.shadow"&&(e="ecgl.displayShadow");var t=kt.source(e+".vertex"),n=kt.source(e+".fragment");t||console.error("Vertex shader of '%s' not exits",e),n||console.error("Fragment shader of '%s' not exits",e);var r=new kt(t,n);return r.name=e,r};V.createMaterial=function(e,t){t instanceof Array||(t=[t]);var n=V.createShader(e),r=new ks({shader:n});return t.forEach(function(i){typeof i=="string"&&r.define(i)}),r};V.setMaterialFromModel=function(e,t,n,r){t.autoUpdateTextureStatus=!1;var i=n.getModel(e+"Material"),a=i.get("detailTexture"),o=an.firstNotNull(i.get("textureTiling"),1),s=an.firstNotNull(i.get("textureOffset"),0);typeof o=="number"&&(o=[o,o]),typeof s=="number"&&(s=[s,s]);var l=o[0]>1||o[1]>1?V.Texture.REPEAT:V.Texture.CLAMP_TO_EDGE,u={anisotropic:8,wrapS:l,wrapT:l};if(e==="realistic"){var c=i.get("roughness"),h=i.get("metalness");h!=null?isNaN(h)&&(t.setTextureImage("metalnessMap",h,r,u),h=an.firstNotNull(i.get("metalnessAdjust"),.5)):h=0,c!=null?isNaN(c)&&(t.setTextureImage("roughnessMap",c,r,u),c=an.firstNotNull(i.get("roughnessAdjust"),.5)):c=.5;var f=i.get("normalTexture");t.setTextureImage("detailMap",a,r,u),t.setTextureImage("normalMap",f,r,u),t.set({roughness:c,metalness:h,detailUvRepeat:o,detailUvOffset:s})}else if(e==="lambert")t.setTextureImage("detailMap",a,r,u),t.set({detailUvRepeat:o,detailUvOffset:s});else if(e==="color")t.setTextureImage("detailMap",a,r,u),t.set({detailUvRepeat:o,detailUvOffset:s});else if(e==="hatching"){var d=i.get("hatchingTextures")||[];d.length<6;for(var p=0;p<6;p++)t.setTextureImage("hatch"+(p+1),d[p],r,{anisotropic:8,wrapS:V.Texture.REPEAT,wrapT:V.Texture.REPEAT});t.set({detailUvRepeat:o,detailUvOffset:s})}};V.updateVertexAnimation=function(e,t,n,r){var i=r.get("animation"),a=r.get("animationDurationUpdate"),o=r.get("animationEasingUpdate"),s=n.shadowDepthMaterial;if(i&&t&&a>0&&t.geometry.vertexCount===n.geometry.vertexCount){n.material.define("vertex","VERTEX_ANIMATION"),n.ignorePreZ=!0,s&&s.define("vertex","VERTEX_ANIMATION");for(var l=0;l<e.length;l++)n.geometry.attributes[e[l][0]].value=t.geometry.attributes[e[l][1]].value;n.geometry.dirty(),n.__percent=0,n.material.set("percent",0),n.stopAnimation(),n.animate().when(a,{__percent:1}).during(function(){n.material.set("percent",n.__percent),s&&s.set("percent",n.__percent)}).done(function(){n.ignorePreZ=!1,n.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")}).start(o)}else n.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")};var nr=function(e,t){this.id=e,this.zr=t;try{this.renderer=new Fs({clearBit:0,devicePixelRatio:t.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(t.painter.getWidth(),t.painter.getHeight())}catch(r){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(r);return}this.onglobalout=this.onglobalout.bind(this),t.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var n=this.dom.style;n.position="absolute",n.left="0",n.top="0",this.views=[],this._picking=new zF({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new nn({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};nr.prototype.setUnpainted=function(){};nr.prototype.addView=function(e){if(e.layer!==this){var t=this._viewsToDispose.indexOf(e);t>=0&&this._viewsToDispose.splice(t,1),this.views.push(e),e.layer=this;var n=this.zr;e.scene.traverse(function(r){r.__zr=n,r.addAnimatorsToZr&&r.addAnimatorsToZr(n)})}};function Int(e){var t=e.__zr;e.__zr=null,t&&e.removeAnimatorsFromZr&&e.removeAnimatorsFromZr(t)}nr.prototype.removeView=function(e){if(e.layer===this){var t=this.views.indexOf(e);t>=0&&(this.views.splice(t,1),e.scene.traverse(Int,this),e.layer=null,this._viewsToDispose.push(e))}};nr.prototype.removeViewsAll=function(){this.views.forEach(function(e){e.scene.traverse(Int,this),e.layer=null,this._viewsToDispose.push(e)},this),this.views.length=0};nr.prototype.resize=function(e,t){var n=this.renderer;n.resize(e,t)};nr.prototype.clear=function(){var e=this.renderer.gl,t=this._backgroundColor||[0,0,0,0];e.clearColor(t[0],t[1],t[2],t[3]),e.depthMask(!0),e.colorMask(!0,!0,!0,!0),e.clear(e.DEPTH_BUFFER_BIT|e.COLOR_BUFFER_BIT)};nr.prototype.clearDepth=function(){var e=this.renderer.gl;e.clear(e.DEPTH_BUFFER_BIT)};nr.prototype.clearColor=function(){var e=this.renderer.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)};nr.prototype.needsRefresh=function(){this.zr.refresh()};nr.prototype.refresh=function(e){this._backgroundColor=e?V.parseColor(e):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var t=0;t<this.views.length;t++)this.views[t].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var t=0;t<this._viewsToDispose.length;t++)this._viewsToDispose[t].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()};nr.prototype.renderToCanvas=function(e){this._startAccumulating(!0),e.drawImage(this.dom,0,0,e.canvas.width,e.canvas.height)};nr.prototype._doRender=function(e){this.clear(),this.renderer.saveViewport();for(var t=0;t<this.views.length;t++)this.views[t].render(this.renderer,e);this.renderer.restoreViewport()};nr.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var MPt=1;nr.prototype._startAccumulating=function(e){var t=this;this._stopAccumulating();for(var n=!1,r=0;r<this.views.length;r++)n=this.views[r].needsAccumulate()||n;if(!n)return;function i(a){if(!(!t._accumulatingId||a!==t._accumulatingId)){for(var o=!0,s=0;s<t.views.length;s++)o=t.views[s].isAccumulateFinished()&&n;o||(t._doRender(!0),e?i(a):cv(function(){i(a)}))}}this._accumulatingId=MPt++,e?i(t._accumulatingId):this._accumulatingTimeout=setTimeout(function(){i(t._accumulatingId)},50)};nr.prototype._trackAndClean=function(){var e=[],t=[];this._textureList&&(DA(this._textureList),DA(this._geometriesList));for(var n=0;n<this.views.length;n++)APt(this.views[n].scene,e,t);this._textureList&&(IA(this.renderer,this._textureList),IA(this.renderer,this._geometriesList)),this._textureList=e,this._geometriesList=t};function DA(e){for(var t=0;t<e.length;t++)e[t].__used__=0}function IA(e,t){for(var n=0;n<t.length;n++)t[n].__used__||t[n].dispose(e)}function Rw(e,t){e.__used__=e.__used__||0,e.__used__++,e.__used__===1&&t.push(e)}function APt(e,t,n){var r,i;e.traverse(function(o){if(o.isRenderable()){var s=o.geometry,l=o.material;if(l!==r)for(var u=l.getTextureUniforms(),c=0;c<u.length;c++){var h=u[c],f=l.uniforms[h].value;if(f){if(f instanceof Nt)Rw(f,t);else if(f instanceof Array)for(var d=0;d<f.length;d++)f[d]instanceof Nt&&Rw(f[d],t)}}s!==i&&Rw(s,n),r=l,i=s}});for(var a=0;a<e.lights.length;a++)e.lights[a].cubemap&&Rw(e.lights[a].cubemap,t)}nr.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(DA(this._textureList),DA(this._geometriesList),IA(this.renderer,this._textureList),IA(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)};nr.prototype.onmousedown=function(e){if(!(e.target&&e.target.__isGLToZRProxy)){e=e.event;var t=this.pickObject(e.offsetX,e.offsetY);t&&(this._dispatchEvent("mousedown",e,t),this._dispatchDataEvent("mousedown",e,t)),this._downX=e.offsetX,this._downY=e.offsetY}};nr.prototype.onmousemove=function(e){if(!(e.target&&e.target.__isGLToZRProxy)){e=e.event;var t=this.pickObject(e.offsetX,e.offsetY),n=t&&t.target,r=this._hovered;this._hovered=t,r&&n!==r.target&&(r.relatedTarget=n,this._dispatchEvent("mouseout",e,r),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",e,t),t&&(this.zr.setCursorStyle("pointer"),(!r||n!==r.target)&&this._dispatchEvent("mouseover",e,t)),this._dispatchDataEvent("mousemove",e,t)}};nr.prototype.onmouseup=function(e){if(!(e.target&&e.target.__isGLToZRProxy)){e=e.event;var t=this.pickObject(e.offsetX,e.offsetY);t&&(this._dispatchEvent("mouseup",e,t),this._dispatchDataEvent("mouseup",e,t)),this._upX=e.offsetX,this._upY=e.offsetY}};nr.prototype.onclick=nr.prototype.dblclick=function(e){if(!(e.target&&e.target.__isGLToZRProxy)){var t=this._upX-this._downX,n=this._upY-this._downY;if(!(Math.sqrt(t*t+n*n)>20)){e=e.event;var r=this.pickObject(e.offsetX,e.offsetY);r&&(this._dispatchEvent(e.type,e,r),this._dispatchDataEvent(e.type,e,r));var i=this._clickToSetFocusPoint(e);if(i){var a=i.view.setDOFFocusOnPoint(i.distance);a&&this.zr.refresh()}}}};nr.prototype._clickToSetFocusPoint=function(e){for(var t=this.renderer,n=t.viewport,r=this.views.length-1;r>=0;r--){var i=this.views[r];if(i.hasDOF()&&i.containPoint(e.offsetX,e.offsetY)){this._picking.scene=i.scene,this._picking.camera=i.camera,t.viewport=i.viewport;var a=this._picking.pick(e.offsetX,e.offsetY,!0);if(a)return a.view=i,a}}t.viewport=n};nr.prototype.onglobalout=function(e){var t=this._hovered;t&&this._dispatchEvent("mouseout",e,{target:t.target})};nr.prototype.pickObject=function(e,t){for(var n=[],r=this.renderer,i=r.viewport,a=0;a<this.views.length;a++){var o=this.views[a];o.containPoint(e,t)&&(this._picking.scene=o.scene,this._picking.camera=o.camera,r.viewport=o.viewport,this._picking.pickAll(e,t,n))}return r.viewport=i,n.sort(function(s,l){return s.distance-l.distance}),n[0]};nr.prototype._dispatchEvent=function(e,t,n){n||(n={});var r=n.target;for(n.cancelBubble=!1,n.event=t,n.type=e,n.offsetX=t.offsetX,n.offsetY=t.offsetY;r&&(r.trigger(e,n),r=r.getParent(),!n.cancelBubble););this._dispatchToView(e,n)};nr.prototype._dispatchDataEvent=function(e,t,n){var r=n&&n.target,i=r&&r.dataIndex,a=r&&r.seriesIndex,o=r&&r.eventData,s=!1,l=this._zrEventProxy;l.x=t.offsetX,l.y=t.offsetY,l.update();var u={target:l};const c=fe(l);e==="mousemove"&&(i!=null?i!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(c.dataIndex=this._lastDataIndex,c.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(u,"mouseout",t)),s=!0):o!=null&&o!==this._lastEventData&&(this._lastEventData!=null&&(c.eventData=this._lastEventData,this.zr.handler.dispatchToElement(u,"mouseout",t)),s=!0),this._lastEventData=o,this._lastDataIndex=i,this._lastSeriesIndex=a),c.eventData=o,c.dataIndex=i,c.seriesIndex=a,(o!=null||parseInt(i,10)>=0&&parseInt(a,10)>=0)&&(this.zr.handler.dispatchToElement(u,e,t),s&&this.zr.handler.dispatchToElement(u,"mouseover",t))};nr.prototype._dispatchToView=function(e,t){for(var n=0;n<this.views.length;n++)this.views[n].containPoint(t.offsetX,t.offsetY)&&this.views[n].trigger(e,t)};Object.assign(nr.prototype,FF);var CPt=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function cx(e,t){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,r=e[t].emphasis;n&&(e[t]=n),r&&(e.emphasis=e.emphasis||{},e.emphasis[t]=r)}}function EPt(e){cx(e,"itemStyle"),cx(e,"lineStyle"),cx(e,"areaStyle"),cx(e,"label")}function Ow(e){e&&(e instanceof Array||(e=[e]),R(e,function(t){if(t.axisLabel){var n=t.axisLabel;Object.assign(n,n.textStyle),n.textStyle=null}}))}function DPt(e){R(e.series,function(t){Le(CPt,t.type)>=0&&(EPt(t),t.coordinateSystem==="mapbox"&&(t.coordinateSystem="mapbox3D",e.mapbox3D=e.mapbox))}),Ow(e.xAxis3D),Ow(e.yAxis3D),Ow(e.zAxis3D),Ow(e.grid3D),cx(e.geo3D)}function Lnt(e){this._layers={},this._zr=e}Lnt.prototype.update=function(e,t){var n=this,r=t.getZr();if(!r.getWidth()||!r.getHeight()){console.warn("Dom has no width or height");return}function i(s){r.setSleepAfterStill(0);var l;s.coordinateSystem&&s.coordinateSystem.model,l=s.get("zlevel");var u=n._layers,c=u[l];if(!c){if(c=u[l]=new nr("gl-"+l,r),r.painter.isSingleCanvas()){c.virtual=!0;var h=new Wi({z:1e4,style:{image:c.renderer.canvas},silent:!0});c.__hostImage=h,r.add(h)}r.painter.insertLayer(l,c)}return c.__hostImage&&c.__hostImage.setStyle({width:c.renderer.getWidth(),height:c.renderer.getHeight()}),c}function a(s,l){s&&s.traverse(function(u){u.isRenderable&&u.isRenderable()&&(u.ignorePicking=u.$ignorePicking!=null?u.$ignorePicking:l)})}for(var o in this._layers)this._layers[o].removeViewsAll();e.eachComponent(function(s,l){if(s!=="series"){var u=t.getViewOfComponentModel(l),c=l.coordinateSystem;if(u.__ecgl__){var h;if(c){if(!c.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+l.id);return}h=c.viewGL}else{if(!l.viewGL){console.error("Can't find viewGL of component "+l.id);return}h=c.viewGL}var h=c.viewGL,f=i(l);f.addView(h),u.afterRender&&u.afterRender(l,e,t,f),a(u.groupGL,l.get("silent"))}}}),e.eachSeries(function(s){var l=t.getViewOfSeriesModel(s),u=s.coordinateSystem;if(l.__ecgl__){if(u&&!u.viewGL&&!l.viewGL){console.error("Can't find viewGL of series "+l.id);return}var c=u&&u.viewGL||l.viewGL,h=i(s);h.addView(c),l.afterRender&&l.afterRender(s,e,t,h),a(l.groupGL,s.get("silent"))}})};IJ(function(e){var t=e.getZr(),n=t.painter.dispose;t.painter.dispose=function(){typeof this.eachOtherLayer=="function"&&this.eachOtherLayer(function(r){r instanceof nr&&r.dispose()}),n.call(this)},t.painter.getRenderedCanvas=function(r){if(r=r||{},this._singleCanvas)return this._layers[0].dom;var i=document.createElement("canvas"),a=r.pixelRatio||this.dpr;i.width=this.getWidth()*a,i.height=this.getHeight()*a;var o=i.getContext("2d");o.dpr=a,o.clearRect(0,0,i.width,i.height),r.backgroundColor&&(o.fillStyle=r.backgroundColor,o.fillRect(0,0,i.width,i.height));var s=this.storage.getDisplayList(!0),l={},u,c=this;function h(v,g){var m=c._zlevelList;v==null&&(v=-1/0);for(var _,y=0;y<m.length;y++){var x=m[y],S=c._layers[x];if(!S.__builtin__&&x>v&&x<g){_=S;break}}_&&_.renderToCanvas&&(o.save(),_.renderToCanvas(o),o.restore())}for(var f={ctx:o},d=0;d<s.length;d++){var p=s[d];p.zlevel!==u&&(h(u,p.zlevel),u=p.zlevel),this._doPaintEl(p,f,!0,null,l)}return h(u,1/0),i}});LJ(function(e,t){var n=t.getZr(),r=n.__egl=n.__egl||new Lnt(n);r.update(e,t)});xk(DPt);const zE={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(e){e=e||{},this.option.viewControl=this.option.viewControl||{},e.alpha!=null&&(this.option.viewControl.alpha=e.alpha),e.beta!=null&&(this.option.viewControl.beta=e.beta),e.distance!=null&&(this.option.viewControl.distance=e.distance),e.center!=null&&(this.option.viewControl.center=e.center)}},m0={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},y0={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}};var UE=Ie.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});Xt(UE.prototype,zE);Xt(UE.prototype,m0);Xt(UE.prototype,y0);var D_=an.firstNotNull,z$={left:0,middle:1,right:2};function U$(e){return e instanceof Array||(e=[e,e]),e}var k1=ta.extend(function(){return{zr:null,viewGL:null,_center:new gt,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new De,_panVelocity:new De,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(e){this[e]=this[e].bind(this)},this)},{init:function(){var e=this.zr;e&&(e.on("mousedown",this._mouseDownHandler),e.on("globalout",this._mouseUpHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("pinch",this._pinchHandler),e.animation.on("frame",this._update),e.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var e=this.zr;e&&(e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("pinch",this._pinchHandler),e.off("globalout",this._mouseUpHandler),e.dom.removeEventListener("contextmenu",this._contextMenuHandler),e.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(e){this._distance=e,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(e){this._orthoSize=e,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(e){e=Math.max(Math.min(this.maxAlpha,e),this.minAlpha),this._theta=e/180*Math.PI,this._needsUpdate=!0},setBeta:function(e){e=Math.max(Math.min(this.maxBeta,e),this.minBeta),this._phi=-e/180*Math.PI,this._needsUpdate=!0},setCenter:function(e){this._center.setArray(e)},setViewGL:function(e){this.viewGL=e},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(e,t){t=t||{};var n=t.baseDistance||0,r=t.baseOrthoSize||1,i=e.get("projection");i!=="perspective"&&i!=="orthographic"&&i!=="isometric"&&(i="perspective"),this._projection=i,this.viewGL.setProjection(i);var a=e.get("distance")+n,o=e.get("orthographicSize")+r;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(f){this[f[0]]=D_(e.get(f[0]),f[1])},this),this.minDistance+=n,this.maxDistance+=n,this.minOrthographicSize+=r,this.maxOrthographicSize+=r;var s=e.ecModel,l={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(f){l[f]=D_(e.get(f),s&&s.get(f))});var u=D_(t.alpha,e.get("alpha"))||0,c=D_(t.beta,e.get("beta"))||0,h=D_(t.center,e.get("center"))||[0,0,0];l.animation&&l.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:u,beta:c,center:h,distance:a,orthographicSize:o,easing:l.animationEasingUpdate,duration:l.animationDurationUpdate}):(this.setDistance(a),this.setAlpha(u),this.setBeta(c),this.setCenter(h),this.setOrthographicSize(o)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(e){var t=this.zr,n=this,r={},i={};return e.distance!=null&&(r.distance=this.getDistance(),i.distance=e.distance),e.orthographicSize!=null&&(r.orthographicSize=this.getOrthographicSize(),i.orthographicSize=e.orthographicSize),e.alpha!=null&&(r.alpha=this.getAlpha(),i.alpha=e.alpha),e.beta!=null&&(r.beta=this.getBeta(),i.beta=e.beta),e.center!=null&&(r.center=this.getCenter(),i.center=e.center),this._addAnimator(t.animation.animate(r).when(e.duration||1e3,i).during(function(){r.alpha!=null&&n.setAlpha(r.alpha),r.beta!=null&&n.setBeta(r.beta),r.distance!=null&&n.setDistance(r.distance),r.center!=null&&n.setCenter(r.center),r.orthographicSize!=null&&n.setOrthographicSize(r.orthographicSize),n._needsUpdate=!0})).start(e.easing||"linear")},stopAllAnimation:function(){for(var e=0;e<this._animators.length;e++)this._animators[e].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(e){if(this._rotating){var t=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=t*e/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(e=Math.min(e,50),this._updateDistanceOrSize(e),this._updatePan(e),this._updateRotate(e),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(e){var t=this._rotateVelocity;this._phi=t.y*e/20+this._phi,this._theta=t.x*e/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(t,Math.pow(this.damping,e/16))},_updateDistanceOrSize:function(e){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*e/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*e/20),this._zoomSpeed*=Math.pow(this.damping,e/16)},_setDistance:function(e){this._distance=Math.max(Math.min(e,this.maxDistance),this.minDistance)},_setOrthoSize:function(e){this._orthoSize=Math.max(Math.min(e,this.maxOrthographicSize),this.minOrthographicSize);var t=this.getCamera(),n=this._orthoSize,r=n/this.viewGL.viewport.height*this.viewGL.viewport.width;t.left=-r/2,t.right=r/2,t.top=n/2,t.bottom=-n/2},_updatePan:function(e){var t=this._panVelocity,n=this._distance,r=this.getCamera(),i=r.worldTransform.y,a=r.worldTransform.x;this._center.scaleAndAdd(a,-t.x*n/200).scaleAndAdd(i,-t.y*n/200),this._vectorDamping(t,0)},_updateTransform:function(){var e=this.getCamera(),t=new gt,n=this._theta+Math.PI/2,r=this._phi+Math.PI/2,i=Math.sin(n);t.x=i*Math.cos(r),t.y=-Math.cos(n),t.z=i*Math.sin(r),e.position.copy(this._center).scaleAndAdd(t,this._distance),e.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var e=this.autoRotateAfterStill,t=this;!isNaN(e)&&e>0&&(this._stillTimeout=setTimeout(function(){t._rotating=!0},e*1e3))},_vectorDamping:function(e,t){var n=e.len();n=n*t,n<1e-4&&(n=0),e.normalize().scale(n)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var e=this.getCamera().worldTransform.z,t=Math.asin(e.y),n=Math.atan2(e.x,e.z);this._theta=t,this._phi=-n,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(e){if(!e.target&&!this._isAnimating()){var t=e.offsetX,n=e.offsetY;this.viewGL&&!this.viewGL.containPoint(t,n)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),e.event.targetTouches?e.event.targetTouches.length===1&&(this._mode="rotate"):e.event.button===z$[this.rotateMouseButton]?this._mode="rotate":e.event.button===z$[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=e.offsetX,this._mouseY=e.offsetY)}},_mouseMoveHandler:function(e){if(!(e.target&&e.target.__isGLToZRProxy)&&!this._isAnimating()){var t=U$(this.panSensitivity),n=U$(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(e.offsetX-this._mouseX)/this.zr.getHeight()*2*n[0],this._rotateVelocity.x=(e.offsetY-this._mouseY)/this.zr.getWidth()*2*n[1]):this._mode==="pan"&&(this._panVelocity.x=(e.offsetX-this._mouseX)/this.zr.getWidth()*t[0]*400,this._panVelocity.y=(-e.offsetY+this._mouseY)/this.zr.getHeight()*t[1]*400),this._mouseX=e.offsetX,this._mouseY=e.offsetY,e.event.preventDefault()}},_mouseWheelHandler:function(e){if(!this._isAnimating()){var t=e.event.wheelDelta||-e.event.detail;this._zoomHandler(e,t)}},_pinchHandler:function(e){this._isAnimating()||(this._zoomHandler(e,e.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(e,t){if(t!==0){var n=e.offsetX,r=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(n,r))){var i;this._projection==="perspective"?i=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):i=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(t>0?-1:1)*i*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),e.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(e){this._isRightMouseButtonUsed()&&e.preventDefault()},_addAnimator:function(e){var t=this._animators;return t.push(e),e.done(function(){var n=t.indexOf(e);n>=0&&t.splice(n,1)}),e}});Object.defineProperty(k1.prototype,"autoRotate",{get:function(e){return this._autoRotate},set:function(e){this._autoRotate=e,this._rotating=e}});const F1={convertToDynamicArray:function(e){e&&this.resetOffset();var t=this.attributes;for(var n in t)e||!t[n].value?t[n].value=[]:t[n].value=Array.prototype.slice.call(t[n].value);e||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var e=this.attributes;for(var t in e)e[t].value&&e[t].value.length>0?e[t].value=new Float32Array(e[t].value):e[t].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},ei={vec2:Lt,vec3:Q,vec4:Tt,mat2:Mn,mat2d:Fn,mat3:ye,mat4:Mt,quat:Wt};var RL=ei.vec3,V$=[[0,0],[1,1]],cd=cn.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new cn.Attribute("position","float",3,"POSITION"),positionPrev:new cn.Attribute("positionPrev","float",3),positionNext:new cn.Attribute("positionNext","float",3),prevPositionPrev:new cn.Attribute("prevPositionPrev","float",3),prevPosition:new cn.Attribute("prevPosition","float",3),prevPositionNext:new cn.Attribute("prevPositionNext","float",3),offset:new cn.Attribute("offset","float",1),color:new cn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var t=this.attributes;this.vertexCount!==e&&(t.position.init(e),t.color.init(e),this.useNativeLine||(t.positionPrev.init(e),t.positionNext.init(e),t.offset.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(e===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(e*3):new Uint16Array(e*3))},_getCubicCurveApproxStep:function(e,t,n,r){var i=RL.dist(e,t)+RL.dist(n,t)+RL.dist(r,n),a=1/(i+1)*this.segmentScale;return a},getCubicCurveVertexCount:function(e,t,n,r){var i=this._getCubicCurveApproxStep(e,t,n,r),a=Math.ceil(1/i);return this.useNativeLine?a*2:a*2+2},getCubicCurveTriangleCount:function(e,t,n,r){var i=this._getCubicCurveApproxStep(e,t,n,r),a=Math.ceil(1/i);return this.useNativeLine?0:a*2},getLineVertexCount:function(){return this.getPolylineVertexCount(V$)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(V$)},getPolylineVertexCount:function(e){var t;if(typeof e=="number")t=e;else{var n=typeof e[0]!="number";t=n?e.length:e.length/3}return this.useNativeLine?(t-1)*2:(t-1)*2+2},getPolylineTriangleCount:function(e){var t;if(typeof e=="number")t=e;else{var n=typeof e[0]!="number";t=n?e.length:e.length/3}return this.useNativeLine?0:Math.max(t-1,0)*2},addCubicCurve:function(e,t,n,r,i,a){a==null&&(a=1);for(var o=e[0],s=e[1],l=e[2],u=t[0],c=t[1],h=t[2],f=n[0],d=n[1],p=n[2],v=r[0],g=r[1],m=r[2],_=this._getCubicCurveApproxStep(e,t,n,r),y=_*_,x=y*_,S=3*_,b=3*y,w=6*y,A=6*x,T=o-u*2+f,M=s-c*2+d,C=l-h*2+p,E=(u-f)*3-o+v,D=(c-d)*3-s+g,I=(h-p)*3-l+m,L=o,P=s,B=l,N=(u-o)*S+T*b+E*x,k=(c-s)*S+M*b+D*x,U=(h-l)*S+C*b+I*x,Z=T*w+E*A,nt=M*w+D*A,ct=C*w+I*A,K=E*A,$=D*A,ot=I*A,tt=0,et=0,xt=Math.ceil(1/_),St=new Float32Array((xt+1)*3),St=[],X=0,et=0;et<xt+1;et++)St[X++]=L,St[X++]=P,St[X++]=B,L+=N,P+=k,B+=U,N+=Z,k+=nt,U+=ct,Z+=K,nt+=$,ct+=ot,tt+=_,tt>1&&(L=N>0?Math.min(L,v):Math.max(L,v),P=k>0?Math.min(P,g):Math.max(P,g),B=U>0?Math.min(B,m):Math.max(B,m));return this.addPolyline(St,i,a)},addLine:function(e,t,n,r){return this.addPolyline([e,t],n,r)},addPolyline:function(e,t,n,r,i){if(e.length){var a=typeof e[0]!="number";if(i==null&&(i=a?e.length:e.length/3),!(i<2)){r==null&&(r=0),n==null&&(n=1),this._itemVertexOffsets.push(this._vertexOffset);var a=typeof e[0]!="number",o=a?typeof t[0]!="number":t.length/4===i,s=this.attributes.position,l=this.attributes.positionPrev,u=this.attributes.positionNext,c=this.attributes.color,h=this.attributes.offset,f=this.indices,d=this._vertexOffset,p,v;n=Math.max(n,.01);for(var g=r;g<i;g++){if(a)p=e[g],o?v=t[g]:v=t;else{var m=g*3;if(p=p||[],p[0]=e[m],p[1]=e[m+1],p[2]=e[m+2],o){var _=g*4;v=v||[],v[0]=t[_],v[1]=t[_+1],v[2]=t[_+2],v[3]=t[_+3]}else v=t}if(this.useNativeLine?g>1&&(s.copy(d,d-1),c.copy(d,d-1),d++):(g<i-1&&(l.set(d+2,p),l.set(d+3,p)),g>0&&(u.set(d-2,p),u.set(d-1,p)),s.set(d,p),s.set(d+1,p),c.set(d,v),c.set(d+1,v),h.set(d,n/2),h.set(d+1,-n/2),d+=2),this.useNativeLine)c.set(d,v),s.set(d,p),d++;else if(g>0){var y=this._triangleOffset*3,f=this.indices;f[y]=d-4,f[y+1]=d-3,f[y+2]=d-2,f[y+3]=d-3,f[y+4]=d-1,f[y+5]=d-2,this._triangleOffset+=2}}if(!this.useNativeLine){var x=this._vertexOffset,S=this._vertexOffset+i*2;l.copy(x,x+2),l.copy(x+1,x+3),u.copy(S-1,S-3),u.copy(S-2,S-4)}return this._vertexOffset=d,this._vertexOffset}}},setItemColor:function(e,t){for(var n=this._itemVertexOffsets[e],r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=n;i<r;i++)this.attributes.color.set(i,t);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});te(cd.prototype,F1);function LA(e,t,n,r,i,a,o){this._zr=e,this._x=0,this._y=0,this._rowHeight=0,this.width=r,this.height=i,this.offsetX=t,this.offsetY=n,this.dpr=o,this.gap=a}LA.prototype={constructor:LA,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(e,t,n){var r=e.getBoundingRect();t==null&&(t=r.width),n==null&&(n=r.height),t*=this.dpr,n*=this.dpr,this._fitElement(e,t,n);var i=this._x,a=this._y,o=this.width*this.dpr,s=this.height*this.dpr,l=this.gap;if(i+t+l>o&&(i=this._x=0,a+=this._rowHeight+l,this._y=a,this._rowHeight=0),this._x+=t+l,this._rowHeight=Math.max(this._rowHeight,n),a+n+l>s)return null;e.x+=this.offsetX*this.dpr+i,e.y+=this.offsetY*this.dpr+a,this._zr.add(e);var u=[this.offsetX/this.width,this.offsetY/this.height],c=[[i/o+u[0],a/s+u[1]],[(i+t)/o+u[0],(a+n)/s+u[1]]];return c},_fitElement:function(e,t,n){var r=e.getBoundingRect(),i=t/r.width,a=n/r.height;e.x=-r.x*i,e.y=-r.y*a,e.scaleX=i,e.scaleY=a,e.update()}};function PA(e){e=e||{},e.width=e.width||512,e.height=e.height||512,e.devicePixelRatio=e.devicePixelRatio||1,e.gap=e.gap==null?2:e.gap;var t=document.createElement("canvas");t.width=e.width*e.devicePixelRatio,t.height=e.height*e.devicePixelRatio,this._canvas=t,this._texture=new Ye({image:t,flipY:!1});var n=this;this._zr=gO(t);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),n._texture.dirty(),n.onupdate&&n.onupdate()},this._dpr=e.devicePixelRatio,this._coords={},this.onupdate=e.onupdate,this._gap=e.gap,this._textureAtlasNodes=[new LA(this._zr,0,0,e.width,e.height,this._gap,this._dpr)],this._nodeWidth=e.width,this._nodeHeight=e.height,this._currentNodeIdx=0}PA.prototype={clear:function(){for(var e=0;e<this._textureAtlasNodes.length;e++)this._textureAtlasNodes[e].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var e=4096/this._dpr,t=this._textureAtlasNodes,n=t.length,r=n*this._nodeWidth%e,i=Math.floor(n*this._nodeWidth/e)*this._nodeHeight;if(!(i>=e)){var a=(r+this._nodeWidth)*this._dpr,o=(i+this._nodeHeight)*this._dpr;try{this._zr.resize({width:a,height:o})}catch{this._canvas.width=a,this._canvas.height=o}var s=new LA(this._zr,r,i,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(s),s}},add:function(e,t,n){if(this._coords[e.id])return this._coords[e.id];var r=this._getCurrentNode().add(e,t,n);if(!r){var i=this._expand();if(!i)return;r=i.add(e,t,n)}return this._coords[e.id]=r,r},getCoordsScale:function(){var e=this._dpr;return[this._nodeWidth/this._canvas.width*e,this._nodeHeight/this._canvas.height*e]},getCoords:function(e){return this._coords[e]},dispose:function(){this._zr.dispose()}};function Wf(){}Wf.prototype={constructor:Wf,setScene:function(e){this._scene=e,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(e){this._lightRoot=e,this.mainLight=new V.DirectionalLight({shadowBias:.005}),this.ambientLight=new V.AmbientLight,e.add(this.mainLight),e.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(e){var t=this.mainLight,n=this.ambientLight,r=e.getModel("light"),i=r.getModel("main"),a=r.getModel("ambient");t.intensity=i.get("intensity"),n.intensity=a.get("intensity"),t.color=V.parseColor(i.get("color")).slice(0,3),n.color=V.parseColor(a.get("color")).slice(0,3);var o=i.get("alpha")||0,s=i.get("beta")||0;t.position.setArray(V.directionFromAlphaBeta(o,s)),t.lookAt(V.Vector3.ZERO),t.castShadow=i.get("shadow"),t.shadowResolution=V.getShadowResolution(i.get("shadowQuality"))},updateAmbientCubemap:function(e,t,n){var r=t.getModel("light.ambientCubemap"),i=r.get("texture");if(i){this._cubemapLightsCache=this._cubemapLightsCache||{};var a=this._cubemapLightsCache[i];if(!a){var o=this;a=this._cubemapLightsCache[i]=V.createAmbientCubemap(r.option,e,n,function(){o._isSkyboxFromAmbientCubemap&&o._skybox.setEnvironmentMap(a.specular.cubemap),n.getZr().refresh()})}this._lightRoot.add(a.diffuse),this._lightRoot.add(a.specular),this._currentCubemapLights=a}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(e,t,n){var r=t.get("environment"),i=this;function a(){return i._skybox=i._skybox||new Pb,i._skybox}var o=a();if(r&&r!=="none")if(r==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var s=this._currentCubemapLights.specular.cubemap;o.setEnvironmentMap(s),this._scene&&o.attachScene(this._scene),o.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof r=="object"&&r.colorStops||typeof r=="string"&&Va(r)){this._isSkyboxFromAmbientCubemap=!1;var l=new V.Texture2D({anisotropic:8,flipY:!1});o.setEnvironmentMap(l);var u=l.image=document.createElement("canvas");u.width=u.height=16;var c=u.getContext("2d"),h=new nn({shape:{x:0,y:0,width:16,height:16},style:{fill:r}});SE(c,h),o.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var l=V.loadTexture(r,n,{anisotropic:8,flipY:!1});o.setEnvironmentMap(l),o.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var f=t.coordinateSystem;if(this._skybox)if(f&&f.viewGL&&r!=="auto"&&!(r.match&&r.match(/.hdr$/))){var d=f.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[d]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var Jd=ei.vec3,Pnt=cn.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new cn.Attribute("position","float",3,"POSITION"),normal:new cn.Attribute("normal","float",3,"NORMAL"),color:new cn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(e){var t=this.attributes,n=this.getQuadVertexCount()*e,r=this.getQuadTriangleCount()*e;this.vertexCount!==n&&(t.position.init(n),t.normal.init(n),t.color.init(n)),this.triangleCount!==r&&(this.indices=n>65535?new Uint32Array(r*3):new Uint16Array(r*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var e=Jd.create(),t=Jd.create(),n=Jd.create(),r=[0,3,1,3,2,1];return function(i,a){var o=this.attributes.position,s=this.attributes.normal,l=this.attributes.color;Jd.sub(e,i[1],i[0]),Jd.sub(t,i[2],i[1]),Jd.cross(n,e,t),Jd.normalize(n,n);for(var u=0;u<4;u++)o.set(this._vertexOffset+u,i[u]),l.set(this._vertexOffset+u,a),s.set(this._vertexOffset+u,n);for(var c=this._faceOffset*3,u=0;u<6;u++)this.indices[c+u]=r[u]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});te(Pnt.prototype,F1);var WN=an.firstNotNull,IPt={x:0,y:2,z:1};function LPt(e,t,n,r){var i=[0,0,0],a=r<0?n.getExtentMin():n.getExtentMax();i[IPt[n.dim]]=a,e.position.setArray(i),e.rotation.identity(),t.distance=-Math.abs(a),t.normal.set(0,0,0),n.dim==="x"?(e.rotation.rotateY(r*Math.PI/2),t.normal.x=-r):n.dim==="z"?(e.rotation.rotateX(-r*Math.PI/2),t.normal.y=-r):(r>0&&e.rotation.rotateY(Math.PI),t.normal.z=-r)}function VE(e,t,n){this.rootNode=new V.Node;var r=new V.Mesh({geometry:new cd({useNativeLine:!1}),material:t,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),i=new V.Mesh({geometry:new Pnt,material:n,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(i),this.rootNode.add(r),this.faceInfo=e,this.plane=new V.Plane,this.linesMesh=r,this.quadsMesh=i}VE.prototype.update=function(e,t,n){var r=e.coordinateSystem,i=[r.getAxis(this.faceInfo[0]),r.getAxis(this.faceInfo[1])],a=this.linesMesh.geometry,o=this.quadsMesh.geometry;a.convertToDynamicArray(!0),o.convertToDynamicArray(!0),this._updateSplitLines(a,i,e,n),this._udpateSplitAreas(o,i,e,n),a.convertToTypedArray(),o.convertToTypedArray();var s=r.getAxis(this.faceInfo[2]);LPt(this.rootNode,this.plane,s,this.faceInfo[3])};VE.prototype._updateSplitLines=function(e,t,n,r){var i=r.getDevicePixelRatio();t.forEach(function(a,o){var s=a.model,l=t[1-o].getExtent();if(!a.scale.isBlank()){var u=s.getModel("splitLine",n.getModel("splitLine"));if(u.get("show")){var c=u.getModel("lineStyle"),h=c.get("color"),f=WN(c.get("opacity"),1),d=WN(c.get("width"),1);h=ht(h)?h:[h];for(var p=a.getTicksCoords({tickModel:u}),v=0,g=0;g<p.length;g++){var m=p[g].coord,_=V.parseColor(h[v%h.length]);_[3]*=f;var y=[0,0,0],x=[0,0,0];y[o]=x[o]=m,y[1-o]=l[0],x[1-o]=l[1],e.addLine(y,x,_,d*i),v++}}}})};VE.prototype._udpateSplitAreas=function(e,t,n,r){t.forEach(function(i,a){var o=i.model,s=t[1-a].getExtent();if(!i.scale.isBlank()){var l=o.getModel("splitArea",n.getModel("splitArea"));if(l.get("show")){var u=l.getModel("areaStyle"),c=u.get("color"),h=WN(u.get("opacity"),1);c=ht(c)?c:[c];for(var f=i.getTicksCoords({tickModel:l,clamp:!0}),d=0,p=[0,0,0],v=[0,0,0],g=0;g<f.length;g++){var m=f[g].coord,_=[0,0,0],y=[0,0,0];if(_[a]=y[a]=m,_[1-a]=s[0],y[1-a]=s[1],g===0){p=_,v=y;continue}var x=V.parseColor(c[d%c.length]);x[3]*=h,e.addQuad([p,_,y,v],x),p=_,v=y,d++}}}})};var G$=[0,1,2,0,2,3],Rnt=cn.extend(function(){return{attributes:{position:new cn.Attribute("position","float",3,"POSITION"),texcoord:new cn.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new cn.Attribute("offset","float",2),color:new cn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(e){this._spriteCount=e;var t=e*4,n=e*2;this.vertexCount!==t&&(this.attributes.position.init(t),this.attributes.offset.init(t),this.attributes.color.init(t)),this.triangleCount!==n&&(this.indices=t>65535?new Uint32Array(n*3):new Uint16Array(n*3))},setSpriteAlign:function(e,t,n,r,i){n==null&&(n="left"),r==null&&(r="top");var a,o,s,l;switch(i=i||0,n){case"left":a=i,s=t[0]+i;break;case"center":case"middle":a=-t[0]/2,s=t[0]/2;break;case"right":a=-t[0]-i,s=-i;break}switch(r){case"bottom":o=i,l=t[1]+i;break;case"middle":o=-t[1]/2,l=t[1]/2;break;case"top":o=-t[1]-i,l=-i;break}var u=e*4,c=this.attributes.offset;c.set(u,[a,l]),c.set(u+1,[s,l]),c.set(u+2,[s,o]),c.set(u+3,[a,o])},addSprite:function(e,t,n,r,i,a){var o=this._vertexOffset;this.setSprite(this._vertexOffset/4,e,t,n,r,i,a);for(var s=0;s<G$.length;s++)this.indices[this._faceOffset*3+s]=G$[s]+o;return this._faceOffset+=2,this._vertexOffset+=4,o/4},setSprite:function(e,t,n,r,i,a,o){for(var s=e*4,l=this.attributes,u=0;u<4;u++)l.position.set(s+u,t);var c=l.texcoord;c.set(s,[r[0][0],r[0][1]]),c.set(s+1,[r[1][0],r[0][1]]),c.set(s+2,[r[1][0],r[1][1]]),c.set(s+3,[r[0][0],r[1][1]]),this.setSpriteAlign(e,n,i,a,o)}});te(Rnt.prototype,F1);const PPt=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;V.Shader.import(PPt);const GF=V.Mesh.extend(function(){var e=new Rnt({dynamic:!0}),t=new V.Material({shader:V.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:e,material:t,culling:!1,castShadow:!1,ignorePicking:!0}});var Qd=an.firstNotNull,tp={x:0,y:2,z:1};function HF(e,t){var n=new V.Mesh({geometry:new cd({useNativeLine:!1}),material:t,castShadow:!1,ignorePicking:!0,renderOrder:2}),r=new GF;r.material.depthMask=!1;var i=new V.Node;i.add(n),i.add(r),this.rootNode=i,this.dim=e,this.linesMesh=n,this.labelsMesh=r,this.axisLineCoords=null,this.labelElements=[]}var OL={x:"y",y:"x",z:"y"};HF.prototype.update=function(e,t,n){var r=e.coordinateSystem,i=r.getAxis(this.dim),a=this.linesMesh.geometry,o=this.labelsMesh.geometry;a.convertToDynamicArray(!0),o.convertToDynamicArray(!0);var s=i.model,l=i.getExtent(),C=n.getDevicePixelRatio(),u=s.getModel("axisLine",e.getModel("axisLine")),c=s.getModel("axisTick",e.getModel("axisTick")),h=s.getModel("axisLabel",e.getModel("axisLabel")),f=u.get("lineStyle.color");if(u.get("show")){var d=u.getModel("lineStyle"),p=[0,0,0],v=[0,0,0],g=tp[i.dim];p[g]=l[0],v[g]=l[1],this.axisLineCoords=[p,v];var m=V.parseColor(f),_=Qd(d.get("width"),1),y=Qd(d.get("opacity"),1);m[3]*=y,a.addLine(p,v,m,_*C)}if(c.get("show")){var x=c.getModel("lineStyle"),S=V.parseColor(Qd(x.get("color"),f)),_=Qd(x.get("width"),1);S[3]*=Qd(x.get("opacity"),1);for(var b=i.getTicksCoords(),w=c.get("length"),A=0;A<b.length;A++){var T=b[A].coord,p=[0,0,0],v=[0,0,0],g=tp[i.dim],M=tp[OL[i.dim]];p[g]=v[g]=T,v[M]=w,a.addLine(p,v,S,_*C)}}this.labelElements=[];var C=n.getDevicePixelRatio();if(h.get("show"))for(var b=i.getTicksCoords(),E=s.get("data"),D=h.get("margin"),I=i.getViewLabels(),A=0;A<I.length;A++){var L=I[A].tickValue,P=I[A].formattedLabel,B=I[A].rawLabel,T=i.dataToCoord(L),N=[0,0,0],g=tp[i.dim],M=tp[OL[i.dim]];N[g]=N[g]=T,N[M]=D;var k=h;E&&E[L]&&E[L].textStyle&&(k=new pn(E[L].textStyle,h,s.ecModel));var U=Qd(k.get("color"),f),Z=new Qe({style:Hn(k,{text:P,fill:typeof U=="function"?U(i.type==="category"?B:i.type==="value"?L+"":L,A):U,verticalAlign:"top",align:"left"})}),nt=t.add(Z),ct=Z.getBoundingRect();o.addSprite(N,[ct.width*C,ct.height*C],nt),this.labelElements.push(Z)}if(s.get("name")){var K=s.getModel("nameTextStyle"),N=[0,0,0],g=tp[i.dim],M=tp[OL[i.dim]],$=Qd(K.get("color"),f),ot=K.get("borderColor"),_=K.get("borderWidth");N[g]=N[g]=(l[0]+l[1])/2,N[M]=s.get("nameGap");var Z=new Qe({style:Hn(K,{text:s.get("name"),fill:$,stroke:ot,lineWidth:_})}),nt=t.add(Z),ct=Z.getBoundingRect();o.addSprite(N,[ct.width*C,ct.height*C],nt),Z.__idx=this.labelElements.length,this.nameLabelElement=Z}this.labelsMesh.material.set("textureAtlas",t.getTexture()),this.labelsMesh.material.set("uvScale",t.getCoordsScale()),a.convertToTypedArray(),o.convertToTypedArray()};HF.prototype.setSpriteAlign=function(e,t,n){for(var r=n.getDevicePixelRatio(),i=this.labelsMesh.geometry,a=0;a<this.labelElements.length;a++){var o=this.labelElements[a],s=o.getBoundingRect();i.setSpriteAlign(a,[s.width*r,s.height*r],e,t)}var l=this.nameLabelElement;if(l){var s=l.getBoundingRect();i.setSpriteAlign(l.__idx,[s.width*r,s.height*r],e,t),i.dirty()}this.textAlign=e,this.textVerticalAlign=t};const GE=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`;var H$=an.firstNotNull;V.Shader.import(GE);var ep={x:0,y:2,z:1};const RPt=Zn.extend({type:"grid3D",__ecgl__:!0,init:function(e,t){var n=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],r=["x","y","z"],i=new V.Material({shader:V.createShader("ecgl.color"),depthMask:!1,transparent:!0}),a=new V.Material({shader:V.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});i.define("fragment","DOUBLE_SIDED"),i.define("both","VERTEX_COLOR"),this.groupGL=new V.Node,this._control=new k1({zr:t.getZr()}),this._control.init(),this._faces=n.map(function(s){var l=new VE(s,a,i);return this.groupGL.add(l.rootNode),l},this),this._axes=r.map(function(s){var l=new HF(s,a);return this.groupGL.add(l.rootNode),l},this);var o=t.getDevicePixelRatio();this._axisLabelSurface=new PA({width:256,height:256,devicePixelRatio:o}),this._axisLabelSurface.onupdate=function(){t.getZr().refresh()},this._axisPointerLineMesh=new V.Mesh({geometry:new cd({useNativeLine:!1}),material:a,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new PA({width:128,height:128,devicePixelRatio:o}),this._axisPointerLabelsMesh=new GF({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new V.Node,this._sceneHelper=new Wf,this._sceneHelper.initLight(this._lightRoot)},render:function(e,t,n){this._model=e,this._api=n;var r=e.coordinateSystem;r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var a=e.getModel("viewControl");i.setFromViewControlModel(a,0),this._axisLabelSurface.clear(),i.off("update"),e.get("show")&&(this._faces.forEach(function(o){o.update(e,t,n)},this),this._axes.forEach(function(o){o.update(e,this._axisLabelSurface,n)},this)),i.on("update",this._onCameraChange.bind(this,e,n),this),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),n),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._initMouseHandler(e)},afterRender:function(e,t,n,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n)},showAxisPointer:function(e,t,n,r){this._doShowAxisPointer(),this._updateAxisPointer(r.value)},hideAxisPointer:function(e,t,n,r){this._doHideAxisPointer()},_initMouseHandler:function(e){var t=e.coordinateSystem,n=t.viewGL;e.get("show")&&e.get("axisPointer.show")?n.on("mousemove",this._updateAxisPointerOnMousePosition,this):n.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(e){if(!e.target){for(var t=this._model,n=t.coordinateSystem,r=n.viewGL,i=r.castRay(e.offsetX,e.offsetY,new V.Ray),a,o=0;o<this._faces.length;o++){var s=this._faces[o];if(!s.rootNode.invisible){s.plane.normal.dot(r.camera.worldTransform.z)<0&&s.plane.normal.negate();var l=i.intersectPlane(s.plane);if(l){var u=n.getAxis(s.faceInfo[0]),c=n.getAxis(s.faceInfo[1]),h=ep[s.faceInfo[0]],f=ep[s.faceInfo[1]];u.contain(l.array[h])&&c.contain(l.array[f])&&(a=l)}}}if(a){var d=n.pointToData(a.array,[],!0);this._updateAxisPointer(d),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(e,t){e.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var n=this._control;t.dispatchAction({type:"grid3DChangeCamera",alpha:n.getAlpha(),beta:n.getBeta(),distance:n.getDistance(),center:n.getCenter(),from:this.uid,grid3DId:e.id})},_updateFaceVisibility:function(){var e=this._control.getCamera(),t=new V.Vector3;e.update();for(var n=0;n<this._faces.length/2;n++){for(var r=[],i=0;i<2;i++){var a=this._faces[n*2+i];a.rootNode.getWorldPosition(t),t.transformMat4(e.viewMatrix),r[i]=t.z}var o=r[0]>r[1]?0:1,s=this._faces[n*2+o],l=this._faces[n*2+1-o];s.rootNode.invisible=!0,l.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var e=this._model.coordinateSystem,t=e.getAxis("x"),n=e.getAxis("y"),r=e.getAxis("z"),i=r.getExtentMax(),a=r.getExtentMin(),o=t.getExtentMin(),s=t.getExtentMax(),l=n.getExtentMax(),u=n.getExtentMin(),c=this._axes[0].rootNode,h=this._axes[1].rootNode,f=this._axes[2].rootNode,d=this._faces,p=d[4].rootNode.invisible?u:l,v=d[2].rootNode.invisible?i:a,g=d[0].rootNode.invisible?o:s,m=d[2].rootNode.invisible?i:a,_=d[0].rootNode.invisible?s:o,y=d[4].rootNode.invisible?u:l;c.rotation.identity(),h.rotation.identity(),f.rotation.identity(),d[4].rootNode.invisible&&(this._axes[0].flipped=!0,c.rotation.rotateX(Math.PI)),d[0].rootNode.invisible&&(this._axes[1].flipped=!0,h.rotation.rotateZ(Math.PI)),d[4].rootNode.invisible&&(this._axes[2].flipped=!0,f.rotation.rotateY(Math.PI)),c.position.set(0,v,p),h.position.set(g,m,0),f.position.set(_,0,y),c.update(),h.update(),f.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var e=this._control.getCamera(),t=[new V.Vector4,new V.Vector4],n=new V.Vector4;this.groupGL.getWorldPosition(n),n.w=1,n.transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),n.x/=n.w,n.y/=n.w,this._axes.forEach(function(r){var i=r.axisLineCoords;r.labelsMesh.geometry;for(var a=0;a<t.length;a++)t[a].setArray(i[a]),t[a].w=1,t[a].transformMat4(r.rootNode.worldTransform).transformMat4(e.viewMatrix).transformMat4(e.projectionMatrix),t[a].x/=t[a].w,t[a].y/=t[a].w;var o=t[1].x-t[0].x,s=t[1].y-t[0].y,l=(t[1].x+t[0].x)/2,u=(t[1].y+t[0].y)/2,c,h;Math.abs(s/o)<.5?(c="center",h=u>n.y?"bottom":"top"):(h="middle",c=l>n.x?"left":"right"),r.setSpriteAlign(c,h,this._api)},this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(e){var t=this._model.coordinateSystem,n=t.dataToPoint(e),r=this._axisPointerLineMesh,i=r.geometry,a=this._model.getModel("axisPointer"),o=this._api.getDevicePixelRatio();i.convertToDynamicArray(!0);function s(A){return an.firstNotNull(A.model.get("axisPointer.show"),a.get("show"))}function l(A){var T=A.model.getModel("axisPointer",a),M=T.getModel("lineStyle"),C=V.parseColor(M.get("color")),E=H$(M.get("width"),1),D=H$(M.get("opacity"),1);return C[3]*=D,{color:C,lineWidth:E}}for(var u=0;u<this._faces.length;u++){var c=this._faces[u];if(!c.rootNode.invisible){for(var h=c.faceInfo,f=h[3]<0?t.getAxis(h[2]).getExtentMin():t.getAxis(h[2]).getExtentMax(),d=ep[h[2]],p=0;p<2;p++){var v=h[p],g=h[1-p],m=t.getAxis(v),_=t.getAxis(g);if(s(m)){var y=[0,0,0],x=[0,0,0],S=ep[v],b=ep[g];y[S]=x[S]=n[S],y[d]=x[d]=f,y[b]=_.getExtentMin(),x[b]=_.getExtentMax();var w=l(m);i.addLine(y,x,w.color,w.lineWidth*o)}}if(s(t.getAxis(h[2]))){var y=n.slice(),x=n.slice();x[d]=f;var w=l(t.getAxis(h[2]));i.addLine(y,x,w.color,w.lineWidth*o)}}}i.convertToTypedArray(),this._updateAxisPointerLabelsMesh(e),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(e){var t=this._model,n=this._axisPointerLabelsMesh,r=this._axisPointerLabelsSurface,i=t.coordinateSystem,a=t.getModel("axisPointer");n.geometry.convertToDynamicArray(!0),r.clear();var o={x:"y",y:"x",z:"y"};this._axes.forEach(function(s,l){var u=i.getAxis(s.dim),c=u.model,h=c.getModel("axisPointer",a),f=h.getModel("label"),d=h.get("lineStyle.color");if(!(!f.get("show")||!h.get("show"))){var p=e[l],v=f.get("formatter"),g=u.scale.getLabel({value:p});if(v!=null)g=v(g,e);else if(u.scale.type==="interval"||u.scale.type==="log"){var m=OB(u.scale.getTicks()[0]);g=p.toFixed(m+2)}var _=f.get("color"),y=new Qe({style:Hn(f,{text:g,fill:_||d,align:"left",verticalAlign:"top"})}),x=r.add(y),S=y.getBoundingRect(),b=this._api.getDevicePixelRatio(),w=s.rootNode.position.toArray(),A=ep[o[s.dim]];w[A]+=(s.flipped?-1:1)*f.get("margin"),w[ep[s.dim]]=u.dataToCoord(e[l]),n.geometry.addSprite(w,[S.width*b,S.height*b],x,s.textAlign,s.textVerticalAlign)}},this),r.getZr().refreshImmediately(),n.material.set("uvScale",r.getCoordsScale()),n.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}});function Rb(e){Vk.call(this,e),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Rb.prototype={constructor:Rb,model:null,containPoint:function(e){return this.getAxis("x").contain(e[0])&&this.getAxis("y").contain(e[2])&&this.getAxis("z").contain(e[1])},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])&&this.getAxis("z").containData(e[2])},dataToPoint:function(e,t,n){return t=t||[],t[0]=this.getAxis("x").dataToCoord(e[0],n),t[2]=this.getAxis("y").dataToCoord(e[1],n),t[1]=this.getAxis("z").dataToCoord(e[2],n),t},pointToData:function(e,t,n){return t=t||[],t[0]=this.getAxis("x").coordToData(e[0],n),t[1]=this.getAxis("y").coordToData(e[2],n),t[2]=this.getAxis("z").coordToData(e[1],n),t}};AB(Rb,Vk);function RA(e,t,n){Qa.call(this,e,t,n)}RA.prototype={constructor:RA,getExtentMin:function(){var e=this._extent;return Math.min(e[0],e[1])},getExtentMax:function(){var e=this._extent;return Math.max(e[0],e[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}};AB(RA,Qa);var OA=function(){this._pool={},this._allocatedTextures=[]};OA.prototype={constructor:OA,get:function(e){var t=W$(e);this._pool.hasOwnProperty(t)||(this._pool[t]=[]);var n=this._pool[t];if(!n.length){var r=new Ye(e);return this._allocatedTextures.push(r),r}return n.pop()},put:function(e){var t=W$(e);this._pool.hasOwnProperty(t)||(this._pool[t]=[]);var n=this._pool[t];n.push(e)},clear:function(e){for(var t=0;t<this._allocatedTextures.length;t++)this._allocatedTextures[t].dispose(e);this._pool={},this._allocatedTextures=[]}};var Ont={width:512,height:512,type:wt.UNSIGNED_BYTE,format:wt.RGBA,wrapS:wt.CLAMP_TO_EDGE,wrapT:wt.CLAMP_TO_EDGE,minFilter:wt.LINEAR_MIPMAP_LINEAR,magFilter:wt.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},NL=Object.keys(Ont);function W$(e){Kr.defaultsWithPropList(e,Ont,NL),OPt(e);for(var t="",n=0;n<NL.length;n++){var r=NL[n],i=e[r].toString();t+=i}return t}function OPt(e){var t=NPt(e.width,e.height);e.format===wt.DEPTH_COMPONENT&&(e.useMipmap=!1),(!t||!e.useMipmap)&&(e.minFilter==wt.NEAREST_MIPMAP_NEAREST||e.minFilter==wt.NEAREST_MIPMAP_LINEAR?e.minFilter=wt.NEAREST:(e.minFilter==wt.LINEAR_MIPMAP_LINEAR||e.minFilter==wt.LINEAR_MIPMAP_NEAREST)&&(e.minFilter=wt.LINEAR)),t||(e.wrapS=wt.CLAMP_TO_EDGE,e.wrapT=wt.CLAMP_TO_EDGE)}function NPt(e,t){return(e&e-1)===0&&(t&t-1)===0}const BPt=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`;var Hh=["px","nx","py","ny","pz","nz"];kt.import(BPt);function BL(e,t,n){if(n==="alphaMap")return e.material.get("diffuseMap");if(n==="alphaCutoff"){if(e.material.isDefined("fragment","ALPHA_TEST")&&e.material.get("diffuseMap")){var r=e.material.get("alphaCutoff");return r||0}return 0}else return n==="uvRepeat"?e.material.get("uvRepeat"):n==="uvOffset"?e.material.get("uvOffset"):t.get(n)}function $$(e,t){var n=e.material,r=t.material;return n.get("diffuseMap")!==r.get("diffuseMap")||(n.get("alphaCutoff")||0)!==(r.get("alphaCutoff")||0)}var lu=ta.extend(function(){return{softShadow:lu.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Qr,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new OA}},function(){this._gaussianPassH=new oi({fragment:kt.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new oi({fragment:kt.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new oi({fragment:kt.source("clay.sm.debug_depth")})},{render:function(e,t,n,r){n||(n=t.getMainCamera()),this.trigger("beforerender",this,e,t,n),this._renderShadowPass(e,t,n,r),this.trigger("afterrender",this,e,t,n)},renderDebug:function(e,t){e.saveClear();var n=e.viewport,r=0,i=0,a=t||n.width/4,o=a;this.softShadow===lu.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var s in this._textures){var l=this._textures[s];e.setViewport(r,i,a*l.width/l.height,o),this._outputDepthPass.setUniform("depthMap",l),this._outputDepthPass.render(e),r+=a*l.width/l.height}e.setViewport(n),e.restoreClear()},_updateReceivers:function(e,t){if(t.receiveShadow?(this._receivers.push(t),t.material.set("shadowEnabled",1),t.material.set("pcfKernel",this.kernelPCF)):t.material.set("shadowEnabled",0),this.softShadow===lu.VSM)t.material.define("fragment","USE_VSM"),t.material.undefine("fragment","PCF_KERNEL_SIZE");else{t.material.undefine("fragment","USE_VSM");var n=this.kernelPCF;n&&n.length?t.material.define("fragment","PCF_KERNEL_SIZE",n.length/2):t.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(e,t){var n=this;t.traverse(function(a){a.isRenderable()&&n._updateReceivers(e,a)});for(var r=0;r<t.lights.length;r++){var i=t.lights[r];i.castShadow&&!i.invisible&&this._lightsCastShadow.push(i)}},_renderShadowPass:function(e,t,n,r){for(var i in this._shadowMapNumber)this._shadowMapNumber[i]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var a=e.gl;if(r||t.update(),n&&n.update(),t.updateLights(),this._update(e,t),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,a.enable(a.DEPTH_TEST),a.depthMask(!0),a.disable(a.BLEND),a.clearColor(1,1,1,1);for(var o=[],s=[],l=[],u=[],c=[],h=[],f,d=0;d<this._lightsCastShadow.length;d++){var p=this._lightsCastShadow[d];if(p.type==="DIRECTIONAL_LIGHT"){if(f){console.warn("Only one direectional light supported with shadow cascade");continue}if(p.shadowCascade>4){console.warn("Support at most 4 cascade");continue}p.shadowCascade>1&&(f=p),this.renderDirectionalLightShadow(e,t,n,p,c,u,l)}else p.type==="SPOT_LIGHT"?this.renderSpotLightShadow(e,t,p,s,o):p.type==="POINT_LIGHT"&&this.renderPointLightShadow(e,t,p,h);this._shadowMapNumber[p.type]++}for(var v in this._shadowMapNumber)for(var g=this._shadowMapNumber[v],m=v+"_SHADOWMAP_COUNT",d=0;d<this._receivers.length;d++){var _=this._receivers[d],y=_.material;y.fragmentDefines[m]!==g&&(g>0?y.define("fragment",m,g):y.isDefined("fragment",m)&&y.undefine("fragment",m))}for(var d=0;d<this._receivers.length;d++){var _=this._receivers[d],y=_.material;f?y.define("fragment","SHADOW_CASCADE",f.shadowCascade):y.undefine("fragment","SHADOW_CASCADE")}var x=t.shadowUniforms;function S(M){return M.height}if(l.length>0){var b=l.map(S);if(x.directionalLightShadowMaps={value:l,type:"tv"},x.directionalLightMatrices={value:u,type:"m4v"},x.directionalLightShadowMapSizes={value:b,type:"1fv"},f){var w=c.slice(),A=c.slice();w.pop(),A.shift(),w.reverse(),A.reverse(),u.reverse(),x.shadowCascadeClipsNear={value:w,type:"1fv"},x.shadowCascadeClipsFar={value:A,type:"1fv"}}}if(o.length>0){var T=o.map(S),x=t.shadowUniforms;x.spotLightShadowMaps={value:o,type:"tv"},x.spotLightMatrices={value:s,type:"m4v"},x.spotLightShadowMapSizes={value:T,type:"1fv"}}h.length>0&&(x.pointLightShadowMaps={value:h,type:"tv"})},renderDirectionalLightShadow:function(){var e=new BE,t=new Ht,n=new Ji,r=new Ht,i=new Ht,a=new Ht,o=new Ht;return function(s,l,u,c,h,f,d){var p=this._getDepthMaterial(c),v={getMaterial:function(ct){return ct.shadowDepthMaterial||p},isMaterialChanged:$$,getUniform:BL,ifRender:function(ct){return ct.castShadow},sortCompare:Fs.opaqueSortCompare};if(!l.viewBoundingBoxLastFrame.isFinite()){var g=l.getBoundingBox();l.viewBoundingBoxLastFrame.copy(g).applyTransform(u.viewMatrix)}var m=Math.min(-l.viewBoundingBoxLastFrame.min.z,u.far),_=Math.max(-l.viewBoundingBoxLastFrame.max.z,u.near),y=this._getDirectionalLightCamera(c,l,u),x=a.array;o.copy(y.projectionMatrix),Mt.invert(i.array,y.worldTransform.array),Mt.multiply(i.array,i.array,u.worldTransform.array),Mt.multiply(x,o.array,i.array);for(var S=[],b=u instanceof wi,w=(u.near+u.far)/(u.near-u.far),A=2*u.near*u.far/(u.near-u.far),T=0;T<=c.shadowCascade;T++){var M=_*Math.pow(m/_,T/c.shadowCascade),C=_+(m-_)*T/c.shadowCascade,E=M*c.cascadeSplitLogFactor+C*(1-c.cascadeSplitLogFactor);S.push(E),h.push(-(-E*w+A)/-E)}var D=this._getTexture(c,c.shadowCascade);d.push(D);var I=s.viewport,L=s.gl;this._frameBuffer.attach(D),this._frameBuffer.bind(s),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT);for(var T=0;T<c.shadowCascade;T++){var P=S[T],B=S[T+1];b?Mt.perspective(t.array,u.fov/180*Math.PI,u.aspect,P,B):Mt.ortho(t.array,u.left,u.right,u.bottom,u.top,P,B),e.setFromProjection(t),e.getTransformedBoundingBox(n,i),n.applyProjection(o);var N=n.min.array,k=n.max.array;N[0]=Math.max(N[0],-1),N[1]=Math.max(N[1],-1),k[0]=Math.min(k[0],1),k[1]=Math.min(k[1],1),r.ortho(N[0],k[0],N[1],k[1],1,-1),y.projectionMatrix.multiplyLeft(r);var U=c.shadowResolution||512;s.setViewport((c.shadowCascade-T-1)*U,0,U,U,1);var Z=l.updateRenderList(y);s.renderPass(Z.opaque,y,v),this.softShadow===lu.VSM&&this._gaussianFilter(s,D,D.width);var nt=new Ht;nt.copy(y.viewMatrix).multiplyLeft(y.projectionMatrix),f.push(nt.array),y.projectionMatrix.copy(o)}this._frameBuffer.unbind(s),s.setViewport(I)}}(),renderSpotLightShadow:function(e,t,n,r,i){var a=this._getTexture(n),o=this._getSpotLightCamera(n),s=e.gl;this._frameBuffer.attach(a),this._frameBuffer.bind(e),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var l=this._getDepthMaterial(n),u={getMaterial:function(f){return f.shadowDepthMaterial||l},isMaterialChanged:$$,getUniform:BL,ifRender:function(f){return f.castShadow},sortCompare:Fs.opaqueSortCompare},c=t.updateRenderList(o);e.renderPass(c.opaque,o,u),this._frameBuffer.unbind(e),this.softShadow===lu.VSM&&this._gaussianFilter(e,a,a.width);var h=new Ht;h.copy(o.worldTransform).invert().multiplyLeft(o.projectionMatrix),i.push(a),r.push(h.array)},renderPointLightShadow:function(e,t,n,r){var i=this._getTexture(n),a=e.gl;r.push(i);var o=this._getDepthMaterial(n),s={getMaterial:function(_){return _.shadowDepthMaterial||o},getUniform:BL,sortCompare:Fs.opaqueSortCompare},l={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},u=new Ji,c=n.getWorldPosition().array,h=new Ji,f=n.range;h.min.setArray(c),h.max.setArray(c);var d=new gt(f,f,f);h.max.add(d),h.min.sub(d);var p={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};t.traverse(function(_){if(_.isRenderable()&&_.castShadow){var y=_.geometry;if(!y.boundingBox){for(var x=0;x<Hh.length;x++)l[Hh[x]].push(_);return}if(u.transformFrom(y.boundingBox,_.worldTransform),!u.intersectBoundingBox(h))return;u.updateVertices();for(var x=0;x<Hh.length;x++)p[Hh[x]]=!1;for(var x=0;x<8;x++){var S=u.vertices[x],b=S[0]-c[0],w=S[1]-c[1],A=S[2]-c[2],T=Math.abs(b),M=Math.abs(w),C=Math.abs(A);T>M?T>C?p[b>0?"px":"nx"]=!0:p[A>0?"pz":"nz"]=!0:M>C?p[w>0?"py":"ny"]=!0:p[A>0?"pz":"nz"]=!0}for(var x=0;x<Hh.length;x++)p[Hh[x]]&&l[Hh[x]].push(_)}});for(var v=0;v<6;v++){var g=Hh[v],m=this._getPointLightCamera(n,g);this._frameBuffer.attach(i,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+v),this._frameBuffer.bind(e),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),e.renderPass(l[g],m,s)}this._frameBuffer.unbind(e)},_getDepthMaterial:function(e){var t=this._lightMaterials[e.__uid__],n=e.type==="POINT_LIGHT";if(!t){var r=n?"clay.sm.distance.":"clay.sm.depth.";t=new ks({precision:this.precision,shader:new kt(kt.source(r+"vertex"),kt.source(r+"fragment"))}),this._lightMaterials[e.__uid__]=t}return e.shadowSlopeScale!=null&&t.setUniform("slopeScale",e.shadowSlopeScale),e.shadowBias!=null&&t.setUniform("bias",e.shadowBias),this.softShadow===lu.VSM?t.define("fragment","USE_VSM"):t.undefine("fragment","USE_VSM"),n&&(t.set("lightPosition",e.getWorldPosition().array),t.set("range",e.range)),t},_gaussianFilter:function(e,t,n){var r={width:n,height:n,type:Nt.FLOAT},i=this._texturePool.get(r);this._frameBuffer.attach(i),this._frameBuffer.bind(e),this._gaussianPassH.setUniform("texture",t),this._gaussianPassH.setUniform("textureWidth",n),this._gaussianPassH.render(e),this._frameBuffer.attach(t),this._gaussianPassV.setUniform("texture",i),this._gaussianPassV.setUniform("textureHeight",n),this._gaussianPassV.render(e),this._frameBuffer.unbind(e),this._texturePool.put(i)},_getTexture:function(e,t){var n=e.__uid__,r=this._textures[n],i=e.shadowResolution||512;return t=t||1,r||(e.type==="POINT_LIGHT"?r=new _v:r=new Ye,r.width=i*t,r.height=i,this.softShadow===lu.VSM?(r.type=Nt.FLOAT,r.anisotropic=4):(r.minFilter=wt.NEAREST,r.magFilter=wt.NEAREST,r.useMipmap=!1),this._textures[n]=r),r},_getPointLightCamera:function(e,t){this._lightCameras.point||(this._lightCameras.point={px:new wi,nx:new wi,py:new wi,ny:new wi,pz:new wi,nz:new wi});var n=this._lightCameras.point[t];switch(n.far=e.range,n.fov=90,n.position.set(0,0,0),t){case"px":n.lookAt(gt.POSITIVE_X,gt.NEGATIVE_Y);break;case"nx":n.lookAt(gt.NEGATIVE_X,gt.NEGATIVE_Y);break;case"py":n.lookAt(gt.POSITIVE_Y,gt.POSITIVE_Z);break;case"ny":n.lookAt(gt.NEGATIVE_Y,gt.NEGATIVE_Z);break;case"pz":n.lookAt(gt.POSITIVE_Z,gt.NEGATIVE_Y);break;case"nz":n.lookAt(gt.NEGATIVE_Z,gt.NEGATIVE_Y);break}return e.getWorldPosition(n.position),n.update(),n},_getDirectionalLightCamera:function(){var e=new Ht,t=new Ji,n=new Ji;return function(r,i,a){this._lightCameras.directional||(this._lightCameras.directional=new xy);var o=this._lightCameras.directional;t.copy(i.viewBoundingBoxLastFrame),t.intersection(a.frustum.boundingBox),o.position.copy(t.min).add(t.max).scale(.5).transformMat4(a.worldTransform),o.rotation.copy(r.rotation),o.scale.copy(r.scale),o.updateWorldTransform(),Ht.invert(e,o.worldTransform),Ht.multiply(e,e,a.worldTransform),n.copy(t).applyTransform(e);var s=n.min.array,l=n.max.array;return o.position.set((s[0]+l[0])/2,(s[1]+l[1])/2,l[2]).transformMat4(o.worldTransform),o.near=0,o.far=-s[2]+l[2],isNaN(this.lightFrustumBias)?o.far*=4:o.far+=this.lightFrustumBias,o.left=s[0],o.right=l[0],o.top=l[1],o.bottom=s[1],o.update(!0),o}}(),_getSpotLightCamera:function(e){this._lightCameras.spot||(this._lightCameras.spot=new wi);var t=this._lightCameras.spot;return t.fov=e.penumbraAngle*2,t.far=e.range,t.worldTransform.copy(e.worldTransform),t.updateProjectionMatrix(),Mt.invert(t.viewMatrix.array,t.worldTransform.array),t},dispose:function(e){var t=e.gl||e;this._frameBuffer&&this._frameBuffer.dispose(t);for(var n in this._textures)this._textures[n].dispose(t);this._texturePool.clear(e.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var r=0;r<this._receivers.length;r++){var i=this._receivers[r];if(i.material){var a=i.material;a.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),a.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),a.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),a.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});lu.VSM=1;lu.PCF=2;var Ob=ta.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(e,t){var n=this.outputs[e],r=n.parameters,i=n._parametersCopy;if(i||(i=n._parametersCopy={}),r)for(var a in r)a!=="width"&&a!=="height"&&(i[a]=r[a]);var o,s;return r.width instanceof Function?o=r.width.call(this,t):o=r.width,r.height instanceof Function?s=r.height.call(this,t):s=r.height,(i.width!==o||i.height!==s)&&this._outputTextures[e]&&this._outputTextures[e].dispose(t.gl),i.width=o,i.height=s,i},setParameter:function(e,t){},getParameter:function(e){},setParameters:function(e){for(var t in e)this.setParameter(t,e[t])},render:function(){},getOutput:function(e,t){if(t==null)return t=e,this._outputTextures[t];var n=this.outputs[t];if(n)return this._rendered?n.outputLastFrame?this._prevOutputTextures[t]:this._outputTextures[t]:this._rendering?(this._prevOutputTextures[t]||(this._prevOutputTextures[t]=this._compositor.allocateTexture(n.parameters||{})),this._prevOutputTextures[t]):(this.render(e),this._outputTextures[t])},removeReference:function(e){if(this._outputReferences[e]--,this._outputReferences[e]===0){var t=this.outputs[e];t.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}},link:function(e,t,n){this.inputLinks[e]={node:t,pin:n},t.outputLinks[n]||(t.outputLinks[n]=[]),t.outputLinks[n].push({node:this,pin:e}),this.pass.material.enableTexture(e)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(e){if(!this._rendering){this._rendering=!0;for(var t in this.inputLinks){var n=this.inputLinks[t];n.node.updateReference(n.pin)}this._rendering=!1}e&&this._outputReferences[e]++},beforeFrame:function(){this._rendered=!1;for(var e in this.outputLinks)this._outputReferences[e]=0},afterFrame:function(){for(var e in this.outputLinks)if(this._outputReferences[e]>0){var t=this.outputs[e];t.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}}}),X$=ta.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(e){this.nodes.indexOf(e)>=0||(this.nodes.push(e),this._dirty=!0)},removeNode:function(e){typeof e=="string"&&(e=this.getNodeByName(e));var t=this.nodes.indexOf(e);t>=0&&(this.nodes.splice(t,1),this._dirty=!0)},getNodeByName:function(e){for(var t=0;t<this.nodes.length;t++)if(this.nodes[t].name===e)return this.nodes[t]},update:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];if(t.inputs){for(var n in t.inputs)if(t.inputs[n]){if(t.pass&&!t.pass.material.isUniformEnabled(n)){console.warn("Pin "+t.name+"."+n+" not used.");continue}var r=t.inputs[n],i=this.findPin(r);i?t.link(n,i.node,i.pin):console.warn(typeof r=="string"?"Node "+r+" not exist":"Pin of "+r.node+"."+r.pin+" not exist")}}}},findPin:function(e){var t;if((typeof e=="string"||e instanceof Ob)&&(e={node:e}),typeof e.node=="string")for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n];r.name===e.node&&(t=r)}else t=e.node;if(t){var i=e.pin;if(i||t.outputs&&(i=Object.keys(t.outputs)[0]),t.outputs[i])return{node:t,pin:i}}}}),kPt=X$.extend(function(){return{_outputs:[],_texturePool:new OA,_frameBuffer:new Qr({depthBuffer:!1})}},{addNode:function(e){X$.prototype.addNode.call(this,e),e._compositor=this},render:function(e,t){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var n=0;n<this.nodes.length;n++)this.nodes[n].outputs||this._outputs.push(this.nodes[n])}for(var n=0;n<this.nodes.length;n++)this.nodes[n].beforeFrame();for(var n=0;n<this._outputs.length;n++)this._outputs[n].updateReference();for(var n=0;n<this._outputs.length;n++)this._outputs[n].render(e,t);for(var n=0;n<this.nodes.length;n++)this.nodes[n].afterFrame()},allocateTexture:function(e){return this._texturePool.get(e)},releaseTexture:function(e){this._texturePool.put(e)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(e){this._texturePool.clear(e)}}),FPt=Ob.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Qr},{render:function(e){this._rendering=!0;var t=e.gl;this.trigger("beforerender");var n;if(!this.outputs)n=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var r=this.frameBuffer;for(var i in this.outputs){var a=this.updateParameter(i,e),o=this.outputs[i],s=this._compositor.allocateTexture(a);this._outputTextures[i]=s;var l=o.attachment||t.COLOR_ATTACHMENT0;typeof l=="string"&&(l=t[l]),r.attach(s,l)}r.bind(e);var u=e.getGLExtension("EXT_draw_buffers");if(u){var c=[];for(var l in this.outputs)l=parseInt(l),l>=t.COLOR_ATTACHMENT0&&l<=t.COLOR_ATTACHMENT0+8&&c.push(l);u.drawBuffersEXT(c)}e.saveClear(),e.clearBit=wt.DEPTH_BUFFER_BIT|wt.COLOR_BUFFER_BIT,n=e.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),e.restoreClear(),r.unbind(e)}this.trigger("afterrender",n),this._rendering=!1,this._rendered=!0}}),zPt=Ob.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(e,t){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),UPt=Ob.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var e=new oi({fragment:this.shader});this.pass=e},{render:function(e,t){this.trigger("beforerender",e),this._rendering=!0;var n=e.gl;for(var r in this.inputLinks){var i=this.inputLinks[r],a=i.node.getOutput(e,i.pin);this.pass.setUniform(r,a)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(e),this.pass.render(e,t);else{this.pass.outputs={};var o={};for(var s in this.outputs){var l=this.updateParameter(s,e);isNaN(l.width)&&this.updateParameter(s,e);var u=this.outputs[s],c=this._compositor.allocateTexture(l);this._outputTextures[s]=c;var h=u.attachment||n.COLOR_ATTACHMENT0;typeof h=="string"&&(h=n[h]),o[h]=c}this._compositor.getFrameBuffer().bind(e);for(var h in o)this._compositor.getFrameBuffer().attach(o[h],h);this.pass.render(e),this._compositor.getFrameBuffer().updateMipmap(e)}for(var r in this.inputLinks){var i=this.inputLinks[r];i.node.removeReference(i.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",e)},updateParameter:function(e,t){var n=this.outputs[e],r=n.parameters,i=n._parametersCopy;if(i||(i=n._parametersCopy={}),r)for(var a in r)a!=="width"&&a!=="height"&&(i[a]=r[a]);var o,s;return typeof r.width=="function"?o=r.width.call(this,t):o=r.width,typeof r.height=="function"?s=r.height.call(this,t):s=r.height,o=Math.ceil(o),s=Math.ceil(s),(i.width!==o||i.height!==s)&&this._outputTextures[e]&&this._outputTextures[e].dispose(t),i.width=o,i.height=s,i},setParameter:function(e,t){this.pass.setUniform(e,t)},getParameter:function(e){return this.pass.getUniform(e)},setParameters:function(e){for(var t in e)this.setParameter(t,e[t])},define:function(e,t){this.pass.material.define("fragment",e,t)},undefine:function(e){this.pass.material.undefine("fragment",e)},removeReference:function(e){if(this._outputReferences[e]--,this._outputReferences[e]===0){var t=this.outputs[e];t.keepLastFrame?(this._prevOutputTextures[e]&&this._compositor.releaseTexture(this._prevOutputTextures[e]),this._prevOutputTextures[e]=this._outputTextures[e]):this._compositor.releaseTexture(this._outputTextures[e])}},clear:function(){Ob.prototype.clear.call(this),this.pass.material.disableTexturesAll()}});const VPt=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,Nnt=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,GPt=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,Bnt=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,HPt=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,knt=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Fnt=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,znt=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,Unt=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,Vnt=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,WPt=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,Gnt=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,Hnt=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function $Pt(e){e.import(VPt),e.import(Nnt),e.import(GPt),e.import(Bnt),e.import(HPt),e.import(knt),e.import(Fnt),e.import(znt),e.import(Unt),e.import(Vnt),e.import(WPt),e.import(Gnt),e.import(Hnt)}$Pt(kt);var XPt=/^#source\((.*?)\)/;function jPt(e,t){var n=new kPt;t=t||{};var r={textures:{},parameters:{}},i=function(s,l){for(var u=0;u<e.nodes.length;u++){var c=e.nodes[u],h=YPt(c,r,t);h&&n.addNode(h)}};for(var a in e.parameters){var o=e.parameters[a];r.parameters[a]=WF(o)}return ZPt(e,r,t,function(s){r.textures=s,i()}),n}function YPt(e,t,n){var r=e.type||"filter",i,a,o;if(r==="filter"){var s=e.shader.trim(),l=XPt.exec(s);if(l?i=kt.source(l[1].trim()):s.charAt(0)==="#"&&(i=t.shaders[s.substr(1)]),i||(i=s),!i)return}if(e.inputs){a={};for(var u in e.inputs)typeof e.inputs[u]=="string"?a[u]=e.inputs[u]:a[u]={node:e.inputs[u].node,pin:e.inputs[u].pin}}if(e.outputs){o={};for(var u in e.outputs){var c=e.outputs[u];o[u]={},c.attachment!=null&&(o[u].attachment=c.attachment),c.keepLastFrame!=null&&(o[u].keepLastFrame=c.keepLastFrame),c.outputLastFrame!=null&&(o[u].outputLastFrame=c.outputLastFrame),c.parameters&&(o[u].parameters=WF(c.parameters))}}var h;if(r==="scene"?h=new FPt({name:e.name,scene:n.scene,camera:n.camera,outputs:o}):r==="texture"?h=new zPt({name:e.name,outputs:o}):h=new UPt({name:e.name,shader:i,inputs:a,outputs:o}),h){if(e.parameters)for(var u in e.parameters){var f=e.parameters[u];typeof f=="string"?(f=f.trim(),f.charAt(0)==="#"?f=t.textures[f.substr(1)]:h.on("beforerender",JPt(u,Wnt(f)))):typeof f=="function"&&h.on("beforerender",f),h.setParameter(u,f)}if(e.defines&&h.pass)for(var u in e.defines){var f=e.defines[u];h.pass.material.define("fragment",u,f)}}return h}function qPt(e,t){return e}function KPt(e,t){return t}function WF(e){var t={};if(!e)return t;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(r){var i=e[r];i!=null&&(typeof i=="string"&&(i=Nt[i]),t[r]=i)});var n=e.scale||1;return["width","height"].forEach(function(r){if(e[r]!=null){var i=e[r];typeof i=="string"?(i=i.trim(),t[r]=QPt(r,Wnt(i),n)):t[r]=i}}),t.width||(t.width=qPt),t.height||(t.height=KPt),e.useMipmap!=null&&(t.useMipmap=e.useMipmap),t}function ZPt(e,t,n,r){if(!e.textures){r({});return}var i={},a=0,o=!1,s=n.textureRootPath;Kr.each(e.textures,function(l,u){var c,h=l.path,f=WF(l.parameters);if(Array.isArray(h)&&h.length===6)s&&(h=h.map(function(d){return Kr.relative2absolute(d,s)})),c=new _v(f);else if(typeof h=="string")s&&(h=Kr.relative2absolute(h,s)),c=new Ye(f);else return;c.load(h),a++,c.once("success",function(){i[u]=c,a--,a===0&&(r(i),o=!0)})}),a===0&&!o&&r(i)}function JPt(e,t){return function(n){var r=n.getDevicePixelRatio(),i=n.getWidth(),a=n.getHeight(),o=t(i,a,r);this.setParameter(e,o)}}function QPt(e,t,n){return n=n||1,function(r){var i=r.getDevicePixelRatio(),a=r.getWidth()*n,o=r.getHeight()*n;return t(a,o,i)}}function Wnt(e){var t=/^expr\((.*)\)$/.exec(e);if(t)try{var n=new Function("width","height","dpr","return "+t[1]);return n(1,1),n}catch{throw new Error("Invalid expression.")}}function by(e,t){for(var n=0,r=1/t,i=e;i>0;)n=n+r*(i%t),i=Math.floor(i/t),r=r/t;return n}const tRt=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;kt.import(tRt);function $nt(e){for(var t=new Uint8Array(e*e*4),n=0,r=new gt,i=0;i<e;i++)for(var a=0;a<e;a++)r.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),t[n++]=(r.x*.5+.5)*255,t[n++]=(r.y*.5+.5)*255,t[n++]=0,t[n++]=255;return t}function j$(e){return new Ye({pixels:$nt(e),wrapS:Nt.REPEAT,wrapT:Nt.REPEAT,width:e,height:e})}function eRt(e,t,n){var r=new Float32Array(e*3);t=t||0;for(var i=0;i<e;i++){var a=by(i+t,2)*(n?1:2)*Math.PI,o=by(i+t,3)*Math.PI,s=Math.random(),l=Math.cos(a)*Math.sin(o)*s,u=Math.cos(o)*s,c=Math.sin(a)*Math.sin(o)*s;r[i*3]=l,r[i*3+1]=u,r[i*3+2]=c}return r}function _h(e){e=e||{},this._ssaoPass=new oi({fragment:kt.source("ecgl.ssao.estimate")}),this._blurPass=new oi({fragment:kt.source("ecgl.ssao.blur")}),this._framebuffer=new Qr({depthBuffer:!1}),this._ssaoTexture=new Ye,this._blurTexture=new Ye,this._blurTexture2=new Ye,this._depthTex=e.depthTexture,this._normalTex=e.normalTexture,this.setNoiseSize(4),this.setKernelSize(e.kernelSize||12),e.radius!=null&&this.setParameter("radius",e.radius),e.power!=null&&this.setParameter("power",e.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}_h.prototype.setDepthTexture=function(e){this._depthTex=e};_h.prototype.setNormalTexture=function(e){this._normalTex=e,this._ssaoPass.material[e?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)};_h.prototype.update=function(e,t,n){var r=e.getWidth(),i=e.getHeight(),a=this._ssaoPass,o=this._blurPass;a.setUniform("kernel",this._kernels[n%this._kernels.length]),a.setUniform("depthTex",this._depthTex),this._normalTex!=null&&a.setUniform("normalTex",this._normalTex),a.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var s=new Ht;Ht.transpose(s,t.worldTransform),a.setUniform("projection",t.projectionMatrix.array),a.setUniform("projectionInv",t.invProjectionMatrix.array),a.setUniform("viewInverseTranspose",s.array);var l=this._ssaoTexture,u=this._blurTexture,c=this._blurTexture2;l.width=r/2,l.height=i/2,u.width=r,u.height=i,c.width=r,c.height=i,this._framebuffer.attach(l),this._framebuffer.bind(e),e.gl.clearColor(1,1,1,1),e.gl.clear(e.gl.COLOR_BUFFER_BIT),a.render(e),o.setUniform("textureSize",[r/2,i/2]),o.setUniform("projection",t.projectionMatrix.array),this._framebuffer.attach(u),o.setUniform("direction",0),o.setUniform("ssaoTexture",l),o.render(e),this._framebuffer.attach(c),o.setUniform("textureSize",[r,i]),o.setUniform("direction",1),o.setUniform("ssaoTexture",u),o.render(e),this._framebuffer.unbind(e);var h=e.clearColor;e.gl.clearColor(h[0],h[1],h[2],h[3])};_h.prototype.getTargetTexture=function(){return this._blurTexture2};_h.prototype.setParameter=function(e,t){e==="noiseTexSize"?this.setNoiseSize(t):e==="kernelSize"?this.setKernelSize(t):e==="intensity"?this._ssaoPass.material.set("intensity",t):this._ssaoPass.setUniform(e,t)};_h.prototype.setKernelSize=function(e){this._kernelSize=e,this._ssaoPass.material.define("fragment","KERNEL_SIZE",e),this._kernels=this._kernels||[];for(var t=0;t<30;t++)this._kernels[t]=eRt(e,t*e,!!this._normalTex)};_h.prototype.setNoiseSize=function(e){var t=this._ssaoPass.getUniform("noiseTex");t?(t.data=$nt(e),t.width=t.height=e,t.dirty()):(t=j$(e),this._ssaoPass.setUniform("noiseTex",j$(e))),this._ssaoPass.setUniform("noiseTexSize",[e,e])};_h.prototype.dispose=function(e){this._blurTexture.dispose(e),this._ssaoTexture.dispose(e),this._blurTexture2.dispose(e)};const nRt=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;kt.import(nRt);function xh(e){e=e||{},this._ssrPass=new oi({fragment:kt.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new oi({fragment:kt.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new oi({fragment:kt.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new oi({fragment:kt.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",e.normalTexture),this._ssrPass.setUniform("gBufferTexture2",e.depthTexture),this._blurPass1.setUniform("gBufferTexture1",e.normalTexture),this._blurPass1.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.setUniform("gBufferTexture1",e.normalTexture),this._blurPass2.setUniform("gBufferTexture2",e.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Ye({type:Nt.HALF_FLOAT}),this._texture2=new Ye({type:Nt.HALF_FLOAT}),this._texture3=new Ye({type:Nt.HALF_FLOAT}),this._prevTexture=new Ye({type:Nt.HALF_FLOAT}),this._currentTexture=new Ye({type:Nt.HALF_FLOAT}),this._frameBuffer=new Qr({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}xh.prototype.setAmbientCubemap=function(e,t){this._ssrPass.material.set("specularCubemap",e),this._ssrPass.material.set("specularIntensity",t);var n=e&&t;this._ssrPass.material[n?"enableTexture":"disableTexture"]("specularCubemap")};xh.prototype.update=function(e,t,n,r){var i=e.getWidth(),a=e.getHeight(),o=this._ssrTexture,s=this._texture2,l=this._texture3;o.width=this._prevTexture.width=this._currentTexture.width=i/this._downScale,o.height=this._prevTexture.height=this._currentTexture.height=a/this._downScale,s.width=l.width=i,s.height=l.height=a;var u=this._frameBuffer,c=this._ssrPass,h=this._blurPass1,f=this._blurPass2,d=this._blendPass,p=new Ht,v=new Ht;Ht.transpose(p,t.worldTransform),Ht.transpose(v,t.viewMatrix),c.setUniform("sourceTexture",n),c.setUniform("projection",t.projectionMatrix.array),c.setUniform("projectionInv",t.invProjectionMatrix.array),c.setUniform("toViewSpace",p.array),c.setUniform("toWorldSpace",v.array),c.setUniform("nearZ",t.near);var g=r/this._totalSamples*this._samplePerFrame;if(c.setUniform("jitterOffset",g),c.setUniform("sampleOffset",r*this._samplePerFrame),h.setUniform("textureSize",[o.width,o.height]),f.setUniform("textureSize",[i,a]),f.setUniform("sourceTexture",n),h.setUniform("projection",t.projectionMatrix.array),f.setUniform("projection",t.projectionMatrix.array),u.attach(o),u.bind(e),c.render(e),this._physicallyCorrect&&(u.attach(this._currentTexture),d.setUniform("texture1",this._prevTexture),d.setUniform("texture2",o),d.material.set({weight1:r>=1?.95:0,weight2:r>=1?.05:1}),d.render(e)),u.attach(s),h.setUniform("texture",this._physicallyCorrect?this._currentTexture:o),h.render(e),u.attach(l),f.setUniform("texture",s),f.render(e),u.unbind(e),this._physicallyCorrect){var m=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=m}};xh.prototype.getTargetTexture=function(){return this._texture3};xh.prototype.setParameter=function(e,t){e==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",t):this._ssrPass.setUniform(e,t)};xh.prototype.setPhysicallyCorrect=function(e){e?(this._normalDistribution||(this._normalDistribution=Ru.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=e};xh.prototype.setSSAOTexture=function(e){var t=this._blurPass2;e?(t.material.enableTexture("ssaoTex"),t.material.set("ssaoTex",e)):t.material.disableTexture("ssaoTex")};xh.prototype.isFinished=function(e){return this._physicallyCorrect?e>this._totalSamples/this._samplePerFrame:!0};xh.prototype.dispose=function(e){this._ssrTexture.dispose(e),this._texture2.dispose(e),this._texture3.dispose(e),this._prevTexture.dispose(e),this._currentTexture.dispose(e),this._frameBuffer.dispose(e)};const Y$=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],rRt=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;kt.import(rRt);function kL(e,t,n,r,i){var a=e.gl;t.setUniform(a,"1i",n,i),a.activeTexture(a.TEXTURE0+i),r.isRenderable()?r.bind(e):r.unbind(e)}function iRt(e,t,n,r,i){var a,o,s,l,u=e.gl;return function(c,h,f){if(!(l&&l.material===c.material)){var d=c.material,p=c.__program,v=d.get("roughness");v==null&&(v=1);var g=d.get("normalMap")||t,m=d.get("roughnessMap"),_=d.get("bumpMap"),y=d.get("uvRepeat"),x=d.get("uvOffset"),S=d.get("detailUvRepeat"),b=d.get("detailUvOffset"),w=!!_&&d.isTextureEnabled("bumpMap"),A=!!m&&d.isTextureEnabled("roughnessMap"),T=d.isDefined("fragment","DOUBLE_SIDED");_=_||n,m=m||r,f!==h?(h.set("normalMap",g),h.set("bumpMap",_),h.set("roughnessMap",m),h.set("useBumpMap",w),h.set("useRoughnessMap",A),h.set("doubleSide",T),y!=null&&h.set("uvRepeat",y),x!=null&&h.set("uvOffset",x),S!=null&&h.set("detailUvRepeat",S),b!=null&&h.set("detailUvOffset",b),h.set("roughness",v)):(p.setUniform(u,"1f","roughness",v),a!==g&&kL(e,p,"normalMap",g,0),o!==_&&_&&kL(e,p,"bumpMap",_,1),s!==m&&m&&kL(e,p,"roughnessMap",m,2),y!=null&&p.setUniform(u,"2f","uvRepeat",y),x!=null&&p.setUniform(u,"2f","uvOffset",x),S!=null&&p.setUniform(u,"2f","detailUvRepeat",S),b!=null&&p.setUniform(u,"2f","detailUvOffset",b),p.setUniform(u,"1i","useBumpMap",+w),p.setUniform(u,"1i","useRoughnessMap",+A),p.setUniform(u,"1i","doubleSide",+T)),a=g,o=_,s=m,l=c}}}function _0(e){this._depthTex=new Ye({format:Nt.DEPTH_COMPONENT,type:Nt.UNSIGNED_INT}),this._normalTex=new Ye({type:Nt.HALF_FLOAT}),this._framebuffer=new Qr,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Qr.DEPTH_ATTACHMENT),this._normalMaterial=new ks({shader:new kt(kt.source("ecgl.normal.vertex"),kt.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Pu.createBlank("#000"),this._defaultBumpMap=Pu.createBlank("#000"),this._defaultRoughessMap=Pu.createBlank("#000"),this._debugPass=new oi({fragment:kt.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}_0.prototype.getDepthTexture=function(){return this._depthTex};_0.prototype.getNormalTexture=function(){return this._normalTex};_0.prototype.update=function(e,t,n){var r=e.getWidth(),i=e.getHeight(),a=this._depthTex,o=this._normalTex,s=this._normalMaterial;a.width=r,a.height=i,o.width=r,o.height=i;var l=t.getRenderList(n).opaque;this._framebuffer.bind(e),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.disable(e.gl.BLEND),e.renderPass(l,n,{getMaterial:function(){return s},ifRender:function(u){return u.renderNormal},beforeRender:iRt(e,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:e.opaqueSortCompare}),this._framebuffer.unbind(e)};_0.prototype.renderDebug=function(e){this._debugPass.render(e)};_0.prototype.dispose=function(e){this._depthTex.dispose(e),this._normalTex.dispose(e)};function z1(e){e=e||{},this._edgePass=new oi({fragment:kt.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",e.normalTexture),this._edgePass.setUniform("depthTexture",e.depthTexture),this._targetTexture=new Ye({type:Nt.HALF_FLOAT}),this._frameBuffer=new Qr,this._frameBuffer.attach(this._targetTexture)}z1.prototype.update=function(e,t,n,r){var i=e.getWidth(),a=e.getHeight(),o=this._targetTexture;o.width=i,o.height=a;var s=this._frameBuffer;s.bind(e),this._edgePass.setUniform("projectionInv",t.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[i,a]),this._edgePass.setUniform("texture",n),this._edgePass.render(e),s.unbind(e)};z1.prototype.getTargetTexture=function(){return this._targetTexture};z1.prototype.setParameter=function(e,t){this._edgePass.setUniform(e,t)};z1.prototype.dispose=function(e){this._targetTexture.dispose(e),this._frameBuffer.dispose(e)};const aRt={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},oRt=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,sRt=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;kt.import(Nnt);kt.import(Bnt);kt.import(knt);kt.import(Fnt);kt.import(znt);kt.import(Unt);kt.import(Vnt);kt.import(Gnt);kt.import(Hnt);kt.import(oRt);kt.import(sRt);function Xnt(e,t){return{color:{parameters:{width:e,height:t}}}}var $F=["composite","FXAA"];function Sn(){this._width,this._height,this._dpr,this._sourceTexture=new Ye({type:Nt.HALF_FLOAT}),this._depthTexture=new Ye({format:Nt.DEPTH_COMPONENT,type:Nt.UNSIGNED_INT}),this._framebuffer=new Qr,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Qr.DEPTH_ATTACHMENT),this._normalPass=new _0,this._compositor=jPt(aRt);var e=this._compositor.getNodeByName("source");e.texture=this._sourceTexture;var t=this._compositor.getNodeByName("coc");this._sourceNode=e,this._cocNode=t,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(r){return this._compositor.getNodeByName(r)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=$F.map(function(r){return this._compositor.getNodeByName(r)},this);var n={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new _h(n),this._ssrPass=new xh(n),this._edgePass=new z1(n)}Sn.prototype.resize=function(r,i,n){n=n||1;var r=r*n,i=i*n,a=this._sourceTexture,o=this._depthTexture;a.width=r,a.height=i,o.width=r,o.height=i;var s={getWidth:function(){return r},getHeight:function(){return i},getDevicePixelRatio:function(){return n}};function l(u,c){if(typeof u[c]=="function"){var h=u[c].__original||u[c];u[c]=function(f){return h.call(this,s)},u[c].__original=h}}this._compositor.nodes.forEach(function(u){for(var c in u.outputs){var h=u.outputs[c].parameters;h&&(l(h,"width"),l(h,"height"))}for(var f in u.parameters)l(u.parameters,f)}),this._width=r,this._height=i,this._dpr=n};Sn.prototype.getWidth=function(){return this._width};Sn.prototype.getHeight=function(){return this._height};Sn.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR};Sn.prototype._getPrevNode=function(e){for(var t=$F.indexOf(e.name)-1,n=this._finalNodesChain[t];n&&!this._compositor.getNodeByName(n.name);)t-=1,n=this._finalNodesChain[t];return n};Sn.prototype._getNextNode=function(e){for(var t=$F.indexOf(e.name)+1,n=this._finalNodesChain[t];n&&!this._compositor.getNodeByName(n.name);)t+=1,n=this._finalNodesChain[t];return n};Sn.prototype._addChainNode=function(e){var t=this._getPrevNode(e),n=this._getNextNode(e);t&&(e.inputs.texture=t.name,n?(e.outputs=Xnt(this.getWidth.bind(this),this.getHeight.bind(this)),n.inputs.texture=e.name):e.outputs=null,this._compositor.addNode(e))};Sn.prototype._removeChainNode=function(e){var t=this._getPrevNode(e),n=this._getNextNode(e);t&&(n?(t.outputs=Xnt(this.getWidth.bind(this),this.getHeight.bind(this)),n.inputs.texture=t.name):t.outputs=null,this._compositor.removeNode(e))};Sn.prototype.updateNormal=function(e,t,n,r){this._ifRenderNormalPass()&&this._normalPass.update(e,t,n)};Sn.prototype.updateSSAO=function(e,t,n,r){this._ssaoPass.update(e,n,r)};Sn.prototype.enableSSAO=function(){this._enableSSAO=!0};Sn.prototype.disableSSAO=function(){this._enableSSAO=!1};Sn.prototype.enableSSR=function(){this._enableSSR=!0};Sn.prototype.disableSSR=function(){this._enableSSR=!1};Sn.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()};Sn.prototype.getSourceFrameBuffer=function(){return this._framebuffer};Sn.prototype.getSourceTexture=function(){return this._sourceTexture};Sn.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)};Sn.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)};Sn.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()};Sn.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()};Sn.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()};Sn.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()};Sn.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0};Sn.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1};Sn.prototype.enableEdge=function(){this._enableEdge=!0};Sn.prototype.disableEdge=function(){this._enableEdge=!1};Sn.prototype.setBloomIntensity=function(e){this._compositeNode.setParameter("bloomIntensity",e)};Sn.prototype.setSSAOParameter=function(e,t){switch(e){case"quality":var n={low:6,medium:12,high:32,ultra:62}[t]||12;this._ssaoPass.setParameter("kernelSize",n);break;case"radius":this._ssaoPass.setParameter(e,t),this._ssaoPass.setParameter("bias",t/200);break;case"intensity":this._ssaoPass.setParameter(e,t);break}};Sn.prototype.setDOFParameter=function(e,t){switch(e){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(e,t);break;case"blurRadius":for(var n=0;n<this._dofBlurNodes.length;n++)this._dofBlurNodes[n].setParameter("blurRadius",t);break;case"quality":var r={low:4,medium:8,high:16,ultra:32}[t]||8;this._dofBlurKernelSize=r;for(var n=0;n<this._dofBlurNodes.length;n++)this._dofBlurNodes[n].pass.material.define("POISSON_KERNEL_SIZE",r);this._dofBlurKernel=new Float32Array(r*2);break}};Sn.prototype.setSSRParameter=function(e,t){if(t!=null)switch(e){case"quality":var n={low:10,medium:15,high:30,ultra:80}[t]||20,r={low:32,medium:16,high:8,ultra:4}[t]||16;this._ssrPass.setParameter("maxIteration",n),this._ssrPass.setParameter("pixelStride",r);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-t,1),0));break;case"physical":this.setPhysicallyCorrectSSR(t);break;default:console.warn("Unkown SSR parameter "+e)}};Sn.prototype.setPhysicallyCorrectSSR=function(e){this._ssrPass.setPhysicallyCorrect(e)};Sn.prototype.setEdgeColor=function(e){var t=V.parseColor(e);this._edgePass.setParameter("edgeColor",t)};Sn.prototype.setExposure=function(e){this._compositeNode.setParameter("exposure",Math.pow(2,e))};Sn.prototype.setColorLookupTexture=function(e,t){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?e:"none",t,{minFilter:V.Texture.NEAREST,magFilter:V.Texture.NEAREST,flipY:!1})};Sn.prototype.setColorCorrection=function(e,t){this._compositeNode.setParameter(e,t)};Sn.prototype.isSSREnabled=function(){return this._enableSSR};Sn.prototype.composite=function(e,t,n,r,i){var a=this._sourceTexture,o=a;this._enableEdge&&(this._edgePass.update(e,n,a,i),a=o=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(e,n,a,i),o=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=o,this._cocNode.setParameter("depth",this._depthTexture);for(var s=this._dofBlurKernel,l=this._dofBlurKernelSize,u=Math.floor(Y$.length/2/l),c=i%u,h=0;h<l*2;h++)s[h]=Y$[h+c*l*2];for(var h=0;h<this._dofBlurNodes.length;h++)this._dofBlurNodes[h].setParameter("percent",i/30),this._dofBlurNodes[h].setParameter("poissonKernel",s);this._cocNode.setParameter("zNear",n.near),this._cocNode.setParameter("zFar",n.far),this._compositor.render(e,r)};Sn.prototype.dispose=function(e){this._sourceTexture.dispose(e),this._depthTexture.dispose(e),this._framebuffer.dispose(e),this._compositor.dispose(e),this._normalPass.dispose(e),this._ssaoPass.dispose(e)};function $N(e){for(var t=[],n=0;n<30;n++)t.push([by(n,2),by(n,3)]);this._haltonSequence=t,this._frame=0,this._sourceTex=new Ye,this._sourceFb=new Qr,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Ye,this._outputTex=new Ye;var r=this._blendPass=new oi({fragment:kt.source("clay.compositor.blend")});r.material.disableTexturesAll(),r.material.enableTexture(["texture1","texture2"]),this._blendFb=new Qr({depthBuffer:!1}),this._outputPass=new oi({fragment:kt.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(i){i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)}}$N.prototype={constructor:$N,jitterProjection:function(e,t){var n=e.viewport,r=n.devicePixelRatio||e.getDevicePixelRatio(),i=n.width*r,a=n.height*r,o=this._haltonSequence[this._frame%this._haltonSequence.length],s=new Ht;s.array[12]=(o[0]*2-1)/i,s.array[13]=(o[1]*2-1)/a,Ht.mul(t.projectionMatrix,s,t.projectionMatrix),Ht.invert(t.invProjectionMatrix,t.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(e,t){this._prevFrameTex.width=e,this._prevFrameTex.height=t,this._outputTex.width=e,this._outputTex.height=t,this._sourceTex.width=e,this._sourceTex.height=t,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(e,t,n){var r=this._blendPass;this._frame===0?(r.setUniform("weight1",0),r.setUniform("weight2",1)):(r.setUniform("weight1",.9),r.setUniform("weight2",.1)),r.setUniform("texture1",this._prevFrameTex),r.setUniform("texture2",t||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(e),r.render(e),this._blendFb.unbind(e),n||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(e));var i=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=i,this._frame++},dispose:function(e){this._sourceFb.dispose(e),this._blendFb.dispose(e),this._prevFrameTex.dispose(e),this._outputTex.dispose(e),this._sourceTex.dispose(e),this._outputPass.dispose(e),this._blendPass.dispose(e)}};function Yn(e){e=e||"perspective",this.layer=null,this.scene=new ud,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(e),this._compositor=new Sn,this._temporalSS=new $N,this._shadowMapPass=new lu;for(var t=[],n=0,r=0;r<30;r++){for(var i=[],a=0;a<6;a++)i.push(by(n,2)*4-2),i.push(by(n,3)*4-2),n++;t.push(i)}this._pcfKernels=t,this.scene.on("beforerender",function(o,s,l){this.needsTemporalSS()&&this._temporalSS.jitterProjection(o,l)},this)}Yn.prototype.setProjection=function(e){var t=this.camera;t&&t.update(),e==="perspective"?this.camera instanceof wi||(this.camera=new wi,t&&this.camera.setLocalTransform(t.localTransform)):this.camera instanceof xy||(this.camera=new xy,t&&this.camera.setLocalTransform(t.localTransform)),this.camera.near=.1,this.camera.far=2e3};Yn.prototype.setViewport=function(e,t,n,r,i){this.camera instanceof wi&&(this.camera.aspect=n/r),i=i||1,this.viewport.x=e,this.viewport.y=t,this.viewport.width=n,this.viewport.height=r,this.viewport.devicePixelRatio=i,this._compositor.resize(n*i,r*i),this._temporalSS.resize(n*i,r*i)};Yn.prototype.containPoint=function(e,t){var n=this.viewport,r=this.layer.renderer.getHeight();return t=r-t,e>=n.x&&t>=n.y&&e<=n.x+n.width&&t<=n.y+n.height};var q$=new De;Yn.prototype.castRay=function(e,t,n){var r=this.layer.renderer,i=r.viewport;return r.viewport=this.viewport,r.screenToNDC(e,t,q$),this.camera.castRay(q$,n),r.viewport=i,n};Yn.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var e=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var t=0;t<e.transparent.length;t++){var n=e.transparent[t],r=n.geometry;r.needsSortVerticesProgressively&&r.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),r.needsSortTrianglesProgressively&&r.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()};Yn.prototype.render=function(e,t){this._doRender(e,t,this._frame),this._frame++};Yn.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively};Yn.prototype.needsTemporalSS=function(){var e=this._enableTemporalSS;return e==="auto"&&(e=this._enablePostEffect),e};Yn.prototype.hasDOF=function(){return this._enableDOF};Yn.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30};Yn.prototype._doRender=function(e,t,n){var r=this.scene,i=this.camera;n=n||0,this._updateTransparent(e,r,i,n),t||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(e,r,i,!0)),this._updateShadowPCFKernel(n);var a=e.clearColor;if(e.gl.clearColor(a[0],a[1],a[2],a[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(e,i),this._compositor.updateNormal(e,r,i,this._temporalSS.getFrame())),this._updateSSAO(e,r,i,this._temporalSS.getFrame()),this._enablePostEffect){var o=this._compositor.getSourceFrameBuffer();o.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),e.render(r,i,!0,!0),o.unbind(e),this.needsTemporalSS()&&t?(this._compositor.composite(e,r,i,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),e.setViewport(this.viewport),this._temporalSS.render(e)):(e.setViewport(this.viewport),this._compositor.composite(e,r,i,null,0))}else if(this.needsTemporalSS()&&t){var o=this._temporalSS.getSourceFrameBuffer();o.bind(e),e.saveClear(),e.clearBit=e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT,e.render(r,i,!0,!0),e.restoreClear(),o.unbind(e),e.setViewport(this.viewport),this._temporalSS.render(e)}else e.setViewport(this.viewport),e.render(r,i,!0,!0)};Yn.prototype._updateTransparent=function(e,t,n,r){for(var i=new gt,a=new Ht,o=n.getWorldPosition(),s=t.getRenderList(n).transparent,l=0;l<s.length;l++){var u=s[l],c=u.geometry;Ht.invert(a,u.worldTransform),gt.transformMat4(i,o,a),c.needsSortTriangles&&c.needsSortTriangles()&&c.doSortTriangles(i,r),c.needsSortVertices&&c.needsSortVertices()&&c.doSortVertices(i,r)}};Yn.prototype._updateSSAO=function(e,t,n){var r=this._enableSSAO&&this._enablePostEffect;r&&this._compositor.updateSSAO(e,t,n,this._temporalSS.getFrame());for(var i=t.getRenderList(n),a=0;a<i.opaque.length;a++){var o=i.opaque[a];o.renderNormal&&o.material[r?"enableTexture":"disableTexture"]("ssaoMap"),r&&o.material.set("ssaoMap",this._compositor.getSSAOTexture())}};Yn.prototype._updateShadowPCFKernel=function(e){for(var t=this._pcfKernels[e%this._pcfKernels.length],n=this.scene.getRenderList(this.camera),r=n.opaque,i=0;i<r.length;i++)r[i].receiveShadow&&(r[i].material.set("pcfKernel",t),r[i].material.define("fragment","PCF_KERNEL_SIZE",t.length/2))};Yn.prototype.dispose=function(e){this._compositor.dispose(e.gl),this._temporalSS.dispose(e.gl),this._shadowMapPass.dispose(e)};Yn.prototype.setPostEffect=function(e,t){var n=this._compositor;this._enablePostEffect=e.get("enable");var r=e.getModel("bloom"),i=e.getModel("edge"),a=e.getModel("DOF",e.getModel("depthOfField")),o=e.getModel("SSAO",e.getModel("screenSpaceAmbientOcclusion")),s=e.getModel("SSR",e.getModel("screenSpaceReflection")),l=e.getModel("FXAA"),u=e.getModel("colorCorrection");r.get("enable")?n.enableBloom():n.disableBloom(),a.get("enable")?n.enableDOF():n.disableDOF(),s.get("enable")?n.enableSSR():n.disableSSR(),u.get("enable")?n.enableColorCorrection():n.disableColorCorrection(),i.get("enable")?n.enableEdge():n.disableEdge(),l.get("enable")?n.enableFXAA():n.disableFXAA(),this._enableDOF=a.get("enable"),this._enableSSAO=o.get("enable"),this._enableSSAO?n.enableSSAO():n.disableSSAO(),n.setBloomIntensity(r.get("intensity")),n.setEdgeColor(i.get("color")),n.setColorLookupTexture(u.get("lookupTexture"),t),n.setExposure(u.get("exposure")),["radius","quality","intensity"].forEach(function(c){n.setSSAOParameter(c,o.get(c))}),["quality","maxRoughness","physical"].forEach(function(c){n.setSSRParameter(c,s.get(c))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(c){n.setDOFParameter(c,a.get(c))}),["brightness","contrast","saturation"].forEach(function(c){n.setColorCorrection(c,u.get(c))})};Yn.prototype.setDOFFocusOnPoint=function(e){if(this._enablePostEffect)return e>this.camera.far||e<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",e),!0)};Yn.prototype.setTemporalSuperSampling=function(e){this._enableTemporalSS=e.get("enable")};Yn.prototype.isLinearSpace=function(){return this._enablePostEffect};Yn.prototype.setRootNode=function(e){if(this.rootNode!==e){for(var t=this.rootNode.children(),n=0;n<t.length;n++)e.add(t[n]);e!==this.scene&&this.scene.add(e),this.rootNode=e}};Yn.prototype.add=function(e){this.rootNode.add(e)};Yn.prototype.remove=function(e){this.rootNode.remove(e)};Yn.prototype.removeAll=function(e){this.rootNode.removeAll(e)};Object.assign(Yn.prototype,FF);function lRt(e,t){var n=e.getBoxLayoutParams(),r=Gr(n,{width:t.getWidth(),height:t.getHeight()});r.y=t.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,t.getDevicePixelRatio());var i=e.get("boxWidth"),a=e.get("boxHeight"),o=e.get("boxDepth");this.getAxis("x").setExtent(-i/2,i/2),this.getAxis("y").setExtent(o/2,-o/2),this.getAxis("z").setExtent(-a/2,a/2),this.size=[i,a,o]}function uRt(e,t){var n={};function r(i,a){n[i]=n[i]||[1/0,-1/0],n[i][0]=Math.min(a[0],n[i][0]),n[i][1]=Math.max(a[1],n[i][1])}e.eachSeries(function(i){if(i.coordinateSystem===this){var a=i.getData();["x","y","z"].forEach(function(o){a.mapDimensionsAll(o,!0).forEach(function(s){r(o,a.getDataExtent(s,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(i){e.eachComponent(i,function(a){var o=i.charAt(0),s=a.getReferringComponents("grid3D").models[0],l=s.coordinateSystem;if(l===this){var u=l.getAxis(o);if(!u){var c=Lk(n[o]||[1/0,-1/0],a);u=new RA(o,c),u.type=a.get("type");var h=u.type==="category";u.onBand=h&&a.get("boundaryGap"),u.inverse=a.get("inverse"),a.axis=u,u.model=a,u.getLabelModel=function(){return a.getModel("axisLabel",s.getModel("axisLabel"))},u.getTickModel=function(){return a.getModel("axisTick",s.getModel("axisTick"))},l.addAxis(u)}}},this)},this),this.resize(this.model,t)}var cRt={dimensions:Rb.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("grid3D",function(a){a.__viewGL=a.__viewGL||new Yn;var o=new Rb;o.model=a,o.viewGL=a.__viewGL,a.coordinateSystem=o,n.push(o),o.resize=lRt,o.update=uRt});var r=["xAxis3D","yAxis3D","zAxis3D"];function i(a,o){return r.map(function(s){var l=a.getReferringComponents(s).models[0];return l==null&&(l=o.getComponent(s)),l})}return e.eachSeries(function(a){if(a.get("coordinateSystem")==="cartesian3D"){var o=a.getReferringComponents("grid3D").models[0];if(o==null){var s=i(a,e),o=s[0].getCoordSysModel();s.forEach(function(c){c.getCoordSysModel()})}var l=o.coordinateSystem;a.coordinateSystem=l}}),n}},jnt=Ie.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});$0t(jnt);var Ynt={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},hRt=Xt({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},Ynt),XF=Xt({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},Ynt),fRt=te({scale:!0,min:"dataMin",max:"dataMax"},XF),qnt=te({logBase:10},XF);qnt.scale=!0;const dRt={categoryAxis3D:hRt,valueAxis3D:XF,timeAxis3D:fRt,logAxis3D:qnt};var pRt=["value","category","time","log"];function vRt(e,t,n,r,i){pRt.forEach(function(a){var o=n.extend({type:t+"Axis3D."+a,__ordinalMeta:null,mergeDefaultAndTheme:function(s,l){var u=l.getTheme();Xt(s,u.get(a+"Axis3D")),Xt(s,this.getDefaultOption()),s.type=r(t,s)},optionUpdated:function(){var s=this.option;s.type==="category"&&(this.__ordinalMeta=aA.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:Xt(ce(dRt[a+"Axis3D"]),i||{},!0)});e.registerComponentModel(o)}),e.registerSubTypeDefaulter(t+"Axis3D",_e(r,t))}function gRt(e,t){return t.type||(t.data?"category":"value")}function mRt(e){e.registerComponentModel(UE),e.registerComponentView(RPt),e.registerCoordinateSystem("grid3D",cRt),["x","y","z"].forEach(function(t){vRt(e,t,jnt,gRt,{name:t.toUpperCase()});const n=e.ComponentView.extend({type:t+"Axis3D"});e.registerComponentView(n)}),e.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(t,n){n.eachComponent({mainType:"grid3D",query:t},function(r){r.setView(t)})}),e.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(t,n){}),e.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(t,n){})}ue(mRt);const x0={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},Knt={getFilledRegions:function(e,t){var n=(e||[]).slice(),r;if(typeof t=="string"?(t=$O(t),r=t&&t.geoJson):t&&t.features&&(r=t),!r)return[];for(var i={},a=r.features,o=0;o<n.length;o++)i[n[o].name]=n[o];for(var o=0;o<a.length;o++){var s=a[o].properties.name;i[s]||n.push({name:s})}return n},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}};var b0=Ie.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var e=this.option;e.regions=this.getFilledRegions(e.regions,e.map);var t=T1(e.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),n=new Ir(t,this);n.initData(e.regions);var r={};n.each(function(i){var a=n.getName(i),o=n.getItemModel(i);r[a]=o}),this._regionModelMap=r,this._data=n},getData:function(){return this._data},getRegionModel:function(e){var t=this.getData().getName(e);return this._regionModelMap[t]||new pn(null,this)},getRegionPolygonCoords:function(e){var t=this.getData().getName(e),n=this.coordinateSystem.getRegion(t);return n?n.geometries:[]},getFormattedLabel:function(e,t){var n=this._data.getName(e),r=this.getRegionModel(e),i=r.get(t==="normal"?["label","formatter"]:["emphasis","label","formatter"]);i==null&&(i=r.get(["label","formatter"]));var a={name:n};if(typeof i=="function")return a.status=t,i(a);if(typeof i=="string"){var o=a.seriesName;return i.replace("{a}",o??"")}else return n},defaultOption:{regions:[]}});Xt(b0.prototype,Knt);Xt(b0.prototype,zE);Xt(b0.prototype,m0);Xt(b0.prototype,y0);Xt(b0.prototype,x0);function Znt(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,a=Jnt(e,0,i,n,!0),o=[];if(!a)return o;var s,l,u,c,h,f,d;if(r&&(a=SRt(e,t,a,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var p=n;p<i;p+=n)h=e[p],f=e[p+1],h<s&&(s=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-s,c-l)}return Bb(a,o,n,s,l,d),o}function Jnt(e,t,n,r,i){var a,o;if(i===YN(e,t,n,r)>0)for(a=t;a<n;a+=r)o=K$(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=K$(a,e[a],e[a+1],o);return o&&Fp(o,o.next)&&(Fb(o),o=o.next),o}function Nb(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(Fp(n,n.next)||za(n.prev,n,n.next)===0)){if(Fb(n),n=t=n.prev,n===n.next)return null;r=!0}else n=n.next;while(r||n!==t);return t}function Bb(e,t,n,r,i,a,o){if(e){!o&&a&&ARt(e,r,i,a);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,a?_Rt(e,r,i,a):yRt(e)){t.push(l.i/n),t.push(e.i/n),t.push(u.i/n),Fb(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=xRt(e,t,n),Bb(e,t,n,r,i,a,2)):o===2&&bRt(e,t,n,r,i,a):Bb(Nb(e),t,n,r,i,a,1);break}}}}function yRt(e){var t=e.prev,n=e,r=e.next;if(za(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(NA(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&za(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function _Rt(e,t,n,r){var i=e.prev,a=e,o=e.next;if(za(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=XN(s,l,t,n,r),f=XN(u,c,t,n,r),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&NA(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&za(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&NA(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&za(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function xRt(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Fp(i,a)&&Qnt(i,r,r.next,a)&&kb(i,a)&&kb(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Fb(r),Fb(r.next),r=e=a),r=r.next}while(r!==e);return r}function bRt(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&DRt(o,s)){var l=trt(o,s);o=Nb(o,o.next),l=Nb(l,l.next),Bb(o,t,n,r,i,a),Bb(l,t,n,r,i,a);return}s=s.next}o=o.next}while(o!==e)}function SRt(e,t,n,r){var i=[],a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,u=Jnt(e,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(ERt(u));for(i.sort(wRt),a=0;a<i.length;a++)TRt(i[a],n),n=Nb(n,n.next);return n}function wRt(e,t){return e.x-t.x}function TRt(e,t){if(t=MRt(e,t),t){var n=trt(t,e);Nb(n,n.next)}}function MRt(e,t){var n=t,r=e.x,i=e.y,a=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o.prev;var l=o,u=o.x,c=o.y,h=1/0,f;for(n=o.next;n!==l;)r>=n.x&&n.x>=u&&r!==n.x&&NA(i<c?r:a,i,u,c,i<c?a:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),(f<h||f===h&&n.x>o.x)&&kb(n,e)&&(o=n,h=f)),n=n.next;return o}function ARt(e,t,n,r){var i=e;do i.z===null&&(i.z=XN(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,CRt(i)}function CRt(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,!!r);t++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1);return e}function XN(e,t,n,r,i){return e=32767*(e-n)/i,t=32767*(t-r)/i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function ERt(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function NA(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function DRt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!IRt(e,t)&&kb(e,t)&&kb(t,e)&&LRt(e,t)}function za(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fp(e,t){return e.x===t.x&&e.y===t.y}function Qnt(e,t,n,r){return Fp(e,t)&&Fp(n,r)||Fp(e,r)&&Fp(n,t)?!0:za(e,t,n)>0!=za(e,t,r)>0&&za(n,r,e)>0!=za(n,r,t)>0}function IRt(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Qnt(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function kb(e,t){return za(e.prev,e,e.next)<0?za(e,t,e.next)>=0&&za(e,e.prev,t)>=0:za(e,t,e.prev)<0||za(e,e.next,t)<0}function LRt(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function trt(e,t){var n=new jN(e.i,e.x,e.y),r=new jN(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function K$(e,t,n,r){var i=new jN(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Fb(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jN(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Znt.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(YN(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(YN(e,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[f]-e[p])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[p+1]-e[f+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function YN(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function FL(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ert(e,t,n,r,i){var a=n,o=e[t];FL(e,t,r);for(var s=n;s<r;s++)i(e[s],o)<0&&(FL(e,s,a),a++);return FL(e,r,a),a}function BA(e,t,n,r){if(n<r){var i=Math.floor((n+r)/2),a=ert(e,i,n,r,t);BA(e,t,n,a-1),BA(e,t,a+1,r)}}function Sy(){this._parts=[]}Sy.prototype.step=function(e,t,n){var r=e.length;if(n===0){this._parts=[],this._sorted=!1;var i=Math.floor(r/2);this._parts.push({pivot:i,left:0,right:r-1}),this._currentSortPartIdx=0}if(!this._sorted){var a=this._parts;if(a.length===0)return this._sorted=!0,!0;if(a.length<512){for(var o=0;o<a.length;o++)a[o].pivot=ert(e,a[o].pivot,a[o].left,a[o].right,t);for(var s=[],o=0;o<a.length;o++){var l=a[o].left,u=a[o].pivot-1;u>l&&s.push({pivot:Math.floor((u+l)/2),left:l,right:u});var l=a[o].pivot+1,u=a[o].right;u>l&&s.push({pivot:Math.floor((u+l)/2),left:l,right:u})}a=this._parts=s}else for(var o=0;o<Math.floor(a.length/10);o++){var c=a.length-1-this._currentSortPartIdx;if(BA(e,t,a[c].left,a[c].right),this._currentSortPartIdx++,this._currentSortPartIdx===a.length)return this._sorted=!0,!0}return!1}};Sy.sort=BA;var km=ei.vec3,Z$=km.create(),J$=km.create(),Q$=km.create();const jF={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(e,t){var n=this.indices;if(t===0){var r=this.attributes.position,e=e.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new n.constructor(n.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var i=0,a,o=0;o<n.length;){r.get(n[o++],Z$),r.get(n[o++],J$),r.get(n[o++],Q$);var s=km.sqrDist(Z$,e),l=km.sqrDist(J$,e),u=km.sqrDist(Q$,e),c=Math.min(s,l);c=Math.min(c,u),o===3?(a=c,c=0):c=c-a,this._triangleZList[i++]=c}}for(var h=this._sortedTriangleIndices,o=0;o<h.length;o++)h[o]=o;if(this.triangleCount<2e4)t===0&&this._simpleSort(!0);else for(var o=0;o<3;o++)this._progressiveQuickSort(t*3+o);for(var f=this._indicesTmp,d=this._triangleZListTmp,p=this._triangleZList,o=0;o<this.triangleCount;o++){var v=h[o]*3,g=o*3;f[g++]=n[v++],f[g++]=n[v++],f[g]=n[v],d[o]=p[h[o]]}var m=this._indicesTmp;this._indicesTmp=this.indices,this.indices=m;var m=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=m,this.dirtyIndices()},_simpleSort:function(e){var t=this._triangleZList,n=this._sortedTriangleIndices;function r(i,a){return t[a]-t[i]}e?Array.prototype.sort.call(n,r):Sy.sort(n,r,0,n.length-1)},_progressiveQuickSort:function(e){var t=this._triangleZList,n=this._sortedTriangleIndices;this._quickSort=this._quickSort||new Sy,this._quickSort.step(n,function(r,i){return t[i]-t[r]},e)}};function PRt(e){const t=e.getVisual("style");if(t){const n=e.getVisual("drawType");return t[n]}}function RRt(e){return e.getVisual("style").opacity}function Bi(e,t){const n=e.getItemVisual(t,"style");if(n){const r=e.getVisual("drawType");return n[r]}}function Li(e,t){const n=e.getItemVisual(t,"style");return n&&n.opacity}var nrt=1,rrt=2;function bh(e,t,n){this._labelsMesh=new GF,this._labelTextureSurface=new PA({width:512,height:512,devicePixelRatio:n.getDevicePixelRatio(),onupdate:function(){n.getZr().refresh()}}),this._api=n,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}bh.prototype.getLabelPosition=function(e,t,n){return[0,0,0]};bh.prototype.getLabelDistance=function(e,t,n){return 0};bh.prototype.getMesh=function(){return this._labelsMesh};bh.prototype.updateData=function(e,t,n){t==null&&(t=0),n==null&&(n=e.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==n-t)&&(this._labelsVisibilitiesBits=new Uint8Array(n-t));for(var r=["label","show"],i=["emphasis","label","show"],a=t;a<n;a++){var o=e.getItemModel(a),s=o.get(r),l=o.get(i);l==null&&(l=s);var u=(s?nrt:0)|(l?rrt:0);this._labelsVisibilitiesBits[a-t]=u}this._start=t,this._end=n,this._data=e};bh.prototype.updateLabels=function(e){if(this._data){e=e||[];for(var t=e.length>0,n={},r=0;r<e.length;r++)n[e[r]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var i=["label"],a=["emphasis","label"],o=this._data.hostModel,s=this._data,l=o.getModel(i),u=o.getModel(a,l),c={left:"right",right:"left",top:"center",bottom:"center"},h={left:"middle",right:"middle",top:"bottom",bottom:"top"},f=this._start;f<this._end;f++){var d=!1;t&&n[f]&&(d=!0);var p=this._labelsVisibilitiesBits[f-this._start]&(d?rrt:nrt);if(p){var v=s.getItemModel(f),g=v.getModel(d?a:i,d?u:l),m=g.get("distance")||0,_=g.get("position"),y=this._api.getDevicePixelRatio(),x=o.getFormattedLabel(f,d?"emphasis":"normal");if(x==null||x==="")return;var S=new Qe({style:Hn(g,{text:x,fill:g.get("color")||Bi(s,f)||"#000",align:"left",verticalAlign:"top",opacity:an.firstNotNull(g.get("opacity"),Li(s,f),1)})}),b=S.getBoundingRect(),w=1.2;b.height*=w;var A=this._labelTextureSurface.add(S),T=c[_]||"center",M=h[_]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(f,_,m),[b.width*y,b.height*y],A,T,M,this.getLabelDistance(f,_,m)*y)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}};bh.prototype.dispose=function(){this._labelTextureSurface.dispose()};var io=ei.vec3;V.Shader.import(GE);function wy(e){this.rootNode=new V.Node,this._triangulationResults={},this._shadersMap=V.COMMON_SHADERS.filter(function(n){return n!=="shadow"}).reduce(function(n,r){return n[r]=V.createShader("ecgl."+r),n},{}),this._linesShader=V.createShader("ecgl.meshLines3D");var t={};V.COMMON_SHADERS.forEach(function(n){t[n]=new V.Material({shader:V.createShader("ecgl."+n)})}),this._groundMaterials=t,this._groundMesh=new V.Mesh({geometry:new V.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new bh(512,512,e),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=e}wy.prototype={constructor:wy,extrudeY:!0,update:function(e,t,n,r,i){var a=e.getData();r==null&&(r=0),i==null&&(i=a.count()),this._startIndex=r,this._endIndex=i-1,this._triangulation(e,r,i);var o=this._getShader(e.get("shading"));this._prepareMesh(e,o,n,r,i),this.rootNode.updateWorldTransform(),this._updateRegionMesh(e,n,r,i);var s=e.coordinateSystem;s.type==="geo3D"&&this._updateGroundPlane(e,s,n);var l=this;this._labelsBuilder.updateData(a,r,i),this._labelsBuilder.getLabelPosition=function(u,c,h){var f=a.getName(u),d,p=h;if(s.type==="geo3D"){var v=s.getRegion(f);if(!v)return[NaN,NaN,NaN];d=v.getCenter();var g=s.dataToPoint([d[0],d[1],p]);return g}else var m=l._triangulationResults[u-l._startIndex],d=l.extrudeY?[(m.max[0]+m.min[0])/2,m.max[1]+p,(m.max[2]+m.min[2])/2]:[(m.max[0]+m.min[0])/2,(m.max[1]+m.min[1])/2,m.max[2]+p]},this._data=a,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(e),this._lastHoverDataIndex=0},_initMeshes:function(){var e=this;function t(){var i=new V.Mesh({name:"Polygon",material:new V.Material({shader:e._shadersMap.lambert}),geometry:new V.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(i.geometry,jF),i}var n=t(),r=new V.Mesh({material:new V.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new cd({useNativeLine:!1})});this.rootNode.add(n),this.rootNode.add(r),n.material.define("both","VERTEX_COLOR"),n.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=n,this._linesMesh=r,this.rootNode.add(this._groundMesh)},_getShader:function(e){var t=this._shadersMap[e];return t||(t=this._shadersMap.lambert),t.__shading=e,t},_prepareMesh:function(e,t,n,r,i){for(var a=0,o=0,s=0,l=0,u=r;u<i;u++){var c=this._getRegionPolygonInfo(u),h=this._getRegionLinesInfo(u,e,this._linesMesh.geometry);a+=c.vertexCount,o+=c.triangleCount,s+=h.vertexCount,l+=h.triangleCount}var f=this._polygonMesh,d=f.geometry;["position","normal","texcoord0","color"].forEach(function(p){d.attributes[p].init(a)}),d.indices=a>65535?new Uint32Array(o*3):new Uint16Array(o*3),f.material.shader!==t&&f.material.attachShader(t,!0),V.setMaterialFromModel(t.__shading,f.material,e,n),s>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(s),this._linesMesh.geometry.setTriangleCount(l)),this._dataIndexOfVertex=new Uint32Array(a),this._vertexRangeOfDataIndex=new Uint32Array((i-r)*2)},_updateRegionMesh:function(e,t,n,r){for(var i=e.getData(),a=0,o=0,s=!1,b=this._polygonMesh,l=this._linesMesh,u=n;u<r;u++){var c=e.getRegionModel(u),h=c.getModel("itemStyle"),f=an.firstNotNull(Bi(i,u),h.get("color"),"#fff"),d=an.firstNotNull(Li(i,u),h.get("opacity"),1),p=V.parseColor(f),v=V.parseColor(h.get("borderColor"));p[3]*=d,v[3]*=d;var g=p[3]<.99;b.material.set("color",[1,1,1,1]),s=s||g;for(var m=an.firstNotNull(c.get("height",!0),e.get("regionHeight")),_=this._updatePolygonGeometry(e,b.geometry,u,m,a,o,p),y=a;y<_.vertexOffset;y++)this._dataIndexOfVertex[y]=u;this._vertexRangeOfDataIndex[(u-n)*2]=a,this._vertexRangeOfDataIndex[(u-n)*2+1]=_.vertexOffset,a=_.vertexOffset,o=_.triangleOffset;var x=h.get("borderWidth"),S=x>0;S&&(x*=t.getDevicePixelRatio(),this._updateLinesGeometry(l.geometry,e,u,m,x,e.coordinateSystem.transform)),l.invisible=!S,l.material.set({color:v})}var b=this._polygonMesh;b.material.transparent=s,b.material.depthMask=!s,b.geometry.updateBoundingBox(),b.frontFace=this.extrudeY?V.Mesh.CCW:V.Mesh.CW,b.material.get("normalMap")&&b.geometry.generateTangents(),b.seriesIndex=e.seriesIndex,b.on("mousemove",this._onmousemove,this),b.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(e){var t=e.getModel("debug.wireframe");if(t.get("show")){var n=V.parseColor(t.get("lineStyle.color")||"rgba(0,0,0,0.5)"),r=an.firstNotNull(t.get("lineStyle.width"),1),i=this._polygonMesh;i.geometry.generateBarycentric(),i.material.define("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",n),i.material.set("wireframeLineWidth",r)}},_onmousemove:function(e){var t=this._dataIndexOfVertex[e.triangle[0]];t==null&&(t=-1),t!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(t),this._labelsBuilder.updateLabels([t])),this._lastHoverDataIndex=t,this._polygonMesh.dataIndex=t},_onmouseout:function(e){e.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(e,t,n){var r=e.getModel("groundPlane",e);if(this._groundMesh.invisible=!r.get("show",!0),!this._groundMesh.invisible){var i=e.get("shading"),a=this._groundMaterials[i];a||(a=this._groundMaterials.lambert),V.setMaterialFromModel(i,a,r,n),a.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=a,this._groundMesh.material.set("color",V.parseColor(r.get("color"))),this._groundMesh.scale.set(t.size[0],t.size[2],1)}},_triangulation:function(e,t,n){this._triangulationResults=[];for(var r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=e.coordinateSystem,o=t;o<n;o++){for(var s=[],l=e.getRegionPolygonCoords(o),u=0;u<l.length;u++){var c=l[u].exterior,h=l[u].interiors,f=[],d=[];if(!(c.length<3)){for(var p=0,v=0;v<c.length;v++){var g=c[v];f[p++]=g[0],f[p++]=g[1]}for(var v=0;v<h.length;v++)if(!(h[v].length<3)){for(var m=f.length/2,_=0;_<h[v].length;_++){var g=h[v][_];f.push(g[0]),f.push(g[1])}d.push(m)}for(var y=Znt(f,d),x=new Float64Array(f.length/2*3),S=[],b=[1/0,1/0,1/0],w=[-1/0,-1/0,-1/0],A=0,v=0;v<f.length;)io.set(S,f[v++],0,f[v++]),a&&a.transform&&io.transformMat4(S,S,a.transform),io.min(b,b,S),io.max(w,w,S),x[A++]=S[0],x[A++]=S[1],x[A++]=S[2];io.min(r,r,b),io.max(i,i,w),s.push({points:x,indices:y,min:b,max:w})}}this._triangulationResults.push(s)}this._geoBoundingBox=[r,i]},_getRegionPolygonInfo:function(e){for(var t=this._triangulationResults[e-this._startIndex],n=0,r=0,i=0;i<t.length;i++)n+=t[i].points.length/3,r+=t[i].indices.length/3;var a=n*2+n*4,o=r*2+n*2;return{vertexCount:a,triangleCount:o}},_updatePolygonGeometry:function(e,t,n,r,i,a,o){var s=e.get("projectUVOnGround"),l=t.attributes.position,u=t.attributes.normal,c=t.attributes.texcoord0,h=t.attributes.color,f=this._triangulationResults[n-this._startIndex],d=h.value&&o,p=t.indices,v=this.extrudeY?1:2,g=this.extrudeY?2:1,m=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],_=io.mul([],this._geoBoundingBox[0],m),y=io.mul([],this._geoBoundingBox[1],m),x=Math.max(y[0]-_[0],y[2]-_[2]);function S(et,xt,St){for(var X=et.points,Ct=X.length,It=[],Jt=[],Gt=0;Gt<Ct;Gt+=3)It[0]=X[Gt],It[v]=xt,It[g]=X[Gt+2],Jt[0]=(X[Gt]*m[0]-_[0])/x,Jt[1]=(X[Gt+2]*m[g]-_[2])/x,l.set(i,It),d&&h.set(i,o),c.set(i++,Jt)}function b(et,xt,St){var X=i;S(et,xt);for(var Ct=et.indices.length,It=0;It<Ct;It++)p[a*3+It]=et.indices[It]+X;a+=et.indices.length/3}for(var w=this.extrudeY?[0,1,0]:[0,0,1],A=io.negate([],w),T=0;T<f.length;T++){var M=i,C=f[T];b(C,0),b(C,r);for(var E=C.points.length/3,D=0;D<E;D++)u.set(M+D,A),u.set(M+D+E,w);for(var I=[0,3,1,1,3,2],L=[[],[],[],[]],P=[],B=[],N=[],k=[],U=0,D=0;D<E;D++){for(var Z=(D+1)%E,nt=(C.points[Z*3]-C.points[D*3])*m[0],ct=(C.points[Z*3+2]-C.points[D*3+2])*m[g],K=Math.sqrt(nt*nt+ct*ct),$=0;$<4;$++){var ot=$===0||$===3,tt=(ot?D:Z)*3;L[$][0]=C.points[tt],L[$][v]=$>1?r:0,L[$][g]=C.points[tt+2],l.set(i+$,L[$]),s?(k[0]=(C.points[tt]*m[0]-_[0])/x,k[1]=(C.points[tt+2]*m[g]-_[g])/x):(k[0]=(ot?U:U+K)/x,k[1]=(L[$][v]*m[v]-_[v])/x),c.set(i+$,k)}io.sub(P,L[1],L[0]),io.sub(B,L[3],L[0]),io.cross(N,P,B),io.normalize(N,N);for(var $=0;$<4;$++)u.set(i+$,N),d&&h.set(i+$,o);for(var $=0;$<6;$++)p[a*3+$]=I[$]+i;i+=4,a+=2,U+=K}}return t.dirty(),{vertexOffset:i,triangleOffset:a}},_getRegionLinesInfo:function(e,t,n){var r=0,i=0,a=t.getRegionModel(e),o=a.getModel("itemStyle"),s=o.get("borderWidth");if(s>0){var l=t.getRegionPolygonCoords(e);l.forEach(function(u){var c=u.exterior,h=u.interiors;r+=n.getPolylineVertexCount(c),i+=n.getPolylineTriangleCount(c);for(var f=0;f<h.length;f++)r+=n.getPolylineVertexCount(h[f]),i+=n.getPolylineTriangleCount(h[f])},this)}return{vertexCount:r,triangleCount:i}},_updateLinesGeometry:function(e,t,n,r,i,a){function o(u){for(var c=new Float64Array(u.length*3),h=0,f=[],d=0;d<u.length;d++)f[0]=u[d][0],f[1]=r+.1,f[2]=u[d][1],a&&io.transformMat4(f,f,a),c[h++]=f[0],c[h++]=f[1],c[h++]=f[2];return c}var s=[1,1,1,1],l=t.getRegionPolygonCoords(n);l.forEach(function(u){var c=u.exterior,h=u.interiors;e.addPolyline(o(c),s,i);for(var f=0;f<h.length;f++)e.addPolyline(o(h[f]),s,i)})},highlight:function(e){var t=this._data;if(t){var n=t.getItemModel(e),r=n.getModel(["emphasis","itemStyle"]),i=r.get("color"),a=an.firstNotNull(r.get("opacity"),Li(t,e),1);if(i==null){var o=Bi(t,e);i=oy(o,-.4)}a==null&&(a=Li(t,e));var s=V.parseColor(i);s[3]*=a,this._setColorOfDataIndex(t,e,s)}},downplay:function(e){var t=this._data;if(t){var n=t.getItemModel(e),r=an.firstNotNull(Bi(t,e),n.get(["itemStyle","color"]),"#fff"),i=an.firstNotNull(Li(t,e),n.get(["itemStyle","opacity"]),1),a=V.parseColor(r);a[3]*=i,this._setColorOfDataIndex(t,e,a)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(e,t,n){if(!(t<this._startIndex&&t>this._endIndex)){t-=this._startIndex;for(var r=this._vertexRangeOfDataIndex[t*2];r<this._vertexRangeOfDataIndex[t*2+1];r++)this._polygonMesh.geometry.attributes.color.set(r,n);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};const ORt=Zn.extend({type:"geo3D",__ecgl__:!0,init:function(e,t){this._geo3DBuilder=new wy(t),this.groupGL=new V.Node,this._lightRoot=new V.Node,this._sceneHelper=new Wf(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new k1({zr:t.getZr()}),this._control.init()},render:function(e,t,n){this.groupGL.add(this._geo3DBuilder.rootNode);var r=e.coordinateSystem;if(!(!r||!r.viewGL)){r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL);var i=this._control;i.setViewGL(r.viewGL);var a=e.getModel("viewControl");i.setFromViewControlModel(a,0),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),n),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._geo3DBuilder.update(e,t,n,0,e.getData().count());var o=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(s){s.material&&s.material[o]("fragment","SRGB_DECODE")}),i.off("update"),i.on("update",function(){n.dispatchAction({type:"geo3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),center:i.getCenter(),from:this.uid,geo3DId:e.id})}),i.update()}},afterRender:function(e,t,n,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}});var NRt={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function BRt(e,t){if(e==="world"){var n=NRt[t.name];if(n){var r=[n[0],n[1]];t.setCenter(r)}}}var kRt=ei.vec3,_m=ei.mat4,FRt=[att,BRt];function kA(e,t,n,r,i){this.name=e,this.map=t,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(n,r,i),this.transform=_m.identity(new Float64Array(16)),this.invTransform=_m.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}kA.prototype={constructor:kA,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(e,t,n){var r=YO||YO;try{this.regions=e?r(e):[]}catch(u){throw`Invalid geoJson format
`+u}t=t||{},n=n||{};for(var i=this.regions,a={},o=0;o<i.length;o++){var s=i[o].name;s=n[s]||s,i[o].name=s,a[s]=i[o],this.addGeoCoord(s,i[o].getCenter());var l=t[s];l&&i[o].transformTo(l.left,l.top,l.width,l.height)}this._regionsMap=a,this._geoRect=null,FRt.forEach(function(u){u(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var e,t=this.regions,n=0;n<t.length;n++){var r=t[n].getBoundingRect();e=e||r.clone(),e.union(r)}return this._geoRect=e||new Ae(0,0,0,0)},addGeoCoord:function(e,t){this._nameCoordMap[e]=t},getRegion:function(e){return this._regionsMap[e]},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},setSize:function(e,t,n){this.size=[e,t,n];var r=this.getGeoBoundingRect(),i=e/r.width,a=-n/r.height,o=-e/2-r.x*i,s=n/2-r.y*a,l=this.extrudeY?[o,0,s]:[o,s,0],u=this.extrudeY?[i,1,a]:[i,a,1],c=this.transform;_m.identity(c),_m.translate(c,c,l),_m.scale(c,c,u),_m.invert(this.invTransform,c)},dataToPoint:function(e,t){t=t||[];var n=this.extrudeY?1:2,r=this.extrudeY?2:1,i=e[2];return isNaN(i)&&(i=0),t[0]=e[0],t[r]=e[1],this.altitudeAxis?t[n]=this.altitudeAxis.dataToCoord(i):t[n]=0,t[n]+=this.regionHeight,kRt.transformMat4(t,t,this.transform),t},pointToData:function(e,t){}};function zRt(e,t){var n=e.getBoxLayoutParams(),r=Gr(n,{width:t.getWidth(),height:t.getHeight()});r.y=t.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,t.getDevicePixelRatio());var i=this.getGeoBoundingRect(),a=i.width/i.height*(e.get("aspectScale")||.75),o=e.get("boxWidth"),s=e.get("boxDepth"),l=e.get("boxHeight");l==null&&(l=5),isNaN(o)&&isNaN(s)&&(o=100),isNaN(s)?s=o/a:isNaN(o)&&(o=s/a),this.setSize(o,l,s),this.regionHeight=e.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(l-this.regionHeight,0))}function URt(e,t){var n=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this&&i.type!=="series.map3D"){var a=i.getData(),o=i.coordDimToDataDim("alt"),s=o&&o[0];if(s){var l=a.getDataExtent(s,!0);n[0]=Math.min(n[0],l[0]),n[1]=Math.max(n[1],l[1])}}},this),n&&isFinite(n[1]-n[0])){var r=Lk(n,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Qa("altitude",r),this.resize(this.model,t)}}var t9=0,YF={dimensions:kA.prototype.dimensions,create:function(e,t){var n=[];if(!$O)throw new Error("geo3D component depends on geo component");function r(i,a){var o=YF.createGeo3D(i);i.__viewGL=i.__viewGL||new Yn,o.viewGL=i.__viewGL,i.coordinateSystem=o,o.model=i,n.push(o),o.resize=zRt,o.resize(i,t),o.update=URt}return e.eachComponent("geo3D",function(i,a){r(i)}),e.eachSeriesByType("map3D",function(i,a){var o=i.get("coordinateSystem");o==null&&(o="geo3D"),o==="geo3D"&&r(i)}),e.eachSeries(function(i){if(i.get("coordinateSystem")==="geo3D"){if(i.type==="series.map3D")return;var a=i.getReferringComponents("geo3D").models[0];if(a||(a=e.getComponent("geo3D")),!a)throw new Error('geo "'+an.firstNotNull(i.get("geo3DIndex"),i.get("geo3DId"),0)+'" not found');i.coordinateSystem=a.coordinateSystem}}),n},createGeo3D:function(e){var t=e.get("map"),n;return typeof t=="string"?(n=t,t=$O(t)):t&&t.features&&(t={geoJson:t}),n==null&&(n="GEO_ANONYMOUS_"+t9++),new kA(n+t9++,n,t&&t.geoJson,t&&t.specialAreas,e.get("nameMap"))}};function irt(e){e.registerComponentModel(b0),e.registerComponentView(ORt),e.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(t,n){n.eachComponent({mainType:"geo3D",query:t},function(r){r.setView(t)})}),e.registerCoordinateSystem("geo3D",YF)}ue(irt);function e9(e,t){e.id=e.id||e.name||t+""}var xv=Ie.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){xv.superApply(this,"init",arguments),R(this.option.layers,function(e,t){Xt(e,this.defaultLayerOption),e9(e,t)},this)},mergeOption:function(e){var t=this.option.layers;this.option.layers=null,xv.superApply(this,"mergeOption",arguments);function n(o){return Pl(o,function(s,l,u){return e9(l,u),s[l.id]=l,s},{})}if(t&&t.length){var r=n(e.layers),i=n(t);for(var a in r)i[a]?Xt(i[a],r[a],!0):t.push(e.layers[a]);this.option.layers=t}R(this.option.layers,function(o){Xt(o,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(e,t,n){this.displacementData=e,this.displacementWidth=t,this.displacementHeight=n},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var e=this.getDisplacementTexture(),t=this.get("displacementScale");return(!e||e==="none")&&(t=0),t},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var e=this.getDisplacementTexture(),t=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==e||this._displacementScale!==t,this._displacementTexture=e,this._displacementScale=t},isDisplacementChanged:function(){return this._displacementChanged}});Xt(xv.prototype,zE);Xt(xv.prototype,m0);Xt(xv.prototype,y0);Xt(xv.prototype,x0);var art=Math.PI,zs=Math.sin,Wc=Math.cos,ort=Math.tan,srt=Math.asin,lrt=Math.atan2,bv=art/180,VRt=1e3*60*60*24,GRt=2440588,HRt=2451545;function WRt(e){return e.valueOf()/VRt-.5+GRt}function $Rt(e){return WRt(e)-HRt}var FA=bv*23.4397;function XRt(e,t){return lrt(zs(e)*Wc(FA)-ort(t)*zs(FA),Wc(e))}function jRt(e,t){return srt(zs(t)*Wc(FA)+Wc(t)*zs(FA)*zs(e))}function YRt(e,t,n){return lrt(zs(e),Wc(e)*zs(t)-ort(n)*Wc(t))}function qRt(e,t,n){return srt(zs(t)*zs(n)+Wc(t)*Wc(n)*Wc(e))}function KRt(e,t){return bv*(280.16+360.9856235*e)-t}function ZRt(e){return bv*(357.5291+.98560028*e)}function JRt(e){var t=bv*(1.9148*zs(e)+.02*zs(2*e)+3e-4*zs(3*e)),n=bv*102.9372;return e+t+n+art}function QRt(e){var t=ZRt(e),n=JRt(t);return{dec:jRt(n,0),ra:XRt(n,0)}}var urt={};urt.getPosition=function(e,t,n){var r=bv*-n,i=bv*t,a=$Rt(e),o=QRt(a),s=KRt(a,r)-o.ra;return{azimuth:YRt(s,i,o.dec),altitude:qRt(s,i,o.dec)}};const tOt=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;V.Shader.import(Ent);V.Shader.import(tOt);const eOt=Zn.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(e,t){this.groupGL=new V.Node,this._sphereGeometry=new V.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new V.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new V.PlaneGeometry,this._earthMesh=new V.Mesh({renderNormal:!0}),this._atmosphereMesh=new V.Mesh,this._atmosphereGeometry=new V.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new V.Material({shader:new V.Shader(V.Shader.source("ecgl.atmosphere.vertex"),V.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=V.Mesh.CW,this._lightRoot=new V.Node,this._sceneHelper=new Wf,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new k1({zr:t.getZr()}),this._control.init(),this._layerMeshes={}},render:function(e,t,n){var r=e.coordinateSystem,i=e.get("shading");r.viewGL.add(this._lightRoot),e.get("show")?r.viewGL.add(this.groupGL):r.viewGL.remove(this.groupGL),this._sceneHelper.setScene(r.viewGL.scene),r.viewGL.setPostEffect(e.getModel("postEffect"),n),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var a=this._earthMesh;a.geometry=this._sphereGeometry;var o="ecgl."+i;(!a.material||a.material.shader.name!==o)&&(a.material=V.createMaterial(o)),V.setMaterialFromModel(i,a.material,e,n),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(h){var f=a.material.get(h);f&&(f.flipY=!1)}),a.material.set("color",V.parseColor(e.get("baseColor")));var s=r.radius*.99;if(a.scale.set(s,s,s),e.get("atmosphere.show")){a.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:e.get("atmosphere.glowPower")||6,glowColor:e.get("atmosphere.color")||"#ffffff"}),a.material.setUniforms({glowPower:e.get("atmosphere.innerGlowPower")||2,glowColor:e.get("atmosphere.color")||"#ffffff"});var l=e.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(s+l,s+l,s+l)}else a.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var u=a.material.setTextureImage("diffuseMap",e.get("baseTexture"),n,{flipY:!1,anisotropic:8});u&&u.surface&&u.surface.attachToMesh(a);var c=a.material.setTextureImage("bumpMap",e.get("heightTexture"),n,{flipY:!1,anisotropic:8});c&&c.surface&&c.surface.attachToMesh(a),a.material[e.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(e,n),this._displaceVertices(e,n),this._updateViewControl(e,n),this._updateLayers(e,n)},afterRender:function(e,t,n,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n)},_updateLayers:function(e,t){var n=e.coordinateSystem,r=e.get("layers"),i=n.radius,a=[],o=[],s=[],l=[];R(r,function(d){var p=new pn(d),v=p.get("type"),g=V.loadTexture(p.get("texture"),t,{flipY:!1,anisotropic:8});if(g.surface&&g.surface.attachToMesh(this._earthMesh),v==="blend"){var m=p.get("blendTo"),_=an.firstNotNull(p.get("intensity"),1);m==="emission"?(s.push(g),l.push(_)):(a.push(g),o.push(_))}else{var y=p.get("id"),x=this._layerMeshes[y];x||(x=this._layerMeshes[y]=new V.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var S=p.get("shading");S==="lambert"?(x.material=x.__lambertMaterial||new V.Material({autoUpdateTextureStatus:!1,shader:V.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),x.__lambertMaterial=x.material):(x.material=x.__colorMaterial||new V.Material({autoUpdateTextureStatus:!1,shader:V.createShader("ecgl.color"),transparent:!0,depthMask:!1}),x.__colorMaterial=x.material),x.material.enableTexture("diffuseMap");var b=p.get("distance"),w=i+(b??n.radius/100);x.scale.set(w,w,w),i=w;var A=this._blankTexture||(this._blankTexture=V.createBlankTexture("rgba(255, 255, 255, 0)"));x.material.set("diffuseMap",A),V.loadTexture(p.get("texture"),t,{flipY:!1,anisotropic:8},function(T){T.surface&&T.surface.attachToMesh(x),x.material.set("diffuseMap",T),t.getZr().refresh()}),p.get("show")?this.groupGL.add(x):this.groupGL.remove(x)}},this);var u=this._earthMesh.material;u.define("fragment","LAYER_DIFFUSEMAP_COUNT",a.length),u.define("fragment","LAYER_EMISSIVEMAP_COUNT",s.length),u.set("layerDiffuseMap",a),u.set("layerDiffuseIntensity",o),u.set("layerEmissiveMap",s),u.set("layerEmissionIntensity",l);var c=e.getModel("debug.wireframe");if(c.get("show")){u.define("both","WIREFRAME_TRIANGLE");var h=V.parseColor(c.get("lineStyle.color")||"rgba(0,0,0,0.5)"),f=an.firstNotNull(c.get("lineStyle.width"),1);u.set("wireframeLineWidth",f),u.set("wireframeLineColor",h)}else u.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(e,t){var n=e.coordinateSystem,r=e.getModel("viewControl");n.viewGL.camera;var i=this;function a(){return{type:"globeChangeCamera",alpha:o.getAlpha(),beta:o.getBeta(),distance:o.getDistance()-n.radius,center:o.getCenter(),from:i.uid,globeId:e.id}}var o=this._control;o.setViewGL(n.viewGL);var s=r.get("targetCoord"),l,u;s!=null&&(u=s[0]+90,l=s[1]),o.setFromViewControlModel(r,{baseDistance:n.radius,alpha:l,beta:u}),o.off("update"),o.on("update",function(){t.dispatchAction(a())})},_displaceVertices:function(e,t){var n=e.get("displacementQuality"),r=e.get("debug.wireframe.show"),i=e.coordinateSystem;if(!(!e.isDisplacementChanged()&&n===this._displacementQuality&&r===this._showDebugWireframe)){this._displacementQuality=n,this._showDebugWireframe=r;var a=this._sphereGeometry,o={low:100,medium:200,high:400,ultra:800}[n]||200,s=o/2;(a.widthSegments!==o||r)&&(a.widthSegments=o,a.heightSegments=s,a.build()),this._doDisplaceVertices(a,i),r&&a.generateBarycentric()}},_doDisplaceVertices:function(e,t){var n=e.attributes.position.value,r=e.attributes.texcoord0.value,i=e.__originalPosition;(!i||i.length!==n.length)&&(i=new Float32Array(n.length),i.set(n),e.__originalPosition=i);for(var a=t.displacementWidth,o=t.displacementHeight,s=t.displacementData,l=0;l<e.vertexCount;l++){var u=l*3,c=l*2,h=i[u+1],f=i[u+2],d=i[u+3],p=r[c++],v=r[c++],g=Math.round(p*(a-1)),m=Math.round(v*(o-1)),_=m*a+g,y=s?s[_]:0;n[u+1]=h+h*y,n[u+2]=f+f*y,n[u+3]=d+d*y}e.generateVertexNormals(),e.dirty(),e.updateBoundingBox()},_updateLight:function(e,t){var n=this._earthMesh;this._sceneHelper.updateLight(e);var r=this._sceneHelper.mainLight,i=e.get("light.main.time")||new Date,a=urt.getPosition(Vs(i),0,0),o=Math.cos(a.altitude);r.position.y=-o*Math.cos(a.azimuth),r.position.x=Math.sin(a.altitude),r.position.z=o*Math.sin(a.azimuth),r.lookAt(n.getWorldPosition())},dispose:function(e,t){this.groupGL.removeAll(),this._control.dispose()}});var nOt=ei.vec3;function zA(e){this.radius=e,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}zA.prototype={constructor:zA,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(e,t,n){this.displacementData=e,this.displacementWidth=t,this.displacementHeight=n},_getDisplacementScale:function(e,t){var n=(e+180)/360*(this.displacementWidth-1),r=(90-t)/180*(this.displacementHeight-1),i=Math.round(n)+Math.round(r)*this.displacementWidth;return this.displacementData[i]},dataToPoint:function(e,t){var n=e[0],r=e[1],i=e[2]||0,a=this.radius;this.displacementData&&(a*=1+this._getDisplacementScale(n,r)),this.altitudeAxis&&(a+=this.altitudeAxis.dataToCoord(i)),n=n*Math.PI/180,r=r*Math.PI/180;var o=Math.cos(r)*a;return t=t||[],t[0]=-o*Math.cos(n+Math.PI),t[1]=Math.sin(r)*a,t[2]=o*Math.sin(n+Math.PI),t},pointToData:function(e,t){var n=e[0],r=e[1],i=e[2],a=nOt.len(e);n/=a,r/=a,i/=a;var o=Math.asin(r),s=Math.atan2(i,-n);s<0&&(s=Math.PI*2+s);var l=o*180/Math.PI,u=s*180/Math.PI-180;return t=t||[],t[0]=u,t[1]=l,t[2]=a-this.radius,this.altitudeAxis&&(t[2]=this.altitudeAxis.coordToData(t[2])),t}};function rOt(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=e.width,a=e.height;n.width=i,n.height=a,r.drawImage(e,0,0,i,a);for(var o=r.getImageData(0,0,i,a).data,s=new Float32Array(o.length/4),l=0;l<o.length/4;l++){var u=o[l*4];s[l]=u/255*t}return{data:s,width:i,height:a}}function iOt(e,t){var n=e.getBoxLayoutParams(),r=Gr(n,{width:t.getWidth(),height:t.getHeight()});r.y=t.getHeight()-r.y-r.height,this.viewGL.setViewport(r.x,r.y,r.width,r.height,t.getDevicePixelRatio()),this.radius=e.get("globeRadius");var i=e.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,i-this.radius)}function aOt(e,t){var n=[1/0,-1/0];if(e.eachSeries(function(i){if(i.coordinateSystem===this){var a=i.getData(),o=i.coordDimToDataDim("alt"),s=o&&o[0];if(s){var l=a.getDataExtent(s,!0);n[0]=Math.min(n[0],l[0]),n[1]=Math.max(n[1],l[1])}}},this),n&&isFinite(n[1]-n[0])){var r=Lk(n,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new Qa("altitude",r),this.resize(this.model,t)}}var oOt={dimensions:zA.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("globe",function(r){r.__viewGL=r.__viewGL||new Yn;var i=new zA;i.viewGL=r.__viewGL,r.coordinateSystem=i,i.model=r,n.push(i),i.resize=iOt,i.resize(r,t),i.update=aOt}),e.eachSeries(function(r){if(r.get("coordinateSystem")==="globe"){var i=r.getReferringComponents("globe").models[0];if(i||(i=e.getComponent("globe")),!i)throw new Error('globe "'+an.firstNotNull(r.get("globe3DIndex"),r.get("globe3DId"),0)+'" not found');var a=i.coordinateSystem;r.coordinateSystem=a}}),e.eachComponent("globe",function(r,i){var a=r.coordinateSystem,o=r.getDisplacementTexture(),s=r.getDisplacemenScale();if(r.isDisplacementChanged()){if(r.hasDisplacement()){var l=!0;V.loadTexture(o,t,function(u){var c=u.image,h=rOt(c,s);r.setDisplacementData(h.data,h.width,h.height),l||t.dispatchAction({type:"globeUpdateDisplacment"})}),l=!1}else a.setDisplacementData(null,0,0);a.setDisplacementData(r.displacementData,r.displacementWidth,r.displacementHeight)}}),n}};function sOt(e){e.registerComponentModel(xv),e.registerComponentView(eOt),e.registerCoordinateSystem("globe",oOt),e.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(t,n){n.eachComponent({mainType:"globe",query:t},function(r){r.setView(t)})}),e.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(t,n){})}ue(sOt);var n9=["zoom","center","pitch","bearing"],qF=Ie.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var e=this;return n9.reduce(function(t,n){return t[n]=e.get(n),t},{})},setMapboxCameraOption:function(e){e!=null&&n9.forEach(function(t){e[t]!=null&&(this.option[t]=e[t])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(e){this._mapbox=e}});Xt(qF.prototype,m0);Xt(qF.prototype,y0);function hd(e,t){if(this.id=e,this.zr=t,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}hd.prototype.setUnpainted=function(){};hd.prototype.resize=function(){this._mapbox.resize()};hd.prototype.getMapbox=function(){return this._mapbox};hd.prototype.clear=function(){};hd.prototype.refresh=function(){this._mapbox.resize()};var crt=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];hd.prototype._initEvents=function(){var e=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},crt.forEach(function(t){this._handlers[t]=function(n){var r={};for(var i in n)r[i]=n[i];r.bubbles=!1;var a=new n.constructor(n.type,r);e.dispatchEvent(a)},this.zr.dom.addEventListener(t,this._handlers[t])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};hd.prototype.dispose=function(){crt.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this)};const hrt=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;V.Shader.import(hrt);const lOt=Zn.extend({type:"mapbox3D",__ecgl__:!0,init:function(e,t){var n=t.getZr();this._zrLayer=new hd("mapbox3D",n),n.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new V.Node,this._sceneHelper=new Wf(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMapbox(),i=this._dispatchInteractAction.bind(this,t,r);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(a){r.on(a,i)}),this._groundMesh=new V.Mesh({geometry:new V.PlaneGeometry,material:new V.Material({shader:new V.Shader({vertex:V.Shader.source("ecgl.displayShadow.vertex"),fragment:V.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(e,t,n){var r=this._zrLayer.getMapbox(),i=e.get("style"),a=JSON.stringify(i);a!==this._oldStyleStr&&i&&r.setStyle(i),this._oldStyleStr=a,r.setCenter(e.get("center")),r.setZoom(e.get("zoom")),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMapbox(r);var o=e.coordinateSystem;o.viewGL.scene.add(this._lightRoot),o.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(o.viewGL.scene),this._sceneHelper.updateLight(e),o.viewGL.setPostEffect(e.getModel("postEffect"),n),o.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._mapbox3DModel=e},afterRender:function(e,t,n,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n),e.coordinateSystem.viewGL.scene.traverse(function(a){a.material&&(a.material.define("fragment","NORMAL_UP_AXIS",2),a.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,t,n,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),n.getZr().refresh()},_dispatchInteractAction:function(e,t,n){e.dispatchAction({type:"mapbox3DChangeCamera",pitch:t.getPitch(),zoom:t.getZoom(),center:t.getCenter().toArray(),bearing:t.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var e=this._mapbox3DModel.coordinateSystem,t=e.dataToPoint(e.center);this._groundMesh.position.set(t[0],t[1],-.001);var n=new V.Plane(new V.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new V.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new V.Vector2(1,1)),a=r.intersectPlane(n),o=i.intersectPlane(n),s=a.dist(o)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(e,t){this._zrLayer&&this._zrLayer.dispose(),t.getZr().painter.delLayer(-1e3)}});var Wh=ei.mat4,I_=512,zL=.6435011087932844,ao=Math.PI,Ag=1/10;function Ty(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}Ty.prototype={constructor:Ty,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(e){this.bearing=e.bearing,this.pitch=e.pitch,this.center=e.center,this.zoom=e.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,I_)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var e=.5/Math.tan(zL/2)*this.height*Ag,t=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,n=zL/2,r=Math.PI/2+t,i=Math.sin(n)*e/Math.sin(Math.PI-r-n),a=Math.cos(Math.PI/2-t)*i+e,o=a*1.1;this.pitch>50&&(o=1e3);var s=[];Wh.perspective(s,zL,this.width/this.height,1,o),this.viewGL.camera.projectionMatrix.setArray(s),this.viewGL.camera.decomposeProjectionMatrix();var s=Wh.identity([]),l=this.dataToPoint(this.center);Wh.scale(s,s,[1,-1,1]),Wh.translate(s,s,[0,0,-e]),Wh.rotateX(s,s,t),Wh.rotateZ(s,s,-this.bearing/180*Math.PI),Wh.translate(s,s,[-l[0]*this.getScale()*Ag,-l[1]*this.getScale()*Ag,0]),this.viewGL.camera.viewMatrix.array=s;var u=[];Wh.invert(u,s),this.viewGL.camera.worldTransform.array=u,this.viewGL.camera.decomposeWorldTransform();var c=I_*this.getScale(),h;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var f=this.altitudeExtent[1]-this.altitudeExtent[0];h=this.boxHeight/f*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else h=c/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*Ag;this.viewGL.rootNode.scale.set(this.getScale()*Ag,this.getScale()*Ag,h)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(e,t){return this.projectOnTileWithScale(e,this.getScale()*I_,t)},projectOnTileWithScale:function(e,t,n){var r=e[0],i=e[1],a=r*ao/180,o=i*ao/180,s=t*(a+ao)/(2*ao),l=t*(ao-Math.log(Math.tan(ao/4+o*.5)))/(2*ao);return n=n||[],n[0]=s,n[1]=l,n},unprojectFromTile:function(e,t){return this.unprojectOnTileWithScale(e,this.getScale()*I_,t)},unprojectOnTileWithScale:function(e,t,n){var r=e[0],i=e[1],a=r/t*(2*ao)-ao,o=2*(Math.atan(Math.exp(ao-i/t*(2*ao)))-ao/4);return n=n||[],n[0]=a*180/ao,n[1]=o*180/ao,n},dataToPoint:function(e,t){return t=this.projectOnTileWithScale(e,I_,t),t[0]-=this._origin[0],t[1]-=this._origin[1],t[2]=isNaN(e[2])?0:e[2],isNaN(e[2])||(t[2]=e[2],this.altitudeExtent&&(t[2]-=this.altitudeExtent[0])),t}};function zb(){Ty.apply(this,arguments)}zb.prototype=new Ty;zb.prototype.constructor=zb;zb.prototype.type="mapbox3D";function frt(e,t,n){function r(a,o){var s=o.getWidth(),l=o.getHeight(),u=o.getDevicePixelRatio();this.viewGL.setViewport(0,0,s,l,u),this.width=s,this.height=l,this.altitudeScale=a.get("altitudeScale"),this.boxHeight=a.get("boxHeight")}function i(a,o){if(this.model.get("boxHeight")!=="auto"){var s=[1/0,-1/0];a.eachSeries(function(l){if(l.coordinateSystem===this){var u=l.getData(),c=l.coordDimToDataDim("alt")[0];if(c){var h=u.getDataExtent(c,!0);s[0]=Math.min(s[0],h[0]),s[1]=Math.max(s[1],h[1])}}},this),s&&isFinite(s[1]-s[0])&&(this.altitudeExtent=s)}}return{dimensions:t.prototype.dimensions,create:function(a,o){var s=[];return a.eachComponent(e,function(l){var u=l.__viewGL;u||(u=l.__viewGL=new Yn,u.setRootNode(new V.Node));var c=new t;c.viewGL=l.__viewGL,c.resize=r,c.resize(l,o),s.push(c),l.coordinateSystem=c,c.model=l,c.update=i}),a.eachSeries(function(l){if(l.get("coordinateSystem")===e){var u=l.getReferringComponents(e).models[0];if(u||(u=a.getComponent(e)),!u)throw new Error(e+' "'+an.firstNotNull(l.get(e+"Index"),l.get(e+"Id"),0)+'" not found');l.coordinateSystem=u.coordinateSystem}}),n&&n(s,a,o),s}}}var uOt=frt("mapbox3D",zb,function(e){e.forEach(function(t){t.setCameraOption(t.model.getMapboxCameraOption())})});function cOt(e){e.registerComponentModel(qF),e.registerComponentView(lOt),e.registerCoordinateSystem("mapbox3D",uOt),e.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(t,n){n.eachComponent({mainType:"mapbox3D",query:t},function(r){r.setMapboxCameraOption(t)})})}ue(cOt);var r9=["zoom","center","pitch","bearing"],KF=Ie.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var e=this;return r9.reduce(function(t,n){return t[n]=e.get(n),t},{})},setMaptalksCameraOption:function(e){e!=null&&r9.forEach(function(t){e[t]!=null&&(this.option[t]=e[t])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(e){this._maptalks=e}});Xt(KF.prototype,m0);Xt(KF.prototype,y0);function fd(e,t,n,r){if(this.id=e,this.zr=t,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:n,zoom:r,doubleClickZoom:!1,fog:!1}),this._initEvents()}fd.prototype.setUnpainted=function(){};fd.prototype.resize=function(){this._maptalks.checkSize()};fd.prototype.getMaptalks=function(){return this._maptalks};fd.prototype.clear=function(){};fd.prototype.refresh=function(){this._maptalks.checkSize()};var drt=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];fd.prototype._initEvents=function(){var e=this.dom;this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},drt.forEach(function(t){this._handlers[t]=function(n){var r={};for(var i in n)r[i]=n[i];r.bubbles=!1;var a=new n.constructor(n.type,r);t==="mousewheel"||t==="DOMMouseScroll"?e.dispatchEvent(a):e.firstElementChild.dispatchEvent(a)},this.zr.dom.addEventListener(t,this._handlers[t])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)};fd.prototype.dispose=function(){drt.forEach(function(e){this.zr.dom.removeEventListener(e,this._handlers[e])},this),this._maptalks.remove()};V.Shader.import(hrt);const hOt=Zn.extend({type:"maptalks3D",__ecgl__:!0,init:function(e,t){this._groundMesh=new V.Mesh({geometry:new V.PlaneGeometry,material:new V.Material({shader:new V.Shader({vertex:V.Shader.source("ecgl.displayShadow.vertex"),fragment:V.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(e,t){var n=t.getZr();this._zrLayer=new fd("maptalks3D",n,e.get("center"),e.get("zoom")),n.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new V.Node,this._sceneHelper=new Wf(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var r=this._zrLayer.getMaptalks(),i=this._dispatchInteractAction.bind(this,t,r);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(a){r.on(a,i)})},render:function(e,t,n){this._zrLayer||this._initMaptalksLayer(e,n);var r=this._zrLayer.getMaptalks(),i=e.get("urlTemplate"),a=r.getBaseLayer();i!==this._oldUrlTemplate&&(a?a.setOptions({urlTemplate:i,attribution:e.get("attribution")}):(a=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:i,subdomains:["a","b","c"],attribution:e.get("attribution")}),r.setBaseLayer(a))),this._oldUrlTemplate=i,r.setCenter(e.get("center")),r.setZoom(e.get("zoom"),{animation:!1}),r.setPitch(e.get("pitch")),r.setBearing(e.get("bearing")),e.setMaptalks(r);var o=e.coordinateSystem;o.viewGL.scene.add(this._lightRoot),o.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(o.viewGL.scene),this._sceneHelper.updateLight(e),o.viewGL.setPostEffect(e.getModel("postEffect"),n),o.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling")),this._maptalks3DModel=e},afterRender:function(e,t,n,r){var i=r.renderer;this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n),e.coordinateSystem.viewGL.scene.traverse(function(a){a.material&&(a.material.define("fragment","NORMAL_UP_AXIS",2),a.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(e,t,n,r){e.coordinateSystem.setCameraOption(r),this._updateGroundMesh(),n.getZr().refresh()},_dispatchInteractAction:function(e,t,n){e.dispatchAction({type:"maptalks3DChangeCamera",pitch:t.getPitch(),zoom:dOt(t.getResolution())+1,center:t.getCenter().toArray(),bearing:t.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var e=this._maptalks3DModel.coordinateSystem,t=e.dataToPoint(e.center);this._groundMesh.position.set(t[0],t[1],-.001);var n=new V.Plane(new V.Vector3(0,0,1),0),r=e.viewGL.camera.castRay(new V.Vector2(-1,-1)),i=e.viewGL.camera.castRay(new V.Vector2(1,1)),a=r.intersectPlane(n),o=i.intersectPlane(n),s=a.dist(o)/e.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(e,t){this._zrLayer&&this._zrLayer.dispose(),t.getZr().painter.delLayer(-1e3)}}),fOt=2*6378137*Math.PI/(256*Math.pow(2,20));function dOt(e){return 19-Math.log(e/fOt)/Math.LN2}function Ub(){Ty.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Ub.prototype=new Ty;Ub.prototype.constructor=Ub;Ub.prototype.type="maptalks3D";var pOt=frt("maptalks3D",Ub,function(e){e.forEach(function(t){t.setCameraOption(t.model.getMaptalksCameraOption())})});function vOt(e){e.registerComponentModel(KF),e.registerComponentView(hOt),e.registerCoordinateSystem("maptalks3D",pOt),e.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(t,n){n.eachComponent({mainType:"maptalks3D",query:t},function(r){r.setMaptalksCameraOption(t)})})}ue(vOt);var gOt=ei.vec3,mOt=Ik.isDimensionStacked;function yOt(e){var t=e[0],n=e[1];return!(t>0&&n>0||t<0&&n<0)}function _Ot(e,t){var n=e.getData(),r=e.get("barSize");if(r==null){var i=t.size,a,o,s=t.getAxis("x"),l=t.getAxis("y");s.type==="category"?a=s.getBandWidth()*.7:a=Math.round(i[0]/Math.sqrt(n.count()))*.6,l.type==="category"?o=l.getBandWidth()*.7:o=Math.round(i[1]/Math.sqrt(n.count()))*.6,r=[a,o]}else ht(r)||(r=[r,r]);var u=t.getAxis("z").scale.getExtent(),c=yOt(u),h=["x","y","z"].map(function(p){return e.coordDimToDataDim(p)[0]}),f=mOt(n,h[2]),d=f?n.getCalculationInfo("stackResultDimension"):h[2];n.each(h,function(p,v,g,m){var _=n.get(d,m),y=f?_-g:c?0:u[0],x=t.dataToPoint([p,v,y]),S=t.dataToPoint([p,v,_]),b=gOt.dist(x,S),w=[0,S[1]<x[1]?-1:1,0];Math.abs(b)===0&&(b=.1);var A=[r[0],b,r[1]];n.setItemLayout(m,[x,w,A])}),n.setLayout("orient",[1,0,0])}function ZF(e,t,n){for(var r=e.getDataExtent(t),i=e.getDataExtent(n),a=r[1]-r[0]||r[0],o=i[1]-i[0]||i[0],s=50,l=new Uint8Array(s*s),u=0;u<e.count();u++){var c=e.get(t,u),h=e.get(n,u),f=Math.floor((c-r[0])/a*(s-1)),d=Math.floor((h-i[0])/o*(s-1)),p=d*s+f;l[p]=l[p]||1}for(var v=0,u=0;u<l.length;u++)l[u]&&v++;return v/l.length}var i9=ei.vec3,xOt=Ik.isDimensionStacked;function bOt(e,t){var n=e.getData(),r=e.get("minHeight")||0,i=e.get("barSize"),a=["lng","lat","alt"].map(function(u){return e.coordDimToDataDim(u)[0]});if(i==null){var o=t.radius*Math.PI,s=ZF(n,a[0],a[1]);i=[o/Math.sqrt(n.count()/s),o/Math.sqrt(n.count()/s)]}else ht(i)||(i=[i,i]);var l=JF(n,a);n.each(a,function(u,c,h,f){var d=n.get(l.dimension,f),p=l.isStacked?d-h:t.altitudeAxis.scale.getExtent()[0],v=Math.max(t.altitudeAxis.dataToCoord(h),r),g=t.dataToPoint([u,c,p]),m=t.dataToPoint([u,c,d]),_=i9.sub([],m,g);i9.normalize(_,_);var y=[i[0],v,i[1]];n.setItemLayout(f,[g,_,y])}),n.setLayout("orient",gt.UP.array)}function SOt(e,t){var n=e.getData(),r=e.get("barSize"),i=e.get("minHeight")||0,a=["lng","lat","alt"].map(function(c){return e.coordDimToDataDim(c)[0]});if(r==null){var o=Math.min(t.size[0],t.size[2]),s=ZF(n,a[0],a[1]);r=[o/Math.sqrt(n.count()/s),o/Math.sqrt(n.count()/s)]}else ht(r)||(r=[r,r]);var l=[0,1,0],u=JF(n,a);n.each(a,function(c,h,f,d){var p=n.get(u.dimension,d),v=u.isStacked?p-f:t.altitudeAxis.scale.getExtent()[0],g=Math.max(t.altitudeAxis.dataToCoord(f),i),m=t.dataToPoint([c,h,v]),_=[r[0],g,r[1]];n.setItemLayout(d,[m,l,_])}),n.setLayout("orient",[1,0,0])}function wOt(e,t){var n=e.getData(),r=e.coordDimToDataDim("lng")[0],i=e.coordDimToDataDim("lat")[0],a=e.coordDimToDataDim("alt")[0],o=e.get("barSize"),s=e.get("minHeight")||0;if(o==null){var l=n.getDataExtent(r),u=n.getDataExtent(i),c=t.dataToPoint([l[0],u[0]]),h=t.dataToPoint([l[1],u[1]]),f=Math.min(Math.abs(c[0]-h[0]),Math.abs(c[1]-h[1]))||1,d=ZF(n,r,i);o=[f/Math.sqrt(n.count()/d),f/Math.sqrt(n.count()/d)]}else ht(o)||(o=[o,o]),o[0]/=t.getScale()/16,o[1]/=t.getScale()/16;var p=[0,0,1],v=[r,i,a],g=JF(n,v);n.each(v,function(m,_,y,x){var S=n.get(g.dimension,x),b=g.isStacked?S-y:0,w=t.dataToPoint([m,_,b]),A=t.dataToPoint([m,_,S]),T=Math.max(A[2]-w[2],s),M=[o[0],T,o[1]];n.setItemLayout(x,[w,p,M])}),n.setLayout("orient",[1,0,0])}function JF(e,t){var n=xOt(e,t[2]);return{dimension:n?e.getCalculationInfo("stackResultDimension"):t[2],isStacked:n}}function TOt(e){e.registerLayout(function(t,n){t.eachSeriesByType("bar3D",function(r){var i=r.coordinateSystem,a=i&&i.type;a==="globe"?bOt(r,i):a==="cartesian3D"?_Ot(r,i):a==="geo3D"?SOt(r,i):(a==="mapbox3D"||a==="maptalks3D")&&wOt(r,i)})})}var dd={};dd.getFormattedLabel=function(e,t,n,r,i){n=n||"normal";var a=e.getData(r),o=a.getItemModel(t),s=e.getDataParams(t,r);i!=null&&s.value instanceof Array&&(s.value=s.value[i]);var l=o.get(n==="normal"?["label","formatter"]:["emphasis","label","formatter"]);l==null&&(l=o.get(["label","formatter"]));var u;return typeof l=="function"?(s.status=n,u=l(s)):typeof l=="string"&&(u=nk(l,s)),u};dd.normalizeToArray=function(e){return e instanceof Array?e:e==null?[]:[e]};function MOt(e,t){var n=[];return R(e.dimensions,function(r){var i=e.getDimensionInfo(r),a=i.otherDims,o=a[t];o!=null&&o!==!1&&(n[o]=i.name)}),n}function U1(e,t,n){function r(h){var f=[],d=MOt(i,"tooltip");d.length?R(d,function(v){p(i.get(v,t),v)}):R(h,p);function p(v,g){var m=i.getDimensionInfo(g);if(!(!m||m.otherDims.tooltip===!1)){var _=m.type,y="- "+(m.tooltipName||m.name)+": "+(_==="ordinal"?v+"":_==="time"?n?"":vgt("yyyy/MM/dd hh:mm:ss",v):qM(v));y&&f.push(Ti(y))}}return"<br/>"+f.join("<br/>")}var i=e.getData(),a=e.getRawValue(t),o=ht(a)?r(a):Ti(qM(a)),s=i.getName(t),l=Bi(i,t);se(l)&&l.colorStops&&(l=(l.colorStops[0]||{}).color),l=l||"transparent";var u=_Z(l),c=e.name;return c==="\0-"&&(c=""),c=c?Ti(c)+(n?": ":"<br/>"):"",n?u+c+o:c+u+(s?Ti(s)+": "+o:o)}function HE(e,t,n){n=n||e.getSource();var r=t||PJ(e.get("coordinateSystem"))||["x","y","z"],i=T1(n,{dimensionsDefine:n.dimensionsDefine||e.get("dimensions"),encodeDefine:n.encodeDefine||e.get("encode"),coordDimensions:r.map(function(s){var l=e.getReferringComponents(s+"Axis3D").models[0];return{type:l&&l.get("type")==="category"?"ordinal":"float",name:s}})});e.get("coordinateSystem")==="cartesian3D"&&i.forEach(function(s){if(r.indexOf(s.coordDim)>=0){var l=e.getReferringComponents(s.coordDim+"Axis3D").models[0];l&&l.get("type")==="category"&&(s.ordinalMeta=l.getOrdinalMeta())}});var a=Ik.enableDataStack(e,i,{byIndex:!0,stackedCoordDimension:"z"}),o=new Ir(i,e);return o.setCalculationInfo(a),o.initData(n),o}var prt=bn.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(e,t){return HE(this)},getFormattedLabel:function(e,t,n,r){var i=dd.getFormattedLabel(this,e,t,n,r);return i==null&&(i=this.getData().get("z",e)),i},formatTooltip:function(e){return U1(this,e)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});Xt(prt.prototype,x0);var Br=ei.vec3,AOt=ei.mat3,QF=cn.extend(function(){return{attributes:{position:new cn.Attribute("position","float",3,"POSITION"),normal:new cn.Attribute("normal","float",3,"NORMAL"),color:new cn.Attribute("color","float",4,"COLOR"),prevPosition:new cn.Attribute("prevPosition","float",3),prevNormal:new cn.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(e){var t=this.enableNormal,n=this.getBarVertexCount()*e,r=this.getBarTriangleCount()*e;this.vertexCount!==n&&(this.attributes.position.init(n),t?this.attributes.normal.init(n):this.attributes.normal.value=null,this.attributes.color.init(n)),this.triangleCount!==r&&(this.indices=n>65535?new Uint32Array(r*3):new Uint16Array(r*3),this._dataIndices=new Uint32Array(n))},getBarVertexCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarVertexCount(e):this.enableNormal?24:8},getBarTriangleCount:function(){var e=this.bevelSize>0?this.bevelSegments:0;return e>0?this._getBevelBarTriangleCount(e):12},_getBevelBarVertexCount:function(e){return(e+1)*4*(e+1)*2},_getBevelBarTriangleCount:function(e){var t=e*4+3,n=e*2+1;return(t+1)*n*2+4},setColor:function(e,t){for(var n=this.getBarVertexCount(),r=n*e,i=n*(e+1),a=r;a<i;a++)this.attributes.color.set(a,t);this.dirtyAttribute("color")},getDataIndexOfVertex:function(e){return this._dataIndices?this._dataIndices[e]:null},addBar:function(){for(var e=Br.create,t=Br.scaleAndAdd,n=e(),r=e(),i=e(),a=e(),o=e(),s=e(),l=e(),u=[],c=[],h=0;h<8;h++)u[h]=e();for(var f=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],d=[0,1,2,0,2,3],p=[],h=0;h<f.length;h++)for(var v=f[h],g=0;g<2;g++){for(var m=[],_=0;_<3;_++)m.push(v[d[g*3+_]]);p.push(m)}return function(y,x,S,b,w,A){var T=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(y,x,S,b,this.bevelSize,this.bevelSegments,w);else{Br.copy(i,x),Br.normalize(i,i),Br.cross(a,S,i),Br.normalize(a,a),Br.cross(r,i,a),Br.normalize(a,a),Br.negate(o,r),Br.negate(s,i),Br.negate(l,a),t(u[0],y,r,b[0]/2),t(u[0],u[0],a,b[2]/2),t(u[1],y,r,b[0]/2),t(u[1],u[1],l,b[2]/2),t(u[2],y,o,b[0]/2),t(u[2],u[2],l,b[2]/2),t(u[3],y,o,b[0]/2),t(u[3],u[3],a,b[2]/2),t(n,y,i,b[1]),t(u[4],n,r,b[0]/2),t(u[4],u[4],a,b[2]/2),t(u[5],n,r,b[0]/2),t(u[5],u[5],l,b[2]/2),t(u[6],n,o,b[0]/2),t(u[6],u[6],l,b[2]/2),t(u[7],n,o,b[0]/2),t(u[7],u[7],a,b[2]/2);var M=this.attributes;if(this.enableNormal){c[0]=r,c[1]=o,c[2]=i,c[3]=s,c[4]=a,c[5]=l;for(var C=this._vertexOffset,E=0;E<f.length;E++){for(var D=this._triangleOffset*3,I=0;I<6;I++)this.indices[D++]=C+d[I];C+=4,this._triangleOffset+=2}for(var E=0;E<f.length;E++)for(var L=c[E],I=0;I<4;I++){var P=f[E][I];M.position.set(this._vertexOffset,u[P]),M.normal.set(this._vertexOffset,L),M.color.set(this._vertexOffset++,w)}}else{for(var E=0;E<p.length;E++){for(var D=this._triangleOffset*3,I=0;I<3;I++)this.indices[D+I]=p[E][I]+this._vertexOffset;this._triangleOffset++}for(var E=0;E<u.length;E++)M.position.set(this._vertexOffset,u[E]),M.color.set(this._vertexOffset++,w)}}for(var B=this._vertexOffset,E=T;E<B;E++)this._dataIndices[E]=A}}(),_addBevelBar:function(){var e=Br.create(),t=Br.create(),n=Br.create(),r=AOt.create(),i=[],a=[1,-1,-1,1],o=[1,1,-1,-1],s=[2,0];return function(l,u,c,h,f,d,p){Br.copy(t,u),Br.normalize(t,t),Br.cross(n,c,t),Br.normalize(n,n),Br.cross(e,t,n),Br.normalize(n,n),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r[6]=n[0],r[7]=n[1],r[8]=n[2],f=Math.min(h[0],h[2])/2*f;for(var v=0;v<3;v++)i[v]=Math.max(h[v]-f*2,0);for(var g=(h[0]-i[0])/2,m=(h[1]-i[1])/2,_=(h[2]-i[2])/2,y=[],x=[],S=this._vertexOffset,b=[],v=0;v<2;v++){b[v]=b[v]=[];for(var w=0;w<=d;w++)for(var A=0;A<4;A++){(w===0&&v===0||v===1&&w===d)&&b[v].push(S);for(var T=0;T<=d;T++){var M=T/d*Math.PI/2+Math.PI/2*A,C=w/d*Math.PI/2+Math.PI/2*v;x[0]=g*Math.cos(M)*Math.sin(C),x[1]=m*Math.cos(C),x[2]=_*Math.sin(M)*Math.sin(C),y[0]=x[0]+a[A]*i[0]/2,y[1]=x[1]+m+s[v]*i[1]/2,y[2]=x[2]+o[A]*i[2]/2,Math.abs(g-m)<1e-6&&Math.abs(m-_)<1e-6||(x[0]/=g*g,x[1]/=m*m,x[2]/=_*_),Br.normalize(x,x),Br.transformMat3(y,y,r),Br.transformMat3(x,x,r),Br.add(y,y,l),this.attributes.position.set(S,y),this.enableNormal&&this.attributes.normal.set(S,x),this.attributes.color.set(S,p),S++}}}for(var E=d*4+3,D=d*2+1,I=E+1,A=0;A<D;A++)for(var v=0;v<=E;v++){var L=A*I+v+this._vertexOffset,P=A*I+(v+1)%I+this._vertexOffset,B=(A+1)*I+(v+1)%I+this._vertexOffset,N=(A+1)*I+v+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[B,L,P]),this.setTriangleIndices(this._triangleOffset++,[B,N,L])}this.setTriangleIndices(this._triangleOffset++,[b[0][0],b[0][2],b[0][1]]),this.setTriangleIndices(this._triangleOffset++,[b[0][0],b[0][3],b[0][2]]),this.setTriangleIndices(this._triangleOffset++,[b[1][0],b[1][1],b[1][2]]),this.setTriangleIndices(this._triangleOffset++,[b[1][0],b[1][2],b[1][3]]),this._vertexOffset=S}}()});te(QF.prototype,F1);te(QF.prototype,jF);var COt=ei.vec3;const EOt=hn.extend({type:"bar3D",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this._api=t,this._labelsBuilder=new bh(256,256,t);var n=this;this._labelsBuilder.getLabelPosition=function(r,i,a){if(n._data){var o=n._data.getItemLayout(r),s=o[0],l=o[1],u=o[2][1];return COt.scaleAndAdd([],s,l,a+u)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(e,t,n){var r=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=r,this._barMesh||(this._barMesh=new V.Mesh({geometry:new QF,shadowDepthMaterial:new V.Material({shader:new V.Shader(V.Shader.source("ecgl.sm.depth.vertex"),V.Shader.source("ecgl.sm.depth.fragment"))}),culling:e.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var i=e.coordinateSystem;if(this._doRender(e,n),i&&i.viewGL){i.viewGL.add(this.groupGL);var a=i.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[a]("fragment","SRGB_DECODE")}this._data=e.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(e)},_updateAnimation:function(e){V.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,e)},_doRender:function(e,t){var n=e.getData(),r=e.get("shading"),i=r!=="color",a=this,o=this._barMesh,s="ecgl."+r;(!o.material||o.material.shader.name!==s)&&(o.material=V.createMaterial(s,["VERTEX_COLOR"])),V.setMaterialFromModel(r,o.material,e,t),o.geometry.enableNormal=i,o.geometry.resetOffset();var l=e.get("bevelSize"),u=e.get("bevelSmoothness");o.geometry.bevelSegments=u,o.geometry.bevelSize=l;var c=[],h=new Float32Array(n.count()*4),f=0,g=0,d=!1;n.each(function(_){if(n.hasValue(_)){var y=Bi(n,_),x=Li(n,_);x==null&&(x=1),V.parseColor(y,c),c[3]*=x,h[f++]=c[0],h[f++]=c[1],h[f++]=c[2],h[f++]=c[3],c[3]>0&&(g++,c[3]<.99&&(d=!0))}}),o.geometry.setBarCount(g);var p=n.getLayout("orient"),v=this._barIndexOfData=new Int32Array(n.count()),g=0;n.each(function(_){if(!n.hasValue(_)){v[_]=-1;return}var y=n.getItemLayout(_),x=y[0],S=y[1],b=y[2],w=_*4;c[0]=h[w++],c[1]=h[w++],c[2]=h[w++],c[3]=h[w++],c[3]>0&&(a._barMesh.geometry.addBar(x,S,p,b,c,_),v[_]=g++)}),o.geometry.dirty(),o.geometry.updateBoundingBox();var m=o.material;m.transparent=d,m.depthMask=!d,o.geometry.sortTriangles=d,this._initHandler(e,t)},_initHandler:function(e,t){var n=e.getData(),r=this._barMesh,i=e.coordinateSystem.type==="cartesian3D";r.seriesIndex=e.seriesIndex;var a=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(o){var s=r.geometry.getDataIndexOfVertex(o.triangle[0]);s!==a&&(this._downplay(a),this._highlight(s),this._labelsBuilder.updateLabels([s]),i&&t.dispatchAction({type:"grid3DShowAxisPointer",value:[n.get("x",s),n.get("y",s),n.get("z",s,!0)]})),a=s,r.dataIndex=s},this),r.on("mouseout",function(o){this._downplay(a),this._labelsBuilder.updateLabels(),a=-1,r.dataIndex=-1,i&&t.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(e){var t=this._data;if(t){var n=this._barIndexOfData[e];if(!(n<0)){var r=t.getItemModel(e),i=r.getModel("emphasis.itemStyle"),a=i.get("color"),o=i.get("opacity");if(a==null){var s=Bi(t,e);a=oy(s,-.4)}o==null&&(o=Li(t,e));var l=V.parseColor(a);l[3]*=o,this._barMesh.geometry.setColor(n,l),this._api.getZr().refresh()}}},_downplay:function(e){var t=this._data;if(t){var n=this._barIndexOfData[e];if(!(n<0)){var r=Bi(t,e),i=Li(t,e),a=V.parseColor(r);a[3]*=i,this._barMesh.geometry.setColor(n,a),this._api.getZr().refresh()}}},highlight:function(e,t,n,r){this._toggleStatus("highlight",e,t,n,r)},downplay:function(e,t,n,r){this._toggleStatus("downplay",e,t,n,r)},_toggleStatus:function(e,t,n,r,i){var a=t.getData(),o=an.queryDataIndex(a,i),s=this;o!=null?R(dd.normalizeToArray(o),function(l){e==="highlight"?this._highlight(l):this._downplay(l)},this):a.each(function(l){e==="highlight"?s._highlight(l):s._downplay(l)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function DOt(e){e.registerChartView(EOt),e.registerSeriesModel(prt),TOt(e),e.registerProcessor(function(t,n){t.eachSeriesByType("bar3d",function(r){var i=r.getData();i.filterSelf(function(a){return i.hasValue(a)})})})}ue(DOt);var IOt=bn.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,t){return HE(this)},formatTooltip:function(e){return U1(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),LOt=ei.vec3;V.Shader.import(GE);const POt=hn.extend({type:"line3D",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this._api=t},render:function(e,t,n){var r=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=r,this._line3DMesh||(this._line3DMesh=new V.Mesh({geometry:new cd({useNativeLine:!1,sortTriangles:!0}),material:new V.Material({shader:V.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var i=e.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL);var a=i.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[a]("fragment","SRGB_DECODE")}this._doRender(e,n),this._data=e.getData(),this._camera=i.viewGL.camera,this.updateCamera(),this._updateAnimation(e)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(e,t){var n=e.getData(),r=this._line3DMesh;r.geometry.resetOffset();var i=n.getLayout("points"),a=[],o=new Float32Array(i.length/3*4),s=0,l=!1;n.each(function(h){var f=Bi(n,h),d=Li(n,h);d==null&&(d=1),V.parseColor(f,a),a[3]*=d,o[s++]=a[0],o[s++]=a[1],o[s++]=a[2],o[s++]=a[3],a[3]<.99&&(l=!0)}),r.geometry.setVertexCount(r.geometry.getPolylineVertexCount(i)),r.geometry.setTriangleCount(r.geometry.getPolylineTriangleCount(i)),r.geometry.addPolyline(i,o,an.firstNotNull(e.get("lineStyle.width"),1)),r.geometry.dirty(),r.geometry.updateBoundingBox();var u=r.material;u.transparent=l,u.depthMask=!l;var c=e.getModel("debug.wireframe");c.get("show")?(r.geometry.createAttribute("barycentric","float",3),r.geometry.generateBarycentric(),r.material.set("both","WIREFRAME_TRIANGLE"),r.material.set("wireframeLineColor",V.parseColor(c.get("lineStyle.color")||"rgba(0,0,0,0.5)")),r.material.set("wireframeLineWidth",an.firstNotNull(c.get("lineStyle.width"),1))):r.material.set("both","WIREFRAME_TRIANGLE"),this._points=i,this._initHandler(e,t)},_updateAnimation:function(e){V.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,e)},_initHandler:function(e,t){var n=e.getData(),r=e.coordinateSystem,i=this._line3DMesh,a=-1;i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(o){var s=r.pointToData(o.point.array),l=n.indicesOfNearest("x",s[0])[0];l!==a&&(t.dispatchAction({type:"grid3DShowAxisPointer",value:[n.get("x",l),n.get("y",l),n.get("z",l)]}),i.dataIndex=l),a=l},this),i.on("mouseout",function(o){a=-1,i.dataIndex=-1,t.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var e=new Ht,t=this._camera;Ht.multiply(e,t.projectionMatrix,t.viewMatrix);var n=this._positionNDC,r=this._points,i=r.length/3;(!n||n.length/2!==i)&&(n=this._positionNDC=new Float32Array(i*2));for(var a=[],o=0;o<i;o++){var s=o*3,l=o*2;a[0]=r[s],a[1]=r[s+1],a[2]=r[s+2],a[3]=1,LOt.transformMat4(a,a,e.array),n[l]=a[0]/a[3],n[l+1]=a[1]/a[3]}},_pick:function(e,t,n,r,i,a){var o=this._positionNDC,s=this._data.hostModel,l=s.get("lineStyle.width"),u=-1,c=n.viewport.width,h=n.viewport.height,f=c*.5,d=h*.5;e=(e+1)*f,t=(t+1)*d;for(var p=1;p<o.length/2;p++){var v=(o[(p-1)*2]+1)*f,g=(o[(p-1)*2+1]+1)*d,m=(o[p*2]+1)*f,_=(o[p*2+1]+1)*d;if(Mc(v,g,m,_,l,e,t)){var y=(v-e)*(v-e)+(g-t)*(g-t),x=(m-e)*(m-e)+(_-t)*(_-t);u=y<x?p-1:p}}if(u>=0){var S=u*3,b=new gt(this._points[S],this._points[S+1],this._points[S+2]);a.push({dataIndex:u,point:b,pointWorld:b.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(b)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function ROt(e){e.registerChartView(POt),e.registerSeriesModel(IOt),e.registerLayout(function(t,n){t.eachSeriesByType("line3D",function(r){var i=r.getData(),a=r.coordinateSystem;if(a){if(a.type!=="cartesian3D")return;var o=new Float32Array(i.count()*3),s=[],l=[],u=a.dimensions,c=u.map(function(h){return r.coordDimToDataDim(h)[0]});a&&i.each(c,function(h,f,d,p){s[0]=h,s[1]=f,s[2]=d,a.dataToPoint(s,l),o[p*3]=l[0],o[p*3+1]=l[1],o[p*3+2]=l[2]}),i.setLayout("points",o)}})})}ue(ROt);const OOt=bn.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(e,t){return HE(this)},getFormattedLabel:function(e,t,n,r){var i=dd.getFormattedLabel(this,e,t,n,r);if(i==null){var a=this.getData(),o=a.dimensions[a.dimensions.length-1];i=a.get(o,e)}return i},formatTooltip:function(e){return U1(this,e)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function UL(e,r,n){var r=r||document.createElement("canvas");r.width=e,r.height=e;var i=r.getContext("2d");return n&&n(i),r}function NOt(e,t,n,r){ht(t)||(t=[t,t]);var i=UA.getMarginByStyle(n,r),a=t[0]+i.left+i.right,o=t[1]+i.top+i.bottom,s=Jr(e,0,0,t[0],t[1]),l=Math.max(a,o);s.x=i.left,s.y=i.top,a>o?s.y+=(l-o)/2:s.x+=(l-a)/2;var u=s.getBoundingRect();return s.x-=u.x,s.y-=u.y,s.setStyle(n),s.update(),s.__size=l,s}function BOt(e,t,n){var r=t.width,i=t.height,a=e.canvas.width,o=e.canvas.height,s=r/a,l=i/o;function u(m){return m<128?1:-1}function c(m,_){var y=1/0;m=Math.floor(m*s),_=Math.floor(_*l);for(var x=_*r+m,S=t.data[x*4],b=u(S),w=Math.max(_-n,0);w<Math.min(_+n,i);w++)for(var A=Math.max(m-n,0);A<Math.min(m+n,r);A++){var x=w*r+A,T=t.data[x*4],M=u(T),C=A-m,E=w-_;if(b!==M){var D=C*C+E*E;D<y&&(y=D)}}return b*Math.sqrt(y)}for(var h=e.createImageData(a,o),f=0;f<o;f++)for(var d=0;d<a;d++){var p=c(d,f),v=p/n*.5+.5,g=(f*a+d)*4;h.data[g++]=(1-v)*255,h.data[g++]=(1-v)*255,h.data[g++]=(1-v)*255,h.data[g++]=255}return h}var UA={getMarginByStyle:function(e){var t=e.minMargin||0,n=0;e.stroke&&e.stroke!=="none"&&(n=e.lineWidth==null?1:e.lineWidth);var r=e.shadowBlur||0,i=e.shadowOffsetX||0,a=e.shadowOffsetY||0,o={};return o.left=Math.max(n/2,-i+r,t),o.right=Math.max(n/2,i+r,t),o.top=Math.max(n/2,-a+r,t),o.bottom=Math.max(n/2,a+r,t),o},createSymbolSprite:function(e,t,n,r){var i=NOt(e,t,n),a=UA.getMarginByStyle(n);return{image:UL(i.__size,r,function(o){SE(o,i)}),margin:a}},createSDFFromCanvas:function(e,t,n,r){return UL(t,r,function(i){var a=e.getContext("2d"),o=a.getImageData(0,0,e.width,e.height);i.putImageData(BOt(i,o,n),0,0)})},createSimpleSprite:function(e,t){return UL(e,t,function(n){var r=e/2;n.beginPath(),n.arc(r,r,60,0,Math.PI*2,!1),n.closePath();var i=n.createRadialGradient(r,r,0,r,r,r);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=i,n.fill()})}},a9=ei.vec3;const kOt={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(e,t){var n=this.indices,r=a9.create();if(!n){n=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var i=0;i<n.length;i++)n[i]=i}if(t===0){var a=this.attributes.position,e=e.array,o=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var s,i=0;i<this.vertexCount;i++){a.get(i,r);var l=a9.sqrDist(r,e);isNaN(l)&&(l=1e7,o++),i===0?(s=l,l=0):l=l-s,this._zList[i]=l}this._noneCount=o}if(this.vertexCount<2e4)t===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var i=0;i<3;i++)this._progressiveQuickSort(t*3+i);this.dirtyIndices()},_simpleSort:function(e){var t=this._zList,n=this.indices;function r(i,a){return t[a]-t[i]}e?Array.prototype.sort.call(n,r):Sy.sort(n,r,0,n.length-1)},_progressiveQuickSort:function(e){var t=this._zList,n=this.indices;this._quickSort=this._quickSort||new Sy,this._quickSort.step(n,function(r,i){return t[i]-t[r]},e)}},FOt=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`;var VL=ei.vec4;V.Shader.import(FOt);var zOt=V.Mesh.extend(function(){var e=new V.Geometry({dynamic:!0,attributes:{color:new V.Geometry.Attribute("color","float",4,"COLOR"),position:new V.Geometry.Attribute("position","float",3,"POSITION"),size:new V.Geometry.Attribute("size","float",1),prevPosition:new V.Geometry.Attribute("prevPosition","float",3),prevSize:new V.Geometry.Attribute("prevSize","float",1)}});Object.assign(e,kOt);var t=new V.Material({shader:V.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});t.enableTexture("sprite"),t.define("both","VERTEX_COLOR"),t.define("both","VERTEX_SIZE");var n=new V.Texture2D({image:document.createElement("canvas"),flipY:!1});return t.set("sprite",n),e.pick=this._pick.bind(this),{geometry:e,material:t,mode:V.Mesh.POINTS,sizeScale:1}},{_pick:function(e,t,n,r,i,a){var o=this._positionNDC;if(o)for(var s=n.viewport,l=2/s.width,u=2/s.height,c=this.geometry.vertexCount-1;c>=0;c--){var h;this.geometry.indices?h=this.geometry.indices[c]:h=c;var f=o[h*2],d=o[h*2+1],p=this.geometry.attributes.size.get(h)/this.sizeScale,v=p/2;if(e>f-v*l&&e<f+v*l&&t>d-v*u&&t<d+v*u){var g=new V.Vector3,m=new V.Vector3;this.geometry.attributes.position.get(h,g.array),V.Vector3.transformMat4(m,g,this.worldTransform),a.push({vertexIndex:h,point:g,pointWorld:m,target:this,distance:m.distance(r.getWorldPosition())})}}},updateNDCPosition:function(e,t,n){var r=this._positionNDC,i=this.geometry;(!r||r.length/2!==i.vertexCount)&&(r=this._positionNDC=new Float32Array(i.vertexCount*2));for(var a=VL.create(),o=0;o<i.vertexCount;o++)i.attributes.position.get(o,a),a[3]=1,VL.transformMat4(a,a,e.array),VL.scale(a,a,1/a[3]),r[o*2]=a[0],r[o*2+1]=a[1]}}),o9=20,s9=-10;function UOt(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]}function Sv(e,t){this.rootNode=new V.Node,this.is2D=e,this._labelsBuilder=new bh(256,256,t),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=t,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Sv.prototype={constructor:Sv,highlightOnMouseover:!0,update:function(e,t,n,r,i){var a=this._prevMesh;this._prevMesh=this._mesh,this._mesh=a;var o=e.getData();if(r==null&&(r=0),i==null&&(i=o.count()),this._startDataIndex=r,this._endDataIndex=i-1,!this._mesh){var s=this._prevMesh&&this._prevMesh.material;this._mesh=new zOt({renderOrder:10,frustumCulling:!1}),s&&(this._mesh.material=s)}var s=this._mesh.material,l=this._mesh.geometry,u=l.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var c=this._getSymbolInfo(e,r,i),h=n.getDevicePixelRatio(),f=e.getModel("itemStyle").getItemStyle(),d=e.get("large"),p=1;c.maxSize>2?(p=this._updateSymbolSprite(e,f,c,h),s.enableTexture("sprite")):s.disableTexture("sprite"),u.position.init(i-r);var v=[];if(d){s.undefine("VERTEX_SIZE"),s.undefine("VERTEX_COLOR");var g=PRt(o),m=RRt(o);V.parseColor(g,v),v[3]*=m,s.set({color:v,u_Size:c.maxSize*this._sizeScale})}else s.set({color:[1,1,1,1]}),s.define("VERTEX_SIZE"),s.define("VERTEX_COLOR"),u.size.init(i-r),u.color.init(i-r),this._originalOpacity=new Float32Array(i-r);for(var _=o.getLayout("points"),y=u.position.value,x=0;x<i-r;x++){var S=x*3,b=x*2;if(this.is2D?(y[S]=_[b],y[S+1]=_[b+1],y[S+2]=s9):(y[S]=_[S],y[S+1]=_[S+1],y[S+2]=_[S+2]),!d){var g=Bi(o,x),m=Li(o,x);V.parseColor(g,v),v[3]*=m,u.color.set(x,v),v[3]<.99;var w=o.getItemVisual(x,"symbolSize");w=w instanceof Array?Math.max(w[0],w[1]):w,isNaN(w)&&(w=0),u.size.value[x]=w*p*this._sizeScale,this._originalOpacity[x]=v[3]}}this._mesh.sizeScale=p,l.updateBoundingBox(),l.dirty(),this._updateMaterial(e,f);var A=e.coordinateSystem;if(A&&A.viewGL){var T=A.viewGL.isLinearSpace()?"define":"undefine";s[T]("fragment","SRGB_DECODE")}d||this._updateLabelBuilder(e,r,i),this._updateHandler(e,t,n),this._updateAnimation(e),this._api=n},getPointsMesh:function(){return this._mesh},updateLabels:function(e){this._labelsBuilder.updateLabels(e)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(e,t,n,r){n.maxSize=Math.min(n.maxSize*2,200);var i=[];return n.aspect>1?(i[0]=n.maxSize,i[1]=n.maxSize/n.aspect):(i[1]=n.maxSize,i[0]=n.maxSize*n.aspect),i[0]=i[0]||1,i[1]=i[1]||1,(this._symbolType!==n.type||!UOt(this._symbolSize,i)||this._lineWidth!==t.lineWidth)&&(UA.createSymbolSprite(n.type,i,{fill:"#fff",lineWidth:t.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(i[0]/2,10)},this._spriteImageCanvas),UA.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),o9,this._mesh.material.get("sprite").image),this._symbolType=n.type,this._symbolSize=i,this._lineWidth=t.lineWidth),this._spriteImageCanvas.width/n.maxSize*r},_updateMaterial:function(e,t){var n=e.get("blendMode")==="lighter"?V.additiveBlend:null,r=this._mesh.material;r.blend=n,r.set("lineWidth",t.lineWidth/o9);var i=V.parseColor(t.stroke);r.set("strokeColor",i),r.transparent=!0,r.depthMask=!1,r.depthTest=!this.is2D,r.sortVertices=!this.is2D},_updateLabelBuilder:function(e,o,n){var r=e.getData(),i=this._mesh.geometry,a=i.attributes.position.value,o=this._startDataIndex,s=this._mesh.sizeScale;this._labelsBuilder.updateData(r,o,n),this._labelsBuilder.getLabelPosition=function(l,u,c){var h=(l-o)*3;return[a[h],a[h+1],a[h+2]]},this._labelsBuilder.getLabelDistance=function(l,u,c){var h=i.attributes.size.get(l-o)/s;return h/2+c},this._labelsBuilder.updateLabels()},_updateAnimation:function(e){V.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,e)},_updateHandler:function(e,t,n){var r=e.getData(),i=this._mesh,a=this,o=-1,s=e.coordinateSystem&&e.coordinateSystem.type==="cartesian3D",l;s&&(l=e.coordinateSystem.model),i.seriesIndex=e.seriesIndex,i.off("mousemove"),i.off("mouseout"),i.on("mousemove",function(u){var c=u.vertexIndex+a._startDataIndex;c!==o&&(this.highlightOnMouseover&&(this.downplay(r,o),this.highlight(r,c),this._labelsBuilder.updateLabels([c])),s&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get(e.coordDimToDataDim("x")[0],c),r.get(e.coordDimToDataDim("y")[0],c),r.get(e.coordDimToDataDim("z")[0],c)],grid3DIndex:l.componentIndex})),i.dataIndex=c,o=c},this),i.on("mouseout",function(u){var c=u.vertexIndex+a._startDataIndex;this.highlightOnMouseover&&(this.downplay(r,c),this._labelsBuilder.updateLabels()),o=-1,i.dataIndex=-1,s&&n.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:l.componentIndex})},this)},updateLayout:function(e,t,n){var r=e.getData();if(this._mesh){var i=this._mesh.geometry.attributes.position.value,a=r.getLayout("points");if(this.is2D)for(var o=0;o<a.length/2;o++){var s=o*3,l=o*2;i[s]=a[l],i[s+1]=a[l+1],i[s+2]=s9}else for(var o=0;o<a.length;o++)i[o]=a[o];this._mesh.geometry.dirty(),n.getZr().refresh()}},updateView:function(e){if(this._mesh){var t=new Ht;Ht.mul(t,e.viewMatrix,this._mesh.worldTransform),Ht.mul(t,e.projectionMatrix,t),this._mesh.updateNDCPosition(t,this.is2D,this._api)}},highlight:function(e,t){if(!(t>this._endDataIndex||t<this._startDataIndex)){var n=e.getItemModel(t),r=n.getModel("emphasis.itemStyle"),i=r.get("color"),a=r.get("opacity");if(i==null){var o=Bi(e,t);i=oy(o,-.4)}a==null&&(a=Li(e,t));var s=V.parseColor(i);s[3]*=a,this._mesh.geometry.attributes.color.set(t-this._startDataIndex,s),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(e,t){if(!(t>this._endDataIndex||t<this._startDataIndex)){var n=Bi(e,t),r=Li(e,t),i=V.parseColor(n);i[3]*=r,this._mesh.geometry.attributes.color.set(t-this._startDataIndex,i),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(e){if(this._originalOpacity){for(var t=this._mesh.geometry,n=0;n<t.vertexCount;n++){var r=this._originalOpacity[n]*e;t.attributes.color.value[n*4+3]=r}t.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(e){this._mesh&&this._setPositionTextureToMesh(this._mesh,e),this._positionTexture=e},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(e){if(e!==this._sizeScale){if(this._mesh){var t=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",t/this._sizeScale*e);var n=this._mesh.geometry.attributes;if(n.size.value)for(var r=0;r<n.size.value.length;r++)n.size.value[r]=n.size.value[r]/this._sizeScale*e}this._sizeScale=e}},_setPositionTextureToMesh:function(e,t){t&&e.material.set("positionTexture",t),e.material[t?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(e,t,n){if(e.get("large")){var r=an.firstNotNull(e.get("symbolSize"),1),s,a;return r instanceof Array?(s=Math.max(r[0],r[1]),a=r[0]/r[1]):(s=r,a=1),{maxSize:r,type:e.get("symbol"),aspect:a}}for(var i=e.getData(),a,o=i.getItemVisual(0,"symbol")||"circle",s=0,l=t;l<n;l++){var r=i.getItemVisual(l,"symbolSize"),u=i.getItemVisual(l,"symbol"),c;if(r instanceof Array)c=r[0]/r[1],s=Math.max(Math.max(r[0],r[1]),s);else{if(isNaN(r))continue;c=1,s=Math.max(r,s)}o=u,a=c}return{maxSize:s,type:o,aspect:a}}};const VOt=hn.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(e,t,n){if(this.groupGL.removeAll(),!!e.getData().count()){var r=e.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera;var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new Sv(!1,n)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),i.update(e,t,n),i.updateView(r.viewGL.camera)}}},incrementalPrepareRender:function(e,t,n){var r=e.coordinateSystem;r&&r.viewGL&&(r.viewGL.add(this.groupGL),this._camera=r.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(e,t,n,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new Sv(!1,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),i.update(t,n,r,e.start,e.end),i.updateView(t.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(e){e.updateView(this._camera)},this)},highlight:function(e,t,n,r){this._toggleStatus("highlight",e,t,n,r)},downplay:function(e,t,n,r){this._toggleStatus("downplay",e,t,n,r)},_toggleStatus:function(e,t,n,r,i){var a=t.getData(),o=an.queryDataIndex(a,i),s=e==="highlight";o!=null?R(dd.normalizeToArray(o),function(l){for(var u=0;u<this._pointsBuilderList.length;u++){var c=this._pointsBuilderList[u];s?c.highlight(a,l):c.downplay(a,l)}},this):a.each(function(l){for(var u=0;u<this._pointsBuilderList.length;u++){var c=this._pointsBuilderList[u];s?c.highlight(a,l):c.downplay(a,l)}})},dispose:function(){this._pointsBuilderList.forEach(function(e){e.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function GOt(e){e.registerChartView(VOt),e.registerSeriesModel(OOt),e.registerLayout({seriesType:"scatter3D",reset:function(t){var n=t.coordinateSystem;if(n){var r=n.dimensions;if(r.length<3)return;var i=r.map(function(s){return t.coordDimToDataDim(s)[0]}),a=[],o=[];return{progress:function(s,l){for(var u=new Float32Array((s.end-s.start)*3),c=s.start;c<s.end;c++){var h=(c-s.start)*3;a[0]=l.get(i[0],c),a[1]=l.get(i[1],c),a[2]=l.get(i[2],c),n.dataToPoint(a,o),u[h]=o[0],u[h+1]=o[1],u[h+2]=o[2]}l.setLayout("points",u)}}}}})}ue(GOt);var di=ei.vec3,l9=ei.vec2,cc=di.normalize,Nw=di.cross,u9=di.sub,GL=di.add,Af=di.create,$h=Af(),os=Af(),Xh=Af(),L_=Af(),c9=[],h9=[];function HOt(e,t){l9.copy(c9,e[0]),l9.copy(h9,e[1]);var n=[],r=n[0]=Af(),i=n[1]=Af(),a=n[2]=Af(),o=n[3]=Af();t.dataToPoint(c9,r),t.dataToPoint(h9,o),cc($h,r),u9(os,o,r),cc(os,os),Nw(Xh,os,$h),cc(Xh,Xh),Nw(os,$h,Xh),GL(i,$h,os),cc(i,i),cc($h,o),u9(os,r,o),cc(os,os),Nw(Xh,os,$h),cc(Xh,Xh),Nw(os,$h,Xh),GL(a,$h,os),cc(a,a),GL(L_,r,o),cc(L_,L_);var s=di.dot(r,L_),l=di.dot(L_,i),u=(Math.max(di.len(r),di.len(o))-s)/l*2;return di.scaleAndAdd(i,r,i,u),di.scaleAndAdd(a,o,a,u),n}function WOt(e,t,n){var r=[],i=r[0]=di.create(),a=r[1]=di.create(),o=r[2]=di.create(),s=r[3]=di.create();t.dataToPoint(e[0],i),t.dataToPoint(e[1],s);var l=di.dist(i,s);return di.lerp(a,i,s,.3),di.lerp(o,i,s,.3),di.scaleAndAdd(a,a,n,Math.min(l*.1,10)),di.scaleAndAdd(o,o,n,Math.min(l*.1,10)),r}function vrt(e,t){for(var n=new Float32Array(e.length*3),r=0,i=[],a=0;a<e.length;a++)t.dataToPoint(e[a],i),n[r++]=i[0],n[r++]=i[1],n[r++]=i[2];return n}function grt(e){var t=[];return e.each(function(n){var r=e.getItemModel(n),i=r.option instanceof Array?r.option:r.getShallow("coords",!0);t.push(i)}),{coordsList:t}}function $Ot(e,t){var n=e.getData(),r=e.get("polyline");n.setLayout("lineType",r?"polyline":"cubicBezier");var i=grt(n);n.each(function(a){var o=i.coordsList[a],s=r?vrt:HOt;n.setItemLayout(a,s(o,t))})}function f9(e,t,n){var r=e.getData(),i=e.get("polyline"),a=grt(r);r.setLayout("lineType",i?"polyline":"cubicBezier"),r.each(function(o){var s=a.coordsList[o],l=i?vrt(s,t):WOt(s,t,n);r.setItemLayout(o,l)})}function XOt(e,t){e.eachSeriesByType("lines3D",function(n){var r=n.coordinateSystem;r.type==="globe"?$Ot(n,r):r.type==="geo3D"?f9(n,r,[0,1,0]):(r.type==="mapbox3D"||r.type==="maptalks3D")&&f9(n,r,[0,0,1])})}const jOt=bn.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(e,t){var n=new Ir(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(r,i,a,o){if(r instanceof Array)return NaN;n.hasItemOption=!0;var s=r.value;if(s!=null)return s instanceof Array?s[o]:s}),n},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),YOt=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`;var d9=ei.vec3;function qOt(e){return e>0?1:-1}V.Shader.import(YOt);const KOt=V.Mesh.extend(function(){var e=new V.Material({shader:new V.Shader(V.Shader.source("ecgl.trail2.vertex"),V.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),t=new cd({dynamic:!0});return t.createAttribute("dist","float",1),t.createAttribute("distAll","float",1),t.createAttribute("start","float",1),{geometry:t,material:e,culling:!1,$ignorePicking:!0}},{updateData:function(e,t,n){var r=e.hostModel,i=this.geometry,a=r.getModel("effect"),o=a.get("trailWidth")*t.getDevicePixelRatio(),s=a.get("trailLength"),l=r.get("effect.constantSpeed"),u=r.get("effect.period")*1e3,c=l!=null;c?this.material.set("speed",l/1e3):this.material.set("period",u),this.material[c?"define":"undefine"]("vertex","CONSTANT_SPEED");var h=r.get("polyline");i.trailLength=s,this.material.set("trailLength",s),i.resetOffset(),["position","positionPrev","positionNext"].forEach(function(w){i.attributes[w].value=n.attributes[w].value});var f=["dist","distAll","start","offset","color"];f.forEach(function(w){i.attributes[w].init(i.vertexCount)}),i.indices=n.indices;var d=[],p=a.get("trailColor"),v=a.get("trailOpacity"),g=p!=null,m=v!=null;this.updateWorldTransform();var _=this.worldTransform.x.len(),y=this.worldTransform.y.len(),x=this.worldTransform.z.len(),S=0,b=0;e.each(function(w){var A=e.getItemLayout(w),T=m?v:Li(e,w),M=Bi(e,w);T==null&&(T=1),d=V.parseColor(g?p:M,d),d[3]*=T;for(var C=h?n.getPolylineVertexCount(A):n.getCubicCurveVertexCount(A[0],A[1],A[2],A[3]),E=0,D=[],I=[],L=S;L<S+C;L++)i.attributes.position.get(L,D),D[0]*=_,D[1]*=y,D[2]*=x,L>S&&(E+=d9.dist(D,I)),i.attributes.dist.set(L,E),d9.copy(I,D);b=Math.max(b,E);for(var P=Math.random()*(c?E:u),L=S;L<S+C;L++)i.attributes.distAll.set(L,E),i.attributes.start.set(L,P),i.attributes.offset.set(L,qOt(n.attributes.offset.get(L))*o/2),i.attributes.color.set(L,d);S+=C}),this.material.set("spotSize",b*.1*s),this.material.set("spotIntensity",a.get("spotIntensity")),i.dirty()},setAnimationTime:function(e){this.material.set("time",e)}});V.Shader.import(GE);function ZOt(e){return e.radius!=null?e.radius:e.size!=null?Math.max(e.size[0],e.size[1],e.size[2]):100}const JOt=hn.extend({type:"lines3D",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this._meshLinesMaterial=new V.Material({shader:V.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new V.Mesh({geometry:new cd,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new KOt},render:function(e,t,n){this.groupGL.add(this._linesMesh);var r=e.coordinateSystem,i=e.getData();if(r&&r.viewGL){var a=r.viewGL;a.add(this.groupGL),this._updateLines(e,t,n);var o=r.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[o]("fragment","SRGB_DECODE"),this._trailMesh.material[o]("fragment","SRGB_DECODE")}var s=this._trailMesh;if(s.stopAnimation(),e.get("effect.show")){this.groupGL.add(s),s.updateData(i,n,this._linesMesh.geometry),s.__time=s.__time||0;var l=3600*1e3;this._curveEffectsAnimator=s.animate("",{loop:!0}).when(l,{__time:l}).during(function(){s.setAnimationTime(s.__time)}).start()}else this.groupGL.remove(s),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=e.get("blendMode")==="lighter"?V.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var e=this._curveEffectsAnimator;e&&(e.isPaused()?e.resume():e.pause())},_updateLines:function(e,t,n){var r=e.getData(),i=e.coordinateSystem,a=this._linesMesh.geometry,o=e.get("polyline");a.expandLine=!0;var s=ZOt(i);a.segmentScale=s/20;var l="lineStyle.width".split("."),u=n.getDevicePixelRatio();r.each(function(d){var p=r.getItemModel(d),v=p.get(l);v==null&&(v=1),r.setItemVisual(d,"lineWidth",v)}),a.useNativeLine=!1;var c=0,h=0;r.each(function(d){var p=r.getItemLayout(d);o?(c+=a.getPolylineVertexCount(p),h+=a.getPolylineTriangleCount(p)):(c+=a.getCubicCurveVertexCount(p[0],p[1],p[2],p[3]),h+=a.getCubicCurveTriangleCount(p[0],p[1],p[2],p[3]))}),a.setVertexCount(c),a.setTriangleCount(h),a.resetOffset();var f=[];r.each(function(d){var p=r.getItemLayout(d),v=Bi(r,d),g=Li(r,d),m=r.getItemVisual(d,"lineWidth")*u;g==null&&(g=1),f=V.parseColor(v,f),f[3]*=g,o?a.addPolyline(p,f,m):a.addCubicCurve(p[0],p[1],p[2],p[3],f,m)}),a.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function QOt(e){e.registerChartView(JOt),e.registerSeriesModel(jOt),e.registerLayout(XOt),e.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),e.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),e.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}ue(QOt);function p9(e,t){for(var n=[],r=0;r<t.length;r++)n.push(e.dataToPoint(t[r]));return n}var mrt=bn.extend({type:"series.polygons3D",getRegionModel:function(e){return this.getData().getItemModel(e)},getRegionPolygonCoords:function(e){var t=this.coordinateSystem,n=this.getData().getItemModel(e),r=n.option instanceof Array?n.option:n.getShallow("coords");n.get("multiPolygon")||(r=[r]);for(var i=[],a=0;a<r.length;a++){for(var o=[],s=1;s<r[a].length;s++)o.push(p9(t,r[a][s]));i.push({exterior:p9(t,r[a][0]),interiors:o})}return i},getInitialData:function(e){var t=new Ir(["value"],this);return t.hasItemOption=!1,t.initData(e.data,[],function(n,r,i,a){if(n instanceof Array)return NaN;t.hasItemOption=!0;var o=n.value;if(o!=null)return o instanceof Array?o[a]:o}),t},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});Xt(mrt.prototype,x0);const tNt=hn.extend({type:"polygons3D",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(e,t,n){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL);var i=this._geo3DBuilderList[0];i||(i=new wy(n),i.extrudeY=r.type!=="mapbox3D"&&r.type!=="maptalks3D",this._geo3DBuilderList[0]=i),this._updateShaderDefines(r,i),i.update(e,t,n),this._geo3DBuilderList.length=1,this.groupGL.add(i.rootNode)},incrementalPrepareRender:function(e,t,n){this.groupGL.removeAll();var r=e.coordinateSystem;r&&r.viewGL&&r.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(e,t,n,r){var i=this._geo3DBuilderList[this._currentStep],a=t.coordinateSystem;i||(i=new wy(r),i.extrudeY=a.type!=="mapbox3D"&&a.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=i),i.update(t,n,r,e.start,e.end),this.groupGL.add(i.rootNode),this._updateShaderDefines(a,i),this._currentStep++},_updateShaderDefines:function(e,t){var n=e.viewGL.isLinearSpace()?"define":"undefine";t.rootNode.traverse(function(r){r.material&&(r.material[n]("fragment","SRGB_DECODE"),(e.type==="mapbox3D"||e.type==="maptalks3D")&&(r.material.define("fragment","NORMAL_UP_AXIS",2),r.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(e){e.dispose()})}});function eNt(e){e.registerChartView(tNt),e.registerSeriesModel(mrt)}ue(eNt);var yrt=bn.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(e){return U1(this,e)},getInitialData:function(e,t){var n=e.data;function r(B){return!(isNaN(B.min)||isNaN(B.max)||isNaN(B.step))}function i(B){var N=OB;return Math.max(N(B.min),N(B.max),N(B.step))+1}if(!n)if(e.parametric){var x=e.parametricEquation||{},S=x.u||{},b=x.v||{};["u","v"].forEach(function(N){r(x[N])}),["x","y","z"].forEach(function(N){x[N]});var w=Math.floor((S.max+S.step-S.min)/S.step),A=Math.floor((b.max+b.step-b.min)/b.step);n=new Float32Array(w*A*5);for(var T=i(S),M=i(b),f=0,d=0;d<A;d++)for(var p=0;p<w;p++){var C=p*S.step+S.min,E=d*b.step+b.min,D=_r(Math.min(C,S.max),T),I=_r(Math.min(E,b.max),M),v=x.x(D,I),g=x.y(D,I),y=x.z(D,I);n[f++]=v,n[f++]=g,n[f++]=y,n[f++]=D,n[f++]=I}}else{var a=e.equation||{},o=a.x||{},s=a.y||{};if(["x","y"].forEach(function(B){r(a[B])}),typeof a.z!="function")return;var l=Math.floor((o.max+o.step-o.min)/o.step),u=Math.floor((s.max+s.step-s.min)/s.step);n=new Float32Array(l*u*3);for(var c=i(o),h=i(s),f=0,d=0;d<u;d++)for(var p=0;p<l;p++){var v=p*o.step+o.min,g=d*s.step+s.min,m=_r(Math.min(v,o.max),c),_=_r(Math.min(g,s.max),h),y=a.z(m,_);n[f++]=m,n[f++]=_,n[f++]=y}}var L=["x","y","z"];e.parametric&&L.push("u","v");var P=HE(this,L,n);return P},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});Xt(yrt.prototype,x0);var np=ei.vec3;function nNt(e){return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])}const rNt=hn.extend({type:"surface",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node},render:function(e,t,n){var r=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=r,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var i=e.coordinateSystem,a=e.get("shading"),o=e.getData(),s="ecgl."+a;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==s)&&(this._surfaceMesh.material=V.createMaterial(s,["VERTEX_COLOR","DOUBLE_SIDED"])),V.setMaterialFromModel(a,this._surfaceMesh.material,e,n),i&&i.viewGL){i.viewGL.add(this.groupGL);var l=i.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[l]("fragment","SRGB_DECODE")}var u=e.get("parametric"),c=e.get("dataShape");c||(c=this._getDataShape(o,u));var h=e.getModel("wireframe"),f=h.get("lineStyle.width"),d=h.get("show")&&f>0;this._updateSurfaceMesh(this._surfaceMesh,e,c,d);var p=this._surfaceMesh.material;d?(p.define("WIREFRAME_QUAD"),p.set("wireframeLineWidth",f),p.set("wireframeLineColor",V.parseColor(h.get("lineStyle.color")))):p.undefine("WIREFRAME_QUAD"),this._initHandler(e,n),this._updateAnimation(e)},_updateAnimation:function(e){V.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,e)},_createSurfaceMesh:function(){var e=new V.Mesh({geometry:new V.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new V.Material({shader:new V.Shader(V.Shader.source("ecgl.sm.depth.vertex"),V.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return e.geometry.createAttribute("barycentric","float",4),e.geometry.createAttribute("prevPosition","float",3),e.geometry.createAttribute("prevNormal","float",3),Object.assign(e.geometry,jF),e},_initHandler:function(e,t){var n=e.getData(),r=this._surfaceMesh,i=e.coordinateSystem;function a(s,l){for(var u=1/0,c=-1,h=[],f=0;f<s.length;f++){r.geometry.attributes.position.get(s[f],h);var d=np.dist(l.array,h);d<u&&(u=d,c=s[f])}return c}r.seriesIndex=e.seriesIndex;var o=-1;r.off("mousemove"),r.off("mouseout"),r.on("mousemove",function(s){var l=a(s.triangle,s.point);if(l>=0){var u=[];r.geometry.attributes.position.get(l,u);for(var c=i.pointToData(u),h=1/0,f=-1,d=[],p=0;p<n.count();p++){d[0]=n.get("x",p),d[1]=n.get("y",p),d[2]=n.get("z",p);var v=np.squaredDistance(d,c);v<h&&(f=p,h=v)}f!==o&&t.dispatchAction({type:"grid3DShowAxisPointer",value:c}),o=f,r.dataIndex=f}else r.dataIndex=-1},this),r.on("mouseout",function(s){o=-1,r.dataIndex=-1,t.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(e,t,n,r){var i=e.geometry,a=t.getData(),o=a.getLayout("points"),s=0;a.each(function(It){a.hasValue(It)||s++});var l=s||r,u=i.attributes.position,c=i.attributes.normal,h=i.attributes.texcoord0,f=i.attributes.barycentric,d=i.attributes.color,p=n[0],v=n[1],g=t.get("shading"),m=g!=="color";if(l){var _=(p-1)*(v-1)*4;u.init(_),r&&f.init(_)}else u.value=new Float32Array(o);d.init(i.vertexCount),h.init(i.vertexCount);var y=[0,3,1,1,3,2],x=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],S=i.indices=new(i.vertexCount>65535?Uint32Array:Uint16Array)((p-1)*(v-1)*6),b=function(It,Jt,Gt){Gt[1]=It*v+Jt,Gt[0]=It*v+Jt+1,Gt[3]=(It+1)*v+Jt+1,Gt[2]=(It+1)*v+Jt},w=!1;if(l){var A=[],T=[],M=0;m?c.init(i.vertexCount):c.value=null;for(var C=[[],[],[]],E=[],D=[],I=np.create(),L=function(It,Jt,Gt){var ve=Jt*3;return Gt[0]=It[ve],Gt[1]=It[ve+1],Gt[2]=It[ve+2],Gt},P=new Float32Array(o.length),B=new Float32Array(o.length/3*4),N=0;N<a.count();N++)if(a.hasValue(N)){var St=V.parseColor(Bi(a,N)),k=Li(a,N);k!=null&&(St[3]*=k),St[3]<.99&&(w=!0);for(var U=0;U<4;U++)B[N*4+U]=St[U]}for(var Z=[1e7,1e7,1e7],N=0;N<p-1;N++)for(var nt=0;nt<v-1;nt++){var ct=N*(v-1)+nt,K=ct*4;b(N,nt,A);for(var $=!1,U=0;U<4;U++)L(o,A[U],T),nNt(T)&&($=!0);for(var U=0;U<4;U++)$?u.set(K+U,Z):(L(o,A[U],T),u.set(K+U,T)),r&&f.set(K+U,x[U]);for(var U=0;U<6;U++)S[M++]=y[U]+K;if(m&&!$)for(var U=0;U<2;U++){for(var ot=U*3,tt=0;tt<3;tt++){var et=A[y[ot]+tt];L(o,et,C[tt])}np.sub(E,C[0],C[1]),np.sub(D,C[1],C[2]),np.cross(I,E,D);for(var tt=0;tt<3;tt++){var xt=A[y[ot]+tt]*3;P[xt]=P[xt]+I[0],P[xt+1]=P[xt+1]+I[1],P[xt+2]=P[xt+2]+I[2]}}}if(m)for(var N=0;N<P.length/3;N++)L(P,N,I),np.normalize(I,I),P[N*3]=I[0],P[N*3+1]=I[1],P[N*3+2]=I[2];for(var St=[],X=[],N=0;N<p-1;N++)for(var nt=0;nt<v-1;nt++){var ct=N*(v-1)+nt,K=ct*4;b(N,nt,A);for(var U=0;U<4;U++){for(var tt=0;tt<4;tt++)St[tt]=B[A[U]*4+tt];d.set(K+U,St),m&&(L(P,A[U],I),c.set(K+U,I));var et=A[U];X[0]=et%v/(v-1),X[1]=Math.floor(et/v)/(p-1),h.set(K+U,X)}ct++}}else{for(var X=[],N=0;N<a.count();N++){X[0]=N%v/(v-1),X[1]=Math.floor(N/v)/(p-1);var St=V.parseColor(Bi(a,N)),k=Li(a,N);k!=null&&(St[3]*=k),St[3]<.99&&(w=!0),d.set(N,St),h.set(N,X)}for(var A=[],Ct=0,N=0;N<p-1;N++)for(var nt=0;nt<v-1;nt++){b(N,nt,A);for(var U=0;U<6;U++)S[Ct++]=A[y[U]]}m?i.generateVertexNormals():c.value=null}e.material.get("normalMap")&&i.generateTangents(),i.updateBoundingBox(),i.dirty(),e.material.transparent=w,e.material.depthMask=!w},_getDataShape:function(e,t){for(var n=-1/0,r=0,i=0,a=!1,o=t?"u":"x",s=e.count(),l=0;l<s;l++){var u=e.get(o,l);u<n&&(i=0,r++),n=u,i++}if((!r||i===1)&&(a=!0),!a)return[r+1,i];for(var c=Math.floor(Math.sqrt(s));c>0;){if(Math.floor(s/c)===s/c)return[c,s/c];c--}return c=Math.floor(Math.sqrt(s)),[c,c]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function iNt(e){e.registerChartView(rNt),e.registerSeriesModel(yrt),e.registerLayout(function(t,n){t.eachSeriesByType("surface",function(r){var i=r.coordinateSystem;!i||i.type;var a=r.getData(),o=new Float32Array(3*a.count()),s=[NaN,NaN,NaN];if(i&&i.type==="cartesian3D"){var l=i.dimensions,u=l.map(function(c){return r.coordDimToDataDim(c)[0]});a.each(u,function(c,h,f,d){var p;a.hasValue(d)?p=i.dataToPoint([c,h,f]):p=s,o[d*3]=p[0],o[d*3+1]=p[1],o[d*3+2]=p[2]})}a.setLayout("points",o)})})}ue(iNt);function v9(e,t){for(var n=[],r=0;r<t.length;r++)n.push(e.dataToPoint(t[r]));return n}var S0=bn.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(e){var t=this.get("coordinateSystem");t==null||t==="geo3D"||(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(e){e.data=this.getFilledRegions(e.data,e.map);var t=T1(e.data,{coordDimensions:["value"]}),n=new Ir(t,this);n.initData(e.data);var r={};return n.each(function(i){var a=n.getName(i),o=n.getItemModel(i);r[a]=o}),this._regionModelMap=r,n},formatTooltip:function(e){return U1(this,e)},getRegionModel:function(e){var t=this.getData().getName(e);return this._regionModelMap[t]||new pn(null,this)},getRegionPolygonCoords:function(e){var t=this.coordinateSystem,n=this.getData().getName(e);if(t.transform){var r=t.getRegion(n);return r?r.geometries:[]}else{this._geo||(this._geo=YF.createGeo3D(this));for(var r=this._geo.getRegion(n),i=[],a=0;a<r.geometries.length;a++){var o=r.geometries[a],s=[],l=v9(t,o.exterior);if(s&&s.length)for(var u=0;u<o.interiors.length;u++)s.push(v9(t,s[u]));i.push({interiors:s,exterior:l})}return i}},getFormattedLabel:function(e,t){var n=dd.getFormattedLabel(this,e,t);return n==null&&(n=this.getData().getName(e)),n},defaultOption:{coordinateSystem:"geo3D",data:null}});Xt(S0.prototype,Knt);Xt(S0.prototype,zE);Xt(S0.prototype,m0);Xt(S0.prototype,y0);Xt(S0.prototype,x0);const aNt=hn.extend({type:"map3D",__ecgl__:!0,init:function(e,t){this._geo3DBuilder=new wy(t),this.groupGL=new V.Node},render:function(e,t,n){var r=e.coordinateSystem;if(!(!r||!r.viewGL)){if(this.groupGL.add(this._geo3DBuilder.rootNode),r.viewGL.add(this.groupGL),r.type==="geo3D"){this._sceneHelper||(this._sceneHelper=new Wf,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(r.viewGL.scene),this._sceneHelper.updateLight(e),r.viewGL.setPostEffect(e.getModel("postEffect"),n),r.viewGL.setTemporalSuperSampling(e.getModel("temporalSuperSampling"));var i=this._control;i||(i=this._control=new k1({zr:n.getZr()}),this._control.init());var a=e.getModel("viewControl");i.setViewGL(r.viewGL),i.setFromViewControlModel(a,0),i.off("update"),i.on("update",function(){n.dispatchAction({type:"map3DChangeCamera",alpha:i.getAlpha(),beta:i.getBeta(),distance:i.getDistance(),from:this.uid,map3DId:e.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),e.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(e,t,n,0,e.getData().count());var o=r.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(s){s.material&&s.material[o]("fragment","SRGB_DECODE")})}},afterRender:function(e,t,n,r){var i=r.renderer,a=e.coordinateSystem;a&&a.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(i,e,n),this._sceneHelper.updateSkybox(i,e,n))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function oNt(e){irt(e),e.registerChartView(aNt),e.registerSeriesModel(S0),e.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(t,n){n.eachComponent({mainType:"series",subType:"map3D",query:t},function(r){r.setView(t)})})}ue(oNt);const sNt=bn.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return W0t(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});function Sh(e){this.viewGL=e}Sh.prototype.reset=function(e,t){this._updateCamera(t.getWidth(),t.getHeight(),t.getDevicePixelRatio()),this._viewTransform=_o(),this.updateTransform(e,t)};Sh.prototype.updateTransform=function(e,t){var n=e.coordinateSystem;n.getRoamTransform&&(zv(this._viewTransform,n.getRoamTransform()),this._setCameraTransform(this._viewTransform),t.getZr().refresh())};Sh.prototype.dataToPoint=function(e,t,n){n=e.dataToPoint(t,null,n);var r=this._viewTransform;r&&Oi(n,n,r)};Sh.prototype.removeTransformInPoint=function(e){return this._viewTransform&&Oi(e,e,this._viewTransform),e};Sh.prototype.getZoom=function(){if(this._viewTransform){var e=this._viewTransform;return 1/Math.max(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]))}return 1};Sh.prototype._setCameraTransform=function(e){var t=this.viewGL.camera;t.position.set(e[4],e[5],0),t.scale.set(Math.sqrt(e[0]*e[0]+e[1]*e[1]),Math.sqrt(e[2]*e[2]+e[3]*e[3]),1)};Sh.prototype._updateCamera=function(e,t,n){this.viewGL.setViewport(0,0,e,t,n);var r=this.viewGL.camera;r.left=r.top=0,r.bottom=t,r.right=e,r.near=0,r.far=100};const lNt=hn.extend({type:"scatterGL",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this.viewGL=new Yn("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Sh(this.viewGL)},render:function(e,t,n){if(this.groupGL.removeAll(),this._glViewHelper.reset(e,n),!!e.getData().count()){var r=this._pointsBuilderList[0];r||(r=this._pointsBuilderList[0]=new Sv(!0,n)),this._pointsBuilderList.length=1,this.groupGL.add(r.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),r.update(e,t,n),this.viewGL.setPostEffect(e.getModel("postEffect"),n)}},incrementalPrepareRender:function(e,t,n){this.groupGL.removeAll(),this._glViewHelper.reset(e,n),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),n)},incrementalRender:function(e,t,n,r){if(!(e.end<=e.start)){var i=this._pointsBuilderList[this._currentStep];i||(i=new Sv(!0,r),this._pointsBuilderList[this._currentStep]=i),this.groupGL.add(i.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),i.setSizeScale(this._sizeScale),i.update(t,n,r,e.start,e.end),r.getZr().refresh(),this._currentStep++}},updateTransform:function(e,t,n){if(e.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(e,n);var r=this._glViewHelper.getZoom(),i=Math.max((e.get("zoomScale")||0)*(r-1)+1,0);this._sizeScale=i,this._pointsBuilderList.forEach(function(a){a.setSizeScale(i)})}},_removeTransformInPoints:function(e){if(e)for(var t=[],n=0;n<e.length;n+=2)t[0]=e[n],t[1]=e[n+1],this._glViewHelper.removeTransformInPoint(t),e[n]=t[0],e[n+1]=t[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(e){e.dispose()})},remove:function(){this.groupGL.removeAll()}});function uNt(e){e.registerChartView(lNt),e.registerSeriesModel(sNt),e.registerLayout({seriesType:"scatterGL",reset:function(t){var n=t.coordinateSystem,r=t.getData(),i;if(n){var a=n.dimensions.map(function(s){return r.mapDimension(s)}).slice(0,2),o=[];a.length===1?i=function(s){for(var l=new Float32Array((s.end-s.start)*2),u=s.start;u<s.end;u++){var c=(u-s.start)*2,h=r.get(a[0],u),f=n.dataToPoint(h);l[c]=f[0],l[c+1]=f[1]}r.setLayout("points",l)}:a.length===2&&(i=function(s){for(var l=new Float32Array((s.end-s.start)*2),u=s.start;u<s.end;u++){var c=(u-s.start)*2,h=r.get(a[0],u),f=r.get(a[1],u);o[0]=h,o[1]=f,o=n.dataToPoint(o),l[c]=o[0],l[c+1]=o[1]}r.setLayout("points",l)})}return{progress:i}}})}ue(uNt);function cNt(e,t,n,r,i){for(var a=new Ett(r),o=0;o<e.length;o++)a.addNode(an.firstNotNull(e[o].id,e[o].name,o),o);for(var s=[],l=[],u=0,o=0;o<t.length;o++){var c=t[o],h=c.source,f=c.target;a.addEdge(h,f,u)&&(l.push(c),s.push(an.firstNotNull(c.id,h+" > "+f)),u++)}var d,p=T1(e,{coordDimensions:["value"]});d=new Ir(p,n),d.initData(e);var v=new Ir(["value"],n);return v.initData(l,s),i&&i(d,v),Yk({mainData:d,struct:a,structAttr:"graph",datas:{node:d,edge:v},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var hx=bn.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(e){hx.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(e){hx.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(e,t,n,r){var i=dd.getFormattedLabel(this,e,t,n,r);if(i==null){var a=this.getData(),o=a.dimensions[a.dimensions.length-1];i=a.get(o,e)}return i},getInitialData:function(e,t){var n=e.edges||e.links||[],r=e.data||e.nodes||[],i=this;if(r&&n)return cNt(r,n,this,!0,a).data;function a(o,s){o.wrapMethod("getItemModel",function(h){const f=i._categoriesModels,d=h.getShallow("category"),p=f[d];return p&&(p.parentModel=h.parentModel,h.parentModel=p),h});const l=t.getModel([]).getModel;function u(h,f){const d=l.call(this,h,f);return d.resolveParentPath=c,d}s.wrapMethod("getItemModel",function(h){return h.resolveParentPath=c,h.getModel=u,h});function c(h){if(h&&(h[0]==="label"||h[1]==="label")){const f=h.slice();return h[0]==="label"?f[0]="edgeLabel":h[1]==="label"&&(f[1]="edgeLabel"),f}return h}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if(n==="edge"){var r=this.getData(),i=this.getDataParams(e,n),a=r.graph.getEdgeByIndex(e),o=r.getName(a.node1.dataIndex),s=r.getName(a.node2.dataIndex),l=[];return o!=null&&l.push(o),s!=null&&l.push(s),l=Ti(l.join(" > ")),i.value&&(l+=" : "+Ti(i.value)),l}else return hx.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var e=(this.option.categories||[]).map(function(n){return n.value!=null?n:Object.assign({value:0},n)}),t=new Ir(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(n){return t.getItemModel(n,!0)})},setView:function(e){e.zoom!=null&&(this.option.zoom=e.zoom),e.offset!=null&&(this.option.offset=e.offset)},setNodePosition:function(e){for(var t=0;t<e.length/2;t++){var n=e[t*2],r=e[t*2+1],i=this.getData().getRawDataItem(t);i.x=n,i.y=r}},isAnimationEnabled:function(){return hx.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),hi=ei.vec2,g9=[[0,0],[1,1]],tz=cn.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new cn.Attribute("position","float",2,"POSITION"),normal:new cn.Attribute("normal","float",2),offset:new cn.Attribute("offset","float",1),color:new cn.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(e){var t=this.attributes;this.vertexCount!==e&&(t.position.init(e),t.color.init(e),this.useNativeLine||(t.offset.init(e),t.normal.init(e)),e>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(e){this.triangleCount!==e&&(e===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(e*3):new Uint16Array(e*3))},_getCubicCurveApproxStep:function(e,t,n,r){var i=hi.dist(e,t)+hi.dist(n,t)+hi.dist(r,n),a=1/(i+1)*this.segmentScale;return a},getCubicCurveVertexCount:function(e,t,n,r){var i=this._getCubicCurveApproxStep(e,t,n,r),a=Math.ceil(1/i);return this.useNativeLine?a*2:a*2+2},getCubicCurveTriangleCount:function(e,t,n,r){var i=this._getCubicCurveApproxStep(e,t,n,r),a=Math.ceil(1/i);return this.useNativeLine?0:a*2},getLineVertexCount:function(){return this.getPolylineVertexCount(g9)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(g9)},getPolylineVertexCount:function(e){var t;if(typeof e=="number")t=e;else{var n=typeof e[0]!="number";t=n?e.length:e.length/2}return this.useNativeLine?(t-1)*2:(t-1)*2+2},getPolylineTriangleCount:function(e){var t;if(typeof e=="number")t=e;else{var n=typeof e[0]!="number";t=n?e.length:e.length/2}return this.useNativeLine?0:(t-1)*2},addCubicCurve:function(e,t,n,r,i,a){a==null&&(a=1);for(var o=e[0],s=e[1],l=t[0],u=t[1],c=n[0],h=n[1],f=r[0],d=r[1],p=this._getCubicCurveApproxStep(e,t,n,r),v=p*p,g=v*p,m=3*p,_=3*v,y=6*v,x=6*g,S=o-l*2+c,b=s-u*2+h,w=(l-c)*3-o+f,A=(u-h)*3-s+d,T=o,M=s,C=(l-o)*m+S*_+w*g,E=(u-s)*m+b*_+A*g,D=S*y+w*x,I=b*y+A*x,L=w*x,P=A*x,B=0,N=0,k=Math.ceil(1/p),U=new Float32Array((k+1)*3),U=[],Z=0,N=0;N<k+1;N++)U[Z++]=T,U[Z++]=M,T+=C,M+=E,C+=D,E+=I,D+=L,I+=P,B+=p,B>1&&(T=C>0?Math.min(T,f):Math.max(T,f),M=E>0?Math.min(M,d):Math.max(M,d));this.addPolyline(U,i,a)},addLine:function(e,t,n,r){this.addPolyline([e,t],n,r)},addPolyline:function(){var e=hi.create(),t=hi.create(),n=hi.create(),r=hi.create(),i=[],a=[],o=[];return function(s,l,u,c,h){if(s.length){var f=typeof s[0]!="number";if(h==null&&(h=f?s.length:s.length/2),!(h<2)){c==null&&(c=0),u==null&&(u=1),this._itemVertexOffsets.push(this._vertexOffset);for(var d=f?typeof l[0]!="number":l.length/4===h,p=this.attributes.position,v=this.attributes.color,g=this.attributes.offset,m=this.attributes.normal,_=this.indices,y=this._vertexOffset,x,S=0;S<h;S++){if(f)i=s[S+c],d?x=l[S+c]:x=l;else{var b=S*2+c;if(i=i||[],i[0]=s[b],i[1]=s[b+1],d){var w=S*4+c;x=x||[],x[0]=l[w],x[1]=l[w+1],x[2]=l[w+2],x[3]=l[w+3]}else x=l}if(this.useNativeLine)S>1&&(p.copy(y,y-1),v.copy(y,y-1),y++);else{var A;if(S<h-1){if(f)hi.copy(a,s[S+1]);else{var b=(S+1)*2+c;a=a||[],a[0]=s[b],a[1]=s[b+1]}if(S>0){hi.sub(e,i,o),hi.sub(t,a,i),hi.normalize(e,e),hi.normalize(t,t),hi.add(r,e,t),hi.normalize(r,r);var T=u/2*Math.min(1/hi.dot(e,r),2);n[0]=-r[1],n[1]=r[0],A=T}else hi.sub(e,a,i),hi.normalize(e,e),n[0]=-e[1],n[1]=e[0],A=u/2}else hi.sub(e,i,o),hi.normalize(e,e),n[0]=-e[1],n[1]=e[0],A=u/2;m.set(y,n),m.set(y+1,n),g.set(y,A),g.set(y+1,-A),hi.copy(o,i),p.set(y,i),p.set(y+1,i),v.set(y,x),v.set(y+1,x),y+=2}if(this.useNativeLine)v.set(y,x),p.set(y,i),y++;else if(S>0){var M=this._faceOffset*3,_=this.indices;_[M]=y-4,_[M+1]=y-3,_[M+2]=y-2,_[M+3]=y-3,_[M+4]=y-1,_[M+5]=y-2,this._faceOffset+=2}}this._vertexOffset=y}}}}(),setItemColor:function(e,t){for(var n=this._itemVertexOffsets[e],r=e<this._itemVertexOffsets.length-1?this._itemVertexOffsets[e+1]:this._vertexOffset,i=n;i<r;i++)this.attributes.color.set(i,t);this.dirty("color")}});te(tz.prototype,F1);const hNt=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;V.Shader.import(hNt);var HL={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function gi(e){var t={type:V.Texture.FLOAT,minFilter:V.Texture.NEAREST,magFilter:V.Texture.NEAREST};this._positionSourceTex=new V.Texture2D(t),this._positionSourceTex.flipY=!1,this._positionTex=new V.Texture2D(t),this._positionPrevTex=new V.Texture2D(t),this._forceTex=new V.Texture2D(t),this._forcePrevTex=new V.Texture2D(t),this._weightedSumTex=new V.Texture2D(t),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new V.Texture2D(t),this._globalSpeedPrevTex=new V.Texture2D(t),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new oi({fragment:V.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new oi({fragment:V.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new oi({fragment:V.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new oi({fragment:V.Shader.source("clay.compositor.output")});var n=function(r){r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE)};this._edgeForceMesh=new V.Mesh({geometry:new V.Geometry({attributes:{node1:new V.Geometry.Attribute("node1","float",2),node2:new V.Geometry.Attribute("node2","float",2),weight:new V.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new V.Material({transparent:!0,shader:V.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:n,depthMask:!1,depthText:!1}),mode:V.Mesh.POINTS}),this._weightedSumMesh=new V.Mesh({geometry:new V.Geometry({attributes:{node:new V.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new V.Material({transparent:!0,shader:V.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:n,depthMask:!1,depthText:!1}),mode:V.Mesh.POINTS}),this._framebuffer=new Qr({depthBuffer:!1}),this._dummyCamera=new V.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}gi.prototype.updateOption=function(e){for(var t in HL)this[t]=HL[t];var n=this._nodes.length;if(n>5e4?this.jitterTolerence=10:n>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,n>100?this.scaling=2:this.scaling=10,e)for(var t in HL)e[t]!=null&&(this[t]=e[t]);if(this.repulsionByDegree)for(var r=this._positionSourceTex.pixels,i=0;i<this._nodes.length;i++)r[i*4+2]=(this._nodes[i].degree||0)+1};gi.prototype._updateGravityCenter=function(e){var t=this._nodes,n=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var r=[1/0,1/0],i=[-1/0,-1/0],a=0;a<t.length;a++)r[0]=Math.min(t[a].x,r[0]),r[1]=Math.min(t[a].y,r[1]),i[0]=Math.max(t[a].x,i[0]),i[1]=Math.max(t[a].y,i[1]);this._gravityCenter=[(r[0]+i[0])*.5,(r[1]+i[1])*.5]}for(var a=0;a<n.length;a++){var o=n[a].node1,s=n[a].node2;t[o].degree=(t[o].degree||0)+1,t[s].degree=(t[s].degree||0)+1}};gi.prototype.initData=function(e,t){this._nodes=e,this._edges=t,this._updateGravityCenter();var n=Math.ceil(Math.sqrt(e.length)),r=n,i=new Float32Array(n*r*4);this._resize(n,r);for(var a=0,o=0;o<e.length;o++){var s=e[o];i[a++]=s.x||0,i[a++]=s.y||0,i[a++]=s.mass||1,i[a++]=s.size||1}this._positionSourceTex.pixels=i;var l=this._edgeForceMesh.geometry,u=t.length;l.attributes.node1.init(u*2),l.attributes.node2.init(u*2),l.attributes.weight.init(u*2);for(var c=[],o=0;o<t.length;o++){var h=l.attributes,f=t[o].weight;f==null&&(f=1),h.node1.set(o,this.getNodeUV(t[o].node1,c)),h.node2.set(o,this.getNodeUV(t[o].node2,c)),h.weight.set(o,f),h.node1.set(o+u,this.getNodeUV(t[o].node2,c)),h.node2.set(o+u,this.getNodeUV(t[o].node1,c)),h.weight.set(o+u,f)}var d=this._weightedSumMesh.geometry;d.attributes.node.init(e.length);for(var o=0;o<e.length;o++)d.attributes.node.set(o,this.getNodeUV(o,c));l.dirty(),d.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",e.length),this._nodeRepulsionPass.material.setUniform("textureSize",[n,r]),this._inited=!1,this._frame=0};gi.prototype.getNodes=function(){return this._nodes};gi.prototype.getEdges=function(){return this._edges};gi.prototype.step=function(e){this._inited||(this._initFromSource(e),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(e);var t=this._nodeRepulsionPass;t.setUniform("strongGravityMode",this.strongGravityMode),t.setUniform("gravity",this.gravity),t.setUniform("gravityCenter",this._gravityCenter),t.setUniform("scaling",this.scaling),t.setUniform("preventOverlap",this.preventOverlap),t.setUniform("positionTex",this._positionPrevTex),t.render(e);var n=this._edgeForceMesh;n.material.set("linLogMode",this.linLogMode),n.material.set("edgeWeightInfluence",this.edgeWeightInfluence),n.material.set("preventOverlap",this.preventOverlap),n.material.set("positionTex",this._positionPrevTex),e.gl.enable(e.gl.BLEND),e.renderPass([n],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),e.gl.clearColor(0,0,0,0),e.gl.clear(e.gl.COLOR_BUFFER_BIT),e.gl.enable(e.gl.BLEND);var r=this._weightedSumMesh;r.material.set("positionTex",this._positionPrevTex),r.material.set("forceTex",this._forceTex),r.material.set("forcePrevTex",this._forcePrevTex),e.renderPass([r],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var i=this._globalSpeedPass;i.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),i.setUniform("weightedSumTex",this._weightedSumTex),i.setUniform("jitterTolerence",this.jitterTolerence),e.gl.disable(e.gl.BLEND),i.render(e);var a=this._positionPass;this._framebuffer.attach(this._positionTex),a.setUniform("globalSpeedTex",this._globalSpeedTex),a.setUniform("positionTex",this._positionPrevTex),a.setUniform("forceTex",this._forceTex),a.setUniform("forcePrevTex",this._forcePrevTex),a.render(e),this._framebuffer.unbind(e),this._swapTexture()};gi.prototype.update=function(e,t,n){t==null&&(t=1),t=Math.max(t,1);for(var r=0;r<t;r++)this.step(e);n&&n()};gi.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex};gi.prototype.getNodeUV=function(e,t){t=t||[];var n=this._positionTex.width,r=this._positionTex.height;return t[0]=e%n/(n-1),t[1]=Math.floor(e/n)/(r-1)||0,t};gi.prototype.getNodePosition=function(e,t){var n=this._positionArr,r=this._positionTex.width,i=this._positionTex.height,a=r*i;(!n||n.length!==a*4)&&(n=this._positionArr=new Float32Array(a*4)),this._framebuffer.bind(e),this._framebuffer.attach(this._positionPrevTex),e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,n),this._framebuffer.unbind(e),t||(t=new Float32Array(this._nodes.length*2));for(var o=0;o<this._nodes.length;o++)t[o*2]=n[o*4],t[o*2+1]=n[o*4+1];return t};gi.prototype.getTextureData=function(e,t){var n=this["_"+t+"Tex"],r=n.width,i=n.height;this._framebuffer.bind(e),this._framebuffer.attach(n);var a=new Float32Array(r*i*4);return e.gl.readPixels(0,0,r,i,e.gl.RGBA,e.gl.FLOAT,a),this._framebuffer.unbind(e),a};gi.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}};gi.prototype.isFinished=function(e){return this._frame>e};gi.prototype._swapTexture=function(){var e=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=e;var e=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=e;var e=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=e};gi.prototype._initFromSource=function(e){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(e),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(e),e.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),e.gl.clear(e.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(e)};gi.prototype._resize=function(e,t){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(n){this[n].width=e,this[n].height=t,this[n].dirty()},this)};gi.prototype.dispose=function(e){this._framebuffer.dispose(e),this._copyPass.dispose(e),this._nodeRepulsionPass.dispose(e),this._positionPass.dispose(e),this._globalSpeedPass.dispose(e),this._edgeForceMesh.geometry.dispose(e),this._weightedSumMesh.geometry.dispose(e),this._positionSourceTex.dispose(e),this._positionTex.dispose(e),this._positionPrevTex.dispose(e),this._forceTex.dispose(e),this._forcePrevTex.dispose(e),this._weightedSumTex.dispose(e),this._globalSpeedTex.dispose(e),this._globalSpeedPrevTex.dispose(e)};function fNt(){var e={create:function(){return new Float32Array(2)},dist:function(l,u){var c=u[0]-l[0],h=u[1]-l[1];return Math.sqrt(c*c+h*h)},len:function(l){var u=l[0],c=l[1];return Math.sqrt(u*u+c*c)},scaleAndAdd:function(l,u,c,h){return l[0]=u[0]+c[0]*h,l[1]=u[1]+c[1]*h,l},scale:function(l,u,c){return l[0]=u[0]*c,l[1]=u[1]*c,l},add:function(l,u,c){return l[0]=u[0]+c[0],l[1]=u[1]+c[1],l},sub:function(l,u,c){return l[0]=u[0]-c[0],l[1]=u[1]-c[1],l},normalize:function(l,u){var c=u[0],h=u[1],f=c*c+h*h;return f>0&&(f=1/Math.sqrt(f),l[0]=u[0]*f,l[1]=u[1]*f),l},negate:function(l,u){return l[0]=-u[0],l[1]=-u[1],l},copy:function(l,u){return l[0]=u[0],l[1]=u[1],l},set:function(l,u,c){return l[0]=u,l[1]=c,l}};function t(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var n=t.prototype;n.beforeUpdate=function(){for(var l=0;l<this.nSubRegions;l++)this.subRegions[l].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},n.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var l=0;l<this.nSubRegions;l++)this.subRegions[l].afterUpdate()},n.addNode=function(l){if(this.nSubRegions===0)if(this.node==null){this.node=l;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(l),this._updateCenterOfMass(l)},n.findSubRegion=function(l,u){for(var c=0;c<this.nSubRegions;c++){var h=this.subRegions[c];if(h.contain(l,u))return h}},n.contain=function(l,u){return this.bbox[0]<=l&&this.bbox[2]>=l&&this.bbox[1]<=u&&this.bbox[3]>=u},n.setBBox=function(l,u,c,h){this.bbox[0]=l,this.bbox[1]=u,this.bbox[2]=c,this.bbox[3]=h,this.size=(c-l+h-u)/2},n._newSubRegion=function(){var l=this.subRegions[this.nSubRegions];return l||(l=new t,this.subRegions[this.nSubRegions]=l),this.nSubRegions++,l},n._addNodeToSubRegion=function(l){var u=this.findSubRegion(l.position[0],l.position[1]),c=this.bbox;if(!u){var h=(c[0]+c[2])/2,f=(c[1]+c[3])/2,d=(c[2]-c[0])/2,p=(c[3]-c[1])/2,v=l.position[0]>=h?1:0,g=l.position[1]>=f?1:0,u=this._newSubRegion();u.setBBox(v*d+c[0],g*p+c[1],(v+1)*d+c[0],(g+1)*p+c[1])}u.addNode(l)},n._updateCenterOfMass=function(l){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var u=this.centerOfMass[0]*this.mass,c=this.centerOfMass[1]*this.mass;u+=l.position[0]*l.mass,c+=l.position[1]*l.mass,this.mass+=l.mass,this.centerOfMass[0]=u/this.mass,this.centerOfMass[1]=c/this.mass};function r(){this.position=new Float32Array(2),this.force=e.create(),this.forcePrev=e.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function i(l,u){this.source=l,this.target=u,this.weight=1}function a(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new t,this.rootRegion.centerOfMass=e.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var o=a.prototype;o.initNodes=function(l,u,c){var h=u.length;this.nodes.length=0;for(var f=typeof c<"u",d=0;d<h;d++){var p=new r;p.position[0]=l[d*2],p.position[1]=l[d*2+1],p.mass=u[d],f&&(p.size=c[d]),this.nodes.push(p)}this._massArr=u,this._swingingArr=new Float32Array(h),f&&(this._sizeArr=c)},o.initEdges=function(l,u){var c=l.length/2;this.edges.length=0;for(var h=0;h<c;h++){var f=l[h*2],d=l[h*2+1],p=this.nodes[f],v=this.nodes[d];if(!p||!v){console.error("Node not exists, try initNodes before initEdges");return}p.outDegree++,v.inDegree++;var g=new i(p,v);u&&(g.weight=u[h]),this.edges.push(g)}},o.updateSettings=function(){if(this.repulsionByDegree)for(var l=0;l<this.nodes.length;l++){var u=this.nodes[l];u.mass=u.inDegree+u.outDegree+1}else for(var l=0;l<this.nodes.length;l++){var u=this.nodes[l];u.mass=this._massArr[l]}},o.update=function(){var l=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var u=0;u<l;u++)this.rootRegion.addNode(this.nodes[u]);this.rootRegion.afterUpdate()}for(var u=0;u<l;u++){var c=this.nodes[u];e.copy(c.forcePrev,c.force),e.set(c.force,0,0)}for(var u=0;u<l;u++){var h=this.nodes[u];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,h);else for(var f=u+1;f<l;f++){var d=this.nodes[f];this.applyNodeToNodeRepulsion(h,d,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(h):this.applyNodeGravity(h))}for(var u=0;u<this.edges.length;u++)this.applyEdgeAttraction(this.edges[u]);for(var p=0,v=0,g=e.create(),u=0;u<l;u++){var c=this.nodes[u],m=e.dist(c.force,c.forcePrev);p+=m*c.mass,e.add(g,c.force,c.forcePrev);var _=e.len(g)*.5;v+=_*c.mass,this._swingingArr[u]=m}var y=this.jitterTolerence*this.jitterTolerence*v/p;this._globalSpeed>0&&(y=Math.min(y/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=y;for(var u=0;u<l;u++){var c=this.nodes[u],m=this._swingingArr[u],x=.1*y/(1+y*Math.sqrt(m)),S=e.len(c.force);S>0&&(x=Math.min(S*x,10)/S,e.scaleAndAdd(c.position,c.position,c.force,x))}},o.applyRegionToNodeRepulsion=function(){var l=e.create();return function(c,h){if(c.node)this.applyNodeToNodeRepulsion(c.node,h,!0);else{e.sub(l,h.position,c.centerOfMass);var f=l[0]*l[0]+l[1]*l[1];if(f>this.barnesHutTheta*c.size*c.size){var d=this.scaling*h.mass*c.mass/f;e.scaleAndAdd(h.force,h.force,l,d)}else for(var p=0;p<c.nSubRegions;p++)this.applyRegionToNodeRepulsion(c.subRegions[p],h)}}}(),o.applyNodeToNodeRepulsion=function(){var l=e.create();return function(c,h,f){if(c!=h){e.sub(l,c.position,h.position);var d=l[0]*l[0]+l[1]*l[1];if(d!==0){var p;if(this.preventOverlap){var v=Math.sqrt(d);if(v=v-c.size-h.size,v>0)p=this.scaling*c.mass*h.mass/(v*v);else if(v<0)p=this.scaling*100*c.mass*h.mass;else return}else p=this.scaling*c.mass*h.mass/d;e.scaleAndAdd(c.force,c.force,l,p),e.scaleAndAdd(h.force,h.force,l,-p)}}}}(),o.applyEdgeAttraction=function(){var l=e.create();return function(c){var h=c.source,f=c.target;e.sub(l,h.position,f.position);var d=e.len(l),p;this.edgeWeightInfluence===0?p=1:this.edgeWeightInfluence===1?p=c.weight:p=Math.pow(c.weight,this.edgeWeightInfluence);var v;this.preventOverlap&&(d=d-h.size-f.size,d<=0)||(this.linLogMode?v=-p*Math.log(d+1)/(d+1):v=-p,e.scaleAndAdd(h.force,h.force,l,v),e.scaleAndAdd(f.force,f.force,l,-v))}}(),o.applyNodeGravity=function(){var l=e.create();return function(u){e.sub(l,this.gravityCenter,u.position);var c=e.len(l);e.scaleAndAdd(u.force,u.force,l,this.gravity*u.mass/(c+1))}}(),o.applyNodeStrongGravity=function(){var l=e.create();return function(u){e.sub(l,this.gravityCenter,u.position),e.scaleAndAdd(u.force,u.force,l,this.gravity*u.mass)}}(),o.updateBBox=function(){for(var l=1/0,u=1/0,c=-1/0,h=-1/0,f=0;f<this.nodes.length;f++){var d=this.nodes[f].position;l=Math.min(l,d[0]),u=Math.min(u,d[1]),c=Math.max(c,d[0]),h=Math.max(h,d[1])}this.bbox[0]=l,this.bbox[1]=u,this.bbox[2]=c,this.bbox[3]=h},o.getGlobalSpeed=function(){return this._globalSpeed};var s=null;self.onmessage=function(l){switch(l.data.cmd){case"init":s=new a,s.initNodes(l.data.nodesPosition,l.data.nodesMass,l.data.nodesSize),s.initEdges(l.data.edges,l.data.edgesWeight);break;case"updateConfig":if(s)for(var u in l.data.config)s[u]=l.data.config[u];break;case"update":var c=l.data.steps;if(s){for(var h=0;h<c;h++)s.update();for(var f=s.nodes.length,d=new Float32Array(f*2),h=0;h<f;h++){var p=s.nodes[h];d[h*2]=p.position[0],d[h*2+1]=p.position[1]}self.postMessage({buffer:d.buffer,globalSpeed:s.getGlobalSpeed()},[d.buffer])}else{var v=new Float32Array;self.postMessage({buffer:v.buffer,globalSpeed:s.getGlobalSpeed()},[v.buffer])}break}}}var fx=fNt.toString();fx=fx.slice(fx.indexOf("{")+1,fx.lastIndexOf("}"));var Hx={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},Mo=function(e){for(var t in Hx)this[t]=Hx[t];if(e)for(var t in e)this[t]=e[t];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Ye({type:Nt.FLOAT,flipY:!1,minFilter:Nt.NEAREST,magFilter:Nt.NEAREST})};Mo.prototype.initData=function(e,t){var n=new Blob([fx]),r=window.URL.createObjectURL(n);this._worker=new Worker(r),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=e,this._edges=t,this._frame=0;for(var i=e.length,a=t.length,o=new Float32Array(i*2),s=new Float32Array(i),l=new Float32Array(i),u=new Float32Array(a*2),c=new Float32Array(a),h=0;h<e.length;h++){var f=e[h];o[h*2]=f.x,o[h*2+1]=f.y,s[h]=f.mass==null?1:f.mass,l[h]=f.size==null?1:f.size}for(var h=0;h<t.length;h++){var d=t[h],p=d.node1,v=d.node2;u[h*2]=p,u[h*2+1]=v,c[h]=d.weight==null?1:d.weight}var g=Math.ceil(Math.sqrt(e.length)),m=g,_=new Float32Array(g*m*4),y=this._positionTex;y.width=g,y.height=m,y.pixels=_,this._worker.postMessage({cmd:"init",nodesPosition:o,nodesMass:s,nodesSize:l,edges:u,edgesWeight:c}),this._globalSpeed=1/0};Mo.prototype.updateOption=function(e){var t={};for(var n in Hx)t[n]=Hx[n];var r=this._nodes,i=this._edges,a=r.length;if(a>5e4?t.jitterTolerence=10:a>5e3?t.jitterTolerence=1:t.jitterTolerence=.1,a>100?t.scaling=2:t.scaling=10,a>1e3?t.barnesHutOptimize=!0:t.barnesHutOptimize=!1,e)for(var n in Hx)e[n]!=null&&(t[n]=e[n]);if(!t.gravityCenter){for(var o=[1/0,1/0],s=[-1/0,-1/0],l=0;l<r.length;l++)o[0]=Math.min(r[l].x,o[0]),o[1]=Math.min(r[l].y,o[1]),s[0]=Math.max(r[l].x,s[0]),s[1]=Math.max(r[l].y,s[1]);t.gravityCenter=[(o[0]+s[0])*.5,(o[1]+s[1])*.5]}for(var l=0;l<i.length;l++){var u=i[l].node1,c=i[l].node2;r[u].degree=(r[u].degree||0)+1,r[c].degree=(r[c].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:t})};Mo.prototype.update=function(e,t,n){t==null&&(t=1),t=Math.max(t,1),this._frame+=t,this._onupdate=n,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(t)})};Mo.prototype._$onupdate=function(e){if(!this._disposed){var t=new Float32Array(e.data.buffer);this._globalSpeed=e.data.globalSpeed,this._positionArr=t,this._updateTexture(t),this._onupdate&&this._onupdate()}};Mo.prototype.getNodePositionTexture=function(){return this._positionTex};Mo.prototype.getNodeUV=function(e,t){t=t||[];var n=this._positionTex.width,r=this._positionTex.height;return t[0]=e%n/(n-1),t[1]=Math.floor(e/n)/(r-1),t};Mo.prototype.getNodes=function(){return this._nodes};Mo.prototype.getEdges=function(){return this._edges};Mo.prototype.isFinished=function(e){return this._frame>e};Mo.prototype.getNodePosition=function(e,t){if(t||(t=new Float32Array(this._nodes.length*2)),this._positionArr)for(var n=0;n<this._positionArr.length;n++)t[n]=this._positionArr[n];return t};Mo.prototype._updateTexture=function(e){for(var t=this._positionTex.pixels,n=0,r=0;r<e.length;)t[n++]=e[r++],t[n++]=e[r++],t[n++]=1,t[n++]=1;this._positionTex.dirty()};Mo.prototype.dispose=function(e){this._disposed=!0,this._worker=null};var dNt=ta.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var e=this.zr;e.on("mousedown",this._mouseDownHandler),e.on("mousewheel",this._mouseWheelHandler),e.on("globalout",this._mouseUpHandler),e.animation.on("frame",this._update)},setTarget:function(e){this._target=e},setZoom:function(e){this._zoom=Math.max(Math.min(e,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(e){this._dx=e[0],this._dy=e[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var e=this._target,t=this._zoom;e.position.x=this._dx,e.position.y=this._dy,e.scale.set(t,t,t),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(e){if(!e.target){var t=e.offsetX,n=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(t,n))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var r=this._convertPos(t,n);this._x=r.x,this._y=r.y}}},_convertPos:function(e,t){var n=this.viewGL.camera,r=this.viewGL.viewport;return{x:(e-r.x)/r.width*(n.right-n.left)+n.left,y:(t-r.y)/r.height*(n.bottom-n.top)+n.top}},_mouseMoveHandler:function(e){var t=this._convertPos(e.offsetX,e.offsetY);this._dx+=t.x-this._x,this._dy+=t.y-this._y,this._x=t.x,this._y=t.y,this._needsUpdate=!0},_mouseUpHandler:function(e){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(e){e=e.event;var t=e.wheelDelta||-e.detail;if(t!==0){var n=e.offsetX,r=e.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(n,r))){var i=t>0?1.1:.9,a=Math.max(Math.min(this._zoom*i,this.maxZoom),this.minZoom);i=a/this._zoom;var o=this._convertPos(n,r),s=(o.x-this._dx)*(i-1),l=(o.y-this._dy)*(i-1);this._dx-=s,this._dy-=l,this._zoom=a,this._needsUpdate=!0}}},dispose:function(){var e=this.zr;e.off("mousedown",this._mouseDownHandler),e.off("mousemove",this._mouseMoveHandler),e.off("mouseup",this._mouseUpHandler),e.off("mousewheel",this._mouseWheelHandler),e.off("globalout",this._mouseUpHandler),e.animation.off("frame",this._update)}});const pNt=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`;var Bw=ei.vec2;V.Shader.import(pNt);var vNt=1;const gNt=hn.extend({type:"graphGL",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this.viewGL=new Yn("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Sv(!0,t),this._forceEdgesMesh=new V.Mesh({material:new V.Material({shader:V.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new V.Geometry({attributes:{node:new V.Geometry.Attribute("node","float",2),color:new V.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:V.Mesh.LINES}),this._edgesMesh=new V.Mesh({material:new V.Material({shader:V.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new tz({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new dNt({zr:t.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(e,t,n){this.groupGL.add(this._pointsBuilder.rootNode),this._model=e,this._api=n,this._initLayout(e,t,n),this._pointsBuilder.update(e,t,n),this._forceLayoutInstance instanceof gi||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(e,n),this._control.off("update"),this._control.on("update",function(){n.dispatchAction({type:"graphGLRoam",seriesId:e.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(an.firstNotNull(e.get("zoom"),1)),this._control.setOffset(e.get("offset")||[0,0]);var r=this._pointsBuilder.getPointsMesh();if(r.off("mousemove",this._mousemoveHandler),r.off("mouseout",this._mouseOutHandler,this),n.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,e.get("focusNodeAdjacency")){var i=e.get("focusNodeAdjacencyOn");i==="click"?n.getZr().on("click",this._clickHandler):i==="mouseover"&&(r.on("mousemove",this._mousemoveHandler,this),r.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(e){if(!this._layouting){var t=this._pointsBuilder.getPointsMesh().dataIndex;t>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:t}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(e){if(!this._layouting){var t=this._pointsBuilder.getPointsMesh().dataIndex;t>=0?t!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:t}):this._mouseOutHandler(e),this._lastMouseOverDataIndex=t}},_mouseOutHandler:function(e){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(e,t){var n=this._forceEdgesMesh.geometry,r=t.getEdgeData(),i=0,a=this._forceLayoutInstance,o=r.count()*2;n.attributes.node.init(o),n.attributes.color.init(o),r.each(function(s){var l=e[s];n.attributes.node.set(i,a.getNodeUV(l.node1)),n.attributes.node.set(i+1,a.getNodeUV(l.node2));var u=Bi(r,l.dataIndex),c=V.parseColor(u);c[3]*=an.firstNotNull(Li(r,l.dataIndex),1),n.attributes.color.set(i,c),n.attributes.color.set(i+1,c),i+=2}),n.dirty()},_updateMeshLinesGeometry:function(){var t=this._model.getEdgeData(),e=this._edgesMesh.geometry,t=this._model.getEdgeData(),n=this._model.getData().getLayout("points");e.resetOffset(),e.setVertexCount(t.count()*e.getLineVertexCount()),e.setTriangleCount(t.count()*e.getLineTriangleCount());var r=[],i=[],a=["lineStyle","width"];this._originalEdgeColors=new Float32Array(t.count()*4),this._edgeIndicesMap=new Float32Array(t.count()),t.each(function(o){var s=t.graph.getEdgeByIndex(o),l=s.node1.dataIndex*2,u=s.node2.dataIndex*2;r[0]=n[l],r[1]=n[l+1],i[0]=n[u],i[1]=n[u+1];var c=Bi(t,s.dataIndex),h=V.parseColor(c);h[3]*=an.firstNotNull(Li(t,s.dataIndex),1);var f=t.getItemModel(s.dataIndex),d=an.firstNotNull(f.get(a),1)*this._api.getDevicePixelRatio();e.addLine(r,i,h,d);for(var p=0;p<4;p++)this._originalEdgeColors[s.dataIndex*4+p]=h[p];this._edgeIndicesMap[s.dataIndex]=o},this),e.dirty()},_updateForceNodesGeometry:function(e){for(var t=this._pointsBuilder.getPointsMesh(),n=[],r=0;r<e.count();r++)this._forceLayoutInstance.getNodeUV(r,n),t.geometry.attributes.position.set(r,n);t.geometry.dirty("position")},_initLayout:function(e,t,n){var r=e.get("layout"),i=e.getGraph(),a=e.getBoxLayoutParams(),o=Gr(a,{width:n.getWidth(),height:n.getHeight()});r==="force"&&(r="forceAtlas2"),this.stopLayout(e,t,n,{beforeLayout:!0});var s=e.getData(),l=e.getData();if(r==="forceAtlas2"){var u=e.getModel("forceAtlas2"),c=this._forceLayoutInstance,h=[],f=[],d=s.getDataExtent("value"),p=l.getDataExtent("value"),v=an.firstNotNull(u.get("edgeWeight"),1),g=an.firstNotNull(u.get("nodeWeight"),1);typeof v=="number"&&(v=[v,v]),typeof g=="number"&&(g=[g,g]);var m=0,_={},y=new Float32Array(s.count()*2);if(i.eachNode(function(S){var b=S.dataIndex,w=s.get("value",b),A,T;if(s.hasItemOption){var M=s.getItemModel(b);A=M.get("x"),T=M.get("y")}A==null&&(A=o.x+Math.random()*o.width,T=o.y+Math.random()*o.height),y[m*2]=A,y[m*2+1]=T,_[S.id]=m++;var C=Cn(w,d,g);isNaN(C)&&(isNaN(g[0])?C=1:C=g[0]),h.push({x:A,y:T,mass:C,size:s.getItemVisual(b,"symbolSize")})}),s.setLayout("points",y),i.eachEdge(function(S){var b=S.dataIndex,w=s.get("value",b),A=Cn(w,p,v);isNaN(A)&&(isNaN(v[0])?A=1:A=v[0]),f.push({node1:_[S.node1.id],node2:_[S.node2.id],weight:A,dataIndex:b})}),!c){var x=u.get("GPU");this._forceLayoutInstance&&(x&&!(this._forceLayoutInstance instanceof gi)||!x&&!(this._forceLayoutInstance instanceof Mo))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),c=this._forceLayoutInstance=x?new gi:new Mo}c.initData(h,f),c.updateOption(u.option),this._updateForceEdgesGeometry(c.getEdges(),e),this._updatePositionTexture(),n.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var y=new Float32Array(s.count()*2),m=0;i.eachNode(function(w){var A=w.dataIndex,T,M;if(s.hasItemOption){var C=s.getItemModel(A);T=C.get("x"),M=C.get("y")}y[m++]=T,y[m++]=M}),s.setLayout("points",y),this._updateAfterLayout(e,t,n)}},_updatePositionTexture:function(){var e=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(e),this._forceEdgesMesh.material.set("positionTex",e)},startLayout:function(e,t,a,r){if(!(r&&r.from!=null&&r.from!==this.uid)){var i=this.viewGL,a=this._api,o=this._forceLayoutInstance,s=this._model.getData(),l=this._model.getModel("forceAtlas2");if(o&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(e.getData()),this._pointsBuilder.hideLabels();var u=this,c=this._layoutId=vNt++,h=l.getShallow("maxSteps"),f=l.getShallow("steps"),d=0,p=Math.max(f*2,20),v=function(g){if(g===u._layoutId){if(o.isFinished(h)){a.dispatchAction({type:"graphGLStopLayout",from:u.uid}),a.dispatchAction({type:"graphGLFinishLayout",points:s.getLayout("points"),from:u.uid});return}o.update(i.layer.renderer,f,function(){u._updatePositionTexture(),d+=f,d>=p&&(u._syncNodePosition(e),d=0),a.getZr().refresh(),cv(function(){v(g)})})}};cv(function(){u._forceLayoutInstanceToDispose&&(u._forceLayoutInstanceToDispose.dispose(i.layer.renderer),u._forceLayoutInstanceToDispose=null),v(c)}),this._layouting=!0}}},stopLayout:function(e,t,n,r){r&&r.from!=null&&r.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(r&&r.beforeLayout||(this._syncNodePosition(e),this._updateAfterLayout(e,t,n)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(e){var t=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);e.getData().setLayout("points",t),e.setNodePosition(t)},_updateAfterLayout:function(e,t,n){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(e,t,n),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(e,t,n,r){var i=this._model.getData();this._downplayAll();var a=r.dataIndex,o=i.graph,s=[],l=o.getNodeByIndex(a);s.push(l),l.edges.forEach(function(c){c.dataIndex<0||(c.node1!==l&&s.push(c.node1),c.node2!==l&&s.push(c.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),s.forEach(function(c){this._pointsBuilder.highlight(i,c.dataIndex)},this),this._pointsBuilder.updateLabels(s.map(function(c){return c.dataIndex}));var u=[];l.edges.forEach(function(c){c.dataIndex>=0&&(this._highlightEdge(c.dataIndex),u.push(c))},this),this._focusNodes=s,this._focusEdges=u},unfocusNodeAdjacency:function(e,t,n,r){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(e){var t=this._model.getEdgeData().getItemModel(e),n=V.parseColor(t.get("emphasis.lineStyle.color")||t.get("lineStyle.color")),r=an.firstNotNull(t.get("emphasis.lineStyle.opacity"),t.get("lineStyle.opacity"),1);n[3]*=r,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],n)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(e){this._pointsBuilder.downplay(this._model.getData(),e.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(e){this._downplayEdge(e.dataIndex)},this)},_downplayEdge:function(e){var t=this._getColor(e,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)},_setEdgeFade:function(){var e=[];return function(t,n){this._getColor(t,e),e[3]*=n,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],e)}}(),_getColor:function(e,t){for(var n=0;n<4;n++)t[n]=this._originalEdgeColors[e*4+n];return t},_fadeOutEdgesAll:function(e){var t=this._model.getData().graph;t.eachEdge(function(n){this._setEdgeFade(n.dataIndex,e)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(e,t){this.viewGL.setViewport(0,0,t.getWidth(),t.getHeight(),t.getDevicePixelRatio());for(var n=this.viewGL.camera,r=e.getData(),i=r.getLayout("points"),a=Bw.create(1/0,1/0),o=Bw.create(-1/0,-1/0),s=[],l=0;l<i.length;)s[0]=i[l++],s[1]=i[l++],Bw.min(a,a,s),Bw.max(o,o,s);var u=(o[1]+a[1])/2,c=(o[0]+a[0])/2;if(!(c>n.left&&c<n.right&&u<n.bottom&&u>n.top)){var h=Math.max(o[0]-a[0],10),f=h/t.getWidth()*t.getHeight();h*=1.4,f*=1.4,a[0]-=h*.2,n.left=a[0],n.top=u-f/2,n.bottom=u+f/2,n.right=h+a[0],n.near=0,n.far=100}},dispose:function(){var e=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(e),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function kw(e){return e instanceof Array||(e=[e,e]),e}function mNt(e){e.registerChartView(gNt),e.registerSeriesModel(hx),e.registerVisual(function(n){const r={};n.eachSeriesByType("graphGL",function(i){var a=i.getCategoriesData(),o=i.getData(),s={};a.each(function(l){var u=a.getName(l);s["ec-"+u]=l;var c=a.getItemModel(l),h=c.getModel("itemStyle").getItemStyle();h.fill||(h.fill=i.getColorFromPalette(u,r)),a.setItemVisual(l,"style",h);var f=["symbol","symbolSize","symbolKeepAspect"];for(let p=0;p<f.length;p++){var d=c.getShallow(f[p],!0);d!=null&&a.setItemVisual(l,f[p],d)}}),a.count()&&o.each(function(l){var u=o.getItemModel(l);let c=u.getShallow("category");if(c!=null){typeof c=="string"&&(c=s["ec-"+c]);var h=a.getItemVisual(c,"style"),f=o.ensureUniqueItemVisual(l,"style");ut(f,h);var d=["symbol","symbolSize","symbolKeepAspect"];for(let p=0;p<d.length;p++)o.setItemVisual(l,d[p],a.getItemVisual(c,d[p]))}})})}),e.registerVisual(function(n){n.eachSeriesByType("graphGL",function(r){var i=r.getGraph(),a=r.getEdgeData(),o=kw(r.get("edgeSymbol")),s=kw(r.get("edgeSymbolSize"));a.setVisual("drawType","stroke"),a.setVisual("fromSymbol",o&&o[0]),a.setVisual("toSymbol",o&&o[1]),a.setVisual("fromSymbolSize",s&&s[0]),a.setVisual("toSymbolSize",s&&s[1]),a.setVisual("style",r.getModel("lineStyle").getLineStyle()),a.each(function(l){var u=a.getItemModel(l),c=i.getEdgeByIndex(l),h=kw(u.getShallow("symbol",!0)),f=kw(u.getShallow("symbolSize",!0)),d=u.getModel("lineStyle").getLineStyle(),p=a.ensureUniqueItemVisual(l,"style");switch(ut(p,d),p.stroke){case"source":{var v=c.node1.getVisual("style");p.stroke=v&&v.fill;break}case"target":{var v=c.node2.getVisual("style");p.stroke=v&&v.fill;break}}h[0]&&c.setVisual("fromSymbol",h[0]),h[1]&&c.setVisual("toSymbol",h[1]),f[0]&&c.setVisual("fromSymbolSize",f[0]),f[1]&&c.setVisual("toSymbolSize",f[1])})})}),e.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(n,r){r.eachComponent({mainType:"series",query:n},function(i){i.setView(n)})});function t(){}e.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},t),e.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},t),e.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},t),e.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},t)}ue(mNt);const yNt=bn.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(e,t){var n=this.get("coordinateSystem"),r=n==="geo"?["lng","lat"]:PJ(n)||["x","y"];r.push("vx","vy");var i=T1(this.getSource(),{coordDimensions:r,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),a=new Ir(i,this);return a.initData(this.getSource()),a},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}});var _Nt=cn.extend(function(){return{dynamic:!0,attributes:{position:new cn.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(e){var t=this.attributes,n=4*e,r=2*e;this.vertexCount!==n&&t.position.init(n),this.triangleCount!==r&&(r===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(r*3):new Uint16Array(r*3))},addLine:function(e){var t=this._vertexOffset;this.attributes.position.set(t,[e[0],e[1],1]),this.attributes.position.set(t+1,[e[0],e[1],-1]),this.attributes.position.set(t+2,[e[0],e[1],2]),this.attributes.position.set(t+3,[e[0],e[1],-2]),this.setTriangleIndices(this._faceOffset++,[t,t+1,t+2]),this.setTriangleIndices(this._faceOffset++,[t+1,t+2,t+3]),this._vertexOffset+=4}});const xNt=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;kt.import(xNt);function bNt(e){var t=document.createElement("canvas");t.width=t.height=e;var n=t.getContext("2d");return n.fillStyle="#fff",n.arc(e/2,e/2,e/2,0,Math.PI*2),n.fill(),t}var qN=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Ye({type:Nt.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};qN.prototype={constructor:qN,init:function(){var e={type:Nt.FLOAT,minFilter:Nt.NEAREST,magFilter:Nt.NEAREST,useMipmap:!1};this._spawnTexture=new Ye(e),this._particleTexture0=new Ye(e),this._particleTexture1=new Ye(e),this._frameBuffer=new Qr({depthBuffer:!1}),this._particlePass=new oi({fragment:kt.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new oi({fragment:kt.source("clay.compositor.downsample")});var t=new Ii({renderOrder:10,material:new ks({shader:new kt(kt.source("ecgl.vfParticle.renderPoints.vertex"),kt.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Ii.POINTS,geometry:new cn({dynamic:!0,mainAttribute:"texcoord0"})}),n=new Ii({renderOrder:10,material:new ks({shader:new kt(kt.source("ecgl.vfParticle.renderLines.vertex"),kt.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new _Nt,culling:!1}),r=new Ii({material:new ks({shader:new kt(kt.source("ecgl.color.vertex"),kt.source("ecgl.color.fragment"))}),geometry:new FE});r.material.enableTexture("diffuseMap"),this._particlePointsMesh=t,this._particleLinesMesh=n,this._lastFrameFullQuadMesh=r,this._camera=new xy,this._thisFrameTexture=new Ye,this._lastFrameTexture=new Ye},setParticleDensity:function(e,t){for(var n=e*t,r=new Float32Array(n*4),i=0,a=this.particleLife,o=0;o<e;o++)for(var s=0;s<t;s++,i++){r[i*4]=Math.random(),r[i*4+1]=Math.random(),r[i*4+2]=Math.random();var l=(a[1]-a[0])*Math.random()+a[0];r[i*4+3]=l}this._particleType==="line"?this._setLineGeometry(e,t):this._setPointsGeometry(e,t),this._spawnTexture.width=e,this._spawnTexture.height=t,this._spawnTexture.pixels=r,this._particleTexture0.width=this._particleTexture1.width=e,this._particleTexture0.height=this._particleTexture1.height=t,this._particlePass.setUniform("textureSize",[e,t])},_setPointsGeometry:function(e,t){var n=e*t,r=this._particlePointsMesh.geometry,i=r.attributes;i.texcoord0.init(n);for(var a=0,o=0;o<e;o++)for(var s=0;s<t;s++,a++)i.texcoord0.value[a*2]=o/e,i.texcoord0.value[a*2+1]=s/t;r.dirty()},_setLineGeometry:function(e,t){var n=e*t,r=this._getParticleMesh().geometry;r.setLineCount(n),r.resetOffset();for(var i=0;i<e;i++)for(var a=0;a<t;a++)r.addLine([i/e,a/t]);r.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(e,t,n,r){var i=this._getParticleMesh(),a=this._frameBuffer,o=this._particlePass;r&&this._updateDownsampleTextures(e,t),i.material.set("size",this._particleSize*this._supersampling),i.material.set("color",this.particleColor),o.setUniform("speedScaling",this.particleSpeedScaling),a.attach(this._particleTexture1),o.setUniform("firstFrameTime",r?(this.particleLife[1]+this.particleLife[0])/2:0),o.setUniform("particleTexture",this._particleTexture0),o.setUniform("deltaTime",n),o.setUniform("elapsedTime",this._elapsedTime),o.render(e,a),i.material.set("particleTexture",this._particleTexture1),i.material.set("prevParticleTexture",this._particleTexture0),a.attach(this._thisFrameTexture),a.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT);var s=this._lastFrameFullQuadMesh;s.material.set("diffuseMap",this._lastFrameTexture),s.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),e.renderPass([s,i],this._camera),a.unbind(e),this._downsample(e),this._swapTexture(),this._elapsedTime+=n},_downsample:function(e){var t=this._downsampleTextures;if(t.length!==0)for(var n=0,r=this._thisFrameTexture,i=t[n];i;)this._frameBuffer.attach(i),this._downsamplePass.setUniform("texture",r),this._downsamplePass.setUniform("textureSize",[r.width,r.height]),this._downsamplePass.render(e,this._frameBuffer),r=i,i=t[++n]},getSurfaceTexture:function(){var e=this._downsampleTextures;return e.length>0?e[e.length-1]:this._lastFrameTexture},setRegion:function(e){this._particlePass.setUniform("region",e)},resize:function(e,t){this._lastFrameTexture.width=e*this._supersampling,this._lastFrameTexture.height=t*this._supersampling,this._thisFrameTexture.width=e*this._supersampling,this._thisFrameTexture.height=t*this._supersampling,this._width=e,this._height=t},setParticleSize:function(e){var t=this._getParticleMesh();if(e<=2){t.material.disableTexture("spriteTexture"),t.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Ye),(!this._spriteTexture.image||this._spriteTexture.image.width!==e)&&(this._spriteTexture.image=bNt(e),this._spriteTexture.dirty()),t.material.transparent=!0,t.material.enableTexture("spriteTexture"),t.material.set("spriteTexture",this._spriteTexture),this._particleSize=e},setGradientTexture:function(e){var t=this._getParticleMesh().material;t[e?"enableTexture":"disableTexture"]("gradientTexture"),t.setUniform("gradientTexture",e)},setColorTextureImage:function(e,t){var n=this._getParticleMesh().material;n.setTextureImage("colorTexture",e,t,{flipY:!0})},setParticleType:function(e){this._particleType=e},clearFrame:function(e){var t=this._frameBuffer;t.attach(this._lastFrameTexture),t.bind(e),e.gl.clear(e.gl.DEPTH_BUFFER_BIT|e.gl.COLOR_BUFFER_BIT),t.unbind(e)},setSupersampling:function(e){this._supersampling=e,this.resize(this._width,this._height)},_updateDownsampleTextures:function(e,t){for(var n=this._downsampleTextures,r=Math.max(Math.floor(Math.log(this._supersampling/t.getDevicePixelRatio())/Math.log(2)),0),i=2,a=this._width*this._supersampling,o=this._height*this._supersampling,s=0;s<r;s++)n[s]=n[s]||new Ye,n[s].width=a/i,n[s].height=o/i,i*=2;for(;s<n.length;s++)n[s].dispose(e);n.length=r},_swapTexture:function(){var e=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=e;var e=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=e},dispose:function(e){e.disposeFrameBuffer(this._frameBuffer),e.disposeTexture(this.vectorFieldTexture),e.disposeTexture(this._spawnTexture),e.disposeTexture(this._particleTexture0),e.disposeTexture(this._particleTexture1),e.disposeTexture(this._thisFrameTexture),e.disposeTexture(this._lastFrameTexture),e.disposeGeometry(this._particleLinesMesh.geometry),e.disposeGeometry(this._particlePointsMesh.geometry),e.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&e.disposeTexture(this._spriteTexture),this._particlePass.dispose(e),this._downsamplePass.dispose(e),this._downsampleTextures.forEach(function(t){t.dispose(e)})}};const SNt=hn.extend({type:"flowGL",__ecgl__:!0,init:function(e,t){this.viewGL=new Yn("orthographic"),this.groupGL=new V.Node,this.viewGL.add(this.groupGL),this._particleSurface=new qN;var n=new V.Mesh({geometry:new V.PlaneGeometry,material:new V.Material({shader:new V.Shader({vertex:V.Shader.source("ecgl.color.vertex"),fragment:V.Shader.source("ecgl.color.fragment")}),transparent:!0})});n.material.enableTexture("diffuseMap"),this.groupGL.add(n),this._planeMesh=n},render:function(e,t,n){var r=this._particleSurface;r.setParticleType(e.get("particleType")),r.setSupersampling(e.get("supersampling")),this._updateData(e,n),this._updateCamera(n.getWidth(),n.getHeight(),n.getDevicePixelRatio());var i=an.firstNotNull(e.get("particleDensity"),128);r.setParticleDensity(i,i);var a=this._planeMesh,o=+new Date,s=this,l=!0;a.__percent=0,a.stopAnimation(),a.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var h=+new Date,f=Math.min(h-o,20);o=o+f,s._renderer&&(r.update(s._renderer,n,f/1e3,l),a.material.set("diffuseMap",r.getSurfaceTexture())),l=!1}).start();var u=e.getModel("itemStyle"),c=V.parseColor(u.get("color"));c[3]*=an.firstNotNull(u.get("opacity"),1),a.material.set("color",c),r.setColorTextureImage(e.get("colorTexture"),n),r.setParticleSize(e.get("particleSize")),r.particleSpeedScaling=e.get("particleSpeed"),r.motionBlurFactor=1-Math.pow(.1,e.get("particleTrail"))},updateTransform:function(e,t,n){this._updateData(e,n)},afterRender:function(e,t,n,r){var i=r.renderer;this._renderer=i},_updateData:function(e,t){var n=e.coordinateSystem,r=n.dimensions.map(function(_){return e.coordDimToDataDim(_)[0]}),i=e.getData(),a=i.getDataExtent(r[0]),o=i.getDataExtent(r[1]),s=e.get("gridWidth"),l=e.get("gridHeight");if(s==null||s==="auto"){var u=(a[1]-a[0])/(o[1]-o[0]);s=Math.round(Math.sqrt(u*i.count()))}(l==null||l==="auto")&&(l=Math.ceil(i.count()/s));var c=this._particleSurface.vectorFieldTexture,h=c.pixels;if(!h||h.length!==l*s*4)h=c.pixels=new Float32Array(s*l*4);else for(var f=0;f<h.length;f++)h[f]=0;var d=0,p=1/0,v=new Float32Array(i.count()*2),g=0,m=[[1/0,1/0],[-1/0,-1/0]];i.each([r[0],r[1],"vx","vy"],function(_,y,x,S){var b=n.dataToPoint([_,y]);v[g++]=b[0],v[g++]=b[1],m[0][0]=Math.min(b[0],m[0][0]),m[0][1]=Math.min(b[1],m[0][1]),m[1][0]=Math.max(b[0],m[1][0]),m[1][1]=Math.max(b[1],m[1][1]);var w=Math.sqrt(x*x+S*S);d=Math.max(d,w),p=Math.min(p,w)}),i.each(["vx","vy"],function(_,y,x){var S=Math.round((v[x*2]-m[0][0])/(m[1][0]-m[0][0])*(s-1)),b=l-1-Math.round((v[x*2+1]-m[0][1])/(m[1][1]-m[0][1])*(l-1)),w=(b*s+S)*4;h[w]=_/d*.5+.5,h[w+1]=y/d*.5+.5,h[w+3]=1}),c.width=s,c.height=l,e.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(c),c.dirty(),this._updatePlanePosition(m[0],m[1],e,t),this._updateGradientTexture(i.getVisual("visualMeta"),[p,d])},_fillEmptyPixels:function(e){var t=e.pixels,n=e.width,r=e.height;function i(v,g,m){v=Math.max(Math.min(v,n-1),0),g=Math.max(Math.min(g,r-1),0);var _=(g*(n-1)+v)*4;return t[_+3]===0?!1:(m[0]=t[_],m[1]=t[_+1],!0)}function a(v,g,m){m[0]=v[0]+g[0],m[1]=v[1]+g[1]}for(var o=[],s=[],l=[],u=[],c=[],h=0,f=0;f<r;f++)for(var d=0;d<n;d++){var p=(f*(n-1)+d)*4;t[p+3]===0&&(h=o[0]=o[1]=0,i(d-1,f,s)&&(h++,a(s,o,o)),i(d+1,f,l)&&(h++,a(l,o,o)),i(d,f-1,u)&&(h++,a(u,o,o)),i(d,f+1,c)&&(h++,a(c,o,o)),o[0]/=h,o[1]/=h,t[p]=o[0],t[p+1]=o[1]),t[p+3]=1}},_updateGradientTexture:function(e,t){if(!e||!e.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new V.Texture2D({image:document.createElement("canvas")});var n=this._gradientTexture,r=n.image;r.width=200,r.height=1;var i=r.getContext("2d"),a=i.createLinearGradient(0,.5,r.width,.5);e[0].stops.forEach(function(o){var s;t[1]===t[0]?s=0:(s=o.value/t[1],s=Math.min(Math.max(s,0),1)),a.addColorStop(s,o.color)}),i.fillStyle=a,i.fillRect(0,0,r.width,r.height),n.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(e,t,n,r){var i=this._limitInViewportAndFullFill(e,t,n,r);e=i.leftTop,t=i.rightBottom,this._particleSurface.setRegion(i.region),this._planeMesh.position.set((e[0]+t[0])/2,r.getHeight()-(e[1]+t[1])/2,0);var a=t[0]-e[0],o=t[1]-e[1];this._planeMesh.scale.set(a/2,o/2,1),this._particleSurface.resize(Math.max(Math.min(a,2048),1),Math.max(Math.min(o,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(e,t,n,r){var i=[Math.max(e[0],0),Math.max(e[1],0)],a=[Math.min(t[0],r.getWidth()),Math.min(t[1],r.getHeight())];if(n.get("coordinateSystem")==="bmap"){var o=n.getData().getDataExtent(n.coordDimToDataDim("lng")[0]),s=Math.floor(o[1]-o[0])>=359;s&&(i[0]>0&&(i[0]=0),a[0]<r.getWidth()&&(a[0]=r.getWidth()))}var l=t[0]-e[0],u=t[1]-e[1],c=a[0]-i[0],h=a[1]-i[1],f=[(i[0]-e[0])/l,1-h/u-(i[1]-e[1])/u,c/l,h/u];return{leftTop:i,rightBottom:a,region:f}},_updateCamera:function(e,t,n){this.viewGL.setViewport(0,0,e,t,n);var r=this.viewGL.camera;r.left=r.bottom=0,r.top=t,r.right=e,r.near=0,r.far=100,r.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function wNt(e){e.registerChartView(SNt),e.registerSeriesModel(yNt)}ue(wNt);var KN=bn.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(e){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),KN.superApply(this,"init",arguments)},mergeOption:function(e){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),KN.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=ay(this._flatCoords,t.flatCoords),this._flatCoordsOffset=ay(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e),n=t.option instanceof Array?t.option:t.getShallow("coords");return n},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[e*2],r=this._flatCoordsOffset[e*2+1],i=0;i<r;i++)t[i]=t[i]||[],t[i][0]=this._flatCoords[n+i*2],t[i][1]=this._flatCoords[n+i*2+1];return r}else{for(var a=this._getCoordsFromItemModel(e),i=0;i<a.length;i++)t[i]=t[i]||[],t[i][0]=a[i][0],t[i][1]=a[i][1];return a.length}},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),typeof e[0]=="number"){for(var n=e.length,r=new Uint32Array(n),i=new Float64Array(n),a=0,o=0,s=0,l=0;l<n;){s++;var u=e[l++];r[o++]=a+t,r[o++]=u;for(var c=0;c<u;c++){var h=e[l++],f=e[l++];i[a++]=h,i[a++]=f}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,o),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},getInitialData:function(e,t){var n=new Ir(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(r,i,a,o){if(r instanceof Array)return NaN;n.hasItemOption=!0;var s=r.value;if(s!=null)return s instanceof Array?s[o]:s}),n},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}});const TNt=hn.extend({type:"linesGL",__ecgl__:!0,init:function(e,t){this.groupGL=new V.Node,this.viewGL=new Yn("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Sh(this.viewGL),this._nativeLinesShader=V.createShader("ecgl.lines3D"),this._meshLinesShader=V.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(e,t,n){this.groupGL.removeAll(),this._glViewHelper.reset(e,n);var r=this._linesMeshes[0];r||(r=this._linesMeshes[0]=this._createLinesMesh(e)),this._linesMeshes.length=1,this.groupGL.add(r),this._updateLinesMesh(e,r,0,e.getData().count()),this.viewGL.setPostEffect(e.getModel("postEffect"),n)},incrementalPrepareRender:function(e,t,n){this.groupGL.removeAll(),this._glViewHelper.reset(e,n),this._currentStep=0,this.viewGL.setPostEffect(e.getModel("postEffect"),n)},incrementalRender:function(e,t,n,r){var i=this._linesMeshes[this._currentStep];i||(i=this._createLinesMesh(t),this._linesMeshes[this._currentStep]=i),this._updateLinesMesh(t,i,e.start,e.end),this.groupGL.add(i),r.getZr().refresh(),this._currentStep++},updateTransform:function(e,t,n){e.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(e,n)},_createLinesMesh:function(e){var t=new V.Mesh({$ignorePicking:!0,material:new V.Material({shader:V.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new tz({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:V.Mesh.LINES,culling:!1});return t},_updateLinesMesh:function(e,t,n,r){var i=e.getData();t.material.blend=e.get("blendMode")==="lighter"?V.additiveBlend:null;var a=e.get("lineStyle.curveness")||0,o=e.get("polyline"),s=t.geometry,l=e.coordinateSystem,u=an.firstNotNull(e.get("lineStyle.width"),1);u>1?(t.material.shader!==this._meshLinesShader&&t.material.attachShader(this._meshLinesShader),t.mode=V.Mesh.TRIANGLES):(t.material.shader!==this._nativeLinesShader&&t.material.attachShader(this._nativeLinesShader),t.mode=V.Mesh.LINES),n=n||0,r=r||i.count(),s.resetOffset();var c=0,h=0,f=[],d=[],p=[],v=[],g=[],m=.3,_=.7;function y(){d[0]=f[0]*_+v[0]*m-(f[1]-v[1])*a,d[1]=f[1]*_+v[1]*m-(v[0]-f[0])*a,p[0]=f[0]*m+v[0]*_-(f[1]-v[1])*a,p[1]=f[1]*m+v[1]*_-(v[0]-f[0])*a}if(o||a!==0)for(var x=n;x<r;x++)if(o){var S=e.getLineCoordsCount(x);c+=s.getPolylineVertexCount(S),h+=s.getPolylineTriangleCount(S)}else e.getLineCoords(x,g),this._glViewHelper.dataToPoint(l,g[0],f),this._glViewHelper.dataToPoint(l,g[1],v),y(),c+=s.getCubicCurveVertexCount(f,d,p,v),h+=s.getCubicCurveTriangleCount(f,d,p,v);else{var b=r-n;c+=b*s.getLineVertexCount(),h+=b*s.getLineVertexCount()}s.setVertexCount(c),s.setTriangleCount(h);for(var w=n,A=[],x=n;x<r;x++){V.parseColor(Bi(i,w),A);var T=an.firstNotNull(Li(i,w),1);A[3]*=T;for(var S=e.getLineCoords(x,g),M=0;M<S;M++)this._glViewHelper.dataToPoint(l,g[M],g[M]);o?s.addPolyline(g,A,u,0,S):a!==0?(f=g[0],v=g[1],y(),s.addCubicCurve(f,d,p,v,A,u)):s.addPolyline(g,A,u,0,2),w++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function MNt(e){e.registerChartView(TNt),e.registerSeriesModel(KN)}ue(MNt);const[_rt,ANt]=rt(0),[Cc,xrt]=rt(0),[ZN,CNt]=rt([]),[JN,ENt]=rt([]),[QN,DNt]=rt([]),[t3,INt]=rt([]),[e3,LNt]=rt([]),[n3,PNt]=rt([]),[r3,RNt]=rt(!1),[i3,ONt]=rt(!1),[brt,VA]=rt("Position"),[NNt,GA]=rt("Position"),[Vb,BNt]=rt(null),[Gb,kNt]=rt(null),[FNt,ose]=rt(null),[ez,WL]=rt("x"),[av,zNt]=rt([]),[yr,HA]=rt("Hips"),[a3,WA]=rt("Hips"),[UNt,Srt]=rt(!1),[VNt,m9]=rt({}),[GNt,sse]=rt(100),[HNt,lse]=rt(0),[use,rp]=rt(50),[cse,P_]=rt(50),[WNt,Fw]=rt(50),[$Nt,zw]=rt(50),[hse,XNt]=rt(!1);rt([]);rt([]);const[jNt,YNt]=rt(!1);rt(2);rt("X");rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt([]);rt(0);rt(!1);const[qNt,fse]=rt(!1);rt(40);rt(60);const[Ms,y9]=rt(1);rt(1);rt("Hips");const[wrt,dse]=rt(null);rt(30);const[pse,_9]=rt(0);rt(null);rt("Assumptions");const[cM,o3]=rt("MCEAS02G01R03.bvh"),[s3,KNt]=rt([]);rt([]);const[Hb,x9]=rt([]),[Pi,ZNt]=rt([]),[JNt,$A]=rt(!1),[QNt,t3t]=rt([]),[e3t,n3t]=rt(!0),[b9,r3t]=rt([]),[S9,i3t]=rt([]),[gp,w9]=rt(null),[Trt,vse]=rt(!0),[$L,Mrt]=rt("speed"),[T9,a3t]=rt([]),[M9,o3t]=rt([]),[A9,s3t]=rt([]),[C9,l3t]=rt([]),[gse,u3t]=rt([]),[mse,c3t]=rt([]),[yse,h3t]=rt([]),[E9,f3t]=rt([]),[hM,d3t]=rt("none"),[fM,p3t]=rt("none"),[dM,v3t]=rt("none"),[D9,g3t]=rt(!0),[m3t,ss]=rt({title:"",description:"",calculation:"",quality:"",interpretation:"",unit:""});rt({x:20,y:20});const $n=Array.isArray;function Ao(e){return e!=null?$n(e)?e:[e]:[]}function y3t(e=0,t=1/0){return`${I9(e)} < row_number() && row_number() <= ${I9(t)}`}function I9(e){return e<0?`count() + ${e}`:e}class Art{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(y3t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Ao(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const a={...i,left:!0,right:!1};return this.__join(this,t,n,r,a)}join_right(t,n,r,i){const a={...i,left:!1,right:!0};return this.__join(this,t,n,r,a)}join_full(t,n,r,i){const a={...i,left:!0,right:!0};return this.__join(this,t,n,r,a)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function _n(e){throw Error(e)}function Ka(e){return typeof e=="number"}function Lr(e){return typeof e=="function"}function WE(e,t){const n=Array(e);if(Lr(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let _3t=class extends Art{constructor(t,n,r,i,a,o,s){super(s),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=a||null,this._order=o||null}create(t){_n("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){_n("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){_n("Not implemented")}getter(t){_n("Not implemented")}objects(t){_n("Not implemented")}object(t){_n("Not implemented")}[Symbol.iterator](){_n("Not implemented")}print(t={}){Ka(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),a=this.mask();let o=-1;if(a)for(let s=a.next(0);s>=0;s=a.next(s+1))r[++o]=s;else for(let s=0;s<n;++s)r[++o]=s;if(t&&i){const s=this._order,l=this._data;r.sort((u,c)=>s(u,c,l))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=WE(r,()=>[]),a=this._index,o=this.mask(),s=this.numRows();if(a&&this.isOrdered())for(let l=0,u;l<s;++l)u=a[l],i[n[u]].push(u);else if(o)for(let l=o.next(0);l>=0;l=o.next(l+1))i[n[l]].push(l);else for(let l=0;l<s;++l)i[n[l]].push(l);if(t&&!a&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<r;++c)i[c].sort((h,f)=>l(h,f,u))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const a=this._mask,o=this._nrows,s=this._data;let l=i||0;if(l>o)return;const u=Math.min(o,l+r),c=()=>l=this._total;if(n&&this.isOrdered()||a&&this._index){const h=this.indices(),f=this._data;for(;l<u;++l)t(h[l],f,c)}else if(a){let h=u-l+1;for(l=a.nth(l);--h&&l>-1;l=a.next(l+1))t(l,s,c)}else for(;l<u;++l)t(l,s,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(a=>r.push(a),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},x3t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},b3t=function(e){return e&&Lr(e.get)?e:new x3t(e)};function nh(e){return e instanceof Date}function Ea(e){return e===Object(e)}function XA(e){return e instanceof RegExp}function fa(e){return typeof e=="string"}function S3t(e,t){const n=r=>_n(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?L9(e.entries(),t):nh(e)?n("Date"):XA(e)?n("RegExp"):fa(e)?n():$n(e)?w3t(e,t):Lr(e[Symbol.iterator])?T3t(e,t):Ea(e)?L9(Object.entries(e),t):n()}function L9(e,t=["key","value"]){const n=[],r=[];for(const[a,o]of e)n.push(a),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function w3t(e,t){const n=e.length,r={},i=a=>r[a]=Array(n);if(n){t=t||Object.keys(e[0]);const a=t.map(i),o=a.length;for(let s=0;s<n;++s){const l=e[s];for(let u=0;u<o;++u)a[u][s]=l[t[u]]}}else t&&t.forEach(i);return r}function T3t(e,t){const n={},r=o=>n[o]=[];let i,a;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),a=i.length);for(let s=0;s<a;++s)i[s].push(o[t[s]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:M3t}=Object.prototype;function Bl(e,t){return M3t.call(e,t)}function ts(e){return e?new P9({...e.data()},e.columnNames()):new P9}class P9{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Bl(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Vn=void 0,A3t=Object.getPrototypeOf(Int8Array);function V1(e){return e instanceof A3t}function zp(e){return $n(e)||V1(e)}function Tl(e){return e!=null&&e===e}const R_=e=>zp(e)||fa(e),C3t={compact:e=>zp(e)?e.filter(t=>Tl(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>R_(e)?e.includes(t,n):!1,indexof:(e,t)=>R_(e)?e.indexOf(t):-1,join:(e,t)=>zp(e)?e.join(t):Vn,lastindexof:(e,t)=>R_(e)?e.lastIndexOf(t):-1,length:e=>R_(e)?e.length:0,pluck:(e,t)=>zp(e)?e.map(n=>Tl(n)?n[t]:Vn):Vn,reverse:e=>zp(e)?e.slice().reverse():fa(e)?e.split("").reverse().join(""):Vn,slice:(e,t,n)=>R_(e)?e.slice(t,n):Vn};function E3t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function pM(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Kl=e=>(e<10?"0":"")+e,D3t=e=>e<0?"-"+pM(-e,6):e>9999?"+"+pM(e,6):pM(e,4);function Crt(e,t,n,r,i,a,o,s,l){const u=s?"Z":"";return D3t(e)+"-"+Kl(t+1)+"-"+Kl(n)+(!l||o?"T"+Kl(r)+":"+Kl(i)+":"+Kl(a)+"."+pM(o,3)+u:a?"T"+Kl(r)+":"+Kl(i)+":"+Kl(a)+u:i||r||!s?"T"+Kl(r)+":"+Kl(i)+u:"")}function Ert(e,t){return isNaN(e)?"Invalid Date":Crt(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function $E(e,t){return isNaN(e)?"Invalid Date":Crt(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const I3t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function L3t(e){return e.match(I3t)&&!isNaN(Date.parse(e))}function P3t(e,t=Date.parse){return L3t(e)?t(e):e}const Drt=6e4,Irt=864e5,Lrt=6048e5,Yr=new Date,qr=new Date,ri=e=>(Yr.setTime(typeof e=="string"?P3t(e):e),Yr);function R3t(e,t,n,r,i,a,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,a||0,o||0):new Date(Date.now())}function O3t(e,t,n,r,i,a,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,a||0,o||0)):new Date(Date.now())}function N3t(e){qr.setTime(+e),qr.setHours(0,0,0,0),Yr.setTime(+qr),Yr.setMonth(0),Yr.setDate(1);const t=(qr.getTimezoneOffset()-Yr.getTimezoneOffset())*Drt;return Math.floor(1+(qr-Yr-t)/Irt)}function B3t(e){qr.setTime(+e),qr.setUTCHours(0,0,0,0);const t=Date.UTC(qr.getUTCFullYear(),0,1);return Math.floor(1+(qr-t)/Irt)}function k3t(e,t){const n=t||0;qr.setTime(+e),qr.setDate(qr.getDate()-(qr.getDay()+7-n)%7),qr.setHours(0,0,0,0),Yr.setTime(+e),Yr.setMonth(0),Yr.setDate(1),Yr.setDate(1-(Yr.getDay()+7-n)%7),Yr.setHours(0,0,0,0);const r=(qr.getTimezoneOffset()-Yr.getTimezoneOffset())*Drt;return Math.floor((1+(qr-Yr)-r)/Lrt)}function F3t(e,t){const n=t||0;return qr.setTime(+e),qr.setUTCDate(qr.getUTCDate()-(qr.getUTCDay()+7-n)%7),qr.setUTCHours(0,0,0,0),Yr.setTime(+e),Yr.setUTCMonth(0),Yr.setUTCDate(1),Yr.setUTCDate(1-(Yr.getUTCDay()+7-n)%7),Yr.setUTCHours(0,0,0,0),Math.floor((1+(qr-Yr))/Lrt)}const z3t={format_date:(e,t)=>Ert(ri(e),!t),format_utcdate:(e,t)=>$E(ri(e),!t),timestamp:e=>+ri(e),year:e=>ri(e).getFullYear(),quarter:e=>Math.floor(ri(e).getMonth()/3),month:e=>ri(e).getMonth(),date:e=>ri(e).getDate(),dayofweek:e=>ri(e).getDay(),hours:e=>ri(e).getHours(),minutes:e=>ri(e).getMinutes(),seconds:e=>ri(e).getSeconds(),milliseconds:e=>ri(e).getMilliseconds(),utcyear:e=>ri(e).getUTCFullYear(),utcquarter:e=>Math.floor(ri(e).getUTCMonth()/3),utcmonth:e=>ri(e).getUTCMonth(),utcdate:e=>ri(e).getUTCDate(),utcdayofweek:e=>ri(e).getUTCDay(),utchours:e=>ri(e).getUTCHours(),utcminutes:e=>ri(e).getUTCMinutes(),utcseconds:e=>ri(e).getUTCSeconds(),utcmilliseconds:e=>ri(e).getUTCMilliseconds(),datetime:R3t,dayofyear:N3t,week:k3t,utcdatetime:O3t,utcdayofyear:B3t,utcweek:F3t,now:Date.now};function nz(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:nh(e)||nh(t)?+e==+t:XA(e)&&XA(t)?e+""==t+"":Ea(e)&&Ea(t)?U3t(e,t):!1}function U3t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return R9(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!R9(n,r,(a,o)=>a===o)))return!1;const i=n.length;for(let a=0;a<i;++a){const o=n[a];if(!nz(e[o],t[o]))return!1}return!0}function R9(e,t,n=nz){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const V3t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let G3t=Math.random;function w0(){return G3t()}const H3t={random:w0,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function rz(e){return e instanceof Map}function W3t(e){return e instanceof Set}function vM(e){return rz(e)||W3t(e)}function XL(e){return Array.from(e)}const $3t={has:(e,t)=>vM(e)?e.has(t):e!=null?Bl(e,t):!1,keys:e=>rz(e)?XL(e.keys()):e!=null?Object.keys(e):[],values:e=>vM(e)?XL(e.values()):e!=null?Object.values(e):[],entries:e=>vM(e)?XL(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Vn};function X3t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Bl(t,e))return t[e];return n!==void 0?n:e}function j3t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let a=0;a<r;++a)i[a]=e+a*n;return i}const Y3t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},xm={bin:E3t,equal:nz,recode:X3t,sequence:j3t,...C3t,...z3t,...V3t,...H3t,...$3t,...Y3t};function Wb(e){return typeof e=="bigint"}function Uu(e){return e===void 0?e+"":Wb(e)?e+"n":JSON.stringify(e)}function ln(e,t=[],n=[]){return new q3t(e,Ao(t),Ao(n))}let q3t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Uu(n)}]`),...this.params.map(Uu)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Prt=e=>ln("any",e),Rrt=()=>ln("count"),Ort=e=>ln("array_agg",e),Nrt=e=>ln("array_agg_distinct",e),Brt=(e,t)=>ln("map_agg",[e,t]),krt=(e,t)=>ln("object_agg",[e,t]),Frt=(e,t)=>ln("entries_agg",[e,t]);({...xm});function K3t(e,t){e=vM(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Z3t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,a=new Int32Array(i);t.scan(c=>a[n[c]]=1);const o=a.reduce((c,h)=>c+h,0);if(o===i)return e;const s=Array(o);let l=0;for(let c=0;c<i;++c)a[c]&&(s[a[c]=l++]=r[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=a[n[c]]),{...e,keys:u,rows:s,size:l}}function J3t(e,t,n,r){const{keys:i,rows:a,size:o}=e;let s=a,l=o,u=null;if(n){u=new Int32Array(o),t(p=>u[i[p]]=1);const d=u.reduce((p,v)=>p+v,0);if(d!==o){s=Array(d),l=0;for(let p=0;p<o;++p)u[p]&&(s[u[p]=l++]=a[p])}}let c=-1;const h=new Uint32Array(r);return t(l!==o?d=>h[++c]=u[i[d]]:d=>h[++c]=i[d]),{...e,keys:h,rows:s,size:l}}function Q3t(e,t,n,r){const i=r==="map"||r===!0?Brt:r==="entries"?Frt:r==="object"?krt:_n('groups option must be "map", "entries", or "object".'),{names:a}=e.groups(),o=K3t(e.columnNames(),"_");let s=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:Ort(o)});for(let l=a.length;--l>=0;)s=s.groupby(a.slice(0,l)).rollup({[o]:i(a[l],o)});return s.get(o)}const tBt="ArrayPattern",eBt="ArrowFunctionExpression",nBt="FunctionExpression",Rf="Identifier",T0="Literal",zrt="MemberExpression",rBt="ObjectExpression",Urt="ObjectPattern",Vrt="Property",G1="Column",iBt="Constant",aBt="Dictionary",oBt="Function",sBt="Parameter",Grt="Op",Tr=(e,t)=>{const n=lBt[e.type];return n?n(e,t):_n(`Unsupported expression construct: ${e.type}`)},jL=(e,t)=>"("+Tr(e.left,t)+" "+e.operator+" "+Tr(e.right,t)+")",YL=(e,t)=>"("+ru(e.params,t)+")=>"+Tr(e.body,t),O9=(e,t)=>Tr(e.callee,t)+"("+ru(e.arguments,t)+")",ru=(e,t,n=",")=>e.map(r=>Tr(r,t)).join(n),Hrt=e=>e.computed?`[${Uu(e.name)}]`:`.${e.name}`,N9=(e,t,n)=>{const r=e.table||"";return`data${r}${Hrt(e)}.${n}(${t.index}${r})`},lBt={Constant:e=>e.raw,Column:(e,t)=>N9(e,t,"get"),Dictionary:(e,t)=>N9(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Hrt(e)}`,Op:(e,t)=>`op(${Uu(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let a=n[0].value.raw;for(let o=0;o<i;)a+="${"+Tr(r[o],t)+"}"+n[++o].value.raw;return"`"+a+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Tr(e.object,t),i=Tr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:O9,NewExpression:(e,t)=>"new "+O9(e,t),ArrayExpression:(e,t)=>"["+ru(e.elements,t)+"]",AssignmentExpression:jL,BinaryExpression:jL,LogicalExpression:jL,UnaryExpression:(e,t)=>"("+e.operator+Tr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Tr(e.test,t)+"?"+Tr(e.consequent,t)+":"+Tr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+ru(e.properties,t)+"})",Property:(e,t)=>{const n=Tr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Tr(e.value,t)},ArrowFunctionExpression:YL,FunctionExpression:YL,FunctionDeclaration:YL,ArrayPattern:(e,t)=>"["+ru(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+ru(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+ru(e.declarations,t,","),VariableDeclarator:(e,t)=>Tr(e.id,t)+"="+Tr(e.init,t),SpreadElement:(e,t)=>"..."+Tr(e.argument,t),BlockStatement:(e,t)=>"{"+ru(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Tr(e.expression,t),IfStatement:(e,t)=>"if ("+Tr(e.test,t)+")"+Tr(e.consequent,t)+(e.alternate?" else "+Tr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Tr(e.discriminant,t)+") {"+ru(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Tr(e.test,t):"default")+": "+ru(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Tr(e.argument,t),Program:(e,t)=>Tr(e.body[0],t)};function jA(e,t={index:"row"}){return Tr(e,t)}function uBt(e,t,n=15,r=!0,i=0,a){const s=Math.LN10;if(a==null){const l=Math.ceil(Math.log(n)/s),u=t-e||Math.abs(e)||1,c=[5,2];for(a=Math.max(i,Math.pow(10,Math.round(Math.log(u)/s)-l));Math.ceil(u/a)>n;)a*=10;const h=c.length;for(let f=0;f<h;++f){const d=a/c[f];d>=i&&u/d<=n&&(a=d)}}if(r){let l=Math.log(a);const u=l>=0?0:~~(-l/s)+1,c=Math.pow(10,-u-1);l=Math.floor(e/a+c)*a,e=e<l?l-a:l,t=Math.ceil(t/a)*a}return[e,t===e?e+a:t,a]}function My(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:nh(e)?+e:$n(e)||V1(e)?`[${e.map(My)}]`:XA(e)?e+"":cBt(e)}function cBt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${My(e[r])}`;return t+="}",t}function YA(e,t){const n=e.length;return n===1?(r,i)=>My(e[0](r,i)):(r,i)=>{let a="";for(let o=0;o<n;++o){o>0&&(a+="|");const s=e[o](r,i);if(t&&(s==null||s!==s))return null;a+=My(s)}return a}}function hBt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=My(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=My(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Ec(){}function fBt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function xi(e){return e.init=e.init||Ec,e.add=e.add||Ec,e.rem=e.rem||Ec,e}function B9(e,t){return e.product_v=!1,e.product=t}const Wrt={count:{create:()=>xi({value:e=>e.count}),param:[]},array_agg:{create:()=>xi({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>xi({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>xi({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>xi({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>xi({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Vn}),param:[1]},valid:{create:()=>xi({value:e=>e.valid}),param:[1]},invalid:{create:()=>xi({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=hBt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>xi({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>xi({value:e=>{let t=Vn,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Vn,add:(e,t)=>Wb(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>B9(e,1),value:e=>e.valid?e.product_v?B9(e,fBt(e.list.values())):e.product:void 0,add:(e,t)=>Wb(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Vn,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>xi({value:e=>e.valid?e.mean:Vn}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Vn,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>xi({value:e=>e.valid>1?e.dev/e.valid:Vn}),param:[1],req:["variance"]},stdev:{create:()=>xi({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Vn}),param:[1],req:["variance"]},stdevp:{create:()=>xi({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Vn}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Vn,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Vn)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Vn,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Vn)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>xi({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>xi({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Vn,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const a=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*a,e.cov+=r*a},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const a=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*a,e.cov-=r*a}}),param:[2]},covariancep:{create:()=>xi({value:e=>e.valid>1?e.cov/e.valid:Vn}),param:[2],req:["covariance"]},corr:{create:()=>xi({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Vn}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>xi({value:i=>uBt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},k9={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},F9={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let a=n;if(e<a){for(;a+1<i&&r(a+1);)++a;e=a}return(1+e)/i}}},param:[]},$rt={row_number:{create(){return{init:Ec,value:e=>e.index+1}},param:[]},rank:k9,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=k9.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:F9,ntile:{create(e){e=+e,e>0||_n("ntile num must be greater than zero.");const{init:t,value:n}=F9.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Vn){return e=+e||1,{init:Ec,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Vn){return e=+e||1,{init:Ec,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Ec,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Ec,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||_n("nth_value nth must be greater than zero."),{init:Ec,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Vn}}},param:[1,1]},fill_down:{create(e=Vn){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Tl(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Vn){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=dBt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function dBt(e,t,n){for(const r=e.size;n<r;++n)if(Tl(e.value(n,t)))return n;return-1}function iz(e){return Bl(Wrt,e)}function az(e){return Bl($rt,e)}function Xrt(e){return Bl(xm,e)||e==="row_object"}function jrt(e){return iz(e)&&Wrt[e]}function Yrt(e){return az(e)&&$rt[e]}function O_(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const oz={escape:(e,t,n)=>O_(e,t,n),expr:(e,t)=>O_(`(row,data,op)=>${e}`,xm,t),expr2:(e,t)=>O_(`(row0,data0,row,data)=>${e}`,xm,t),join:(e,t)=>O_(`(row1,data1,row2,data2)=>${e}`,xm,t),param:(e,t)=>O_(e,xm,t)},pBt={"==":1,"!=":1,"===":1,"!==":1};function qrt(e,t,n=0,r,i){if(e.type=G1,e.name=t,e.table=n,i&&r&&Lr(r.keyFor)){const a=pBt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;a&&a.type===T0&&vBt(i,e,a,r.keyFor(a.value))}return e}function vBt(e,t,n,r){return r<0?(e.type=T0,e.value=!1,e.raw="false"):(t.type=aBt,n.value=r,n.raw=r+""),!0}function XE(e){return $n(e)?e:rz(e)?e.entries():e?Object.entries(e):[]}const Krt="row_object";function Zrt(e,t){e.type=rBt;const n=e.properties=[];for(const r of XE(t)){const[i,a]=$n(r)?r:[r,r];n.push({type:Vrt,key:{type:T0,raw:Uu(a)},value:qrt({computed:!0},i)})}return e}function Jrt(e){return jA(Zrt({},e))}function Qrt(e){return oz.expr(Jrt(e))}function Ic(e,t,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})}function z9(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function On(e){return this instanceof On?(this.v=e,this):new On(e)}function Up(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(d){return new Promise(function(p,v){a.push([f,d,p,v])>1||s(f,d)})})}function s(f,d){try{l(r[f](d))}catch(p){h(a[0][3],p)}}function l(f){f.value instanceof On?Promise.resolve(f.value.v).then(u,c):h(a[0][2],f)}function u(f){s("next",f)}function c(f){s("throw",f)}function h(f,d){f(d),a.shift(),a.length&&s(a[0][0],a[0][1])}}function qL(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,a){t[i]=e[i]?function(o){return(n=!n)?{value:On(e[i](o)),done:!1}:a?a(o):o}:a}}function Wx(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof z9=="function"?z9(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=e[a]&&function(o){return new Promise(function(s,l){o=e[a](o),i(s,l,o.done,o.value)})}}function i(a,o,s,l){Promise.resolve(l).then(function(u){a({value:u,done:s})},o)}}const gBt=new TextDecoder("utf-8"),l3=e=>gBt.decode(e),mBt=new TextEncoder,sz=e=>mBt.encode(e),yBt=e=>typeof e=="boolean",lo=e=>typeof e=="function",pd=e=>e!=null&&Object(e)===e,jE=e=>pd(e)&&lo(e.then),lz=e=>pd(e)&&lo(e[Symbol.iterator]),YE=e=>pd(e)&&lo(e[Symbol.asyncIterator]),_Bt=e=>pd(e)&&"done"in e&&"value"in e,tit=e=>"_getDOMStream"in e&&"_getNodeStream"in e,xBt=e=>pd(e)&&lo(e.abort)&&lo(e.getWriter)&&!tit(e),bBt=e=>pd(e)&&lo(e.end)&&lo(e.write)&&yBt(e.writable)&&!tit(e),SBt=e=>pd(e)&&lo(e.clear)&&lo(e.bytes)&&lo(e.position)&&lo(e.setPosition)&&lo(e.capacity)&&lo(e.getBufferIdentifier)&&lo(e.createLong),uz=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function wBt(e){const t=e[0]?[e[0]]:[];let n,r,i,a;for(let o,s,l=0,u=0,c=e.length;++l<c;){if(o=t[u],s=e[l],!o||!s||o.buffer!==s.buffer||s.byteOffset<o.byteOffset){s&&(t[++u]=s);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:a}=s,n+i<r||r+a<n){s&&(t[++u]=s);continue}t[u]=new Uint8Array(o.buffer,n,r-n+a)}return t}function qA(e,t,n=0,r=t.byteLength){const i=e.byteLength,a=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return a.set(o,n),e}function Vu(e,t){const n=wBt(e),r=n.reduce((c,h)=>c+h.byteLength,0);let i,a,o,s=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],a=i.subarray(0,Math.min(i.length,u-s)),u<=s+a.length){a.length<i.length?n[l]=i.subarray(a.length):a.length===i.length&&l++,o?qA(o,a,s):o=a;break}qA(o||(o=new Uint8Array(u)),a,s),s+=a.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function qi(e,t){let n=_Bt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=sz(n)),n instanceof ArrayBuffer?new e(n):n instanceof uz?new e(n):SBt(n)?qi(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const N_=e=>qi(Int32Array,e),ar=e=>qi(Uint8Array,e),u3=e=>(e.next(),e);function*TBt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uz?n(t):lz(t)?t:n(t);return yield*u3(function*(i){let a=null;do a=i.next(yield qi(e,a));while(!a.done)}(r[Symbol.iterator]())),new e}const MBt=e=>TBt(Uint8Array,e);function eit(e,t){return Up(this,arguments,function*(){if(jE(t))return yield On(yield On(yield*qL(Wx(eit(e,yield On(t))))));const r=function(o){return Up(this,arguments,function*(){yield yield On(yield On(o))})},i=function(o){return Up(this,arguments,function*(){yield On(yield*qL(Wx(u3(function*(s){let l=null;do l=s.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},a=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uz?r(t):lz(t)?i(t):YE(t)?t:r(t);return yield On(yield*qL(Wx(u3(function(o){return Up(this,arguments,function*(){let s=null;do s=yield On(o.next(yield yield On(qi(e,s))));while(!s.done)})}(a[Symbol.asyncIterator]()))))),yield On(new e)})}const ABt=e=>eit(Uint8Array,e);function nit(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function CBt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const U9={fromIterable(e){return Uw(EBt(e))},fromAsyncIterable(e){return Uw(DBt(e))},fromDOMStream(e){return Uw(IBt(e))},fromNodeStream(e){return Uw(PBt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Uw=e=>(e.next(),e);function*EBt(e){let t,n=!1,r=[],i,a,o,s=0;function l(){return a==="peek"?Vu(r,o)[0]:([i,r,s]=Vu(r,o),i)}({cmd:a,size:o}=yield null);const u=MBt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-s)?u.next():u.next(o-s),!t&&i.byteLength>0&&(r.push(i),s+=i.byteLength),t||o<=s)do({cmd:a,size:o}=yield l());while(o<s);while(!t)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function DBt(e){return Up(this,arguments,function*(){let n,r=!1,i=[],a,o,s,l=0;function u(){return o==="peek"?Vu(i,s)[0]:([a,i,l]=Vu(i,s),a)}({cmd:o,size:s}=yield yield On(null));const c=ABt(e)[Symbol.asyncIterator]();try{do if({done:n,value:a}=Number.isNaN(s-l)?yield On(c.next()):yield On(c.next(s-l)),!n&&a.byteLength>0&&(i.push(a),l+=a.byteLength),n||s<=l)do({cmd:o,size:s}=yield yield On(u()));while(s<l);while(!n)}catch(h){(r=!0)&&typeof c.throw=="function"&&(yield On(c.throw(h)))}finally{r===!1&&typeof c.return=="function"&&(yield On(c.return(new Uint8Array(0))))}return yield On(null)})}function IBt(e){return Up(this,arguments,function*(){let n=!1,r=!1,i=[],a,o,s,l=0;function u(){return o==="peek"?Vu(i,s)[0]:([a,i,l]=Vu(i,s),a)}({cmd:o,size:s}=yield yield On(null));const c=new LBt(e);try{do if({done:n,value:a}=Number.isNaN(s-l)?yield On(c.read()):yield On(c.read(s-l)),!n&&a.byteLength>0&&(i.push(ar(a)),l+=a.byteLength),n||s<=l)do({cmd:o,size:s}=yield yield On(u()));while(s<l);while(!n)}catch(h){(r=!0)&&(yield On(c.cancel(h)))}finally{r===!1?yield On(c.cancel()):e.locked&&c.releaseLock()}return yield On(null)})}class LBt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Ic(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Ic(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ar(n)),n})}}const KL=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function PBt(e){return Up(this,arguments,function*(){const n=[];let r="error",i=!1,a=null,o,s,l=0,u=[],c;function h(){return o==="peek"?Vu(u,s)[0]:([c,u,l]=Vu(u,s),c)}if({cmd:o,size:s}=yield yield On(null),e.isTTY)return yield yield On(new Uint8Array(0)),yield On(null);try{n[0]=KL(e,"end"),n[1]=KL(e,"error");do{if(n[2]=KL(e,"readable"),[r,a]=yield On(Promise.race(n.map(d=>d[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(s-l)?(c=ar(e.read(s-l)),c.byteLength<s-l&&(c=ar(e.read()))):c=ar(e.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||s<=l)do({cmd:o,size:s}=yield yield On(h()));while(s<l)}while(!i)}finally{yield On(f(n,r==="error"?a:null))}return yield On(null);function f(d,p){return c=u=null,new Promise((v,g)=>{for(const[m,_]of d)e.off(m,_);try{const m=e.destroy;m&&m.call(e,p),p=void 0}catch(m){p=m||p}finally{p!=null?g(p):v()}})}})}var Ua;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ua||(Ua={}));var Co;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Co||(Co={}));var ua;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(ua||(ua={}));var Gu;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Gu||(Gu={}));var Ne;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ne||(Ne={}));var Hu;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Hu||(Hu={}));var Zi;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Zi||(Zi={}));var q;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(q||(q={}));var wc;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(wc||(wc={}));const RBt=void 0;function wv(e){if(e===null)return"null";if(e===RBt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>wv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const OBt=Symbol.for("isArrowBigNum");function Vl(e,...t){return t.length===0?Object.setPrototypeOf(qi(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Vl.prototype[OBt]=!0;Vl.prototype.toJSON=function(){return`"${Xb(this)}"`};Vl.prototype.valueOf=function(){return rit(this)};Vl.prototype.toString=function(){return Xb(this)};Vl.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return rit(this);case"string":return Xb(this);case"default":return NBt(this)}return Xb(this)};function Fm(...e){return Vl.apply(this,e)}function zm(...e){return Vl.apply(this,e)}function $b(...e){return Vl.apply(this,e)}Object.setPrototypeOf(Fm.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(zm.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf($b.prototype,Object.create(Uint32Array.prototype));Object.assign(Fm.prototype,Vl.prototype,{constructor:Fm,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(zm.prototype,Vl.prototype,{constructor:zm,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign($b.prototype,Vl.prototype,{constructor:$b,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function rit(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,a=new BigUint64Array(t,n,r),o=i&&a.at(-1)&BigInt(1)<<BigInt(63);let s=BigInt(o?1:0),l=BigInt(0);if(o){for(const u of a)s+=~u*(BigInt(1)<<BigInt(32)*l++);s*=BigInt(-1)}else for(const u of a)s+=u*(BigInt(1)<<BigInt(32)*l++);return s}const Xb=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return ZL(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return ZL(e);t=t.slice();let r=1;for(let a=0;a<t.length;a++){const o=t[a],s=~o+r;t[a]=s,r&=o===0?1:0}return`-${ZL(t)}`},NBt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:Xb(e);function ZL(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let a=-1;const o=r.length-1;do{for(n[0]=r[a=0];a<o;)r[a++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[a];r[a]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class cz{static new(t,n){switch(n){case!0:return new Fm(t);case!1:return new zm(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Fm(t)}return t.byteLength===16?new $b(t):new zm(t)}static signed(t){return new Fm(t)}static unsigned(t){return new zm(t)}static decimal(t){return new $b(t)}constructor(t,n){return cz.new(t,n)}}function kl(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var iit,ait,oit,sit,lit,uit,cit,hit,fit,dit,pit,vit,git,mit,yit,_it,xit,bit,Sit,wit;class on{static isNull(t){return(t==null?void 0:t.typeId)===q.Null}static isInt(t){return(t==null?void 0:t.typeId)===q.Int}static isFloat(t){return(t==null?void 0:t.typeId)===q.Float}static isBinary(t){return(t==null?void 0:t.typeId)===q.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===q.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===q.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===q.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===q.Date}static isTime(t){return(t==null?void 0:t.typeId)===q.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===q.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===q.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===q.Duration}static isList(t){return(t==null?void 0:t.typeId)===q.List}static isStruct(t){return(t==null?void 0:t.typeId)===q.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===q.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===q.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===q.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===q.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===q.Dictionary}static isDenseUnion(t){return on.isUnion(t)&&t.mode===Co.Dense}static isSparseUnion(t){return on.isUnion(t)&&t.mode===Co.Sparse}get typeId(){return q.NONE}}iit=Symbol.toStringTag;on[iit]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(on.prototype);let rh=class extends on{toString(){return"Null"}get typeId(){return q.Null}};ait=Symbol.toStringTag;rh[ait]=(e=>e[Symbol.toStringTag]="Null")(rh.prototype);class Za extends on{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return q.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}oit=Symbol.toStringTag;Za[oit]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Za.prototype);class hz extends Za{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class fz extends Za{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class $f extends Za{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class dz extends Za{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class pz extends Za{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class vz extends Za{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class gz extends Za{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class mz extends Za{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(hz.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(fz.prototype,"ArrayType",{value:Int16Array});Object.defineProperty($f.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(dz.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(pz.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(vz.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(gz.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(mz.prototype,"ArrayType",{value:BigUint64Array});class Xf extends on{constructor(t){super(),this.precision=t}get typeId(){return q.Float}get ArrayType(){switch(this.precision){case ua.HALF:return Uint16Array;case ua.SINGLE:return Float32Array;case ua.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sit=Symbol.toStringTag;Xf[sit]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Xf.prototype);class Tit extends Xf{constructor(){super(ua.HALF)}}class yz extends Xf{constructor(){super(ua.SINGLE)}}class _z extends Xf{constructor(){super(ua.DOUBLE)}}Object.defineProperty(Tit.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(yz.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(_z.prototype,"ArrayType",{value:Float64Array});let jb=class extends on{constructor(){super()}get typeId(){return q.Binary}toString(){return"Binary"}};lit=Symbol.toStringTag;jb[lit]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(jb.prototype);let Ay=class extends on{constructor(){super()}get typeId(){return q.Utf8}toString(){return"Utf8"}};uit=Symbol.toStringTag;Ay[uit]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Ay.prototype);let Yb=class extends on{constructor(){super()}get typeId(){return q.Bool}toString(){return"Bool"}};cit=Symbol.toStringTag;Yb[cit]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Yb.prototype);let KA=class extends on{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return q.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};hit=Symbol.toStringTag;KA[hit]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(KA.prototype);class Cy extends on{constructor(t){super(),this.unit=t}get typeId(){return q.Date}toString(){return`Date${(this.unit+1)*32}<${Gu[this.unit]}>`}}fit=Symbol.toStringTag;Cy[fit]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Cy.prototype);class BBt extends Cy{constructor(){super(Gu.DAY)}}class kBt extends Cy{constructor(){super(Gu.MILLISECOND)}}class ih extends on{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return q.Time}toString(){return`Time${this.bitWidth}<${Ne[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}dit=Symbol.toStringTag;ih[dit]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(ih.prototype);class FBt extends ih{constructor(){super(Ne.SECOND,32)}}class zBt extends ih{constructor(){super(Ne.MILLISECOND,32)}}class UBt extends ih{constructor(){super(Ne.MICROSECOND,64)}}class VBt extends ih{constructor(){super(Ne.NANOSECOND,64)}}class ZA extends on{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return q.Timestamp}toString(){return`Timestamp<${Ne[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}pit=Symbol.toStringTag;ZA[pit]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(ZA.prototype);class Ey extends on{constructor(t){super(),this.unit=t}get typeId(){return q.Interval}toString(){return`Interval<${Hu[this.unit]}>`}}vit=Symbol.toStringTag;Ey[vit]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(Ey.prototype);class GBt extends Ey{constructor(){super(Hu.DAY_TIME)}}class HBt extends Ey{constructor(){super(Hu.YEAR_MONTH)}}let JA=class extends on{constructor(t){super(),this.unit=t}get typeId(){return q.Duration}toString(){return`Duration<${Ne[this.unit]}>`}};git=Symbol.toStringTag;JA[git]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(JA.prototype);let Dy=class extends on{constructor(t){super(),this.children=[t]}get typeId(){return q.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};mit=Symbol.toStringTag;Dy[mit]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Dy.prototype);class ba extends on{constructor(t){super(),this.children=t}get typeId(){return q.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}yit=Symbol.toStringTag;ba[yit]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ba.prototype);class qb extends on{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,a,o)=>(i[a]=o)&&i||i,Object.create(null))}get typeId(){return q.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}_it=Symbol.toStringTag;qb[_it]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(qb.prototype);let QA=class extends on{constructor(t){super(),this.byteWidth=t}get typeId(){return q.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};xit=Symbol.toStringTag;QA[xit]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(QA.prototype);let Iy=class extends on{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return q.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};bit=Symbol.toStringTag;Iy[bit]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(Iy.prototype);class Kb extends on{constructor(t,n=!1){var r,i,a;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const s=(a=t==null?void 0:t.type)===null||a===void 0?void 0:a.children[1];s&&(s.name="value")}}get typeId(){return q.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Sit=Symbol.toStringTag;Kb[Sit]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(Kb.prototype);const WBt=(e=>()=>++e)(-1);class jf extends on{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?WBt():kl(r)}get typeId(){return q.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}wit=Symbol.toStringTag;jf[wit]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(jf.prototype);function uu(e){const t=e;switch(e.typeId){case q.Decimal:return e.bitWidth/32;case q.Timestamp:return 2;case q.Date:return 1+t.unit;case q.Interval:return 1+t.unit;case q.FixedSizeList:return t.listSize;case q.FixedSizeBinary:return t.byteWidth;default:return 1}}class wn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(a=>a[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return $Bt(this,t,n)}getVisitFnByTypeId(t,n=!0){return om(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function $Bt(e,t,n=!0){return typeof t=="number"?om(e,t,n):typeof t=="string"&&t in q?om(e,q[t],n):t&&t instanceof on?om(e,V9(t),n):t!=null&&t.type&&t.type instanceof on?om(e,V9(t.type),n):om(e,q.NONE,n)}function om(e,t,n=!0){let r=null;switch(t){case q.Null:r=e.visitNull;break;case q.Bool:r=e.visitBool;break;case q.Int:r=e.visitInt;break;case q.Int8:r=e.visitInt8||e.visitInt;break;case q.Int16:r=e.visitInt16||e.visitInt;break;case q.Int32:r=e.visitInt32||e.visitInt;break;case q.Int64:r=e.visitInt64||e.visitInt;break;case q.Uint8:r=e.visitUint8||e.visitInt;break;case q.Uint16:r=e.visitUint16||e.visitInt;break;case q.Uint32:r=e.visitUint32||e.visitInt;break;case q.Uint64:r=e.visitUint64||e.visitInt;break;case q.Float:r=e.visitFloat;break;case q.Float16:r=e.visitFloat16||e.visitFloat;break;case q.Float32:r=e.visitFloat32||e.visitFloat;break;case q.Float64:r=e.visitFloat64||e.visitFloat;break;case q.Utf8:r=e.visitUtf8;break;case q.Binary:r=e.visitBinary;break;case q.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case q.Date:r=e.visitDate;break;case q.DateDay:r=e.visitDateDay||e.visitDate;break;case q.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case q.Timestamp:r=e.visitTimestamp;break;case q.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case q.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case q.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case q.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case q.Time:r=e.visitTime;break;case q.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case q.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case q.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case q.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case q.Decimal:r=e.visitDecimal;break;case q.List:r=e.visitList;break;case q.Struct:r=e.visitStruct;break;case q.Union:r=e.visitUnion;break;case q.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case q.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case q.Dictionary:r=e.visitDictionary;break;case q.Interval:r=e.visitInterval;break;case q.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case q.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case q.Duration:r=e.visitDuration;break;case q.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case q.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case q.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case q.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case q.FixedSizeList:r=e.visitFixedSizeList;break;case q.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${q[t]}'`)}function V9(e){switch(e.typeId){case q.Null:return q.Null;case q.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?q.Int8:q.Uint8;case 16:return n?q.Int16:q.Uint16;case 32:return n?q.Int32:q.Uint32;case 64:return n?q.Int64:q.Uint64}return q.Int}case q.Float:switch(e.precision){case ua.HALF:return q.Float16;case ua.SINGLE:return q.Float32;case ua.DOUBLE:return q.Float64}return q.Float;case q.Binary:return q.Binary;case q.Utf8:return q.Utf8;case q.Bool:return q.Bool;case q.Decimal:return q.Decimal;case q.Time:switch(e.unit){case Ne.SECOND:return q.TimeSecond;case Ne.MILLISECOND:return q.TimeMillisecond;case Ne.MICROSECOND:return q.TimeMicrosecond;case Ne.NANOSECOND:return q.TimeNanosecond}return q.Time;case q.Timestamp:switch(e.unit){case Ne.SECOND:return q.TimestampSecond;case Ne.MILLISECOND:return q.TimestampMillisecond;case Ne.MICROSECOND:return q.TimestampMicrosecond;case Ne.NANOSECOND:return q.TimestampNanosecond}return q.Timestamp;case q.Date:switch(e.unit){case Gu.DAY:return q.DateDay;case Gu.MILLISECOND:return q.DateMillisecond}return q.Date;case q.Interval:switch(e.unit){case Hu.DAY_TIME:return q.IntervalDayTime;case Hu.YEAR_MONTH:return q.IntervalYearMonth}return q.Interval;case q.Duration:switch(e.unit){case Ne.SECOND:return q.DurationSecond;case Ne.MILLISECOND:return q.DurationMillisecond;case Ne.MICROSECOND:return q.DurationMicrosecond;case Ne.NANOSECOND:return q.DurationNanosecond}return q.Duration;case q.Map:return q.Map;case q.List:return q.List;case q.Struct:return q.Struct;case q.Union:switch(e.mode){case Co.Dense:return q.DenseUnion;case Co.Sparse:return q.SparseUnion}return q.Union;case q.FixedSizeBinary:return q.FixedSizeBinary;case q.FixedSizeList:return q.FixedSizeList;case q.Dictionary:return q.Dictionary}throw new Error(`Unrecognized type '${q[e.typeId]}'`)}wn.prototype.visitInt8=null;wn.prototype.visitInt16=null;wn.prototype.visitInt32=null;wn.prototype.visitInt64=null;wn.prototype.visitUint8=null;wn.prototype.visitUint16=null;wn.prototype.visitUint32=null;wn.prototype.visitUint64=null;wn.prototype.visitFloat16=null;wn.prototype.visitFloat32=null;wn.prototype.visitFloat64=null;wn.prototype.visitDateDay=null;wn.prototype.visitDateMillisecond=null;wn.prototype.visitTimestampSecond=null;wn.prototype.visitTimestampMillisecond=null;wn.prototype.visitTimestampMicrosecond=null;wn.prototype.visitTimestampNanosecond=null;wn.prototype.visitTimeSecond=null;wn.prototype.visitTimeMillisecond=null;wn.prototype.visitTimeMicrosecond=null;wn.prototype.visitTimeNanosecond=null;wn.prototype.visitDenseUnion=null;wn.prototype.visitSparseUnion=null;wn.prototype.visitIntervalDayTime=null;wn.prototype.visitIntervalYearMonth=null;wn.prototype.visitDuration=null;wn.prototype.visitDurationSecond=null;wn.prototype.visitDurationMillisecond=null;wn.prototype.visitDurationMicrosecond=null;wn.prototype.visitDurationNanosecond=null;const Mit=new Float64Array(1),Cg=new Uint32Array(Mit.buffer);function Ait(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function Cit(e){if(e!==e)return 32256;Mit[0]=e;const t=(Cg[1]&2147483648)>>16&65535;let n=Cg[1]&2146435072,r=0;return n>=1089470464?Cg[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Cg[1]&1048575)>>10):n<=1056964608?(r=1048576+(Cg[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Cg[1]&1048575)+512>>10),t|n|r&65535}class Ge extends wn{}function je(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const XBt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},xz=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},jBt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},YBt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},Eit=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:a}=t;e.set(r.subarray(0,a-i),i)}},qBt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},wh=({values:e},t,n)=>{e[t]=n},bz=({values:e},t,n)=>{e[t]=n},Dit=({values:e},t,n)=>{e[t]=Cit(n)},KBt=(e,t,n)=>{switch(e.type.precision){case ua.HALF:return Dit(e,t,n);case ua.SINGLE:case ua.DOUBLE:return bz(e,t,n)}},Sz=({values:e},t,n)=>{XBt(e,t,n.valueOf())},wz=({values:e},t,n)=>{xz(e,t*2,n.valueOf())},Iit=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},ZBt=({values:e,valueOffsets:t},n,r)=>Eit(e,t,n,r),JBt=({values:e,valueOffsets:t},n,r)=>{Eit(e,t,n,sz(r))},Lit=(e,t,n)=>{e.type.unit===Gu.DAY?Sz(e,t,n):wz(e,t,n)},Tz=({values:e},t,n)=>xz(e,t*2,n/1e3),Mz=({values:e},t,n)=>xz(e,t*2,n),Az=({values:e},t,n)=>jBt(e,t*2,n),Cz=({values:e},t,n)=>YBt(e,t*2,n),Pit=(e,t,n)=>{switch(e.type.unit){case Ne.SECOND:return Tz(e,t,n);case Ne.MILLISECOND:return Mz(e,t,n);case Ne.MICROSECOND:return Az(e,t,n);case Ne.NANOSECOND:return Cz(e,t,n)}},Ez=({values:e},t,n)=>{e[t]=n},Dz=({values:e},t,n)=>{e[t]=n},Iz=({values:e},t,n)=>{e[t]=n},Lz=({values:e},t,n)=>{e[t]=n},Rit=(e,t,n)=>{switch(e.type.unit){case Ne.SECOND:return Ez(e,t,n);case Ne.MILLISECOND:return Dz(e,t,n);case Ne.MICROSECOND:return Iz(e,t,n);case Ne.NANOSECOND:return Lz(e,t,n)}},Oit=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},QBt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,a=Hs.getVisitFn(r);if(Array.isArray(n))for(let o=-1,s=i[t],l=i[t+1];s<l;)a(r,s++,n[++o]);else for(let o=-1,s=i[t],l=i[t+1];s<l;)a(r,s++,n.get(++o))},tkt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,a=Hs.getVisitFn(r);let{[t]:o,[t+1]:s}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(a(r,o,u),++o>=s)break},ekt=(e,t)=>(n,r,i,a)=>r&&n(r,e,t[a]),nkt=(e,t)=>(n,r,i,a)=>r&&n(r,e,t.get(a)),rkt=(e,t)=>(n,r,i,a)=>r&&n(r,e,t.get(i.name)),ikt=(e,t)=>(n,r,i,a)=>r&&n(r,e,t[i.name]),akt=(e,t,n)=>{const r=e.type.children.map(a=>Hs.getVisitFn(a.type)),i=n instanceof Map?rkt(t,n):n instanceof Xn?nkt(t,n):Array.isArray(n)?ekt(t,n):ikt(t,n);e.type.children.forEach((a,o)=>i(r[o],e.children[o],a,o))},okt=(e,t,n)=>{e.type.mode===Co.Dense?Nit(e,t,n):Bit(e,t,n)},Nit=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Hs.visit(i,e.valueOffsets[t],n)},Bit=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Hs.visit(i,t,n)},skt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},kit=(e,t,n)=>{e.type.unit===Hu.DAY_TIME?Pz(e,t,n):Rz(e,t,n)},Pz=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},Rz=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},Oz=({values:e},t,n)=>{e[t]=n},Nz=({values:e},t,n)=>{e[t]=n},Bz=({values:e},t,n)=>{e[t]=n},kz=({values:e},t,n)=>{e[t]=n},Fit=(e,t,n)=>{switch(e.type.unit){case Ne.SECOND:return Oz(e,t,n);case Ne.MILLISECOND:return Nz(e,t,n);case Ne.MICROSECOND:return Bz(e,t,n);case Ne.NANOSECOND:return kz(e,t,n)}},lkt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],a=Hs.getVisitFn(i);if(Array.isArray(n))for(let o=-1,s=t*r;++o<r;)a(i,s+o,n[o]);else for(let o=-1,s=t*r;++o<r;)a(i,s+o,n.get(o))};Ge.prototype.visitBool=je(qBt);Ge.prototype.visitInt=je(wh);Ge.prototype.visitInt8=je(wh);Ge.prototype.visitInt16=je(wh);Ge.prototype.visitInt32=je(wh);Ge.prototype.visitInt64=je(wh);Ge.prototype.visitUint8=je(wh);Ge.prototype.visitUint16=je(wh);Ge.prototype.visitUint32=je(wh);Ge.prototype.visitUint64=je(wh);Ge.prototype.visitFloat=je(KBt);Ge.prototype.visitFloat16=je(Dit);Ge.prototype.visitFloat32=je(bz);Ge.prototype.visitFloat64=je(bz);Ge.prototype.visitUtf8=je(JBt);Ge.prototype.visitBinary=je(ZBt);Ge.prototype.visitFixedSizeBinary=je(Iit);Ge.prototype.visitDate=je(Lit);Ge.prototype.visitDateDay=je(Sz);Ge.prototype.visitDateMillisecond=je(wz);Ge.prototype.visitTimestamp=je(Pit);Ge.prototype.visitTimestampSecond=je(Tz);Ge.prototype.visitTimestampMillisecond=je(Mz);Ge.prototype.visitTimestampMicrosecond=je(Az);Ge.prototype.visitTimestampNanosecond=je(Cz);Ge.prototype.visitTime=je(Rit);Ge.prototype.visitTimeSecond=je(Ez);Ge.prototype.visitTimeMillisecond=je(Dz);Ge.prototype.visitTimeMicrosecond=je(Iz);Ge.prototype.visitTimeNanosecond=je(Lz);Ge.prototype.visitDecimal=je(Oit);Ge.prototype.visitList=je(QBt);Ge.prototype.visitStruct=je(akt);Ge.prototype.visitUnion=je(okt);Ge.prototype.visitDenseUnion=je(Nit);Ge.prototype.visitSparseUnion=je(Bit);Ge.prototype.visitDictionary=je(skt);Ge.prototype.visitInterval=je(kit);Ge.prototype.visitIntervalDayTime=je(Pz);Ge.prototype.visitIntervalYearMonth=je(Rz);Ge.prototype.visitDuration=je(Fit);Ge.prototype.visitDurationSecond=je(Oz);Ge.prototype.visitDurationMillisecond=je(Nz);Ge.prototype.visitDurationMicrosecond=je(Bz);Ge.prototype.visitDurationNanosecond=je(kz);Ge.prototype.visitFixedSizeList=je(lkt);Ge.prototype.visitMap=je(tkt);const Hs=new Ge,gl=Symbol.for("parent"),Um=Symbol.for("rowIndex");class Fz{constructor(t,n){return this[gl]=t,this[Um]=n,new Proxy(this,new ckt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Um],n=this[gl],r=n.type.children,i={};for(let a=-1,o=r.length;++a<o;)i[r[a].name]=Eo.visit(n.children[a],t);return i}toString(){return`{${[...this].map(([t,n])=>`${wv(t)}: ${wv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new ukt(this[gl],this[Um])}}class ukt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Eo.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Fz.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gl]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Um]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class ckt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[gl].type.children.map(n=>n.name)}has(t,n){return t[gl].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[gl].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[gl].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Eo.visit(t[gl].children[r],t[Um]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[gl].type.children.findIndex(a=>a.name===n);return i!==-1?(Hs.visit(t[gl].children[i],t[Um],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Be extends wn{}function He(e){return(t,n)=>t.getValid(n)?e(t,n):null}const hkt=(e,t)=>864e5*e[t],zz=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),fkt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,dkt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,zit=e=>new Date(e),pkt=(e,t)=>zit(hkt(e,t)),vkt=(e,t)=>zit(zz(e,t)),gkt=(e,t)=>null,Uit=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},mkt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},Vit=({values:e},t)=>pkt(e,t),Git=({values:e},t)=>vkt(e,t*2),vd=({stride:e,values:t},n)=>t[e*n],ykt=({stride:e,values:t},n)=>Ait(t[e*n]),Hit=({values:e},t)=>e[t],_kt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),xkt=({values:e,valueOffsets:t},n)=>Uit(e,t,n),bkt=({values:e,valueOffsets:t},n)=>{const r=Uit(e,t,n);return r!==null?l3(r):null},Skt=({values:e},t)=>e[t],wkt=({type:e,values:t},n)=>e.precision!==ua.HALF?t[n]:Ait(t[n]),Tkt=(e,t)=>e.type.unit===Gu.DAY?Vit(e,t):Git(e,t),Wit=({values:e},t)=>1e3*zz(e,t*2),$it=({values:e},t)=>zz(e,t*2),Xit=({values:e},t)=>fkt(e,t*2),jit=({values:e},t)=>dkt(e,t*2),Mkt=(e,t)=>{switch(e.type.unit){case Ne.SECOND:return Wit(e,t);case Ne.MILLISECOND:return $it(e,t);case Ne.MICROSECOND:return Xit(e,t);case Ne.NANOSECOND:return jit(e,t)}},Yit=({values:e},t)=>e[t],qit=({values:e},t)=>e[t],Kit=({values:e},t)=>e[t],Zit=({values:e},t)=>e[t],Akt=(e,t)=>{switch(e.type.unit){case Ne.SECOND:return Yit(e,t);case Ne.MILLISECOND:return qit(e,t);case Ne.MICROSECOND:return Kit(e,t);case Ne.NANOSECOND:return Zit(e,t)}},Ckt=({values:e,stride:t},n)=>cz.decimal(e.subarray(t*n,t*(n+1))),Ekt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:a,[t*r+1]:o}=n,l=i[0].slice(a,o-a);return new Xn([l])},Dkt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:a}=n,o=r[0];return new qE(o.slice(i,a-i))},Ikt=(e,t)=>new Fz(e,t),Lkt=(e,t)=>e.type.mode===Co.Dense?Jit(e,t):Qit(e,t),Jit=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Eo.visit(r,e.valueOffsets[t])},Qit=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Eo.visit(r,t)},Pkt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Rkt=(e,t)=>e.type.unit===Hu.DAY_TIME?tat(e,t):eat(e,t),tat=({values:e},t)=>e.subarray(2*t,2*(t+1)),eat=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},nat=({values:e},t)=>e[t],rat=({values:e},t)=>e[t],iat=({values:e},t)=>e[t],aat=({values:e},t)=>e[t],Okt=(e,t)=>{switch(e.type.unit){case Ne.SECOND:return nat(e,t);case Ne.MILLISECOND:return rat(e,t);case Ne.MICROSECOND:return iat(e,t);case Ne.NANOSECOND:return aat(e,t)}},Nkt=(e,t)=>{const{stride:n,children:r}=e,a=r[0].slice(t*n,n);return new Xn([a])};Be.prototype.visitNull=He(gkt);Be.prototype.visitBool=He(mkt);Be.prototype.visitInt=He(Skt);Be.prototype.visitInt8=He(vd);Be.prototype.visitInt16=He(vd);Be.prototype.visitInt32=He(vd);Be.prototype.visitInt64=He(Hit);Be.prototype.visitUint8=He(vd);Be.prototype.visitUint16=He(vd);Be.prototype.visitUint32=He(vd);Be.prototype.visitUint64=He(Hit);Be.prototype.visitFloat=He(wkt);Be.prototype.visitFloat16=He(ykt);Be.prototype.visitFloat32=He(vd);Be.prototype.visitFloat64=He(vd);Be.prototype.visitUtf8=He(bkt);Be.prototype.visitBinary=He(xkt);Be.prototype.visitFixedSizeBinary=He(_kt);Be.prototype.visitDate=He(Tkt);Be.prototype.visitDateDay=He(Vit);Be.prototype.visitDateMillisecond=He(Git);Be.prototype.visitTimestamp=He(Mkt);Be.prototype.visitTimestampSecond=He(Wit);Be.prototype.visitTimestampMillisecond=He($it);Be.prototype.visitTimestampMicrosecond=He(Xit);Be.prototype.visitTimestampNanosecond=He(jit);Be.prototype.visitTime=He(Akt);Be.prototype.visitTimeSecond=He(Yit);Be.prototype.visitTimeMillisecond=He(qit);Be.prototype.visitTimeMicrosecond=He(Kit);Be.prototype.visitTimeNanosecond=He(Zit);Be.prototype.visitDecimal=He(Ckt);Be.prototype.visitList=He(Ekt);Be.prototype.visitStruct=He(Ikt);Be.prototype.visitUnion=He(Lkt);Be.prototype.visitDenseUnion=He(Jit);Be.prototype.visitSparseUnion=He(Qit);Be.prototype.visitDictionary=He(Pkt);Be.prototype.visitInterval=He(Rkt);Be.prototype.visitIntervalDayTime=He(tat);Be.prototype.visitIntervalYearMonth=He(eat);Be.prototype.visitDuration=He(Okt);Be.prototype.visitDurationSecond=He(nat);Be.prototype.visitDurationMillisecond=He(rat);Be.prototype.visitDurationMicrosecond=He(iat);Be.prototype.visitDurationNanosecond=He(aat);Be.prototype.visitFixedSizeList=He(Nkt);Be.prototype.visitMap=He(Dkt);const Eo=new Be,ml=Symbol.for("keys"),Vm=Symbol.for("vals");class qE{constructor(t){return this[ml]=new Xn([t.children[0]]).memoize(),this[Vm]=t.children[1],new Proxy(this,new kkt)}[Symbol.iterator](){return new Bkt(this[ml],this[Vm])}get size(){return this[ml].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ml],n=this[Vm],r={};for(let i=-1,a=t.length;++i<a;)r[t.get(i)]=Eo.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${wv(t)}: ${wv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Bkt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Eo.visit(this.vals,t)]})}}class kkt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ml].toArray().map(String)}has(t,n){return t[ml].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ml].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ml].indexOf(n);if(r!==-1){const i=Eo.visit(Reflect.get(t,Vm),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ml].indexOf(n);return i!==-1?(Hs.visit(Reflect.get(t,Vm),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(qE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ml]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Vm]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let G9;function oat(e,t,n,r){const{length:i=0}=e;let a=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return a<0&&(a=(a%i+i)%i),o<0&&(o=(o%i+i)%i),o<a&&(G9=a,a=o,o=G9),o>i&&(o=i),r?r(e,a,o):[a,o]}const H9=e=>e!==e;function M0(e){if(typeof e!=="object"||e===null)return H9(e)?H9:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?CBt(e,n):!1:e instanceof Map?zkt(e):Array.isArray(e)?Fkt(e):e instanceof Xn?Ukt(e):Vkt(e,!0)}function Fkt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=M0(e[n]);return KE(t)}function zkt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=M0(r);return KE(n)}function Ukt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=M0(e.get(n));return KE(t)}function Vkt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,a=n.length;++i<a;)r[i]=M0(e[n[i]]);return KE(r,n)}function KE(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Gkt(e,n);case Map:return W9(e,n,n.keys());case qE:case Fz:case Object:case void 0:return W9(e,n,t||Object.keys(n))}return n instanceof Xn?Hkt(e,n):!1}}function Gkt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Hkt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function W9(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),a=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const s=e.length;let l=a.next(),u=r.next(),c=i.next();for(;o<s&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!e[o](l.value));++o,u=r.next(),c=i.next(),l=a.next());return o===s&&u.done&&c.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),a.return&&a.return(),!1)}function sat(e,t,n,r){return(n&1<<r)!==0}function Wkt(e,t,n,r){return(n&1<<r)>>r}function tC(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):lat(new Uz(n,e,t,null,sat)).subarray(0,r)),i}return n}function lat(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const a=new Uint8Array(t.length+7&-8);return a.set(t),a}class Uz{constructor(t,n,r,i,a){this.bytes=t,this.length=r,this.context=i,this.get=a,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function c3(e,t,n){if(n-t<=0)return 0;if(n-t<8){let a=0;for(const o of new Uz(e,t,n-t,e,Wkt))a+=o;return a}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return c3(e,t,i)+c3(e,r,n)+$kt(e,i>>3,r-i>>3)}function $kt(e,t,n){let r=0,i=Math.trunc(t);const a=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=JL(a.getUint32(i)),i+=4;for(;o-i>=2;)r+=JL(a.getUint16(i)),i+=2;for(;o-i>=1;)r+=JL(a.getUint8(i)),i+=1;return r}function JL(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Xkt=-1;class ir{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return on.isSparseUnion(t)?this.children.some(n=>n.nullable):on.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:a}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),a&&(t+=a.byteLength),this.children.reduce((o,s)=>o+s.byteLength,t)}get nullCount(){if(on.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Xkt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-c3(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,a,o=[],s){this.type=t,this.children=o,this.dictionary=s,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;a instanceof ir?(this.stride=a.stride,this.values=a.values,this.typeIds=a.typeIds,this.nullBitmap=a.nullBitmap,this.valueOffsets=a.valueOffsets):(this.stride=uu(t),a&&((l=a[0])&&(this.valueOffsets=l),(l=a[1])&&(this.values=l),(l=a[2])&&(this.nullBitmap=l),(l=a[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(on.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],a=r.mode===Co.Dense?this.valueOffsets[t]:t;return i.getValid(a)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(on.isUnion(i)){const a=i,o=this.children[a.typeIdToChildIndex[this.typeIds[t]]],s=a.mode===Co.Dense?this.valueOffsets[t]:t;r=o.getValid(s),o.setValid(s,n)}else{let{nullBitmap:a}=this;const{offset:o,length:s}=this,l=o+t,u=1<<l%8,c=l>>3;(!a||a.byteLength<=c)&&(a=new Uint8Array((o+s+63&-64)>>3).fill(255),this.nullCount>0&&a.set(tC(o,s,this.nullBitmap),0),Object.assign(this,{nullBitmap:a,_nullCount:-1}));const h=a[c];r=(h&u)!==0,n?a[c]=h|u:a[c]=h&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,a=this,o=this.children){return new ir(t,n,r,i,a,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:a}=this,o=+(this._nullCount===0)-1,s=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,a.length===0||this.valueOffsets?a:this._sliceChildren(a,s*t,s*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===q.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(tC(this.offset,n,this.nullBitmap),0);const a=this.buffers;return a[wc.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),a)}_sliceBuffers(t,n,r,i){let a;const{buffers:o}=this;return(a=o[wc.TYPE])&&(o[wc.TYPE]=a.subarray(t,t+n)),(a=o[wc.OFFSET])&&(o[wc.OFFSET]=a.subarray(t,t+n+1))||(a=o[wc.DATA])&&(o[wc.DATA]=i===6?a:a.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}ir.prototype.children=Object.freeze([]);class $x extends wn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new ir(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length>>3,["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length,["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length,["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.data),a=ar(t.nullBitmap),o=N_(t.valueOffsets),{["length"]:s=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ir(n,r,s,l,[o,i,a])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.data),a=ar(t.nullBitmap),o=N_(t.valueOffsets),{["length"]:s=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ir(n,r,s,l,[o,i,a])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,a=ar(t.nullBitmap),o=N_(t.valueOffsets),{["length"]:s=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ir(n,r,s,l,[o,void 0,a],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,a=ar(t.nullBitmap),{length:o=i.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,void 0,a],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,a=qi(n.ArrayType,t.typeIds),{["length"]:o=a.length,["nullCount"]:s=-1}=t;if(on.isSparseUnion(n))return new ir(n,r,o,s,[void 0,void 0,void 0,a],i);const l=N_(t.valueOffsets);return new ir(n,r,o,s,[l,void 0,void 0,a],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.indices.ArrayType,t.data),{["dictionary"]:o=new Xn([new $x().visit({type:n.dictionary})])}=t,{["length"]:s=a.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ir(n,r,s,l,[void 0,a,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=ar(t.nullBitmap),a=qi(n.ArrayType,t.data),{["length"]:o=a.length,["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,a,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $x().visit({type:n.valueType})}=t,a=ar(t.nullBitmap),{["length"]:o=i.length/uu(n),["nullCount"]:s=t.nullBitmap?-1:0}=t;return new ir(n,r,o,s,[void 0,void 0,a],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new $x().visit({type:n.childType})}=t,a=ar(t.nullBitmap),o=N_(t.valueOffsets),{["length"]:s=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new ir(n,r,s,l,[o,void 0,a],[i])}}const jkt=new $x;function xa(e){return jkt.visit(e)}class $9{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function uat(e){return e.reduce((t,n)=>t+n.nullCount,0)}function cat(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function hat(e,t,n,r){const i=[];for(let a=-1,o=e.length;++a<o;){const s=e[a],l=t[a],{length:u}=s;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(s);continue}const c=Math.max(0,n-l),h=Math.min(r-l,u);i.push(s.slice(c,h-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function Vz(e,t,n,r){let i=0,a=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;a=i+Math.trunc((o-i)*.5),n<t[a]?o=a:i=a}while(i<o)}function Gz(e,t){return e.getValid(t)}function Gm(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return Vz(r,this._offsets,n,t)}}function fat(e){let t;function n(r,i,a){return e(r[i],a,t)}return function(r,i){const a=this.data;t=i;const o=Vz(a,this._offsets,r,n);return t=void 0,o}}function dat(e){let t;function n(r,i,a){let o=a,s=0,l=0;for(let u=i-1,c=r.length;++u<c;){const h=r[u];if(~(s=e(h,t,o)))return l+s;o=0,l+=h.length}return-1}return function(r,i){t=r;const a=this.data,o=typeof i!="number"?n(a,0,0):Vz(a,this._offsets,i,n);return t=void 0,o}}class ke extends wn{}function Ykt(e,t){return t===null&&e.length>0?0:-1}function qkt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new Uz(n,e.offset+(t||0),e.length,n,sat)){if(!i)return r;++r}return-1}function tn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case q.Union:break;case q.Dictionary:break;default:return qkt(e,n)}const r=Eo.getVisitFn(e),i=M0(t);for(let a=(n||0)-1,o=e.length;++a<o;)if(i(r(e,a)))return a;return-1}function pat(e,t,n){const r=Eo.getVisitFn(e),i=M0(t);for(let a=(n||0)-1,o=e.length;++a<o;)if(i(r(e,a)))return a;return-1}ke.prototype.visitNull=Ykt;ke.prototype.visitBool=tn;ke.prototype.visitInt=tn;ke.prototype.visitInt8=tn;ke.prototype.visitInt16=tn;ke.prototype.visitInt32=tn;ke.prototype.visitInt64=tn;ke.prototype.visitUint8=tn;ke.prototype.visitUint16=tn;ke.prototype.visitUint32=tn;ke.prototype.visitUint64=tn;ke.prototype.visitFloat=tn;ke.prototype.visitFloat16=tn;ke.prototype.visitFloat32=tn;ke.prototype.visitFloat64=tn;ke.prototype.visitUtf8=tn;ke.prototype.visitBinary=tn;ke.prototype.visitFixedSizeBinary=tn;ke.prototype.visitDate=tn;ke.prototype.visitDateDay=tn;ke.prototype.visitDateMillisecond=tn;ke.prototype.visitTimestamp=tn;ke.prototype.visitTimestampSecond=tn;ke.prototype.visitTimestampMillisecond=tn;ke.prototype.visitTimestampMicrosecond=tn;ke.prototype.visitTimestampNanosecond=tn;ke.prototype.visitTime=tn;ke.prototype.visitTimeSecond=tn;ke.prototype.visitTimeMillisecond=tn;ke.prototype.visitTimeMicrosecond=tn;ke.prototype.visitTimeNanosecond=tn;ke.prototype.visitDecimal=tn;ke.prototype.visitList=tn;ke.prototype.visitStruct=tn;ke.prototype.visitUnion=tn;ke.prototype.visitDenseUnion=pat;ke.prototype.visitSparseUnion=pat;ke.prototype.visitDictionary=tn;ke.prototype.visitInterval=tn;ke.prototype.visitIntervalDayTime=tn;ke.prototype.visitIntervalYearMonth=tn;ke.prototype.visitDuration=tn;ke.prototype.visitDurationSecond=tn;ke.prototype.visitDurationMillisecond=tn;ke.prototype.visitDurationMicrosecond=tn;ke.prototype.visitDurationNanosecond=tn;ke.prototype.visitFixedSizeList=tn;ke.prototype.visitMap=tn;const eC=new ke;class Fe extends wn{}function We(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===q.Timestamp||t instanceof Za&&t.bitWidth!==64||t instanceof ih&&t.bitWidth!==64||t instanceof Xf&&t.precision!==ua.HALF))return new $9(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new $9(e.data.length,r=>{const a=e.data[r].length,o=e.slice(n,n+a);return n+=a,new Kkt(o)})}class Kkt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Fe.prototype.visitNull=We;Fe.prototype.visitBool=We;Fe.prototype.visitInt=We;Fe.prototype.visitInt8=We;Fe.prototype.visitInt16=We;Fe.prototype.visitInt32=We;Fe.prototype.visitInt64=We;Fe.prototype.visitUint8=We;Fe.prototype.visitUint16=We;Fe.prototype.visitUint32=We;Fe.prototype.visitUint64=We;Fe.prototype.visitFloat=We;Fe.prototype.visitFloat16=We;Fe.prototype.visitFloat32=We;Fe.prototype.visitFloat64=We;Fe.prototype.visitUtf8=We;Fe.prototype.visitBinary=We;Fe.prototype.visitFixedSizeBinary=We;Fe.prototype.visitDate=We;Fe.prototype.visitDateDay=We;Fe.prototype.visitDateMillisecond=We;Fe.prototype.visitTimestamp=We;Fe.prototype.visitTimestampSecond=We;Fe.prototype.visitTimestampMillisecond=We;Fe.prototype.visitTimestampMicrosecond=We;Fe.prototype.visitTimestampNanosecond=We;Fe.prototype.visitTime=We;Fe.prototype.visitTimeSecond=We;Fe.prototype.visitTimeMillisecond=We;Fe.prototype.visitTimeMicrosecond=We;Fe.prototype.visitTimeNanosecond=We;Fe.prototype.visitDecimal=We;Fe.prototype.visitList=We;Fe.prototype.visitStruct=We;Fe.prototype.visitUnion=We;Fe.prototype.visitDenseUnion=We;Fe.prototype.visitSparseUnion=We;Fe.prototype.visitDictionary=We;Fe.prototype.visitInterval=We;Fe.prototype.visitIntervalDayTime=We;Fe.prototype.visitIntervalYearMonth=We;Fe.prototype.visitDuration=We;Fe.prototype.visitDurationSecond=We;Fe.prototype.visitDurationMillisecond=We;Fe.prototype.visitDurationMicrosecond=We;Fe.prototype.visitDurationNanosecond=We;Fe.prototype.visitFixedSizeList=We;Fe.prototype.visitMap=We;const Hz=new Fe,Zkt=(e,t)=>e+t;class gd extends wn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Ne.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Wu.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Wu.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Jkt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Qkt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),tFt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:a}=e,{[r*t+1]:o}=e,s=Wu.getVisitFn(i.type),l=i.slice(a,o-a);let u=8;for(let c=-1,h=o-a;++c<h;)u+=s(l,c);return u},eFt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),a=Wu.getVisitFn(r.type);let o=0;for(let s=-1,l=i.length;++s<l;)o+=a(i,s);return o},nFt=(e,t)=>e.type.mode===Co.Dense?vat(e,t):gat(e,t),vat=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const a=e.typeIdToChildIndex[n[i]];return 8+Wu.visit(t[a],r[i])},gat=({children:e},t)=>4+Wu.visitMany(e,e.map(()=>t)).reduce(Zkt,0);gd.prototype.visitUtf8=Jkt;gd.prototype.visitBinary=Qkt;gd.prototype.visitList=tFt;gd.prototype.visitFixedSizeList=eFt;gd.prototype.visitUnion=nFt;gd.prototype.visitDenseUnion=vat;gd.prototype.visitSparseUnion=gat;const Wu=new gd;var mat;const yat={},_at={};class Xn{constructor(t){var n,r,i;const a=t[0]instanceof Xn?t.flatMap(s=>s.data):t;if(a.length===0||a.some(s=>!(s instanceof ir)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=a[0])===null||n===void 0?void 0:n.type;switch(a.length){case 0:this._offsets=[0];break;case 1:{const{get:s,set:l,indexOf:u,byteLength:c}=yat[o.typeId],h=a[0];this.isValid=f=>Gz(h,f),this.get=f=>s(h,f),this.set=(f,d)=>l(h,f,d),this.indexOf=f=>u(h,f),this.getByteLength=f=>c(h,f),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,_at[o.typeId]),this._offsets=cat(a);break}this.data=a,this.type=o,this.stride=uu(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return uat(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${q[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return Hz.visit(this)}concat(...t){return new Xn(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Xn(oat(this,t,n,({data:r,_offsets:i},a,o)=>hat(r,i,a,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:a}=this;switch(t.typeId){case q.Int:case q.Float:case q.Decimal:case q.Time:case q.Timestamp:switch(n.length){case 0:return new a;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:s,length:l})=>(o.array.set(s.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new a(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Xn(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return on.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(on.isDictionary(this.type)){const t=new nC(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Xn(n)}return new nC(this)}unmemoize(){if(on.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Xn(n)}return this}}mat=Symbol.toStringTag;Xn[mat]=(e=>{e.type=on.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(q).map(n=>q[n]).filter(n=>typeof n=="number"&&n!==q.NONE);for(const n of t){const r=Eo.getVisitFnByTypeId(n),i=Hs.getVisitFnByTypeId(n),a=eC.getVisitFnByTypeId(n),o=Wu.getVisitFnByTypeId(n);yat[n]={get:r,set:i,indexOf:a,byteLength:o},_at[n]=Object.create(e,{isValid:{value:Gm(Gz)},get:{value:Gm(Eo.getVisitFnByTypeId(n))},set:{value:fat(Hs.getVisitFnByTypeId(n))},indexOf:{value:dat(eC.getVisitFnByTypeId(n))},getByteLength:{value:Gm(Wu.getVisitFnByTypeId(n))}})}return"Vector"})(Xn.prototype);class nC extends Xn{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,a=new Array(this.length);Object.defineProperty(this,"get",{value(o){const s=a[o];if(s!==void 0)return s;const l=n.call(this,o);return a[o]=l,l}}),Object.defineProperty(this,"set",{value(o,s){r.call(this,o,s),a[o]=s}}),Object.defineProperty(this,"slice",{value:(o,s)=>new nC(i.call(this,o,s))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Xn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function rFt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${iFt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function iFt(e){return typeof e!="bigint"?wv(e):`${wv(e)}n`}const QL=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,aFt=(e,t=0)=>e.length>=t?e.subarray(0,t):qA(new e.constructor(t),e,0);class ZE{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?QL(r*1,this.BYTES_PER_ELEMENT):QL(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=QL(t*this.stride,this.BYTES_PER_ELEMENT);const n=aFt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=qA(new this.ArrayType(t),this.buffer)}}ZE.prototype.offset=0;class H1 extends ZE{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class xat extends H1{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,a=t%8,o=r[i]>>a&1;return n?o===0&&(r[i]|=1<<a,++this.numValid):o===1&&(r[i]&=~(1<<a),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class bat extends H1{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Io=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=uu(t),this._nulls=new xat,n&&n.length>0&&(this._isValid=rFt(n))}toVector(){return new Xn([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:a,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),a&&(t+=a.byteLength),o.reduce((s,l)=>s+l.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:a,length:o,nullCount:s,_typeIds:l,_offsets:u,_values:c,_nulls:h}=this;(n=l==null?void 0:l.flush(o))?i=u==null?void 0:u.flush(o):(i=u==null?void 0:u.flush(o))?t=c==null?void 0:c.flush(u.last()):t=c==null?void 0:c.flush(o),s>0&&(r=h==null?void 0:h.flush(o));const f=this.children.map(d=>d.flush());return this.clear(),xa({type:a,length:o,nullCount:s,children:f,child:f[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const a of this.children)a.clear();return this}};Io.prototype.length=1;Io.prototype.stride=1;Io.prototype.children=null;Io.prototype.finished=!1;Io.prototype.nullValues=null;Io.prototype._isValid=()=>!0;class Th extends Io{constructor(t){super(t),this._values=new H1(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class JE extends Io{constructor(t){super(t),this._pendingLength=0,this._offsets=new bat}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof qE?n[ml].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class h3{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const tP=2,pu=4,Lc=4,mr=4,ff=new Int32Array(2),X9=new Float32Array(ff.buffer),j9=new Float64Array(ff.buffer),Vw=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var f3;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(f3||(f3={}));let rC=class Sat{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Sat(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return ff[0]=this.readInt32(t),X9[0]}readFloat64(t){return ff[Vw?0:1]=this.readInt32(t),ff[Vw?1:0]=this.readInt32(t+4),j9[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){X9[0]=n,this.writeInt32(t,ff[0])}writeFloat64(t,n){j9[0]=n,this.writeInt32(t,ff[Vw?0:1]),this.writeInt32(t+4,ff[Vw?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+pu+Lc)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Lc;n++)t+=String.fromCharCode(this.readInt8(this.position_+pu+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=pu;const i=this.bytes_.subarray(t,t+r);return n===f3.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+pu}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Lc)throw new Error("FlatBuffers: file identifier must be length "+Lc);for(let n=0;n<Lc;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+pu+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const a=t(i);a!==null&&r.push(a)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const a=t(i);a!==null&&r.push(a.unpack())}return r}},wat=class Tat{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=rC.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=Tat.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=rC.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(pu,0),this.writeInt32(this.offset()-t+pu)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const a=(r+i)*tP;this.addInt16(a);let o=0;const s=this.space;t:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(a==this.bb.readInt16(l)){for(let u=tP;u<a;u+=tP)if(this.bb.readInt16(s+u)!=this.bb.readInt16(l+u))continue t;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?mr:0;if(n){const a=n;if(this.prep(this.minalign,pu+Lc+i),a.length!=Lc)throw new TypeError("FlatBuffers: file identifier must be length "+Lc);for(let o=Lc-1;o>=0;o--)this.writeInt8(a.charCodeAt(o))}this.prep(this.minalign,pu+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(pu,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,a=this.bb.bytes();r<n.length;r++)a[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+mr),(n||new Mi).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Mi.startKeyValue(t),Mi.addKey(t,n),Mi.addValue(t,r),Mi.endKeyValue(t)}}var Ly;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ly||(Ly={}));var Py;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(Py||(Py={}));var iC;(function(e){e[e.DenseArray=0]="DenseArray"})(iC||(iC={}));class Wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+mr),(n||new Wo).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Wo.startInt(t),Wo.addBitWidth(t,n),Wo.addIsSigned(t,r),Wo.endInt(t)}}class Pc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Pc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+mr),(n||new Pc).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Wo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):iC.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,iC.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Vp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Vp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+mr),(n||new Vp).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Vp.startBinary(t),Vp.endBinary(t)}}class Gp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Gp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+mr),(n||new Gp).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Gp.startBool(t),Gp.endBool(t)}}var aC;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(aC||(aC={}));let gM=class sm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new sm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+mr),(n||new sm).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):aC.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,aC.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return sm.startDate(t),sm.addUnit(t,n),sm.endDate(t)}};class uo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new uo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+mr),(n||new uo).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return uo.startDecimal(t),uo.addPrecision(t,n),uo.addScale(t,r),uo.addBitWidth(t,i),uo.endDecimal(t)}}var Yf;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Yf||(Yf={}));class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+mr),(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Yf.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return vu.startDuration(t),vu.addUnit(t,n),vu.endDuration(t)}}class gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+mr),(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return gu.startFixedSizeBinary(t),gu.addByteWidth(t,n),gu.endFixedSizeBinary(t)}}class mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+mr),(n||new mu).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return mu.startFixedSizeList(t),mu.addListSize(t,n),mu.endFixedSizeList(t)}}var oC;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(oC||(oC={}));class yu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new yu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+mr),(n||new yu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):oC.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,oC.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return yu.startFloatingPoint(t),yu.addPrecision(t,n),yu.endFloatingPoint(t)}}var sC;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(sC||(sC={}));class _u{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new _u).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+mr),(n||new _u).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):sC.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,sC.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return _u.startInterval(t),_u.addUnit(t,n),_u.endInterval(t)}}let Y9=class dx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new dx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+mr),(n||new dx).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return dx.startList(t),dx.endList(t)}},mM=class lm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+mr),(n||new lm).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return lm.startMap(t),lm.addKeysSorted(t,n),lm.endMap(t)}};class Hp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Hp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+mr),(n||new Hp).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Hp.startNull(t),Hp.endNull(t)}}class Wp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+mr),(n||new Wp).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Wp.startStruct_(t),Wp.endStruct_(t)}}class As{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new As).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+mr),(n||new As).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Yf.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return As.startTime(t),As.addUnit(t,n),As.addBitWidth(t,r),As.endTime(t)}}class Cs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+mr),(n||new Cs).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Yf.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Yf.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Cs.startTimestamp(t),Cs.addUnit(t,n),Cs.addTimezone(t,r),Cs.endTimestamp(t)}}var lC;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(lC||(lC={}));class po{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new po).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+mr),(n||new po).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lC.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,lC.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return po.startUnion(t),po.addMode(t,n),po.addTypeIds(t,r),po.endUnion(t)}}class $p{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new $p).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+mr),(n||new $p).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return $p.startUtf8(t),$p.endUtf8(t)}}var Fr;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Fr||(Fr={}));let ps=class yM{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new yM).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+mr),(n||new yM).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Fr.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Pc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new yM).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Fr.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},iu=class yc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new yc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+mr),(n||new yc).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Py.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ps).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,Py.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,a){return yc.startSchema(t),yc.addEndianness(t,n),yc.addFields(t,r),yc.addCustomMetadata(t,i),yc.addFeatures(t,a),yc.endSchema(t)}};class Vo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Vo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+mr),(n||new Vo).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ly.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new iu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new h3).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new h3).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ly.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class er{constructor(t=[],n,r,i=Ua.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=p3(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new er(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new er(n,this.metadata)}assign(...t){const n=t[0]instanceof er?t[0]:Array.isArray(t[0])?new er(t[0]):new er(t),r=[...this.fields],i=Gw(Gw(new Map,this.metadata),n.metadata),a=n.fields.filter(s=>{const l=r.findIndex(u=>u.name===s.name);return~l?(r[l]=s.clone({metadata:Gw(Gw(new Map,r[l].metadata),s.metadata)}))&&!1:!0}),o=p3(a,new Map);return new er([...r,...a],i,new Map([...this.dictionaries,...o]))}}er.prototype.fields=null;er.prototype.metadata=null;er.prototype.dictionaries=null;let vr=class d3{static new(...t){let[n,r,i,a]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),a===void 0&&(a=t[0].metadata)),new d3(`${n}`,r,i,a)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,a]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,a=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:a=this.metadata}=t[0],d3.new(n,r,i,a)}};vr.prototype.type=null;vr.prototype.name=null;vr.prototype.nullable=null;vr.prototype.metadata=null;function Gw(e,t){return new Map([...e||new Map,...t||new Map])}function p3(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const a=e[n].type;if(on.isDictionary(a)){if(!t.has(a.id))t.set(a.id,a.dictionary);else if(t.get(a.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}a.children&&a.children.length>0&&p3(a.children,t)}return t}var oFt=wat,sFt=rC;class v3{static decode(t){t=new sFt(ar(t));const n=Vo.getRootAsFooter(t),r=er.decode(n.schema(),new Map,n.version());return new lFt(r,n)}static encode(t){const n=new oFt,r=er.encode(n,t.schema);Vo.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())qf.encode(n,o);const i=n.endVector();Vo.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())qf.encode(n,o);const a=n.endVector();return Vo.startFooter(n),Vo.addSchema(n,r),Vo.addVersion(n,Ua.V5),Vo.addRecordBatches(n,i),Vo.addDictionaries(n,a),Vo.finishFooterBuffer(n,Vo.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ua.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class lFt extends v3{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return qf.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return qf.decode(n)}return null}}class qf{static decode(t){return new qf(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),a=BigInt(n.bodyLength);return h3.createBlock(t,i,r,a)}constructor(t,n,r){this.metaDataLength=t,this.offset=kl(r),this.bodyLength=kl(n)}}const Hw=Object.freeze({done:!0,value:void 0});class Mat{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class uFt extends Mat{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Ic(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Hw);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return U9.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return U9.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Ic(this,void 0,void 0,function*(){return yield this.abort(t),Hw})}return(t){return Ic(this,void 0,void 0,function*(){return yield this.close(),Hw})}read(t){return Ic(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ic(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(Hw)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class eP extends uFt{write(t){if((t=ar(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?l3(this.toUint8Array(!0)):this.toUint8Array(!1).then(l3)}toUint8Array(t=!1){return t?Vu(this._values)[0]:Ic(this,void 0,void 0,function*(){var n,r,i,a;const o=[];let s=0;try{for(var l=!0,u=Wx(this),c;c=yield u.next(),n=c.done,!n;l=!0){a=c.value,l=!1;const h=a;o.push(h),s+=h.byteLength}}catch(h){r={error:h}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return Vu(o,s)[0]})}}class Aat extends JE{constructor(t){super(t),this._values=new ZE(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,ar(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let a=0;for(const[o,s]of t)if(s===void 0)r.set(o,0);else{const l=s.length;i.set(s,a),r.set(o,l),a+=l}}}class cFt extends Io{constructor(t){super(t),this._values=new xat}setValue(t,n){this._values.set(t,+n)}}class QE extends Th{}QE.prototype._setValue=Lit;class Cat extends QE{}Cat.prototype._setValue=Sz;class Eat extends QE{}Eat.prototype._setValue=wz;class Dat extends Th{}Dat.prototype._setValue=Oit;class hFt extends Io{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new jf(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=uC({type:this.type.indices,nullValues:n}),this.dictionary=uC({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let a=r[i];return a===void 0&&(r[i]=a=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,a)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class Iat extends Th{}Iat.prototype._setValue=Iit;class fFt extends Io{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let a=-1,o=n.length;++a<o;)r.set(i+a,n[a])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new Iy(this.type.listSize,new vr(n,t.type,!0)),r}}class t2 extends Th{setValue(t,n){this._values.set(t,n)}}class dFt extends t2{setValue(t,n){super.setValue(t,Cit(n))}}class pFt extends t2{}class vFt extends t2{}class e2 extends Th{}e2.prototype._setValue=kit;class Lat extends e2{}Lat.prototype._setValue=Pz;class Pat extends e2{}Pat.prototype._setValue=Rz;class A0 extends Th{}A0.prototype._setValue=Fit;class Rat extends A0{}Rat.prototype._setValue=Oz;class Oat extends A0{}Oat.prototype._setValue=Nz;class Nat extends A0{}Nat.prototype._setValue=Bz;class Bat extends A0{}Bat.prototype._setValue=kz;class Mh extends Th{setValue(t,n){this._values.set(t,n)}}class gFt extends Mh{}class mFt extends Mh{}class yFt extends Mh{}class _Ft extends Mh{}class xFt extends Mh{}class bFt extends Mh{}class SFt extends Mh{}class wFt extends Mh{}class TFt extends JE{constructor(t){super(t),this._offsets=new bat}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Dy(new vr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,a]of t)if(typeof a>"u")n.set(i,0);else{const o=a,s=o.length,l=n.set(i,s).buffer[i];for(let u=-1;++u<s;)r.set(l+u,o[u])}}}class MFt extends JE{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),a=i.get(t);a&&(this._pendingLength-=a.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Kb(new vr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,a]of t)if(a===void 0)n.set(i,0);else{let{[i]:o,[i+1]:s}=n.set(i,a.size).buffer;for(const l of a.entries())if(r.set(o,l),++o>=s)break}}}class AFt extends Io{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class CFt extends Io{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((a,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((a,o)=>r[o].set(t,n.get(a.name)));default:return i.children.forEach((a,o)=>r[o].set(t,n[a.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ba([...this.type.children,new vr(n,t.type,!0)]),r}}class C0 extends Th{}C0.prototype._setValue=Pit;class kat extends C0{}kat.prototype._setValue=Tz;class Fat extends C0{}Fat.prototype._setValue=Mz;class zat extends C0{}zat.prototype._setValue=Az;class Uat extends C0{}Uat.prototype._setValue=Cz;class E0 extends Th{}E0.prototype._setValue=Rit;class Vat extends E0{}Vat.prototype._setValue=Ez;class Gat extends E0{}Gat.prototype._setValue=Dz;class Hat extends E0{}Hat.prototype._setValue=Iz;class Wat extends E0{}Wat.prototype._setValue=Lz;class Wz extends Io{constructor(t){super(t),this._typeIds=new H1(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],a=this.children[i];a==null||a.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:a,typeIds:o}}=this,s=[...i,new vr(n,t.type)];return this.type=new qb(a,[...o,r],s),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class EFt extends Wz{}class DFt extends Wz{constructor(t){super(t),this._offsets=new H1(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],a=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,a.length).buffer[t];a==null||a.set(o,n)}}class $at extends JE{constructor(t){super(t),this._values=new ZE(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,sz(n))}_flushPending(t,n){}}$at.prototype._flushPending=Aat.prototype._flushPending;class IFt extends wn{visitNull(){return AFt}visitBool(){return cFt}visitInt(){return Mh}visitInt8(){return gFt}visitInt16(){return mFt}visitInt32(){return yFt}visitInt64(){return _Ft}visitUint8(){return xFt}visitUint16(){return bFt}visitUint32(){return SFt}visitUint64(){return wFt}visitFloat(){return t2}visitFloat16(){return dFt}visitFloat32(){return pFt}visitFloat64(){return vFt}visitUtf8(){return $at}visitBinary(){return Aat}visitFixedSizeBinary(){return Iat}visitDate(){return QE}visitDateDay(){return Cat}visitDateMillisecond(){return Eat}visitTimestamp(){return C0}visitTimestampSecond(){return kat}visitTimestampMillisecond(){return Fat}visitTimestampMicrosecond(){return zat}visitTimestampNanosecond(){return Uat}visitTime(){return E0}visitTimeSecond(){return Vat}visitTimeMillisecond(){return Gat}visitTimeMicrosecond(){return Hat}visitTimeNanosecond(){return Wat}visitDecimal(){return Dat}visitList(){return TFt}visitStruct(){return CFt}visitUnion(){return Wz}visitDenseUnion(){return DFt}visitSparseUnion(){return EFt}visitDictionary(){return hFt}visitInterval(){return e2}visitIntervalDayTime(){return Lat}visitIntervalYearMonth(){return Pat}visitDuration(){return A0}visitDurationSecond(){return Rat}visitDurationMillisecond(){return Oat}visitDurationMicrosecond(){return Nat}visistDurationNanosecond(){return Bat}visitFixedSizeList(){return fFt}visitMap(){return MFt}}const LFt=new IFt;class ze extends wn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function to(e,t){return t instanceof e.constructor}function W1(e,t){return e===t||to(e,t)}function Ah(e,t){return e===t||to(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function n2(e,t){return e===t||to(e,t)&&e.precision===t.precision}function PFt(e,t){return e===t||to(e,t)&&e.byteWidth===t.byteWidth}function $z(e,t){return e===t||to(e,t)&&e.unit===t.unit}function $1(e,t){return e===t||to(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function X1(e,t){return e===t||to(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function RFt(e,t){return e===t||to(e,t)&&e.children.length===t.children.length&&Kf.compareManyFields(e.children,t.children)}function OFt(e,t){return e===t||to(e,t)&&e.children.length===t.children.length&&Kf.compareManyFields(e.children,t.children)}function Xz(e,t){return e===t||to(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Kf.compareManyFields(e.children,t.children)}function NFt(e,t){return e===t||to(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Kf.visit(e.indices,t.indices)&&Kf.visit(e.dictionary,t.dictionary)}function jz(e,t){return e===t||to(e,t)&&e.unit===t.unit}function j1(e,t){return e===t||to(e,t)&&e.unit===t.unit}function BFt(e,t){return e===t||to(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Kf.compareManyFields(e.children,t.children)}function kFt(e,t){return e===t||to(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Kf.compareManyFields(e.children,t.children)}ze.prototype.visitNull=W1;ze.prototype.visitBool=W1;ze.prototype.visitInt=Ah;ze.prototype.visitInt8=Ah;ze.prototype.visitInt16=Ah;ze.prototype.visitInt32=Ah;ze.prototype.visitInt64=Ah;ze.prototype.visitUint8=Ah;ze.prototype.visitUint16=Ah;ze.prototype.visitUint32=Ah;ze.prototype.visitUint64=Ah;ze.prototype.visitFloat=n2;ze.prototype.visitFloat16=n2;ze.prototype.visitFloat32=n2;ze.prototype.visitFloat64=n2;ze.prototype.visitUtf8=W1;ze.prototype.visitBinary=W1;ze.prototype.visitFixedSizeBinary=PFt;ze.prototype.visitDate=$z;ze.prototype.visitDateDay=$z;ze.prototype.visitDateMillisecond=$z;ze.prototype.visitTimestamp=$1;ze.prototype.visitTimestampSecond=$1;ze.prototype.visitTimestampMillisecond=$1;ze.prototype.visitTimestampMicrosecond=$1;ze.prototype.visitTimestampNanosecond=$1;ze.prototype.visitTime=X1;ze.prototype.visitTimeSecond=X1;ze.prototype.visitTimeMillisecond=X1;ze.prototype.visitTimeMicrosecond=X1;ze.prototype.visitTimeNanosecond=X1;ze.prototype.visitDecimal=W1;ze.prototype.visitList=RFt;ze.prototype.visitStruct=OFt;ze.prototype.visitUnion=Xz;ze.prototype.visitDenseUnion=Xz;ze.prototype.visitSparseUnion=Xz;ze.prototype.visitDictionary=NFt;ze.prototype.visitInterval=jz;ze.prototype.visitIntervalDayTime=jz;ze.prototype.visitIntervalYearMonth=jz;ze.prototype.visitDuration=j1;ze.prototype.visitDurationSecond=j1;ze.prototype.visitDurationMillisecond=j1;ze.prototype.visitDurationMicrosecond=j1;ze.prototype.visitDurationNanosecond=j1;ze.prototype.visitFixedSizeList=BFt;ze.prototype.visitMap=kFt;const Kf=new ze;function g3(e,t){return Kf.compareSchemas(e,t)}function uC(e){const t=e.type,n=new(LFt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},a=Array.isArray(r)?(o,s)=>r[s]||i:({name:o})=>r[o]||i;for(const[o,s]of t.children.entries()){const{type:l}=s,u=a(s,o);n.children.push(uC(Object.assign(Object.assign({},u),{type:l})))}}return n}function nP(e,t){return FFt(e,t.map(n=>n.data.concat()))}function FFt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((h,f)=>Math.max(h,f.length),0)};let a=0,o=0,s=-1;const l=t.length;let u,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,s=-1;++s<l;)c[s]=u=t[s].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=zFt(n,o,c,t,i),o>0&&(r[a++]=xa({type:new ba(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(h=>new $o(e,h))]}function zFt(e,t,n,r,i){var a;const o=(t+63&-64)>>3;for(let s=-1,l=r.length;++s<l;){const u=n[s],c=u==null?void 0:u.length;if(c>=t)c===t?n[s]=u:(n[s]=u.slice(0,t),i.numBatches=Math.max(i.numBatches,r[s].unshift(u.slice(t,c-t))));else{const h=e[s];e[s]=h.clone({nullable:!0}),n[s]=(a=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&a!==void 0?a:xa({type:h.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var Xat;class vo{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new er([]),this._offsets=[0],this;let i,a;t[0]instanceof er&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(a=t.pop());const o=l=>{if(l){if(l instanceof $o)return[l];if(l instanceof vo)return l.batches;if(l instanceof ir){if(l.type instanceof ba)return[new $o(new er(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(d=>new Xn([l[d]])),h=new er(u.map((d,p)=>new vr(String(d),c[p].type))),[,f]=nP(h,c);return f.length===0?[new $o(l)]:f}}}return[]},s=t.flatMap(l=>o(l));if(i=(r=i??((n=s[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new er([]),!(i instanceof er))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of s){if(!(l instanceof $o))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!g3(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=s,this._offsets=a??cat(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=uat(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Hz.visit(new Xn(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new vo(n,r.map(i=>new $o(n,i)))}slice(t,n){const r=this.schema;[t,n]=oat({length:this.numRows},t,n);const i=hat(this.data,this._offsets,t,n);return new vo(r,i.map(a=>new $o(r,a)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=xa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Xn(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Xn([xa({type:new rh,length:this.numRows})]));const a=r.fields.slice(),o=a[t].clone({type:n.type}),s=this.schema.fields.map((l,u)=>this.getChildAt(u));[a[t],s[t]]=[o,n],[r,i]=nP(r,s)}return new vo(r,i)}select(t){const n=this.schema.fields.reduce((r,i,a)=>r.set(i.name,a),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new vo(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((s,l,u)=>{const[c,h]=s,f=n.findIndex(d=>d.name===l.name);return~f?h[f]=u:c.push(u),s},[[],[]]),a=this.schema.assign(t.schema),o=[...n.map((s,l)=>[l,i[l]]).map(([s,l])=>l===void 0?this.getChildAt(s):t.getChildAt(l)),...r.map(s=>t.getChildAt(s))].filter(Boolean);return new vo(...nP(a,o))}}Xat=Symbol.toStringTag;vo[Xat]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Gm(Gz),e.get=Gm(Eo.getVisitFn(q.Struct)),e.set=fat(Hs.getVisitFn(q.Struct)),e.indexOf=dat(eC.getVisitFn(q.Struct)),e.getByteLength=Gm(Wu.getVisitFn(q.Struct)),"Table"))(vo.prototype);var jat;let $o=class px{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof er))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=xa({nullCount:0,type:new ba(this.schema.fields),children:this.schema.fields.map(n=>xa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof ir))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=q9(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:a}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=vr.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new er(r),s=xa({type:new ba(r),length:a,children:i,nullCount:0});[this.schema,this.data]=q9(o,s.children,a);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Yat(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Eo.visit(this.data,t)}set(t,n){return Hs.visit(this.data,t,n)}indexOf(t,n){return eC.visit(this.data,t,n)}getByteLength(t){return Wu.visit(this.data,t)}[Symbol.iterator](){return Hz.visit(new Xn([this.data]))}toArray(){return[...this]}concat(...t){return new vo(this.schema,[this,...t])}slice(t,n){const[r]=new Xn([this.data]).slice(t,n).data;return new px(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Xn([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Xn([xa({type:new rh,length:this.numRows})]));const a=r.fields.slice(),o=i.children.slice(),s=a[t].clone({type:n.type});[a[t],o[t]]=[s,n.data[0]],r=new er(a,new Map(this.schema.metadata)),i=xa({type:new ba(a),children:o})}return new px(r,i)}select(t){const n=this.schema.select(t),r=new ba(n.fields),i=[];for(const a of t){const o=this.schema.fields.findIndex(s=>s.name===a);~o&&(i[o]=this.data.children[o])}return new px(n,xa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(a=>this.data.children[a]).filter(Boolean),i=xa({type:new ba(n.fields),length:this.numRows,children:r});return new px(n,i)}};jat=Symbol.toStringTag;$o[jat]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))($o.prototype);function q9(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],a=[...t],o=(n+63&-64)>>3;for(const[s,l]of e.fields.entries()){const u=t[s];(!u||u.length!==n)&&(i[s]=l.clone({nullable:!0}),a[s]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:xa({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),xa({type:new ba(i),length:n,children:a})]}function Yat(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let a=-1,o=e.length;++a<o;){const{type:s}=e[a],l=t[a];for(const u of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])Yat(s.children,u==null?void 0:u.children,n);if(on.isDictionary(s)){const{id:u}=s;if(!n.has(u))l!=null&&l.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class UFt extends $o{constructor(t){const n=t.fields.map(i=>xa({type:i.type})),r=xa({type:new ba(t.fields),nullCount:0,children:n});super(t,r)}}var cC;(function(e){e[e.BUFFER=0]="BUFFER"})(cC||(cC={}));var hC;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(hC||(hC={}));class df{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new df).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+mr),(n||new df).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):hC.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):cC.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,hC.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,cC.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return df.startBodyCompression(t),df.addCodec(t,n),df.addMethod(t,r),df.endBodyCompression(t)}}let qat=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Kat=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Tc=class m3{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new m3).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+mr),(n||new m3).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Kat).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new qat).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new df).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},um=class y3{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new y3).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+mr),(n||new y3).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Tc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var fC;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(fC||(fC={}));let jh=class nu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+mr),(n||new nu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ly.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):fC.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Mi).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ly.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,fC.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,a,o){return nu.startMessage(t),nu.addVersion(t,n),nu.addHeaderType(t,r),nu.addHeader(t,i),nu.addBodyLength(t,a),nu.addCustomMetadata(t,o),nu.endMessage(t)}};class VFt extends wn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Hp.startNull(n),Hp.endNull(n)}visitInt(t,n){return Wo.startInt(n),Wo.addBitWidth(n,t.bitWidth),Wo.addIsSigned(n,t.isSigned),Wo.endInt(n)}visitFloat(t,n){return yu.startFloatingPoint(n),yu.addPrecision(n,t.precision),yu.endFloatingPoint(n)}visitBinary(t,n){return Vp.startBinary(n),Vp.endBinary(n)}visitBool(t,n){return Gp.startBool(n),Gp.endBool(n)}visitUtf8(t,n){return $p.startUtf8(n),$p.endUtf8(n)}visitDecimal(t,n){return uo.startDecimal(n),uo.addScale(n,t.scale),uo.addPrecision(n,t.precision),uo.addBitWidth(n,t.bitWidth),uo.endDecimal(n)}visitDate(t,n){return gM.startDate(n),gM.addUnit(n,t.unit),gM.endDate(n)}visitTime(t,n){return As.startTime(n),As.addUnit(n,t.unit),As.addBitWidth(n,t.bitWidth),As.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return Cs.startTimestamp(n),Cs.addUnit(n,t.unit),r!==void 0&&Cs.addTimezone(n,r),Cs.endTimestamp(n)}visitInterval(t,n){return _u.startInterval(n),_u.addUnit(n,t.unit),_u.endInterval(n)}visitDuration(t,n){return vu.startDuration(n),vu.addUnit(n,t.unit),vu.endDuration(n)}visitList(t,n){return Y9.startList(n),Y9.endList(n)}visitStruct(t,n){return Wp.startStruct_(n),Wp.endStruct_(n)}visitUnion(t,n){po.startTypeIdsVector(n,t.typeIds.length);const r=po.createTypeIdsVector(n,t.typeIds);return po.startUnion(n),po.addMode(n,t.mode),po.addTypeIds(n,r),po.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Pc.startDictionaryEncoding(n),Pc.addId(n,BigInt(t.id)),Pc.addIsOrdered(n,t.isOrdered),r!==void 0&&Pc.addIndexType(n,r),Pc.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return gu.startFixedSizeBinary(n),gu.addByteWidth(n,t.byteWidth),gu.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return mu.startFixedSizeList(n),mu.addListSize(n,t.listSize),mu.endFixedSizeList(n)}visitMap(t,n){return mM.startMap(n),mM.addKeysSorted(n,t.keysSorted),mM.endMap(n)}}const rP=new VFt;function GFt(e,t=new Map){return new er(WFt(e,t),_M(e.metadata),t)}function Zat(e){return new Jo(e.count,Jat(e.columns),Qat(e.columns))}function HFt(e){return new $u(Zat(e.data),e.id,e.isDelta)}function WFt(e,t){return(e.fields||[]).filter(Boolean).map(n=>vr.fromJSON(n,t))}function K9(e,t){return(e.children||[]).filter(Boolean).map(n=>vr.fromJSON(n,t))}function Jat(e){return(e||[]).reduce((t,n)=>[...t,new Zf(n.count,$Ft(n.VALIDITY)),...Jat(n.children)],[])}function Qat(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Au(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Au(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Au(t.length,i.OFFSET.length)),i.DATA&&t.push(new Au(t.length,i.DATA.length)),t=Qat(i.children,t)}return t}function $Ft(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function XFt(e,t){let n,r,i,a,o,s;return!t||!(a=e.dictionary)?(o=J9(e,K9(e,t)),i=new vr(e.name,o,e.nullable,_M(e.metadata))):t.has(n=a.id)?(r=(r=a.indexType)?Z9(r):new $f,s=new jf(t.get(n),r,n,a.isOrdered),i=new vr(e.name,s,e.nullable,_M(e.metadata))):(r=(r=a.indexType)?Z9(r):new $f,t.set(n,o=J9(e,K9(e,t))),s=new jf(o,r,n,a.isOrdered),i=new vr(e.name,s,e.nullable,_M(e.metadata))),i||null}function _M(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Z9(e){return new Za(e.isSigned,e.bitWidth)}function J9(e,t){const n=e.type.name;switch(n){case"NONE":return new rh;case"null":return new rh;case"binary":return new jb;case"utf8":return new Ay;case"bool":return new Yb;case"list":return new Dy((t||[])[0]);case"struct":return new ba(t||[]);case"struct_":return new ba(t||[])}switch(n){case"int":{const r=e.type;return new Za(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Xf(ua[r.precision])}case"decimal":{const r=e.type;return new KA(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new Cy(Gu[r.unit])}case"time":{const r=e.type;return new ih(Ne[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new ZA(Ne[r.unit],r.timezone)}case"interval":{const r=e.type;return new Ey(Hu[r.unit])}case"duration":{const r=e.type;return new JA(Ne[r.unit])}case"union":{const r=e.type,[i,...a]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+a.join("");return new qb(Co[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new QA(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new Iy(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new Kb((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var jFt=wat,YFt=rC;class xu{static fromJSON(t,n){const r=new xu(0,Ua.V5,n);return r._createHeader=qFt(t,n),r}static decode(t){t=new YFt(ar(t));const n=jh.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),a=n.headerType(),o=new xu(r,i,a);return o._createHeader=KFt(n,a),o}static encode(t){const n=new jFt;let r=-1;return t.isSchema()?r=er.encode(n,t.header()):t.isRecordBatch()?r=Jo.encode(n,t.header()):t.isDictionaryBatch()&&(r=$u.encode(n,t.header())),jh.startMessage(n),jh.addVersion(n,Ua.V5),jh.addHeader(n,r),jh.addHeaderType(n,t.headerType),jh.addBodyLength(n,BigInt(t.bodyLength)),jh.finishMessageBuffer(n,jh.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof er)return new xu(0,Ua.V5,Zi.Schema,t);if(t instanceof Jo)return new xu(n,Ua.V5,Zi.RecordBatch,t);if(t instanceof $u)return new xu(n,Ua.V5,Zi.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zi.Schema}isRecordBatch(){return this.headerType===Zi.RecordBatch}isDictionaryBatch(){return this.headerType===Zi.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=kl(t)}}class Jo{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=kl(t)}}class $u{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=kl(n)}}class Au{constructor(t,n){this.offset=kl(t),this.length=kl(n)}}class Zf{constructor(t,n){this.length=kl(t),this.nullCount=kl(n)}}function qFt(e,t){return()=>{switch(t){case Zi.Schema:return er.fromJSON(e);case Zi.RecordBatch:return Jo.fromJSON(e);case Zi.DictionaryBatch:return $u.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Zi[t]}, type: ${t} }`)}}function KFt(e,t){return()=>{switch(t){case Zi.Schema:return er.decode(e.header(new iu),new Map,e.version());case Zi.RecordBatch:return Jo.decode(e.header(new Tc),e.version());case Zi.DictionaryBatch:return $u.decode(e.header(new um),e.version())}throw new Error(`Unrecognized Message type: { name: ${Zi[t]}, type: ${t} }`)}}vr.encode=szt;vr.decode=azt;vr.fromJSON=XFt;er.encode=ozt;er.decode=ZFt;er.fromJSON=GFt;Jo.encode=lzt;Jo.decode=JFt;Jo.fromJSON=Zat;$u.encode=uzt;$u.decode=QFt;$u.fromJSON=HFt;Zf.encode=czt;Zf.decode=ezt;Au.encode=hzt;Au.decode=tzt;function ZFt(e,t=new Map,n=Ua.V5){const r=izt(e,t);return new er(r,xM(e),t,n)}function JFt(e,t=Ua.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Jo(e.length(),nzt(e),rzt(e,t))}function QFt(e,t=Ua.V5){return new $u(Jo.decode(e.data(),t),e.id(),e.isDelta())}function tzt(e){return new Au(e.offset(),e.length())}function ezt(e){return new Zf(e.length(),e.nullCount())}function nzt(e){const t=[];for(let n,r=-1,i=-1,a=e.nodesLength();++r<a;)(n=e.nodes(r))&&(t[++i]=Zf.decode(n));return t}function rzt(e,t){const n=[];for(let r,i=-1,a=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ua.V4&&(r.bb_pos+=8*(i+1)),n[++a]=Au.decode(r));return n}function izt(e,t){const n=[];for(let r,i=-1,a=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++a]=vr.decode(r,t));return n}function Q9(e,t){const n=[];for(let r,i=-1,a=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++a]=vr.decode(r,t));return n}function azt(e,t){let n,r,i,a,o,s;return!t||!(s=e.dictionary())?(i=e7(e,Q9(e,t)),r=new vr(e.name(),i,e.nullable(),xM(e))):t.has(n=kl(s.id()))?(a=(a=s.indexType())?t7(a):new $f,o=new jf(t.get(n),a,n,s.isOrdered()),r=new vr(e.name(),o,e.nullable(),xM(e))):(a=(a=s.indexType())?t7(a):new $f,t.set(n,i=e7(e,Q9(e,t))),o=new jf(i,a,n,s.isOrdered()),r=new vr(e.name(),o,e.nullable(),xM(e))),r||null}function xM(e){const t=new Map;if(e)for(let n,r,i=-1,a=Math.trunc(e.customMetadataLength());++i<a;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function t7(e){return new Za(e.isSigned(),e.bitWidth())}function e7(e,t){const n=e.typeType();switch(n){case Fr.NONE:return new rh;case Fr.Null:return new rh;case Fr.Binary:return new jb;case Fr.Utf8:return new Ay;case Fr.Bool:return new Yb;case Fr.List:return new Dy((t||[])[0]);case Fr.Struct_:return new ba(t||[])}switch(n){case Fr.Int:{const r=e.type(new Wo);return new Za(r.isSigned(),r.bitWidth())}case Fr.FloatingPoint:{const r=e.type(new yu);return new Xf(r.precision())}case Fr.Decimal:{const r=e.type(new uo);return new KA(r.scale(),r.precision(),r.bitWidth())}case Fr.Date:{const r=e.type(new gM);return new Cy(r.unit())}case Fr.Time:{const r=e.type(new As);return new ih(r.unit(),r.bitWidth())}case Fr.Timestamp:{const r=e.type(new Cs);return new ZA(r.unit(),r.timezone())}case Fr.Interval:{const r=e.type(new _u);return new Ey(r.unit())}case Fr.Duration:{const r=e.type(new vu);return new JA(r.unit())}case Fr.Union:{const r=e.type(new po);return new qb(r.mode(),r.typeIdsArray()||[],t||[])}case Fr.FixedSizeBinary:{const r=e.type(new gu);return new QA(r.byteWidth())}case Fr.FixedSizeList:{const r=e.type(new mu);return new Iy(r.listSize(),(t||[])[0])}case Fr.Map:{const r=e.type(new mM);return new Kb((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Fr[n]}" (${n})`)}function ozt(e,t){const n=t.fields.map(a=>vr.encode(e,a));iu.startFieldsVector(e,n.length);const r=iu.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?iu.createCustomMetadataVector(e,[...t.metadata].map(([a,o])=>{const s=e.createString(`${a}`),l=e.createString(`${o}`);return Mi.startKeyValue(e),Mi.addKey(e,s),Mi.addValue(e,l),Mi.endKeyValue(e)})):-1;return iu.startSchema(e),iu.addFields(e,r),iu.addEndianness(e,fzt?Py.Little:Py.Big),i!==-1&&iu.addCustomMetadata(e,i),iu.endSchema(e)}function szt(e,t){let n=-1,r=-1,i=-1;const a=t.type;let o=t.typeId;on.isDictionary(a)?(o=a.dictionary.typeId,i=rP.visit(a,e),r=rP.visit(a.dictionary,e)):r=rP.visit(a,e);const s=(a.children||[]).map(c=>vr.encode(e,c)),l=ps.createChildrenVector(e,s),u=t.metadata&&t.metadata.size>0?ps.createCustomMetadataVector(e,[...t.metadata].map(([c,h])=>{const f=e.createString(`${c}`),d=e.createString(`${h}`);return Mi.startKeyValue(e),Mi.addKey(e,f),Mi.addValue(e,d),Mi.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ps.startField(e),ps.addType(e,r),ps.addTypeType(e,o),ps.addChildren(e,l),ps.addNullable(e,!!t.nullable),n!==-1&&ps.addName(e,n),i!==-1&&ps.addDictionary(e,i),u!==-1&&ps.addCustomMetadata(e,u),ps.endField(e)}function lzt(e,t){const n=t.nodes||[],r=t.buffers||[];Tc.startNodesVector(e,n.length);for(const o of n.slice().reverse())Zf.encode(e,o);const i=e.endVector();Tc.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Au.encode(e,o);const a=e.endVector();return Tc.startRecordBatch(e),Tc.addLength(e,BigInt(t.length)),Tc.addNodes(e,i),Tc.addBuffers(e,a),Tc.endRecordBatch(e)}function uzt(e,t){const n=Jo.encode(e,t.data);return um.startDictionaryBatch(e),um.addId(e,BigInt(t.id)),um.addIsDelta(e,t.isDelta),um.addData(e,n),um.endDictionaryBatch(e)}function czt(e,t){return Kat.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function hzt(e,t){return qat.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const fzt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),_3="ARROW1",Yz=new Uint8Array(_3.length);for(let e=0;e<_3.length;e+=1)Yz[e]=_3.codePointAt(e);Yz.length;class ui extends wn{static assemble(...t){const n=i=>i.flatMap(a=>Array.isArray(a)?n(a):a instanceof $o?a.data.children:a.data),r=new ui;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Xn)return this.visitMany(t.data),this;const{type:n}=t;if(!on.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(on.isUnion(n))this.nodes.push(new Zf(r,0));else{const{nullCount:i}=t;on.isNull(n)||Dl.call(this,i<=0?new Uint8Array(0):tC(t.offset,r,t.nullBitmap)),this.nodes.push(new Zf(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Dl(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Au(this._byteLength,t)),this._byteLength+=t,this}function dzt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:a}=e;if(Dl.call(this,i),n.mode===Co.Sparse)return x3.call(this,e);if(n.mode===Co.Dense){if(e.offset<=0)return Dl.call(this,a),x3.call(this,e);{const o=new Int32Array(r),s=Object.create(null),l=Object.create(null);for(let u,c,h=-1;++h<r;)(u=i[h])!==void 0&&((c=s[u])===void 0&&(c=s[u]=a[h]),o[h]=a[h]-c,l[u]=((t=l[u])!==null&&t!==void 0?t:0)+1);Dl.call(this,o),this.visitMany(e.children.map((u,c)=>{const h=n.typeIds[c],f=s[h],d=l[h];return u.slice(f,Math.min(r,d))}))}}return this}function pzt(e){let t;return e.nullCount>=e.length?Dl.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Dl.call(this,tC(e.offset,e.length,t)):Dl.call(this,lat(e.values))}function Ch(e){return Dl.call(this,e.values.subarray(0,e.length*e.stride))}function tot(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:a}=r,o=Math.min(a-i,n.byteLength-i);return Dl.call(this,nit(-i,t+1,r)),Dl.call(this,n.subarray(i,i+o)),this}function qz(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Dl.call(this,nit(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function x3(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ui.prototype.visitBool=pzt;ui.prototype.visitInt=Ch;ui.prototype.visitFloat=Ch;ui.prototype.visitUtf8=tot;ui.prototype.visitBinary=tot;ui.prototype.visitFixedSizeBinary=Ch;ui.prototype.visitDate=Ch;ui.prototype.visitTimestamp=Ch;ui.prototype.visitTime=Ch;ui.prototype.visitDecimal=Ch;ui.prototype.visitList=qz;ui.prototype.visitStruct=x3;ui.prototype.visitUnion=dzt;ui.prototype.visitInterval=Ch;ui.prototype.visitDuration=Ch;ui.prototype.visitFixedSizeList=qz;ui.prototype.visitMap=qz;class eot extends Mat{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new eP,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,pd(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return jE(t)?t.then(n=>this.writeAll(n)):YE(t)?Qz(this,t):Jz(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof eP?this._sink=t:(this._sink=new eP,t&&xBt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&bBt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!g3(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof vo&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof $o&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!g3(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof $o?t instanceof UFt||this._writeRecordBatch(t):t instanceof vo?this.writeAll(t.batches):lz(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=xu.encode(t),a=i.byteLength,o=this._writeLegacyIpcFormat?4:8,s=a+o+r&~r,l=s-a-o;return t.headerType===Zi.RecordBatch?this._recordBatchBlocks.push(new qf(s,t.bodyLength,this._position)):t.headerType===Zi.DictionaryBatch&&this._dictionaryBlocks.push(new qf(s,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(s-o)),a>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=ar(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(xu.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Yz)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:a}=ui.assemble(t),o=new Jo(t.numRows,r,i),s=xu.from(o,n);return this._writeDictionaries(t)._writeMessage(s)._writeBodyBuffers(a)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:a,bufferRegions:o,buffers:s}=ui.assemble(new Xn([t])),l=new Jo(t.length,a,o),u=new $u(l,n,r),c=xu.from(u,i);return this._writeMessage(c)._writeBodyBuffers(s)}_writeBodyBuffers(t){let n,r,i;for(let a=-1,o=t.length;++a<o;)(n=t[a])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const a of r.data)this._writeDictionaryBatch(a,n,i>0),i+=a.length}return this}}class Kz extends eot{static writeAll(t,n){const r=new Kz(n);return jE(t)?t.then(i=>r.writeAll(i)):YE(t)?Qz(r,t):Jz(r,t)}}class Zz extends eot{static writeAll(t){const n=new Zz;return jE(t)?t.then(r=>n.writeAll(r)):YE(t)?Qz(n,t):Jz(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=v3.encode(new v3(t,Ua.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Jz(e,t){let n=t;t instanceof vo&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Qz(e,t){var n,r,i,a,o,s,l;return Ic(this,void 0,void 0,function*(){try{for(n=!0,r=Wx(t);i=yield r.next(),a=i.done,!a;n=!0){l=i.value,n=!1;const u=l;e.write(u)}}catch(u){o={error:u}}finally{try{!n&&!a&&(s=r.return)&&(yield s.call(r))}finally{if(o)throw o.error}}return e.finish()})}function vzt(e,t="stream"){return(t==="stream"?Kz:Zz).writeAll(e).toUint8Array(!0)}function tU(e,t=1){return(e*t+63&-64||64)/t}function Jf(e,t,n=e.BYTES_PER_ELEMENT){return new e(tU(t,n))}function eU(e){return e instanceof ir?e:new ir(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function gzt(e){return new Xn([eU(e)])}const nU=new TextEncoder;function mzt(e,t,n){const r=nU.encode(n);return e.set(r,t),r.length}function yzt(e,t,n){return nU.encodeInto(n,e.subarray(t)).written}const _zt=nU.encodeInto?yzt:mzt;function n7(e,t){const n=Jf(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function xzt(e,t){const n=Jf(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function bzt(e,t){const n=Jf(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Szt(e,t){const n=Jf(e.ArrayType,t<<1);return{set(r,i){const a=i<<1;n[a]=r%4294967296|0,n[a+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function wzt(e){const t=uC({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function Tzt(e,t,n){const r=Jf(Int32Array,t+1),i=Jf(Uint8Array,3*n);let a=0;return{set(o,s){a+=_zt(i,a,o),r[s+1]=a},data:()=>{const o=tU(a),s=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,s]}}}}function Mzt(e,t){const n=[],r=Jf(e.indices.ArrayType,t),i=Object.create(null);let a=-1,o=0;return{set(s,l){const u=String(s);let c=i[u];c===void 0&&(o+=u.length,i[u]=c=++a,n.push(u)),r[l]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Azt(e.dictionary,n,o)})}}function Azt(e,t,n){const r=Tzt(e,t.length,n);return t.forEach(r.set),gzt(r.data())}function Czt(e,t){const n=Jf(Uint8Array,t/8);let r=0;return{set(i,a){i==null?++r:(e.set(i,a),n[a>>3]|=1<<a%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Ezt(e,t,n=!0){let r;switch(e.typeId){case q.Int:r=e.bitWidth<64?n7:null;break;case q.Float:r=e.precision>0?n7:null;break;case q.Dictionary:r=e.dictionary.typeId===q.Utf8&&e.indices.typeId===q.Int&&e.indices.bitWidth<64?Mzt:null;break;case q.Bool:r=xzt;break;case q.Date:r=e.unit?Szt:bzt;break}return r==null?wzt(e):n?Czt(r(e,t),t):r(e,t)}function Dzt(e,t){const n=e.length,r=tU(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),eU({type:t,length:n,buffers:[null,i]})}function not(e,t,n,r,i=!0){const a=Ezt(r,e,i);return t(n,a.set),eU(a.data())}function rU(e){if(e instanceof on||e==null)return e;switch(e){case q.Binary:return new jb;case q.Bool:return new Yb;case q.DateDay:return new BBt;case q.DateMillisecond:case q.Date:return new kBt;case q.Dictionary:return new jf(new Ay,new $f);case q.Float16:return new Tit;case q.Float32:return new yz;case q.Float64:case q.Float:return new _z;case q.Int8:return new hz;case q.Int16:return new fz;case q.Int32:case q.Int:return new $f;case q.Int64:return new dz;case q.IntervalDayTime:return new GBt;case q.Interval:case q.IntervalYearMonth:return new HBt;case q.Null:return new rh;case q.TimeMicrosecond:return new UBt;case q.TimeMillisecond:case q.Time:return new zBt;case q.TimeNanosecond:return new VBt;case q.TimeSecond:return new FBt;case q.Uint8:return new pz;case q.Uint16:return new vz;case q.Uint32:return new gz;case q.Uint64:return new mz;case q.Utf8:return new Ay;default:_n(`Unsupported type code: ${Uu(e)}. Use a data type constructor instead?`)}}function Izt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function rot(e,t){const n=b3();return e(t,n.add),n}function b3(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(nh(t))++e.dates,Izt(t)&&++e.utcdays;else if(zp(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=b3());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=b3())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return rU(Lzt(e))}};return e}function Lzt(e){const t=e.count-e.nulls;if(t===0)return q.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?q.Float64:n<128?q.Int8:n<32768?q.Int16:q.Int32:n>=2**32?q.Float64:n<256?q.Uint8:n<65536?q.Uint16:q.Uint32}else{if(e.nums===t)return q.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?q.Int64:_n(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?q.Uint64:_n(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return q.Bool;if(e.utcdays===t)return q.DateDay;if(e.dates===t)return q.DateMillisecond;if(e.arrays===t){const n=vr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new Iy(e.minlen,n):new Dy(n)}else if(e.structs===t){const n=e.struct_prof;return new ba(Object.keys(n).map(r=>vr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return q.Dictionary;_n("Type inference failure")}}}}function Pzt(e,t,n,r,i,a=!0){if(i=rU(i),!i){const o=rot(r,t);a=o.nulls>0,i=o.type()}return not(n,r,t,i,a)}function Rzt(e,t,n,r,i,a=!0){i=rU(i);const o=e.column(t),s=!(e.isFiltered()||e.isOrdered()),l=Ozt(o);if(l&&s&&r7(l.type,i))return l;const u=o.data;if(V1(u)){const c=Nzt(u);if(s&&c&&r7(c,i))return Dzt(u,c);i=i||c,a=!1}if(!i){const c=rot(r,o);a=c.nulls>0,i=c.type()}return not(n,r,o,i,a)}function Ozt(e){return e instanceof Xn?e:e.vector instanceof Xn?e.vector:null}function Nzt(e){const n={Float32Array:yz,Float64Array:_z,Int8Array:hz,Int16Array:fz,Int32Array:$f,Uint8Array:pz,Uint16Array:vz,Uint32Array:gz,BigInt64Array:dz,BigUint64Array:mz}[e.constructor.name];return n?new n:null}function r7(e,t){return!e||!t?!0:e.compareTo(t)}function Bzt(e,t,n){const r=Math.min(e.length,n+t);return(i,a)=>{for(let o=n;o<r;++o)a(e[o][i],o)}}function kzt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,a)=>{let o=-1;r&&zp(i.data)?i.data.forEach(a):e.scan(s=>a(i.get(s),++o),!0,t,n)}}const Fzt=()=>_n("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function zzt(){try{return vo}catch{Fzt()}}function iot(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:a,scan:o}=Uzt(e,t),s={};i.forEach(u=>{const c=r(e,u,a,o,n[u]);c.length!==a&&_n("Column length mismatch"),s[u]=c});const l=zzt();return new l(s)}function Uzt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,a=Lr(n)?n(e):$n(n)?n:null;if($n(e))return{dataFrom:Pzt,names:a||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:Bzt(e,r,i)};if(Vzt(e))return{dataFrom:Rzt,names:a||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:kzt(e,r,i)};_n("Unsupported input data type")}function Vzt(e){return e&&Lr(e.reify)}function Gzt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return vzt(iot(e,r),n)}function Hzt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Wzt(e,t={}){let n=0,r=0,i=0,a=0,o=0,s=0;return e(l=>{if(++n,l==null){++r;return}const u=typeof l;if(u==="object"&&nh(l))++i,Hzt(l)&&++a;else if(u==="number"&&(++o,l===l&&(l|0)!==l)){const c=l+"",h=c.indexOf(".");if(h>=0){const f=c.indexOf("e"),d=f>0?f:c.length;s=Math.max(s,d-h-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===a,digits:Math.min(s,t.maxdigits||6)}}}function r2(e,t){return Lr(t)?t(e):t||e.columnNames()}function aot(e,t,n){const r=n.format||{},i=n.align||{},a={},o={};return t.forEach(s=>{const l=Wzt($zt(e,s),n);o[s]=i[s]||l.align,a[s]=r[s]||l.format}),{align:o,format:a}}function $zt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function iU(e,t,n=100,r,i){const a=e.data(),o=t.length;e.scan(s=>{i.row(s);for(let l=0;l<o;++l){const u=t[l];i.cell(a[t[l]].get(s),u,l)}},!0,n,r)}function Xzt(e,t={}){const n=r2(e,t.columns),r=t.format||{},i=t.delimiter||",",a=new RegExp(`["${i}
\r]`),o=u=>u==null?"":nh(u)?$E(u,!0):a.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,s=n.map(o);let l="";return iU(e,n,t.limit||1/0,t.offset,{row(){l+=s.join(i)+`
`},cell(u,c,h){s[h]=o(r[c]?r[c](u):u)}}),l+s.join(i)}function oot(e,t={}){if(Lr(t))return t(e)+"";const n=typeof e;if(n==="object"){if(nh(e))return t.utc?$E(e):Ert(e);{const r=JSON.stringify(e,(a,o)=>V1(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function i2(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function jzt(e,t={}){const n=r2(e,t.columns),{align:r,format:i}=aot(e,n,t),a=Yzt(t),o=t.null,s=v=>v==="c"?"center":v==="r"?"right":"left",l=v=>v.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(v,g)=>l(oot(v,g)),c=o?(v,g)=>v==null?o(v):u(v,g):u;let h=-1,f=-1;const d=(v,g,m)=>{const _=m?s(r[g]):"",y=a[v]&&a[v](g,f,h)||"",x=(_?`text-align: ${_};`+(y?" ":""):"")+y;return`<${v}${x?` style="${x}"`:""}>`};let p=d("table")+d("thead")+d("tr",h)+n.map(v=>`${d("th",v,1)}${v}</th>`).join("")+"</tr></thead>"+d("tbody");return iU(e,n,t.limit,t.offset,{row(v){h=v,p+=(++f?"</tr>":"")+d("tr")},cell(v,g){p+=d("td",g,1)+c(v,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function Yzt(e){return i2(e.style,t=>Lr(t)?t:()=>t)}function qzt(e,t=!0,n=!1){return e===void 0||e?t:n}const Kzt=e=>nh(e)?$E(e,!0):e;function Zzt(e,t={}){const n=qzt(t.schema),r=t.format||{},i=r2(e,t.columns);let a="{";return n&&(a+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,s)=>{a+=(s?",":"")+JSON.stringify(o)+":[";const l=e.column(o),u=r[o]||Kzt;let c=-1;e.scan(h=>{const f=l.get(h);a+=(++c?",":"")+JSON.stringify(u(f))},!0,t.limit,t.offset),a+="]"}),a+"}"+(n?"}":"")}function Jzt(e,t={}){const n=r2(e,t.columns),{align:r,format:i}=aot(e,n,t),a=l=>l==="c"?":-:":l==="r"?"-:":":-",o=l=>l.replace(/\|/g,"\\|");let s="|"+n.map(o).join("|")+`|
|`+n.map(l=>a(r[l])).join("|")+"|";return iU(e,n,t.limit,t.offset,{row(){s+=`
|`},cell(l,u){s+=o(oot(l,i[u]))+"|"}}),s+`
`}function sot(e,t){for(const[n,r]of XE(t))e.set(n,r);return e}function Qzt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ah(e,t,n=new Map){return t=Ka(t)?e.columnName(t):t,fa(t)?n.set(t,t):$n(t)?t.forEach(r=>ah(e,r,n)):Lr(t)?ah(e,t(e),n):Ea(t)?sot(n,t):_n(`Invalid column selection: ${Uu(t)}`),n}function a2(e,t){return e.toObject=t,e}function lot(e){return $n(e)?e.map(lot):e&&e.toObject?e.toObject():e}function Ry(){return a2(e=>e.columnNames(),()=>({all:[]}))}function uot(...e){return e=e.flat(),a2(t=>{const n=ah(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:lot(e)}))}function tUt(e,t){return a2(n=>{let r=Ka(e)?e:n.columnIndex(e),i=Ka(t)?t:n.columnIndex(t);if(i<r){const a=i;i=r,r=a}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function eUt(e){return fa(e)&&(e=RegExp(Qzt(e))),a2(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function nUt(e){return V1(e.data)?e.data.constructor:Array}class pf extends _3t{static from(t,n){return new pf(S3t(t,n),n)}static new(t,n){if(t instanceof pf)return t;const r={},i=[];for(const[a,o]of XE(t))r[a]=o,i.push(a);return new pf(r,n||i)}constructor(t,n,r,i,a,o){i2(t,b3t,t),n=n||Object.keys(t);const s=n.length?t[n[0]].length:0;super(n,s,t,r,i,a,o)}create({data:t,names:n,filter:r,groups:i,order:a}){const o=r!==void 0?r:this.mask();return new pf(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Z3t(this._group,r&&o),a!==void 0?a:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ts(r).groupby(r.groups());return t.forEach(a=>{a=pf.new(a),a.numRows()!==n&&_n("Assign row counts do not match"),a=a.reify(),a.columnNames(o=>i.add(o,a.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let a=-1;return this.scan(o=>i[++a]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):_n(`Unrecognized column: ${t}`)}object(t=0){return i7(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,a=ah(this,t.columns||Ry()),o=Qrt(a),s=[];if(this.scan((l,u)=>s.push(o(l,u)),!0,r,i),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,r,i),Q3t(this,l,s,n)}return s}*[Symbol.iterator](){const t=i7(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,a;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?l=>t.forEach(l):l=>this.scan(l,!0),s=r.length;i={};for(let l=0;l<s;++l){const u=r[l],c=this.column(u),h=i[u]=new(nUt(c))(n);let f=-1;o(d=>h[++f]=c.get(d))}this.isGrouped()&&(a=J3t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:a,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return iot(this,t)}toArrowBuffer(t){return Gzt(this,t)}toCSV(t){return Xzt(this,t)}toHTML(t){return jzt(this,t)}toJSON(t){return Zzt(this,t)}toMarkdown(t){return Jzt(this,t)}}function i7(e){let t=e._builder;if(!t){const n=Qrt(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=a=>n(i[a],r)}else t=i=>n(i,r);e._builder=t}return t}class rUt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function kn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const a=iUt[e.type];a&&a(e,t,n)}const Ww=(e,t,n)=>{kn(e.argument,t,n,e)},iP=(e,t,n)=>{kn(e.left,t,n,e),kn(e.right,t,n,e)},a7=(e,t,n)=>{kn(e.test,t,n,e),kn(e.consequent,t,n,e),e.alternate&&kn(e.alternate,t,n,e)},aP=(e,t,n)=>{au(e.params,t,n,e),kn(e.body,t,n,e)},o7=(e,t,n)=>{kn(e.callee,t,n,e),au(e.arguments,t,n,e)},au=(e,t,n,r)=>{e.forEach(i=>kn(i,t,n,r))},iUt={TemplateLiteral:(e,t,n)=>{au(e.expressions,t,n,e),au(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{kn(e.object,t,n,e),kn(e.property,t,n,e)},CallExpression:o7,NewExpression:o7,ArrayExpression:(e,t,n)=>{au(e.elements,t,n,e)},AssignmentExpression:iP,AwaitExpression:Ww,BinaryExpression:iP,LogicalExpression:iP,UnaryExpression:Ww,UpdateExpression:Ww,ConditionalExpression:a7,ObjectExpression:(e,t,n)=>{au(e.properties,t,n,e)},Property:(e,t,n)=>{kn(e.key,t,n,e),kn(e.value,t,n,e)},ArrowFunctionExpression:aP,FunctionExpression:aP,FunctionDeclaration:aP,VariableDeclaration:(e,t,n)=>{au(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{kn(e.id,t,n,e),kn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{kn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{au(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{kn(e.expression,t,n,e)},IfStatement:a7,ForStatement:(e,t,n)=>{kn(e.init,t,n,e),kn(e.test,t,n,e),kn(e.update,t,n,e),kn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{kn(e.test,t,n,e),kn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{kn(e.body,t,n,e),kn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{kn(e.discriminant,t,n,e),au(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&kn(e.test,t,n,e),au(e.consequent,t,n,e)},ReturnStatement:Ww,Program:(e,t,n)=>{kn(e.body[0],t,n,e)}};function cot(e){delete e.start,delete e.end,delete e.optional}function s7(e){cot(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function aUt(e){return kn(e,null,{Column:s7,Constant:s7,Default:cot}),e}function Ai(e,t){return t&&t.type===e}function oUt(e){return Ai(nBt,e)||Ai(eBt,e)}function sUt(e){return Lr(e)?e:()=>e}const lUt="Escaped functions are not valid as rollup or pivot values.";function uUt(e,t,n){e.aggronly&&_n(lUt);const r="(row,data)=>fn("+Jrt(e.table.columnNames())+",$)";return{escape:oz.escape(r,sUt(t.expr),n)}}var cUt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],hot=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],hUt="-----------------------------------------------------------------------------------------------------------------------------------------------------",fot="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",oP={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},sP="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",fUt={5:sP,"5module":sP+" export import",6:sP+" const class extends export import super"},dUt=/^in(stanceof)?$/,pUt=new RegExp("["+fot+"]"),vUt=new RegExp("["+fot+hUt+"]");function S3(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function oh(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&pUt.test(String.fromCharCode(e)):t===!1?!1:S3(e,hot)}function Oy(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&vUt.test(String.fromCharCode(e)):t===!1?!1:S3(e,hot)||S3(e,cUt)}var Un=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ls(e,t){return new Un(e,{beforeExpr:!0,binop:t})}var us={beforeExpr:!0},oo={startsExpr:!0},aU={};function Rn(e,t){return t===void 0&&(t={}),t.keyword=e,aU[e]=new Un(e,t)}var z={num:new Un("num",oo),regexp:new Un("regexp",oo),string:new Un("string",oo),name:new Un("name",oo),privateId:new Un("privateId",oo),eof:new Un("eof"),bracketL:new Un("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Un("]"),braceL:new Un("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Un("}"),parenL:new Un("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Un(")"),comma:new Un(",",us),semi:new Un(";",us),colon:new Un(":",us),dot:new Un("."),question:new Un("?",us),questionDot:new Un("?."),arrow:new Un("=>",us),template:new Un("template"),invalidTemplate:new Un("invalidTemplate"),ellipsis:new Un("...",us),backQuote:new Un("`",oo),dollarBraceL:new Un("${",{beforeExpr:!0,startsExpr:!0}),eq:new Un("=",{beforeExpr:!0,isAssign:!0}),assign:new Un("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Un("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Un("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ls("||",1),logicalAND:ls("&&",2),bitwiseOR:ls("|",3),bitwiseXOR:ls("^",4),bitwiseAND:ls("&",5),equality:ls("==/!=/===/!==",6),relational:ls("</>/<=/>=",7),bitShift:ls("<</>>/>>>",8),plusMin:new Un("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ls("%",10),star:ls("*",10),slash:ls("/",10),starstar:new Un("**",{beforeExpr:!0}),coalesce:ls("??",1),_break:Rn("break"),_case:Rn("case",us),_catch:Rn("catch"),_continue:Rn("continue"),_debugger:Rn("debugger"),_default:Rn("default",us),_do:Rn("do",{isLoop:!0,beforeExpr:!0}),_else:Rn("else",us),_finally:Rn("finally"),_for:Rn("for",{isLoop:!0}),_function:Rn("function",oo),_if:Rn("if"),_return:Rn("return",us),_switch:Rn("switch"),_throw:Rn("throw",us),_try:Rn("try"),_var:Rn("var"),_const:Rn("const"),_while:Rn("while",{isLoop:!0}),_with:Rn("with"),_new:Rn("new",{beforeExpr:!0,startsExpr:!0}),_this:Rn("this",oo),_super:Rn("super",oo),_class:Rn("class",oo),_extends:Rn("extends",us),_export:Rn("export"),_import:Rn("import",oo),_null:Rn("null",oo),_true:Rn("true",oo),_false:Rn("false",oo),_in:Rn("in",{beforeExpr:!0,binop:7}),_instanceof:Rn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Rn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Rn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Rn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Js=/\r\n?|\n|\u2028|\u2029/,gUt=new RegExp(Js.source,"g");function D0(e){return e===10||e===13||e===8232||e===8233}function dot(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(D0(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var pot=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Es=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,vot=Object.prototype,mUt=vot.hasOwnProperty,yUt=vot.toString,Y1=Object.hasOwn||function(e,t){return mUt.call(e,t)},l7=Array.isArray||function(e){return yUt.call(e)==="[object Array]"},u7=Object.create(null);function Cf(e){return u7[e]||(u7[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Qf(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var _Ut=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Zb=function(t,n){this.line=t,this.column=n};Zb.prototype.offset=function(t){return new Zb(this.line,this.column+t)};var o2=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function got(e,t){for(var n=1,r=0;;){var i=dot(e,r,t);if(i<0)return new Zb(n,t-r);++n,r=i}}var w3={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},c7=!1;function xUt(e){var t={};for(var n in w3)t[n]=e&&Y1(e,n)?e[n]:w3[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!c7&&typeof console=="object"&&console.warn&&(c7=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),l7(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return l7(t.onComment)&&(t.onComment=bUt(t,t.onComment)),t}function bUt(e,t){return function(n,r,i,a,o,s){var l={type:n?"Block":"Line",value:r,start:i,end:a};e.locations&&(l.loc=new o2(this,o,s)),e.ranges&&(l.range=[i,a]),t.push(l)}}var Jb=1,I0=2,oU=4,mot=8,yot=16,_ot=32,sU=64,xot=128,q1=256,lU=Jb|I0|q1;function uU(e,t){return I0|(e?oU:0)|(t?mot:0)}var dC=0,cU=1,Eh=2,bot=3,Sot=4,wot=5,Vi=function(t,n,r){this.options=t=xUt(t),this.sourceFile=t.sourceFile,this.keywords=Cf(fUt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=oP[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Cf(i);var a=(i?i+" ":"")+oP.strict;this.reservedWordsStrict=Cf(a),this.reservedWordsStrictBind=Cf(a+" "+oP.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Js).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(Jb),this.regexpState=null,this.privateNameStack=[]},ec={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Vi.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ec.inFunction.get=function(){return(this.currentVarScope().flags&I0)>0};ec.inGenerator.get=function(){return(this.currentVarScope().flags&mot)>0&&!this.currentVarScope().inClassFieldInit};ec.inAsync.get=function(){return(this.currentVarScope().flags&oU)>0&&!this.currentVarScope().inClassFieldInit};ec.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&q1)return!1;if(t.flags&I0)return(t.flags&oU)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ec.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&sU)>0||n||this.options.allowSuperOutsideMethod};ec.allowDirectSuper.get=function(){return(this.currentThisScope().flags&xot)>0};ec.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ec.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(I0|q1))>0||n};ec.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&q1)>0};Vi.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Vi.parse=function(t,n){return new this(n,t).parse()};Vi.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Vi.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Vi.prototype,ec);var eo=Vi.prototype,SUt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;eo.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Es.lastIndex=e,e+=Es.exec(this.input)[0].length;var t=SUt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Es.lastIndex=e+t[0].length;var n=Es.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Js.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Es.lastIndex=e,e+=Es.exec(this.input)[0].length,this.input[e]===";"&&e++}};eo.eat=function(e){return this.type===e?(this.next(),!0):!1};eo.isContextual=function(e){return this.type===z.name&&this.value===e&&!this.containsEsc};eo.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};eo.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};eo.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||Js.test(this.input.slice(this.lastTokEnd,this.start))};eo.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};eo.semicolon=function(){!this.eat(z.semi)&&!this.insertSemicolon()&&this.unexpected()};eo.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};eo.expect=function(e){this.eat(e)||this.unexpected()};eo.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var s2=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};eo.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};eo.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};eo.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};eo.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Se=Vi.prototype;Se.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==z.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var a=i[r];this.raiseRecoverable(this.undefinedExports[a].start,"Export '"+a+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var hU={kind:"loop"},wUt={kind:"switch"};Se.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Es.lastIndex=this.pos;var t=Es.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(oh(r,!0)){for(var i=n+1;Oy(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var a=this.input.slice(n,i);if(!dUt.test(a))return!0}return!1};Se.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Es.lastIndex=this.pos;var e=Es.exec(this.input),t=this.pos+e[0].length,n;return!Js.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Oy(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Se.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),a;switch(this.isLet(e)&&(r=z._var,a="let"),r){case z._break:case z._continue:return this.parseBreakContinueStatement(i,r.keyword);case z._debugger:return this.parseDebuggerStatement(i);case z._do:return this.parseDoStatement(i);case z._for:return this.parseForStatement(i);case z._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case z._class:return e&&this.unexpected(),this.parseClass(i,!0);case z._if:return this.parseIfStatement(i);case z._return:return this.parseReturnStatement(i);case z._switch:return this.parseSwitchStatement(i);case z._throw:return this.parseThrowStatement(i);case z._try:return this.parseTryStatement(i);case z._const:case z._var:return a=a||this.value,e&&a!=="var"&&this.unexpected(),this.parseVarStatement(i,a);case z._while:return this.parseWhileStatement(i);case z._with:return this.parseWithStatement(i);case z.braceL:return this.parseBlock(!0,i);case z.semi:return this.parseEmptyStatement(i);case z._export:case z._import:if(this.options.ecmaVersion>10&&r===z._import){Es.lastIndex=this.pos;var o=Es.exec(this.input),s=this.pos+o[0].length,l=this.input.charCodeAt(s);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===z._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var u=this.value,c=this.parseExpression();return r===z.name&&c.type==="Identifier"&&this.eat(z.colon)?this.parseLabeledStatement(i,u,c,e):this.parseExpressionStatement(i,c)}};Se.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(z.semi)||this.insertSemicolon()?e.label=null:this.type!==z.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Se.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Se.parseDoStatement=function(e){return this.next(),this.labels.push(hU),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Se.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(hU),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===z._var||this.type===z._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var a=this.isContextual("let"),o=!1,s=new s2,l=this.parseExpression(t>-1?"await":!0,s);return this.type===z._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),a&&o&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,s),this.checkLValPattern(l),this.parseForIn(e,l)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,l))};Se.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Xx|(n?0:T3),!1,t)};Se.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Se.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Se.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(z.braceL),this.labels.push(wUt),this.enterScope(0);for(var t,n=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var r=this.type===z._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(z.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Se.parseThrowStatement=function(e){return this.next(),Js.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var TUt=[];Se.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?_ot:0),this.checkLValPattern(e,t?Sot:Eh),this.expect(z.parenR),e};Se.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===z._catch){var t=this.startNode();this.next(),this.eat(z.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(z._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Se.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Se.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(hU),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Se.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Se.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Se.parseLabeledStatement=function(e,t,n,r){for(var i=0,a=this.labels;i<a.length;i+=1){var o=a[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===z._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=s;else break}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Se.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Se.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(z.braceL),e&&this.enterScope(0);this.type!==z.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Se.parseFor=function(e,t){return e.init=t,this.expect(z.semi),e.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),e.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Se.parseForIn=function(e,t){var n=this.type===z._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Se.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(z.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===z._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(z.comma))break}return e};Se.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?cU:Eh,!1)};var Xx=1,T3=2,Tot=4;Se.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===z.star&&t&T3&&this.unexpected(),e.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Xx&&(e.id=t&Tot&&this.type!==z.name?null:this.parseIdent(),e.id&&!(t&T3)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?cU:Eh:bot));var a=this.yieldPos,o=this.awaitPos,s=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uU(e.async,e.generator)),t&Xx||(e.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=a,this.awaitPos=o,this.awaitIdentPos=s,this.finishNode(e,t&Xx?"FunctionDeclaration":"FunctionExpression")};Se.parseFunctionParams=function(e){this.expect(z.parenL),e.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Se.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),a=!1;for(i.body=[],this.expect(z.braceL);this.type!==z.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(a&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),a=!0):o.key&&o.key.type==="PrivateIdentifier"&&MUt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Se.parseClassElement=function(e){if(this.eat(z.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,a=!1,o="method",s=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(z.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===z.star?s=!0:r="static"}if(n.static=s,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===z.star)&&!this.canInsertSemicolon()?a=!0:r="async"),!r&&(t>=9||!a)&&this.eat(z.star)&&(i=!0),!r&&!a&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===z.parenL||o!=="method"||i||a){var u=!n.static&&pC(n,"constructor"),c=u&&e;u&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,a,c)}else this.parseClassField(n);return n};Se.isClassElementNameStart=function(){return this.type===z.name||this.type===z.privateId||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword};Se.parseClassElementName=function(e){this.type===z.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Se.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&pC(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var a=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&a.params.length!==0&&this.raiseRecoverable(a.start,"getter should have no params"),e.kind==="set"&&a.params.length!==1&&this.raiseRecoverable(a.start,"setter should have exactly one param"),e.kind==="set"&&a.params[0].type==="RestElement"&&this.raiseRecoverable(a.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Se.parseClassField=function(e){if(pC(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&pC(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(z.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Se.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(q1|sU);this.type!==z.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Se.parseClassId=function(e,t){this.type===z.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Eh,!1)):(t===!0&&this.unexpected(),e.id=null)};Se.parseClassSuper=function(e){e.superClass=this.eat(z._extends)?this.parseExprSubscripts(null,!1):null};Se.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Se.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],a=0;a<n.length;++a){var o=n[a];Y1(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function MUt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function pC(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Se.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Se.parseExport=function(e,t){if(this.next(),this.eat(z.star))return this.parseExportAllDeclaration(e,t);if(this.eat(z._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Se.parseExportDeclaration=function(e){return this.parseStatement(null)};Se.parseExportDefaultDeclaration=function(){var e;if(this.type===z._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,Xx|Tot,!1,e)}else if(this.type===z._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Se.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Y1(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Se.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var a=i[r];this.checkPatternExport(e,a)}else if(n==="ArrayPattern")for(var o=0,s=t.elements;o<s.length;o+=1){var l=s[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Se.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Se.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Se.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Se.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(n)n=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Se.parseImport=function(e){return this.next(),this.type===z.string?(e.specifiers=TUt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Se.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Eh),this.finishNode(e,"ImportSpecifier")};Se.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Eh),this.finishNode(e,"ImportDefaultSpecifier")};Se.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Eh),this.finishNode(e,"ImportNamespaceSpecifier")};Se.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===z.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(z.comma)))return e;if(this.type===z.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(z.braceL);!this.eat(z.braceR);){if(t)t=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;e.push(this.parseImportSpecifier())}return e};Se.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===z.string){var e=this.parseLiteral(this.value);return _Ut.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Se.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Se.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Qs=Vi.prototype;Qs.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.toAssignable(a,t),a.type==="RestElement"&&(a.argument.type==="ArrayPattern"||a.argument.type==="ObjectPattern")&&this.raise(a.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Qs.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var a=e[n-1];this.options.ecmaVersion===6&&t&&a&&a.type==="RestElement"&&a.argument.type!=="Identifier"&&this.unexpected(a.argument.start)}return e};Qs.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Qs.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==z.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Qs.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()};Qs.parseBindingList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);)if(a?a=!1:this.expect(z.comma),t&&this.type===z.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===z.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Qs.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Qs.parseBindingListItem=function(e){return e};Qs.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Qs.checkLValSimple=function(e,t,n){t===void 0&&(t=dC);var r=t!==dC;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Eh&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Y1(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==wot&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Qs.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=dC),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,t,n)}break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var l=s[o];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};Qs.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=dC),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var ul=function(t,n,r,i,a){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!a},Ur={b_stat:new ul("{",!1),b_expr:new ul("{",!0),b_tmpl:new ul("${",!1),p_stat:new ul("(",!1),p_expr:new ul("(",!0),q_tmpl:new ul("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ul("function",!1),f_expr:new ul("function",!0),f_expr_gen:new ul("function",!0,!1,null,!0),f_gen:new ul("function",!1,!1,null,!0)},L0=Vi.prototype;L0.initialContext=function(){return[Ur.b_stat]};L0.curContext=function(){return this.context[this.context.length-1]};L0.braceIsBlock=function(e){var t=this.curContext();return t===Ur.f_expr||t===Ur.f_stat?!0:e===z.colon&&(t===Ur.b_stat||t===Ur.b_expr)?!t.isExpr:e===z._return||e===z.name&&this.exprAllowed?Js.test(this.input.slice(this.lastTokEnd,this.start)):e===z._else||e===z.semi||e===z.eof||e===z.parenR||e===z.arrow?!0:e===z.braceL?t===Ur.b_stat:e===z._var||e===z._const||e===z.name?!1:!this.exprAllowed};L0.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};L0.updateContext=function(e){var t,n=this.type;n.keyword&&e===z.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};L0.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};z.parenR.updateContext=z.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ur.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};z.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ur.b_stat:Ur.b_expr),this.exprAllowed=!0};z.dollarBraceL.updateContext=function(){this.context.push(Ur.b_tmpl),this.exprAllowed=!0};z.parenL.updateContext=function(e){var t=e===z._if||e===z._for||e===z._with||e===z._while;this.context.push(t?Ur.p_stat:Ur.p_expr),this.exprAllowed=!0};z.incDec.updateContext=function(){};z._function.updateContext=z._class.updateContext=function(e){e.beforeExpr&&e!==z._else&&!(e===z.semi&&this.curContext()!==Ur.p_stat)&&!(e===z._return&&Js.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===z.colon||e===z.braceL)&&this.curContext()===Ur.b_stat)?this.context.push(Ur.f_expr):this.context.push(Ur.f_stat),this.exprAllowed=!1};z.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};z.backQuote.updateContext=function(){this.curContext()===Ur.q_tmpl?this.context.pop():this.context.push(Ur.q_tmpl),this.exprAllowed=!1};z.star.updateContext=function(e){if(e===z._function){var t=this.context.length-1;this.context[t]===Ur.f_expr?this.context[t]=Ur.f_expr_gen:this.context[t]=Ur.f_gen}this.exprAllowed=!0};z.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==z.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Ke=Vi.prototype;Ke.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var a=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&a==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var s;a==="init"?s=this.strict&&o.init||o.get||o.set:s=o.init||o[a],s&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[a]=!0}};Ke.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===z.comma){var a=this.startNodeAt(n,r);for(a.expressions=[i];this.eat(z.comma);)a.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(a,"SequenceExpression")}return i};Ke.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,a=-1,o=-1;t?(i=t.parenthesizedAssign,a=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new s2,r=!0);var s=this.start,l=this.startLoc;(this.type===z.parenL||this.type===z.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,s,l)),this.type.isAssign){var c=this.startNodeAt(s,l);return c.operator=this.value,this.type===z.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===z.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),a>-1&&(t.trailingComma=a),u};Ke.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(z.question)){var a=this.startNodeAt(n,r);return a.test=i,a.consequent=this.parseMaybeAssign(),this.expect(z.colon),a.alternate=this.parseMaybeAssign(e),this.finishNode(a,"ConditionalExpression")}return i};Ke.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Ke.parseExprOp=function(e,t,n,r,i){var a=this.type.binop;if(a!=null&&(!i||this.type!==z._in)&&a>r){var o=this.type===z.logicalOR||this.type===z.logicalAND,s=this.type===z.coalesce;s&&(a=z.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,a,i),f=this.buildBinary(t,n,e,h,l,o||s);return(o&&this.type===z.coalesce||s&&(this.type===z.logicalOR||this.type===z.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};Ke.buildBinary=function(e,t,n,r,i,a){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,a?"LogicalExpression":"BinaryExpression")};Ke.parseMaybeUnary=function(e,t,n,r){var i=this.start,a=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var s=this.startNode(),l=this.type===z.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(s.argument):this.strict&&s.operator==="delete"&&s.argument.type==="Identifier"?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):s.operator==="delete"&&Mot(s.argument)?this.raiseRecoverable(s.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(s,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===z.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==z._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,a);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(z.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,a,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function Mot(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Mot(e.expression)}Ke.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var a=this.parseSubscripts(i,n,r,!1,t);return e&&a.type==="MemberExpression"&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1),e.trailingComma>=a.start&&(e.trailingComma=-1)),a};Ke.parseSubscripts=function(e,t,n,r,i){for(var a=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var s=this.parseSubscript(e,t,n,r,a,o,i);if(s.optional&&(o=!0),s===e||s.type==="ArrowFunctionExpression"){if(o){var l=this.startNodeAt(t,n);l.expression=s,s=this.finishNode(l,"ChainExpression")}return s}e=s}};Ke.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(z.arrow)};Ke.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Ke.parseSubscript=function(e,t,n,r,i,a,o){var s=this.options.ecmaVersion>=11,l=s&&this.eat(z.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(z.bracketL);if(u||l&&this.type!==z.parenL&&this.type!==z.backQuote||this.eat(z.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(z.bracketR)):this.type===z.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,s&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(z.parenL)){var h=new s2,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var v=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,h);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,v,o);this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=v,s&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===z.backQuote){(l||a)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(t,n);m.tag=e,m.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(m,"TaggedTemplateExpression")}return e};Ke.parseExprAtom=function(e,t,n){this.type===z.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===z.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(r,"Super");case z._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case z.name:var a=this.start,o=this.startLoc,s=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(z._function))return this.overrideContext(Ur.f_expr),this.parseFunction(this.startNodeAt(a,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(a,o),[l],!1,t);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===z.name&&!s&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(z.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(a,o),[l],!0,t)}return l;case z.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return r=this.startNode(),r.value=this.type===z._null?null:this.type===z._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case z.parenL:var c=this.start,h=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),h;case z.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(z.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case z.braceL:return this.overrideContext(Ur.b_expr),this.parseObj(!1,e);case z._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();case z._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Ke.parseExprAtomDefault=function(){this.unexpected()};Ke.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===z.parenL&&!e)return this.parseDynamicImport(t);if(this.type===z.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Ke.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(z.parenR)){var t=this.start;this.eat(z.comma)&&this.eat(z.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Ke.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Ke.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Ke.parseParenExpression=function(){this.expect(z.parenL);var e=this.parseExpression();return this.expect(z.parenR),e};Ke.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Ke.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,s=this.startLoc,l=[],u=!0,c=!1,h=new s2,f=this.yieldPos,d=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;)if(u?u=!1:this.expect(z.comma),a&&this.afterTrailingComma(z.parenR,!0)){c=!0;break}else if(this.type===z.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,h,this.parseParenItem));var v=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(z.parenR),e&&this.shouldParseArrow(l)&&this.eat(z.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,r,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,l.length>1?(i=this.startNodeAt(o,s),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",v,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(n,r);return m.expression=i,this.finishNode(m,"ParenthesizedExpression")}else return i};Ke.parseParenItem=function(e){return e};Ke.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var AUt=[];Ke.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===z.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(z.parenL)?e.arguments=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):e.arguments=AUt,this.finishNode(e,"NewExpression")};Ke.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===z.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===z.backQuote,this.finishNode(n,"TemplateElement")};Ke.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(z.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Ke.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!Js.test(this.input.slice(this.lastTokEnd,this.start))};Ke.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(z.braceR);){if(r)r=!1;else if(this.expect(z.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(z.braceR))break;var a=this.parseProperty(e,t);e||this.checkPropClash(a,i,t),n.properties.push(a)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Ke.parseProperty=function(e,t){var n=this.startNode(),r,i,a,o;if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===z.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===z.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(a=this.start,o=this.startLoc),e||(r=this.eat(z.star)));var s=this.containsEsc;return this.parsePropertyName(n),!e&&!s&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,a,o,t,s),this.finishNode(n,"Property")};Ke.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Ke.parsePropertyValue=function(e,t,n,r,i,a,o,s){(n||r)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===z.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!s&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==z.comma&&this.type!==z.braceR&&this.type!==z.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key)):this.type===z.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,a,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Ke.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(z.bracketR),e.key;e.computed=!1}return e.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Ke.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Ke.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uU(t,r.generator)|sU|(n?xot:0)),this.expect(z.parenL),r.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Ke.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(uU(n,!1)|yot),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Ke.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==z.braceL,a=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!a||s)&&(o=this.strictDirective(this.end),o&&s&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!a&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,wot),e.body=this.parseBlock(!1,void 0,o&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};Ke.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Ke.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var a=i[r];this.checkLValInnerPattern(a,cU,t?null:n)}};Ke.parseExprList=function(e,t,n,r){for(var i=[],a=!0;!this.eat(e);){if(a)a=!1;else if(this.expect(z.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===z.comma?o=null:this.type===z.ellipsis?(o=this.parseSpread(r),r&&this.type===z.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Ke.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Ke.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Ke.parseIdentNode=function(){var e=this.startNode();return this.type===z.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=z.name):this.unexpected(),e};Ke.parsePrivateIdent=function(){var e=this.startNode();return this.type===z.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Ke.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(z.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Ke.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var vC=Vi.prototype;vC.raise=function(e,t){var n=got(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};vC.raiseRecoverable=vC.raise;vC.curPosition=function(){if(this.options.locations)return new Zb(this.curLine,this.pos-this.lineStart)};var md=Vi.prototype,CUt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};md.enterScope=function(e){this.scopeStack.push(new CUt(e))};md.exitScope=function(){this.scopeStack.pop()};md.treatFunctionsAsVarInScope=function(e){return e.flags&I0||!this.inModule&&e.flags&Jb};md.declareName=function(e,t,n){var r=!1;if(t===Eh){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&Jb&&delete this.undefinedExports[e]}else if(t===Sot){var a=this.currentScope();a.lexical.push(e)}else if(t===bot){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var l=this.scopeStack[s];if(l.lexical.indexOf(e)>-1&&!(l.flags&_ot&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&Jb&&delete this.undefinedExports[e],l.flags&lU)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};md.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};md.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};md.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&lU)return t}};md.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&lU&&!(t.flags&yot))return t}};var l2=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new o2(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},K1=Vi.prototype;K1.startNode=function(){return new l2(this,this.start,this.startLoc)};K1.startNodeAt=function(e,t){return new l2(this,e,t)};function Aot(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}K1.finishNode=function(e,t){return Aot.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};K1.finishNodeAt=function(e,t,n,r){return Aot.call(this,e,t,n,r)};K1.copyNode=function(e){var t=new l2(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Cot="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Eot=Cot+" Extended_Pictographic",Dot=Eot,Iot=Dot+" EBase EComp EMod EPres ExtPict",Lot=Iot,EUt=Lot,DUt={9:Cot,10:Eot,11:Dot,12:Iot,13:Lot,14:EUt},IUt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",LUt={9:"",10:"",11:"",12:"",13:"",14:IUt},h7="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Pot="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Rot=Pot+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Oot=Rot+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Not=Oot+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Bot=Not+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",PUt=Bot+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",RUt={9:Pot,10:Rot,11:Oot,12:Not,13:Bot,14:PUt},kot={};function OUt(e){var t=kot[e]={binary:Cf(DUt[e]+" "+h7),binaryOfStrings:Cf(LUt[e]),nonBinary:{General_Category:Cf(h7),Script:Cf(RUt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var lP=0,f7=[9,10,11,12,13,14];lP<f7.length;lP+=1){var NUt=f7[lP];OUt(NUt)}var de=Vi.prototype,nc=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=kot[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};nc.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,a=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=a&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=a&&this.parser.options.ecmaVersion>=9)};nc.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};nc.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var a=r.charCodeAt(t);if(!(n||this.switchU)||a<=55295||a>=57344||t+1>=i)return a;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(a<<10)+o-56613888:a};nc.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var a=r.charCodeAt(t),o;return!(n||this.switchU)||a<=55295||a>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};nc.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};nc.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};nc.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};nc.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};nc.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,a=t;i<a.length;i+=1){var o=a[i],s=this.at(r,n);if(s===-1||s!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};de.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,a=0;a<n.length;a++){var o=n.charAt(a);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,a+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};de.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};de.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};de.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};de.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};de.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};de.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};de.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};de.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};de.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};de.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};de.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};de.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};de.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};de.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};de.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};de.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Fot(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Fot(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}de.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Fot(n);)e.advance();return e.pos!==t};de.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};de.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};de.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};de.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Qf(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Qf(e.lastIntValue);return!0}return!1};de.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),BUt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function BUt(e){return oh(e,!0)||e===36||e===95}de.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),kUt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function kUt(e){return Oy(e,!0)||e===36||e===95||e===8204||e===8205}de.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};de.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};de.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};de.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};de.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};de.regexp_eatZero=function(e){return e.current()===48&&!u2(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};de.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};de.regexp_eatControlLetter=function(e){var t=e.current();return zot(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function zot(e){return e>=65&&e<=90||e>=97&&e<=122}de.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var a=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=a,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&FUt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function FUt(e){return e>=0&&e<=1114111}de.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};de.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var Uot=0,sh=1,Os=2;de.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(zUt(t))return e.lastIntValue=-1,e.advance(),sh;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Os&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return Uot};function zUt(e){return e===100||e===68||e===115||e===83||e===119||e===87}de.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),sh}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return Uot};de.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Y1(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};de.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return sh;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Os;e.raise("Invalid property name")};de.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Vot(t=e.current());)e.lastStringValue+=Qf(t),e.advance();return e.lastStringValue!==""};function Vot(e){return zot(e)||e===95}de.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";UUt(t=e.current());)e.lastStringValue+=Qf(t),e.advance();return e.lastStringValue!==""};function UUt(e){return Vot(e)||u2(e)}de.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};de.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Os&&e.raise("Negated character class may contain strings"),!0}return!1};de.regexp_classContents=function(e){return e.current()===93?sh:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),sh)};de.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};de.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||Wot(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};de.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};de.regexp_classSetExpression=function(e){var t=sh,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Os&&(t=Os);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Os&&(t=sh);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Os&&(t=Os)}};de.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};de.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?sh:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};de.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Os&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};de.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};de.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Os&&(t=Os);return t};de.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?sh:Os};de.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&VUt(n)||GUt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function VUt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function GUt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}de.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return HUt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function HUt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}de.regexp_eatClassControlLetter=function(e){var t=e.current();return u2(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};de.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};de.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;u2(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function u2(e){return e>=48&&e<=57}de.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Got(n=e.current());)e.lastIntValue=16*e.lastIntValue+Hot(n),e.advance();return e.pos!==t};function Got(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Hot(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}de.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};de.regexp_eatOctalDigit=function(e){var t=e.current();return Wot(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Wot(e){return e>=48&&e<=55}de.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!Got(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Hot(i),e.advance()}return!0};var fU=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new o2(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Pn=Vi.prototype;Pn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fU(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Pn.getToken=function(){return this.next(),new fU(this)};typeof Symbol<"u"&&(Pn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===z.eof,value:t}}}});Pn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(z.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Pn.readToken=function(e){return oh(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Pn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Pn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=dot(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Pn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!D0(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Pn.skipSpace=function(){t:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(e>8&&e<14||e>=5760&&pot.test(String.fromCharCode(e)))++this.pos;else break t}}};Pn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Pn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))};Pn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(z.assign,2):this.finishOp(z.slash,1)};Pn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?z.star:z.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=z.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(z.assign,n+1):this.finishOp(r,n)};Pn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(z.assign,3)}return this.finishOp(e===124?z.logicalOR:z.logicalAND,2)}return t===61?this.finishOp(z.assign,2):this.finishOp(e===124?z.bitwiseOR:z.bitwiseAND,1)};Pn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)};Pn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Js.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(z.incDec,2):t===61?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)};Pn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(z.assign,n+1):this.finishOp(z.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(z.relational,n))};Pn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(z.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(e===61?z.eq:z.prefix,1)};Pn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(z.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(z.assign,3)}return this.finishOp(z.coalesce,2)}}return this.finishOp(z.question,1)};Pn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),oh(t,!0)||t===92))return this.finishToken(z.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Qf(t)+"'")};Pn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(z.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Qf(e)+"'")};Pn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Pn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Js.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var a=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(a);var s=this.regexpState||(this.regexpState=new nc(this));s.reset(n,i,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(i,o)}catch{}return this.finishToken(z.regexp,{pattern:i,flags:o,value:l})};Pn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,a=this.pos,o=0,s=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),h=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),s===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=c;continue}if(c>=97?h=c-97+10:c>=65?h=c-65+10:c>=48&&c<=57?h=c-48:h=1/0,h>=e)break;s=c,o=o*e+h}return r&&s===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===a||t!=null&&this.pos-a!==t?null:o};function WUt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function $ot(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Pn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=$ot(this.input.slice(t,this.pos)),++this.pos):oh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,n)};Pn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=$ot(this.input.slice(t,this.pos));return++this.pos,oh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),oh(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var a=WUt(this.input.slice(t,this.pos),n);return this.finishToken(z.num,a)};Pn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Pn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(D0(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(z.string,t)};var Xot={};Pn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===Xot)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Pn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Xot;this.raise(e,t)};Pn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===z.template||this.type===z.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(z.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(D0(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Pn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Pn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Qf(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return D0(t)?"":String.fromCharCode(t)}};Pn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Pn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Oy(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var a=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?oh:Oy)(o,r)||this.invalidStringToken(a,"Invalid Unicode escape"),e+=Qf(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Pn.readWord=function(){var e=this.readWord1(),t=z.name;return this.keywords.test(e)&&(t=aU[e]),this.finishToken(t,e)};var $Ut="8.11.3";Vi.acorn={Parser:Vi,version:$Ut,defaultOptions:w3,Position:Zb,SourceLocation:o2,getLineInfo:got,Node:l2,TokenType:Un,tokTypes:z,keywordTypes:aU,TokContext:ul,tokContexts:Ur,isIdentifierChar:Oy,isIdentifierStart:oh,Token:fU,isNewLine:D0,lineBreak:Js,lineBreakG:gUt,nonASCIIwhitespace:pot};function XUt(e,t){return Vi.parse(e,t)}const dU={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},jUt={ecmaVersion:11},d7="$",YUt="d",qUt="d1",KUt="d2",ia=e=>(t,n)=>n.error(t,e+" not allowed"),ZUt=ia("Aggregate function"),JUt=ia("Window function"),QUt="Invalid argument",pU="Invalid column reference",tVt=pU+" (must be input to an aggregate function)",jot="Invalid function call",eVt="Invalid member expression",nVt="Invalid operator parameter",rVt="Invalid param reference",iVt="Invalid variable reference",aVt="Variable not accessible in operator call",oVt="Unsupported variable declaration",sVt="Unsupported destructuring pattern",Yot="Table expressions do not support closures",qot="Use aq.escape(fn) to use a function as-is (including closures)",lVt="use table.params({ name: value }) to define dynamic parameters",uVt="use aq.addFunction(name, fn) to add new op functions",cVt=`
Note: ${Yot}. ${qot}, or ${lVt}.`,Kot=`
Note: ${Yot}. ${qot}, or ${uVt}.`,hVt=`The ${Krt} method is not valid in multi-table expressions.`;function fVt(e,t){const n=dVt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,oUt(r)?(vVt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=qUt),e.scope.add(e.tuple2=KUt),e.scope.add(e.$param=d7)):(e.scope.add(e.tuple=YUt),e.scope.add(e.$param=d7)),kn(r,e,vU),e.root}function dVt(e){try{const t=e.field?pVt(e):$n(e)?Uu(e):e;return XUt(`expr=(${t})`,jUt).body[0].expression.right}catch{_n(`Expression parse error: ${e+""}`)}}function pVt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const vU={FunctionDeclaration:ia("Function definitions"),ForStatement:ia("For loops"),ForOfStatement:ia("For-of loops"),ForInStatement:ia("For-in loops"),WhileStatement:ia("While loops"),DoWhileStatement:ia("Do-while loops"),AwaitExpression:ia("Await expressions"),ArrowFunctionExpression:ia("Function definitions"),AssignmentExpression:ia("Assignments"),FunctionExpression:ia("Function definitions"),NewExpression:ia('Use of "new"'),UpdateExpression:ia("Update expressions"),VariableDeclarator(e,t){C3(e.id,t)},Identifier(e,t,n){Qot(e,t,n)&&!t.scope.has(e.name)&&t.error(e,iVt,cVt)},CallExpression(e,t){const n=Zot(e.callee),r=jrt(n)||Yrt(n);if(r){if((t.join||t.aggregate===!1)&&iz(n)&&ZUt(e,t),(t.join||t.window===!1)&&az(n)&&JUt(e,t),t.$op=1,t.ast)A3(e,n,t),e.arguments.forEach(i=>kn(i,t,M3));else{const i=t.op(gVt(t,r,n,e.arguments));Object.assign(e,{type:Grt,name:i.id})}return t.$op=0,!1}else Xrt(n)?A3(e,n,t):t.error(e,jot,Kot)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ai(Rf,r))return;const{name:a}=r;if(Jot(e)&&Ai(Rf,i)&&Bl(dU,i.name)){nst(e,i.name);return}const o=a===t.tuple?0:a===t.tuple1?1:a===t.tuple2?2:-1;if(o>=0)return p7(e,o,t,tst,n);if(a===t.$param)return p7(e,o,t,yVt);t.paramsRef.has(a)?Qb(e,t.paramsRef.get(a)):t.columnRef.has(a)?est(r,a,t,e):Bl(t.params,a)&&Qb(r,a)}};function p7(e,t,n,r,i){const{property:a,computed:o}=e;let s;if(!o)s=a.name;else if(Ai(T0,a))s=a.value;else try{kn(a,n,vU,e),s=n.param(a)}catch{n.error(e,eVt)}return r(e,s,t,n,i),!1}const M3={...vU,VariableDeclarator:ia("Variable declaration in operator call"),Identifier(e,t,n){Qot(e,t,n)&&t.error(e,aVt)},CallExpression(e,t){const n=Zot(e.callee);Xrt(n)?A3(e,n,t):t.error(e,jot,Kot)}};function vVt(e,t){e.generator&&ia("Generator functions")(e,t),e.async&&ia("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(s,l)=>t.columnRef.set(s,[l,o]),a=(o,s)=>t.paramsRef.set(o,s);r&&(t.join?(B_(t,n[0],"tuple1",i(1)),r>1&&B_(t,n[1],"tuple2",i(2)),r>2&&B_(t,n[2],"$param",a)):(B_(t,n[0],"tuple",i(0)),r>1&&B_(t,n[1],"$param",a))),t.root=e.body}function B_(e,t,n,r){Ai(Rf,t)?(e.scope.add(t.name),e[n]=t.name):Ai(Urt,t)&&t.properties.forEach(i=>{const a=Ai(Rf,i.key)?i.key.name:Ai(T0,i.key)?i.key.value:e.error(i,QUt);Ai(Rf,i.value)||e.error(i.value,sVt),r(i.value.name,a)})}function gVt(e,t,n,r){const i=[],a=[],o=t.param[0]||0,s=o+(t.param[1]||0);return r.forEach((l,u)=>{u<o?(kn(l,e,M3),i.push(e.field(l))):u<s?(kn(l,e,M3),a.push(e.param(l))):e.error(l,nVt)}),{name:n,fields:i,params:a,...e.spec.window||{}}}function Zot(e){return Ai(Rf,e)?e.name:Ai(zrt,e)?Jot(e)?mVt(e.property.name):e.property.name:null}function Jot(e){return Ai(Rf,e.object)&&e.object.name==="Math"}function mVt(e){return e==="max"?"greatest":e==="min"?"least":e}function Qot(e,t,n){const{name:r}=e;if(!(Ai(zrt,n)&&n.property===e)){if(!(Ai(Vrt,n)&&n.key===e))if(t.paramsRef.has(r))Qb(e,t.paramsRef.get(r));else if(t.columnRef.has(r))est(e,r,t,n);else if(Bl(t.params,r))Qb(e,r);else if(Bl(dU,r))nst(e,r);else return!0}}function tst(e,t,n,r,i){const a=n===0?r.table:n>0?r.join[n-1]:null,o=a&&a.column(t);a&&!o&&r.error(e,pU),r.aggronly&&!r.$op&&r.error(e,tVt),qrt(e,t,n,o,i)}function est(e,t,n,r){const[i,a]=n.columnRef.get(t);tst(e,i,a,n,r)}function yVt(e,t,n,r){r.params&&!Bl(r.params,t)&&r.error(e,rVt),Qb(e,t)}function Qb(e,t){e.type=sBt,e.name=t}function nst(e,t){e.type=iBt,e.name=t,e.raw=dU[t]}function A3(e,t,n){if(t===Krt){const r=n.table;r||n.error(e,hVt),Zrt(e,e.arguments.length?e.arguments.map(i=>{const a=n.param(i),o=Ka(a)?r.columnName(a):a;return r.column(o)||n.error(i,pU),o}):r.columnNames())}else e.callee={type:oBt,name:t}}function C3(e,t){Ai(Rf,e)?t.scope.add(e.name):Ai(tBt,e)?e.elements.forEach(n=>C3(n,t)):Ai(Urt,e)?e.properties.forEach(n=>C3(n.value,t)):t.error(e.id,oVt)}const _Vt={[G1]:1,[Grt]:1};function Do(e,t={}){const n=t.generate||jA,r=t.compiler||oz,i=bVt(t),a={},o={},s=[],l=[];let u=0,c=-1;const h=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(v){const g=xVt(v);return o[g]||(v.id=++c,o[g]=v)},field(v){const g=n(v);return a[g]||(a[g]=++u)},param(v){return Ai(T0,v)?v.value:r.param(n(v),i)},value(v,g){s.push(v);const m=g.escape||(t.ast?aUt(g):h(n(g),i));l.push(m),_Vt[g.type]&&m!==g&&Ea(m)&&(m.field=g.name)},error(v,g,m=""){const _=v.start-6,y=v.end-6,x=String(f.spec).slice(_,y);_n(`${g}: "${x}"${m}`)}};Object.assign(f,t,{params:i});for(const[v,g]of XE(e))f.value(v+"",g.escape?uUt(f,g,i):fVt(f,g));if(t.ast)return{names:s,exprs:l};const d=[];for(const v in a)d[a[v]]=r.expr(v,i);const p=Object.values(o);return p.forEach(v=>v.fields=v.fields.map(g=>d[g])),{names:s,exprs:l,ops:p}}function xVt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function bVt(e){return(e.table?uP(e.table):e.join?{...uP(e.join[1]),...uP(e.join[0])}:{})||{}}function uP(e){return e&&Lr(e.params)?e.params():{}}const rst="Expr",cl="ExprList",ist="ExprNumber",vx="ExprObject",bm="JoinKeys",gC="JoinValues",vs="Options",gU="OrderKeys",lf="SelectionList",Tp="TableRef",Sm="TableRefList",SVt="Descending",wVt="Query",TVt="Selection",MVt="Verb",AVt="Window";function mU(e,t){return e&&e.expr?new v7({...e,...t}):new v7(t,e)}class v7{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Lr(this.expr)?{func:!0}:{}}}}function CVt(e){return mU(e,{desc:!0})}function Tv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return mU(e,t?{expr:t,...r}:r)}function EVt(e,t,n){return mU(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function DVt(e){const t=n=>n;return t.toString=()=>e,t}function g7(e,t){return t=t&&Lr(t.query)?t.query():t,t&&Lr(t.evaluate)?t.evaluate(null,e):e(t)}function ast(e){return Ea(e)&&($n(e.all)||$n(e.matches)||$n(e.not)||$n(e.range))}function t1(e){return e&&Lr(e.toObject)?e.toObject():Lr(e)?{expr:String(e),func:!0}:$n(e)?e.map(t1):Ea(e)?i2(e,t=>t1(t)):e}function yU(e){return $n(e)?e.map(yU):Ea(e)?$n(e.verbs)?Z1.from(e):$n(e.all)?Ry():$n(e.range)?tUt(...e.range):$n(e.match)?eUt(RegExp(...e.match)):$n(e.not)?uot(e.not.map(t1)):IVt(e):e}function IVt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=Tv(n):e.func===!0&&(t=n=DVt(n)),Ea(e.window)){const{frame:r,peers:i}=e.window;t=n=EVt(n,r,i)}e.desc===!0&&(t=CVt(n))}return e===t?i2(e,r=>yU(r)):t}function LVt(e){return $n(e)?e.map(PVt):e}function PVt(e){const t=[];return Ao(e).forEach(n=>{Ka(n)?t.push(n):fa(n)?t.push(Tv(n,null)):Ea(n)&&n.expr||Lr(n)?t.push(n):_n(`Invalid key value: ${n+""}`)}),t}function RVt(e){return $n(e)?e.map(OVt):e}function OVt(e,t){return t<2?Ao(e):e}function NVt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Ea(r)&&!Lr(r))for(const i in r)t.push(r[i]);else n=Ka(r)?r:fa(r)?Tv(n):Lr(r)?n:_n(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const BVt={[rst]:ust,[cl]:Ny,[ist]:GVt,[vx]:td,[bm]:HVt,[gC]:WVt,[gU]:Ny,[lf]:UVt};function kVt(e,t,n){return t===Tp?m7(e):t===Sm?e.map(m7):ost(t1(e),t,n)}function ost(e,t,n){return t===vs?e&&FVt(e,n):BVt[t](e)}function FVt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?ost(i,t[r]):i}return n}function zVt(e,t){return Do({expr:e},{...t,ast:!0}).exprs[0]}function _U(e){return{type:G1,name:e}}function sst(e){return{type:G1,index:e}}function td(e,t){if(fa(e))return zVt(e,t);if(e.expr){let n;if(e.field===!0?n=_U(e.expr):e.func===!0&&(n=td(e.expr,t)),n)return e.desc&&(n={type:SVt,expr:n}),e.window&&(n={type:AVt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...td(e[n],t),as:n}))}function lst(e){const t=TVt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Ny(e.not)}:e.range?{type:t,operator:"range",arguments:Ny(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:_n("Invalid input")}function UVt(e){return Ao(e).map(VVt).flat()}function VVt(e){return ast(e)?lst(e):Ka(e)?sst(e):fa(e)?_U(e):Ea(e)?Object.keys(e).map(t=>({type:G1,name:t,as:e[t]})):_n("Invalid input")}function ust(e){return ast(e)?lst(e):Ka(e)?sst(e):fa(e)?_U(e):Ea(e)?td(e):_n("Invalid input")}function Ny(e){return Ao(e).map(ust).flat()}function GVt(e){return Ka(e)?e:td(e)}function HVt(e){return $n(e)?e.map(Ny):td(e,{join:!0})}function WVt(e){return $n(e)?e.map((t,n)=>n<2?Ny(t):td(t,{join:!0})):td(e,{join:!0})}function m7(e){return e&&Lr(e.toAST)?e.toAST():e}class cst{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,a)=>{const o=i.type,s=r[a],l=o===bm?LVt(s):o===gC?RVt(s):o===gU?NVt(s):s;this[i.name]=l!==void 0?l:i.default})}static from(t){const n=E3[t.verb],r=(n.schema||[]).map(({name:i})=>yU(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:a})=>{const o=this[i];return a===Tp?g7(n,o):a===Sm?o.map(s=>g7(n,s)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=t1(this[n])}),t}toAST(){const t={type:MVt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=kVt(this[n],r,i)}),t}}function fr(e,t){return Object.assign((...n)=>new cst(e,t,n),{schema:t})}const E3={count:fr("count",[{name:"options",type:vs}]),derive:fr("derive",[{name:"values",type:vx},{name:"options",type:vs,props:{before:lf,after:lf}}]),filter:fr("filter",[{name:"criteria",type:vx}]),groupby:fr("groupby",[{name:"keys",type:cl}]),orderby:fr("orderby",[{name:"keys",type:gU}]),relocate:fr("relocate",[{name:"columns",type:lf},{name:"options",type:vs,props:{before:lf,after:lf}}]),rename:fr("rename",[{name:"columns",type:lf}]),rollup:fr("rollup",[{name:"values",type:vx}]),sample:fr("sample",[{name:"size",type:ist},{name:"options",type:vs,props:{weight:rst}}]),select:fr("select",[{name:"columns",type:lf}]),ungroup:fr("ungroup"),unorder:fr("unorder"),reify:fr("reify"),dedupe:fr("dedupe",[{name:"keys",type:cl,default:[]}]),impute:fr("impute",[{name:"values",type:vx},{name:"options",type:vs,props:{expand:cl}}]),fold:fr("fold",[{name:"values",type:cl},{name:"options",type:vs}]),pivot:fr("pivot",[{name:"keys",type:cl},{name:"values",type:cl},{name:"options",type:vs}]),spread:fr("spread",[{name:"values",type:cl},{name:"options",type:vs}]),unroll:fr("unroll",[{name:"values",type:cl},{name:"options",type:vs,props:{drop:cl}}]),lookup:fr("lookup",[{name:"table",type:Tp},{name:"on",type:bm},{name:"values",type:cl}]),join:fr("join",[{name:"table",type:Tp},{name:"on",type:bm},{name:"values",type:gC},{name:"options",type:vs}]),cross:fr("cross",[{name:"table",type:Tp},{name:"values",type:gC},{name:"options",type:vs}]),semijoin:fr("semijoin",[{name:"table",type:Tp},{name:"on",type:bm}]),antijoin:fr("antijoin",[{name:"table",type:Tp},{name:"on",type:bm}]),concat:fr("concat",[{name:"tables",type:Sm}]),union:fr("union",[{name:"tables",type:Sm}]),intersect:fr("intersect",[{name:"tables",type:Sm}]),except:fr("except",[{name:"tables",type:Sm}])};class Z1 extends Art{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new Z1(t.map(cst.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return y7(this,"toObject")}toJSON(){return this.toObject()}toAST(){return y7(this,"toAST",{type:wVt})}}function y7(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function $Vt(e,t){return new Z1(e._verbs.concat(t),e._params,e._table)}for(const e in E3){const t=E3[e];Z1.prototype["__"+e]=function(n,...r){return $Vt(n,t(...r))}}function P0(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((a,o)=>a.map((s,l)=>`${r[o]}${l} = ${r[o]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function XVt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function xU(e,t){const n=ts();return t.forEach((r,i)=>{const a=fa(r)?r:i;if(a){const o=e.column(i)||_n(`Unrecognized column: ${i}`);n.add(a,o)}}),e.create(n)}function hst(e,t,{before:n,after:r}={}){const i=n!=null,a=r!=null;i||a||_n("relocate requires a before or after option."),i&&a&&_n("relocate accepts only one of the before or after options."),t=ah(e,t);const o=[...ah(e,i?n:r).keys()],s=i?o[0]:o.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===s){a&&c&&l.set(u,u);for(const[h,f]of t)l.set(h,f);if(a)return}c&&l.set(u,u)}),xU(e,l)}function J1(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let a=1;a<r;++a)i+=n+t(e[a],a);return i}function bU(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jVt(e,t=0,n=e.length){let r=n?e[t++]:Vn;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function YVt(e,t=0,n=e.length){let r=n?e[t++]:Vn;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function $w(e){return Wb(e)?e:+e}function qVt(e,t){const n=e.length;if(!n)return Vn;if((t=+t)<=0||n<2)return $w(e[0]);if(t>=1)return $w(e[n-1]);const r=(n-1)*t,i=Math.floor(r),a=$w(e[i]);return Wb(a)?a:a+($w(e[i+1])-a)*(r-i)}class KVt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:jVt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:YVt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(bU)),qVt(this._sorted,t)}}const mC=(e,t,n)=>P0(t,"{"+J1(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function ZVt(e,t){const{ops:n,output:r}=JVt(e,t),i=e[0].fields,a=i.length,o=a===0?SU:a===1?QVt:a===2?t4t:_n("Unsupported field count: "+a);return new o(i,n,r,t)}function JVt(e,t){const n={},r=[];function i(o,s=[]){const l=o+":"+s;if(n[l])return n[l];const u=jrt(o),c=u.create(...s);return t<0&&u.stream&&u.stream.forEach(h=>i(h,[])),u.req&&u.req.forEach(h=>i(h,[])),n[l]=c,r.push(c),c}const a=e.map(o=>{const s=i(o.name,o.params);return s.output=o.id,s});return{ops:r,output:a}}class SU extends rUt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new KVt),t}write(t,n,r){const i=this._outputs,a=i.length;for(let o=0;o<a;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class QVt extends SU{constructor(t,n,r,i){super(t,n,r,i);const a=["state","v1","v2"];this._add=mC(n,a,"add"),this._rem=mC(n,a,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Tl(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Tl(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class t4t extends SU{constructor(t,n,r,i){super(t,n,r,i);const a=["state","v1","v2"];this._add=mC(n,a,"add"),this._rem=mC(n,a,"rem")}add(t,n,r){const i=this._fields[0](n,r),a=this._fields[1](n,r);++t.count,Tl(i)&&Tl(a)&&(++t.valid,t.list&&t.list.add([i,a]),this._add(t,i,a))}rem(t,n,r){const i=this._fields[0](n,r),a=this._fields[1](n,r);--t.count,Tl(i)&&Tl(a)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,a))}}function jv(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},a=R0(e,t),o=i?(s,l)=>a[s][i[l]]:s=>a[s][0];n=n.map(s=>l=>s(l,r,o))}return n}function R0(e,t,n){if(!t.length)return n;const r=fst(t),i=e.groups(),a=i?i.size:1;return n=n||WE(t.length,()=>Array(a)),a>1?r.forEach(o=>{const s=pst(e,o,i);for(let l=0;l<a;++l)o.write(s[l],n,l)}):r.forEach(o=>{const s=dst(e,o);o.write(s,n,0)}),n}function fst(e,t){const n=[],r={};for(const i of e){const a=i.fields.map(o=>o+"").join(",");(r[a]||(r[a]=[])).push(i)}for(const i in r)n.push(ZVt(r[i],t));return n}function dst(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),a=e.mask();if(e.isOrdered()){const o=e.indices();for(let s=0;s<r;++s)t.add(n,o[s],i)}else if(a)for(let o=a.next(0);o>=0;o=a.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function pst(e,t,n){const{keys:r,size:i}=n,a=WE(i,()=>t.init()),o=e.data();if(e.isOrdered()){const s=e.indices(),l=s.length;for(let u=0;u<l;++u){const c=s[u];t.add(a[r[c]],c,o)}}else if(e.isFiltered()){const s=e.mask();for(let l=s.next(0);l>=0;l=s.next(l+1))t.add(a[r[l]],l,o)}else{const s=e.totalRows();for(let l=0;l<s;++l)t.add(a[r[l]],l,o)}return a}function vst(e,t){const{get:n,names:r,rows:i,size:a}=t,o=r.length;for(let s=0;s<o;++s){const l=e.add(r[s],Array(a)),u=n[s];for(let c=0;c<a;++c)l[c]=u(i[c])}}function gst(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}const _7=gst(bU);function e4t(e,t,n,r,i){let a,o,s,l,u;const c=v=>o[v-1]===o[v],h=r.length,f=i.length,d=r.length?P0(["w","r","k"],"{"+J1(r,(v,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(v,g,m,_){p.index=p.i0=p.i1=0,p.size=g.length,a=v,o=g,l=m,u=_,s=i?i.map(y=>y.init()):null;for(let y=0;y<h;++y)r[y].init();return p},value(v,g){return g(a[v],e)},step(v){const[g,m]=t,_=p.size,y=p.i0,x=p.i1;p.i0=g!=null?Math.max(0,v-Math.abs(g)):0,p.i1=m!=null?Math.min(_,v+Math.abs(m)+1):_,p.index=v,n&&(p.i0>0&&c(p.i0)&&(p.i0=_7.left(o,o[p.i0])),p.i1<_&&c(p.i1)&&(p.i1=_7.right(o,o[p.i1-1])));for(let S=0;S<f;++S){const b=i[S],w=s[S];for(let A=y;A<p.i0;++A)b.rem(w,a[A],e);for(let A=x;A<p.i1;++A)b.add(w,a[A],e);b.write(w,l,u)}return d(p,l,u),l}};return p}const n4t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),r4t=e=>!!e.peers;function i4t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,a=Yrt(n).create(...i);return r.length&&(a.get=r[0]),a.id=t,a}function a4t(e,t,n,r={},i){const a=e.data(),o=o4t(i,a),s=o.length,l=P0(["r","d","op"],"{"+J1(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const h=u.length,f=s4t(e,u);for(let p=0;p<s;++p)o[p].init(u,f,r,c);const d=p=>r[p][c];for(let p=0;p<h;++p){for(let v=0;v<s;++v)o[v].step(p);l(u[p],a,d)}})}function o4t(e,t){const n={};return e.forEach(r=>{const i=n4t(r),a=r4t(r),o=`${i},${a}`,{aggOps:s,winOps:l}=n[o]||(n[o]={frame:i,peers:a,aggOps:[],winOps:[]});iz(r.name)?s.push(r):l.push(i4t(r))}),Object.values(n).map(r=>e4t(t,r.frame,r.peers,r.winOps,fst(r.aggOps,r.frame[0]!=null?-1:1)))}function s4t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,a=new Uint32Array(i);for(let o=1,s=0;o<i;++o)a[o]=n(t[o-1],t[o],r)?++s:s;return a}else return t}function l4t(e){return az(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function wU(e,{names:t,exprs:n,ops:r},i={}){const a=e.totalRows(),o=ts(i.drop?null:e),s=t.map(f=>o.add(f,Array(a))),[l,u]=u4t(r),c=e.isGrouped()?e.groups().size:1,h=R0(e,l,WE(r.length,()=>Array(c)));return u.length?a4t(e,s,n,h,u):c4t(e,s,n,h),e.create(o)}function u4t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const a=e[i];a.id=i,(l4t(a)?n:t).push(a)}return[t,n]}function c4t(e,t,n,r){const i=e.mask(),a=e.data(),{keys:o}=e.groups()||{},s=o?(u,c)=>r[u][o[c]]:u=>r[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],h=t[u];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))h[f]=c(f,a,s);else{const f=e.totalRows();for(let d=0;d<f;++d)h[d]=c(d,a,s)}}}function h4t(e,t,n={}){const r=wU(e,Do(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:hst(r,Object.keys(t).filter(i=>!e.column(i)),n)}function f4t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const Xw=2147483648,d4t=4294967295;class mst{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&Xw>>>t}set(t){this._bits[t>>5]|=Xw>>>t}clear(t){this._bits[t>>5]&=~(Xw>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,a=n[i]&d4t>>>t;for(;i<r;a=n[++i])if(a!==0)return(i<<5)+Math.clz32(a);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=Xw>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let a=0;a<i;++a)n[a]&=r[a]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let a=0;a<i;++a)n[a]|=r[a]}return this}}function p4t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),a=new mst(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&a.set(o);else for(let o=0;o<n;++o)t(o,i)&&a.set(o);return e.create({filter:a})}function v4t(e,t){const n=Do({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=wU(e,n,{drop:!0}).column("p");r=a=>i[a]}return p4t(e,r)}function yst(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const a=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,s=new Set(i.drop),l=jv(e,r,n),u=ts(),c=new Set(t),h=[],f=[],d=[];e.columnNames().forEach(x=>{if(!s.has(x)){const S=u.add(x,[]);c.has(x)||(h.push(e.column(x)),f.push(S))}}),t.forEach(x=>{s.has(x)||(u.has(x)||u.add(x,[]),d.push(u.data[x]))});const p=o?u.add(o,[]):null;let v=0;const g=h.length,m=d.length,_=(x,S)=>{for(let b=0;b<g;++b)f[b].length=v+S,f[b].fill(h[b].get(x),v,v+S)},y=p?(x,S)=>{for(let b=0;b<S;++b)p[x+b]=b}:()=>{};if(m===1){const x=l[0],S=d[0];e.scan((b,w)=>{const A=Ao(x(b,w)),T=Math.min(A.length,a);_(b,T);for(let M=0;M<T;++M)S[v+M]=A[M];y(v,T),v+=T})}else e.scan((x,S)=>{let b=0;const w=l.map(A=>{const T=Ao(A(x,S));return b=Math.min(Math.max(b,T.length),a),T});_(x,b);for(let A=0;A<m;++A){const T=d[A],M=w[A];for(let C=0;C<b;++C)T[v+C]=M[C]}y(v,b),v+=b});return e.create(u.new())}function g4t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[a="key",o="value"]=i.as||[],s=jv(e,r,n);return yst(e,{names:[a,o],exprs:[()=>t,(l,u)=>s.map(c=>c(l,u))]},{...i,drop:t})}function Fl(e,t,n,r={window:!1}){const i=new Map,a=o=>{o=Ka(o)?t.columnName(o):o,fa(o)?i.set(o,Tv(o)):Lr(o)?ah(t,o).forEach(a):Ea(o)?sot(i,o):_n(`Invalid ${e} value: ${o+""}`)};return Ao(n).forEach(a),r.preparse&&r.preparse(i),Do(i,{table:t,...r})}function m4t(e,t,n){return g4t(e,Fl("fold",e,t),n)}function x7(e,t,n,r){const i=n&&n.length;return y4t(i?_4t(e,n,r):e,t,i)}function y4t(e,{names:t,exprs:n,ops:r},i){const a=jv(e,r,n),o=i?null:ts(e),s=e.totalRows();return t.forEach((l,u)=>{const c=e.column(l),h=i?c.data:o.add(l,Array(s)),f=a[u];e.scan(d=>{const p=c.get(d);h[d]=Tl(p)?p:f(d)})}),i?e:e.create(o)}function _4t(e,t,n){const r=e.groups(),i=e.data(),a=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),s=new Set,l=YA(o);e.scan((p,v)=>s.add(l(p,v)));const u=e.columnNames(),c=ts(),h=u.map(p=>c.add(p,[]));u.forEach((p,v)=>{const g=i[p],m=h[v];e.scan(_=>m.push(g.get(_)))});const f=YA(o.map((p,v)=>g=>g[v])),d=P0("v","{"+h.map((p,v)=>`_${v}.push(v[$${v}]);`).join("")+"}",h,u.map(p=>a.indexOf(p)));if(r){let p=r.keys.length;const v=n.reduce((m,_)=>m*_.length,r.size),g=new Uint32Array(v+(p-s.size));g.set(r.keys),b7(r,n,(m,_)=>{s.has(f(m))||(d(m),g[p++]=_[0])}),c.groupby({...r,keys:g})}else b7(r,n,p=>{s.has(f(p))||d(p)});return e.create(c.new())}function b7(e,t,n){const r=e?e.get.length:0,i=e?1:0,a=i+t.length,o=new Int32Array(a),s=new Int32Array(a),l=[];if(e){const{get:c,rows:h,size:f}=e;o[0]=f,l.push((d,p)=>{const v=h[p];for(let g=0;g<r;++g)d[g]=c[g](v)})}t.forEach((c,h)=>{const f=h+r;o[h+i]=c.length,l.push((d,p)=>d[f]=c[p])});const u=Array(r+t.length);for(let c=0;c<a;++c)l[c](u,0);n(u,s);for(let c=a-1;c>=0;){const h=++s[c];h<o[c]?(l[c](u,h),n(u,s),c=a-1):(s[c]=0,l[c](u,0),--c)}}function TU(e,{names:t,exprs:n,ops:r}){const i=ts(),a=e.groups();return a&&vst(i,a),x4t(t,n,a,R0(e,r),i),e.create(i.new())}function x4t(e,t,n,r=[],i){if(!t.length)return;const a=n?n.size:1,o=(l,u)=>r[l][u],s=e.length;for(let l=0;l<s;++l){const u=t[l];if(u.field!=null)i.add(e[l],r[u.field]);else if(a>1){const c=i.add(e[l],Array(a));for(let h=0;h<a;++h)c[h]=u(h,null,o)}else i.add(e[l],[u(0,null,o)])}}function b4t(e,t,n={}){if(t=Do(t,{table:e}),t.names.forEach(r=>e.column(r)?0:_n(`Invalid impute column ${Uu(r)}`)),n.expand){const r={preparse:S4t,aggronly:!0},i=Fl("impute",e,n.expand,r),a=TU(e.ungroup(),i);return x7(e,t,i.names,i.names.map(o=>a.get(o,0)))}else return x7(e,t)}function S4t(e){e.forEach((t,n)=>t.field?e.set(n,Nrt(t+"")):0)}function w4t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function _st(e,t){const n=new Map;return e.scan((r,i)=>{const a=t(r,i);a!=null&&a===a&&n.set(a,r)}),n}function T4t(e,t,n){const r=new Map,i=e.length;for(let a=0;a<i;++a){const o=e[a],s=n(o,t);s!=null&&s===s&&(r.has(s)?r.get(s).push(a):r.set(s,[a]))}return r}function M4t(e,t){const n=["i","a","j","b"];return P0(n,"{"+J1(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function A4t(e,t,n,{names:r,exprs:i},a={}){const o=e.data(),s=e.indices(!1),l=s.length,u=new Int32Array(l),c=t.data(),h=t.indices(!1),f=h.length,d=new Int32Array(f),p=r.length,v=ts(),g=Array(p),m=Array(p);for(let x=0;x<r.length;++x)g[x]=v.add(r[x],[]),m[x]=i[x];const _=M4t(g,m);if(($n(n)?E4t:C4t)(_,n,o,c,s,h,u,d,l,f),a.left)for(let x=0;x<l;++x)u[x]||_(s[x],o,-1,c);if(a.right)for(let x=0;x<f;++x)d[x]||_(-1,o,h[x],c);return e.create(v.new())}function C4t(e,t,n,r,i,a,o,s,l,u){for(let c=0;c<l;++c){const h=i[c];for(let f=0;f<u;++f){const d=a[f];t(h,n,d,r)&&(e(h,n,d,r),o[c]=1,s[f]=1)}}}function E4t(e,[t,n],r,i,a,o,s,l,u,c){let h,f,d,p,v,g,m,_,y=e;u>=c?(h=r,f=t,d=s,p=a,v=i,g=n,m=l,_=o):(h=i,f=n,d=l,p=o,v=r,g=t,m=s,_=a,y=(b,w,A,T)=>e(A,T,b,w));const x=T4t(_,v,g),S=p.length;for(let b=0;b<S;++b){const w=p[b],A=x.get(f(w,h));if(A){const T=A.length;for(let M=0;M<T;++M){const C=A[M];y(w,h,_[C],v),m[C]=1}d[b]=1}}}function yC(e,t,n){const r=new Map;Ao(n).forEach((a,o)=>{a=Ka(a)?t.columnName(a):a,fa(a)?r.set(o,Tv(a)):Lr(a)||Ea(a)&&a.expr?r.set(o,a):_n(`Invalid ${e} key value: ${a+""}`)});const i=Do(r,{table:t,aggregate:!1,window:!1});return YA(i.exprs,!0)}function D4t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function MU(e,t,n){if(n)fa(n)?n=[n,n]:$n(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=D4t(e.columnNames(),t.columnNames());r.length||_n("Natural join requires shared column names."),n=[r,r]}return n}function xst(e,t,n,r){return n.length!==r.length&&_n("Mismatched number of join keys"),[yC("join",e,n),yC("join",t,r)]}const I4t={aggregate:!1,window:!1},L4t={...I4t,index:1};function S7(e,t,n,r,i={}){n=MU(e,t,n);const a={join:[e,t]};let o;if($n(n)){const[s,l]=n.map(Ao);o=xst(e,t,s,l),r||(r=P4t(e,s,l,i))}else o=Do({on:n},a).exprs[0],r||(r=[Ry(),Ry()]);return A4t(e,t,o,R4t(e,t,r,a,i&&i.suffix),i)}function P4t(e,t,n,r){const i=[];t.forEach((o,s)=>fa(o)&&o===n[s]?i.push(o):0);const a=uot(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(s=>{const l=`[${Uu(s)}]`;return o.has(s)?{[s]:`(a, b) => a${l} == null ? b${l} : a${l}`}:s}),a]}return r.right?[a,Ry()]:[Ry(),a]}function R4t(e,t,n,r,i=[]){if($n(n)){let a,o,s,l=n.length;a=o=s={names:[],exprs:[]},l--&&(a=Fl("join",e,n[0],r)),l--&&(o=Fl("join",t,n[1],L4t)),l--&&(s=Do(n[2],r));const u=new Set,c=new Set(a.names);return o.names.forEach(h=>{c.has(h)&&u.add(h)}),u.size&&(i[0]!==""&&w7(a.names,u,i[0]||"_1"),i[1]!==""&&w7(o.names,u,i[1]||"_2")),{names:a.names.concat(o.names,s.names),exprs:a.exprs.concat(o.exprs,s.exprs)}}else return Do(n,r)}function w7(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function O4t(e,t,n,r={}){const i=new mst(e.totalRows());return($n(n)?N4t:B4t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function N4t(e,t,n,[r,i]){const a=_st(n,i);t.scan((o,s)=>{a.get(r(o,s))>=0&&e.set(o)})}function B4t(e,t,n,r){const i=t.numRows(),a=n.numRows(),o=t.data(),s=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<i;++c){const h=l[c];for(let f=0;f<a;++f)if(r(h,o,u[f],s)){e.set(h);break}}}else for(let l=0;l<i;++l)for(let u=0;u<a;++u)if(r(l,o,u,s)){e.set(l);break}}function T7(e,t,n,r){n=MU(e,t,n);const i=$n(n)?xst(e,t,...n.map(Ao)):Do({on:n},{join:[e,t]}).exprs[0];return O4t(e,t,i,r)}function k4t(e,t,[n,r],{names:i,exprs:a,ops:o}){const s=ts(e),l=e.totalRows();i.forEach(f=>s.add(f,Array(l).fill(Vn)));const u=_st(t,r),c=P0(["lr","rr","data"],"{"+J1(i,(f,d)=>`_[${d}][lr] = $[${d}](rr, data);`)+"}",i.map(f=>s.data[f]),jv(t,o,a)),h=t.data();return e.scan((f,d)=>{const p=u.get(n(f,d));p>=0&&c(f,p,h)}),e.create(s)}function F4t(e,t,n,r){return n=MU(e,t,n),k4t(e,t,[yC("lookup",e,n[0]),yC("lookup",t,n[1])],Fl("lookup",t,r))}const D3=(e,t)=>e??t;function z4t(e,t,n,r={}){const{keys:i,keyColumn:a}=U4t(e,t,r),o=D3(r.valueSeparator,"_"),s=n.names.length>1?(u,c)=>c+o+i[u]:u=>i[u],l=i.map(u=>R0(e,n.ops.map(c=>{if(c.name==="count"){const f=d=>u===a[d]?1:NaN;return f.toString=()=>u+":1",{...c,name:"sum",fields:[f]}}const h=c.fields.map(f=>{const d=(p,v)=>u===a[p]?f(p,v):NaN;return d.toString=()=>u+":"+f,d});return{...c,fields:h}})));return e.create(V4t(n,s,e.groups(),l))}function U4t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=D3(n.sort,!0),a=D3(n.keySeparator,"_"),o=jv(e,t.ops,t.exprs),s=o.length===1?o[0]:(h,f)=>o.map(d=>d(h,f)).join(a),l=Array(e.totalRows());e.scan((h,f)=>l[h]=s(h,f));const u=R0(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[h=>l[h]],params:[]}])[0][0],c=i?u.sort():u;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:l}}function V4t({names:e,exprs:t},n,r,i){const a=r?r.size:1,o=ts(),s=i.length,l=e.length;let u;const c=(h,f)=>u[h][f];r&&vst(o,r);for(let h=0;h<l;++h){const f=t[h];if(f.field!=null)for(let d=0;d<s;++d)o.add(n(d,e[h]),i[d][f.field]);else if(a>1)for(let d=0;d<s;++d){u=i[d];const p=o.add(n(d,e[h]),Array(a));for(let v=0;v<a;++v)p[v]=f(v,null,c)}else for(let d=0;d<s;++d)u=i[d],o.add(n(d,e[h]),[f(0,null,c)])}return o.new()}function G4t(e,t,n,r){return z4t(e,Fl("fold",e,t),Fl("fold",e,n,{preparse:H4t,aggronly:!0}),r)}function H4t(e){e.forEach((t,n)=>t.field?e.set(n,Prt(t+"")):0)}function W4t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),xU(e,ah(e,t,n))}function M7(e,t){return TU(e,Do(t,{table:e,aggronly:!0,window:!1}))}function $4t(e,t,n,r){return(t?r?j4t:X4t:r?q4t:Y4t)(e.length,e,n,r)}function X4t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*w0()|0];return t}function j4t(e,t,n,r){const i=n.length,a=new Float64Array(i);let o=0;for(let l=0;l<i;++l)a[l]=o+=r(n[l]);const s=gst(bU).right;for(let l=0;l<e;++l)t[l]=n[s(a,o*w0())];return t}function Y4t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const a=i*w0();a<e&&(t[a|0]=n[i])}return t}function q4t(e,t,n,r){const i=n.length;if(e>=i)return n;const a=new Float32Array(i),o=new Uint32Array(i);for(let s=0;s<i;++s)o[s]=s,a[s]=-Math.log(w0())/r(n[s]);o.sort((s,l)=>a[s]-a[l]);for(let s=0;s<e;++s)t[s]=n[o[s]];return t}function K4t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=w0()*r--|0,a=e[r+t];e[r+t]=e[i+t],e[i+t]=a}return e}function Z4t(e,t,n,r={}){const{replace:i,shuffle:a}=r,o=e.partitions(!1);let s=0;t=o.map((c,h)=>{let f=t(h);return s+=f=i?f:Math.min(c.length,f),f});const l=new Uint32Array(s);let u=0;return o.forEach((c,h)=>{const f=t[h],d=l.subarray(u,u+=f);!i&&f===c.length?d.set(c):$4t(d,i,c,n)}),a!==!1&&(o.length>1||!i)&&K4t(l),e.reify(l)}function J4t(e,t,n={}){return Z4t(e,Q4t(e,t),t5t(e,n.weight),n)}const bst=e=>t=>e.get(t)||0;function Q4t(e,t){return Ka(t)?()=>t:bst(TU(e,Do({size:t},{table:e,window:!1})).column("size"))}function t5t(e,t){return t==null?null:(t=Ka(t)?e.columnName(t):t,bst(fa(t)?e.column(t):wU(e,Do({w:t},{table:e}),{drop:!0}).column("w")))}function e5t(e,t){return xU(e,ah(e,t))}function n5t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const a=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,s=i.limit==null?a.length||1/0:Math.max(1,+i.limit||1),l=jv(e,r,n),u=ts(),c=t.reduce((f,d,p)=>f.set(d,p),new Map),h=(f,d)=>{const p=r5t(e,l[f],s),v=p.length;for(let g=0;g<v;++g)u.add(a[g]||`${d}_${g+1}`,p[g])};return e.columnNames().forEach(f=>{c.has(f)?(o||u.add(f,e.column(f)),h(c.get(f),f),c.delete(f)):u.add(f,e.column(f))}),c.forEach(h),e.create(u)}function r5t(e,t,n){const r=e.totalRows(),i=[];return e.scan((a,o)=>{const s=Ao(t(a,o)),l=Math.min(s.length,n);for(;i.length<l;)i.push(Array(r).fill(Vn));for(let u=0;u<l;++u)i[u][a]=s[u]}),i}function i5t(e,t,n){return n5t(e,Fl("spread",e,t),n)}function a5t(e,t){return e.concat(t).dedupe()}function o5t(e,t,n){return yst(e,Fl("unroll",e,t),n&&n.drop?{...n,drop:Fl("unroll",e,n.drop).names}:n)}function s5t(e,t){return e.create({groups:l5t(e,t)})}function l5t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const d=e.column(n[0].field);if(d.groups)return d.groups(t)}let a=jv(e,r,n);const o=YA(a),s=e.totalRows(),l=new Uint32Array(s),u={},c=[],h=e.data(),f=e.mask();if(f)for(let d=f.next(0);d>=0;d=f.next(d+1)){const p=o(d,h)+"",v=u[p];l[d]=v??(u[p]=c.push(d)-1)}else for(let d=0;d<s;++d){const p=o(d,h)+"",v=u[p];l[d]=v??(u[p]=c.push(d)-1)}return r.length||(a=a.map(d=>p=>d(p,h))),{keys:l,get:a,names:t,rows:c,size:c.length}}function u5t(e,t){return s5t(e,Fl("groupby",e,t))}function c5t(e,t){return e.create({order:t})}const h5t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function f5t(e,t){const n=[],r=[],i=[];let a=null,o="0",s="0";e.isGrouped()&&(a=e.groups().keys,o="ka",s="kb");const{ops:l}=Do(t,{table:e,value:(d,p)=>{if(n.push(d),p.escape){const v=g=>`fn[${i.length}](${g}, data)`;r.push([v("a"),v("b")]),i.push(p.escape)}else r.push([jA(p,{index:"a",op:o}),jA(p,{index:"b",op:s})])},window:!1}),u=R0(e,l),c=(d,p)=>u[d][p],h=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let d=0;d<h;++d){const p=t.get(n[d]).desc?-1:1,[v,g]=r[d];f+=h5t(v,g,-p,p)}return f+="0;};",Function("op","keys","fn","data",f)(c,a,i,e.data())}function d5t(e,t){return c5t(e,p5t(e,t))}function p5t(e,t){let n=-1;const r=new Map,i=a=>r.set(++n+"",a);return t.forEach(a=>{const o=a.expr!=null?a.expr:a;if(Ea(o)&&!Lr(o))for(const s in o)i(o[s]);else i(Ka(o)?Tv(a,e.columnName(o)):fa(o)?Tv(a):Lr(o)?a:_n(`Invalid orderby field: ${a+""}`))}),f5t(e,r)}function v5t(e,t){const n=e.numRows(),r=n+t.reduce((o,s)=>o+s.numRows(),0);if(n===r)return e;const i=[e,...t],a=ts();return e.columnNames().forEach(o=>{const s=Array(r);let l=0;i.forEach(u=>{const c=u.column(o)||{get:()=>Vn};u.scan(h=>s[l++]=c.get(h))}),a.add(o,s)}),e.create(a.new())}function g5t(e,t){const n=ts(),r=e.groups(),{get:i,names:a=[],rows:o,size:s=1}=r||{},l=new Uint32Array(s+1);a.forEach(f=>n.add(f,null));const u=r?pst(e,t,r):[dst(e,t)];t.outputs().map(f=>n.add(f,[]));const c=l.length-1;let h=0;for(let f=0;f<c;++f)h+=l[f+1]=t.write(u[f],n.data,l[f]);if(r){const f=e.data();a.forEach((d,p)=>{const v=n.data[d]=Array(h),g=i[p];for(let m=0,_=0;m<s;++m)v.fill(g(o[m],f),_,_+=l[m+1])})}return e.create(n.new())}function m5t(e){return e.isGrouped()?e.create({groups:null}):e}function y5t(e){return e.isOrdered()?e.create({order:null}):e}const _5t={__antijoin:(e,t,n)=>T7(e,t,n,{anti:!0}),__count:(e,t={})=>M7(e,{[t.as||"count"]:Rrt()}),__cross:(e,t,n,r)=>S7(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:v5t,__dedupe:XVt,__derive:h4t,__except:f4t,__filter:v4t,__fold:m4t,__impute:b4t,__intersect:w4t,__join:S7,__lookup:F4t,__pivot:G4t,__relocate:hst,__rename:W4t,__rollup:M7,__sample:J4t,__select:e5t,__semijoin:T7,__spread:i5t,__union:a5t,__unroll:o5t,__groupby:u5t,__orderby:d5t,__ungroup:m5t,__unorder:y5t,__reduce:g5t};Object.assign(pf.prototype,_5t);pf.prototype;const bM=(e,t="x")=>{const n=document.getElementById("plotPanel_2D");if(!Vb()){const d=_k(n);BNt(d)}const r=Vb(),i=Math.round(e*90),o=Pi().map((d,p)=>{const v=d.plotLabel||`Viewer ${p+1}`,g=t==="x"?ZN()[p]:t==="y"?JN()[p]:QN()[p];return[{name:`${v} Line`,type:"line",data:g,smooth:!1,lineStyle:{color:"#145e9f"},itemStyle:{color:"#145e9f"}},{name:`${v} Point`,type:"scatter",data:[[i,g[i]]],symbolSize:15,itemStyle:{color:"red",borderColor:"black",borderWidth:0},animation:!1,z:10}]}).flat(),s=Pi().flatMap((d,p)=>t==="x"?ZN()[p]:t==="y"?JN()[p]:QN()[p]),l=Math.min(...s),u=Math.max(...s);function c(){const d=Number(l),p=Number(u),v=(d-(p-d)).toFixed(0);return parseFloat(v)}function h(){const d=Number(l),p=Number(u),v=(p+(p-d)).toFixed(0);return parseFloat(v)}const f={tooltip:{trigger:"axis",axisPointer:{type:"cross",animation:!1,label:{backgroundColor:"#ccc",borderColor:"#aaa",borderWidth:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,color:"#222"}}},toolbox:{feature:{dataZoom:{}},right:"65px"},legend:{data:o.map(d=>d.name),orient:"vertical",left:"20px",top:"0px"},grid:{left:"50px",right:"65px",bottom:"170px",top:"90px"},dataZoom:[{type:"inside",xAxisIndex:0},{type:"slider",xAxisIndex:0,filterMode:"none",bottom:"105px",height:30*Ms()},{type:"inside",yAxisIndex:0,filterMode:"none"},{type:"slider",yAxisIndex:0,filterMode:"none",right:"15px",width:30*Ms()}],xAxis:{type:"category",data:s.map((d,p)=>p),axisLine:{onZero:!1}},yAxis:{type:"value",name:brt(),min:c(),max:h()},series:o};r.setOption(f),r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"lineX",brushMode:"single"}})},x5t=(e,t="x")=>{const n=Vb();if(!n)return;const r=Math.round(e*90),i=Pi().map((a,o)=>{const s=t==="x"?ZN()[o]:t==="y"?JN()[o]:QN()[o];return{name:`${a.plotLabel||`Viewer ${o+1}`} Point`,data:[[r,s[r]]]}});n.setOption({series:i.map(a=>({name:a.name,data:a.data,type:"scatter",symbolSize:15,itemStyle:{color:"red",borderColor:"black",borderWidth:0},animation:!1,z:10}))})},b5t=e=>{const t=document.getElementById("plotPanel_3D");if(!Gb()){const w=_k(t);kNt(w)}const n=Gb(),r=Math.round(e*90),a=Pi().map((w,A)=>{const T=w.plotLabel||`Viewer ${A+1}`,M=n3()[A],C=t3()[A],E=e3()[A],D={name:`${T} Line`,type:"line3D",data:M.map((L,P)=>[L,C[P],E[P]]),lineStyle:{width:2,color:"#145e9f"}},I={name:`${T} Point`,type:"scatter3D",data:[[M[r],C[r],E[r]]],symbolSize:8,itemStyle:{color:"red"}};return[D,I]}).flat(),o=Pi().flatMap((w,A)=>n3()[A]),s=Pi().flatMap((w,A)=>t3()[A]),l=Pi().flatMap((w,A)=>e3()[A]),u=Math.min(...o),c=Math.max(...o),h=Math.min(...s),f=Math.max(...s),d=Math.min(...l),p=Math.max(...l),v=c-u,g=f-h,m=p-d,_=80,y=v/Math.max(v,g,m)*_,x=g/Math.max(v,g,m)*_,S=m/Math.max(v,g,m)*_,b={tooltip:{},xAxis3D:{type:"value",min:Math.round(u),max:Math.round(c),name:"Z"},yAxis3D:{type:"value",min:Math.round(h),max:Math.round(f),name:"X"},zAxis3D:{type:"value",min:Math.round(d),max:Math.round(p),name:"Y"},grid3D:{boxWidth:y,boxHeight:x,boxDepth:S,left:"0%",right:"0%",bottom:"0%",top:"0%",viewControl:{distance:170,alpha:30,beta:-70}},legend:{data:a.map(w=>w.name),orient:"vertical",left:"20px",top:"101px"},series:a,animation:!1};n.setOption(b)},S5t=e=>{const t=Gb();if(!t)return;const n=Math.round(e*90),r=Pi().map((i,a)=>{const o=n3()[a],s=t3()[a],l=e3()[a];return{name:`${i.plotLabel||`Viewer ${a+1}`} Point`,data:[[o[n],s[n],l[n]]]}});t.setOption({series:r.map(i=>({name:i.name,type:"scatter3D",data:i.data,symbolSize:8,itemStyle:{color:"red"}})),animation:!1})},w5t=()=>{Vb().resize(),Gb().resize();try{wrt().resize(),FNt().resize()}catch(e){console.error(e)}};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const AU="163",Eg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Dg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},T5t=0,A7=1,M5t=2,Sst=1,A5t=2,_c=3,ed=0,bo=1,yl=2,Of=0,Hm=1,C7=2,E7=3,D7=4,C5t=5,Mp=100,E5t=101,D5t=102,I5t=103,L5t=104,P5t=200,R5t=201,O5t=202,N5t=203,I3=204,L3=205,B5t=206,k5t=207,F5t=208,z5t=209,U5t=210,V5t=211,G5t=212,H5t=213,W5t=214,$5t=0,X5t=1,j5t=2,_C=3,Y5t=4,q5t=5,K5t=6,Z5t=7,wst=0,J5t=1,Q5t=2,Nf=0,tGt=1,eGt=2,nGt=3,rGt=4,iGt=5,aGt=6,oGt=7,Tst=300,By=301,ky=302,P3=303,R3=304,c2=306,O3=1e3,Xp=1001,N3=1002,yo=1003,sGt=1004,jw=1005,_l=1006,cP=1007,jp=1008,Bf=1009,lGt=1010,uGt=1011,Mst=1012,Ast=1013,Fy=1014,Bc=1015,xC=1016,Cst=1017,Est=1018,Q1=1020,cGt=35902,hGt=1021,fGt=1022,Ml=1023,dGt=1024,pGt=1025,Wm=1026,e1=1027,vGt=1028,Dst=1029,gGt=1030,Ist=1031,Lst=1033,hP=33776,fP=33777,dP=33778,pP=33779,I7=35840,L7=35841,P7=35842,R7=35843,Pst=36196,O7=37492,N7=37496,B7=37808,k7=37809,F7=37810,z7=37811,U7=37812,V7=37813,G7=37814,H7=37815,W7=37816,$7=37817,X7=37818,j7=37819,Y7=37820,q7=37821,vP=36492,K7=36494,Z7=36495,mGt=36283,J7=36284,Q7=36285,tX=36286,yGt=2200,_Gt=2201,xGt=2202,bC=2300,SC=2301,gP=2302,wm=2400,Tm=2401,wC=2402,CU=2500,bGt=2501,SGt=3200,wGt=3201,TGt=0,MGt=1,vf="",cu="srgb",yd="srgb-linear",EU="display-p3",h2="display-p3-linear",TC="linear",Cr="srgb",MC="rec709",AC="p3",Ig=7680,eX=519,AGt=512,CGt=513,EGt=514,Rst=515,DGt=516,IGt=517,LGt=518,PGt=519,B3=35044,nX="300 es",kc=2e3,CC=2001;class _d{addEventListener(t,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(n)===-1&&r[t].push(n)}hasEventListener(t,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[t]!==void 0&&r[t].indexOf(n)!==-1}removeEventListener(t,n){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const r=this._listeners[t.type];if(r!==void 0){t.target=this;const i=r.slice(0);for(let a=0,o=i.length;a<o;a++)i[a].call(this,t);t.target=null}}}const ma=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let rX=1234567;const jx=Math.PI/180,n1=180/Math.PI;function Il(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ma[e&255]+ma[e>>8&255]+ma[e>>16&255]+ma[e>>24&255]+"-"+ma[t&255]+ma[t>>8&255]+"-"+ma[t>>16&15|64]+ma[t>>24&255]+"-"+ma[n&63|128]+ma[n>>8&255]+"-"+ma[n>>16&255]+ma[n>>24&255]+ma[r&255]+ma[r>>8&255]+ma[r>>16&255]+ma[r>>24&255]).toLowerCase()}function sa(e,t,n){return Math.max(t,Math.min(n,e))}function DU(e,t){return(e%t+t)%t}function RGt(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function OGt(e,t,n){return e!==t?(n-e)/(t-e):0}function Yx(e,t,n){return(1-n)*e+n*t}function NGt(e,t,n,r){return Yx(e,t,1-Math.exp(-n*r))}function BGt(e,t=1){return t-Math.abs(DU(e,t*2)-t)}function kGt(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))}function FGt(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))}function zGt(e,t){return e+Math.floor(Math.random()*(t-e+1))}function UGt(e,t){return e+Math.random()*(t-e)}function VGt(e){return e*(.5-Math.random())}function GGt(e){e!==void 0&&(rX=e);let t=rX+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function HGt(e){return e*jx}function WGt(e){return e*n1}function $Gt(e){return(e&e-1)===0&&e!==0}function XGt(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function jGt(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function YGt(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),f=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*f,s*u);break;case"YZY":e.set(l*f,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*f,s*c,s*u);break;case"XZX":e.set(s*c,l*p,l*d,s*u);break;case"YXY":e.set(l*d,s*c,l*p,s*u);break;case"ZYZ":e.set(l*p,l*d,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function xl(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function or(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(e*4294967295);case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int32Array:return Math.round(e*2147483647);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}const mp={DEG2RAD:jx,RAD2DEG:n1,generateUUID:Il,clamp:sa,euclideanModulo:DU,mapLinear:RGt,inverseLerp:OGt,lerp:Yx,damp:NGt,pingpong:BGt,smoothstep:kGt,smootherstep:FGt,randInt:zGt,randFloat:UGt,randFloatSpread:VGt,seededRandom:GGt,degToRad:HGt,radToDeg:WGt,isPowerOfTwo:$Gt,ceilPowerOfTwo:XGt,floorPowerOfTwo:jGt,setQuaternionFromProperEuler:YGt,normalize:or,denormalize:xl};class Ee{constructor(t=0,n=0){Ee.prototype.isVector2=!0,this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,r=this.y,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(sa(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y;return n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const r=Math.cos(n),i=Math.sin(n),a=this.x-t.x,o=this.y-t.y;return this.x=a*r-o*i+t.x,this.y=a*i+o*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yn{constructor(t,n,r,i,a,o,s,l,u){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,n,r,i,a,o,s,l,u)}set(t,n,r,i,a,o,s,l,u){const c=this.elements;return c[0]=t,c[1]=i,c[2]=s,c[3]=n,c[4]=a,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(t,n,r){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,i=n.elements,a=this.elements,o=r[0],s=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],p=r[8],v=i[0],g=i[3],m=i[6],_=i[1],y=i[4],x=i[7],S=i[2],b=i[5],w=i[8];return a[0]=o*v+s*_+l*S,a[3]=o*g+s*y+l*b,a[6]=o*m+s*x+l*w,a[1]=u*v+c*_+h*S,a[4]=u*g+c*y+h*b,a[7]=u*m+c*x+h*w,a[2]=f*v+d*_+p*S,a[5]=f*g+d*y+p*b,a[8]=f*m+d*x+p*w,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return n*o*c-n*s*u-r*a*c+r*s*l+i*a*u-i*o*l}invert(){const t=this.elements,n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=c*o-s*u,f=s*l-c*a,d=u*a-o*l,p=n*h+r*f+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/p;return t[0]=h*v,t[1]=(i*u-c*r)*v,t[2]=(s*r-i*o)*v,t[3]=f*v,t[4]=(c*n-i*l)*v,t[5]=(i*a-s*n)*v,t[6]=d*v,t[7]=(r*l-u*n)*v,t[8]=(o*n-r*a)*v,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,r,i,a,o,s){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*o+u*s)+o+t,-i*u,i*l,-i*(-u*o+l*s)+s+n,0,0,1),this}scale(t,n){return this.premultiply(mP.makeScale(t,n)),this}rotate(t){return this.premultiply(mP.makeRotation(-t)),this}translate(t,n){return this.premultiply(mP.makeTranslation(t,n)),this}makeTranslation(t,n){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,n,0,0,1),this}makeRotation(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(t,n){return this.set(t,0,0,0,n,0,0,0,1),this}equals(t){const n=this.elements,r=t.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(t,n=0){for(let r=0;r<9;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const mP=new yn;function Ost(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function EC(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function qGt(){const e=EC("canvas");return e.style.display="block",e}const iX={};function Nst(e){e in iX||(iX[e]=!0,console.warn(e))}const aX=new yn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),oX=new yn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Yw={[yd]:{transfer:TC,primaries:MC,toReference:e=>e,fromReference:e=>e},[cu]:{transfer:Cr,primaries:MC,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[h2]:{transfer:TC,primaries:AC,toReference:e=>e.applyMatrix3(oX),fromReference:e=>e.applyMatrix3(aX)},[EU]:{transfer:Cr,primaries:AC,toReference:e=>e.convertSRGBToLinear().applyMatrix3(oX),fromReference:e=>e.applyMatrix3(aX).convertLinearToSRGB()}},KGt=new Set([yd,h2]),dr={enabled:!0,_workingColorSpace:yd,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!KGt.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(this.enabled===!1||t===n||!t||!n)return e;const r=Yw[t].toReference,i=Yw[n].fromReference;return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Yw[e].primaries},getTransfer:function(e){return e===vf?TC:Yw[e].transfer}};function $m(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function yP(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}let Lg;class ZGt{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Lg===void 0&&(Lg=EC("canvas")),Lg.width=t.width,Lg.height=t.height;const r=Lg.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=Lg}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const n=EC("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");r.drawImage(t,0,0,t.width,t.height);const i=r.getImageData(0,0,t.width,t.height),a=i.data;for(let o=0;o<a.length;o++)a[o]=$m(a[o]/255)*255;return r.putImageData(i,0,0),n}else if(t.data){const n=t.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor($m(n[r]/255)*255):n[r]=$m(n[r]);return{data:n,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let JGt=0;class Bst{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:JGt++}),this.uuid=Il(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?a.push(_P(i[o].image)):a.push(_P(i[o]))}else a=_P(i);r.url=a}return n||(t.images[this.uuid]=r),r}}function _P(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?ZGt.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let QGt=0;class Ta extends _d{constructor(t=Ta.DEFAULT_IMAGE,n=Ta.DEFAULT_MAPPING,r=Xp,i=Xp,a=_l,o=jp,s=Ml,l=Bf,u=Ta.DEFAULT_ANISOTROPY,c=vf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QGt++}),this.uuid=Il(),this.name="",this.source=new Bst(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=s,this.internalFormat=null,this.type=l,this.offset=new Ee(0,0),this.repeat=new Ee(1,1),this.center=new Ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=t===void 0||typeof t=="string";if(!n&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Tst)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case O3:t.x=t.x-Math.floor(t.x);break;case Xp:t.x=t.x<0?0:1;break;case N3:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case O3:t.y=t.y-Math.floor(t.y);break;case Xp:t.y=t.y<0?0:1;break;case N3:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Ta.DEFAULT_IMAGE=null;Ta.DEFAULT_MAPPING=Tst;Ta.DEFAULT_ANISOTROPY=1;class si{constructor(t=0,n=0,r=0,i=1){si.prototype.isVector4=!0,this.x=t,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,r,i){return this.x=t,this.y=n,this.z=r,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,r=this.y,i=this.z,a=this.w,o=t.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*a,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*a,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*a,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*a,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,r,i,a;const l=t.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],p=l[9],v=l[2],g=l[6],m=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-v)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+v)<.1&&Math.abs(p+g)<.1&&Math.abs(u+d+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const y=(u+1)/2,x=(d+1)/2,S=(m+1)/2,b=(c+f)/4,w=(h+v)/4,A=(p+g)/4;return y>x&&y>S?y<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(y),i=b/r,a=w/r):x>S?x<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(x),r=b/i,a=A/i):S<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(S),r=w/a,i=A/a),this.set(r,i,a,n),this}let _=Math.sqrt((g-p)*(g-p)+(h-v)*(h-v)+(f-c)*(f-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(h-v)/_,this.z=(f-c)/_,this.w=Math.acos((u+d+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this.w=t.w+(n.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tHt extends _d{constructor(t=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=t,this.height=n,this.depth=1,this.scissor=new si(0,0,t,n),this.scissorTest=!1,this.viewport=new si(0,0,t,n);const i={width:t,height:n,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:_l,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},r);const a=new Ta(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);a.flipY=!1,a.generateMipmaps=r.generateMipmaps,a.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let s=0;s<o;s++)this.textures[s]=a.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,n,r=1){if(this.width!==t||this.height!==n||this.depth!==r){this.width=t,this.height=n,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=t,this.textures[i].image.height=n,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let r=0,i=t.textures.length;r<i;r++)this.textures[r]=t.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const n=Object.assign({},t.texture.image);return this.texture.source=new Bst(n),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Mv extends tHt{constructor(t=1,n=1,r={}){super(t,n,r),this.isWebGLRenderTarget=!0}}class kst extends Ta{constructor(t=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:n,height:r,depth:i},this.magFilter=yo,this.minFilter=yo,this.wrapR=Xp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eHt extends Ta{constructor(t=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:n,height:r,depth:i},this.magFilter=yo,this.minFilter=yo,this.wrapR=Xp,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ko{constructor(t=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=t,this._y=n,this._z=r,this._w=i}static slerpFlat(t,n,r,i,a,o,s){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=a[o+0],d=a[o+1],p=a[o+2],v=a[o+3];if(s===0){t[n+0]=l,t[n+1]=u,t[n+2]=c,t[n+3]=h;return}if(s===1){t[n+0]=f,t[n+1]=d,t[n+2]=p,t[n+3]=v;return}if(h!==v||l!==f||u!==d||c!==p){let g=1-s;const m=l*f+u*d+c*p+h*v,_=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const S=Math.sqrt(y),b=Math.atan2(S,m*_);g=Math.sin(g*b)/S,s=Math.sin(s*b)/S}const x=s*_;if(l=l*g+f*x,u=u*g+d*x,c=c*g+p*x,h=h*g+v*x,g===1-s){const S=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=S,u*=S,c*=S,h*=S}}t[n]=l,t[n+1]=u,t[n+2]=c,t[n+3]=h}static multiplyQuaternionsFlat(t,n,r,i,a,o){const s=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=a[o],f=a[o+1],d=a[o+2],p=a[o+3];return t[n]=s*p+c*h+l*d-u*f,t[n+1]=l*p+c*f+u*h-s*d,t[n+2]=u*p+c*d+s*f-l*h,t[n+3]=c*p-s*h-l*f-u*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,r,i){return this._x=t,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n=!0){const r=t._x,i=t._y,a=t._z,o=t._order,s=Math.cos,l=Math.sin,u=s(r/2),c=s(i/2),h=s(a/2),f=l(r/2),d=l(i/2),p=l(a/2);switch(o){case"XYZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"YXZ":this._x=f*c*h+u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"ZXY":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h-f*d*p;break;case"ZYX":this._x=f*c*h-u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h+f*d*p;break;case"YZX":this._x=f*c*h+u*d*p,this._y=u*d*h+f*c*p,this._z=u*c*p-f*d*h,this._w=u*c*h-f*d*p;break;case"XZY":this._x=f*c*h-u*d*p,this._y=u*d*h-f*c*p,this._z=u*c*p+f*d*h,this._w=u*c*h+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const r=n/2,i=Math.sin(r);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=r+s+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(a-u)*d,this._z=(o-i)*d}else if(r>s&&r>h){const d=2*Math.sqrt(1+r-s-h);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(a+u)/d}else if(s>h){const d=2*Math.sqrt(1+s-r-h);this._w=(a-u)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-r-s);this._w=(o-i)/d,this._x=(a+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(sa(this.dot(t),-1,1)))}rotateTowards(t,n){const r=this.angleTo(t);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const r=t._x,i=t._y,a=t._z,o=t._w,s=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+o*s+i*u-a*l,this._y=i*c+o*l+a*s-r*u,this._z=a*c+o*u+r*l-i*s,this._w=o*c-r*s-i*l-a*u,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const r=this._x,i=this._y,a=this._z,o=this._w;let s=o*t._w+r*t._x+i*t._y+a*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=r,this._y=i,this._z=a,this;const l=1-s*s;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*a+n*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,s),h=Math.sin((1-n)*c)/u,f=Math.sin(n*c)/u;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=a*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(t,n,r){return this.copy(t).slerp(n,r)}random(){const t=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(t),i*Math.cos(t),a*Math.sin(n),a*Math.cos(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(t=0,n=0,r=0){Y.prototype.isVector3=!0,this.x=t,this.y=n,this.z=r}set(t,n,r){return r===void 0&&(r=this.z),this.x=t,this.y=n,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return this.applyQuaternion(sX.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(sX.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,r=this.y,i=this.z,a=t.elements;return this.x=a[0]*n+a[3]*r+a[6]*i,this.y=a[1]*n+a[4]*r+a[7]*i,this.z=a[2]*n+a[5]*r+a[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,r=this.y,i=this.z,a=t.elements,o=1/(a[3]*n+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*n+a[4]*r+a[8]*i+a[12])*o,this.y=(a[1]*n+a[5]*r+a[9]*i+a[13])*o,this.z=(a[2]*n+a[6]*r+a[10]*i+a[14])*o,this}applyQuaternion(t){const n=this.x,r=this.y,i=this.z,a=t.x,o=t.y,s=t.z,l=t.w,u=2*(o*i-s*r),c=2*(s*n-a*i),h=2*(a*r-o*n);return this.x=n+l*u+o*h-s*c,this.y=r+l*c+s*u-a*h,this.z=i+l*h+a*c-o*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,r=this.y,i=this.z,a=t.elements;return this.x=a[0]*n+a[4]*r+a[8]*i,this.y=a[1]*n+a[5]*r+a[9]*i,this.z=a[2]*n+a[6]*r+a[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,r){return this.x=t.x+(n.x-t.x)*r,this.y=t.y+(n.y-t.y)*r,this.z=t.z+(n.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,n){const r=t.x,i=t.y,a=t.z,o=n.x,s=n.y,l=n.z;return this.x=i*l-a*s,this.y=a*o-r*l,this.z=r*s-i*o,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const r=t.dot(this)/n;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return xP.copy(this).projectOnVector(t),this.sub(xP)}reflect(t){return this.sub(xP.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(t)/n;return Math.acos(sa(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,r=this.y-t.y,i=this.z-t.z;return n*n+r*r+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,r){const i=Math.sin(n)*t;return this.x=i*Math.sin(r),this.y=Math.cos(n)*t,this.z=i*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,r){return this.x=t*Math.sin(n),this.y=r,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n){return this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(t),this.y=n,this.z=r*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xP=new Y,sX=new Ko;class xd{constructor(t=new Y(1/0,1/0,1/0),n=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=n}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n+=3)this.expandByPoint(rl.fromArray(t,n));return this}setFromBufferAttribute(t){this.makeEmpty();for(let n=0,r=t.count;n<r;n++)this.expandByPoint(rl.fromBufferAttribute(t,n));return this}setFromPoints(t){this.makeEmpty();for(let n=0,r=t.length;n<r;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const r=rl.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,n=!1){return this.makeEmpty(),this.expandByObject(t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,n=!1){t.updateWorldMatrix(!1,!1);const r=t.geometry;if(r!==void 0){const a=r.getAttribute("position");if(n===!0&&a!==void 0&&t.isInstancedMesh!==!0)for(let o=0,s=a.count;o<s;o++)t.isMesh===!0?t.getVertexPosition(o,rl):rl.fromBufferAttribute(a,o),rl.applyMatrix4(t.matrixWorld),this.expandByPoint(rl);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),qw.copy(t.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),qw.copy(r.boundingBox)),qw.applyMatrix4(t.matrixWorld),this.union(qw)}const i=t.children;for(let a=0,o=i.length;a<o;a++)this.expandByObject(i[a],n);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,rl),rl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,r;return t.normal.x>0?(n=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),n<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(k_),Kw.subVectors(this.max,k_),Pg.subVectors(t.a,k_),Rg.subVectors(t.b,k_),Og.subVectors(t.c,k_),Yh.subVectors(Rg,Pg),qh.subVectors(Og,Rg),ip.subVectors(Pg,Og);let n=[0,-Yh.z,Yh.y,0,-qh.z,qh.y,0,-ip.z,ip.y,Yh.z,0,-Yh.x,qh.z,0,-qh.x,ip.z,0,-ip.x,-Yh.y,Yh.x,0,-qh.y,qh.x,0,-ip.y,ip.x,0];return!bP(n,Pg,Rg,Og,Kw)||(n=[1,0,0,0,1,0,0,0,1],!bP(n,Pg,Rg,Og,Kw))?!1:(Zw.crossVectors(Yh,qh),n=[Zw.x,Zw.y,Zw.z],bP(n,Pg,Rg,Og,Kw))}clampPoint(t,n){return n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,rl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(rl).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(hc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),hc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),hc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),hc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),hc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),hc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),hc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),hc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(hc),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const hc=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],rl=new Y,qw=new xd,Pg=new Y,Rg=new Y,Og=new Y,Yh=new Y,qh=new Y,ip=new Y,k_=new Y,Kw=new Y,Zw=new Y,ap=new Y;function bP(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){ap.fromArray(e,a);const s=i.x*Math.abs(ap.x)+i.y*Math.abs(ap.y)+i.z*Math.abs(ap.z),l=t.dot(ap),u=n.dot(ap),c=r.dot(ap);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>s)return!1}return!0}const nHt=new xd,F_=new Y,SP=new Y;class O0{constructor(t=new Y,n=-1){this.isSphere=!0,this.center=t,this.radius=n}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const r=this.center;n!==void 0?r.copy(n):nHt.setFromPoints(t).getCenter(r);let i=0;for(let a=0,o=t.length;a<o;a++)i=Math.max(i,r.distanceToSquared(t[a]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const r=this.center.distanceToSquared(t);return n.copy(t),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;F_.subVectors(t,this.center);const n=F_.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(F_,i/r),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(SP.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(F_.copy(t.center).add(SP)),this.expandByPoint(F_.copy(t.center).sub(SP))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const fc=new Y,wP=new Y,Jw=new Y,Kh=new Y,TP=new Y,Qw=new Y,MP=new Y;class IU{constructor(t=new Y,n=new Y(0,0,-1)){this.origin=t,this.direction=n}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,fc)),this}closestPointToPoint(t,n){n.subVectors(t,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=fc.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(fc.copy(this.origin).addScaledVector(this.direction,n),fc.distanceToSquared(t))}distanceSqToSegment(t,n,r,i){wP.copy(t).add(n).multiplyScalar(.5),Jw.copy(n).sub(t).normalize(),Kh.copy(this.origin).sub(wP);const a=t.distanceTo(n)*.5,o=-this.direction.dot(Jw),s=Kh.dot(this.direction),l=-Kh.dot(Jw),u=Kh.lengthSq(),c=Math.abs(1-o*o);let h,f,d,p;if(c>0)if(h=o*l-s,f=o*s-l,p=a*c,h>=0)if(f>=-p)if(f<=p){const v=1/c;h*=v,f*=v,d=h*(h+o*f+2*s)+f*(o*h+f+2*l)+u}else f=a,h=Math.max(0,-(o*f+s)),d=-h*h+f*(f+2*l)+u;else f=-a,h=Math.max(0,-(o*f+s)),d=-h*h+f*(f+2*l)+u;else f<=-p?(h=Math.max(0,-(-o*a+s)),f=h>0?-a:Math.min(Math.max(-a,-l),a),d=-h*h+f*(f+2*l)+u):f<=p?(h=0,f=Math.min(Math.max(-a,-l),a),d=f*(f+2*l)+u):(h=Math.max(0,-(o*a+s)),f=h>0?a:Math.min(Math.max(-a,-l),a),d=-h*h+f*(f+2*l)+u);else f=o>0?-a:a,h=Math.max(0,-(o*f+s)),d=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(wP).addScaledVector(Jw,f),d}intersectSphere(t,n){fc.subVectors(t.center,this.origin);const r=fc.dot(this.direction),i=fc.dot(fc)-r*r,a=t.radius*t.radius;if(i>a)return null;const o=Math.sqrt(a-i),s=r-o,l=r+o;return l<0?null:s<0?this.at(l,n):this.at(s,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(t.normal)+t.constant)/n;return r>=0?r:null}intersectPlane(t,n){const r=this.distanceToPlane(t);return r===null?null:this.at(r,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let r,i,a,o,s,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(t.min.x-f.x)*u,i=(t.max.x-f.x)*u):(r=(t.max.x-f.x)*u,i=(t.min.x-f.x)*u),c>=0?(a=(t.min.y-f.y)*c,o=(t.max.y-f.y)*c):(a=(t.max.y-f.y)*c,o=(t.min.y-f.y)*c),r>o||a>i||((a>r||isNaN(r))&&(r=a),(o<i||isNaN(i))&&(i=o),h>=0?(s=(t.min.z-f.z)*h,l=(t.max.z-f.z)*h):(s=(t.max.z-f.z)*h,l=(t.min.z-f.z)*h),r>l||s>i)||((s>r||r!==r)&&(r=s),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(t){return this.intersectBox(t,fc)!==null}intersectTriangle(t,n,r,i,a){TP.subVectors(n,t),Qw.subVectors(r,t),MP.crossVectors(TP,Qw);let o=this.direction.dot(MP),s;if(o>0){if(i)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Kh.subVectors(this.origin,t);const l=s*this.direction.dot(Qw.crossVectors(Kh,Qw));if(l<0)return null;const u=s*this.direction.dot(TP.cross(Kh));if(u<0||l+u>o)return null;const c=-s*Kh.dot(MP);return c<0?null:this.at(c/o,a)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cr{constructor(t,n,r,i,a,o,s,l,u,c,h,f,d,p,v,g){cr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,n,r,i,a,o,s,l,u,c,h,f,d,p,v,g)}set(t,n,r,i,a,o,s,l,u,c,h,f,d,p,v,g){const m=this.elements;return m[0]=t,m[4]=n,m[8]=r,m[12]=i,m[1]=a,m[5]=o,m[9]=s,m[13]=l,m[2]=u,m[6]=c,m[10]=h,m[14]=f,m[3]=d,m[7]=p,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cr().fromArray(this.elements)}copy(t){const n=this.elements,r=t.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(t){const n=this.elements,r=t.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,r){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,n,r){return this.set(t.x,n.x,r.x,0,t.y,n.y,r.y,0,t.z,n.z,r.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,r=t.elements,i=1/Ng.setFromMatrixColumn(t,0).length(),a=1/Ng.setFromMatrixColumn(t,1).length(),o=1/Ng.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*a,n[5]=r[5]*a,n[6]=r[6]*a,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){const n=this.elements,r=t.x,i=t.y,a=t.z,o=Math.cos(r),s=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if(t.order==="XYZ"){const f=o*c,d=o*h,p=s*c,v=s*h;n[0]=l*c,n[4]=-l*h,n[8]=u,n[1]=d+p*u,n[5]=f-v*u,n[9]=-s*l,n[2]=v-f*u,n[6]=p+d*u,n[10]=o*l}else if(t.order==="YXZ"){const f=l*c,d=l*h,p=u*c,v=u*h;n[0]=f+v*s,n[4]=p*s-d,n[8]=o*u,n[1]=o*h,n[5]=o*c,n[9]=-s,n[2]=d*s-p,n[6]=v+f*s,n[10]=o*l}else if(t.order==="ZXY"){const f=l*c,d=l*h,p=u*c,v=u*h;n[0]=f-v*s,n[4]=-o*h,n[8]=p+d*s,n[1]=d+p*s,n[5]=o*c,n[9]=v-f*s,n[2]=-o*u,n[6]=s,n[10]=o*l}else if(t.order==="ZYX"){const f=o*c,d=o*h,p=s*c,v=s*h;n[0]=l*c,n[4]=p*u-d,n[8]=f*u+v,n[1]=l*h,n[5]=v*u+f,n[9]=d*u-p,n[2]=-u,n[6]=s*l,n[10]=o*l}else if(t.order==="YZX"){const f=o*l,d=o*u,p=s*l,v=s*u;n[0]=l*c,n[4]=v-f*h,n[8]=p*h+d,n[1]=h,n[5]=o*c,n[9]=-s*c,n[2]=-u*c,n[6]=d*h+p,n[10]=f-v*h}else if(t.order==="XZY"){const f=o*l,d=o*u,p=s*l,v=s*u;n[0]=l*c,n[4]=-h,n[8]=u*c,n[1]=f*h+v,n[5]=o*c,n[9]=d*h-p,n[2]=p*h-d,n[6]=s*c,n[10]=v*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(rHt,t,iHt)}lookAt(t,n,r){const i=this.elements;return Bo.subVectors(t,n),Bo.lengthSq()===0&&(Bo.z=1),Bo.normalize(),Zh.crossVectors(r,Bo),Zh.lengthSq()===0&&(Math.abs(r.z)===1?Bo.x+=1e-4:Bo.z+=1e-4,Bo.normalize(),Zh.crossVectors(r,Bo)),Zh.normalize(),tT.crossVectors(Bo,Zh),i[0]=Zh.x,i[4]=tT.x,i[8]=Bo.x,i[1]=Zh.y,i[5]=tT.y,i[9]=Bo.y,i[2]=Zh.z,i[6]=tT.z,i[10]=Bo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const r=t.elements,i=n.elements,a=this.elements,o=r[0],s=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],p=r[2],v=r[6],g=r[10],m=r[14],_=r[3],y=r[7],x=r[11],S=r[15],b=i[0],w=i[4],A=i[8],T=i[12],M=i[1],C=i[5],E=i[9],D=i[13],I=i[2],L=i[6],P=i[10],B=i[14],N=i[3],k=i[7],U=i[11],Z=i[15];return a[0]=o*b+s*M+l*I+u*N,a[4]=o*w+s*C+l*L+u*k,a[8]=o*A+s*E+l*P+u*U,a[12]=o*T+s*D+l*B+u*Z,a[1]=c*b+h*M+f*I+d*N,a[5]=c*w+h*C+f*L+d*k,a[9]=c*A+h*E+f*P+d*U,a[13]=c*T+h*D+f*B+d*Z,a[2]=p*b+v*M+g*I+m*N,a[6]=p*w+v*C+g*L+m*k,a[10]=p*A+v*E+g*P+m*U,a[14]=p*T+v*D+g*B+m*Z,a[3]=_*b+y*M+x*I+S*N,a[7]=_*w+y*C+x*L+S*k,a[11]=_*A+y*E+x*P+S*U,a[15]=_*T+y*D+x*B+S*Z,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],r=t[4],i=t[8],a=t[12],o=t[1],s=t[5],l=t[9],u=t[13],c=t[2],h=t[6],f=t[10],d=t[14],p=t[3],v=t[7],g=t[11],m=t[15];return p*(+a*l*h-i*u*h-a*s*f+r*u*f+i*s*d-r*l*d)+v*(+n*l*d-n*u*f+a*o*f-i*o*d+i*u*c-a*l*c)+g*(+n*u*h-n*s*d-a*o*h+r*o*d+a*s*c-r*u*c)+m*(-i*s*c-n*l*h+n*s*f+i*o*h-r*o*f+r*l*c)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,r){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=n,i[14]=r),this}invert(){const t=this.elements,n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=h*g*u-v*f*u+v*l*d-s*g*d-h*l*m+s*f*m,y=p*f*u-c*g*u-p*l*d+o*g*d+c*l*m-o*f*m,x=c*v*u-p*h*u+p*s*d-o*v*d-c*s*m+o*h*m,S=p*h*l-c*v*l-p*s*f+o*v*f+c*s*g-o*h*g,b=n*_+r*y+i*x+a*S;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/b;return t[0]=_*w,t[1]=(v*f*a-h*g*a-v*i*d+r*g*d+h*i*m-r*f*m)*w,t[2]=(s*g*a-v*l*a+v*i*u-r*g*u-s*i*m+r*l*m)*w,t[3]=(h*l*a-s*f*a-h*i*u+r*f*u+s*i*d-r*l*d)*w,t[4]=y*w,t[5]=(c*g*a-p*f*a+p*i*d-n*g*d-c*i*m+n*f*m)*w,t[6]=(p*l*a-o*g*a-p*i*u+n*g*u+o*i*m-n*l*m)*w,t[7]=(o*f*a-c*l*a+c*i*u-n*f*u-o*i*d+n*l*d)*w,t[8]=x*w,t[9]=(p*h*a-c*v*a-p*r*d+n*v*d+c*r*m-n*h*m)*w,t[10]=(o*v*a-p*s*a+p*r*u-n*v*u-o*r*m+n*s*m)*w,t[11]=(c*s*a-o*h*a-c*r*u+n*h*u+o*r*d-n*s*d)*w,t[12]=S*w,t[13]=(c*v*i-p*h*i+p*r*f-n*v*f-c*r*g+n*h*g)*w,t[14]=(p*s*i-o*v*i-p*r*l+n*v*l+o*r*g-n*s*g)*w,t[15]=(o*h*i-c*s*i+c*r*l-n*h*l-o*r*f+n*s*f)*w,this}scale(t){const n=this.elements,r=t.x,i=t.y,a=t.z;return n[0]*=r,n[4]*=i,n[8]*=a,n[1]*=r,n[5]*=i,n[9]*=a,n[2]*=r,n[6]*=i,n[10]*=a,n[3]*=r,n[7]*=i,n[11]*=a,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(t,n,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),r=Math.sin(t);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const r=Math.cos(n),i=Math.sin(n),a=1-r,o=t.x,s=t.y,l=t.z,u=a*o,c=a*s;return this.set(u*o+r,u*s-i*l,u*l+i*s,0,u*s+i*l,c*s+r,c*l-i*o,0,u*l-i*s,c*l+i*o,a*l*l+r,0,0,0,0,1),this}makeScale(t,n,r){return this.set(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,n,r,i,a,o){return this.set(1,r,a,0,t,1,o,0,n,i,1,0,0,0,0,1),this}compose(t,n,r){const i=this.elements,a=n._x,o=n._y,s=n._z,l=n._w,u=a+a,c=o+o,h=s+s,f=a*u,d=a*c,p=a*h,v=o*c,g=o*h,m=s*h,_=l*u,y=l*c,x=l*h,S=r.x,b=r.y,w=r.z;return i[0]=(1-(v+m))*S,i[1]=(d+x)*S,i[2]=(p-y)*S,i[3]=0,i[4]=(d-x)*b,i[5]=(1-(f+m))*b,i[6]=(g+_)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(g-_)*w,i[10]=(1-(f+v))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,n,r){const i=this.elements;let a=Ng.set(i[0],i[1],i[2]).length();const o=Ng.set(i[4],i[5],i[6]).length(),s=Ng.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),t.x=i[12],t.y=i[13],t.z=i[14],il.copy(this);const u=1/a,c=1/o,h=1/s;return il.elements[0]*=u,il.elements[1]*=u,il.elements[2]*=u,il.elements[4]*=c,il.elements[5]*=c,il.elements[6]*=c,il.elements[8]*=h,il.elements[9]*=h,il.elements[10]*=h,n.setFromRotationMatrix(il),r.x=a,r.y=o,r.z=s,this}makePerspective(t,n,r,i,a,o,s=kc){const l=this.elements,u=2*a/(n-t),c=2*a/(r-i),h=(n+t)/(n-t),f=(r+i)/(r-i);let d,p;if(s===kc)d=-(o+a)/(o-a),p=-2*o*a/(o-a);else if(s===CC)d=-o/(o-a),p=-o*a/(o-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,n,r,i,a,o,s=kc){const l=this.elements,u=1/(n-t),c=1/(r-i),h=1/(o-a),f=(n+t)*u,d=(r+i)*c;let p,v;if(s===kc)p=(o+a)*h,v=-2*h;else if(s===CC)p=a*h,v=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=v,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const n=this.elements,r=t.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(t,n=0){for(let r=0;r<16;r++)this.elements[r]=t[r+n];return this}toArray(t=[],n=0){const r=this.elements;return t[n]=r[0],t[n+1]=r[1],t[n+2]=r[2],t[n+3]=r[3],t[n+4]=r[4],t[n+5]=r[5],t[n+6]=r[6],t[n+7]=r[7],t[n+8]=r[8],t[n+9]=r[9],t[n+10]=r[10],t[n+11]=r[11],t[n+12]=r[12],t[n+13]=r[13],t[n+14]=r[14],t[n+15]=r[15],t}}const Ng=new Y,il=new cr,rHt=new Y(0,0,0),iHt=new Y(1,1,1),Zh=new Y,tT=new Y,Bo=new Y,lX=new cr,uX=new Ko;class Xu{constructor(t=0,n=0,r=0,i=Xu.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,i=this._order){return this._x=t,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const i=t.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(sa(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-sa(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(sa(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-sa(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(sa(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-sa(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return lX.makeRotationFromQuaternion(t),this.setFromRotationMatrix(lX,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return uX.setFromEuler(this),this.setFromQuaternion(uX,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xu.DEFAULT_ORDER="XYZ";class LU{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let aHt=0;const cX=new Y,Bg=new Ko,dc=new cr,eT=new Y,z_=new Y,oHt=new Y,sHt=new Ko,hX=new Y(1,0,0),fX=new Y(0,1,0),dX=new Y(0,0,1),pX={type:"added"},lHt={type:"removed"},kg={type:"childadded",child:null},AP={type:"childremoved",child:null};class Ma extends _d{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:aHt++}),this.uuid=Il(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ma.DEFAULT_UP.clone();const t=new Y,n=new Xu,r=new Ko,i=new Y(1,1,1);function a(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(a),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new cr},normalMatrix:{value:new yn}}),this.matrix=new cr,this.matrixWorld=new cr,this.matrixAutoUpdate=Ma.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ma.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new LU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Bg.setFromAxisAngle(t,n),this.quaternion.multiply(Bg),this}rotateOnWorldAxis(t,n){return Bg.setFromAxisAngle(t,n),this.quaternion.premultiply(Bg),this}rotateX(t){return this.rotateOnAxis(hX,t)}rotateY(t){return this.rotateOnAxis(fX,t)}rotateZ(t){return this.rotateOnAxis(dX,t)}translateOnAxis(t,n){return cX.copy(t).applyQuaternion(this.quaternion),this.position.add(cX.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(hX,t)}translateY(t){return this.translateOnAxis(fX,t)}translateZ(t){return this.translateOnAxis(dX,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(dc.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?eT.copy(t):eT.set(t,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),z_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dc.lookAt(z_,eT,this.up):dc.lookAt(eT,z_,this.up),this.quaternion.setFromRotationMatrix(dc),i&&(dc.extractRotation(i.matrixWorld),Bg.setFromRotationMatrix(dc),this.quaternion.premultiply(Bg.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(pX),kg.child=t,this.dispatchEvent(kg),kg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return n!==-1&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(lHt),AP.child=t,this.dispatchEvent(AP),AP.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),dc.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),dc.multiply(t.parent.matrixWorld)),t.applyMatrix4(dc),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(pX),kg.child=t,this.dispatchEvent(kg),kg.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(t,n);if(o!==void 0)return o}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const i=this.children;for(let a=0,o=i.length;a<o;a++)i[a].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(z_,t,oHt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(z_,sHt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;n!==null&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const a=n[r];(a.matrixWorldAutoUpdate===!0||t===!0)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let a=0,o=i.length;a<o;a++){const s=i[a];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=t===void 0||typeof t=="string",r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(s=>({boxInitialized:s.boxInitialized,boxMin:s.box.min.toArray(),boxMax:s.box.max.toArray(),sphereInitialized:s.sphereInitialized,sphereRadius:s.sphere.radius,sphereCenter:s.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function a(s,l){return s[l.uuid]===void 0&&(s[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(t.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const l=s.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];a(t.shapes,h)}else a(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let l=0,u=this.material.length;l<u;l++)s.push(a(t.materials,this.material[l]));i.material=s}else i.material=a(t.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const l=this.animations[s];i.animations.push(a(t.animations,l))}}if(n){const s=o(t.geometries),l=o(t.materials),u=o(t.textures),c=o(t.images),h=o(t.shapes),f=o(t.skeletons),d=o(t.animations),p=o(t.nodes);s.length>0&&(r.geometries=s),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(s){const l=[];for(const u in s){const c=s[u];delete c.metadata,l.push(c)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),n===!0)for(let r=0;r<t.children.length;r++){const i=t.children[r];this.add(i.clone())}return this}}Ma.DEFAULT_UP=new Y(0,1,0);Ma.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ma.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const al=new Y,pc=new Y,CP=new Y,vc=new Y,Fg=new Y,zg=new Y,vX=new Y,EP=new Y,DP=new Y,IP=new Y;class bl{constructor(t=new Y,n=new Y,r=new Y){this.a=t,this.b=n,this.c=r}static getNormal(t,n,r,i){i.subVectors(r,n),al.subVectors(t,n),i.cross(al);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(t,n,r,i,a){al.subVectors(i,n),pc.subVectors(r,n),CP.subVectors(t,n);const o=al.dot(al),s=al.dot(pc),l=al.dot(CP),u=pc.dot(pc),c=pc.dot(CP),h=o*u-s*s;if(h===0)return a.set(0,0,0),null;const f=1/h,d=(u*l-s*c)*f,p=(o*c-s*l)*f;return a.set(1-d-p,p,d)}static containsPoint(t,n,r,i){return this.getBarycoord(t,n,r,i,vc)===null?!1:vc.x>=0&&vc.y>=0&&vc.x+vc.y<=1}static getInterpolation(t,n,r,i,a,o,s,l){return this.getBarycoord(t,n,r,i,vc)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,vc.x),l.addScaledVector(o,vc.y),l.addScaledVector(s,vc.z),l)}static isFrontFacing(t,n,r,i){return al.subVectors(r,n),pc.subVectors(t,n),al.cross(pc).dot(i)<0}set(t,n,r){return this.a.copy(t),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(t,n,r,i){return this.a.copy(t[n]),this.b.copy(t[r]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,n,r,i){return this.a.fromBufferAttribute(t,n),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return al.subVectors(this.c,this.b),pc.subVectors(this.a,this.b),al.cross(pc).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return bl.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return bl.getBarycoord(t,this.a,this.b,this.c,n)}getInterpolation(t,n,r,i,a){return bl.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}containsPoint(t){return bl.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return bl.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){const r=this.a,i=this.b,a=this.c;let o,s;Fg.subVectors(i,r),zg.subVectors(a,r),EP.subVectors(t,r);const l=Fg.dot(EP),u=zg.dot(EP);if(l<=0&&u<=0)return n.copy(r);DP.subVectors(t,i);const c=Fg.dot(DP),h=zg.dot(DP);if(c>=0&&h<=c)return n.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(Fg,o);IP.subVectors(t,a);const d=Fg.dot(IP),p=zg.dot(IP);if(p>=0&&d<=p)return n.copy(a);const v=d*u-l*p;if(v<=0&&u>=0&&p<=0)return s=u/(u-p),n.copy(r).addScaledVector(zg,s);const g=c*p-d*h;if(g<=0&&h-c>=0&&d-p>=0)return vX.subVectors(a,i),s=(h-c)/(h-c+(d-p)),n.copy(i).addScaledVector(vX,s);const m=1/(g+v+f);return o=v*m,s=f*m,n.copy(r).addScaledVector(Fg,o).addScaledVector(zg,s)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Fst={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jh={h:0,s:0,l:0},nT={h:0,s:0,l:0};function LP(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}class Dn{constructor(t,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,n,r)}set(t,n,r){if(n===void 0&&r===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,n,r);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,n=cu){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,dr.toWorkingColorSpace(this,n),this}setRGB(t,n,r,i=dr.workingColorSpace){return this.r=t,this.g=n,this.b=r,dr.toWorkingColorSpace(this,i),this}setHSL(t,n,r,i=dr.workingColorSpace){if(t=DU(t,1),n=sa(n,0,1),r=sa(r,0,1),n===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+n):r+n-r*n,o=2*r-a;this.r=LP(o,a,t+1/3),this.g=LP(o,a,t),this.b=LP(o,a,t-1/3)}return dr.toWorkingColorSpace(this,i),this}setStyle(t,n=cu){function r(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let a;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,n);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,n);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const a=i[1],o=a.length;if(o===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(a,16),n);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,n);return this}setColorName(t,n=cu){const r=Fst[t.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=$m(t.r),this.g=$m(t.g),this.b=$m(t.b),this}copyLinearToSRGB(t){return this.r=yP(t.r),this.g=yP(t.g),this.b=yP(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=cu){return dr.fromWorkingColorSpace(ya.copy(this),t),Math.round(sa(ya.r*255,0,255))*65536+Math.round(sa(ya.g*255,0,255))*256+Math.round(sa(ya.b*255,0,255))}getHexString(t=cu){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,n=dr.workingColorSpace){dr.fromWorkingColorSpace(ya.copy(this),n);const r=ya.r,i=ya.g,a=ya.b,o=Math.max(r,i,a),s=Math.min(r,i,a);let l,u;const c=(s+o)/2;if(s===o)l=0,u=0;else{const h=o-s;switch(u=c<=.5?h/(o+s):h/(2-o-s),o){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=c,t}getRGB(t,n=dr.workingColorSpace){return dr.fromWorkingColorSpace(ya.copy(this),n),t.r=ya.r,t.g=ya.g,t.b=ya.b,t}getStyle(t=cu){dr.fromWorkingColorSpace(ya.copy(this),t);const n=ya.r,r=ya.g,i=ya.b;return t!==cu?`color(${t} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(t,n,r){return this.getHSL(Jh),this.setHSL(Jh.h+t,Jh.s+n,Jh.l+r)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,r){return this.r=t.r+(n.r-t.r)*r,this.g=t.g+(n.g-t.g)*r,this.b=t.b+(n.b-t.b)*r,this}lerpHSL(t,n){this.getHSL(Jh),t.getHSL(nT);const r=Yx(Jh.h,nT.h,n),i=Yx(Jh.s,nT.s,n),a=Yx(Jh.l,nT.l,n);return this.setHSL(r,i,a),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const n=this.r,r=this.g,i=this.b,a=t.elements;return this.r=a[0]*n+a[3]*r+a[6]*i,this.g=a[1]*n+a[4]*r+a[7]*i,this.b=a[2]*n+a[5]*r+a[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ya=new Dn;Dn.NAMES=Fst;let uHt=0;class N0 extends _d{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:uHt++}),this.uuid=Il(),this.name="",this.type="Material",this.blending=Hm,this.side=ed,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=I3,this.blendDst=L3,this.blendEquation=Mp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dn(0,0,0),this.blendAlpha=0,this.depthFunc=_C,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=eX,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ig,this.stencilZFail=Ig,this.stencilZPass=Ig,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const n in t){const r=t[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(t){const n=t===void 0||typeof t=="string";n&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Hm&&(r.blending=this.blending),this.side!==ed&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==I3&&(r.blendSrc=this.blendSrc),this.blendDst!==L3&&(r.blendDst=this.blendDst),this.blendEquation!==Mp&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==_C&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==eX&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ig&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Ig&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Ig&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const o=[];for(const s in a){const l=a[s];delete l.metadata,o.push(l)}return o}if(n){const a=i(t.textures),o=i(t.images);a.length>0&&(r.textures=a),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const n=t.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=n[a].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class dl extends N0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xu,this.combine=wst,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const fi=new Y,rT=new Ee;class Ll{constructor(t,n,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=t!==void 0?t.length/n:0,this.normalized=r,this.usage=B3,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Bc,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Nst("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,n,r){t*=this.itemSize,r*=n.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[t+i]=n.array[r+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)rT.fromBufferAttribute(this,n),rT.applyMatrix3(t),this.setXY(n,rT.x,rT.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix3(t),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyMatrix4(t){for(let n=0,r=this.count;n<r;n++)fi.fromBufferAttribute(this,n),fi.applyMatrix4(t),this.setXYZ(n,fi.x,fi.y,fi.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)fi.fromBufferAttribute(this,n),fi.applyNormalMatrix(t),this.setXYZ(n,fi.x,fi.y,fi.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)fi.fromBufferAttribute(this,n),fi.transformDirection(t),this.setXYZ(n,fi.x,fi.y,fi.z);return this}set(t,n=0){return this.array.set(t,n),this}getComponent(t,n){let r=this.array[t*this.itemSize+n];return this.normalized&&(r=xl(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=or(r,this.array)),this.array[t*this.itemSize+n]=r,this}getX(t){let n=this.array[t*this.itemSize];return this.normalized&&(n=xl(n,this.array)),n}setX(t,n){return this.normalized&&(n=or(n,this.array)),this.array[t*this.itemSize]=n,this}getY(t){let n=this.array[t*this.itemSize+1];return this.normalized&&(n=xl(n,this.array)),n}setY(t,n){return this.normalized&&(n=or(n,this.array)),this.array[t*this.itemSize+1]=n,this}getZ(t){let n=this.array[t*this.itemSize+2];return this.normalized&&(n=xl(n,this.array)),n}setZ(t,n){return this.normalized&&(n=or(n,this.array)),this.array[t*this.itemSize+2]=n,this}getW(t){let n=this.array[t*this.itemSize+3];return this.normalized&&(n=xl(n,this.array)),n}setW(t,n){return this.normalized&&(n=or(n,this.array)),this.array[t*this.itemSize+3]=n,this}setXY(t,n,r){return t*=this.itemSize,this.normalized&&(n=or(n,this.array),r=or(r,this.array)),this.array[t+0]=n,this.array[t+1]=r,this}setXYZ(t,n,r,i){return t*=this.itemSize,this.normalized&&(n=or(n,this.array),r=or(r,this.array),i=or(i,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,n,r,i,a){return t*=this.itemSize,this.normalized&&(n=or(n,this.array),r=or(r,this.array),i=or(i,this.array),a=or(a,this.array)),this.array[t+0]=n,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=a,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==B3&&(t.usage=this.usage),t}}class zst extends Ll{constructor(t,n,r){super(new Uint16Array(t),n,r)}}class Ust extends Ll{constructor(t,n,r){super(new Uint32Array(t),n,r)}}class mi extends Ll{constructor(t,n,r){super(new Float32Array(t),n,r)}}let cHt=0;const cs=new cr,PP=new Ma,Ug=new Y,ko=new xd,U_=new xd,Yi=new Y;class Ci extends _d{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:cHt++}),this.uuid=Il(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Ost(t)?Ust:zst)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,n){return this.attributes[t]=n,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,n,r=0){this.groups.push({start:t,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,n){this.drawRange.start=t,this.drawRange.count=n}applyMatrix4(t){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(t),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new yn().getNormalMatrix(t);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return cs.makeRotationFromQuaternion(t),this.applyMatrix4(cs),this}rotateX(t){return cs.makeRotationX(t),this.applyMatrix4(cs),this}rotateY(t){return cs.makeRotationY(t),this.applyMatrix4(cs),this}rotateZ(t){return cs.makeRotationZ(t),this.applyMatrix4(cs),this}translate(t,n,r){return cs.makeTranslation(t,n,r),this.applyMatrix4(cs),this}scale(t,n,r){return cs.makeScale(t,n,r),this.applyMatrix4(cs),this}lookAt(t){return PP.lookAt(t),PP.updateMatrix(),this.applyMatrix4(PP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ug).negate(),this.translate(Ug.x,Ug.y,Ug.z),this}setFromPoints(t){const n=[];for(let r=0,i=t.length;r<i;r++){const a=t[r];n.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new mi(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xd);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),n)for(let r=0,i=n.length;r<i;r++){const a=n[r];ko.setFromBufferAttribute(a),this.morphTargetsRelative?(Yi.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Yi),Yi.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Yi)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new O0);const t=this.attributes.position,n=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(t){const r=this.boundingSphere.center;if(ko.setFromBufferAttribute(t),n)for(let a=0,o=n.length;a<o;a++){const s=n[a];U_.setFromBufferAttribute(s),this.morphTargetsRelative?(Yi.addVectors(ko.min,U_.min),ko.expandByPoint(Yi),Yi.addVectors(ko.max,U_.max),ko.expandByPoint(Yi)):(ko.expandByPoint(U_.min),ko.expandByPoint(U_.max))}ko.getCenter(r);let i=0;for(let a=0,o=t.count;a<o;a++)Yi.fromBufferAttribute(t,a),i=Math.max(i,r.distanceToSquared(Yi));if(n)for(let a=0,o=n.length;a<o;a++){const s=n[a],l=this.morphTargetsRelative;for(let u=0,c=s.count;u<c;u++)Yi.fromBufferAttribute(s,u),l&&(Ug.fromBufferAttribute(t,u),Yi.add(Ug)),i=Math.max(i,r.distanceToSquared(Yi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,n=this.attributes;if(t===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,a=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ll(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),s=[],l=[];for(let A=0;A<r.count;A++)s[A]=new Y,l[A]=new Y;const u=new Y,c=new Y,h=new Y,f=new Ee,d=new Ee,p=new Ee,v=new Y,g=new Y;function m(A,T,M){u.fromBufferAttribute(r,A),c.fromBufferAttribute(r,T),h.fromBufferAttribute(r,M),f.fromBufferAttribute(a,A),d.fromBufferAttribute(a,T),p.fromBufferAttribute(a,M),c.sub(u),h.sub(u),d.sub(f),p.sub(f);const C=1/(d.x*p.y-p.x*d.y);isFinite(C)&&(v.copy(c).multiplyScalar(p.y).addScaledVector(h,-d.y).multiplyScalar(C),g.copy(h).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(C),s[A].add(v),s[T].add(v),s[M].add(v),l[A].add(g),l[T].add(g),l[M].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:t.count}]);for(let A=0,T=_.length;A<T;++A){const M=_[A],C=M.start,E=M.count;for(let D=C,I=C+E;D<I;D+=3)m(t.getX(D+0),t.getX(D+1),t.getX(D+2))}const y=new Y,x=new Y,S=new Y,b=new Y;function w(A){S.fromBufferAttribute(i,A),b.copy(S);const T=s[A];y.copy(T),y.sub(S.multiplyScalar(S.dot(T))).normalize(),x.crossVectors(b,T);const C=x.dot(l[A])<0?-1:1;o.setXYZW(A,y.x,y.y,y.z,C)}for(let A=0,T=_.length;A<T;++A){const M=_[A],C=M.start,E=M.count;for(let D=C,I=C+E;D<I;D+=3)w(t.getX(D+0)),w(t.getX(D+1)),w(t.getX(D+2))}}computeVertexNormals(){const t=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ll(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new Y,a=new Y,o=new Y,s=new Y,l=new Y,u=new Y,c=new Y,h=new Y;if(t)for(let f=0,d=t.count;f<d;f+=3){const p=t.getX(f+0),v=t.getX(f+1),g=t.getX(f+2);i.fromBufferAttribute(n,p),a.fromBufferAttribute(n,v),o.fromBufferAttribute(n,g),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),s.fromBufferAttribute(r,p),l.fromBufferAttribute(r,v),u.fromBufferAttribute(r,g),s.add(c),l.add(c),u.add(c),r.setXYZ(p,s.x,s.y,s.z),r.setXYZ(v,l.x,l.y,l.z),r.setXYZ(g,u.x,u.y,u.z)}else for(let f=0,d=n.count;f<d;f+=3)i.fromBufferAttribute(n,f+0),a.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),c.subVectors(o,a),h.subVectors(i,a),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let n=0,r=t.count;n<r;n++)Yi.fromBufferAttribute(t,n),Yi.normalize(),t.setXYZ(n,Yi.x,Yi.y,Yi.z)}toNonIndexed(){function t(s,l){const u=s.array,c=s.itemSize,h=s.normalized,f=new u.constructor(l.length*c);let d=0,p=0;for(let v=0,g=l.length;v<g;v++){s.isInterleavedBufferAttribute?d=l[v]*s.data.stride+s.offset:d=l[v]*c;for(let m=0;m<c;m++)f[p++]=u[d++]}return new Ll(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Ci,r=this.index.array,i=this.attributes;for(const s in i){const l=i[s],u=t(l,r);n.setAttribute(s,u)}const a=this.morphAttributes;for(const s in a){const l=[],u=a[s];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=t(f,r);l.push(d)}n.morphAttributes[s]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,l=o.length;s<l;s++){const u=o[s];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const n=this.index;n!==null&&(t.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];t.data.attributes[l]=u.toJSON(t.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(t.data))}c.length>0&&(i[l]=c,a=!0)}a&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=t.name;const r=t.index;r!==null&&this.setIndex(r.clone(n));const i=t.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(n))}const a=t.morphAttributes;for(const u in a){const c=[],h=a[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const s=t.boundingBox;s!==null&&(this.boundingBox=s.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gX=new cr,op=new IU,iT=new O0,mX=new Y,Vg=new Y,Gg=new Y,Hg=new Y,RP=new Y,aT=new Y,oT=new Ee,sT=new Ee,lT=new Ee,yX=new Y,_X=new Y,xX=new Y,uT=new Y,cT=new Y;class bi extends Ma{constructor(t=new Ci,n=new dl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}getVertexPosition(t,n){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,t);const s=this.morphTargetInfluences;if(a&&s){aT.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=s[l],h=a[l];c!==0&&(RP.fromBufferAttribute(h,t),o?aT.addScaledVector(RP,c):aT.addScaledVector(RP.sub(n),c))}n.add(aT)}return n}raycast(t,n){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),iT.copy(r.boundingSphere),iT.applyMatrix4(a),op.copy(t.ray).recast(t.near),!(iT.containsPoint(op.origin)===!1&&(op.intersectSphere(iT,mX)===null||op.origin.distanceToSquared(mX)>(t.far-t.near)**2))&&(gX.copy(a).invert(),op.copy(t.ray).applyMatrix4(gX),!(r.boundingBox!==null&&op.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(t,n,op)))}_computeIntersections(t,n,r){let i;const a=this.geometry,o=this.material,s=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,h=a.attributes.normal,f=a.groups,d=a.drawRange;if(s!==null)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const g=f[p],m=o[g.materialIndex],_=Math.max(g.start,d.start),y=Math.min(s.count,Math.min(g.start+g.count,d.start+d.count));for(let x=_,S=y;x<S;x+=3){const b=s.getX(x),w=s.getX(x+1),A=s.getX(x+2);i=hT(this,m,t,r,u,c,h,b,w,A),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,d.start),v=Math.min(s.count,d.start+d.count);for(let g=p,m=v;g<m;g+=3){const _=s.getX(g),y=s.getX(g+1),x=s.getX(g+2);i=hT(this,o,t,r,u,c,h,_,y,x),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,v=f.length;p<v;p++){const g=f[p],m=o[g.materialIndex],_=Math.max(g.start,d.start),y=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let x=_,S=y;x<S;x+=3){const b=x,w=x+1,A=x+2;i=hT(this,m,t,r,u,c,h,b,w,A),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,n.push(i))}}else{const p=Math.max(0,d.start),v=Math.min(l.count,d.start+d.count);for(let g=p,m=v;g<m;g+=3){const _=g,y=g+1,x=g+2;i=hT(this,o,t,r,u,c,h,_,y,x),i&&(i.faceIndex=Math.floor(g/3),n.push(i))}}}}function hHt(e,t,n,r,i,a,o,s){let l;if(t.side===bo?l=r.intersectTriangle(o,a,i,!0,s):l=r.intersectTriangle(i,a,o,t.side===ed,s),l===null)return null;cT.copy(s),cT.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(cT);return u<n.near||u>n.far?null:{distance:u,point:cT.clone(),object:e}}function hT(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,Vg),e.getVertexPosition(l,Gg),e.getVertexPosition(u,Hg);const c=hHt(e,t,n,r,Vg,Gg,Hg,uT);if(c){i&&(oT.fromBufferAttribute(i,s),sT.fromBufferAttribute(i,l),lT.fromBufferAttribute(i,u),c.uv=bl.getInterpolation(uT,Vg,Gg,Hg,oT,sT,lT,new Ee)),a&&(oT.fromBufferAttribute(a,s),sT.fromBufferAttribute(a,l),lT.fromBufferAttribute(a,u),c.uv1=bl.getInterpolation(uT,Vg,Gg,Hg,oT,sT,lT,new Ee)),o&&(yX.fromBufferAttribute(o,s),_X.fromBufferAttribute(o,l),xX.fromBufferAttribute(o,u),c.normal=bl.getInterpolation(uT,Vg,Gg,Hg,yX,_X,xX,new Y),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a:s,b:l,c:u,normal:new Y,materialIndex:0};bl.getNormal(Vg,Gg,Hg,h.normal),c.face=h}return c}class Av extends Ci{constructor(t=1,n=1,r=1,i=1,a=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:a,depthSegments:o};const s=this;i=Math.floor(i),a=Math.floor(a),o=Math.floor(o);const l=[],u=[],c=[],h=[];let f=0,d=0;p("z","y","x",-1,-1,r,n,t,o,a,0),p("z","y","x",1,-1,r,n,-t,o,a,1),p("x","z","y",1,1,t,r,n,i,o,2),p("x","z","y",1,-1,t,r,-n,i,o,3),p("x","y","z",1,-1,t,n,r,i,a,4),p("x","y","z",-1,-1,t,n,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new mi(u,3)),this.setAttribute("normal",new mi(c,3)),this.setAttribute("uv",new mi(h,2));function p(v,g,m,_,y,x,S,b,w,A,T){const M=x/w,C=S/A,E=x/2,D=S/2,I=b/2,L=w+1,P=A+1;let B=0,N=0;const k=new Y;for(let U=0;U<P;U++){const Z=U*C-D;for(let nt=0;nt<L;nt++){const ct=nt*M-E;k[v]=ct*_,k[g]=Z*y,k[m]=I,u.push(k.x,k.y,k.z),k[v]=0,k[g]=0,k[m]=b>0?1:-1,c.push(k.x,k.y,k.z),h.push(nt/w),h.push(1-U/A),B+=1}}for(let U=0;U<A;U++)for(let Z=0;Z<w;Z++){const nt=f+Z+L*U,ct=f+Z+L*(U+1),K=f+(Z+1)+L*(U+1),$=f+(Z+1)+L*U;l.push(nt,ct,$),l.push(ct,K,$),N+=6}s.addGroup(d,N,T),d+=N,f+=B}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Av(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function zy(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Ra(e){const t={};for(let n=0;n<e.length;n++){const r=zy(e[n]);for(const i in r)t[i]=r[i]}return t}function fHt(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}function Vst(e){const t=e.getRenderTarget();return t===null?e.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:dr.workingColorSpace}const PU={clone:zy,merge:Ra};var dHt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pHt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class lh extends N0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dHt,this.fragmentShader=pHt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=zy(t.uniforms),this.uniformsGroups=fHt(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const n=super.toJSON(t);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class Gst extends Ma{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cr,this.projectionMatrix=new cr,this.projectionMatrixInverse=new cr,this.coordinateSystem=kc}copy(t,n){return super.copy(t,n),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,n){super.updateWorldMatrix(t,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Qh=new Y,bX=new Ee,SX=new Ee;class Ds extends Gst{constructor(t=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const n=.5*this.getFilmHeight()/t;this.fov=n1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(jx*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return n1*2*Math.atan(Math.tan(jx*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,n,r){Qh.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Qh.x,Qh.y).multiplyScalar(-t/Qh.z),Qh.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Qh.x,Qh.y).multiplyScalar(-t/Qh.z)}getViewSize(t,n){return this.getViewBounds(t,bX,SX),n.subVectors(SX,bX)}setViewOffset(t,n,r,i,a,o){this.aspect=t/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let n=t*Math.tan(jx*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,a=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;a+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const s=this.filmOffset;s!==0&&(a+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,n,n-r,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Wg=-90,$g=1;class vHt extends Ma{constructor(t,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ds(Wg,$g,t,n);i.layers=this.layers,this.add(i);const a=new Ds(Wg,$g,t,n);a.layers=this.layers,this.add(a);const o=new Ds(Wg,$g,t,n);o.layers=this.layers,this.add(o);const s=new Ds(Wg,$g,t,n);s.layers=this.layers,this.add(s);const l=new Ds(Wg,$g,t,n);l.layers=this.layers,this.add(l);const u=new Ds(Wg,$g,t,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const t=this.coordinateSystem,n=this.children.concat(),[r,i,a,o,s,l]=n;for(const u of n)this.remove(u);if(t===kc)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(t===CC)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const u of n)this.add(u),u.updateMatrixWorld()}update(t,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[a,o,s,l,u,c]=this.children,h=t.getRenderTarget(),f=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),p=t.xr.enabled;t.xr.enabled=!1;const v=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0,i),t.render(n,a),t.setRenderTarget(r,1,i),t.render(n,o),t.setRenderTarget(r,2,i),t.render(n,s),t.setRenderTarget(r,3,i),t.render(n,l),t.setRenderTarget(r,4,i),t.render(n,u),r.texture.generateMipmaps=v,t.setRenderTarget(r,5,i),t.render(n,c),t.setRenderTarget(h,f,d),t.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Hst extends Ta{constructor(t,n,r,i,a,o,s,l,u,c){t=t!==void 0?t:[],n=n!==void 0?n:By,super(t,n,r,i,a,o,s,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class gHt extends Mv{constructor(t=1,n={}){super(t,t,n),this.isWebGLCubeRenderTarget=!0;const r={width:t,height:t,depth:1},i=[r,r,r,r,r,r];this.texture=new Hst(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:_l}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Av(5,5,5),a=new lh({name:"CubemapFromEquirect",uniforms:zy(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:bo,blending:Of});a.uniforms.tEquirect.value=n;const o=new bi(i,a),s=n.minFilter;return n.minFilter===jp&&(n.minFilter=_l),new vHt(1,10,this).update(t,o),n.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(t,n,r,i){const a=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(n,r,i);t.setRenderTarget(a)}}const OP=new Y,mHt=new Y,yHt=new yn;class yp{constructor(t=new Y(1,0,0),n=0){this.isPlane=!0,this.normal=t,this.constant=n}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,r,i){return this.normal.set(t,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,r){const i=OP.subVectors(r,n).cross(mHt.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,n){const r=t.delta(OP),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):null;const a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:n.copy(t.start).addScaledVector(r,a)}intersectsLine(t){const n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const r=n||yHt.getNormalMatrix(t),i=this.coplanarPoint(OP).applyMatrix4(t),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sp=new O0,fT=new Y;class Wst{constructor(t=new yp,n=new yp,r=new yp,i=new yp,a=new yp,o=new yp){this.planes=[t,n,r,i,a,o]}set(t,n,r,i,a,o){const s=this.planes;return s[0].copy(t),s[1].copy(n),s[2].copy(r),s[3].copy(i),s[4].copy(a),s[5].copy(o),this}copy(t){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t,n=kc){const r=this.planes,i=t.elements,a=i[0],o=i[1],s=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],p=i[9],v=i[10],g=i[11],m=i[12],_=i[13],y=i[14],x=i[15];if(r[0].setComponents(l-a,f-u,g-d,x-m).normalize(),r[1].setComponents(l+a,f+u,g+d,x+m).normalize(),r[2].setComponents(l+o,f+c,g+p,x+_).normalize(),r[3].setComponents(l-o,f-c,g-p,x-_).normalize(),r[4].setComponents(l-s,f-h,g-v,x-y).normalize(),n===kc)r[5].setComponents(l+s,f+h,g+v,x+y).normalize();else if(n===CC)r[5].setComponents(s,h,v,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),sp.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const n=t.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),sp.copy(n.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(sp)}intersectsSprite(t){return sp.center.set(0,0,0),sp.radius=.7071067811865476,sp.applyMatrix4(t.matrixWorld),this.intersectsSphere(sp)}intersectsSphere(t){const n=this.planes,r=t.center,i=-t.radius;for(let a=0;a<6;a++)if(n[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(t){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(fT.x=i.normal.x>0?t.max.x:t.min.x,fT.y=i.normal.y>0?t.max.y:t.min.y,fT.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(fT)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function $st(){let e=null,t=!1,n=null,r=null;function i(a,o){n(a,o),r=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&n!==null&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(a){n=a},setContext:function(a){e=a}}}function _Ht(e){const t=new WeakMap;function n(s,l){const u=s.array,c=s.usage,h=u.byteLength,f=e.createBuffer();e.bindBuffer(l,f),e.bufferData(l,u,c),s.onUploadCallback();let d;if(u instanceof Float32Array)d=e.FLOAT;else if(u instanceof Uint16Array)s.isFloat16BufferAttribute?d=e.HALF_FLOAT:d=e.UNSIGNED_SHORT;else if(u instanceof Int16Array)d=e.SHORT;else if(u instanceof Uint32Array)d=e.UNSIGNED_INT;else if(u instanceof Int32Array)d=e.INT;else if(u instanceof Int8Array)d=e.BYTE;else if(u instanceof Uint8Array)d=e.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)d=e.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:d,bytesPerElement:u.BYTES_PER_ELEMENT,version:s.version,size:h}}function r(s,l,u){const c=l.array,h=l._updateRange,f=l.updateRanges;if(e.bindBuffer(u,s),h.count===-1&&f.length===0&&e.bufferSubData(u,0,c),f.length!==0){for(let d=0,p=f.length;d<p;d++){const v=f[d];e.bufferSubData(u,v.start*c.BYTES_PER_ELEMENT,c,v.start,v.count)}l.clearUpdateRanges()}h.count!==-1&&(e.bufferSubData(u,h.offset*c.BYTES_PER_ELEMENT,c,h.offset,h.count),h.count=-1),l.onUploadCallback()}function i(s){return s.isInterleavedBufferAttribute&&(s=s.data),t.get(s)}function a(s){s.isInterleavedBufferAttribute&&(s=s.data);const l=t.get(s);l&&(e.deleteBuffer(l.buffer),t.delete(s))}function o(s,l){if(s.isGLBufferAttribute){const c=t.get(s);(!c||c.version<s.version)&&t.set(s,{buffer:s.buffer,type:s.type,bytesPerElement:s.elementSize,version:s.version});return}s.isInterleavedBufferAttribute&&(s=s.data);const u=t.get(s);if(u===void 0)t.set(s,n(s,l));else if(u.version<s.version){if(u.size!==s.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,s,l),u.version=s.version}}return{get:i,remove:a,update:o}}class tS extends Ci{constructor(t=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:r,heightSegments:i};const a=t/2,o=n/2,s=Math.floor(r),l=Math.floor(i),u=s+1,c=l+1,h=t/s,f=n/l,d=[],p=[],v=[],g=[];for(let m=0;m<c;m++){const _=m*f-o;for(let y=0;y<u;y++){const x=y*h-a;p.push(x,-_,0),v.push(0,0,1),g.push(y/s),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let _=0;_<s;_++){const y=_+u*m,x=_+u*(m+1),S=_+1+u*(m+1),b=_+1+u*m;d.push(y,x,b),d.push(x,S,b)}this.setIndex(d),this.setAttribute("position",new mi(p,3)),this.setAttribute("normal",new mi(v,3)),this.setAttribute("uv",new mi(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new tS(t.width,t.height,t.widthSegments,t.heightSegments)}}var xHt=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,bHt=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,SHt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,wHt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,THt=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,MHt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,AHt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,CHt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,EHt=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,DHt=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,IHt=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,LHt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,PHt=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,RHt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,OHt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,NHt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,BHt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,kHt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,FHt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zHt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,UHt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,VHt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,GHt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,HHt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,WHt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$Ht=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XHt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,jHt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,YHt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,qHt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KHt="gl_FragColor = linearToOutputTexel( gl_FragColor );",ZHt=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,JHt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,QHt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tWt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,eWt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,nWt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rWt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,iWt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aWt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,oWt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sWt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lWt=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,uWt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,cWt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,hWt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,fWt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,dWt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,pWt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vWt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,gWt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,mWt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yWt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,_Wt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xWt=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bWt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,SWt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wWt=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,TWt=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,MWt=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AWt=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,CWt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,EWt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,DWt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,IWt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,LWt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,PWt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,RWt=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,OWt=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,NWt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,BWt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kWt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,FWt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,zWt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,UWt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VWt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GWt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,HWt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,WWt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,$Wt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,XWt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,jWt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YWt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qWt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KWt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,ZWt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,JWt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,QWt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,t6t=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,e6t=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,n6t=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,r6t=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,i6t=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,a6t=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,o6t=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,s6t=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,l6t=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,u6t=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,c6t=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,h6t=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,f6t=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,d6t=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, newPeak * vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,p6t=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,v6t=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,g6t=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,m6t=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,y6t=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,_6t=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const x6t=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,b6t=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,S6t=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,w6t=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,T6t=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,M6t=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,A6t=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,C6t=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,E6t=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,D6t=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,I6t=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,L6t=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P6t=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R6t=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,O6t=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,N6t=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,B6t=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,k6t=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,F6t=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,z6t=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,U6t=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,V6t=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,G6t=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,H6t=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W6t=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,$6t=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,X6t=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,j6t=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y6t=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,q6t=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,K6t=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Z6t=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,J6t=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q6t=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mn={alphahash_fragment:xHt,alphahash_pars_fragment:bHt,alphamap_fragment:SHt,alphamap_pars_fragment:wHt,alphatest_fragment:THt,alphatest_pars_fragment:MHt,aomap_fragment:AHt,aomap_pars_fragment:CHt,batching_pars_vertex:EHt,batching_vertex:DHt,begin_vertex:IHt,beginnormal_vertex:LHt,bsdfs:PHt,iridescence_fragment:RHt,bumpmap_pars_fragment:OHt,clipping_planes_fragment:NHt,clipping_planes_pars_fragment:BHt,clipping_planes_pars_vertex:kHt,clipping_planes_vertex:FHt,color_fragment:zHt,color_pars_fragment:UHt,color_pars_vertex:VHt,color_vertex:GHt,common:HHt,cube_uv_reflection_fragment:WHt,defaultnormal_vertex:$Ht,displacementmap_pars_vertex:XHt,displacementmap_vertex:jHt,emissivemap_fragment:YHt,emissivemap_pars_fragment:qHt,colorspace_fragment:KHt,colorspace_pars_fragment:ZHt,envmap_fragment:JHt,envmap_common_pars_fragment:QHt,envmap_pars_fragment:tWt,envmap_pars_vertex:eWt,envmap_physical_pars_fragment:dWt,envmap_vertex:nWt,fog_vertex:rWt,fog_pars_vertex:iWt,fog_fragment:aWt,fog_pars_fragment:oWt,gradientmap_pars_fragment:sWt,lightmap_fragment:lWt,lightmap_pars_fragment:uWt,lights_lambert_fragment:cWt,lights_lambert_pars_fragment:hWt,lights_pars_begin:fWt,lights_toon_fragment:pWt,lights_toon_pars_fragment:vWt,lights_phong_fragment:gWt,lights_phong_pars_fragment:mWt,lights_physical_fragment:yWt,lights_physical_pars_fragment:_Wt,lights_fragment_begin:xWt,lights_fragment_maps:bWt,lights_fragment_end:SWt,logdepthbuf_fragment:wWt,logdepthbuf_pars_fragment:TWt,logdepthbuf_pars_vertex:MWt,logdepthbuf_vertex:AWt,map_fragment:CWt,map_pars_fragment:EWt,map_particle_fragment:DWt,map_particle_pars_fragment:IWt,metalnessmap_fragment:LWt,metalnessmap_pars_fragment:PWt,morphinstance_vertex:RWt,morphcolor_vertex:OWt,morphnormal_vertex:NWt,morphtarget_pars_vertex:BWt,morphtarget_vertex:kWt,normal_fragment_begin:FWt,normal_fragment_maps:zWt,normal_pars_fragment:UWt,normal_pars_vertex:VWt,normal_vertex:GWt,normalmap_pars_fragment:HWt,clearcoat_normal_fragment_begin:WWt,clearcoat_normal_fragment_maps:$Wt,clearcoat_pars_fragment:XWt,iridescence_pars_fragment:jWt,opaque_fragment:YWt,packing:qWt,premultiplied_alpha_fragment:KWt,project_vertex:ZWt,dithering_fragment:JWt,dithering_pars_fragment:QWt,roughnessmap_fragment:t6t,roughnessmap_pars_fragment:e6t,shadowmap_pars_fragment:n6t,shadowmap_pars_vertex:r6t,shadowmap_vertex:i6t,shadowmask_pars_fragment:a6t,skinbase_vertex:o6t,skinning_pars_vertex:s6t,skinning_vertex:l6t,skinnormal_vertex:u6t,specularmap_fragment:c6t,specularmap_pars_fragment:h6t,tonemapping_fragment:f6t,tonemapping_pars_fragment:d6t,transmission_fragment:p6t,transmission_pars_fragment:v6t,uv_pars_fragment:g6t,uv_pars_vertex:m6t,uv_vertex:y6t,worldpos_vertex:_6t,background_vert:x6t,background_frag:b6t,backgroundCube_vert:S6t,backgroundCube_frag:w6t,cube_vert:T6t,cube_frag:M6t,depth_vert:A6t,depth_frag:C6t,distanceRGBA_vert:E6t,distanceRGBA_frag:D6t,equirect_vert:I6t,equirect_frag:L6t,linedashed_vert:P6t,linedashed_frag:R6t,meshbasic_vert:O6t,meshbasic_frag:N6t,meshlambert_vert:B6t,meshlambert_frag:k6t,meshmatcap_vert:F6t,meshmatcap_frag:z6t,meshnormal_vert:U6t,meshnormal_frag:V6t,meshphong_vert:G6t,meshphong_frag:H6t,meshphysical_vert:W6t,meshphysical_frag:$6t,meshtoon_vert:X6t,meshtoon_frag:j6t,points_vert:Y6t,points_frag:q6t,shadow_vert:K6t,shadow_frag:Z6t,sprite_vert:J6t,sprite_frag:Q6t},Kt={common:{diffuse:{value:new Dn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new Ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Dn(16777215)},opacity:{value:1},center:{value:new Ee(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},go={basic:{uniforms:Ra([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.fog]),vertexShader:mn.meshbasic_vert,fragmentShader:mn.meshbasic_frag},lambert:{uniforms:Ra([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Dn(0)}}]),vertexShader:mn.meshlambert_vert,fragmentShader:mn.meshlambert_frag},phong:{uniforms:Ra([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Dn(0)},specular:{value:new Dn(1118481)},shininess:{value:30}}]),vertexShader:mn.meshphong_vert,fragmentShader:mn.meshphong_frag},standard:{uniforms:Ra([Kt.common,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.roughnessmap,Kt.metalnessmap,Kt.fog,Kt.lights,{emissive:{value:new Dn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag},toon:{uniforms:Ra([Kt.common,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.gradientmap,Kt.fog,Kt.lights,{emissive:{value:new Dn(0)}}]),vertexShader:mn.meshtoon_vert,fragmentShader:mn.meshtoon_frag},matcap:{uniforms:Ra([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,{matcap:{value:null}}]),vertexShader:mn.meshmatcap_vert,fragmentShader:mn.meshmatcap_frag},points:{uniforms:Ra([Kt.points,Kt.fog]),vertexShader:mn.points_vert,fragmentShader:mn.points_frag},dashed:{uniforms:Ra([Kt.common,Kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mn.linedashed_vert,fragmentShader:mn.linedashed_frag},depth:{uniforms:Ra([Kt.common,Kt.displacementmap]),vertexShader:mn.depth_vert,fragmentShader:mn.depth_frag},normal:{uniforms:Ra([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,{opacity:{value:1}}]),vertexShader:mn.meshnormal_vert,fragmentShader:mn.meshnormal_frag},sprite:{uniforms:Ra([Kt.sprite,Kt.fog]),vertexShader:mn.sprite_vert,fragmentShader:mn.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:mn.background_vert,fragmentShader:mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:mn.backgroundCube_vert,fragmentShader:mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:mn.cube_vert,fragmentShader:mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mn.equirect_vert,fragmentShader:mn.equirect_frag},distanceRGBA:{uniforms:Ra([Kt.common,Kt.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mn.distanceRGBA_vert,fragmentShader:mn.distanceRGBA_frag},shadow:{uniforms:Ra([Kt.lights,Kt.fog,{color:{value:new Dn(0)},opacity:{value:1}}]),vertexShader:mn.shadow_vert,fragmentShader:mn.shadow_frag}};go.physical={uniforms:Ra([go.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new Ee(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new Dn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new Ee},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new Dn(0)},specularColor:{value:new Dn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new Ee},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag};const dT={r:0,b:0,g:0},lp=new Xu,t8t=new cr;function e8t(e,t,n,r,i,a,o){const s=new Dn(0);let l=a===!0?0:1,u,c,h=null,f=0,d=null;function p(g,m){let _=!1,y=m.isScene===!0?m.background:null;y&&y.isTexture&&(y=(m.backgroundBlurriness>0?n:t).get(y)),y===null?v(s,l):y&&y.isColor&&(v(y,1),_=!0);const x=e.xr.getEnvironmentBlendMode();x==="additive"?r.buffers.color.setClear(0,0,0,1,o):x==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||_)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),y&&(y.isCubeTexture||y.mapping===c2)?(c===void 0&&(c=new bi(new Av(1,1,1),new lh({name:"BackgroundCubeMaterial",uniforms:zy(go.backgroundCube.uniforms),vertexShader:go.backgroundCube.vertexShader,fragmentShader:go.backgroundCube.fragmentShader,side:bo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(S,b,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),lp.copy(m.backgroundRotation),lp.x*=-1,lp.y*=-1,lp.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(lp.y*=-1,lp.z*=-1),c.material.uniforms.envMap.value=y,c.material.uniforms.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(t8t.makeRotationFromEuler(lp)),c.material.toneMapped=dr.getTransfer(y.colorSpace)!==Cr,(h!==y||f!==y.version||d!==e.toneMapping)&&(c.material.needsUpdate=!0,h=y,f=y.version,d=e.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):y&&y.isTexture&&(u===void 0&&(u=new bi(new tS(2,2),new lh({name:"BackgroundMaterial",uniforms:zy(go.background.uniforms),vertexShader:go.background.vertexShader,fragmentShader:go.background.fragmentShader,side:ed,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=y,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=dr.getTransfer(y.colorSpace)!==Cr,y.matrixAutoUpdate===!0&&y.updateMatrix(),u.material.uniforms.uvTransform.value.copy(y.matrix),(h!==y||f!==y.version||d!==e.toneMapping)&&(u.material.needsUpdate=!0,h=y,f=y.version,d=e.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}function v(g,m){g.getRGB(dT,Vst(e)),r.buffers.color.setClear(dT.r,dT.g,dT.b,m,o)}return{getClearColor:function(){return s},setClearColor:function(g,m=1){s.set(g),l=m,v(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,v(s,l)},render:p}}function n8t(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=f(null);let a=i,o=!1;function s(M,C,E,D,I){let L=!1;const P=h(D,E,C);a!==P&&(a=P,u(a.object)),L=d(M,D,E,I),L&&p(M,D,E,I),I!==null&&t.update(I,e.ELEMENT_ARRAY_BUFFER),(L||o)&&(o=!1,x(M,C,E,D),I!==null&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(I).buffer))}function l(){return e.createVertexArray()}function u(M){return e.bindVertexArray(M)}function c(M){return e.deleteVertexArray(M)}function h(M,C,E){const D=E.wireframe===!0;let I=r[M.id];I===void 0&&(I={},r[M.id]=I);let L=I[C.id];L===void 0&&(L={},I[C.id]=L);let P=L[D];return P===void 0&&(P=f(l()),L[D]=P),P}function f(M){const C=[],E=[],D=[];for(let I=0;I<n;I++)C[I]=0,E[I]=0,D[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:C,enabledAttributes:E,attributeDivisors:D,object:M,attributes:{},index:null}}function d(M,C,E,D){const I=a.attributes,L=C.attributes;let P=0;const B=E.getAttributes();for(const N in B)if(B[N].location>=0){const U=I[N];let Z=L[N];if(Z===void 0&&(N==="instanceMatrix"&&M.instanceMatrix&&(Z=M.instanceMatrix),N==="instanceColor"&&M.instanceColor&&(Z=M.instanceColor)),U===void 0||U.attribute!==Z||Z&&U.data!==Z.data)return!0;P++}return a.attributesNum!==P||a.index!==D}function p(M,C,E,D){const I={},L=C.attributes;let P=0;const B=E.getAttributes();for(const N in B)if(B[N].location>=0){let U=L[N];U===void 0&&(N==="instanceMatrix"&&M.instanceMatrix&&(U=M.instanceMatrix),N==="instanceColor"&&M.instanceColor&&(U=M.instanceColor));const Z={};Z.attribute=U,U&&U.data&&(Z.data=U.data),I[N]=Z,P++}a.attributes=I,a.attributesNum=P,a.index=D}function v(){const M=a.newAttributes;for(let C=0,E=M.length;C<E;C++)M[C]=0}function g(M){m(M,0)}function m(M,C){const E=a.newAttributes,D=a.enabledAttributes,I=a.attributeDivisors;E[M]=1,D[M]===0&&(e.enableVertexAttribArray(M),D[M]=1),I[M]!==C&&(e.vertexAttribDivisor(M,C),I[M]=C)}function _(){const M=a.newAttributes,C=a.enabledAttributes;for(let E=0,D=C.length;E<D;E++)C[E]!==M[E]&&(e.disableVertexAttribArray(E),C[E]=0)}function y(M,C,E,D,I,L,P){P===!0?e.vertexAttribIPointer(M,C,E,I,L):e.vertexAttribPointer(M,C,E,D,I,L)}function x(M,C,E,D){v();const I=D.attributes,L=E.getAttributes(),P=C.defaultAttributeValues;for(const B in L){const N=L[B];if(N.location>=0){let k=I[B];if(k===void 0&&(B==="instanceMatrix"&&M.instanceMatrix&&(k=M.instanceMatrix),B==="instanceColor"&&M.instanceColor&&(k=M.instanceColor)),k!==void 0){const U=k.normalized,Z=k.itemSize,nt=t.get(k);if(nt===void 0)continue;const ct=nt.buffer,K=nt.type,$=nt.bytesPerElement,ot=K===e.INT||K===e.UNSIGNED_INT||k.gpuType===Ast;if(k.isInterleavedBufferAttribute){const tt=k.data,et=tt.stride,xt=k.offset;if(tt.isInstancedInterleavedBuffer){for(let St=0;St<N.locationSize;St++)m(N.location+St,tt.meshPerAttribute);M.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=tt.meshPerAttribute*tt.count)}else for(let St=0;St<N.locationSize;St++)g(N.location+St);e.bindBuffer(e.ARRAY_BUFFER,ct);for(let St=0;St<N.locationSize;St++)y(N.location+St,Z/N.locationSize,K,U,et*$,(xt+Z/N.locationSize*St)*$,ot)}else{if(k.isInstancedBufferAttribute){for(let tt=0;tt<N.locationSize;tt++)m(N.location+tt,k.meshPerAttribute);M.isInstancedMesh!==!0&&D._maxInstanceCount===void 0&&(D._maxInstanceCount=k.meshPerAttribute*k.count)}else for(let tt=0;tt<N.locationSize;tt++)g(N.location+tt);e.bindBuffer(e.ARRAY_BUFFER,ct);for(let tt=0;tt<N.locationSize;tt++)y(N.location+tt,Z/N.locationSize,K,U,Z*$,Z/N.locationSize*tt*$,ot)}}else if(P!==void 0){const U=P[B];if(U!==void 0)switch(U.length){case 2:e.vertexAttrib2fv(N.location,U);break;case 3:e.vertexAttrib3fv(N.location,U);break;case 4:e.vertexAttrib4fv(N.location,U);break;default:e.vertexAttrib1fv(N.location,U)}}}}_()}function S(){A();for(const M in r){const C=r[M];for(const E in C){const D=C[E];for(const I in D)c(D[I].object),delete D[I];delete C[E]}delete r[M]}}function b(M){if(r[M.id]===void 0)return;const C=r[M.id];for(const E in C){const D=C[E];for(const I in D)c(D[I].object),delete D[I];delete C[E]}delete r[M.id]}function w(M){for(const C in r){const E=r[C];if(E[M.id]===void 0)continue;const D=E[M.id];for(const I in D)c(D[I].object),delete D[I];delete E[M.id]}}function A(){T(),o=!0,a!==i&&(a=i,u(a.object))}function T(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:s,reset:A,resetDefaultState:T,dispose:S,releaseStatesOfGeometry:b,releaseStatesOfProgram:w,initAttributes:v,enableAttribute:g,disableUnusedAttributes:_}}function r8t(e,t,n){let r;function i(l){r=l}function a(l,u){e.drawArrays(r,l,u),n.update(u,r,1)}function o(l,u,c){c!==0&&(e.drawArraysInstanced(r,l,u,c),n.update(u,r,c))}function s(l,u,c){if(c===0)return;const h=t.get("WEBGL_multi_draw");if(h===null)for(let f=0;f<c;f++)this.render(l[f],u[f]);else{h.multiDrawArraysWEBGL(r,l,0,u,0,c);let f=0;for(let d=0;d<c;d++)f+=u[d];n.update(f,r,1)}}this.setMode=i,this.render=a,this.renderInstances=o,this.renderMultiDraw=s}function i8t(e,t,n){let r;function i(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){const y=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(y.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(y){if(y==="highp"){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";y="mediump"}return y==="mediump"&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=n.precision!==void 0?n.precision:"highp";const s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=n.logarithmicDepthBuffer===!0,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=c>0,_=e.getParameter(e.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:i,getMaxPrecision:a,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:m,maxSamples:_}}function a8t(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new yp,s=new yn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,f){n=c(h,f,0)},this.setState=function(h,f,d){const p=h.clippingPlanes,v=h.clipIntersection,g=h.clipShadows,m=e.get(h);if(!i||p===null||p.length===0||a&&!g)a?c(null):u();else{const _=a?0:r,y=_*4;let x=m.clippingState||null;l.value=x,x=c(p,f,y,d);for(let S=0;S!==y;++S)x[S]=n[S];m.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(h,f,d,p){const v=h!==null?h.length:0;let g=null;if(v!==0){if(g=l.value,p!==!0||g===null){const m=d+v*4,_=f.matrixWorldInverse;s.getNormalMatrix(_),(g===null||g.length<m)&&(g=new Float32Array(m));for(let y=0,x=d;y!==v;++y,x+=4)o.copy(h[y]).applyMatrix4(_,s),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,g}}function o8t(e){let t=new WeakMap;function n(o,s){return s===P3?o.mapping=By:s===R3&&(o.mapping=ky),o}function r(o){if(o&&o.isTexture){const s=o.mapping;if(s===P3||s===R3)if(t.has(o)){const l=t.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new gHt(l.height);return u.fromEquirectangularTexture(e,o),t.set(o,u),o.addEventListener("dispose",i),n(u.texture,o.mapping)}else return null}}return o}function i(o){const s=o.target;s.removeEventListener("dispose",i);const l=t.get(s);l!==void 0&&(t.delete(s),l.dispose())}function a(){t=new WeakMap}return{get:r,dispose:a}}class s8t extends Gst{constructor(t=-1,n=1,r=1,i=-1,a=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=n,this.top=r,this.bottom=i,this.near=a,this.far=o,this.updateProjectionMatrix()}copy(t,n){return super.copy(t,n),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,n,r,i,a,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-t,o=r+t,s=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,o=a+u*this.view.width,s-=c*this.view.offsetY,l=s-c*this.view.height}this.projectionMatrix.makeOrthographic(a,o,s,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const n=super.toJSON(t);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Mm=4,wX=[.125,.215,.35,.446,.526,.582],Ap=20,NP=new s8t,TX=new Dn;let BP=null,kP=0,FP=0,zP=!1;const _p=(1+Math.sqrt(5))/2,Xg=1/_p,MX=[new Y(1,1,1),new Y(-1,1,1),new Y(1,1,-1),new Y(-1,1,-1),new Y(0,_p,Xg),new Y(0,_p,-Xg),new Y(Xg,0,_p),new Y(-Xg,0,_p),new Y(_p,Xg,0),new Y(-_p,Xg,0)];class AX{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,n=0,r=.1,i=100){BP=this._renderer.getRenderTarget(),kP=this._renderer.getActiveCubeFace(),FP=this._renderer.getActiveMipmapLevel(),zP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(t,r,i,a),n>0&&this._blur(a,0,0,n),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t,n=null){return this._fromTexture(t,n)}fromCubemap(t,n=null){return this._fromTexture(t,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=DX(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(BP,kP,FP),this._renderer.xr.enabled=zP,t.scissorTest=!1,pT(t,0,0,t.width,t.height)}_fromTexture(t,n){t.mapping===By||t.mapping===ky?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),BP=this._renderer.getRenderTarget(),kP=this._renderer.getActiveCubeFace(),FP=this._renderer.getActiveMipmapLevel(),zP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:_l,minFilter:_l,generateMipmaps:!1,type:xC,format:Ml,colorSpace:yd,depthBuffer:!1},i=CX(t,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=CX(t,n,r);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=l8t(a)),this._blurMaterial=u8t(a,t,n)}return i}_compileMaterial(t){const n=new bi(this._lodPlanes[0],t);this._renderer.compile(n,NP)}_sceneToCubeUV(t,n,r,i){const s=new Ds(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(TX),c.toneMapping=Nf,c.autoClear=!1;const d=new dl({name:"PMREM.Background",side:bo,depthWrite:!1,depthTest:!1}),p=new bi(new Av,d);let v=!1;const g=t.background;g?g.isColor&&(d.color.copy(g),t.background=null,v=!0):(d.color.copy(TX),v=!0);for(let m=0;m<6;m++){const _=m%3;_===0?(s.up.set(0,l[m],0),s.lookAt(u[m],0,0)):_===1?(s.up.set(0,0,l[m]),s.lookAt(0,u[m],0)):(s.up.set(0,l[m],0),s.lookAt(0,0,u[m]));const y=this._cubeSize;pT(i,_*y,m>2?y:0,y,y),c.setRenderTarget(i),v&&c.render(p,s),c.render(t,s)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=h,t.background=g}_textureToCubeUV(t,n){const r=this._renderer,i=t.mapping===By||t.mapping===ky;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=DX()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EX());const a=i?this._cubemapMaterial:this._equirectMaterial,o=new bi(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=t;const l=this._cubeSize;pT(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,NP)}_applyPMREM(t){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=MX[(i-1)%MX.length];this._blur(t,i-1,i,a,o)}n.autoClear=r}_blur(t,n,r,i,a){const o=this._pingPongRenderTarget;this._halfBlur(t,o,n,r,i,"latitudinal",a),this._halfBlur(o,t,r,r,i,"longitudinal",a)}_halfBlur(t,n,r,i,a,o,s){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new bi(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*d):2*Math.PI/(2*Ap-1),v=a/p,g=isFinite(a)?1+Math.floor(c*v):Ap;g>Ap&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ap}`);const m=[];let _=0;for(let w=0;w<Ap;++w){const A=w/v,T=Math.exp(-A*A/2);m.push(T),w===0?_+=T:w<g&&(_+=2*T)}for(let w=0;w<m.length;w++)m[w]=m[w]/_;f.envMap.value=t.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=o==="latitudinal",s&&(f.poleAxis.value=s);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-r;const x=this._sizeLods[i],S=3*x*(i>y-Mm?i-y+Mm:0),b=4*(this._cubeSize-x);pT(n,S,b,3*x,2*x),l.setRenderTarget(n),l.render(h,NP)}}function l8t(e){const t=[],n=[],r=[];let i=e;const a=e-Mm+1+wX.length;for(let o=0;o<a;o++){const s=Math.pow(2,i);n.push(s);let l=1/s;o>e-Mm?l=wX[o-e+Mm-1]:o===0&&(l=0),r.push(l);const u=1/(s-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,p=6,v=3,g=2,m=1,_=new Float32Array(v*p*d),y=new Float32Array(g*p*d),x=new Float32Array(m*p*d);for(let b=0;b<d;b++){const w=b%3*2/3-1,A=b>2?0:-1,T=[w,A,0,w+2/3,A,0,w+2/3,A+1,0,w,A,0,w+2/3,A+1,0,w,A+1,0];_.set(T,v*p*b),y.set(f,g*p*b);const M=[b,b,b,b,b,b];x.set(M,m*p*b)}const S=new Ci;S.setAttribute("position",new Ll(_,v)),S.setAttribute("uv",new Ll(y,g)),S.setAttribute("faceIndex",new Ll(x,m)),t.push(S),i>Mm&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}function CX(e,t,n){const r=new Mv(e,t,n);return r.texture.mapping=c2,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function pT(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function u8t(e,t,n){const r=new Float32Array(Ap),i=new Y(0,1,0);return new lh({name:"SphericalGaussianBlur",defines:{n:Ap,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Of,depthTest:!1,depthWrite:!1})}function EX(){return new lh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Of,depthTest:!1,depthWrite:!1})}function DX(){return new lh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Of,depthTest:!1,depthWrite:!1})}function RU(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function c8t(e){let t=new WeakMap,n=null;function r(s){if(s&&s.isTexture){const l=s.mapping,u=l===P3||l===R3,c=l===By||l===ky;if(u||c){let h=t.get(s);const f=h!==void 0?h.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==f)return n===null&&(n=new AX(e)),h=u?n.fromEquirectangular(s,h):n.fromCubemap(s,h),h.texture.pmremVersion=s.pmremVersion,t.set(s,h),h.texture;if(h!==void 0)return h.texture;{const d=s.image;return u&&d&&d.height>0||c&&d&&i(d)?(n===null&&(n=new AX(e)),h=u?n.fromEquirectangular(s):n.fromCubemap(s),h.texture.pmremVersion=s.pmremVersion,t.set(s,h),s.addEventListener("dispose",a),h.texture):null}}}return s}function i(s){let l=0;const u=6;for(let c=0;c<u;c++)s[c]!==void 0&&l++;return l===u}function a(s){const l=s.target;l.removeEventListener("dispose",a);const u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function o(){t=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function h8t(e){const t={};function n(r){if(t[r]!==void 0)return t[r];let i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(r)}return t[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function f8t(e,t,n,r){const i={},a=new WeakMap;function o(h){const f=h.target;f.index!==null&&t.remove(f.index);for(const p in f.attributes)t.remove(f.attributes[p]);for(const p in f.morphAttributes){const v=f.morphAttributes[p];for(let g=0,m=v.length;g<m;g++)t.remove(v[g])}f.removeEventListener("dispose",o),delete i[f.id];const d=a.get(f);d&&(t.remove(d),a.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function s(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)t.update(f[p],e.ARRAY_BUFFER);const d=h.morphAttributes;for(const p in d){const v=d[p];for(let g=0,m=v.length;g<m;g++)t.update(v[g],e.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,p=h.attributes.position;let v=0;if(d!==null){const _=d.array;v=d.version;for(let y=0,x=_.length;y<x;y+=3){const S=_[y+0],b=_[y+1],w=_[y+2];f.push(S,b,b,w,w,S)}}else if(p!==void 0){const _=p.array;v=p.version;for(let y=0,x=_.length/3-1;y<x;y+=3){const S=y+0,b=y+1,w=y+2;f.push(S,b,b,w,w,S)}}else return;const g=new(Ost(f)?Ust:zst)(f,1);g.version=v;const m=a.get(h);m&&t.remove(m),a.set(h,g)}function c(h){const f=a.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return a.get(h)}return{get:s,update:l,getWireframeAttribute:c}}function d8t(e,t,n){let r;function i(h){r=h}let a,o;function s(h){a=h.type,o=h.bytesPerElement}function l(h,f){e.drawElements(r,f,a,h*o),n.update(f,r,1)}function u(h,f,d){d!==0&&(e.drawElementsInstanced(r,f,a,h*o,d),n.update(f,r,d))}function c(h,f,d){if(d===0)return;const p=t.get("WEBGL_multi_draw");if(p===null)for(let v=0;v<d;v++)this.render(h[v]/o,f[v]);else{p.multiDrawElementsWEBGL(r,f,0,a,h,0,d);let v=0;for(let g=0;g<d;g++)v+=f[g];n.update(v,r,1)}}this.setMode=i,this.setIndex=s,this.render=l,this.renderInstances=u,this.renderMultiDraw=c}function p8t(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,o,s){switch(n.calls++,o){case e.TRIANGLES:n.triangles+=s*(a/3);break;case e.LINES:n.lines+=s*(a/2);break;case e.LINE_STRIP:n.lines+=s*(a-1);break;case e.LINE_LOOP:n.lines+=s*a;break;case e.POINTS:n.points+=s*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function v8t(e,t,n){const r=new WeakMap,i=new si;function a(o,s,l){const u=o.morphTargetInfluences,c=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,h=c!==void 0?c.length:0;let f=r.get(s);if(f===void 0||f.count!==h){let M=function(){A.dispose(),r.delete(s),s.removeEventListener("dispose",M)};var d=M;f!==void 0&&f.texture.dispose();const p=s.morphAttributes.position!==void 0,v=s.morphAttributes.normal!==void 0,g=s.morphAttributes.color!==void 0,m=s.morphAttributes.position||[],_=s.morphAttributes.normal||[],y=s.morphAttributes.color||[];let x=0;p===!0&&(x=1),v===!0&&(x=2),g===!0&&(x=3);let S=s.attributes.position.count*x,b=1;S>t.maxTextureSize&&(b=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const w=new Float32Array(S*b*4*h),A=new kst(w,S,b,h);A.type=Bc,A.needsUpdate=!0;const T=x*4;for(let C=0;C<h;C++){const E=m[C],D=_[C],I=y[C],L=S*b*4*C;for(let P=0;P<E.count;P++){const B=P*T;p===!0&&(i.fromBufferAttribute(E,P),w[L+B+0]=i.x,w[L+B+1]=i.y,w[L+B+2]=i.z,w[L+B+3]=0),v===!0&&(i.fromBufferAttribute(D,P),w[L+B+4]=i.x,w[L+B+5]=i.y,w[L+B+6]=i.z,w[L+B+7]=0),g===!0&&(i.fromBufferAttribute(I,P),w[L+B+8]=i.x,w[L+B+9]=i.y,w[L+B+10]=i.z,w[L+B+11]=I.itemSize===4?i.w:1)}}f={count:h,texture:A,size:new Ee(S,b)},r.set(s,f),s.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let p=0;for(let g=0;g<u.length;g++)p+=u[g];const v=s.morphTargetsRelative?1:1-p;l.getUniforms().setValue(e,"morphTargetBaseInfluence",v),l.getUniforms().setValue(e,"morphTargetInfluences",u)}l.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}return{update:a}}function g8t(e,t,n,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,h=t.get(l,c);if(i.get(h)!==u&&(t.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",s)===!1&&l.addEventListener("dispose",s),i.get(l)!==u&&(n.update(l.instanceMatrix,e.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,e.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function o(){i=new WeakMap}function s(l){const u=l.target;u.removeEventListener("dispose",s),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:a,dispose:o}}class Xst extends Ta{constructor(t,n,r,i,a,o,s,l,u,c){if(c=c!==void 0?c:Wm,c!==Wm&&c!==e1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Wm&&(r=Fy),r===void 0&&c===e1&&(r=Q1),super(null,i,a,o,s,l,c,r,u),this.isDepthTexture=!0,this.image={width:t,height:n},this.magFilter=s!==void 0?s:yo,this.minFilter=l!==void 0?l:yo,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const n=super.toJSON(t);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const jst=new Ta,Yst=new Xst(1,1);Yst.compareFunction=Rst;const qst=new kst,Kst=new eHt,Zst=new Hst,IX=[],LX=[],PX=new Float32Array(16),RX=new Float32Array(9),OX=new Float32Array(4);function B0(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=IX[i];if(a===void 0&&(a=new Float32Array(i),IX[i]=a),t!==0){r.toArray(a,0);for(let o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Gi(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Hi(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function f2(e,t){let n=LX[t];n===void 0&&(n=new Int32Array(t),LX[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function m8t(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function y8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gi(n,t))return;e.uniform2fv(this.addr,t),Hi(n,t)}}function _8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Gi(n,t))return;e.uniform3fv(this.addr,t),Hi(n,t)}}function x8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gi(n,t))return;e.uniform4fv(this.addr,t),Hi(n,t)}}function b8t(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Gi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Hi(n,t)}else{if(Gi(n,r))return;OX.set(r),e.uniformMatrix2fv(this.addr,!1,OX),Hi(n,r)}}function S8t(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Gi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Hi(n,t)}else{if(Gi(n,r))return;RX.set(r),e.uniformMatrix3fv(this.addr,!1,RX),Hi(n,r)}}function w8t(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Gi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Hi(n,t)}else{if(Gi(n,r))return;PX.set(r),e.uniformMatrix4fv(this.addr,!1,PX),Hi(n,r)}}function T8t(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function M8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gi(n,t))return;e.uniform2iv(this.addr,t),Hi(n,t)}}function A8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Gi(n,t))return;e.uniform3iv(this.addr,t),Hi(n,t)}}function C8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gi(n,t))return;e.uniform4iv(this.addr,t),Hi(n,t)}}function E8t(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function D8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Gi(n,t))return;e.uniform2uiv(this.addr,t),Hi(n,t)}}function I8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Gi(n,t))return;e.uniform3uiv(this.addr,t),Hi(n,t)}}function L8t(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Gi(n,t))return;e.uniform4uiv(this.addr,t),Hi(n,t)}}function P8t(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const a=this.type===e.SAMPLER_2D_SHADOW?Yst:jst;n.setTexture2D(t||a,i)}function R8t(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Kst,i)}function O8t(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Zst,i)}function N8t(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||qst,i)}function B8t(e){switch(e){case 5126:return m8t;case 35664:return y8t;case 35665:return _8t;case 35666:return x8t;case 35674:return b8t;case 35675:return S8t;case 35676:return w8t;case 5124:case 35670:return T8t;case 35667:case 35671:return M8t;case 35668:case 35672:return A8t;case 35669:case 35673:return C8t;case 5125:return E8t;case 36294:return D8t;case 36295:return I8t;case 36296:return L8t;case 35678:case 36198:case 36298:case 36306:case 35682:return P8t;case 35679:case 36299:case 36307:return R8t;case 35680:case 36300:case 36308:case 36293:return O8t;case 36289:case 36303:case 36311:case 36292:return N8t}}function k8t(e,t){e.uniform1fv(this.addr,t)}function F8t(e,t){const n=B0(t,this.size,2);e.uniform2fv(this.addr,n)}function z8t(e,t){const n=B0(t,this.size,3);e.uniform3fv(this.addr,n)}function U8t(e,t){const n=B0(t,this.size,4);e.uniform4fv(this.addr,n)}function V8t(e,t){const n=B0(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function G8t(e,t){const n=B0(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function H8t(e,t){const n=B0(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function W8t(e,t){e.uniform1iv(this.addr,t)}function $8t(e,t){e.uniform2iv(this.addr,t)}function X8t(e,t){e.uniform3iv(this.addr,t)}function j8t(e,t){e.uniform4iv(this.addr,t)}function Y8t(e,t){e.uniform1uiv(this.addr,t)}function q8t(e,t){e.uniform2uiv(this.addr,t)}function K8t(e,t){e.uniform3uiv(this.addr,t)}function Z8t(e,t){e.uniform4uiv(this.addr,t)}function J8t(e,t,n){const r=this.cache,i=t.length,a=f2(n,i);Gi(r,a)||(e.uniform1iv(this.addr,a),Hi(r,a));for(let o=0;o!==i;++o)n.setTexture2D(t[o]||jst,a[o])}function Q8t(e,t,n){const r=this.cache,i=t.length,a=f2(n,i);Gi(r,a)||(e.uniform1iv(this.addr,a),Hi(r,a));for(let o=0;o!==i;++o)n.setTexture3D(t[o]||Kst,a[o])}function t$t(e,t,n){const r=this.cache,i=t.length,a=f2(n,i);Gi(r,a)||(e.uniform1iv(this.addr,a),Hi(r,a));for(let o=0;o!==i;++o)n.setTextureCube(t[o]||Zst,a[o])}function e$t(e,t,n){const r=this.cache,i=t.length,a=f2(n,i);Gi(r,a)||(e.uniform1iv(this.addr,a),Hi(r,a));for(let o=0;o!==i;++o)n.setTexture2DArray(t[o]||qst,a[o])}function n$t(e){switch(e){case 5126:return k8t;case 35664:return F8t;case 35665:return z8t;case 35666:return U8t;case 35674:return V8t;case 35675:return G8t;case 35676:return H8t;case 5124:case 35670:return W8t;case 35667:case 35671:return $8t;case 35668:case 35672:return X8t;case 35669:case 35673:return j8t;case 5125:return Y8t;case 36294:return q8t;case 36295:return K8t;case 36296:return Z8t;case 35678:case 36198:case 36298:case 36306:case 35682:return J8t;case 35679:case 36299:case 36307:return Q8t;case 35680:case 36300:case 36308:case 36293:return t$t;case 36289:case 36303:case 36311:case 36292:return e$t}}class r$t{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=B8t(n.type)}}class i$t{constructor(t,n,r){this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=n$t(n.type)}}class a$t{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,n,r){const i=this.seq;for(let a=0,o=i.length;a!==o;++a){const s=i[a];s.setValue(t,n[s.id],r)}}}const UP=/(\w+)(\])?(\[|\.)?/g;function NX(e,t){e.seq.push(t),e.map[t.id]=t}function o$t(e,t,n){const r=e.name,i=r.length;for(UP.lastIndex=0;;){const a=UP.exec(r),o=UP.lastIndex;let s=a[1];const l=a[2]==="]",u=a[3];if(l&&(s=s|0),u===void 0||u==="["&&o+2===i){NX(n,u===void 0?new r$t(s,e,t):new i$t(s,e,t));break}else{let h=n.map[s];h===void 0&&(h=new a$t(s),NX(n,h)),n=h}}}class SM{constructor(t,n){this.seq=[],this.map={};const r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const a=t.getActiveUniform(n,i),o=t.getUniformLocation(n,a.name);o$t(a,o,this)}}setValue(t,n,r,i){const a=this.map[n];a!==void 0&&a.setValue(t,r,i)}setOptional(t,n,r){const i=n[r];i!==void 0&&this.setValue(t,r,i)}static upload(t,n,r,i){for(let a=0,o=n.length;a!==o;++a){const s=n[a],l=r[s.id];l.needsUpdate!==!1&&s.setValue(t,l.value,i)}}static seqWithValue(t,n){const r=[];for(let i=0,a=t.length;i!==a;++i){const o=t[i];o.id in n&&r.push(o)}return r}}function BX(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}const s$t=37297;let l$t=0;function u$t(e,t){const n=e.split(`
`),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=i;o<a;o++){const s=o+1;r.push(`${s===t?">":" "} ${s}: ${n[o]}`)}return r.join(`
`)}function c$t(e){const t=dr.getPrimaries(dr.workingColorSpace),n=dr.getPrimaries(e);let r;switch(t===n?r="":t===AC&&n===MC?r="LinearDisplayP3ToLinearSRGB":t===MC&&n===AC&&(r="LinearSRGBToLinearDisplayP3"),e){case yd:case h2:return[r,"LinearTransferOETF"];case cu:case EU:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}function kX(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&i==="")return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const o=parseInt(a[1]);return n.toUpperCase()+`

`+i+`

`+u$t(e.getShaderSource(t),o)}else return i}function h$t(e,t){const n=c$t(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function f$t(e,t){let n;switch(t){case tGt:n="Linear";break;case eGt:n="Reinhard";break;case nGt:n="OptimizedCineon";break;case rGt:n="ACESFilmic";break;case aGt:n="AgX";break;case oGt:n="Neutral";break;case iGt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function d$t(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(gx).join(`
`)}function p$t(e){const t=[];for(const n in e){const r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function v$t(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=e.getActiveAttrib(t,i),o=a.name;let s=1;a.type===e.FLOAT_MAT2&&(s=2),a.type===e.FLOAT_MAT3&&(s=3),a.type===e.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}function gx(e){return e!==""}function FX(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function zX(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const g$t=/^[ \t]*#include +<([\w\d./]+)>/gm;function k3(e){return e.replace(g$t,y$t)}const m$t=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function y$t(e,t){let n=mn[t];if(n===void 0){const r=m$t.get(t);if(r!==void 0)n=mn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r);else throw new Error("Can not resolve #include <"+t+">")}return k3(n)}const _$t=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function UX(e){return e.replace(_$t,x$t)}function x$t(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function VX(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function b$t(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Sst?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===A5t?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===_c&&(t="SHADOWMAP_TYPE_VSM"),t}function S$t(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case By:case ky:t="ENVMAP_TYPE_CUBE";break;case c2:t="ENVMAP_TYPE_CUBE_UV";break}return t}function w$t(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ky:t="ENVMAP_MODE_REFRACTION";break}return t}function T$t(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case wst:t="ENVMAP_BLENDING_MULTIPLY";break;case J5t:t="ENVMAP_BLENDING_MIX";break;case Q5t:t="ENVMAP_BLENDING_ADD";break}return t}function M$t(e){const t=e.envMapCubeUVHeight;if(t===null)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function A$t(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=b$t(n),u=S$t(n),c=w$t(n),h=T$t(n),f=M$t(n),d=d$t(n),p=p$t(a),v=i.createProgram();let g,m,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(gx).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(gx).join(`
`),m.length>0&&(m+=`
`)):(g=[VX(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(gx).join(`
`),m=[VX(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Nf?"#define TONE_MAPPING":"",n.toneMapping!==Nf?mn.tonemapping_pars_fragment:"",n.toneMapping!==Nf?f$t("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",mn.colorspace_pars_fragment,h$t("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(gx).join(`
`)),o=k3(o),o=FX(o,n),o=zX(o,n),s=k3(s),s=FX(s,n),s=zX(s,n),o=UX(o),s=UX(s),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",n.glslVersion===nX?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===nX?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const y=_+g+o,x=_+m+s,S=BX(i,i.VERTEX_SHADER,y),b=BX(i,i.FRAGMENT_SHADER,x);i.attachShader(v,S),i.attachShader(v,b),n.index0AttributeName!==void 0?i.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(v,0,"position"),i.linkProgram(v);function w(C){if(e.debug.checkShaderErrors){const E=i.getProgramInfoLog(v).trim(),D=i.getShaderInfoLog(S).trim(),I=i.getShaderInfoLog(b).trim();let L=!0,P=!0;if(i.getProgramParameter(v,i.LINK_STATUS)===!1)if(L=!1,typeof e.debug.onShaderError=="function")e.debug.onShaderError(i,v,S,b);else{const B=kX(i,S,"vertex"),N=kX(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(v,i.VALIDATE_STATUS)+`

Material Name: `+C.name+`
Material Type: `+C.type+`

Program Info Log: `+E+`
`+B+`
`+N)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(D===""||I==="")&&(P=!1);P&&(C.diagnostics={runnable:L,programLog:E,vertexShader:{log:D,prefix:g},fragmentShader:{log:I,prefix:m}})}i.deleteShader(S),i.deleteShader(b),A=new SM(i,v),T=v$t(i,v)}let A;this.getUniforms=function(){return A===void 0&&w(this),A};let T;this.getAttributes=function(){return T===void 0&&w(this),T};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(v,s$t)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(v),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=l$t++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=b,this}let C$t=0;class E$t{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.vertexShader,r=t.fragmentShader,i=this._getShaderStage(n),a=this._getShaderStage(r),o=this._getShaderCacheForMaterial(t);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(a)===!1&&(o.add(a),a.usedTimes++),this}remove(t){const n=this.materialCache.get(t);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const n=this.materialCache;let r=n.get(t);return r===void 0&&(r=new Set,n.set(t,r)),r}_getShaderStage(t){const n=this.shaderCache;let r=n.get(t);return r===void 0&&(r=new D$t(t),n.set(t,r)),r}}class D$t{constructor(t){this.id=C$t++,this.code=t,this.usedTimes=0}}function I$t(e,t,n,r,i,a,o){const s=new LU,l=new E$t,u=new Set,c=[],h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(T){return u.add(T),T===0?"uv":`uv${T}`}function g(T,M,C,E,D){const I=E.fog,L=D.geometry,P=T.isMeshStandardMaterial?E.environment:null,B=(T.isMeshStandardMaterial?n:t).get(T.envMap||P),N=B&&B.mapping===c2?B.image.height:null,k=p[T.type];T.precision!==null&&(d=i.getMaxPrecision(T.precision),d!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",d,"instead."));const U=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,Z=U!==void 0?U.length:0;let nt=0;L.morphAttributes.position!==void 0&&(nt=1),L.morphAttributes.normal!==void 0&&(nt=2),L.morphAttributes.color!==void 0&&(nt=3);let ct,K,$,ot;if(k){const da=go[k];ct=da.vertexShader,K=da.fragmentShader}else ct=T.vertexShader,K=T.fragmentShader,l.update(T),$=l.getVertexShaderID(T),ot=l.getFragmentShaderID(T);const tt=e.getRenderTarget(),et=D.isInstancedMesh===!0,xt=D.isBatchedMesh===!0,St=!!T.map,X=!!T.matcap,Ct=!!B,It=!!T.aoMap,Jt=!!T.lightMap,Gt=!!T.bumpMap,ve=!!T.normalMap,W=!!T.displacementMap,F=!!T.emissiveMap,st=!!T.metalnessMap,bt=!!T.roughnessMap,At=T.anisotropy>0,Et=T.clearcoat>0,be=T.iridescence>0,j=T.sheen>0,zt=T.transmission>0,ie=At&&!!T.anisotropyMap,Rt=Et&&!!T.clearcoatMap,re=Et&&!!T.clearcoatNormalMap,Oe=Et&&!!T.clearcoatRoughnessMap,pe=be&&!!T.iridescenceMap,ge=be&&!!T.iridescenceThicknessMap,en=j&&!!T.sheenColorMap,rn=j&&!!T.sheenRoughnessMap,rr=!!T.specularMap,Jn=!!T.specularColorMap,Pr=!!T.specularIntensityMap,Te=zt&&!!T.transmissionMap,J=zt&&!!T.thicknessMap,ne=!!T.gradientMap,Qt=!!T.alphaMap,Ce=T.alphaTest>0,Re=!!T.alphaHash,br=!!T.extensions;let Rr=Nf;T.toneMapped&&(tt===null||tt.isXRRenderTarget===!0)&&(Rr=e.toneMapping);const Hr={shaderID:k,shaderType:T.type,shaderName:T.name,vertexShader:ct,fragmentShader:K,defines:T.defines,customVertexShaderID:$,customFragmentShaderID:ot,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:d,batching:xt,instancing:et,instancingColor:et&&D.instanceColor!==null,instancingMorph:et&&D.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:tt===null?e.outputColorSpace:tt.isXRRenderTarget===!0?tt.texture.colorSpace:yd,alphaToCoverage:!!T.alphaToCoverage,map:St,matcap:X,envMap:Ct,envMapMode:Ct&&B.mapping,envMapCubeUVHeight:N,aoMap:It,lightMap:Jt,bumpMap:Gt,normalMap:ve,displacementMap:f&&W,emissiveMap:F,normalMapObjectSpace:ve&&T.normalMapType===MGt,normalMapTangentSpace:ve&&T.normalMapType===TGt,metalnessMap:st,roughnessMap:bt,anisotropy:At,anisotropyMap:ie,clearcoat:Et,clearcoatMap:Rt,clearcoatNormalMap:re,clearcoatRoughnessMap:Oe,iridescence:be,iridescenceMap:pe,iridescenceThicknessMap:ge,sheen:j,sheenColorMap:en,sheenRoughnessMap:rn,specularMap:rr,specularColorMap:Jn,specularIntensityMap:Pr,transmission:zt,transmissionMap:Te,thicknessMap:J,gradientMap:ne,opaque:T.transparent===!1&&T.blending===Hm&&T.alphaToCoverage===!1,alphaMap:Qt,alphaTest:Ce,alphaHash:Re,combine:T.combine,mapUv:St&&v(T.map.channel),aoMapUv:It&&v(T.aoMap.channel),lightMapUv:Jt&&v(T.lightMap.channel),bumpMapUv:Gt&&v(T.bumpMap.channel),normalMapUv:ve&&v(T.normalMap.channel),displacementMapUv:W&&v(T.displacementMap.channel),emissiveMapUv:F&&v(T.emissiveMap.channel),metalnessMapUv:st&&v(T.metalnessMap.channel),roughnessMapUv:bt&&v(T.roughnessMap.channel),anisotropyMapUv:ie&&v(T.anisotropyMap.channel),clearcoatMapUv:Rt&&v(T.clearcoatMap.channel),clearcoatNormalMapUv:re&&v(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&v(T.clearcoatRoughnessMap.channel),iridescenceMapUv:pe&&v(T.iridescenceMap.channel),iridescenceThicknessMapUv:ge&&v(T.iridescenceThicknessMap.channel),sheenColorMapUv:en&&v(T.sheenColorMap.channel),sheenRoughnessMapUv:rn&&v(T.sheenRoughnessMap.channel),specularMapUv:rr&&v(T.specularMap.channel),specularColorMapUv:Jn&&v(T.specularColorMap.channel),specularIntensityMapUv:Pr&&v(T.specularIntensityMap.channel),transmissionMapUv:Te&&v(T.transmissionMap.channel),thicknessMapUv:J&&v(T.thicknessMap.channel),alphaMapUv:Qt&&v(T.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(ve||At),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,pointsUvs:D.isPoints===!0&&!!L.attributes.uv&&(St||Qt),fog:!!I,useFog:T.fog===!0,fogExp2:!!I&&I.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:D.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:Z,morphTextureStride:nt,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:e.shadowMap.enabled&&C.length>0,shadowMapType:e.shadowMap.type,toneMapping:Rr,useLegacyLights:e._useLegacyLights,decodeVideoTexture:St&&T.map.isVideoTexture===!0&&dr.getTransfer(T.map.colorSpace)===Cr,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===yl,flipSided:T.side===bo,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:br&&T.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:br&&T.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Hr.vertexUv1s=u.has(1),Hr.vertexUv2s=u.has(2),Hr.vertexUv3s=u.has(3),u.clear(),Hr}function m(T){const M=[];if(T.shaderID?M.push(T.shaderID):(M.push(T.customVertexShaderID),M.push(T.customFragmentShaderID)),T.defines!==void 0)for(const C in T.defines)M.push(C),M.push(T.defines[C]);return T.isRawShaderMaterial===!1&&(_(M,T),y(M,T),M.push(e.outputColorSpace)),M.push(T.customProgramCacheKey),M.join()}function _(T,M){T.push(M.precision),T.push(M.outputColorSpace),T.push(M.envMapMode),T.push(M.envMapCubeUVHeight),T.push(M.mapUv),T.push(M.alphaMapUv),T.push(M.lightMapUv),T.push(M.aoMapUv),T.push(M.bumpMapUv),T.push(M.normalMapUv),T.push(M.displacementMapUv),T.push(M.emissiveMapUv),T.push(M.metalnessMapUv),T.push(M.roughnessMapUv),T.push(M.anisotropyMapUv),T.push(M.clearcoatMapUv),T.push(M.clearcoatNormalMapUv),T.push(M.clearcoatRoughnessMapUv),T.push(M.iridescenceMapUv),T.push(M.iridescenceThicknessMapUv),T.push(M.sheenColorMapUv),T.push(M.sheenRoughnessMapUv),T.push(M.specularMapUv),T.push(M.specularColorMapUv),T.push(M.specularIntensityMapUv),T.push(M.transmissionMapUv),T.push(M.thicknessMapUv),T.push(M.combine),T.push(M.fogExp2),T.push(M.sizeAttenuation),T.push(M.morphTargetsCount),T.push(M.morphAttributeCount),T.push(M.numDirLights),T.push(M.numPointLights),T.push(M.numSpotLights),T.push(M.numSpotLightMaps),T.push(M.numHemiLights),T.push(M.numRectAreaLights),T.push(M.numDirLightShadows),T.push(M.numPointLightShadows),T.push(M.numSpotLightShadows),T.push(M.numSpotLightShadowsWithMaps),T.push(M.numLightProbes),T.push(M.shadowMapType),T.push(M.toneMapping),T.push(M.numClippingPlanes),T.push(M.numClipIntersection),T.push(M.depthPacking)}function y(T,M){s.disableAll(),M.supportsVertexTextures&&s.enable(0),M.instancing&&s.enable(1),M.instancingColor&&s.enable(2),M.instancingMorph&&s.enable(3),M.matcap&&s.enable(4),M.envMap&&s.enable(5),M.normalMapObjectSpace&&s.enable(6),M.normalMapTangentSpace&&s.enable(7),M.clearcoat&&s.enable(8),M.iridescence&&s.enable(9),M.alphaTest&&s.enable(10),M.vertexColors&&s.enable(11),M.vertexAlphas&&s.enable(12),M.vertexUv1s&&s.enable(13),M.vertexUv2s&&s.enable(14),M.vertexUv3s&&s.enable(15),M.vertexTangents&&s.enable(16),M.anisotropy&&s.enable(17),M.alphaHash&&s.enable(18),M.batching&&s.enable(19),T.push(s.mask),s.disableAll(),M.fog&&s.enable(0),M.useFog&&s.enable(1),M.flatShading&&s.enable(2),M.logarithmicDepthBuffer&&s.enable(3),M.skinning&&s.enable(4),M.morphTargets&&s.enable(5),M.morphNormals&&s.enable(6),M.morphColors&&s.enable(7),M.premultipliedAlpha&&s.enable(8),M.shadowMapEnabled&&s.enable(9),M.useLegacyLights&&s.enable(10),M.doubleSided&&s.enable(11),M.flipSided&&s.enable(12),M.useDepthPacking&&s.enable(13),M.dithering&&s.enable(14),M.transmission&&s.enable(15),M.sheen&&s.enable(16),M.opaque&&s.enable(17),M.pointsUvs&&s.enable(18),M.decodeVideoTexture&&s.enable(19),M.alphaToCoverage&&s.enable(20),T.push(s.mask)}function x(T){const M=p[T.type];let C;if(M){const E=go[M];C=PU.clone(E.uniforms)}else C=T.uniforms;return C}function S(T,M){let C;for(let E=0,D=c.length;E<D;E++){const I=c[E];if(I.cacheKey===M){C=I,++C.usedTimes;break}}return C===void 0&&(C=new A$t(e,M,T,a),c.push(C)),C}function b(T){if(--T.usedTimes===0){const M=c.indexOf(T);c[M]=c[c.length-1],c.pop(),T.destroy()}}function w(T){l.remove(T)}function A(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:x,acquireProgram:S,releaseProgram:b,releaseShaderCache:w,programs:c,dispose:A}}function L$t(){let e=new WeakMap;function t(a){let o=e.get(a);return o===void 0&&(o={},e.set(a,o)),o}function n(a){e.delete(a)}function r(a,o,s){e.get(a)[o]=s}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function P$t(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function GX(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function HX(){const e=[];let t=0;const n=[],r=[],i=[];function a(){t=0,n.length=0,r.length=0,i.length=0}function o(h,f,d,p,v,g){let m=e[t];return m===void 0?(m={id:h.id,object:h,geometry:f,material:d,groupOrder:p,renderOrder:h.renderOrder,z:v,group:g},e[t]=m):(m.id=h.id,m.object=h,m.geometry=f,m.material=d,m.groupOrder=p,m.renderOrder=h.renderOrder,m.z=v,m.group=g),t++,m}function s(h,f,d,p,v,g){const m=o(h,f,d,p,v,g);d.transmission>0?r.push(m):d.transparent===!0?i.push(m):n.push(m)}function l(h,f,d,p,v,g){const m=o(h,f,d,p,v,g);d.transmission>0?r.unshift(m):d.transparent===!0?i.unshift(m):n.unshift(m)}function u(h,f){n.length>1&&n.sort(h||P$t),r.length>1&&r.sort(f||GX),i.length>1&&i.sort(f||GX)}function c(){for(let h=t,f=e.length;h<f;h++){const d=e[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:a,push:s,unshift:l,finish:c,sort:u}}function R$t(){let e=new WeakMap;function t(r,i){const a=e.get(r);let o;return a===void 0?(o=new HX,e.set(r,[o])):i>=a.length?(o=new HX,a.push(o)):o=a[i],o}function n(){e=new WeakMap}return{get:t,dispose:n}}function O$t(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Y,color:new Dn};break;case"SpotLight":n={position:new Y,direction:new Y,color:new Dn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Y,color:new Dn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Y,skyColor:new Dn,groundColor:new Dn};break;case"RectAreaLight":n={color:new Dn,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return e[t.id]=n,n}}}function N$t(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let B$t=0;function k$t(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function F$t(e){const t=new O$t,n=N$t(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Y);const i=new Y,a=new cr,o=new cr;function s(u,c){let h=0,f=0,d=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let p=0,v=0,g=0,m=0,_=0,y=0,x=0,S=0,b=0,w=0,A=0;u.sort(k$t);const T=c===!0?Math.PI:1;for(let C=0,E=u.length;C<E;C++){const D=u[C],I=D.color,L=D.intensity,P=D.distance,B=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=I.r*L*T,f+=I.g*L*T,d+=I.b*L*T;else if(D.isLightProbe){for(let N=0;N<9;N++)r.probe[N].addScaledVector(D.sh.coefficients[N],L);A++}else if(D.isDirectionalLight){const N=t.get(D);if(N.color.copy(D.color).multiplyScalar(D.intensity*T),D.castShadow){const k=D.shadow,U=n.get(D);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,r.directionalShadow[p]=U,r.directionalShadowMap[p]=B,r.directionalShadowMatrix[p]=D.shadow.matrix,y++}r.directional[p]=N,p++}else if(D.isSpotLight){const N=t.get(D);N.position.setFromMatrixPosition(D.matrixWorld),N.color.copy(I).multiplyScalar(L*T),N.distance=P,N.coneCos=Math.cos(D.angle),N.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),N.decay=D.decay,r.spot[g]=N;const k=D.shadow;if(D.map&&(r.spotLightMap[b]=D.map,b++,k.updateMatrices(D),D.castShadow&&w++),r.spotLightMatrix[g]=k.matrix,D.castShadow){const U=n.get(D);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,r.spotShadow[g]=U,r.spotShadowMap[g]=B,S++}g++}else if(D.isRectAreaLight){const N=t.get(D);N.color.copy(I).multiplyScalar(L),N.halfWidth.set(D.width*.5,0,0),N.halfHeight.set(0,D.height*.5,0),r.rectArea[m]=N,m++}else if(D.isPointLight){const N=t.get(D);if(N.color.copy(D.color).multiplyScalar(D.intensity*T),N.distance=D.distance,N.decay=D.decay,D.castShadow){const k=D.shadow,U=n.get(D);U.shadowBias=k.bias,U.shadowNormalBias=k.normalBias,U.shadowRadius=k.radius,U.shadowMapSize=k.mapSize,U.shadowCameraNear=k.camera.near,U.shadowCameraFar=k.camera.far,r.pointShadow[v]=U,r.pointShadowMap[v]=B,r.pointShadowMatrix[v]=D.shadow.matrix,x++}r.point[v]=N,v++}else if(D.isHemisphereLight){const N=t.get(D);N.skyColor.copy(D.color).multiplyScalar(L*T),N.groundColor.copy(D.groundColor).multiplyScalar(L*T),r.hemi[_]=N,_++}}m>0&&(e.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Kt.LTC_FLOAT_1,r.rectAreaLTC2=Kt.LTC_FLOAT_2):(r.rectAreaLTC1=Kt.LTC_HALF_1,r.rectAreaLTC2=Kt.LTC_HALF_2)),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=d;const M=r.hash;(M.directionalLength!==p||M.pointLength!==v||M.spotLength!==g||M.rectAreaLength!==m||M.hemiLength!==_||M.numDirectionalShadows!==y||M.numPointShadows!==x||M.numSpotShadows!==S||M.numSpotMaps!==b||M.numLightProbes!==A)&&(r.directional.length=p,r.spot.length=g,r.rectArea.length=m,r.point.length=v,r.hemi.length=_,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=S,r.spotShadowMap.length=S,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=x,r.spotLightMatrix.length=S+b-w,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=w,r.numLightProbes=A,M.directionalLength=p,M.pointLength=v,M.spotLength=g,M.rectAreaLength=m,M.hemiLength=_,M.numDirectionalShadows=y,M.numPointShadows=x,M.numSpotShadows=S,M.numSpotMaps=b,M.numLightProbes=A,r.version=B$t++)}function l(u,c){let h=0,f=0,d=0,p=0,v=0;const g=c.matrixWorldInverse;for(let m=0,_=u.length;m<_;m++){const y=u[m];if(y.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(g),h++}else if(y.isSpotLight){const x=r.spot[d];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(g),d++}else if(y.isRectAreaLight){const x=r.rectArea[p];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),o.identity(),a.copy(y.matrixWorld),a.premultiply(g),o.extractRotation(a),x.halfWidth.set(y.width*.5,0,0),x.halfHeight.set(0,y.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),p++}else if(y.isPointLight){const x=r.point[f];x.position.setFromMatrixPosition(y.matrixWorld),x.position.applyMatrix4(g),f++}else if(y.isHemisphereLight){const x=r.hemi[v];x.direction.setFromMatrixPosition(y.matrixWorld),x.direction.transformDirection(g),v++}}}return{setup:s,setupView:l,state:r}}function WX(e){const t=new F$t(e),n=[],r=[];function i(){n.length=0,r.length=0}function a(c){n.push(c)}function o(c){r.push(c)}function s(c){t.setup(n,c)}function l(c){t.setupView(n,c)}return{init:i,state:{lightsArray:n,shadowsArray:r,lights:t,transmissionRenderTarget:null},setupLights:s,setupLightsView:l,pushLight:a,pushShadow:o}}function z$t(e){let t=new WeakMap;function n(i,a=0){const o=t.get(i);let s;return o===void 0?(s=new WX(e),t.set(i,[s])):a>=o.length?(s=new WX(e),o.push(s)):s=o[a],s}function r(){t=new WeakMap}return{get:n,dispose:r}}class U$t extends N0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=SGt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class V$t extends N0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const G$t=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,H$t=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function W$t(e,t,n){let r=new Wst;const i=new Ee,a=new Ee,o=new si,s=new U$t({depthPacking:wGt}),l=new V$t,u={},c=n.maxTextureSize,h={[ed]:bo,[bo]:ed,[yl]:yl},f=new lh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ee},radius:{value:4}},vertexShader:G$t,fragmentShader:H$t}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const p=new Ci;p.setAttribute("position",new Ll(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new bi(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Sst;let m=this.type;this.render=function(b,w,A){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;const T=e.getRenderTarget(),M=e.getActiveCubeFace(),C=e.getActiveMipmapLevel(),E=e.state;E.setBlending(Of),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);const D=m!==_c&&this.type===_c,I=m===_c&&this.type!==_c;for(let L=0,P=b.length;L<P;L++){const B=b[L],N=B.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;i.copy(N.mapSize);const k=N.getFrameExtents();if(i.multiply(k),a.copy(N.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/k.x),i.x=a.x*k.x,N.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/k.y),i.y=a.y*k.y,N.mapSize.y=a.y)),N.map===null||D===!0||I===!0){const Z=this.type!==_c?{minFilter:yo,magFilter:yo}:{};N.map!==null&&N.map.dispose(),N.map=new Mv(i.x,i.y,Z),N.map.texture.name=B.name+".shadowMap",N.camera.updateProjectionMatrix()}e.setRenderTarget(N.map),e.clear();const U=N.getViewportCount();for(let Z=0;Z<U;Z++){const nt=N.getViewport(Z);o.set(a.x*nt.x,a.y*nt.y,a.x*nt.z,a.y*nt.w),E.viewport(o),N.updateMatrices(B,Z),r=N.getFrustum(),x(w,A,N.camera,B,this.type)}N.isPointLightShadow!==!0&&this.type===_c&&_(N,A),N.needsUpdate=!1}m=this.type,g.needsUpdate=!1,e.setRenderTarget(T,M,C)};function _(b,w){const A=t.update(v);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,d.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Mv(i.x,i.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(w,null,A,f,v,null),d.uniforms.shadow_pass.value=b.mapPass.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(w,null,A,d,v,null)}function y(b,w,A,T){let M=null;const C=A.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(C!==void 0)M=C;else if(M=A.isPointLight===!0?l:s,e.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const E=M.uuid,D=w.uuid;let I=u[E];I===void 0&&(I={},u[E]=I);let L=I[D];L===void 0&&(L=M.clone(),I[D]=L,w.addEventListener("dispose",S)),M=L}if(M.visible=w.visible,M.wireframe=w.wireframe,T===_c?M.side=w.shadowSide!==null?w.shadowSide:w.side:M.side=w.shadowSide!==null?w.shadowSide:h[w.side],M.alphaMap=w.alphaMap,M.alphaTest=w.alphaTest,M.map=w.map,M.clipShadows=w.clipShadows,M.clippingPlanes=w.clippingPlanes,M.clipIntersection=w.clipIntersection,M.displacementMap=w.displacementMap,M.displacementScale=w.displacementScale,M.displacementBias=w.displacementBias,M.wireframeLinewidth=w.wireframeLinewidth,M.linewidth=w.linewidth,A.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const E=e.properties.get(M);E.light=A}return M}function x(b,w,A,T,M){if(b.visible===!1)return;if(b.layers.test(w.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&M===_c)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);const D=t.update(b),I=b.material;if(Array.isArray(I)){const L=D.groups;for(let P=0,B=L.length;P<B;P++){const N=L[P],k=I[N.materialIndex];if(k&&k.visible){const U=y(b,k,T,M);b.onBeforeShadow(e,b,w,A,D,U,N),e.renderBufferDirect(A,null,D,U,b,N),b.onAfterShadow(e,b,w,A,D,U,N)}}}else if(I.visible){const L=y(b,I,T,M);b.onBeforeShadow(e,b,w,A,D,L,null),e.renderBufferDirect(A,null,D,L,b,null),b.onAfterShadow(e,b,w,A,D,L,null)}}const E=b.children;for(let D=0,I=E.length;D<I;D++)x(E[D],w,A,T,M)}function S(b){b.target.removeEventListener("dispose",S);for(const A in u){const T=u[A],M=b.target.uuid;M in T&&(T[M].dispose(),delete T[M])}}}function $$t(e){function t(){let J=!1;const ne=new si;let Qt=null;const Ce=new si(0,0,0,0);return{setMask:function(Re){Qt!==Re&&!J&&(e.colorMask(Re,Re,Re,Re),Qt=Re)},setLocked:function(Re){J=Re},setClear:function(Re,br,Rr,Hr,da){da===!0&&(Re*=Hr,br*=Hr,Rr*=Hr),ne.set(Re,br,Rr,Hr),Ce.equals(ne)===!1&&(e.clearColor(Re,br,Rr,Hr),Ce.copy(ne))},reset:function(){J=!1,Qt=null,Ce.set(-1,0,0,0)}}}function n(){let J=!1,ne=null,Qt=null,Ce=null;return{setTest:function(Re){Re?ot(e.DEPTH_TEST):tt(e.DEPTH_TEST)},setMask:function(Re){ne!==Re&&!J&&(e.depthMask(Re),ne=Re)},setFunc:function(Re){if(Qt!==Re){switch(Re){case $5t:e.depthFunc(e.NEVER);break;case X5t:e.depthFunc(e.ALWAYS);break;case j5t:e.depthFunc(e.LESS);break;case _C:e.depthFunc(e.LEQUAL);break;case Y5t:e.depthFunc(e.EQUAL);break;case q5t:e.depthFunc(e.GEQUAL);break;case K5t:e.depthFunc(e.GREATER);break;case Z5t:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}Qt=Re}},setLocked:function(Re){J=Re},setClear:function(Re){Ce!==Re&&(e.clearDepth(Re),Ce=Re)},reset:function(){J=!1,ne=null,Qt=null,Ce=null}}}function r(){let J=!1,ne=null,Qt=null,Ce=null,Re=null,br=null,Rr=null,Hr=null,da=null;return{setTest:function(Ar){J||(Ar?ot(e.STENCIL_TEST):tt(e.STENCIL_TEST))},setMask:function(Ar){ne!==Ar&&!J&&(e.stencilMask(Ar),ne=Ar)},setFunc:function(Ar,Hl,Wl){(Qt!==Ar||Ce!==Hl||Re!==Wl)&&(e.stencilFunc(Ar,Hl,Wl),Qt=Ar,Ce=Hl,Re=Wl)},setOp:function(Ar,Hl,Wl){(br!==Ar||Rr!==Hl||Hr!==Wl)&&(e.stencilOp(Ar,Hl,Wl),br=Ar,Rr=Hl,Hr=Wl)},setLocked:function(Ar){J=Ar},setClear:function(Ar){da!==Ar&&(e.clearStencil(Ar),da=Ar)},reset:function(){J=!1,ne=null,Qt=null,Ce=null,Re=null,br=null,Rr=null,Hr=null,da=null}}}const i=new t,a=new n,o=new r,s=new WeakMap,l=new WeakMap;let u={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,g=null,m=null,_=null,y=null,x=null,S=null,b=new Dn(0,0,0),w=0,A=!1,T=null,M=null,C=null,E=null,D=null;const I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,P=0;const B=e.getParameter(e.VERSION);B.indexOf("WebGL")!==-1?(P=parseFloat(/^WebGL (\d)/.exec(B)[1]),L=P>=1):B.indexOf("OpenGL ES")!==-1&&(P=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),L=P>=2);let N=null,k={};const U=e.getParameter(e.SCISSOR_BOX),Z=e.getParameter(e.VIEWPORT),nt=new si().fromArray(U),ct=new si().fromArray(Z);function K(J,ne,Qt,Ce){const Re=new Uint8Array(4),br=e.createTexture();e.bindTexture(J,br),e.texParameteri(J,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(J,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let Rr=0;Rr<Qt;Rr++)J===e.TEXTURE_3D||J===e.TEXTURE_2D_ARRAY?e.texImage3D(ne,0,e.RGBA,1,1,Ce,0,e.RGBA,e.UNSIGNED_BYTE,Re):e.texImage2D(ne+Rr,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Re);return br}const $={};$[e.TEXTURE_2D]=K(e.TEXTURE_2D,e.TEXTURE_2D,1),$[e.TEXTURE_CUBE_MAP]=K(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),$[e.TEXTURE_2D_ARRAY]=K(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),$[e.TEXTURE_3D]=K(e.TEXTURE_3D,e.TEXTURE_3D,1,1),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ot(e.DEPTH_TEST),a.setFunc(_C),Gt(!1),ve(A7),ot(e.CULL_FACE),It(Of);function ot(J){u[J]!==!0&&(e.enable(J),u[J]=!0)}function tt(J){u[J]!==!1&&(e.disable(J),u[J]=!1)}function et(J,ne){return c[J]!==ne?(e.bindFramebuffer(J,ne),c[J]=ne,J===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=ne),J===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=ne),!0):!1}function xt(J,ne){let Qt=f,Ce=!1;if(J){Qt=h.get(ne),Qt===void 0&&(Qt=[],h.set(ne,Qt));const Re=J.textures;if(Qt.length!==Re.length||Qt[0]!==e.COLOR_ATTACHMENT0){for(let br=0,Rr=Re.length;br<Rr;br++)Qt[br]=e.COLOR_ATTACHMENT0+br;Qt.length=Re.length,Ce=!0}}else Qt[0]!==e.BACK&&(Qt[0]=e.BACK,Ce=!0);Ce&&e.drawBuffers(Qt)}function St(J){return d!==J?(e.useProgram(J),d=J,!0):!1}const X={[Mp]:e.FUNC_ADD,[E5t]:e.FUNC_SUBTRACT,[D5t]:e.FUNC_REVERSE_SUBTRACT};X[I5t]=e.MIN,X[L5t]=e.MAX;const Ct={[P5t]:e.ZERO,[R5t]:e.ONE,[O5t]:e.SRC_COLOR,[I3]:e.SRC_ALPHA,[U5t]:e.SRC_ALPHA_SATURATE,[F5t]:e.DST_COLOR,[B5t]:e.DST_ALPHA,[N5t]:e.ONE_MINUS_SRC_COLOR,[L3]:e.ONE_MINUS_SRC_ALPHA,[z5t]:e.ONE_MINUS_DST_COLOR,[k5t]:e.ONE_MINUS_DST_ALPHA,[V5t]:e.CONSTANT_COLOR,[G5t]:e.ONE_MINUS_CONSTANT_COLOR,[H5t]:e.CONSTANT_ALPHA,[W5t]:e.ONE_MINUS_CONSTANT_ALPHA};function It(J,ne,Qt,Ce,Re,br,Rr,Hr,da,Ar){if(J===Of){p===!0&&(tt(e.BLEND),p=!1);return}if(p===!1&&(ot(e.BLEND),p=!0),J!==C5t){if(J!==v||Ar!==A){if((g!==Mp||y!==Mp)&&(e.blendEquation(e.FUNC_ADD),g=Mp,y=Mp),Ar)switch(J){case Hm:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case C7:e.blendFunc(e.ONE,e.ONE);break;case E7:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case D7:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}else switch(J){case Hm:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case C7:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case E7:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case D7:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",J);break}m=null,_=null,x=null,S=null,b.set(0,0,0),w=0,v=J,A=Ar}return}Re=Re||ne,br=br||Qt,Rr=Rr||Ce,(ne!==g||Re!==y)&&(e.blendEquationSeparate(X[ne],X[Re]),g=ne,y=Re),(Qt!==m||Ce!==_||br!==x||Rr!==S)&&(e.blendFuncSeparate(Ct[Qt],Ct[Ce],Ct[br],Ct[Rr]),m=Qt,_=Ce,x=br,S=Rr),(Hr.equals(b)===!1||da!==w)&&(e.blendColor(Hr.r,Hr.g,Hr.b,da),b.copy(Hr),w=da),v=J,A=!1}function Jt(J,ne){J.side===yl?tt(e.CULL_FACE):ot(e.CULL_FACE);let Qt=J.side===bo;ne&&(Qt=!Qt),Gt(Qt),J.blending===Hm&&J.transparent===!1?It(Of):It(J.blending,J.blendEquation,J.blendSrc,J.blendDst,J.blendEquationAlpha,J.blendSrcAlpha,J.blendDstAlpha,J.blendColor,J.blendAlpha,J.premultipliedAlpha),a.setFunc(J.depthFunc),a.setTest(J.depthTest),a.setMask(J.depthWrite),i.setMask(J.colorWrite);const Ce=J.stencilWrite;o.setTest(Ce),Ce&&(o.setMask(J.stencilWriteMask),o.setFunc(J.stencilFunc,J.stencilRef,J.stencilFuncMask),o.setOp(J.stencilFail,J.stencilZFail,J.stencilZPass)),F(J.polygonOffset,J.polygonOffsetFactor,J.polygonOffsetUnits),J.alphaToCoverage===!0?ot(e.SAMPLE_ALPHA_TO_COVERAGE):tt(e.SAMPLE_ALPHA_TO_COVERAGE)}function Gt(J){T!==J&&(J?e.frontFace(e.CW):e.frontFace(e.CCW),T=J)}function ve(J){J!==T5t?(ot(e.CULL_FACE),J!==M&&(J===A7?e.cullFace(e.BACK):J===M5t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):tt(e.CULL_FACE),M=J}function W(J){J!==C&&(L&&e.lineWidth(J),C=J)}function F(J,ne,Qt){J?(ot(e.POLYGON_OFFSET_FILL),(E!==ne||D!==Qt)&&(e.polygonOffset(ne,Qt),E=ne,D=Qt)):tt(e.POLYGON_OFFSET_FILL)}function st(J){J?ot(e.SCISSOR_TEST):tt(e.SCISSOR_TEST)}function bt(J){J===void 0&&(J=e.TEXTURE0+I-1),N!==J&&(e.activeTexture(J),N=J)}function At(J,ne,Qt){Qt===void 0&&(N===null?Qt=e.TEXTURE0+I-1:Qt=N);let Ce=k[Qt];Ce===void 0&&(Ce={type:void 0,texture:void 0},k[Qt]=Ce),(Ce.type!==J||Ce.texture!==ne)&&(N!==Qt&&(e.activeTexture(Qt),N=Qt),e.bindTexture(J,ne||$[J]),Ce.type=J,Ce.texture=ne)}function Et(){const J=k[N];J!==void 0&&J.type!==void 0&&(e.bindTexture(J.type,null),J.type=void 0,J.texture=void 0)}function be(){try{e.compressedTexImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function j(){try{e.compressedTexImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function zt(){try{e.texSubImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ie(){try{e.texSubImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Rt(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function re(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function Oe(){try{e.texStorage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function pe(){try{e.texStorage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function ge(){try{e.texImage2D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function en(){try{e.texImage3D.apply(e,arguments)}catch(J){console.error("THREE.WebGLState:",J)}}function rn(J){nt.equals(J)===!1&&(e.scissor(J.x,J.y,J.z,J.w),nt.copy(J))}function rr(J){ct.equals(J)===!1&&(e.viewport(J.x,J.y,J.z,J.w),ct.copy(J))}function Jn(J,ne){let Qt=l.get(ne);Qt===void 0&&(Qt=new WeakMap,l.set(ne,Qt));let Ce=Qt.get(J);Ce===void 0&&(Ce=e.getUniformBlockIndex(ne,J.name),Qt.set(J,Ce))}function Pr(J,ne){const Ce=l.get(ne).get(J);s.get(ne)!==Ce&&(e.uniformBlockBinding(ne,Ce,J.__bindingPointIndex),s.set(ne,Ce))}function Te(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},N=null,k={},c={},h=new WeakMap,f=[],d=null,p=!1,v=null,g=null,m=null,_=null,y=null,x=null,S=null,b=new Dn(0,0,0),w=0,A=!1,T=null,M=null,C=null,E=null,D=null,nt.set(0,0,e.canvas.width,e.canvas.height),ct.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}return{buffers:{color:i,depth:a,stencil:o},enable:ot,disable:tt,bindFramebuffer:et,drawBuffers:xt,useProgram:St,setBlending:It,setMaterial:Jt,setFlipSided:Gt,setCullFace:ve,setLineWidth:W,setPolygonOffset:F,setScissorTest:st,activeTexture:bt,bindTexture:At,unbindTexture:Et,compressedTexImage2D:be,compressedTexImage3D:j,texImage2D:ge,texImage3D:en,updateUBOMapping:Jn,uniformBlockBinding:Pr,texStorage2D:Oe,texStorage3D:pe,texSubImage2D:zt,texSubImage3D:ie,compressedTexSubImage2D:Rt,compressedTexSubImage3D:re,scissor:rn,viewport:rr,reset:Te}}function X$t(e,t,n,r,i,a,o){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ee,c=new WeakMap;let h;const f=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(W,F){return d?new OffscreenCanvas(W,F):EC("canvas")}function v(W,F,st){let bt=1;const At=ve(W);if((At.width>st||At.height>st)&&(bt=st/Math.max(At.width,At.height)),bt<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const Et=Math.floor(bt*At.width),be=Math.floor(bt*At.height);h===void 0&&(h=p(Et,be));const j=F?p(Et,be):h;return j.width=Et,j.height=be,j.getContext("2d").drawImage(W,0,0,Et,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+At.width+"x"+At.height+") to ("+Et+"x"+be+")."),j}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+At.width+"x"+At.height+")."),W;return W}function g(W){return W.generateMipmaps&&W.minFilter!==yo&&W.minFilter!==_l}function m(W){e.generateMipmap(W)}function _(W,F,st,bt,At=!1){if(W!==null){if(e[W]!==void 0)return e[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let Et=F;if(F===e.RED&&(st===e.FLOAT&&(Et=e.R32F),st===e.HALF_FLOAT&&(Et=e.R16F),st===e.UNSIGNED_BYTE&&(Et=e.R8)),F===e.RED_INTEGER&&(st===e.UNSIGNED_BYTE&&(Et=e.R8UI),st===e.UNSIGNED_SHORT&&(Et=e.R16UI),st===e.UNSIGNED_INT&&(Et=e.R32UI),st===e.BYTE&&(Et=e.R8I),st===e.SHORT&&(Et=e.R16I),st===e.INT&&(Et=e.R32I)),F===e.RG&&(st===e.FLOAT&&(Et=e.RG32F),st===e.HALF_FLOAT&&(Et=e.RG16F),st===e.UNSIGNED_BYTE&&(Et=e.RG8)),F===e.RG_INTEGER&&(st===e.UNSIGNED_BYTE&&(Et=e.RG8UI),st===e.UNSIGNED_SHORT&&(Et=e.RG16UI),st===e.UNSIGNED_INT&&(Et=e.RG32UI),st===e.BYTE&&(Et=e.RG8I),st===e.SHORT&&(Et=e.RG16I),st===e.INT&&(Et=e.RG32I)),F===e.RGB&&st===e.UNSIGNED_INT_5_9_9_9_REV&&(Et=e.RGB9_E5),F===e.RGBA){const be=At?TC:dr.getTransfer(bt);st===e.FLOAT&&(Et=e.RGBA32F),st===e.HALF_FLOAT&&(Et=e.RGBA16F),st===e.UNSIGNED_BYTE&&(Et=be===Cr?e.SRGB8_ALPHA8:e.RGBA8),st===e.UNSIGNED_SHORT_4_4_4_4&&(Et=e.RGBA4),st===e.UNSIGNED_SHORT_5_5_5_1&&(Et=e.RGB5_A1)}return(Et===e.R16F||Et===e.R32F||Et===e.RG16F||Et===e.RG32F||Et===e.RGBA16F||Et===e.RGBA32F)&&t.get("EXT_color_buffer_float"),Et}function y(W,F){return g(W)===!0||W.isFramebufferTexture&&W.minFilter!==yo&&W.minFilter!==_l?Math.log2(Math.max(F.width,F.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?F.mipmaps.length:1}function x(W){const F=W.target;F.removeEventListener("dispose",x),b(F),F.isVideoTexture&&c.delete(F)}function S(W){const F=W.target;F.removeEventListener("dispose",S),A(F)}function b(W){const F=r.get(W);if(F.__webglInit===void 0)return;const st=W.source,bt=f.get(st);if(bt){const At=bt[F.__cacheKey];At.usedTimes--,At.usedTimes===0&&w(W),Object.keys(bt).length===0&&f.delete(st)}r.remove(W)}function w(W){const F=r.get(W);e.deleteTexture(F.__webglTexture);const st=W.source,bt=f.get(st);delete bt[F.__cacheKey],o.memory.textures--}function A(W){const F=r.get(W);if(W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let bt=0;bt<6;bt++){if(Array.isArray(F.__webglFramebuffer[bt]))for(let At=0;At<F.__webglFramebuffer[bt].length;At++)e.deleteFramebuffer(F.__webglFramebuffer[bt][At]);else e.deleteFramebuffer(F.__webglFramebuffer[bt]);F.__webglDepthbuffer&&e.deleteRenderbuffer(F.__webglDepthbuffer[bt])}else{if(Array.isArray(F.__webglFramebuffer))for(let bt=0;bt<F.__webglFramebuffer.length;bt++)e.deleteFramebuffer(F.__webglFramebuffer[bt]);else e.deleteFramebuffer(F.__webglFramebuffer);if(F.__webglDepthbuffer&&e.deleteRenderbuffer(F.__webglDepthbuffer),F.__webglMultisampledFramebuffer&&e.deleteFramebuffer(F.__webglMultisampledFramebuffer),F.__webglColorRenderbuffer)for(let bt=0;bt<F.__webglColorRenderbuffer.length;bt++)F.__webglColorRenderbuffer[bt]&&e.deleteRenderbuffer(F.__webglColorRenderbuffer[bt]);F.__webglDepthRenderbuffer&&e.deleteRenderbuffer(F.__webglDepthRenderbuffer)}const st=W.textures;for(let bt=0,At=st.length;bt<At;bt++){const Et=r.get(st[bt]);Et.__webglTexture&&(e.deleteTexture(Et.__webglTexture),o.memory.textures--),r.remove(st[bt])}r.remove(W)}let T=0;function M(){T=0}function C(){const W=T;return W>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+i.maxTextures),T+=1,W}function E(W){const F=[];return F.push(W.wrapS),F.push(W.wrapT),F.push(W.wrapR||0),F.push(W.magFilter),F.push(W.minFilter),F.push(W.anisotropy),F.push(W.internalFormat),F.push(W.format),F.push(W.type),F.push(W.generateMipmaps),F.push(W.premultiplyAlpha),F.push(W.flipY),F.push(W.unpackAlignment),F.push(W.colorSpace),F.join()}function D(W,F){const st=r.get(W);if(W.isVideoTexture&&Jt(W),W.isRenderTargetTexture===!1&&W.version>0&&st.__version!==W.version){const bt=W.image;if(bt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(bt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(st,W,F);return}}n.bindTexture(e.TEXTURE_2D,st.__webglTexture,e.TEXTURE0+F)}function I(W,F){const st=r.get(W);if(W.version>0&&st.__version!==W.version){nt(st,W,F);return}n.bindTexture(e.TEXTURE_2D_ARRAY,st.__webglTexture,e.TEXTURE0+F)}function L(W,F){const st=r.get(W);if(W.version>0&&st.__version!==W.version){nt(st,W,F);return}n.bindTexture(e.TEXTURE_3D,st.__webglTexture,e.TEXTURE0+F)}function P(W,F){const st=r.get(W);if(W.version>0&&st.__version!==W.version){ct(st,W,F);return}n.bindTexture(e.TEXTURE_CUBE_MAP,st.__webglTexture,e.TEXTURE0+F)}const B={[O3]:e.REPEAT,[Xp]:e.CLAMP_TO_EDGE,[N3]:e.MIRRORED_REPEAT},N={[yo]:e.NEAREST,[sGt]:e.NEAREST_MIPMAP_NEAREST,[jw]:e.NEAREST_MIPMAP_LINEAR,[_l]:e.LINEAR,[cP]:e.LINEAR_MIPMAP_NEAREST,[jp]:e.LINEAR_MIPMAP_LINEAR},k={[AGt]:e.NEVER,[PGt]:e.ALWAYS,[CGt]:e.LESS,[Rst]:e.LEQUAL,[EGt]:e.EQUAL,[LGt]:e.GEQUAL,[DGt]:e.GREATER,[IGt]:e.NOTEQUAL};function U(W,F){if(F.type===Bc&&t.has("OES_texture_float_linear")===!1&&(F.magFilter===_l||F.magFilter===cP||F.magFilter===jw||F.magFilter===jp||F.minFilter===_l||F.minFilter===cP||F.minFilter===jw||F.minFilter===jp)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(W,e.TEXTURE_WRAP_S,B[F.wrapS]),e.texParameteri(W,e.TEXTURE_WRAP_T,B[F.wrapT]),(W===e.TEXTURE_3D||W===e.TEXTURE_2D_ARRAY)&&e.texParameteri(W,e.TEXTURE_WRAP_R,B[F.wrapR]),e.texParameteri(W,e.TEXTURE_MAG_FILTER,N[F.magFilter]),e.texParameteri(W,e.TEXTURE_MIN_FILTER,N[F.minFilter]),F.compareFunction&&(e.texParameteri(W,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(W,e.TEXTURE_COMPARE_FUNC,k[F.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(F.magFilter===yo||F.minFilter!==jw&&F.minFilter!==jp||F.type===Bc&&t.has("OES_texture_float_linear")===!1)return;if(F.anisotropy>1||r.get(F).__currentAnisotropy){const st=t.get("EXT_texture_filter_anisotropic");e.texParameterf(W,st.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(F.anisotropy,i.getMaxAnisotropy())),r.get(F).__currentAnisotropy=F.anisotropy}}}function Z(W,F){let st=!1;W.__webglInit===void 0&&(W.__webglInit=!0,F.addEventListener("dispose",x));const bt=F.source;let At=f.get(bt);At===void 0&&(At={},f.set(bt,At));const Et=E(F);if(Et!==W.__cacheKey){At[Et]===void 0&&(At[Et]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,st=!0),At[Et].usedTimes++;const be=At[W.__cacheKey];be!==void 0&&(At[W.__cacheKey].usedTimes--,be.usedTimes===0&&w(F)),W.__cacheKey=Et,W.__webglTexture=At[Et].texture}return st}function nt(W,F,st){let bt=e.TEXTURE_2D;(F.isDataArrayTexture||F.isCompressedArrayTexture)&&(bt=e.TEXTURE_2D_ARRAY),F.isData3DTexture&&(bt=e.TEXTURE_3D);const At=Z(W,F),Et=F.source;n.bindTexture(bt,W.__webglTexture,e.TEXTURE0+st);const be=r.get(Et);if(Et.version!==be.__version||At===!0){n.activeTexture(e.TEXTURE0+st);const j=dr.getPrimaries(dr.workingColorSpace),zt=F.colorSpace===vf?null:dr.getPrimaries(F.colorSpace),ie=F.colorSpace===vf||j===zt?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,F.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,F.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,ie);let Rt=v(F.image,!1,i.maxTextureSize);Rt=Gt(F,Rt);const re=a.convert(F.format,F.colorSpace),Oe=a.convert(F.type);let pe=_(F.internalFormat,re,Oe,F.colorSpace,F.isVideoTexture);U(bt,F);let ge;const en=F.mipmaps,rn=F.isVideoTexture!==!0&&pe!==Pst,rr=be.__version===void 0||At===!0,Jn=Et.dataReady,Pr=y(F,Rt);if(F.isDepthTexture)pe=e.DEPTH_COMPONENT16,F.type===Bc?pe=e.DEPTH_COMPONENT32F:F.type===Fy?pe=e.DEPTH_COMPONENT24:F.type===Q1&&(pe=e.DEPTH24_STENCIL8),rr&&(rn?n.texStorage2D(e.TEXTURE_2D,1,pe,Rt.width,Rt.height):n.texImage2D(e.TEXTURE_2D,0,pe,Rt.width,Rt.height,0,re,Oe,null));else if(F.isDataTexture)if(en.length>0){rn&&rr&&n.texStorage2D(e.TEXTURE_2D,Pr,pe,en[0].width,en[0].height);for(let Te=0,J=en.length;Te<J;Te++)ge=en[Te],rn?Jn&&n.texSubImage2D(e.TEXTURE_2D,Te,0,0,ge.width,ge.height,re,Oe,ge.data):n.texImage2D(e.TEXTURE_2D,Te,pe,ge.width,ge.height,0,re,Oe,ge.data);F.generateMipmaps=!1}else rn?(rr&&n.texStorage2D(e.TEXTURE_2D,Pr,pe,Rt.width,Rt.height),Jn&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,Rt.width,Rt.height,re,Oe,Rt.data)):n.texImage2D(e.TEXTURE_2D,0,pe,Rt.width,Rt.height,0,re,Oe,Rt.data);else if(F.isCompressedTexture)if(F.isCompressedArrayTexture){rn&&rr&&n.texStorage3D(e.TEXTURE_2D_ARRAY,Pr,pe,en[0].width,en[0].height,Rt.depth);for(let Te=0,J=en.length;Te<J;Te++)ge=en[Te],F.format!==Ml?re!==null?rn?Jn&&n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,Te,0,0,0,ge.width,ge.height,Rt.depth,re,ge.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,Te,pe,ge.width,ge.height,Rt.depth,0,ge.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rn?Jn&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,Te,0,0,0,ge.width,ge.height,Rt.depth,re,Oe,ge.data):n.texImage3D(e.TEXTURE_2D_ARRAY,Te,pe,ge.width,ge.height,Rt.depth,0,re,Oe,ge.data)}else{rn&&rr&&n.texStorage2D(e.TEXTURE_2D,Pr,pe,en[0].width,en[0].height);for(let Te=0,J=en.length;Te<J;Te++)ge=en[Te],F.format!==Ml?re!==null?rn?Jn&&n.compressedTexSubImage2D(e.TEXTURE_2D,Te,0,0,ge.width,ge.height,re,ge.data):n.compressedTexImage2D(e.TEXTURE_2D,Te,pe,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):rn?Jn&&n.texSubImage2D(e.TEXTURE_2D,Te,0,0,ge.width,ge.height,re,Oe,ge.data):n.texImage2D(e.TEXTURE_2D,Te,pe,ge.width,ge.height,0,re,Oe,ge.data)}else if(F.isDataArrayTexture)rn?(rr&&n.texStorage3D(e.TEXTURE_2D_ARRAY,Pr,pe,Rt.width,Rt.height,Rt.depth),Jn&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,Rt.width,Rt.height,Rt.depth,re,Oe,Rt.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,pe,Rt.width,Rt.height,Rt.depth,0,re,Oe,Rt.data);else if(F.isData3DTexture)rn?(rr&&n.texStorage3D(e.TEXTURE_3D,Pr,pe,Rt.width,Rt.height,Rt.depth),Jn&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,Rt.width,Rt.height,Rt.depth,re,Oe,Rt.data)):n.texImage3D(e.TEXTURE_3D,0,pe,Rt.width,Rt.height,Rt.depth,0,re,Oe,Rt.data);else if(F.isFramebufferTexture){if(rr)if(rn)n.texStorage2D(e.TEXTURE_2D,Pr,pe,Rt.width,Rt.height);else{let Te=Rt.width,J=Rt.height;for(let ne=0;ne<Pr;ne++)n.texImage2D(e.TEXTURE_2D,ne,pe,Te,J,0,re,Oe,null),Te>>=1,J>>=1}}else if(en.length>0){if(rn&&rr){const Te=ve(en[0]);n.texStorage2D(e.TEXTURE_2D,Pr,pe,Te.width,Te.height)}for(let Te=0,J=en.length;Te<J;Te++)ge=en[Te],rn?Jn&&n.texSubImage2D(e.TEXTURE_2D,Te,0,0,re,Oe,ge):n.texImage2D(e.TEXTURE_2D,Te,pe,re,Oe,ge);F.generateMipmaps=!1}else if(rn){if(rr){const Te=ve(Rt);n.texStorage2D(e.TEXTURE_2D,Pr,pe,Te.width,Te.height)}Jn&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,re,Oe,Rt)}else n.texImage2D(e.TEXTURE_2D,0,pe,re,Oe,Rt);g(F)&&m(bt),be.__version=Et.version,F.onUpdate&&F.onUpdate(F)}W.__version=F.version}function ct(W,F,st){if(F.image.length!==6)return;const bt=Z(W,F),At=F.source;n.bindTexture(e.TEXTURE_CUBE_MAP,W.__webglTexture,e.TEXTURE0+st);const Et=r.get(At);if(At.version!==Et.__version||bt===!0){n.activeTexture(e.TEXTURE0+st);const be=dr.getPrimaries(dr.workingColorSpace),j=F.colorSpace===vf?null:dr.getPrimaries(F.colorSpace),zt=F.colorSpace===vf||be===j?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,F.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,F.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,zt);const ie=F.isCompressedTexture||F.image[0].isCompressedTexture,Rt=F.image[0]&&F.image[0].isDataTexture,re=[];for(let J=0;J<6;J++)!ie&&!Rt?re[J]=v(F.image[J],!0,i.maxCubemapSize):re[J]=Rt?F.image[J].image:F.image[J],re[J]=Gt(F,re[J]);const Oe=re[0],pe=a.convert(F.format,F.colorSpace),ge=a.convert(F.type),en=_(F.internalFormat,pe,ge,F.colorSpace),rn=F.isVideoTexture!==!0,rr=Et.__version===void 0||bt===!0,Jn=At.dataReady;let Pr=y(F,Oe);U(e.TEXTURE_CUBE_MAP,F);let Te;if(ie){rn&&rr&&n.texStorage2D(e.TEXTURE_CUBE_MAP,Pr,en,Oe.width,Oe.height);for(let J=0;J<6;J++){Te=re[J].mipmaps;for(let ne=0;ne<Te.length;ne++){const Qt=Te[ne];F.format!==Ml?pe!==null?rn?Jn&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne,0,0,Qt.width,Qt.height,pe,Qt.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne,en,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):rn?Jn&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne,0,0,Qt.width,Qt.height,pe,ge,Qt.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne,en,Qt.width,Qt.height,0,pe,ge,Qt.data)}}}else{if(Te=F.mipmaps,rn&&rr){Te.length>0&&Pr++;const J=ve(re[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,Pr,en,J.width,J.height)}for(let J=0;J<6;J++)if(Rt){rn?Jn&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,re[J].width,re[J].height,pe,ge,re[J].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,en,re[J].width,re[J].height,0,pe,ge,re[J].data);for(let ne=0;ne<Te.length;ne++){const Ce=Te[ne].image[J].image;rn?Jn&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne+1,0,0,Ce.width,Ce.height,pe,ge,Ce.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne+1,en,Ce.width,Ce.height,0,pe,ge,Ce.data)}}else{rn?Jn&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,0,0,pe,ge,re[J]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,0,en,pe,ge,re[J]);for(let ne=0;ne<Te.length;ne++){const Qt=Te[ne];rn?Jn&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne+1,0,0,pe,ge,Qt.image[J]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+J,ne+1,en,pe,ge,Qt.image[J])}}}g(F)&&m(e.TEXTURE_CUBE_MAP),Et.__version=At.version,F.onUpdate&&F.onUpdate(F)}W.__version=F.version}function K(W,F,st,bt,At,Et){const be=a.convert(st.format,st.colorSpace),j=a.convert(st.type),zt=_(st.internalFormat,be,j,st.colorSpace);if(!r.get(F).__hasExternalTextures){const Rt=Math.max(1,F.width>>Et),re=Math.max(1,F.height>>Et);At===e.TEXTURE_3D||At===e.TEXTURE_2D_ARRAY?n.texImage3D(At,Et,zt,Rt,re,F.depth,0,be,j,null):n.texImage2D(At,Et,zt,Rt,re,0,be,j,null)}n.bindFramebuffer(e.FRAMEBUFFER,W),It(F)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,bt,At,r.get(st).__webglTexture,0,Ct(F)):(At===e.TEXTURE_2D||At>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&At<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,bt,At,r.get(st).__webglTexture,Et),n.bindFramebuffer(e.FRAMEBUFFER,null)}function $(W,F,st){if(e.bindRenderbuffer(e.RENDERBUFFER,W),F.depthBuffer&&!F.stencilBuffer){let bt=e.DEPTH_COMPONENT24;if(st||It(F)){const At=F.depthTexture;At&&At.isDepthTexture&&(At.type===Bc?bt=e.DEPTH_COMPONENT32F:At.type===Fy&&(bt=e.DEPTH_COMPONENT24));const Et=Ct(F);It(F)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,Et,bt,F.width,F.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,Et,bt,F.width,F.height)}else e.renderbufferStorage(e.RENDERBUFFER,bt,F.width,F.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,W)}else if(F.depthBuffer&&F.stencilBuffer){const bt=Ct(F);st&&It(F)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,bt,e.DEPTH24_STENCIL8,F.width,F.height):It(F)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,bt,e.DEPTH24_STENCIL8,F.width,F.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,F.width,F.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,W)}else{const bt=F.textures;for(let At=0;At<bt.length;At++){const Et=bt[At],be=a.convert(Et.format,Et.colorSpace),j=a.convert(Et.type),zt=_(Et.internalFormat,be,j,Et.colorSpace),ie=Ct(F);st&&It(F)===!1?e.renderbufferStorageMultisample(e.RENDERBUFFER,ie,zt,F.width,F.height):It(F)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,ie,zt,F.width,F.height):e.renderbufferStorage(e.RENDERBUFFER,zt,F.width,F.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function ot(W,F){if(F&&F.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,W),!(F.depthTexture&&F.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(F.depthTexture).__webglTexture||F.depthTexture.image.width!==F.width||F.depthTexture.image.height!==F.height)&&(F.depthTexture.image.width=F.width,F.depthTexture.image.height=F.height,F.depthTexture.needsUpdate=!0),D(F.depthTexture,0);const bt=r.get(F.depthTexture).__webglTexture,At=Ct(F);if(F.depthTexture.format===Wm)It(F)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,bt,0,At):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,bt,0);else if(F.depthTexture.format===e1)It(F)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,bt,0,At):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,bt,0);else throw new Error("Unknown depthTexture format")}function tt(W){const F=r.get(W),st=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture&&!F.__autoAllocateDepthBuffer){if(st)throw new Error("target.depthTexture not supported in Cube render targets");ot(F.__webglFramebuffer,W)}else if(st){F.__webglDepthbuffer=[];for(let bt=0;bt<6;bt++)n.bindFramebuffer(e.FRAMEBUFFER,F.__webglFramebuffer[bt]),F.__webglDepthbuffer[bt]=e.createRenderbuffer(),$(F.__webglDepthbuffer[bt],W,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,F.__webglFramebuffer),F.__webglDepthbuffer=e.createRenderbuffer(),$(F.__webglDepthbuffer,W,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function et(W,F,st){const bt=r.get(W);F!==void 0&&K(bt.__webglFramebuffer,W,W.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),st!==void 0&&tt(W)}function xt(W){const F=W.texture,st=r.get(W),bt=r.get(F);W.addEventListener("dispose",S);const At=W.textures,Et=W.isWebGLCubeRenderTarget===!0,be=At.length>1;if(be||(bt.__webglTexture===void 0&&(bt.__webglTexture=e.createTexture()),bt.__version=F.version,o.memory.textures++),Et){st.__webglFramebuffer=[];for(let j=0;j<6;j++)if(F.mipmaps&&F.mipmaps.length>0){st.__webglFramebuffer[j]=[];for(let zt=0;zt<F.mipmaps.length;zt++)st.__webglFramebuffer[j][zt]=e.createFramebuffer()}else st.__webglFramebuffer[j]=e.createFramebuffer()}else{if(F.mipmaps&&F.mipmaps.length>0){st.__webglFramebuffer=[];for(let j=0;j<F.mipmaps.length;j++)st.__webglFramebuffer[j]=e.createFramebuffer()}else st.__webglFramebuffer=e.createFramebuffer();if(be)for(let j=0,zt=At.length;j<zt;j++){const ie=r.get(At[j]);ie.__webglTexture===void 0&&(ie.__webglTexture=e.createTexture(),o.memory.textures++)}if(W.samples>0&&It(W)===!1){st.__webglMultisampledFramebuffer=e.createFramebuffer(),st.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,st.__webglMultisampledFramebuffer);for(let j=0;j<At.length;j++){const zt=At[j];st.__webglColorRenderbuffer[j]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,st.__webglColorRenderbuffer[j]);const ie=a.convert(zt.format,zt.colorSpace),Rt=a.convert(zt.type),re=_(zt.internalFormat,ie,Rt,zt.colorSpace,W.isXRRenderTarget===!0),Oe=Ct(W);e.renderbufferStorageMultisample(e.RENDERBUFFER,Oe,re,W.width,W.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+j,e.RENDERBUFFER,st.__webglColorRenderbuffer[j])}e.bindRenderbuffer(e.RENDERBUFFER,null),W.depthBuffer&&(st.__webglDepthRenderbuffer=e.createRenderbuffer(),$(st.__webglDepthRenderbuffer,W,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(Et){n.bindTexture(e.TEXTURE_CUBE_MAP,bt.__webglTexture),U(e.TEXTURE_CUBE_MAP,F);for(let j=0;j<6;j++)if(F.mipmaps&&F.mipmaps.length>0)for(let zt=0;zt<F.mipmaps.length;zt++)K(st.__webglFramebuffer[j][zt],W,F,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+j,zt);else K(st.__webglFramebuffer[j],W,F,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+j,0);g(F)&&m(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(be){for(let j=0,zt=At.length;j<zt;j++){const ie=At[j],Rt=r.get(ie);n.bindTexture(e.TEXTURE_2D,Rt.__webglTexture),U(e.TEXTURE_2D,ie),K(st.__webglFramebuffer,W,ie,e.COLOR_ATTACHMENT0+j,e.TEXTURE_2D,0),g(ie)&&m(e.TEXTURE_2D)}n.unbindTexture()}else{let j=e.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(j=W.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(j,bt.__webglTexture),U(j,F),F.mipmaps&&F.mipmaps.length>0)for(let zt=0;zt<F.mipmaps.length;zt++)K(st.__webglFramebuffer[zt],W,F,e.COLOR_ATTACHMENT0,j,zt);else K(st.__webglFramebuffer,W,F,e.COLOR_ATTACHMENT0,j,0);g(F)&&m(j),n.unbindTexture()}W.depthBuffer&&tt(W)}function St(W){const F=W.textures;for(let st=0,bt=F.length;st<bt;st++){const At=F[st];if(g(At)){const Et=W.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,be=r.get(At).__webglTexture;n.bindTexture(Et,be),m(Et),n.unbindTexture()}}}function X(W){if(W.samples>0&&It(W)===!1){const F=W.textures,st=W.width,bt=W.height;let At=e.COLOR_BUFFER_BIT;const Et=[],be=W.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,j=r.get(W),zt=F.length>1;if(zt)for(let ie=0;ie<F.length;ie++)n.bindFramebuffer(e.FRAMEBUFFER,j.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+ie,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,j.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+ie,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,j.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,j.__webglFramebuffer);for(let ie=0;ie<F.length;ie++){Et.push(e.COLOR_ATTACHMENT0+ie),W.depthBuffer&&Et.push(be);const Rt=j.__ignoreDepthValues!==void 0?j.__ignoreDepthValues:!1;if(Rt===!1&&(W.depthBuffer&&(At|=e.DEPTH_BUFFER_BIT),W.stencilBuffer&&j.__isTransmissionRenderTarget!==!0&&(At|=e.STENCIL_BUFFER_BIT)),zt&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,j.__webglColorRenderbuffer[ie]),Rt===!0&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[be]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[be])),zt){const re=r.get(F[ie]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,re,0)}e.blitFramebuffer(0,0,st,bt,0,0,st,bt,At,e.NEAREST),l&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,Et)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),zt)for(let ie=0;ie<F.length;ie++){n.bindFramebuffer(e.FRAMEBUFFER,j.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+ie,e.RENDERBUFFER,j.__webglColorRenderbuffer[ie]);const Rt=r.get(F[ie]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,j.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+ie,e.TEXTURE_2D,Rt,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,j.__webglMultisampledFramebuffer)}}function Ct(W){return Math.min(i.maxSamples,W.samples)}function It(W){const F=r.get(W);return W.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&F.__useRenderToTexture!==!1}function Jt(W){const F=o.render.frame;c.get(W)!==F&&(c.set(W,F),W.update())}function Gt(W,F){const st=W.colorSpace,bt=W.format,At=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||st!==yd&&st!==vf&&(dr.getTransfer(st)===Cr?(bt!==Ml||At!==Bf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",st)),F}function ve(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(u.width=W.naturalWidth||W.width,u.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(u.width=W.displayWidth,u.height=W.displayHeight):(u.width=W.width,u.height=W.height),u}this.allocateTextureUnit=C,this.resetTextureUnits=M,this.setTexture2D=D,this.setTexture2DArray=I,this.setTexture3D=L,this.setTextureCube=P,this.rebindTextures=et,this.setupRenderTarget=xt,this.updateRenderTargetMipmap=St,this.updateMultisampleRenderTarget=X,this.setupDepthRenderbuffer=tt,this.setupFrameBufferTexture=K,this.useMultisampledRTT=It}function j$t(e,t){function n(r,i=vf){let a;const o=dr.getTransfer(i);if(r===Bf)return e.UNSIGNED_BYTE;if(r===Cst)return e.UNSIGNED_SHORT_4_4_4_4;if(r===Est)return e.UNSIGNED_SHORT_5_5_5_1;if(r===cGt)return e.UNSIGNED_INT_5_9_9_9_REV;if(r===lGt)return e.BYTE;if(r===uGt)return e.SHORT;if(r===Mst)return e.UNSIGNED_SHORT;if(r===Ast)return e.INT;if(r===Fy)return e.UNSIGNED_INT;if(r===Bc)return e.FLOAT;if(r===xC)return e.HALF_FLOAT;if(r===hGt)return e.ALPHA;if(r===fGt)return e.RGB;if(r===Ml)return e.RGBA;if(r===dGt)return e.LUMINANCE;if(r===pGt)return e.LUMINANCE_ALPHA;if(r===Wm)return e.DEPTH_COMPONENT;if(r===e1)return e.DEPTH_STENCIL;if(r===vGt)return e.RED;if(r===Dst)return e.RED_INTEGER;if(r===gGt)return e.RG;if(r===Ist)return e.RG_INTEGER;if(r===Lst)return e.RGBA_INTEGER;if(r===hP||r===fP||r===dP||r===pP)if(o===Cr)if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===hP)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===fP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===dP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===pP)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===hP)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===fP)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===dP)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===pP)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===I7||r===L7||r===P7||r===R7)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===I7)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===L7)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===P7)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===R7)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===Pst)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===O7||r===N7)if(a=t.get("WEBGL_compressed_texture_etc"),a!==null){if(r===O7)return o===Cr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===N7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===B7||r===k7||r===F7||r===z7||r===U7||r===V7||r===G7||r===H7||r===W7||r===$7||r===X7||r===j7||r===Y7||r===q7)if(a=t.get("WEBGL_compressed_texture_astc"),a!==null){if(r===B7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===k7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===F7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===z7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===U7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===V7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===G7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===H7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===W7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===$7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===X7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===j7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Y7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===q7)return o===Cr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===vP||r===K7||r===Z7)if(a=t.get("EXT_texture_compression_bptc"),a!==null){if(r===vP)return o===Cr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===K7)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Z7)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===mGt||r===J7||r===Q7||r===tX)if(a=t.get("EXT_texture_compression_rgtc"),a!==null){if(r===vP)return a.COMPRESSED_RED_RGTC1_EXT;if(r===J7)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===Q7)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===tX)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Q1?e.UNSIGNED_INT_24_8:e[r]!==void 0?e[r]:null}return{convert:n}}class Y$t extends Ds{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Go extends Ma{constructor(){super(),this.isGroup=!0,this.type="Group"}}const q$t={type:"move"};class VP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Go,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Go,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Go,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const n=this._hand;if(n)for(const r of t.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,n,r){let i=null,a=null,o=null;const s=this._targetRay,l=this._grip,u=this._hand;if(t&&n.session.visibilityState!=="visible-blurred"){if(u&&t.hand){o=!0;for(const v of t.hand.values()){const g=n.getJointPose(v,r),m=this._getHandJoint(u,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,p=.005;u.inputState.pinching&&f>d+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&f<=d-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else l!==null&&t.gripSpace&&(a=n.getPose(t.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));s!==null&&(i=n.getPose(t.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(q$t)))}return s!==null&&(s.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(t,n){if(t.joints[n.jointName]===void 0){const r=new Go;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[n.jointName]=r,t.add(r)}return t.joints[n.jointName]}}const K$t=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Z$t=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class J$t{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,n,r){if(this.texture===null){const i=new Ta,a=t.properties.get(i);a.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(t,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new lh({vertexShader:K$t,fragmentShader:Z$t,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new bi(new tS(20,20),i)}t.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class Q$t extends _d{constructor(t,n){super();const r=this;let i=null,a=1,o=null,s="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,p=null;const v=new J$t,g=n.getContextAttributes();let m=null,_=null;const y=[],x=[],S=new Ee;let b=null;const w=new Ds;w.layers.enable(1),w.viewport=new si;const A=new Ds;A.layers.enable(2),A.viewport=new si;const T=[w,A],M=new Y$t;M.layers.enable(1),M.layers.enable(2);let C=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let $=y[K];return $===void 0&&($=new VP,y[K]=$),$.getTargetRaySpace()},this.getControllerGrip=function(K){let $=y[K];return $===void 0&&($=new VP,y[K]=$),$.getGripSpace()},this.getHand=function(K){let $=y[K];return $===void 0&&($=new VP,y[K]=$),$.getHandSpace()};function D(K){const $=x.indexOf(K.inputSource);if($===-1)return;const ot=y[$];ot!==void 0&&(ot.update(K.inputSource,K.frame,u||o),ot.dispatchEvent({type:K.type,data:K.inputSource}))}function I(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",I),i.removeEventListener("inputsourceschange",L);for(let K=0;K<y.length;K++){const $=x[K];$!==null&&(x[K]=null,y[K].disconnect($))}C=null,E=null,v.reset(),t.setRenderTarget(m),d=null,f=null,h=null,i=null,_=null,ct.stop(),r.isPresenting=!1,t.setPixelRatio(b),t.setSize(S.width,S.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){a=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){s=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(K){u=K},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(m=t.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",I),i.addEventListener("inputsourceschange",L),g.xrCompatible!==!0&&await n.makeXRCompatible(),b=t.getPixelRatio(),t.getSize(S),i.renderState.layers===void 0){const $={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(i,n,$),i.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new Mv(d.framebufferWidth,d.framebufferHeight,{format:Ml,type:Bf,colorSpace:t.outputColorSpace,stencilBuffer:g.stencil})}else{let $=null,ot=null,tt=null;g.depth&&(tt=g.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,$=g.stencil?e1:Wm,ot=g.stencil?Q1:Fy);const et={colorFormat:n.RGBA8,depthFormat:tt,scaleFactor:a};h=new XRWebGLBinding(i,n),f=h.createProjectionLayer(et),i.updateRenderState({layers:[f]}),t.setPixelRatio(1),t.setSize(f.textureWidth,f.textureHeight,!1),_=new Mv(f.textureWidth,f.textureHeight,{format:Ml,type:Bf,depthTexture:new Xst(f.textureWidth,f.textureHeight,ot,void 0,void 0,void 0,void 0,void 0,void 0,$),stencilBuffer:g.stencil,colorSpace:t.outputColorSpace,samples:g.antialias?4:0});const xt=t.properties.get(_);xt.__ignoreDepthValues=f.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(s),ct.setContext(i),ct.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function L(K){for(let $=0;$<K.removed.length;$++){const ot=K.removed[$],tt=x.indexOf(ot);tt>=0&&(x[tt]=null,y[tt].disconnect(ot))}for(let $=0;$<K.added.length;$++){const ot=K.added[$];let tt=x.indexOf(ot);if(tt===-1){for(let xt=0;xt<y.length;xt++)if(xt>=x.length){x.push(ot),tt=xt;break}else if(x[xt]===null){x[xt]=ot,tt=xt;break}if(tt===-1)break}const et=y[tt];et&&et.connect(ot)}}const P=new Y,B=new Y;function N(K,$,ot){P.setFromMatrixPosition($.matrixWorld),B.setFromMatrixPosition(ot.matrixWorld);const tt=P.distanceTo(B),et=$.projectionMatrix.elements,xt=ot.projectionMatrix.elements,St=et[14]/(et[10]-1),X=et[14]/(et[10]+1),Ct=(et[9]+1)/et[5],It=(et[9]-1)/et[5],Jt=(et[8]-1)/et[0],Gt=(xt[8]+1)/xt[0],ve=St*Jt,W=St*Gt,F=tt/(-Jt+Gt),st=F*-Jt;$.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(st),K.translateZ(F),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert();const bt=St+F,At=X+F,Et=ve-st,be=W+(tt-st),j=Ct*X/At*bt,zt=It*X/At*bt;K.projectionMatrix.makePerspective(Et,be,j,zt,bt,At),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}function k(K,$){$===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices($.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;v.texture!==null&&(K.near=v.depthNear,K.far=v.depthFar),M.near=A.near=w.near=K.near,M.far=A.far=w.far=K.far,(C!==M.near||E!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,E=M.far,w.near=C,w.far=E,A.near=C,A.far=E,w.updateProjectionMatrix(),A.updateProjectionMatrix(),K.updateProjectionMatrix());const $=K.parent,ot=M.cameras;k(M,$);for(let tt=0;tt<ot.length;tt++)k(ot[tt],$);ot.length===2?N(M,w,A):M.projectionMatrix.copy(w.projectionMatrix),U(K,M,$)};function U(K,$,ot){ot===null?K.matrix.copy($.matrixWorld):(K.matrix.copy(ot.matrixWorld),K.matrix.invert(),K.matrix.multiply($.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy($.projectionMatrix),K.projectionMatrixInverse.copy($.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=n1*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(K){l=K,f!==null&&(f.fixedFoveation=K),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=K)},this.hasDepthSensing=function(){return v.texture!==null};let Z=null;function nt(K,$){if(c=$.getViewerPose(u||o),p=$,c!==null){const ot=c.views;d!==null&&(t.setRenderTargetFramebuffer(_,d.framebuffer),t.setRenderTarget(_));let tt=!1;ot.length!==M.cameras.length&&(M.cameras.length=0,tt=!0);for(let xt=0;xt<ot.length;xt++){const St=ot[xt];let X=null;if(d!==null)X=d.getViewport(St);else{const It=h.getViewSubImage(f,St);X=It.viewport,xt===0&&(t.setRenderTargetTextures(_,It.colorTexture,f.ignoreDepthValues?void 0:It.depthStencilTexture),t.setRenderTarget(_))}let Ct=T[xt];Ct===void 0&&(Ct=new Ds,Ct.layers.enable(xt),Ct.viewport=new si,T[xt]=Ct),Ct.matrix.fromArray(St.transform.matrix),Ct.matrix.decompose(Ct.position,Ct.quaternion,Ct.scale),Ct.projectionMatrix.fromArray(St.projectionMatrix),Ct.projectionMatrixInverse.copy(Ct.projectionMatrix).invert(),Ct.viewport.set(X.x,X.y,X.width,X.height),xt===0&&(M.matrix.copy(Ct.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),tt===!0&&M.cameras.push(Ct)}const et=i.enabledFeatures;if(et&&et.includes("depth-sensing")){const xt=h.getDepthInformation(ot[0]);xt&&xt.isValid&&xt.texture&&v.init(t,xt,i.renderState)}}for(let ot=0;ot<y.length;ot++){const tt=x[ot],et=y[ot];tt!==null&&et!==void 0&&et.update(tt,$,u||o)}v.render(t,M),Z&&Z(K,$),$.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:$}),p=null}const ct=new $st;ct.setAnimationLoop(nt),this.setAnimationLoop=function(K){Z=K},this.dispose=function(){}}}const up=new Xu,t9t=new cr;function e9t(e,t){function n(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function r(g,m){m.color.getRGB(g.fogColor.value,Vst(e)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,_,y,x){m.isMeshBasicMaterial||m.isMeshLambertMaterial?a(g,m):m.isMeshToonMaterial?(a(g,m),h(g,m)):m.isMeshPhongMaterial?(a(g,m),c(g,m)):m.isMeshStandardMaterial?(a(g,m),f(g,m),m.isMeshPhysicalMaterial&&d(g,m,x)):m.isMeshMatcapMaterial?(a(g,m),p(g,m)):m.isMeshDepthMaterial?a(g,m):m.isMeshDistanceMaterial?(a(g,m),v(g,m)):m.isMeshNormalMaterial?a(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&s(g,m)):m.isPointsMaterial?l(g,m,_,y):m.isSpriteMaterial?u(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function a(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,n(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===bo&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,n(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===bo&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,n(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,n(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const _=t.get(m),y=_.envMap,x=_.envMapRotation;if(y&&(g.envMap.value=y,up.copy(x),up.x*=-1,up.y*=-1,up.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(up.y*=-1,up.z*=-1),g.envMapRotation.value.setFromMatrix4(t9t.makeRotationFromEuler(up)),g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;const S=e._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*S,n(m.lightMap,g.lightMapTransform)}m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform))}function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,_,y){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*_,g.scale.value=y*.5,m.map&&(g.map.value=m.map,n(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function h(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function d(g,m,_){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===bo&&g.clearcoatNormalScale.value.negate())),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){const _=t.get(m).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function n9t(e,t,n,r){let i={},a={},o=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,y){const x=y.program;r.uniformBlockBinding(_,x)}function u(_,y){let x=i[_.id];x===void 0&&(p(_),x=c(_),i[_.id]=x,_.addEventListener("dispose",g));const S=y.program;r.updateUBOMapping(_,S);const b=t.render.frame;a[_.id]!==b&&(f(_),a[_.id]=b)}function c(_){const y=h();_.__bindingPointIndex=y;const x=e.createBuffer(),S=_.__size,b=_.usage;return e.bindBuffer(e.UNIFORM_BUFFER,x),e.bufferData(e.UNIFORM_BUFFER,S,b),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,y,x),x}function h(){for(let _=0;_<s;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const y=i[_.id],x=_.uniforms,S=_.__cache;e.bindBuffer(e.UNIFORM_BUFFER,y);for(let b=0,w=x.length;b<w;b++){const A=Array.isArray(x[b])?x[b]:[x[b]];for(let T=0,M=A.length;T<M;T++){const C=A[T];if(d(C,b,T,S)===!0){const E=C.__offset,D=Array.isArray(C.value)?C.value:[C.value];let I=0;for(let L=0;L<D.length;L++){const P=D[L],B=v(P);typeof P=="number"||typeof P=="boolean"?(C.__data[0]=P,e.bufferSubData(e.UNIFORM_BUFFER,E+I,C.__data)):P.isMatrix3?(C.__data[0]=P.elements[0],C.__data[1]=P.elements[1],C.__data[2]=P.elements[2],C.__data[3]=0,C.__data[4]=P.elements[3],C.__data[5]=P.elements[4],C.__data[6]=P.elements[5],C.__data[7]=0,C.__data[8]=P.elements[6],C.__data[9]=P.elements[7],C.__data[10]=P.elements[8],C.__data[11]=0):(P.toArray(C.__data,I),I+=B.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,E,C.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}function d(_,y,x,S){const b=_.value,w=y+"_"+x;if(S[w]===void 0)return typeof b=="number"||typeof b=="boolean"?S[w]=b:S[w]=b.clone(),!0;{const A=S[w];if(typeof b=="number"||typeof b=="boolean"){if(A!==b)return S[w]=b,!0}else if(A.equals(b)===!1)return A.copy(b),!0}return!1}function p(_){const y=_.uniforms;let x=0;const S=16;for(let w=0,A=y.length;w<A;w++){const T=Array.isArray(y[w])?y[w]:[y[w]];for(let M=0,C=T.length;M<C;M++){const E=T[M],D=Array.isArray(E.value)?E.value:[E.value];for(let I=0,L=D.length;I<L;I++){const P=D[I],B=v(P),N=x%S;N!==0&&S-N<B.boundary&&(x+=S-N),E.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=x,x+=B.storage}}}const b=x%S;return b>0&&(x+=S-b),_.__size=x,_.__cache={},this}function v(_){const y={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(y.boundary=4,y.storage=4):_.isVector2?(y.boundary=8,y.storage=8):_.isVector3||_.isColor?(y.boundary=16,y.storage=12):_.isVector4?(y.boundary=16,y.storage=16):_.isMatrix3?(y.boundary=48,y.storage=48):_.isMatrix4?(y.boundary=64,y.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),y}function g(_){const y=_.target;y.removeEventListener("dispose",g);const x=o.indexOf(y.__bindingPointIndex);o.splice(x,1),e.deleteBuffer(i[y.id]),delete i[y.id],delete a[y.id]}function m(){for(const _ in i)e.deleteBuffer(i[_]);o=[],i={},a={}}return{bind:l,update:u,dispose:m}}class r9t{constructor(t={}){const{canvas:n=qGt(),context:r=null,depth:i=!0,stencil:a=!1,alpha:o=!1,antialias:s=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=t;this.isWebGLRenderer=!0;let f;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=r.getContextAttributes().alpha}else f=o;const d=new Uint32Array(4),p=new Int32Array(4);let v=null,g=null;const m=[],_=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=cu,this._useLegacyLights=!1,this.toneMapping=Nf,this.toneMappingExposure=1;const y=this;let x=!1,S=0,b=0,w=null,A=-1,T=null;const M=new si,C=new si;let E=null;const D=new Dn(0);let I=0,L=n.width,P=n.height,B=1,N=null,k=null;const U=new si(0,0,L,P),Z=new si(0,0,L,P);let nt=!1;const ct=new Wst;let K=!1,$=!1;const ot=new cr,tt=new Ee,et=new Y,xt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function St(){return w===null?B:1}let X=r;function Ct(H,at){const dt=n.getContext(H,at);return dt!==null?dt:null}try{const H={alpha:!0,depth:i,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${AU}`),n.addEventListener("webglcontextlost",ne,!1),n.addEventListener("webglcontextrestored",Qt,!1),n.addEventListener("webglcontextcreationerror",Ce,!1),X===null){const at="webgl2";if(X=Ct(at,H),X===null)throw Ct(at)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let It,Jt,Gt,ve,W,F,st,bt,At,Et,be,j,zt,ie,Rt,re,Oe,pe,ge,en,rn,rr,Jn,Pr;function Te(){It=new h8t(X),It.init(),Jt=new i8t(X,It,t),rr=new j$t(X,It),Gt=new $$t(X),ve=new p8t(X),W=new L$t,F=new X$t(X,It,Gt,W,Jt,rr,ve),st=new o8t(y),bt=new c8t(y),At=new _Ht(X),Jn=new n8t(X,At),Et=new f8t(X,At,ve,Jn),be=new g8t(X,Et,At,ve),ge=new v8t(X,Jt,F),re=new a8t(W),j=new I$t(y,st,bt,It,Jt,Jn,re),zt=new e9t(y,W),ie=new R$t,Rt=new z$t(It),pe=new e8t(y,st,bt,Gt,be,f,l),Oe=new W$t(y,be,Jt),Pr=new n9t(X,ve,Jt,Gt),en=new r8t(X,It,ve),rn=new d8t(X,It,ve),ve.programs=j.programs,y.capabilities=Jt,y.extensions=It,y.properties=W,y.renderLists=ie,y.shadowMap=Oe,y.state=Gt,y.info=ve}Te();const J=new Q$t(y,X);this.xr=J,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const H=It.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=It.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(H){H!==void 0&&(B=H,this.setSize(L,P,!1))},this.getSize=function(H){return H.set(L,P)},this.setSize=function(H,at,dt=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=H,P=at,n.width=Math.floor(H*B),n.height=Math.floor(at*B),dt===!0&&(n.style.width=H+"px",n.style.height=at+"px"),this.setViewport(0,0,H,at)},this.getDrawingBufferSize=function(H){return H.set(L*B,P*B).floor()},this.setDrawingBufferSize=function(H,at,dt){L=H,P=at,B=dt,n.width=Math.floor(H*dt),n.height=Math.floor(at*dt),this.setViewport(0,0,H,at)},this.getCurrentViewport=function(H){return H.copy(M)},this.getViewport=function(H){return H.copy(U)},this.setViewport=function(H,at,dt,pt){H.isVector4?U.set(H.x,H.y,H.z,H.w):U.set(H,at,dt,pt),Gt.viewport(M.copy(U).multiplyScalar(B).round())},this.getScissor=function(H){return H.copy(Z)},this.setScissor=function(H,at,dt,pt){H.isVector4?Z.set(H.x,H.y,H.z,H.w):Z.set(H,at,dt,pt),Gt.scissor(C.copy(Z).multiplyScalar(B).round())},this.getScissorTest=function(){return nt},this.setScissorTest=function(H){Gt.setScissorTest(nt=H)},this.setOpaqueSort=function(H){N=H},this.setTransparentSort=function(H){k=H},this.getClearColor=function(H){return H.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(H=!0,at=!0,dt=!0){let pt=0;if(H){let ft=!1;if(w!==null){const oe=w.texture.format;ft=oe===Lst||oe===Ist||oe===Dst}if(ft){const oe=w.texture.type,we=oe===Bf||oe===Fy||oe===Mst||oe===Q1||oe===Cst||oe===Est,Ue=pe.getClearColor(),Ze=pe.getClearAlpha(),fn=Ue.r,sn=Ue.g,dn=Ue.b;we?(d[0]=fn,d[1]=sn,d[2]=dn,d[3]=Ze,X.clearBufferuiv(X.COLOR,0,d)):(p[0]=fn,p[1]=sn,p[2]=dn,p[3]=Ze,X.clearBufferiv(X.COLOR,0,p))}else pt|=X.COLOR_BUFFER_BIT}at&&(pt|=X.DEPTH_BUFFER_BIT),dt&&(pt|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(pt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ne,!1),n.removeEventListener("webglcontextrestored",Qt,!1),n.removeEventListener("webglcontextcreationerror",Ce,!1),ie.dispose(),Rt.dispose(),W.dispose(),st.dispose(),bt.dispose(),be.dispose(),Jn.dispose(),Pr.dispose(),j.dispose(),J.dispose(),J.removeEventListener("sessionstart",Hl),J.removeEventListener("sessionend",Wl),Td.stop()};function ne(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Qt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const H=ve.autoReset,at=Oe.enabled,dt=Oe.autoUpdate,pt=Oe.needsUpdate,ft=Oe.type;Te(),ve.autoReset=H,Oe.enabled=at,Oe.autoUpdate=dt,Oe.needsUpdate=pt,Oe.type=ft}function Ce(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function Re(H){const at=H.target;at.removeEventListener("dispose",Re),br(at)}function br(H){Rr(H),W.remove(H)}function Rr(H){const at=W.get(H).programs;at!==void 0&&(at.forEach(function(dt){j.releaseProgram(dt)}),H.isShaderMaterial&&j.releaseShaderCache(H))}this.renderBufferDirect=function(H,at,dt,pt,ft,oe){at===null&&(at=xt);const we=ft.isMesh&&ft.matrixWorld.determinant()<0,Ue=Mht(H,at,dt,pt,ft);Gt.setMaterial(pt,we);let Ze=dt.index,fn=1;if(pt.wireframe===!0){if(Ze=Et.getWireframeAttribute(dt),Ze===void 0)return;fn=2}const sn=dt.drawRange,dn=dt.attributes.position;let ni=sn.start*fn,Oo=(sn.start+sn.count)*fn;oe!==null&&(ni=Math.max(ni,oe.start*fn),Oo=Math.min(Oo,(oe.start+oe.count)*fn)),Ze!==null?(ni=Math.max(ni,0),Oo=Math.min(Oo,Ze.count)):dn!=null&&(ni=Math.max(ni,0),Oo=Math.min(Oo,dn.count));const Xi=Oo-ni;if(Xi<0||Xi===1/0)return;Jn.setup(ft,pt,Ue,dt,Ze);let ac,Wr=en;if(Ze!==null&&(ac=At.get(Ze),Wr=rn,Wr.setIndex(ac)),ft.isMesh)pt.wireframe===!0?(Gt.setLineWidth(pt.wireframeLinewidth*St()),Wr.setMode(X.LINES)):Wr.setMode(X.TRIANGLES);else if(ft.isLine){let gn=pt.linewidth;gn===void 0&&(gn=1),Gt.setLineWidth(gn*St()),ft.isLineSegments?Wr.setMode(X.LINES):ft.isLineLoop?Wr.setMode(X.LINE_LOOP):Wr.setMode(X.LINE_STRIP)}else ft.isPoints?Wr.setMode(X.POINTS):ft.isSprite&&Wr.setMode(X.TRIANGLES);if(ft.isBatchedMesh)Wr.renderMultiDraw(ft._multiDrawStarts,ft._multiDrawCounts,ft._multiDrawCount);else if(ft.isInstancedMesh)Wr.renderInstances(ni,Xi,ft.count);else if(dt.isInstancedBufferGeometry){const gn=dt._maxInstanceCount!==void 0?dt._maxInstanceCount:1/0,V2=Math.min(dt.instanceCount,gn);Wr.renderInstances(ni,Xi,V2)}else Wr.render(ni,Xi)};function Hr(H,at,dt){H.transparent===!0&&H.side===yl&&H.forceSinglePass===!1?(H.side=bo,H.needsUpdate=!0,_S(H,at,dt),H.side=ed,H.needsUpdate=!0,_S(H,at,dt),H.side=yl):_S(H,at,dt)}this.compile=function(H,at,dt=null){dt===null&&(dt=H),g=Rt.get(dt),g.init(),_.push(g),dt.traverseVisible(function(ft){ft.isLight&&ft.layers.test(at.layers)&&(g.pushLight(ft),ft.castShadow&&g.pushShadow(ft))}),H!==dt&&H.traverseVisible(function(ft){ft.isLight&&ft.layers.test(at.layers)&&(g.pushLight(ft),ft.castShadow&&g.pushShadow(ft))}),g.setupLights(y._useLegacyLights);const pt=new Set;return H.traverse(function(ft){const oe=ft.material;if(oe)if(Array.isArray(oe))for(let we=0;we<oe.length;we++){const Ue=oe[we];Hr(Ue,dt,ft),pt.add(Ue)}else Hr(oe,dt,ft),pt.add(oe)}),_.pop(),g=null,pt},this.compileAsync=function(H,at,dt=null){const pt=this.compile(H,at,dt);return new Promise(ft=>{function oe(){if(pt.forEach(function(we){W.get(we).currentProgram.isReady()&&pt.delete(we)}),pt.size===0){ft(H);return}setTimeout(oe,10)}It.get("KHR_parallel_shader_compile")!==null?oe():setTimeout(oe,10)})};let da=null;function Ar(H){da&&da(H)}function Hl(){Td.stop()}function Wl(){Td.start()}const Td=new $st;Td.setAnimationLoop(Ar),typeof self<"u"&&Td.setContext(self),this.setAnimationLoop=function(H){da=H,J.setAnimationLoop(H),H===null?Td.stop():Td.start()},J.addEventListener("sessionstart",Hl),J.addEventListener("sessionend",Wl),this.render=function(H,at){if(at!==void 0&&at.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),at.parent===null&&at.matrixWorldAutoUpdate===!0&&at.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(J.cameraAutoUpdate===!0&&J.updateCamera(at),at=J.getCamera()),H.isScene===!0&&H.onBeforeRender(y,H,at,w),g=Rt.get(H,_.length),g.init(),_.push(g),ot.multiplyMatrices(at.projectionMatrix,at.matrixWorldInverse),ct.setFromProjectionMatrix(ot),$=this.localClippingEnabled,K=re.init(this.clippingPlanes,$),v=ie.get(H,m.length),v.init(),m.push(v),jV(H,at,0,y.sortObjects),v.finish(),y.sortObjects===!0&&v.sort(N,k),this.info.render.frame++,K===!0&&re.beginShadows();const dt=g.state.shadowsArray;if(Oe.render(dt,H,at),K===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset(),(J.enabled===!1||J.isPresenting===!1||J.hasDepthSensing()===!1)&&pe.render(v,H),g.setupLights(y._useLegacyLights),at.isArrayCamera){const pt=at.cameras;for(let ft=0,oe=pt.length;ft<oe;ft++){const we=pt[ft];YV(v,H,we,we.viewport)}}else YV(v,H,at);w!==null&&(F.updateMultisampleRenderTarget(w),F.updateRenderTargetMipmap(w)),H.isScene===!0&&H.onAfterRender(y,H,at),Jn.resetDefaultState(),A=-1,T=null,_.pop(),_.length>0?g=_[_.length-1]:g=null,m.pop(),m.length>0?v=m[m.length-1]:v=null};function jV(H,at,dt,pt){if(H.visible===!1)return;if(H.layers.test(at.layers)){if(H.isGroup)dt=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(at);else if(H.isLight)g.pushLight(H),H.castShadow&&g.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||ct.intersectsSprite(H)){pt&&et.setFromMatrixPosition(H.matrixWorld).applyMatrix4(ot);const we=be.update(H),Ue=H.material;Ue.visible&&v.push(H,we,Ue,dt,et.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||ct.intersectsObject(H))){const we=be.update(H),Ue=H.material;if(pt&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),et.copy(H.boundingSphere.center)):(we.boundingSphere===null&&we.computeBoundingSphere(),et.copy(we.boundingSphere.center)),et.applyMatrix4(H.matrixWorld).applyMatrix4(ot)),Array.isArray(Ue)){const Ze=we.groups;for(let fn=0,sn=Ze.length;fn<sn;fn++){const dn=Ze[fn],ni=Ue[dn.materialIndex];ni&&ni.visible&&v.push(H,we,ni,dt,et.z,dn)}}else Ue.visible&&v.push(H,we,Ue,dt,et.z,null)}}const oe=H.children;for(let we=0,Ue=oe.length;we<Ue;we++)jV(oe[we],at,dt,pt)}function YV(H,at,dt,pt){const ft=H.opaque,oe=H.transmissive,we=H.transparent;g.setupLightsView(dt),K===!0&&re.setGlobalState(y.clippingPlanes,dt),oe.length>0&&Tht(ft,oe,at,dt),pt&&Gt.viewport(M.copy(pt)),ft.length>0&&yS(ft,at,dt),oe.length>0&&yS(oe,at,dt),we.length>0&&yS(we,at,dt),Gt.buffers.depth.setTest(!0),Gt.buffers.depth.setMask(!0),Gt.buffers.color.setMask(!0),Gt.setPolygonOffset(!1)}function Tht(H,at,dt,pt){if((dt.isScene===!0?dt.overrideMaterial:null)!==null)return;if(g.state.transmissionRenderTarget===null){g.state.transmissionRenderTarget=new Mv(1,1,{generateMipmaps:!0,type:It.has("EXT_color_buffer_half_float")||It.has("EXT_color_buffer_float")?xC:Bf,minFilter:jp,samples:4,stencilBuffer:a});const fn=W.get(g.state.transmissionRenderTarget);fn.__isTransmissionRenderTarget=!0}const oe=g.state.transmissionRenderTarget;y.getDrawingBufferSize(tt),oe.setSize(tt.x,tt.y);const we=y.getRenderTarget();y.setRenderTarget(oe),y.getClearColor(D),I=y.getClearAlpha(),I<1&&y.setClearColor(16777215,.5),y.clear();const Ue=y.toneMapping;y.toneMapping=Nf,yS(H,dt,pt),F.updateMultisampleRenderTarget(oe),F.updateRenderTargetMipmap(oe);let Ze=!1;for(let fn=0,sn=at.length;fn<sn;fn++){const dn=at[fn],ni=dn.object,Oo=dn.geometry,Xi=dn.material,ac=dn.group;if(Xi.side===yl&&ni.layers.test(pt.layers)){const Wr=Xi.side;Xi.side=bo,Xi.needsUpdate=!0,qV(ni,dt,pt,Oo,Xi,ac),Xi.side=Wr,Xi.needsUpdate=!0,Ze=!0}}Ze===!0&&(F.updateMultisampleRenderTarget(oe),F.updateRenderTargetMipmap(oe)),y.setRenderTarget(we),y.setClearColor(D,I),y.toneMapping=Ue}function yS(H,at,dt){const pt=at.isScene===!0?at.overrideMaterial:null;for(let ft=0,oe=H.length;ft<oe;ft++){const we=H[ft],Ue=we.object,Ze=we.geometry,fn=pt===null?we.material:pt,sn=we.group;Ue.layers.test(dt.layers)&&qV(Ue,at,dt,Ze,fn,sn)}}function qV(H,at,dt,pt,ft,oe){H.onBeforeRender(y,at,dt,pt,ft,oe),H.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),ft.onBeforeRender(y,at,dt,pt,H,oe),ft.transparent===!0&&ft.side===yl&&ft.forceSinglePass===!1?(ft.side=bo,ft.needsUpdate=!0,y.renderBufferDirect(dt,at,pt,ft,H,oe),ft.side=ed,ft.needsUpdate=!0,y.renderBufferDirect(dt,at,pt,ft,H,oe),ft.side=yl):y.renderBufferDirect(dt,at,pt,ft,H,oe),H.onAfterRender(y,at,dt,pt,ft,oe)}function _S(H,at,dt){at.isScene!==!0&&(at=xt);const pt=W.get(H),ft=g.state.lights,oe=g.state.shadowsArray,we=ft.state.version,Ue=j.getParameters(H,ft.state,oe,at,dt),Ze=j.getProgramCacheKey(Ue);let fn=pt.programs;pt.environment=H.isMeshStandardMaterial?at.environment:null,pt.fog=at.fog,pt.envMap=(H.isMeshStandardMaterial?bt:st).get(H.envMap||pt.environment),pt.envMapRotation=pt.environment!==null&&H.envMap===null?at.environmentRotation:H.envMapRotation,fn===void 0&&(H.addEventListener("dispose",Re),fn=new Map,pt.programs=fn);let sn=fn.get(Ze);if(sn!==void 0){if(pt.currentProgram===sn&&pt.lightsStateVersion===we)return ZV(H,Ue),sn}else Ue.uniforms=j.getUniforms(H),H.onBuild(dt,Ue,y),H.onBeforeCompile(Ue,y),sn=j.acquireProgram(Ue,Ze),fn.set(Ze,sn),pt.uniforms=Ue.uniforms;const dn=pt.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(dn.clippingPlanes=re.uniform),ZV(H,Ue),pt.needsLights=Cht(H),pt.lightsStateVersion=we,pt.needsLights&&(dn.ambientLightColor.value=ft.state.ambient,dn.lightProbe.value=ft.state.probe,dn.directionalLights.value=ft.state.directional,dn.directionalLightShadows.value=ft.state.directionalShadow,dn.spotLights.value=ft.state.spot,dn.spotLightShadows.value=ft.state.spotShadow,dn.rectAreaLights.value=ft.state.rectArea,dn.ltc_1.value=ft.state.rectAreaLTC1,dn.ltc_2.value=ft.state.rectAreaLTC2,dn.pointLights.value=ft.state.point,dn.pointLightShadows.value=ft.state.pointShadow,dn.hemisphereLights.value=ft.state.hemi,dn.directionalShadowMap.value=ft.state.directionalShadowMap,dn.directionalShadowMatrix.value=ft.state.directionalShadowMatrix,dn.spotShadowMap.value=ft.state.spotShadowMap,dn.spotLightMatrix.value=ft.state.spotLightMatrix,dn.spotLightMap.value=ft.state.spotLightMap,dn.pointShadowMap.value=ft.state.pointShadowMap,dn.pointShadowMatrix.value=ft.state.pointShadowMatrix),pt.currentProgram=sn,pt.uniformsList=null,sn}function KV(H){if(H.uniformsList===null){const at=H.currentProgram.getUniforms();H.uniformsList=SM.seqWithValue(at.seq,H.uniforms)}return H.uniformsList}function ZV(H,at){const dt=W.get(H);dt.outputColorSpace=at.outputColorSpace,dt.batching=at.batching,dt.instancing=at.instancing,dt.instancingColor=at.instancingColor,dt.instancingMorph=at.instancingMorph,dt.skinning=at.skinning,dt.morphTargets=at.morphTargets,dt.morphNormals=at.morphNormals,dt.morphColors=at.morphColors,dt.morphTargetsCount=at.morphTargetsCount,dt.numClippingPlanes=at.numClippingPlanes,dt.numIntersection=at.numClipIntersection,dt.vertexAlphas=at.vertexAlphas,dt.vertexTangents=at.vertexTangents,dt.toneMapping=at.toneMapping}function Mht(H,at,dt,pt,ft){at.isScene!==!0&&(at=xt),F.resetTextureUnits();const oe=at.fog,we=pt.isMeshStandardMaterial?at.environment:null,Ue=w===null?y.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:yd,Ze=(pt.isMeshStandardMaterial?bt:st).get(pt.envMap||we),fn=pt.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,sn=!!dt.attributes.tangent&&(!!pt.normalMap||pt.anisotropy>0),dn=!!dt.morphAttributes.position,ni=!!dt.morphAttributes.normal,Oo=!!dt.morphAttributes.color;let Xi=Nf;pt.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(Xi=y.toneMapping);const ac=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,Wr=ac!==void 0?ac.length:0,gn=W.get(pt),V2=g.state.lights;if(K===!0&&($===!0||H!==T)){const es=H===T&&pt.id===A;re.setState(pt,H,es)}let Or=!1;pt.version===gn.__version?(gn.needsLights&&gn.lightsStateVersion!==V2.state.version||gn.outputColorSpace!==Ue||ft.isBatchedMesh&&gn.batching===!1||!ft.isBatchedMesh&&gn.batching===!0||ft.isInstancedMesh&&gn.instancing===!1||!ft.isInstancedMesh&&gn.instancing===!0||ft.isSkinnedMesh&&gn.skinning===!1||!ft.isSkinnedMesh&&gn.skinning===!0||ft.isInstancedMesh&&gn.instancingColor===!0&&ft.instanceColor===null||ft.isInstancedMesh&&gn.instancingColor===!1&&ft.instanceColor!==null||ft.isInstancedMesh&&gn.instancingMorph===!0&&ft.morphTexture===null||ft.isInstancedMesh&&gn.instancingMorph===!1&&ft.morphTexture!==null||gn.envMap!==Ze||pt.fog===!0&&gn.fog!==oe||gn.numClippingPlanes!==void 0&&(gn.numClippingPlanes!==re.numPlanes||gn.numIntersection!==re.numIntersection)||gn.vertexAlphas!==fn||gn.vertexTangents!==sn||gn.morphTargets!==dn||gn.morphNormals!==ni||gn.morphColors!==Oo||gn.toneMapping!==Xi||gn.morphTargetsCount!==Wr)&&(Or=!0):(Or=!0,gn.__version=pt.version);let Md=gn.currentProgram;Or===!0&&(Md=_S(pt,at,ft));let JV=!1,Y0=!1,G2=!1;const pa=Md.getUniforms(),Rh=gn.uniforms;if(Gt.useProgram(Md.program)&&(JV=!0,Y0=!0,G2=!0),pt.id!==A&&(A=pt.id,Y0=!0),JV||T!==H){pa.setValue(X,"projectionMatrix",H.projectionMatrix),pa.setValue(X,"viewMatrix",H.matrixWorldInverse);const es=pa.map.cameraPosition;es!==void 0&&es.setValue(X,et.setFromMatrixPosition(H.matrixWorld)),Jt.logarithmicDepthBuffer&&pa.setValue(X,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(pt.isMeshPhongMaterial||pt.isMeshToonMaterial||pt.isMeshLambertMaterial||pt.isMeshBasicMaterial||pt.isMeshStandardMaterial||pt.isShaderMaterial)&&pa.setValue(X,"isOrthographic",H.isOrthographicCamera===!0),T!==H&&(T=H,Y0=!0,G2=!0)}if(ft.isSkinnedMesh){pa.setOptional(X,ft,"bindMatrix"),pa.setOptional(X,ft,"bindMatrixInverse");const es=ft.skeleton;es&&(es.boneTexture===null&&es.computeBoneTexture(),pa.setValue(X,"boneTexture",es.boneTexture,F))}ft.isBatchedMesh&&(pa.setOptional(X,ft,"batchingTexture"),pa.setValue(X,"batchingTexture",ft._matricesTexture,F));const H2=dt.morphAttributes;if((H2.position!==void 0||H2.normal!==void 0||H2.color!==void 0)&&ge.update(ft,dt,Md),(Y0||gn.receiveShadow!==ft.receiveShadow)&&(gn.receiveShadow=ft.receiveShadow,pa.setValue(X,"receiveShadow",ft.receiveShadow)),pt.isMeshGouraudMaterial&&pt.envMap!==null&&(Rh.envMap.value=Ze,Rh.flipEnvMap.value=Ze.isCubeTexture&&Ze.isRenderTargetTexture===!1?-1:1),pt.isMeshStandardMaterial&&pt.envMap===null&&at.environment!==null&&(Rh.envMapIntensity.value=at.environmentIntensity),Y0&&(pa.setValue(X,"toneMappingExposure",y.toneMappingExposure),gn.needsLights&&Aht(Rh,G2),oe&&pt.fog===!0&&zt.refreshFogUniforms(Rh,oe),zt.refreshMaterialUniforms(Rh,pt,B,P,g.state.transmissionRenderTarget),SM.upload(X,KV(gn),Rh,F)),pt.isShaderMaterial&&pt.uniformsNeedUpdate===!0&&(SM.upload(X,KV(gn),Rh,F),pt.uniformsNeedUpdate=!1),pt.isSpriteMaterial&&pa.setValue(X,"center",ft.center),pa.setValue(X,"modelViewMatrix",ft.modelViewMatrix),pa.setValue(X,"normalMatrix",ft.normalMatrix),pa.setValue(X,"modelMatrix",ft.matrixWorld),pt.isShaderMaterial||pt.isRawShaderMaterial){const es=pt.uniformsGroups;for(let W2=0,Eht=es.length;W2<Eht;W2++){const QV=es[W2];Pr.update(QV,Md),Pr.bind(QV,Md)}}return Md}function Aht(H,at){H.ambientLightColor.needsUpdate=at,H.lightProbe.needsUpdate=at,H.directionalLights.needsUpdate=at,H.directionalLightShadows.needsUpdate=at,H.pointLights.needsUpdate=at,H.pointLightShadows.needsUpdate=at,H.spotLights.needsUpdate=at,H.spotLightShadows.needsUpdate=at,H.rectAreaLights.needsUpdate=at,H.hemisphereLights.needsUpdate=at}function Cht(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(H,at,dt){W.get(H.texture).__webglTexture=at,W.get(H.depthTexture).__webglTexture=dt;const pt=W.get(H);pt.__hasExternalTextures=!0,pt.__autoAllocateDepthBuffer=dt===void 0,pt.__autoAllocateDepthBuffer||It.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,at){const dt=W.get(H);dt.__webglFramebuffer=at,dt.__useDefaultFramebuffer=at===void 0},this.setRenderTarget=function(H,at=0,dt=0){w=H,S=at,b=dt;let pt=!0,ft=null,oe=!1,we=!1;if(H){const Ze=W.get(H);Ze.__useDefaultFramebuffer!==void 0?(Gt.bindFramebuffer(X.FRAMEBUFFER,null),pt=!1):Ze.__webglFramebuffer===void 0?F.setupRenderTarget(H):Ze.__hasExternalTextures&&F.rebindTextures(H,W.get(H.texture).__webglTexture,W.get(H.depthTexture).__webglTexture);const fn=H.texture;(fn.isData3DTexture||fn.isDataArrayTexture||fn.isCompressedArrayTexture)&&(we=!0);const sn=W.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(sn[at])?ft=sn[at][dt]:ft=sn[at],oe=!0):H.samples>0&&F.useMultisampledRTT(H)===!1?ft=W.get(H).__webglMultisampledFramebuffer:Array.isArray(sn)?ft=sn[dt]:ft=sn,M.copy(H.viewport),C.copy(H.scissor),E=H.scissorTest}else M.copy(U).multiplyScalar(B).floor(),C.copy(Z).multiplyScalar(B).floor(),E=nt;if(Gt.bindFramebuffer(X.FRAMEBUFFER,ft)&&pt&&Gt.drawBuffers(H,ft),Gt.viewport(M),Gt.scissor(C),Gt.setScissorTest(E),oe){const Ze=W.get(H.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+at,Ze.__webglTexture,dt)}else if(we){const Ze=W.get(H.texture),fn=at||0;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,Ze.__webglTexture,dt||0,fn)}A=-1},this.readRenderTargetPixels=function(H,at,dt,pt,ft,oe,we){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ue=W.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&we!==void 0&&(Ue=Ue[we]),Ue){Gt.bindFramebuffer(X.FRAMEBUFFER,Ue);try{const Ze=H.texture,fn=Ze.format,sn=Ze.type;if(fn!==Ml&&rr.convert(fn)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const dn=sn===xC&&(It.has("EXT_color_buffer_half_float")||It.has("EXT_color_buffer_float"));if(sn!==Bf&&rr.convert(sn)!==X.getParameter(X.IMPLEMENTATION_COLOR_READ_TYPE)&&sn!==Bc&&!dn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}at>=0&&at<=H.width-pt&&dt>=0&&dt<=H.height-ft&&X.readPixels(at,dt,pt,ft,rr.convert(fn),rr.convert(sn),oe)}finally{const Ze=w!==null?W.get(w).__webglFramebuffer:null;Gt.bindFramebuffer(X.FRAMEBUFFER,Ze)}}},this.copyFramebufferToTexture=function(H,at,dt=0){const pt=Math.pow(2,-dt),ft=Math.floor(at.image.width*pt),oe=Math.floor(at.image.height*pt);F.setTexture2D(at,0),X.copyTexSubImage2D(X.TEXTURE_2D,dt,0,0,H.x,H.y,ft,oe),Gt.unbindTexture()},this.copyTextureToTexture=function(H,at,dt,pt=0){const ft=at.image.width,oe=at.image.height,we=rr.convert(dt.format),Ue=rr.convert(dt.type);F.setTexture2D(dt,0),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,dt.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,dt.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,dt.unpackAlignment),at.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,pt,H.x,H.y,ft,oe,we,Ue,at.image.data):at.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,pt,H.x,H.y,at.mipmaps[0].width,at.mipmaps[0].height,we,at.mipmaps[0].data):X.texSubImage2D(X.TEXTURE_2D,pt,H.x,H.y,we,Ue,at.image),pt===0&&dt.generateMipmaps&&X.generateMipmap(X.TEXTURE_2D),Gt.unbindTexture()},this.copyTextureToTexture3D=function(H,at,dt,pt,ft=0){const oe=Math.round(H.max.x-H.min.x),we=Math.round(H.max.y-H.min.y),Ue=H.max.z-H.min.z+1,Ze=rr.convert(pt.format),fn=rr.convert(pt.type);let sn;if(pt.isData3DTexture)F.setTexture3D(pt,0),sn=X.TEXTURE_3D;else if(pt.isDataArrayTexture||pt.isCompressedArrayTexture)F.setTexture2DArray(pt,0),sn=X.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,pt.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pt.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,pt.unpackAlignment);const dn=X.getParameter(X.UNPACK_ROW_LENGTH),ni=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Oo=X.getParameter(X.UNPACK_SKIP_PIXELS),Xi=X.getParameter(X.UNPACK_SKIP_ROWS),ac=X.getParameter(X.UNPACK_SKIP_IMAGES),Wr=dt.isCompressedTexture?dt.mipmaps[ft]:dt.image;X.pixelStorei(X.UNPACK_ROW_LENGTH,Wr.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Wr.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,H.min.x),X.pixelStorei(X.UNPACK_SKIP_ROWS,H.min.y),X.pixelStorei(X.UNPACK_SKIP_IMAGES,H.min.z),dt.isDataTexture||dt.isData3DTexture?X.texSubImage3D(sn,ft,at.x,at.y,at.z,oe,we,Ue,Ze,fn,Wr.data):pt.isCompressedArrayTexture?X.compressedTexSubImage3D(sn,ft,at.x,at.y,at.z,oe,we,Ue,Ze,Wr.data):X.texSubImage3D(sn,ft,at.x,at.y,at.z,oe,we,Ue,Ze,fn,Wr),X.pixelStorei(X.UNPACK_ROW_LENGTH,dn),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,ni),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Oo),X.pixelStorei(X.UNPACK_SKIP_ROWS,Xi),X.pixelStorei(X.UNPACK_SKIP_IMAGES,ac),ft===0&&pt.generateMipmaps&&X.generateMipmap(sn),Gt.unbindTexture()},this.initTexture=function(H){H.isCubeTexture?F.setTextureCube(H,0):H.isData3DTexture?F.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?F.setTexture2DArray(H,0):F.setTexture2D(H,0),Gt.unbindTexture()},this.resetState=function(){S=0,b=0,w=null,Gt.reset(),Jn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return kc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const n=this.getContext();n.drawingBufferColorSpace=t===EU?"display-p3":"srgb",n.unpackColorSpace=dr.workingColorSpace===h2?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class i9t extends Ma{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Xu,this.environmentIntensity=1,this.environmentRotation=new Xu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class Jst{constructor(t,n){this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=t!==void 0?t.length/n:0,this.usage=B3,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Il()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return Nst("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,n){this.updateRanges.push({start:t,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,n,r){t*=this.stride,r*=n.stride;for(let i=0,a=this.stride;i<a;i++)this.array[t+i]=n.array[r+i];return this}set(t,n=0){return this.array.set(t,n),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Il()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Il()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const La=new Y;class Cu{constructor(t,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let n=0,r=this.data.count;n<r;n++)La.fromBufferAttribute(this,n),La.applyMatrix4(t),this.setXYZ(n,La.x,La.y,La.z);return this}applyNormalMatrix(t){for(let n=0,r=this.count;n<r;n++)La.fromBufferAttribute(this,n),La.applyNormalMatrix(t),this.setXYZ(n,La.x,La.y,La.z);return this}transformDirection(t){for(let n=0,r=this.count;n<r;n++)La.fromBufferAttribute(this,n),La.transformDirection(t),this.setXYZ(n,La.x,La.y,La.z);return this}getComponent(t,n){let r=this.array[t*this.data.stride+this.offset+n];return this.normalized&&(r=xl(r,this.array)),r}setComponent(t,n,r){return this.normalized&&(r=or(r,this.array)),this.data.array[t*this.data.stride+this.offset+n]=r,this}setX(t,n){return this.normalized&&(n=or(n,this.array)),this.data.array[t*this.data.stride+this.offset]=n,this}setY(t,n){return this.normalized&&(n=or(n,this.array)),this.data.array[t*this.data.stride+this.offset+1]=n,this}setZ(t,n){return this.normalized&&(n=or(n,this.array)),this.data.array[t*this.data.stride+this.offset+2]=n,this}setW(t,n){return this.normalized&&(n=or(n,this.array)),this.data.array[t*this.data.stride+this.offset+3]=n,this}getX(t){let n=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(n=xl(n,this.array)),n}getY(t){let n=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(n=xl(n,this.array)),n}getZ(t){let n=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(n=xl(n,this.array)),n}getW(t){let n=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(n=xl(n,this.array)),n}setXY(t,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(n=or(n,this.array),r=or(r,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this}setXYZ(t,n,r,i){return t=t*this.data.stride+this.offset,this.normalized&&(n=or(n,this.array),r=or(r,this.array),i=or(i,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=i,this}setXYZW(t,n,r,i,a){return t=t*this.data.stride+this.offset,this.normalized&&(n=or(n,this.array),r=or(r,this.array),i=or(i,this.array),a=or(a,this.array)),this.data.array[t+0]=n,this.data.array[t+1]=r,this.data.array[t+2]=i,this.data.array[t+3]=a,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return new Ll(new this.array.constructor(n),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Cu(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)n.push(this.data.array[i+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Qst extends N0{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let jg;const V_=new Y,Yg=new Y,qg=new Y,Kg=new Ee,G_=new Ee,tlt=new cr,vT=new Y,H_=new Y,gT=new Y,$X=new Ee,GP=new Ee,XX=new Ee;class a9t extends Ma{constructor(t=new Qst){if(super(),this.isSprite=!0,this.type="Sprite",jg===void 0){jg=new Ci;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Jst(n,5);jg.setIndex([0,1,2,0,2,3]),jg.setAttribute("position",new Cu(r,3,0,!1)),jg.setAttribute("uv",new Cu(r,2,3,!1))}this.geometry=jg,this.material=t,this.center=new Ee(.5,.5)}raycast(t,n){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Yg.setFromMatrixScale(this.matrixWorld),tlt.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),qg.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Yg.multiplyScalar(-qg.z);const r=this.material.rotation;let i,a;r!==0&&(a=Math.cos(r),i=Math.sin(r));const o=this.center;mT(vT.set(-.5,-.5,0),qg,o,Yg,i,a),mT(H_.set(.5,-.5,0),qg,o,Yg,i,a),mT(gT.set(.5,.5,0),qg,o,Yg,i,a),$X.set(0,0),GP.set(1,0),XX.set(1,1);let s=t.ray.intersectTriangle(vT,H_,gT,!1,V_);if(s===null&&(mT(H_.set(-.5,.5,0),qg,o,Yg,i,a),GP.set(0,1),s=t.ray.intersectTriangle(vT,gT,H_,!1,V_),s===null))return;const l=t.ray.origin.distanceTo(V_);l<t.near||l>t.far||n.push({distance:l,point:V_.clone(),uv:bl.getInterpolation(V_,vT,H_,gT,$X,GP,XX,new Ee),face:null,object:this})}copy(t,n){return super.copy(t,n),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function mT(e,t,n,r,i,a){Kg.subVectors(e,n).addScalar(.5).multiply(r),i!==void 0?(G_.x=a*Kg.x-i*Kg.y,G_.y=i*Kg.x+a*Kg.y):G_.copy(Kg),e.copy(t),e.x+=G_.x,e.y+=G_.y,e.applyMatrix4(tlt)}class elt extends Ma{constructor(){super(),this.isBone=!0,this.type="Bone"}}class o9t extends Ta{constructor(t=null,n=1,r=1,i,a,o,s,l,u=yo,c=yo,h,f){super(null,o,s,l,u,c,i,a,h,f),this.isDataTexture=!0,this.image={data:t,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const jX=new cr,s9t=new cr;class OU{constructor(t=[],n=[]){this.uuid=Il(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),n.length===0)this.calculateInverses();else if(t.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new cr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,n=this.bones.length;t<n;t++){const r=new cr;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const t=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,o=t.length;a<o;a++){const s=t[a]?t[a].matrixWorld:s9t;jX.multiplyMatrices(s,n[a]),jX.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new OU(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const n=new Float32Array(t*t*4);n.set(this.boneMatrices);const r=new o9t(n,t,t,Ml,Bc);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(t){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===t)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,n){this.uuid=t.uuid;for(let r=0,i=t.bones.length;r<i;r++){const a=t.bones[r];let o=n[a];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),o=new elt),this.bones.push(o),this.boneInverses.push(new cr().fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,a=n.length;i<a;i++){const o=n[i];t.bones.push(o.uuid);const s=r[i];t.boneInverses.push(s.toArray())}return t}}class Am extends N0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const YX=new Y,qX=new Y,KX=new cr,HP=new IU,yT=new O0;class mx extends Ma{constructor(t=new Ci,n=new Am){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=n,this.updateMorphTargets()}copy(t,n){return super.copy(t,n),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[0];for(let i=1,a=n.count;i<a;i++)YX.fromBufferAttribute(n,i-1),qX.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=YX.distanceTo(qX);t.setAttribute("lineDistance",new mi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,n){const r=this.geometry,i=this.matrixWorld,a=t.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),yT.copy(r.boundingSphere),yT.applyMatrix4(i),yT.radius+=a,t.ray.intersectsSphere(yT)===!1)return;KX.copy(i).invert(),HP.copy(t.ray).applyMatrix4(KX);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,u=new Y,c=new Y,h=new Y,f=new Y,d=this.isLineSegments?2:1,p=r.index,g=r.attributes.position;if(p!==null){const m=Math.max(0,o.start),_=Math.min(p.count,o.start+o.count);for(let y=m,x=_-1;y<x;y+=d){const S=p.getX(y),b=p.getX(y+1);if(u.fromBufferAttribute(g,S),c.fromBufferAttribute(g,b),HP.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const A=t.ray.origin.distanceTo(f);A<t.near||A>t.far||n.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),_=Math.min(g.count,o.start+o.count);for(let y=m,x=_-1;y<x;y+=d){if(u.fromBufferAttribute(g,y),c.fromBufferAttribute(g,y+1),HP.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const b=t.ray.origin.distanceTo(f);b<t.near||b>t.far||n.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,o=i.length;a<o;a++){const s=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=a}}}}}const ZX=new Y,JX=new Y;class l9t extends mx{constructor(t,n){super(t,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const n=t.attributes.position,r=[];for(let i=0,a=n.count;i<a;i+=2)ZX.fromBufferAttribute(n,i),JX.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+ZX.distanceTo(JX);t.setAttribute("lineDistance",new mi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class u9t extends Ta{constructor(t,n,r,i,a,o,s,l,u){super(t,n,r,i,a,o,s,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class NU extends Ci{constructor(t=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const a=[],o=[],s=[],l=[],u=new Y,c=new Ee;o.push(0,0,0),s.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=n;h++,f+=3){const d=r+h/n*i;u.x=t*Math.cos(d),u.y=t*Math.sin(d),o.push(u.x,u.y,u.z),s.push(0,0,1),c.x=(o[f]/t+1)/2,c.y=(o[f+1]/t+1)/2,l.push(c.x,c.y)}for(let h=1;h<=n;h++)a.push(h,h+1,0);this.setIndex(a),this.setAttribute("position",new mi(o,3)),this.setAttribute("normal",new mi(s,3)),this.setAttribute("uv",new mi(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new NU(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ou extends Ci{constructor(t=1,n=32,r=16,i=0,a=Math.PI*2,o=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:n,heightSegments:r,phiStart:i,phiLength:a,thetaStart:o,thetaLength:s},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+s,Math.PI);let u=0;const c=[],h=new Y,f=new Y,d=[],p=[],v=[],g=[];for(let m=0;m<=r;m++){const _=[],y=m/r;let x=0;m===0&&o===0?x=.5/n:m===r&&l===Math.PI&&(x=-.5/n);for(let S=0;S<=n;S++){const b=S/n;h.x=-t*Math.cos(i+b*a)*Math.sin(o+y*s),h.y=t*Math.cos(o+y*s),h.z=t*Math.sin(i+b*a)*Math.sin(o+y*s),p.push(h.x,h.y,h.z),f.copy(h).normalize(),v.push(f.x,f.y,f.z),g.push(b+x,1-y),_.push(u++)}c.push(_)}for(let m=0;m<r;m++)for(let _=0;_<n;_++){const y=c[m][_+1],x=c[m][_],S=c[m+1][_],b=c[m+1][_+1];(m!==0||o>0)&&d.push(y,x,b),(m!==r-1||l<Math.PI)&&d.push(x,S,b)}this.setIndex(d),this.setAttribute("position",new mi(p,3)),this.setAttribute("normal",new mi(v,3)),this.setAttribute("uv",new mi(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ou(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class c9t extends Ci{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const n=[],r=new Set,i=new Y,a=new Y;if(t.index!==null){const o=t.attributes.position,s=t.index;let l=t.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,d=h.count;for(let p=f,v=f+d;p<v;p+=3)for(let g=0;g<3;g++){const m=s.getX(p+g),_=s.getX(p+(g+1)%3);i.fromBufferAttribute(o,m),a.fromBufferAttribute(o,_),QX(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}}else{const o=t.attributes.position;for(let s=0,l=o.count/3;s<l;s++)for(let u=0;u<3;u++){const c=3*s+u,h=3*s+(u+1)%3;i.fromBufferAttribute(o,c),a.fromBufferAttribute(o,h),QX(i,a,r)===!0&&(n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z))}}this.setAttribute("position",new mi(n,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function QX(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}function _T(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function h9t(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f9t(e){function t(i,a){return e[i]-e[a]}const n=e.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r}function tj(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const s=n[a]*t;for(let l=0;l!==t;++l)i[o++]=e[s+l]}return i}function nlt(e,t,n,r){let i=1,a=e[0];for(;a!==void 0&&a[r]===void 0;)a=e[i++];if(a===void 0)return;let o=a[r];if(o!==void 0)if(Array.isArray(o))do o=a[r],o!==void 0&&(t.push(a.time),n.push.apply(n,o)),a=e[i++];while(a!==void 0);else if(o.toArray!==void 0)do o=a[r],o!==void 0&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++];while(a!==void 0);else do o=a[r],o!==void 0&&(t.push(a.time),n.push(o)),a=e[i++];while(a!==void 0)}class d2{constructor(t,n,r,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],a=n[r-1];t:{e:{let o;n:{r:if(!(t<i)){for(let s=r+2;;){if(i===void 0){if(t<a)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===s)break;if(a=i,i=n[++r],t<i)break e}o=n.length;break n}if(!(t>=a)){const s=n[1];t<s&&(r=2,a=s);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=n[--r-1],t>=a)break e}o=r,r=0;break n}break t}for(;r<o;){const s=r+o>>>1;t<n[s]?o=s:r=s+1}if(i=n[r],a=n[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=t*i;for(let o=0;o!==i;++o)n[o]=r[a+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class d9t extends d2{constructor(t,n,r,i){super(t,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wm,endingEnd:wm}}intervalChanged_(t,n,r){const i=this.parameterPositions;let a=t-2,o=t+1,s=i[a],l=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case Tm:a=t,s=2*n-r;break;case wC:a=i.length-2,s=n+i[a]-i[a+1];break;default:a=t,s=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Tm:o=t,l=2*r-n;break;case wC:o=1,l=r+i[1]-i[0];break;default:o=t-1,l=n}const u=(r-n)*.5,c=this.valueSize;this._weightPrev=u/(n-s),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=o*c}interpolate_(t,n,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(r-n)/(i-n),v=p*p,g=v*p,m=-f*g+2*f*v-f*p,_=(1+f)*g+(-1.5-2*f)*v+(-.5+f)*p+1,y=(-1-d)*g+(1.5+d)*v+.5*p,x=d*g-d*v;for(let S=0;S!==s;++S)a[S]=m*o[c+S]+_*o[u+S]+y*o[l+S]+x*o[h+S];return a}}class rlt extends d2{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t,n,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=t*s,u=l-s,c=(r-n)/(i-n),h=1-c;for(let f=0;f!==s;++f)a[f]=o[u+f]*h+o[l+f]*c;return a}}class p9t extends d2{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class rc{constructor(t,n,r,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=_T(n,this.TimeBufferType),this.values=_T(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const n=t.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(t);else{r={name:t.name,times:_T(t.times,Array),values:_T(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(r.interpolation=i)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new p9t(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new rlt(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new d9t(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let n;switch(t){case bC:n=this.InterpolantFactoryMethodDiscrete;break;case SC:n=this.InterpolantFactoryMethodLinear;break;case gP:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bC;case this.InterpolantFactoryMethodLinear:return SC;case this.InterpolantFactoryMethodSmooth:return gP}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=t}return this}scale(t){if(t!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=t}return this}trim(t,n){const r=this.times,i=r.length;let a=0,o=i-1;for(;a!==i&&r[a]<t;)++a;for(;o!==-1&&r[o]>n;)--o;if(++o,a!==0||o!==i){a>=o&&(o=Math.max(o,1),a=o-1);const s=this.getValueSize();this.times=r.slice(a,o),this.values=this.values.slice(a*s,o*s)}return this}validate(){let t=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const r=this.times,i=this.values,a=r.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let s=0;s!==a;s++){const l=r[s];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,l),t=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,l,o),t=!1;break}o=l}if(i!==void 0&&h9t(i))for(let s=0,l=i.length;s!==l;++s){const u=i[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),t=!1;break}}return t}optimize(){const t=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===gP,a=t.length-1;let o=1;for(let s=1;s<a;++s){let l=!1;const u=t[s],c=t[s+1];if(u!==c&&(s!==1||u!==t[0]))if(i)l=!0;else{const h=s*r,f=h-r,d=h+r;for(let p=0;p!==r;++p){const v=n[h+p];if(v!==n[f+p]||v!==n[d+p]){l=!0;break}}}if(l){if(s!==o){t[o]=t[s];const h=s*r,f=o*r;for(let d=0;d!==r;++d)n[f+d]=n[h+d]}++o}}if(a>0){t[o]=t[a];for(let s=a*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[s+u];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=n.slice(0,o*r)):(this.times=t,this.values=n),this}clone(){const t=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,t,n);return i.createInterpolant=this.createInterpolant,i}}rc.prototype.TimeBufferType=Float32Array;rc.prototype.ValueBufferType=Float32Array;rc.prototype.DefaultInterpolation=SC;class k0 extends rc{}k0.prototype.ValueTypeName="bool";k0.prototype.ValueBufferType=Array;k0.prototype.DefaultInterpolation=bC;k0.prototype.InterpolantFactoryMethodLinear=void 0;k0.prototype.InterpolantFactoryMethodSmooth=void 0;class ilt extends rc{}ilt.prototype.ValueTypeName="color";class DC extends rc{}DC.prototype.ValueTypeName="number";class v9t extends d2{constructor(t,n,r,i){super(t,n,r,i)}interpolate_(t,n,r,i){const a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=(r-n)/(i-n);let u=t*s;for(let c=u+s;u!==c;u+=4)Ko.slerpFlat(a,0,o,u-s,o,u,l);return a}}class F0 extends rc{InterpolantFactoryMethodLinear(t){return new v9t(this.times,this.values,this.getValueSize(),t)}}F0.prototype.ValueTypeName="quaternion";F0.prototype.DefaultInterpolation=SC;F0.prototype.InterpolantFactoryMethodSmooth=void 0;class z0 extends rc{}z0.prototype.ValueTypeName="string";z0.prototype.ValueBufferType=Array;z0.prototype.DefaultInterpolation=bC;z0.prototype.InterpolantFactoryMethodLinear=void 0;z0.prototype.InterpolantFactoryMethodSmooth=void 0;class r1 extends rc{}r1.prototype.ValueTypeName="vector";class F3{constructor(t="",n=-1,r=[],i=CU){this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Il(),this.duration<0&&this.resetDuration()}static parse(t){const n=[],r=t.tracks,i=1/(t.fps||1);for(let o=0,s=r.length;o!==s;++o)n.push(m9t(r[o]).scale(i));const a=new this(t.name,t.duration,n,t.blendMode);return a.uuid=t.uuid,a}static toJSON(t){const n=[],r=t.tracks,i={name:t.name,duration:t.duration,tracks:n,uuid:t.uuid,blendMode:t.blendMode};for(let a=0,o=r.length;a!==o;++a)n.push(rc.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(t,n,r,i){const a=n.length,o=[];for(let s=0;s<a;s++){let l=[],u=[];l.push((s+a-1)%a,s,(s+1)%a),u.push(0,1,0);const c=f9t(l);l=tj(l,1,c),u=tj(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),o.push(new DC(".morphTargetInfluences["+n[s].name+"]",l,u).scale(1/r))}return new this(t,-1,o)}static findByName(t,n){let r=t;if(!Array.isArray(t)){const i=t;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(t,n,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,l=t.length;s<l;s++){const u=t[s],c=u.name.match(a);if(c&&c.length>1){const h=c[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const o=[];for(const s in i)o.push(this.CreateFromMorphTargetSequence(s,i[s],n,r));return o}static parseAnimation(t,n){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,d,p,v){if(d.length!==0){const g=[],m=[];nlt(d,g,m,p),g.length!==0&&v.push(new h(f,g,m))}},i=[],a=t.name||"default",o=t.fps||30,s=t.blendMode;let l=t.length||-1;const u=t.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let v=0;v<f[p].morphTargets.length;v++)d[f[p].morphTargets[v]]=-1;for(const v in d){const g=[],m=[];for(let _=0;_!==f[p].morphTargets.length;++_){const y=f[p];g.push(y.time),m.push(y.morphTarget===v?1:0)}i.push(new DC(".morphTargetInfluence["+v+"]",g,m))}l=d.length*o}else{const d=".bones["+n[h].name+"]";r(r1,d+".position",f,"pos",i),r(F0,d+".quaternion",f,"rot",i),r(r1,d+".scale",f,"scl",i)}}return i.length===0?null:new this(a,l,i,s)}resetDuration(){const t=this.tracks;let n=0;for(let r=0,i=t.length;r!==i;++r){const a=this.tracks[r];n=Math.max(n,a.times[a.times.length-1])}return this.duration=n,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let n=0;n<this.tracks.length;n++)t=t&&this.tracks[n].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let n=0;n<this.tracks.length;n++)t.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function g9t(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return DC;case"vector":case"vector2":case"vector3":case"vector4":return r1;case"color":return ilt;case"quaternion":return F0;case"bool":case"boolean":return k0;case"string":return z0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function m9t(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=g9t(e.type);if(e.times===void 0){const n=[],r=[];nlt(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const ej={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class y9t{constructor(t,n,r){const i=this;let a=!1,o=0,s=0,l;const u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(c){s++,a===!1&&i.onStart!==void 0&&i.onStart(c,o,s),a=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,s),o===s&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const d=u[h],p=u[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const _9t=new y9t;class BU{constructor(t){this.manager=t!==void 0?t:_9t,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,n){const r=this;return new Promise(function(i,a){r.load(t,i,n,a)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}BU.DEFAULT_MATERIAL_NAME="__DEFAULT";const gc={};class x9t extends Error{constructor(t,n){super(t),this.response=n}}class b9t extends BU{constructor(t){super(t)}load(t,n,r,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const a=ej.get(t);if(a!==void 0)return this.manager.itemStart(t),setTimeout(()=>{n&&n(a),this.manager.itemEnd(t)},0),a;if(gc[t]!==void 0){gc[t].push({onLoad:n,onProgress:r,onError:i});return}gc[t]=[],gc[t].push({onLoad:n,onProgress:r,onError:i});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=gc[t],h=u.body.getReader(),f=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),d=f?parseInt(f):0,p=d!==0;let v=0;const g=new ReadableStream({start(m){_();function _(){h.read().then(({done:y,value:x})=>{if(y)m.close();else{v+=x.byteLength;const S=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:d});for(let b=0,w=c.length;b<w;b++){const A=c[b];A.onProgress&&A.onProgress(S)}m.enqueue(x),_()}})}}});return new Response(g)}else throw new x9t(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,s));case"json":return u.json();default:if(s===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(s),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return u.arrayBuffer().then(p=>d.decode(p))}}}).then(u=>{ej.add(t,u);const c=gc[t];delete gc[t];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=gc[t];if(c===void 0)throw this.manager.itemError(t),u;delete gc[t];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(u)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class S9t extends Ci{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class w9t{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=nj(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=nj();t=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=t}return t}}function nj(){return(typeof performance>"u"?Date:performance).now()}class T9t{constructor(t,n,r){this.binding=t,this.valueSize=r;let i,a,o;switch(n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,n){const r=this.buffer,i=this.valueSize,a=t*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)r[a+s]=r[s];o=n}else{o+=n;const s=n/o;this._mixBufferRegion(r,a,0,s,i)}this.cumulativeWeight=o}accumulateAdditive(t){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){const n=this.valueSize,r=this.buffer,i=t*n+n,a=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-a,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){s.setValue(r,i);break}}saveOriginalState(){const t=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;t.getValue(n,i);for(let a=r,o=i;a!==o;++a)n[a]=n[i+a%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,n=t+this.valueSize;for(let r=t;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[t+r]}_select(t,n,r,i,a){if(i>=.5)for(let o=0;o!==a;++o)t[n+o]=t[r+o]}_slerp(t,n,r,i){Ko.slerpFlat(t,n,t,n,t,r,i)}_slerpAdditive(t,n,r,i,a){const o=this._workIndex*a;Ko.multiplyQuaternionsFlat(t,o,t,n,t,r),Ko.slerpFlat(t,n,t,n,t,o,i)}_lerp(t,n,r,i,a){const o=1-i;for(let s=0;s!==a;++s){const l=n+s;t[l]=t[l]*o+t[r+s]*i}}_lerpAdditive(t,n,r,i,a){for(let o=0;o!==a;++o){const s=n+o;t[s]=t[s]+t[r+o]*i}}}const kU="\\[\\]\\.:\\/",M9t=new RegExp("["+kU+"]","g"),FU="[^"+kU+"]",A9t="[^"+kU.replace("\\.","")+"]",C9t=/((?:WC+[\/:])*)/.source.replace("WC",FU),E9t=/(WCOD+)?/.source.replace("WCOD",A9t),D9t=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FU),I9t=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FU),L9t=new RegExp("^"+C9t+E9t+D9t+I9t+"$"),P9t=["material","materials","bones","map"];class R9t{constructor(t,n,r){const i=r||sr.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}getValue(t,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(t,n)}setValue(t,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(t,n)}bind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].bind()}unbind(){const t=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=t.length;n!==r;++n)t[n].unbind()}}class sr{constructor(t,n,r){this.path=n,this.parsedPath=r||sr.parseTrackName(n),this.node=sr.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new sr.Composite(t,n,r):new sr(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(M9t,"")}static parseTrackName(t){const n=L9t.exec(t);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);P9t.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(n===void 0||n===""||n==="."||n===-1||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(r!==void 0)return r}if(t.children){const r=function(a){for(let o=0;o<a.length;o++){const s=a[o];if(s.name===n||s.uuid===n)return s;const l=r(s.children);if(l)return l}return null},i=r(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)t[n++]=r[i]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let a=n.propertyIndex;if(t||(t=sr.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let c=0;c<t.length;c++)if(t[c].name===u){u=c;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}const o=t[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t);return}let s=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[a]!==void 0&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sr.Composite=R9t;sr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sr.prototype.GetterByBindingType=[sr.prototype._getValue_direct,sr.prototype._getValue_array,sr.prototype._getValue_arrayElement,sr.prototype._getValue_toArray];sr.prototype.SetterByBindingTypeAndVersioning=[[sr.prototype._setValue_direct,sr.prototype._setValue_direct_setNeedsUpdate,sr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_array,sr.prototype._setValue_array_setNeedsUpdate,sr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_arrayElement,sr.prototype._setValue_arrayElement_setNeedsUpdate,sr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_fromArray,sr.prototype._setValue_fromArray_setNeedsUpdate,sr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class O9t{constructor(t,n,r=null,i=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;const a=n.tracks,o=a.length,s=new Array(o),l={endingStart:wm,endingEnd:wm};for(let u=0;u!==o;++u){const c=a[u].createInterpolant(null);s[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_Gt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,r){if(t.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,a=t._clip.duration,o=a/i,s=i/a;t.warp(1,o,n),this.warp(s,1,n)}return this}crossFadeTo(t,n,r){return t.crossFadeFrom(this,n,r)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,r){const i=this._mixer,a=i.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);const l=s.parameterPositions,u=s.sampleValues;return l[0]=a,l[1]=a+r,u[0]=t/o,u[1]=n/o,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,r,i){if(!this.enabled){this._updateWeight(t);return}const a=this._startTime;if(a!==null){const l=(t-a)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(t);const o=this._updateTime(n),s=this._updateWeight(t);if(s>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case bGt:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(s);break;case CU:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(t)[0];n*=i,t>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(t)[0];n*=i,t>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,r=this.loop;let i=this.time+t,a=this._loopCount;const o=r===xGt;if(t===0)return a===-1?i:o&&(a&1)===1?n-i:i;if(r===yGt){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(a===-1&&(t>=0?(a=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const s=Math.floor(i/n);i-=n*s,a+=Math.abs(s);const l=this.repetitions-a;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=i;if(o&&(a&1)===1)return n-i}return i}_setEndings(t,n,r){const i=this._interpolantSettings;r?(i.endingStart=Tm,i.endingEnd=Tm):(t?i.endingStart=this.zeroSlopeAtStart?Tm:wm:i.endingStart=wC,n?i.endingEnd=this.zeroSlopeAtEnd?Tm:wm:i.endingEnd=wC)}_scheduleFading(t,n,r){const i=this._mixer,a=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=a,l[0]=n,s[1]=a+t,l[1]=r,this}}const N9t=new Float32Array(1);class B9t extends _d{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,n){const r=t._localRoot||this._root,i=t._clip.tracks,a=i.length,o=t._propertyBindings,s=t._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==a;++h){const f=i[h],d=f.name;let p=c[d];if(p!==void 0)++p.referenceCount,o[h]=p;else{if(p=o[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const v=n&&n._propertyBindings[h].binding.parsedPath;p=new T9t(sr.create(r,d,v),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[h]=p}s[h].resultBuffer=p.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const r=(t._localRoot||this._root).uuid,i=t._clip.uuid,a=this._actionsByClip[i];this._bindAction(t,a&&a.knownActions[0]),this._addInactiveAction(t,i,r)}const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const n=t._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(t,n,r){const i=this._actions,a=this._actionsByClip;let o=a[n];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,a[n]=o;else{const s=o.knownActions;t._byClipCacheIndex=s.length,s.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[r]=t}_removeInactiveAction(t){const n=this._actions,r=n[n.length-1],i=t._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),t._cacheIndex=null;const a=t._clip.uuid,o=this._actionsByClip,s=o[a],l=s.knownActions,u=l[l.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),t._byClipCacheIndex=null;const h=s.actionByRoot,f=(t._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[a],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const n=t._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const a=n[r];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(t){const n=this._actions,r=t._cacheIndex,i=this._nActiveActions++,a=n[i];t._cacheIndex=i,n[i]=t,a._cacheIndex=r,n[r]=a}_takeBackAction(t){const n=this._actions,r=t._cacheIndex,i=--this._nActiveActions,a=n[i];t._cacheIndex=i,n[i]=t,a._cacheIndex=r,n[r]=a}_addInactiveBinding(t,n,r){const i=this._bindingsByRootAndName,a=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=t,t._cacheIndex=a.length,a.push(t)}_removeInactiveBinding(t){const n=this._bindings,r=t.binding,i=r.rootNode.uuid,a=r.path,o=this._bindingsByRootAndName,s=o[i],l=n[n.length-1],u=t._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete s[a],Object.keys(s).length===0&&delete o[i]}_lendBinding(t){const n=this._bindings,r=t._cacheIndex,i=this._nActiveBindings++,a=n[i];t._cacheIndex=i,n[i]=t,a._cacheIndex=r,n[r]=a}_takeBackBinding(t){const n=this._bindings,r=t._cacheIndex,i=--this._nActiveBindings,a=n[i];t._cacheIndex=i,n[i]=t,a._cacheIndex=r,n[r]=a}_lendControlInterpolant(){const t=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=t[n];return r===void 0&&(r=new rlt(new Float32Array(2),new Float32Array(2),1,N9t),r.__cacheIndex=n,t[n]=r),r}_takeBackControlInterpolant(t){const n=this._controlInterpolants,r=t.__cacheIndex,i=--this._nActiveControlInterpolants,a=n[i];t.__cacheIndex=i,n[i]=t,a.__cacheIndex=r,n[r]=a}clipAction(t,n,r){const i=n||this._root,a=i.uuid;let o=typeof t=="string"?F3.findByName(i,t):t;const s=o!==null?o.uuid:t,l=this._actionsByClip[s];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=CU),l!==void 0){const h=l.actionByRoot[a];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new O9t(this,o,n,r);return this._bindAction(c,u),this._addInactiveAction(c,s,a),c}existingAction(t,n){const r=n||this._root,i=r.uuid,a=typeof t=="string"?F3.findByName(r,t):t,o=a?a.uuid:t,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null}stopAllAction(){const t=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=t,a=Math.sign(t),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,t,a,o);const s=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)s[u].apply(o);return this}setTime(t){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const n=this._actions,r=t.uuid,i=this._actionsByClip,a=i[r];if(a!==void 0){const o=a.knownActions;for(let s=0,l=o.length;s!==l;++s){const u=o[s];this._deactivateAction(u);const c=u._cacheIndex,h=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,n[c]=h,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(t){const n=t.uuid,r=this._actionsByClip;for(const o in r){const s=r[o].actionByRoot,l=s[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,a=i[n];if(a!==void 0)for(const o in a){const s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(t,n){const r=this.existingAction(t,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class z3 extends Jst{constructor(t,n,r=1){super(t,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const n=super.clone(t);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(t){const n=super.toJSON(t);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}const rj=new cr;class k9t{constructor(t,n,r=0,i=1/0){this.ray=new IU(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new LU,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,n){this.ray.set(t,n)}setFromCamera(t,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(t){return rj.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(rj),this}intersectObject(t,n=!0,r=[]){return U3(t,this,r,n),r.sort(ij),r}intersectObjects(t,n=!0,r=[]){for(let i=0,a=t.length;i<a;i++)U3(t[i],this,r,n);return r.sort(ij),r}}function ij(e,t){return e.distance-t.distance}function U3(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),r===!0){const i=e.children;for(let a=0,o=i.length;a<o;a++)U3(i[a],t,n,!0)}}class aj{constructor(t=1,n=0,r=0){return this.radius=t,this.phi=n,this.theta=r,this}set(t,n,r){return this.radius=t,this.phi=n,this.theta=r,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,r){return this.radius=Math.sqrt(t*t+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(sa(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const oj=new Y,xT=new Y;class F9t{constructor(t=new Y,n=new Y){this.start=t,this.end=n}set(t,n){return this.start.copy(t),this.end.copy(n),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,n){return this.delta(n).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,n){oj.subVectors(t,this.start),xT.subVectors(this.end,this.start);const r=xT.dot(xT);let a=xT.dot(oj)/r;return n&&(a=sa(a,0,1)),a}closestPointToPoint(t,n,r){const i=this.closestPointToPointParameter(t,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class z9t extends l9t{constructor(t=10,n=10,r=4473924,i=8947848){r=new Dn(r),i=new Dn(i);const a=n/2,o=t/n,s=t/2,l=[],u=[];for(let f=0,d=0,p=-s;f<=n;f++,p+=o){l.push(-s,0,p,s,0,p),l.push(p,0,-s,p,0,s);const v=f===a?r:i;v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3}const c=new Ci;c.setAttribute("position",new mi(l,3)),c.setAttribute("color",new mi(u,3));const h=new Am({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:AU}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=AU);const sj={type:"change"},WP={type:"start"},$P={type:"end"};class U9t extends _d{constructor(t,n){super(),n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=n,this.enabled=!0,this.target=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Eg.ROTATE,MIDDLE:Eg.DOLLY,RIGHT:Eg.PAN},this.touches={ONE:Dg.ROTATE,TWO:Dg.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.listenToKeyEvents=function(j){j.addEventListener("keydown",st),this._domElementKeyEvents=j},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(sj),r.update(),a=i.NONE},this.update=function(){const j=new Y,zt=new Ko().setFromUnitVectors(t.up,new Y(0,1,0)),ie=zt.clone().invert(),Rt=new Y,re=new Ko,Oe=2*Math.PI;return function(){const ge=r.object.position;j.copy(ge).sub(r.target),j.applyQuaternion(zt),s.setFromVector3(j),r.autoRotate&&a===i.NONE&&w(S()),r.enableDamping?(s.theta+=l.theta*r.dampingFactor,s.phi+=l.phi*r.dampingFactor):(s.theta+=l.theta,s.phi+=l.phi);let en=r.minAzimuthAngle,rn=r.maxAzimuthAngle;return isFinite(en)&&isFinite(rn)&&(en<-Math.PI?en+=Oe:en>Math.PI&&(en-=Oe),rn<-Math.PI?rn+=Oe:rn>Math.PI&&(rn-=Oe),en<=rn?s.theta=Math.max(en,Math.min(rn,s.theta)):s.theta=s.theta>(en+rn)/2?Math.max(en,s.theta):Math.min(rn,s.theta)),s.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,s.phi)),s.makeSafe(),s.radius*=u,s.radius=Math.max(r.minDistance,Math.min(r.maxDistance,s.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),j.setFromSpherical(s),j.applyQuaternion(ie),ge.copy(r.target).add(j),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,h||Rt.distanceToSquared(r.object.position)>o||8*(1-re.dot(r.object.quaternion))>o?(r.dispatchEvent(sj),Rt.copy(r.object.position),re.copy(r.object.quaternion),h=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",be),r.domElement.removeEventListener("pointerdown",Ct),r.domElement.removeEventListener("wheel",F),r.domElement.removeEventListener("touchstart",bt),r.domElement.removeEventListener("touchend",Et),r.domElement.removeEventListener("touchmove",At),r.domElement.ownerDocument.removeEventListener("pointermove",It),r.domElement.ownerDocument.removeEventListener("pointerup",Jt),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",st)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let a=i.NONE;const o=1e-6,s=new aj,l=new aj;let u=1;const c=new Y;let h=!1;const f=new Ee,d=new Ee,p=new Ee,v=new Ee,g=new Ee,m=new Ee,_=new Ee,y=new Ee,x=new Ee;function S(){return 2*Math.PI/60/60*r.autoRotateSpeed}function b(){return Math.pow(.95,r.zoomSpeed)}function w(j){l.theta-=j}function A(j){l.phi-=j}this.rotateLeft=w,this.rotateUp=A;const T=function(){const j=new Y;return function(ie,Rt){j.setFromMatrixColumn(Rt,0),j.multiplyScalar(-ie),c.add(j)}}(),M=function(){const j=new Y;return function(ie,Rt){r.screenSpacePanning===!0?j.setFromMatrixColumn(Rt,1):(j.setFromMatrixColumn(Rt,0),j.crossVectors(r.object.up,j)),j.multiplyScalar(ie),c.add(j)}}(),C=function(){const j=new Y;return function(ie,Rt){const re=r.domElement;if(r.object.isPerspectiveCamera){const Oe=r.object.position;j.copy(Oe).sub(r.target);let pe=j.length();pe*=Math.tan(r.object.fov/2*Math.PI/180),T(2*ie*pe/re.clientHeight,r.object.matrix),M(2*Rt*pe/re.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(T(ie*(r.object.right-r.object.left)/r.object.zoom/re.clientWidth,r.object.matrix),M(Rt*(r.object.top-r.object.bottom)/r.object.zoom/re.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function E(j){r.object.isPerspectiveCamera?u/=j:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*j)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function D(j){r.object.isPerspectiveCamera?u*=j:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/j)),r.object.updateProjectionMatrix(),h=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function I(j){f.set(j.clientX,j.clientY)}function L(j){_.set(j.clientX,j.clientY)}function P(j){v.set(j.clientX,j.clientY)}function B(j){d.set(j.clientX,j.clientY),p.subVectors(d,f).multiplyScalar(r.rotateSpeed);const zt=r.domElement;w(2*Math.PI*p.x/zt.clientHeight),A(2*Math.PI*p.y/zt.clientHeight),f.copy(d),r.update()}function N(j){y.set(j.clientX,j.clientY),x.subVectors(y,_),x.y>0?E(b()):x.y<0&&D(b()),_.copy(y),r.update()}function k(j){g.set(j.clientX,j.clientY),m.subVectors(g,v).multiplyScalar(r.panSpeed),C(m.x,m.y),v.copy(g),r.update()}function U(j){j.deltaY<0?D(b()):j.deltaY>0&&E(b()),r.update()}function Z(j){let zt=!1;switch(j.code){case r.keys.UP:C(0,r.keyPanSpeed),zt=!0;break;case r.keys.BOTTOM:C(0,-r.keyPanSpeed),zt=!0;break;case r.keys.LEFT:C(r.keyPanSpeed,0),zt=!0;break;case r.keys.RIGHT:C(-r.keyPanSpeed,0),zt=!0;break}zt&&(j.preventDefault(),r.update())}function nt(j){if(j.touches.length==1)f.set(j.touches[0].pageX,j.touches[0].pageY);else{const zt=.5*(j.touches[0].pageX+j.touches[1].pageX),ie=.5*(j.touches[0].pageY+j.touches[1].pageY);f.set(zt,ie)}}function ct(j){if(j.touches.length==1)v.set(j.touches[0].pageX,j.touches[0].pageY);else{const zt=.5*(j.touches[0].pageX+j.touches[1].pageX),ie=.5*(j.touches[0].pageY+j.touches[1].pageY);v.set(zt,ie)}}function K(j){const zt=j.touches[0].pageX-j.touches[1].pageX,ie=j.touches[0].pageY-j.touches[1].pageY,Rt=Math.sqrt(zt*zt+ie*ie);_.set(0,Rt)}function $(j){r.enableZoom&&K(j),r.enablePan&&ct(j)}function ot(j){r.enableZoom&&K(j),r.enableRotate&&nt(j)}function tt(j){if(j.touches.length==1)d.set(j.touches[0].pageX,j.touches[0].pageY);else{const ie=.5*(j.touches[0].pageX+j.touches[1].pageX),Rt=.5*(j.touches[0].pageY+j.touches[1].pageY);d.set(ie,Rt)}p.subVectors(d,f).multiplyScalar(r.rotateSpeed);const zt=r.domElement;w(2*Math.PI*p.x/zt.clientHeight),A(2*Math.PI*p.y/zt.clientHeight),f.copy(d)}function et(j){if(j.touches.length==1)g.set(j.touches[0].pageX,j.touches[0].pageY);else{const zt=.5*(j.touches[0].pageX+j.touches[1].pageX),ie=.5*(j.touches[0].pageY+j.touches[1].pageY);g.set(zt,ie)}m.subVectors(g,v).multiplyScalar(r.panSpeed),C(m.x,m.y),v.copy(g)}function xt(j){const zt=j.touches[0].pageX-j.touches[1].pageX,ie=j.touches[0].pageY-j.touches[1].pageY,Rt=Math.sqrt(zt*zt+ie*ie);y.set(0,Rt),x.set(0,Math.pow(y.y/_.y,r.zoomSpeed)),E(x.y),_.copy(y)}function St(j){r.enableZoom&&xt(j),r.enablePan&&et(j)}function X(j){r.enableZoom&&xt(j),r.enableRotate&&tt(j)}function Ct(j){if(r.enabled!==!1)switch(j.pointerType){case"mouse":case"pen":Gt(j);break}}function It(j){if(r.enabled!==!1)switch(j.pointerType){case"mouse":case"pen":ve(j);break}}function Jt(j){switch(j.pointerType){case"mouse":case"pen":W();break}}function Gt(j){j.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus();let zt;switch(j.button){case 0:zt=r.mouseButtons.LEFT;break;case 1:zt=r.mouseButtons.MIDDLE;break;case 2:zt=r.mouseButtons.RIGHT;break;default:zt=-1}switch(zt){case Eg.DOLLY:if(r.enableZoom===!1)return;L(j),a=i.DOLLY;break;case Eg.ROTATE:if(j.ctrlKey||j.metaKey||j.shiftKey){if(r.enablePan===!1)return;P(j),a=i.PAN}else{if(r.enableRotate===!1)return;I(j),a=i.ROTATE}break;case Eg.PAN:if(j.ctrlKey||j.metaKey||j.shiftKey){if(r.enableRotate===!1)return;I(j),a=i.ROTATE}else{if(r.enablePan===!1)return;P(j),a=i.PAN}break;default:a=i.NONE}a!==i.NONE&&(r.domElement.ownerDocument.addEventListener("pointermove",It),r.domElement.ownerDocument.addEventListener("pointerup",Jt),r.dispatchEvent(WP))}function ve(j){if(r.enabled!==!1)switch(j.preventDefault(),a){case i.ROTATE:if(r.enableRotate===!1)return;B(j);break;case i.DOLLY:if(r.enableZoom===!1)return;N(j);break;case i.PAN:if(r.enablePan===!1)return;k(j);break}}function W(j){r.domElement.ownerDocument.removeEventListener("pointermove",It),r.domElement.ownerDocument.removeEventListener("pointerup",Jt),r.enabled!==!1&&(r.dispatchEvent($P),a=i.NONE)}function F(j){r.enabled===!1||r.enableZoom===!1||a!==i.NONE&&a!==i.ROTATE||(j.preventDefault(),r.dispatchEvent(WP),U(j),r.dispatchEvent($P))}function st(j){r.enabled===!1||r.enablePan===!1||Z(j)}function bt(j){if(r.enabled!==!1){switch(j.preventDefault(),j.touches.length){case 1:switch(r.touches.ONE){case Dg.ROTATE:if(r.enableRotate===!1)return;nt(j),a=i.TOUCH_ROTATE;break;case Dg.PAN:if(r.enablePan===!1)return;ct(j),a=i.TOUCH_PAN;break;default:a=i.NONE}break;case 2:switch(r.touches.TWO){case Dg.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;$(j),a=i.TOUCH_DOLLY_PAN;break;case Dg.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ot(j),a=i.TOUCH_DOLLY_ROTATE;break;default:a=i.NONE}break;default:a=i.NONE}a!==i.NONE&&r.dispatchEvent(WP)}}function At(j){if(r.enabled!==!1)switch(j.preventDefault(),a){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;tt(j),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;et(j),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;St(j),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;X(j),r.update();break;default:a=i.NONE}}function Et(j){r.enabled!==!1&&(r.dispatchEvent($P),a=i.NONE)}function be(j){r.enabled!==!1&&j.preventDefault()}r.domElement.addEventListener("contextmenu",be),r.domElement.addEventListener("pointerdown",Ct),r.domElement.addEventListener("wheel",F,{passive:!1}),r.domElement.addEventListener("touchstart",bt,{passive:!1}),r.domElement.addEventListener("touchend",Et),r.domElement.addEventListener("touchmove",At,{passive:!1}),this.update()}}class V9t{constructor(t,n){n=Object.assign({size:90,padding:8,bubbleSizePrimary:8,bubbleSizeSecondary:6,lineWidth:2,fontSize:"12px",fontFamily:"Segoe UI",fontWeight:"bold",fontColor:"#222222",className:"obit-controls-gizmo",colors:{x:["#f73c3c","#942424"],y:["#6ccb26","#417a17"],z:["#178cf0","#0e5490"]}},n),this.lock=!1,this.lockX=!1,this.lockY=!1,this.update=()=>{if(!this.lock){a.updateMatrix(),o.extractRotation(a.matrix).invert();for(let I=0,L=f.length;I<L;I++)D(f[I],o);f.sort((I,L)=>I.position.z>L.position.z?1:-1),E(!0)}},this.dispose=()=>{i.removeEventListener("change",this.update),i.removeEventListener("start",()=>this.domElement.classList.add("inactive")),i.removeEventListener("end",()=>this.domElement.classList.remove("inactive")),this.domElement.removeEventListener("pointerdown",x,!1),this.domElement.removeEventListener("pointerenter",b,!1),this.domElement.removeEventListener("pointermove",w,!1),this.domElement.removeEventListener("click",T,!1),window.removeEventListener("pointermove",A,!1),window.removeEventListener("pointerup",S,!1),this.domElement.remove()};const r=this,i=t,a=t.object,o=new cr,s=new Y,l=new Ee,u=new Ee,c=new Ee,h=new Y(n.size/2,n.size/2,0),f=_();let d=null,p=!1,v,g,m;i.addEventListener("change",this.update),i.addEventListener("start",()=>this.domElement.classList.add("inactive")),i.addEventListener("end",()=>this.domElement.classList.remove("inactive"));function _(){const I=n.colors,L=n.lineWidth,P={primary:n.bubbleSizePrimary,secondary:n.bubbleSizeSecondary};return[{axis:"x",direction:new Y(1,0,0),size:P.primary,color:I.x,line:L,label:"X",position:new Y(0,0,0)},{axis:"y",direction:new Y(0,1,0),size:P.primary,color:I.y,line:L,label:"Y",position:new Y(0,0,0)},{axis:"z",direction:new Y(0,0,1),size:P.primary,color:I.z,line:L,label:"Z",position:new Y(0,0,0)},{axis:"-x",direction:new Y(-1,0,0),size:P.secondary,color:I.x,position:new Y(0,0,0)},{axis:"-y",direction:new Y(0,-1,0),size:P.secondary,color:I.y,position:new Y(0,0,0)},{axis:"-z",direction:new Y(0,0,-1),size:P.secondary,color:I.z,position:new Y(0,0,0)}]}function y(){const I=document.createElement("canvas");return I.width=n.size,I.height=n.size,I.classList.add(n.className),I.addEventListener("pointerdown",x,!1),I.addEventListener("pointerenter",b,!1),I.addEventListener("pointermove",w,!1),I.addEventListener("click",T,!1),v=I.getContext("2d"),I}function x(I){l.set(I.clientX,I.clientY),console.log("onPointerDown"),m=i.enabled,i.enabled=!1,window.addEventListener("pointermove",A,!1),window.addEventListener("pointerup",S,!1)}function S(){setTimeout(()=>p=!1,0),console.log("onPointerUp"),r.domElement.classList.remove("dragging"),i.enabled=m,window.removeEventListener("pointermove",A,!1),window.removeEventListener("pointerup",S,!1)}function b(){g=r.domElement.getBoundingClientRect(),console.log("onPointerEnter")}function w(I){if(p||r.lock)return;const L=d;d=null,I&&s.set((I.clientX-g.left)/Ms(),(I.clientY-g.top)/Ms(),0);for(let P=0,B=f.length;P<B;P++)s.distanceTo(f[P].position)<f[P].size&&(d=f[P],console.log("selected"));L!==d&&E()}function A(I){r.lock||(p||r.domElement.classList.add("dragging"),p=!0,d=null,u.set(I.clientX,I.clientY),c.subVectors(u,l).multiplyScalar(.5),r.lockX||i.rotateLeft(2*Math.PI*c.x/r.domElement.height),r.lockY||i.rotateUp(2*Math.PI*c.y/r.domElement.height),l.copy(u),i.update())}function T(){if(p||!d)return;const I=d.direction.clone(),L=a.position.distanceTo(i.target);I.multiplyScalar(L);const P=400,B=performance.now(),N=1;function k(){const Z=performance.now()-B,nt=Math.min(Z/P,N);if(a.position.lerp(I,nt),i.update(),nt!==N)return requestAnimationFrame(k);w()}k(),d=null}function M(I,L=10,P="#FF0000"){v.beginPath(),v.arc(I.x,I.y,L,0,2*Math.PI,!1),v.fillStyle=P,v.fill(),v.closePath()}function C(I,L,P=1,B="#FF0000"){v.beginPath(),v.moveTo(I.x,I.y),v.lineTo(L.x,L.y),v.lineWidth=P,v.strokeStyle=B,v.stroke(),v.closePath()}function E(I){I&&v.clearRect(0,0,r.domElement.width,r.domElement.height);for(let L=0,P=f.length;L<P;L++){const B=f[L],N=d===B,k=B.position.z>=-.01?B.color[0]:B.color[1];B.line&&C(h,B.position,B.line,k),M(B.position,B.size,N?"#FFFFFF":k),B.label&&(v.font=[n.fontWeight,n.fontSize,n.fontFamily].join(" "),v.fillStyle=n.fontColor,v.textBaseline="middle",v.textAlign="center",v.fillText(B.label,B.position.x,B.position.y))}}function D(I){const L=I.direction.clone().applyMatrix4(o),P=I.size;I.position.set(L.x*(h.x-P/2-n.padding)+h.x,h.y-L.y*(h.y-P/2-n.padding),L.z)}this.domElement=y(),this.update()}}var Xm=function(){var e=0,t=document.createElement("div");t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",function(c){c.preventDefault(),r(++e%t.children.length)},!1);function n(c){return t.appendChild(c.dom),c}function r(c){for(var h=0;h<t.children.length;h++)t.children[h].style.display=h===c?"block":"none";e=c}var i=(performance||Date).now(),a=i,o=0,s=n(new Xm.Panel("FPS","#0ff","#002")),l=n(new Xm.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=n(new Xm.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:t,addPanel:n,showPanel:r,begin:function(){i=(performance||Date).now()},end:function(){o++;var c=(performance||Date).now();if(l.update(c-i,200),c>=a+1e3&&(s.update(o*1e3/(c-a),100),a=c,o=0,u)){var h=performance.memory;u.update(h.usedJSHeapSize/1048576,h.jsHeapSizeLimit/1048576)}return c},update:function(){i=this.end()},domElement:t,setMode:r}};Xm.Panel=function(e,t,n){var r=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,u=3*o,c=2*o,h=3*o,f=15*o,d=74*o,p=30*o,v=document.createElement("canvas");v.width=s,v.height=l,v.style.cssText="width:80px;height:48px";var g=v.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(h,f,d,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,f,d,p),{dom:v,update:function(m,_){r=Math.min(r,m),i=Math.max(i,m),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,f),g.fillStyle=t,g.fillText(a(m)+" "+e+" ("+a(r)+"-"+a(i)+")",u,c),g.drawImage(v,h+o,f,d-o,p,h,f,d-o,p),g.fillRect(h+d-o,f,o,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+d-o,f,o,a((1-m/_)*p))}}};class G9t extends Xm.Panel{constructor(t,n="GPU MS"){super(n,"#f90","#210");let r=!0,i=t.getExtension("EXT_disjoint_timer_query_webgl2");i===null&&(r=!1,i=t.getExtension("EXT_disjoint_timer_query"),i===null&&console.warn("GPUStatsPanel: disjoint_time_query extension not available.")),this.context=t,this.extension=i,this.maxTime=30,this.activeQueries=0,this.startQuery=function(){const a=this.context,o=this.extension;if(o===null)return;let s;r?(s=a.createQuery(),a.beginQuery(o.TIME_ELAPSED_EXT,s)):(s=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,s)),this.activeQueries++;const l=()=>{let u,c,h;r?(u=a.getQueryParameter(s,a.QUERY_RESULT_AVAILABLE),c=a.getParameter(o.GPU_DISJOINT_EXT),h=a.getQueryParameter(s,a.QUERY_RESULT)):(u=o.getQueryObjectEXT(s,o.QUERY_RESULT_AVAILABLE_EXT),c=a.getParameter(o.GPU_DISJOINT_EXT),h=o.getQueryObjectEXT(s,o.QUERY_RESULT_EXT));const f=h*1e-6;u?(c||this.update(f,this.maxTime),this.activeQueries--):a.isContextLost()===!1&&requestAnimationFrame(l)};requestAnimationFrame(l)},this.endQuery=function(){const a=this.extension,o=this.context;a!==null&&(r?o.endQuery(a.TIME_ELAPSED_EXT):a.endQueryEXT(a.TIME_ELAPSED_EXT))}}}class H9t{constructor(t){this.clock=new w9t,this.containerId=t,this.container=null,this.camera=null,this.scene=null,this.renderer=null,this.controls=null,this.grid=null,this.gpuPanel=null,this.stats=null,this.container=null,this.init()}init(){this.container=document.getElementById(this.containerId),this.camera=new Ds(60,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,200,300),this.scene=new i9t,this.grid=new z9t(400,10),this.scene.add(this.grid),this.grid.position.copy(new Y(0,0,0)),this.renderer=new r9t({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),document.getElementById(this.containerId).appendChild(this.renderer.domElement),this.controls=new U9t(this.camera,this.renderer.domElement),this.controls.minDistance=0,this.controls.maxDistance=700,this.helper=new V9t(this.controls,{size:100,padding:8,bubbleSizePrimary:9,bubbleSizeSecondary:9}),this.helper.domElement.id="helperElement",this.container.appendChild(this.helper.domElement),this.stats=new Xm,this.container.appendChild(this.stats.dom),this.stats.dom.id="myStatsContainer",this.gpuPanel=new G9t(this.renderer.getContext()),this.stats.addPanel(this.gpuPanel),this.stats.showPanel(0),window.addEventListener("resize",this.onWindowResize.bind(this)),this.animate()}onWindowResize(){this.container=document.getElementById("threePanel"),this.width=this.container.clientWidth,this.height=this.container.clientHeight,this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),console.log(this.width,this.height)}animate(){this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate.bind(this))}}class W9t extends BU{constructor(t){super(t),this.animateBonePositions=!0,this.animateBoneRotations=!0}load(t,n,r,i){const a=this,o=new b9t(a.manager);o.setPath(a.path),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(t,function(s){try{n(a.parse(s))}catch(l){i?i(l):console.error(l),a.manager.itemError(t)}},r,i)}parse(t){function n(d){s(d)!=="HIERARCHY"&&console.error("THREE.BVHLoader: HIERARCHY expected.");const p=[],v=i(d,s(d),p);s(d)!=="MOTION"&&console.error("THREE.BVHLoader: MOTION expected.");let g=s(d).split(/[\s]+/);const m=parseInt(g[1]);isNaN(m)&&console.error("THREE.BVHLoader: Failed to read number of frames."),g=s(d).split(/[\s]+/);const _=parseFloat(g[2]);isNaN(_)&&console.error("THREE.BVHLoader: Failed to read frame time.");for(let y=0;y<m;y++)g=s(d).split(/[\s]+/),r(g,y*_,v);return p}function r(d,p,v){if(v.type==="ENDSITE")return;const g={time:p,position:new Y,rotation:new Ko};v.frames.push(g);const m=new Ko,_=new Y(1,0,0),y=new Y(0,1,0),x=new Y(0,0,1);for(let S=0;S<v.channels.length;S++)switch(v.channels[S]){case"Xposition":g.position.x=parseFloat(d.shift().trim());break;case"Yposition":g.position.y=parseFloat(d.shift().trim());break;case"Zposition":g.position.z=parseFloat(d.shift().trim());break;case"Xrotation":m.setFromAxisAngle(_,parseFloat(d.shift().trim())*Math.PI/180),g.rotation.multiply(m);break;case"Yrotation":m.setFromAxisAngle(y,parseFloat(d.shift().trim())*Math.PI/180),g.rotation.multiply(m);break;case"Zrotation":m.setFromAxisAngle(x,parseFloat(d.shift().trim())*Math.PI/180),g.rotation.multiply(m);break;default:console.warn("THREE.BVHLoader: Invalid channel type.")}for(let S=0;S<v.children.length;S++)r(d,p,v.children[S])}function i(d,p,v){const g={name:"",type:"",frames:[]};v.push(g);let m=p.split(/[\s]+/);m[0].toUpperCase()==="END"&&m[1].toUpperCase()==="SITE"?(g.type="ENDSITE",g.name="ENDSITE"):(g.name=m[1],g.type=m[0].toUpperCase()),s(d)!=="{"&&console.error("THREE.BVHLoader: Expected opening { after type & name"),m=s(d).split(/[\s]+/),m[0]!=="OFFSET"&&console.error("THREE.BVHLoader: Expected OFFSET but got: "+m[0]),m.length!==4&&console.error("THREE.BVHLoader: Invalid number of values for OFFSET.");const _=new Y(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));if((isNaN(_.x)||isNaN(_.y)||isNaN(_.z))&&console.error("THREE.BVHLoader: Invalid values of OFFSET."),g.offset=_,g.type!=="ENDSITE"){m=s(d).split(/[\s]+/),m[0]!=="CHANNELS"&&console.error("THREE.BVHLoader: Expected CHANNELS definition.");const y=parseInt(m[1]);g.channels=m.splice(2,y),g.children=[]}for(;;){const y=s(d);if(y==="}")return g;g.children.push(i(d,y,v))}}function a(d,p){const v=new elt;if(p.push(v),v.position.add(d.offset),v.name=d.name,d.type!=="ENDSITE")for(let g=0;g<d.children.length;g++)v.add(a(d.children[g],p));return v}function o(d){const p=[];for(let v=0;v<d.length;v++){const g=d[v];if(g.type==="ENDSITE")continue;const m=[],_=[],y=[];for(let x=0;x<g.frames.length;x++){const S=g.frames[x];m.push(S.time),_.push(S.position.x+g.offset.x),_.push(S.position.y+g.offset.y),_.push(S.position.z+g.offset.z),y.push(S.rotation.x),y.push(S.rotation.y),y.push(S.rotation.z),y.push(S.rotation.w)}l.animateBonePositions&&p.push(new r1(g.name+".position",m,_)),l.animateBoneRotations&&p.push(new F0(g.name+".quaternion",m,y))}return new F3("animation",-1,p)}function s(d){let p;for(;(p=d.shift().trim()).length===0;);return p}const l=this,u=t.split(/[\r\n]+/g),c=n(u),h=[];a(c[0],h);const f=o(c);return{skeleton:new OU(h),clip:f}}}const lj=new xd,bT=new Y;class alt extends S9t{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new mi(t,3)),this.setAttribute("uv",new mi(n,2))}applyMatrix4(t){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(t),r.applyMatrix4(t),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let n;t instanceof Float32Array?n=t:Array.isArray(t)&&(n=new Float32Array(t));const r=new z3(n,6,1);return this.setAttribute("instanceStart",new Cu(r,3,0)),this.setAttribute("instanceEnd",new Cu(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let n;t instanceof Float32Array?n=t:Array.isArray(t)&&(n=new Float32Array(t));const r=new z3(n,6,1);return this.setAttribute("instanceColorStart",new Cu(r,3,0)),this.setAttribute("instanceColorEnd",new Cu(r,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new c9t(t.geometry)),this}fromLineSegments(t){const n=t.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xd);const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;t!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(t),lj.setFromBufferAttribute(n),this.boundingBox.union(lj))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new O0),this.boundingBox===null&&this.computeBoundingBox();const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(t!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let a=0,o=t.count;a<o;a++)bT.fromBufferAttribute(t,a),i=Math.max(i,r.distanceToSquared(bT)),bT.fromBufferAttribute(n,a),i=Math.max(i,r.distanceToSquared(bT));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}Kt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ee(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};go.line={uniforms:PU.merge([Kt.common,Kt.fog,Kt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class zU extends lh{constructor(t){super({type:"LineMaterial",uniforms:PU.clone(go.line.uniforms),vertexShader:go.line.vertexShader,fragmentShader:go.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(t)}get color(){return this.uniforms.diffuse.value}set color(t){this.uniforms.diffuse.value=t}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(t){this.uniforms.linewidth&&(this.uniforms.linewidth.value=t)}get dashed(){return"USE_DASH"in this.defines}set dashed(t){t===!0!==this.dashed&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(t){this.uniforms.dashScale.value=t}get dashSize(){return this.uniforms.dashSize.value}set dashSize(t){this.uniforms.dashSize.value=t}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(t){this.uniforms.dashOffset.value=t}get gapSize(){return this.uniforms.gapSize.value}set gapSize(t){this.uniforms.gapSize.value=t}get opacity(){return this.uniforms.opacity.value}set opacity(t){this.uniforms&&(this.uniforms.opacity.value=t)}get resolution(){return this.uniforms.resolution.value}set resolution(t){this.uniforms.resolution.value.copy(t)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(t){this.defines&&(t===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1))}}const uj=new Y,cj=new Y,na=new si,ra=new si,Zl=new si,XP=new Y,jP=new cr,aa=new F9t,hj=new Y,ST=new xd,wT=new O0,Jl=new si;let bu,ov;function fj(e,t,n){return Jl.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),Jl.multiplyScalar(1/Jl.w),Jl.x=ov/n.width,Jl.y=ov/n.height,Jl.applyMatrix4(e.projectionMatrixInverse),Jl.multiplyScalar(1/Jl.w),Math.abs(Math.max(Jl.x,Jl.y))}function $9t(e,t){const n=e.matrixWorld,r=e.geometry,i=r.attributes.instanceStart,a=r.attributes.instanceEnd,o=Math.min(r.instanceCount,i.count);for(let s=0,l=o;s<l;s++){aa.start.fromBufferAttribute(i,s),aa.end.fromBufferAttribute(a,s),aa.applyMatrix4(n);const u=new Y,c=new Y;bu.distanceSqToSegment(aa.start,aa.end,c,u),c.distanceTo(u)<ov*.5&&t.push({point:c,pointOnLine:u,distance:bu.origin.distanceTo(c),object:e,face:null,faceIndex:s,uv:null,uv1:null})}}function X9t(e,t,n){const r=t.projectionMatrix,a=e.material.resolution,o=e.matrixWorld,s=e.geometry,l=s.attributes.instanceStart,u=s.attributes.instanceEnd,c=Math.min(s.instanceCount,l.count),h=-t.near;bu.at(1,Zl),Zl.w=1,Zl.applyMatrix4(t.matrixWorldInverse),Zl.applyMatrix4(r),Zl.multiplyScalar(1/Zl.w),Zl.x*=a.x/2,Zl.y*=a.y/2,Zl.z=0,XP.copy(Zl),jP.multiplyMatrices(t.matrixWorldInverse,o);for(let f=0,d=c;f<d;f++){if(na.fromBufferAttribute(l,f),ra.fromBufferAttribute(u,f),na.w=1,ra.w=1,na.applyMatrix4(jP),ra.applyMatrix4(jP),na.z>h&&ra.z>h)continue;if(na.z>h){const y=na.z-ra.z,x=(na.z-h)/y;na.lerp(ra,x)}else if(ra.z>h){const y=ra.z-na.z,x=(ra.z-h)/y;ra.lerp(na,x)}na.applyMatrix4(r),ra.applyMatrix4(r),na.multiplyScalar(1/na.w),ra.multiplyScalar(1/ra.w),na.x*=a.x/2,na.y*=a.y/2,ra.x*=a.x/2,ra.y*=a.y/2,aa.start.copy(na),aa.start.z=0,aa.end.copy(ra),aa.end.z=0;const v=aa.closestPointToPointParameter(XP,!0);aa.at(v,hj);const g=mp.lerp(na.z,ra.z,v),m=g>=-1&&g<=1,_=XP.distanceTo(hj)<ov*.5;if(m&&_){aa.start.fromBufferAttribute(l,f),aa.end.fromBufferAttribute(u,f),aa.start.applyMatrix4(o),aa.end.applyMatrix4(o);const y=new Y,x=new Y;bu.distanceSqToSegment(aa.start,aa.end,x,y),n.push({point:x,pointOnLine:y,distance:bu.origin.distanceTo(x),object:e,face:null,faceIndex:f,uv:null,uv1:null})}}}class j9t extends bi{constructor(t=new alt,n=new zU({color:Math.random()*16777215})){super(t,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,n=t.attributes.instanceStart,r=t.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,s=0,l=n.count;o<l;o++,s+=2)uj.fromBufferAttribute(n,o),cj.fromBufferAttribute(r,o),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+uj.distanceTo(cj);const a=new z3(i,2,1);return t.setAttribute("instanceDistanceStart",new Cu(a,1,0)),t.setAttribute("instanceDistanceEnd",new Cu(a,1,1)),this}raycast(t,n){const r=this.material.worldUnits,i=t.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const a=t.params.Line2!==void 0&&t.params.Line2.threshold||0;bu=t.ray;const o=this.matrixWorld,s=this.geometry,l=this.material;ov=l.linewidth+a,s.boundingSphere===null&&s.computeBoundingSphere(),wT.copy(s.boundingSphere).applyMatrix4(o);let u;if(r)u=ov*.5;else{const h=Math.max(i.near,wT.distanceToPoint(bu.origin));u=fj(i,h,l.resolution)}if(wT.radius+=u,bu.intersectsSphere(wT)===!1)return;s.boundingBox===null&&s.computeBoundingBox(),ST.copy(s.boundingBox).applyMatrix4(o);let c;if(r)c=ov*.5;else{const h=Math.max(i.near,ST.distanceToPoint(bu.origin));c=fj(i,h,l.resolution)}ST.expandByScalar(c),bu.intersectsBox(ST)!==!1&&(r?$9t(this,n):X9t(this,i,n))}}class V3 extends alt{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const n=t.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=t[i],r[2*i+1]=t[i+1],r[2*i+2]=t[i+2],r[2*i+3]=t[i+3],r[2*i+4]=t[i+4],r[2*i+5]=t[i+5];return super.setPositions(r),this}setColors(t){const n=t.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=t[i],r[2*i+1]=t[i+1],r[2*i+2]=t[i+2],r[2*i+3]=t[i+3],r[2*i+4]=t[i+4],r[2*i+5]=t[i+5];return super.setColors(r),this}fromLine(t){const n=t.geometry;return this.setPositions(n.attributes.position.array),this}}class Y9t extends j9t{constructor(t=new V3,n=new zU({color:Math.random()*16777215})){super(t,n),this.isLine2=!0,this.type="Line2"}}class q9t{constructor(t){this.scene=t,this.mixer=null,this.action=null,this.globalResult=null,this.animationClip=null,this.sphereMeshes=new Go,this.lineMeshes=new Go,this.newParent=new Go,this.boneNames=[],this.boneHierarchy=[],this.jointIndex=null,this.positions=new Float32Array([1,1,1,1,1,1]),this.matLine=new zU({color:0,linewidth:1,worldUnits:!0}),this.startPosition=new Y,this.endPosition=new Y,this.newPosition=new Y(0,0,0),this.label=null,this.plotLabel=null,this.boundingBox=null,this.boundingSphere=null,this.boundingEllipsoid=null,this.centerOfMass=null,this.balanceIndicator=null,this.projectedCoM=null,this.supportPolygon=null,this.isBalanced=!1,this.descriptorsGroup=new Go,this.activeDescriptor="none",this.distanceTracker=null,this.pathPoints=[],this.totalDistance=0,this.distanceText=null,this.lastTrackedPosition=null,this.distanceTrackingActive=!1}loadSkeleton(t){const n=new W9t,r=this.activeDescriptor;this.cleanupDescriptors(!0),this.descriptorsGroup&&(this.scene.children.includes(this.descriptorsGroup)&&this.scene.remove(this.descriptorsGroup),this.newParent&&this.newParent.children.includes(this.descriptorsGroup)&&this.newParent.remove(this.descriptorsGroup),this.descriptorsGroup=new Go),n.load(t,i=>{this.globalResult=i,this.animationClip=i.clip;const a=90,s=5/a;this.cutFirstFrames(i.clip,s),this.setupMixer(i);const u=1/a;this.mixer.setTime(u),setTimeout(()=>{this.createSphereMeshes(),this.createBoneMeshes()},1e3),setTimeout(()=>{this.reCenter(),r!=="none"&&setTimeout(()=>{console.log(`Re-applying descriptor: ${r}`),this.setActiveDescriptor(r)},500)},1e3)})}cleanupDescriptors(t=!1){if(console.log("Cleaning up descriptors",t?"(full cleanup)":""),this.descriptorsGroup)for(;this.descriptorsGroup.children.length>0;){const n=this.descriptorsGroup.children[0];this.descriptorsGroup.remove(n),n.geometry&&n.geometry.dispose(),n.material&&(Array.isArray(n.material)?n.material.forEach(r=>r.dispose()):n.material.dispose())}this.boundingBox=null,this.boundingSphere=null,this.boundingEllipsoid=null,t&&(this.activeDescriptor="none")}async setupMixer(t){this.mixer=new B9t(t.skeleton.bones[0]),this.action=this.mixer.clipAction(t.clip),this.action.play(),this.action.clampWhenFinished=!1}cutFirstFrames(t,n){t.tracks.forEach(r=>{let i=r.times,a=r.values,o=a.length/i.length,s=i.findIndex(l=>l>=n);s===-1&&(s=i.length),r.times=i.slice(s).map(l=>l-n),r.values=a.slice(s*o)}),t.duration-=n}async createSphereMeshes(){let t;function n(r){let i=0,a=r;for(;a.parent&&a.parent.type!=="Scene";)a=a.parent,i++;return i}await Promise.all(this.globalResult.skeleton.bones.map(async(r,i,a)=>{const o=n(r);if(r.name==="ENDSITE"&&i>0){const u=a[i-1].name;r.name=`${u}_end`}r.name==="LeftFootToe_end"||r.name==="RightFootToe_end"?t=new ou(0,32,32):o>=9?(t=new ou(1.2,32,32),t=new ou(1.2,32,32)):t=new ou(3,32,32);const s=new dl({color:1334943}),l=new bi(t,s);l.name=r.name,r.getWorldPosition(l.position),this.sphereMeshes.add(l),this.boneNames.push(r.name),r.name.endsWith("end")||this.boneHierarchy.push({name:r.name,depth:o})})),this.jointIndex=this.boneNames.reduce((r,i,a)=>(r[i]=a,r),{}),this.boneIndex=this.boneNames.reduce((r,i,a)=>(i.endsWith("_end")||(r[i]=r.hasOwnProperty("lastIndex")?r.lastIndex+1:a,r.lastIndex=r[i]),r),{}),delete this.boneIndex.lastIndex,await new Promise(r=>setTimeout(r,50)),this.sphereMeshes.children[this.jointIndex[yr()]].material.color.set("red")}createBoneMeshes(){this.globalResult.skeleton.bones.forEach(t=>{const n=new V3;n.setPositions(this.positions);const r=new Y9t(n,this.matLine);r.frustumCulled=!1,r.computeLineDistances(),r.scale.set(1,1,1),this.matLine.linewidth=2,t.parent&&(t.getWorldPosition(this.startPosition),t.parent.getWorldPosition(this.endPosition),this.positions.set([this.startPosition.x,this.startPosition.y,this.startPosition.z,this.endPosition.x,this.endPosition.y,this.endPosition.z],0),t.name==="Hips"&&(r.visible=!1),t.name==="Spine"&&(r.visible=!1),r.geometry.setPositions(this.positions),this.lineMeshes.add(r))})}updateSpherePositions(){this.globalResult.skeleton.bones.forEach((t,n)=>{this.sphereMeshes.children[n]&&t.getWorldPosition(this.sphereMeshes.children[n].position)})}updateLinePositions(){this.globalResult.skeleton.bones.forEach((t,n)=>{if(t.parent&&this.lineMeshes.children[n]){t.getWorldPosition(this.startPosition),t.parent.getWorldPosition(this.endPosition);const r=this.lineMeshes.children[n];r&&r.geometry instanceof V3?(r.geometry.attributes.instanceStart.setXYZ(0,this.startPosition.x,this.startPosition.y,this.startPosition.z),r.geometry.attributes.instanceEnd.setXYZ(0,this.endPosition.x,this.endPosition.y,this.endPosition.z),r.geometry.attributes.instanceStart.needsUpdate=!0,r.geometry.attributes.instanceEnd.needsUpdate=!0):console.error("LineGeometry or lineMesh not found or invalid for index:",n)}})}reCenter(){this.globalResult.skeleton.bones[0].scale.set(.5,.5,.5),this.mixer.timeScale=0,this.mixer.setTime(0);let t=1/0,n=null;this.globalResult.skeleton.bones.forEach(i=>{let a=new Y;i.getWorldPosition(a);let o=Math.abs(a.y-this.newPosition.y);o<t&&(t=o,n=i)}),this.displacement=new Y().subVectors(this.newPosition,this.globalResult.skeleton.bones[0].position),this.displacement.y+=t,this.sphereMeshes.position.add(this.displacement),this.lineMeshes.position.add(this.displacement);const r=this.sphereMeshes.getObjectByName(n.name);if(r){const i=new Y,a=new Y,o=new Y(0,0,0);n.getWorldPosition(a),r.getWorldPosition(i);const s=i.y-o.y,l=i.y-a.y,u=-s+l/2;console.log("Distance from sphere to origin (y-axis):",s),console.log("Distance from sphere to closestBone (y-axis):",l),console.log("Total Distance (y-axis, addition):",u),this.sphereMeshes.position.add(new Y(0,u,0)),this.lineMeshes.position.add(new Y(0,u,0)),this.newParent.add(this.sphereMeshes),this.newParent.add(this.lineMeshes),this.descriptorsGroup&&(this.scene.children.includes(this.descriptorsGroup)&&this.scene.remove(this.descriptorsGroup),this.descriptorsGroup.position.set(0,0,0),this.descriptorsGroup.rotation.set(0,0,0),this.descriptorsGroup.scale.set(1,1,1),this.newParent.add(this.descriptorsGroup),this.activeDescriptor!=="none"&&this.setActiveDescriptor(this.activeDescriptor)),this.scene.add(this.newParent);const h=this.globalResult.skeleton.bones[0].rotation.clone(),f=new Y(0,0,-1);f.applyEuler(h);const d=Math.atan2(f.x,f.z),p=new Xu(0,-d,0);this.newParent.rotation.copy(p),console.log(" Local rotation of Hips applied to sphereMeshes without position shifting."),console.log("hips rotation before: ",this.globalResult.skeleton.bones[10].rotation),console.log("hips rotation after: ",this.sphereMeshes.children[10].rotation),console.log("hips rotation after: ",this.sphereMeshes.children[10])}}calculateSpeed(){const t=this.jointIndex[yr()];let r=this.globalResult.skeleton.bones[t];if(!r){console.error("Bone not found for speed calculation");return}let i=this.animationClip;const a=this.boneIndex[yr()]*2;let o=i.tracks[a+1];if(!o){console.error("No rotation track found for speed calculation");return}let s=[],l=[],u=[],c=1/90;for(let h=0;h<o.times.length;h++){let f=o.times[h];this.mixer.setTime(f),this.mixer.update(c),r.updateMatrixWorld(!0);let d=new Y;r.getWorldPosition(d),u.push(d.clone())}for(let h=0;h<u.length;h++)if(h>0&&h<u.length-1){let f=u[h-1],d=u[h+1],p=c*2;const v=(d.x-f.x)/p,g=(d.y-f.y)/p,m=(d.z-f.z)/p,_=Math.sqrt(v*v+g*g+m*m),y=Math.sqrt(v*v+m*m);s.push(y),l.push(_)}else if(h===0&&u.length>1){let f=c;const d=(u[1].x-u[0].x)/f,p=(u[1].y-u[0].y)/f,v=(u[1].z-u[0].z)/f,g=Math.sqrt(d*d+p*p+v*v),m=Math.sqrt(d*d+v*v);s.push(m),l.push(g)}else if(h===u.length-1&&u.length>1){let f=c;const d=(u[h].x-u[h-1].x)/f,p=(u[h].y-u[h-1].y)/f,v=(u[h].z-u[h-1].z)/f,g=Math.sqrt(d*d+p*p+v*v),m=Math.sqrt(d*d+v*v);s.push(m),l.push(g)}else s.push(0),l.push(0);r3t(s),i3t(l)}calculateAcceleration(){const t=this.jointIndex[yr()];let r=this.globalResult.skeleton.bones[t];if(!r){console.error("Bone not found for acceleration calculation");return}let i=this.animationClip;const a=this.boneIndex[yr()]*2;let o=i.tracks[a+1];if(!o){console.error("No rotation track found for acceleration calculation");return}let s=[],l=[],u=[],c=[],h=[];const f=1/90,d=f*f;for(let p=0;p<o.times.length;p++){let v=o.times[p];this.mixer.setTime(v),this.mixer.update(f),r.updateMatrixWorld(!0);let g=new Y;r.getWorldPosition(g),h.push(g.clone())}for(let p=0;p<h.length;p++)if(p>0&&p<h.length-1){const v=h[p-1],g=h[p],m=h[p+1],_=(m.x-2*g.x+v.x)/d,y=(m.y-2*g.y+v.y)/d,x=(m.z-2*g.z+v.z)/d,S=Math.sqrt(_*_+y*y+x*x);s.push(_),l.push(y),u.push(x),c.push(S)}else s.push(0),l.push(0),u.push(0),c.push(0);a3t(s),o3t(l),s3t(u),l3t(c)}calculateJerk(){const t=this.jointIndex[yr()];let r=this.globalResult.skeleton.bones[t];if(!r){console.error("Bone not found for jerk calculation");return}let i=this.animationClip;const a=this.boneIndex[yr()]*2;let o=i.tracks[a+1];if(!o){console.error("No rotation track found for jerk calculation");return}let s=[];const l=1/90,u=l;for(let v=0;v<o.times.length;v++){let g=o.times[v];this.mixer.setTime(g),this.mixer.update(l),r.updateMatrixWorld(!0);let m=new Y;r.getWorldPosition(m),s.push(m.clone())}const c=s.length;let h=new Array(c).fill(0),f=new Array(c).fill(0),d=new Array(c).fill(0),p=new Array(c).fill(0);for(let v=2;v<c-2;v++){const g=s[v+2],m=s[v+1],_=s[v-1],y=s[v-2],x=2*Math.pow(u,3);h[v]=(g.x-2*m.x+2*_.x-y.x)/x,f[v]=(g.y-2*m.y+2*_.y-y.y)/x,d[v]=(g.z-2*m.z+2*_.z-y.z)/x,p[v]=Math.sqrt(h[v]*h[v]+f[v]*f[v]+d[v]*d[v])}for(let v=0;v<2;v++){const g=s[v],m=s[v+1],_=s[v+2],y=s[v+3];h[v]=(y.x-3*_.x+3*m.x-g.x)/Math.pow(u,3),f[v]=(y.y-3*_.y+3*m.y-g.y)/Math.pow(u,3),d[v]=(y.z-3*_.z+3*m.z-g.z)/Math.pow(u,3),p[v]=Math.sqrt(h[v]*h[v]+f[v]*f[v]+d[v]*d[v]);const x=c-v-1,S=s[x],b=s[x-1],w=s[x-2],A=s[x-3];h[x]=(-A.x+3*w.x-3*b.x+S.x)/Math.pow(u,3),f[x]=(-A.y+3*w.y-3*b.y+S.y)/Math.pow(u,3),d[x]=(-A.z+3*w.z-3*b.z+S.z)/Math.pow(u,3),p[x]=Math.sqrt(h[x]*h[x]+f[x]*f[x]+d[x]*d[x])}u3t(h),c3t(f),h3t(d),f3t(p)}getTimeSeries(t="RightArm"){const n=this.boneIndex[yr()]*2,r=this.jointIndex[yr()];console.log("uploadedFile selected Joint ",yr()),console.log("uploadedFile selected Joint Index ",r);let a=this.globalResult.skeleton.bones[r];if(!a)return console.error("Bone not found:"),[];let s=this.animationClip.tracks[n+1];if(console.log("Selected Bone: ",yr(),"    ",s,a),!s)return console.error("No position track found at index",r),[];let l=[],u=[],c=[],h=[],f=[],d=[];for(let p=0;p<s.times.length;p++){let v=s.times[p];this.mixer.setTime(v),this.mixer.update(1/90),a.updateMatrixWorld(!0),a.updateMatrix();let g=new Y;a.getWorldPosition(g),l.push(g.x),u.push(g.y),c.push(g.z);let m=a.rotation;h.push(mp.radToDeg(m.x)),f.push(mp.radToDeg(m.y)),d.push(mp.radToDeg(m.z))}return this.calculateSpeed(),this.calculateAcceleration(),this.calculateJerk(),[l,u,c,h,f,d]}async createDataframes(){const t=["Spine","Spine1","Spine2","Spine3","Hips","Neck","Head","LeftArm","LeftForeArm","RightArm","RightForeArm","LeftShoulder","LeftShoulder2","RightShoulder","RightShoulder2","LeftUpLeg","LeftLeg","RightUpLeg","RightLeg"];let n=[],r=[];return t.forEach(i=>{const a=this.jointIndex[i];let s=this.globalResult.skeleton.bones[a];if(!s){console.error("Bone not found:",i);return}let l=this.animationClip;const u=this.boneIndex[i]*2;let c=l.tracks[u+1];if(!c){console.error("No rotation track found for",i);return}let h=[],f=[],d=[],p=[],v=[],g=[];this.mixer.timeScale=1;for(let m=0;m<c.times.length;m++){let _=c.times[m];this.mixer.setTime(_),this.mixer.update(1/90),s.updateMatrixWorld(!0),s.updateMatrix();let y=new Y;s.getWorldPosition(y),p.push(y.x),v.push(y.y),g.push(y.z);let x=s.rotation;h.push(mp.radToDeg(x.x)),f.push(mp.radToDeg(x.y)),d.push(mp.radToDeg(x.z))}for(let m=0;m<h.length;m++)n[m]||(n[m]=[]),r[m]||(r[m]=[]),n[m].push(h[m],f[m],d[m]),r[m].push(p[m],v[m],g[m])}),[n]}addListeners(){document.addEventListener("mousemove",t=>this.onMouseMove(t)),document.addEventListener("click",t=>{let n="";this.mouseJointHover!==null&&(av().forEach(r=>{r.endsWith(this.mouseJointHover[1])&&(n=r)}),console.log("yo: ",this.mouseJointHover,n),WA(n),this.sphereMeshes.children[this.jointIndex[yr()]].material.color.set(1334943),HA(this.mouseJointHover[1]),this.sphereMeshes.children[this.jointIndex[yr()]].material.color.set("red"))})}onMouseMove(t){function n(h,f){return h.split(" ").map(d=>`<span style="${f}">${d}</span>`).join(" ")}const r=new Ee;var i=s3().renderer.domElement.getBoundingClientRect();r.x=(t.clientX-i.left)/(i.right-i.left)*2-1,r.y=-((t.clientY-i.top)/(i.bottom-i.top))*2+1;const a=new k9t;a.setFromCamera(r,s3().camera);const o=a.intersectObjects(this.sphereMeshes.children);t.preventDefault();const s=this.jointIndex[yr()];console.log("idx: ",s),this.sphereMeshes.children[s].material.color.set("red");const l=document.getElementById("tooltip");let u=!1;l.style.display="block",this.mouseJointHover=null,this.sphereMeshes.children.forEach((h,f)=>{if(f!==this.jointIndex[yr()]&&h.material.color.set(1334943),o.length!==0){const d=av().some(p=>p.includes(o[0].object.name));if(o[0].object.name===h.name){d?f===this.jointIndex[yr()]?h.material.color.set(11730944):h.material.color.set(65280):h.material.color.set(1067646);const p=new Y;h.getWorldPosition(p),l.innerHTML=`<div style="text-align: left; font-weight: 450;">Name: ${n(this.boneNames[f],"color: black; font-weight: 550;")}</div>
					<div style=" font-weight: 450;" > X: ${n(h.position.x.toFixed(2),"color: red;")}, Y: ${n(h.position.y.toFixed(2),"color: green;")}, Z: ${n(h.position.z.toFixed(2),"color: blue;")},
						X: ${n(p.x.toFixed(2),"color: red;")}, 
   						Y: ${n(p.y.toFixed(2),"color: green;")}, 
    					Z: ${n(p.z.toFixed(2),"color: blue;")}
					
					</div>`,l.style.left=`${(t.clientX+15)/Ms()}px`,l.style.top=`${(t.clientY+15)/Ms()}px`,l.style.visibility="visible",u=!0,d&&(this.mouseJointHover=[av()[f],this.boneNames[f]])}}}),t3t(h=>{const f=[...h];return f[this.label-1]=u,f}),QNt().every(h=>h===!1)&&(l.style.visibility="hidden")}createBoundingBox(){if(this.boundingBox&&(this.descriptorsGroup.remove(this.boundingBox),this.boundingBox=null),!this.sphereMeshes.children||this.sphereMeshes.children.length===0)return console.warn("No skeleton joints found for creating bounding box"),null;const t=[];this.sphereMeshes.children.forEach(u=>{const c=new Y;u.getWorldPosition(c),this.descriptorsGroup.parent.worldToLocal(c),t.push(c)});const n=new Y(1/0,1/0,1/0),r=new Y(-1/0,-1/0,-1/0);t.forEach(u=>{n.x=Math.min(n.x,u.x),n.y=Math.min(n.y,u.y),n.z=Math.min(n.z,u.z),r.x=Math.max(r.x,u.x),r.y=Math.max(r.y,u.y),r.z=Math.max(r.z,u.z)});const i=new Y().addVectors(n,r).multiplyScalar(.5),a=new Y().subVectors(r,n),o=new Av(a.x,a.y,a.z),s=new dl({color:16711680,wireframe:!0,transparent:!0,opacity:.7});this.boundingBox=new bi(o,s),this.boundingBox.position.copy(i),this.descriptorsGroup.add(this.boundingBox);const l=`${a.x.toFixed(2)} x ${a.y.toFixed(2)} x ${a.z.toFixed(2)}`;return console.log("Bounding Box Dimensions:",l),this.boundingBox}createBoundingSphere(t=!0){if(this.boundingSphere&&(this.descriptorsGroup.remove(this.boundingSphere),this.boundingSphere=null),!this.sphereMeshes.children||this.sphereMeshes.children.length===0)return console.warn("No skeleton joints found for creating bounding sphere"),null;const n=new ou(1,16,12),r=new dl({color:255,wireframe:!0,transparent:!0,opacity:.7});return this.boundingSphere=new bi(n,r),this.descriptorsGroup.add(this.boundingSphere),this.updateBoundingSphere(t),this.boundingSphere}updateBoundingSphere(t=!0){if(!this.boundingSphere)return null;const n=[];if(this.sphereMeshes.children.forEach(o=>{if(!o.visible||o.geometry.parameters.radius<.1)return;const s=new Y;o.getWorldPosition(s),this.descriptorsGroup.parent.worldToLocal(s),n.push(s)}),n.length<2)return console.warn("Not enough valid joint positions for bounding sphere"),null;const r=new Y;n.forEach(o=>{r.add(o)}),r.divideScalar(n.length);let i=0;n.forEach(o=>{const s=r.distanceToSquared(o);i=Math.max(i,s)});const a=Math.sqrt(i)*1.05;return this.boundingSphere.position.copy(r),this.boundingSphere.scale.set(a,a,a),this.boundingSphere}createBoundingEllipsoid(){if(this.boundingEllipsoid&&(this.descriptorsGroup.remove(this.boundingEllipsoid),this.boundingEllipsoid=null),this.ellipsoidAxes&&(this.ellipsoidAxes.forEach(d=>{this.descriptorsGroup.remove(d)}),this.ellipsoidAxes=null),!this.sphereMeshes.children||this.sphereMeshes.children.length===0)return console.warn("No skeleton joints found for creating bounding ellipsoid"),null;const t=[];if(this.sphereMeshes.children.forEach(d=>{if(!d.visible||d.geometry.parameters.radius<.1)return;const p=new Y;d.getWorldPosition(p),this.descriptorsGroup.parent.worldToLocal(p),t.push(p)}),t.length<3)return console.warn("Not enough valid joint positions for bounding ellipsoid"),null;const n=new Y;t.forEach(d=>{n.add(d)}),n.divideScalar(t.length);const r=[[0,0,0],[0,0,0],[0,0,0]];t.forEach(d=>{const p=d.x-n.x,v=d.y-n.y,g=d.z-n.z;r[0][0]+=p*p,r[1][1]+=v*v,r[2][2]+=g*g,r[0][1]+=p*v,r[0][2]+=p*g,r[1][0]+=v*p,r[1][2]+=v*g,r[2][0]+=g*p,r[2][1]+=g*v});for(let d=0;d<3;d++)for(let p=0;p<3;p++)r[d][p]/=t.length;const i=[r[0][0],r[1][1],r[2][2]],a=1.5,o=[Math.sqrt(i[0])*a,Math.sqrt(i[1])*a,Math.sqrt(i[2])*a],s=Math.max(...o)*.1;o[0]=Math.max(o[0],s),o[1]=Math.max(o[1],s),o[2]=Math.max(o[2],s);const l=new ou(1,24,16),u=new dl({color:65280,wireframe:!0,transparent:!0,opacity:.7});this.boundingEllipsoid=new bi(l,u),this.boundingEllipsoid.position.copy(n),this.boundingEllipsoid.scale.set(o[0],o[1],o[2]);let c=!1,h=0,f=0;if(t.forEach(d=>{const p=d.clone().sub(n),v=Math.pow(p.x/o[0],2)+Math.pow(p.y/o[1],2)+Math.pow(p.z/o[2],2);v>1&&(c=!0,f++,h=Math.max(h,v))}),c){const d=Math.sqrt(h)*1.02;o[0]*=d,o[1]*=d,o[2]*=d,this.boundingEllipsoid.scale.set(o[0],o[1],o[2]),console.log(`Expanded ellipsoid by factor ${d.toFixed(3)} to include ${f} points`)}return this.descriptorsGroup.add(this.boundingEllipsoid),this.boundingEllipsoid}updateGeometricDescriptors(){this.activeDescriptor==="box"&&this.boundingBox&&this.boundingBox.visible?this.createBoundingBox():this.activeDescriptor==="sphere"&&this.boundingSphere?this.updateBoundingSphere(!0):this.activeDescriptor==="ellipsoid"&&this.boundingEllipsoid&&this.boundingEllipsoid.visible&&this.createBoundingEllipsoid()}alignDescriptorsWithSkeleton(){if(!this.descriptorsGroup||!this.sphereMeshes||!this.sphereMeshes.children)return;const t=this.jointIndex.Hips||0;if(!this.sphereMeshes.children[t])return;const n=new Y;this.sphereMeshes.children[t].getWorldPosition(n),this.activeDescriptor==="box"?this.createBoundingBox():this.activeDescriptor==="sphere"?this.createBoundingSphere(!0):this.activeDescriptor==="ellipsoid"&&this.createBoundingEllipsoid()}setActiveDescriptor(t){console.log(`Setting active descriptor to: ${t}`),this.boundingBox&&(this.boundingBox.visible=!1),this.boundingSphere&&(this.boundingSphere.visible=!1),this.boundingEllipsoid&&(this.boundingEllipsoid.visible=!1),this.centerOfMass&&(this.centerOfMass.visible=!1),this.comConnections&&this.comConnections.forEach(n=>{n.visible=!1}),this.distanceTrackingActive=!1,this.distanceTracker&&(this.distanceTracker.visible=!1),this.activeDescriptor!==t&&this.cleanupDescriptors(),this.activeDescriptor=t,t==="box"?(this.boundingBox||this.createBoundingBox(),this.boundingBox&&(this.boundingBox.visible=!0)):t==="sphere"?(this.boundingSphere||this.createBoundingSphere(!0),this.boundingSphere&&(this.boundingSphere.visible=!0)):t==="ellipsoid"?(this.boundingEllipsoid||this.createBoundingEllipsoid(),this.boundingEllipsoid&&(this.boundingEllipsoid.visible=!0)):t==="com"?(this.centerOfMass||this.createCenterOfMass(),this.centerOfMass&&(this.centerOfMass.visible=!0,this.comConnections&&this.comConnections.forEach(n=>{n.visible=!0}))):t==="balance"?this.createBalance():t==="distance"&&(this.distanceTracker?this.resetDistanceTracking():this.initDistanceTracking(),this.distanceTrackingActive=!0,this.distanceTracker.visible=!0),this.descriptorsGroup&&!this.newParent.children.includes(this.descriptorsGroup)&&this.newParent.add(this.descriptorsGroup)}update(t){this.mixer&&this.mixer.update(t);try{this.updateSpherePositions(),this.updateLinePositions(),this.activeDescriptor!=="none"&&(this.updateGeometricDescriptors(),this.activeDescriptor==="com"&&this.updateCenterOfMass(),this.activeDescriptor==="balance"&&this.updateBalance(),this.activeDescriptor==="distance"&&this.distanceTrackingActive&&this.updateDistanceTracking())}catch(n){console.error("Failed to update skeleton:",n)}}setAnimationTime(t){this.mixer&&(this.mixer.timeScale===1&&this.mixer.setTime(t),this.mixer.timeScale===0&&(this.mixer.timeScale=1,this.mixer.setTime(t),this.mixer.timeScale=0))}getAnimationDuration(){return this.mixer&&this.action&&this.action.getClip()?this.action.getClip().duration:0}play(){$A(!0),this.mixer&&(this.mixer.timeScale=1,this.action.paused=!1),console.log("mixer: ",this.mixer)}stop(){$A(!1),this.mixer&&(this.mixer.timeScale=0)}createCenterOfMass(){if(this.centerOfMass&&(this.descriptorsGroup.remove(this.centerOfMass),this.centerOfMass=null),!this.sphereMeshes.children||this.sphereMeshes.children.length===0)return console.warn("No skeleton joints found for creating center of mass"),null;const t={Hips:.497,LeftShoulder:.28,RightShoulder:.28,LeftArm:.16,RightArm:.16,LeftHand:.06,RightHand:.06,LeftUpLeg:.1,RightUpLeg:.1,LeftLeg:.465,RightLeg:.465,LeftFoot:.145,RightFoot:.145,Head:.081},n={LeftForeArm:"LeftArm",RightForeArm:"RightArm",LeftForeHand:"LeftHand",RightForeHand:"RightHand",LeftForeArm_end:"LeftHand",RightForeArm_end:"RightHand",LeftLeg_end:"LeftFoot",RightLeg_end:"RightFoot"},r=new Y(0,0,0);let i=0;if(this.sphereMeshes.children.forEach(s=>{const l=s.name;let u=0;if(t[l]!==void 0?u=t[l]:n[l]&&t[n[l]]!==void 0&&(u=t[n[l]]),u>0){const c=new Y;s.getWorldPosition(c),this.descriptorsGroup.parent.worldToLocal(c),r.x+=c.x*u,r.y+=c.y*u,r.z+=c.z*u,i+=u}}),i>0)r.divideScalar(i);else return console.warn("No valid weighted joints found for Center of Mass calculation"),null;const a=new ou(3,16,16),o=new dl({color:16746496,transparent:!0,opacity:.7});return this.centerOfMass=new bi(a,o),this.centerOfMass.position.copy(r),this.descriptorsGroup.add(this.centerOfMass),this.createCoMConnections(r),console.log("Center of Mass calculated at:",r),this.centerOfMass}createCoMConnections(t){this.comConnections&&this.comConnections.forEach(r=>{this.descriptorsGroup.remove(r)}),this.comConnections=[],["Hips","Head","LeftHand","RightHand","LeftFoot","RightFoot"].forEach(r=>{const i=this.sphereMeshes.children.find(a=>a.name===r||a.name===r+"_end"||r==="LeftHand"&&a.name==="LeftForeArm_end"||r==="RightHand"&&a.name==="RightForeArm_end"||r==="LeftFoot"&&a.name==="LeftLeg_end"||r==="RightFoot"&&a.name==="RightLeg_end");if(i){const a=new Y;i.getWorldPosition(a),this.descriptorsGroup.parent.worldToLocal(a);const o=[t,a],s=new Ci().setFromPoints(o),l=new Am({color:16746496,transparent:!0,opacity:.4}),u=new mx(s,l);this.descriptorsGroup.add(u),this.comConnections.push(u)}})}updateCenterOfMass(){this.activeDescriptor==="com"&&this.centerOfMass&&this.createCenterOfMass()}createBalance(){this.balanceIndicator&&(this.descriptorsGroup.remove(this.balanceIndicator),this.balanceIndicator=null),this.supportPolygon&&(this.descriptorsGroup.remove(this.supportPolygon),this.supportPolygon=null),this.projectedCoM&&(this.descriptorsGroup.remove(this.projectedCoM),this.projectedCoM=null);const t=this.calculateCoMPosition();if(!t)return console.warn("Unable to calculate Center of Mass for balance determination"),null;const n=this.findGroundLevel();let r=this.createSupportPolygon(n);if(!r||r.length<3)return console.warn("Unable to create valid support polygon for balance determination"),null;const i=new Y(t.x,n,t.z);return this.isBalanced=this.pointInSupportPolygon(i,r),this.createBalanceVisualization(t,i,r,n),this.balanceIndicator}calculateCoMPosition(){if(!this.sphereMeshes.children||this.sphereMeshes.children.length===0)return null;const t={Hips:.497,LeftShoulder:.28,RightShoulder:.28,LeftArm:.16,RightArm:.16,LeftHand:.06,RightHand:.06,LeftUpLeg:.1,RightUpLeg:.1,LeftLeg:.465,RightLeg:.465,LeftFoot:.145,RightFoot:.145,Head:.081},n={LeftForeArm:"LeftArm",RightForeArm:"RightArm",LeftForeHand:"LeftHand",RightForeHand:"RightHand",LeftForeArm_end:"LeftHand",RightForeArm_end:"RightHand",LeftLeg_end:"LeftFoot",RightLeg_end:"RightFoot"},r=new Y(0,0,0);let i=0;return this.sphereMeshes.children.forEach(a=>{const o=a.name;let s=0;if(t[o]!==void 0?s=t[o]:n[o]&&t[n[o]]!==void 0&&(s=t[n[o]]),s>0){const l=new Y;a.getWorldPosition(l),this.descriptorsGroup.parent.worldToLocal(l),r.x+=l.x*s,r.y+=l.y*s,r.z+=l.z*s,i+=s}}),i>0?(r.divideScalar(i),r):null}findGroundLevel(){let t=1/0;return["LeftFoot","RightFoot","LeftLeg_end","RightLeg_end"].forEach(r=>{const i=this.sphereMeshes.children.find(a=>a.name===r||a.name.includes(r));if(i){const a=new Y;i.getWorldPosition(a),this.descriptorsGroup.parent.worldToLocal(a),t=Math.min(t,a.y)}}),t===1/0&&this.sphereMeshes.children.forEach(r=>{const i=new Y;r.getWorldPosition(i),this.descriptorsGroup.parent.worldToLocal(i),t=Math.min(t,i.y)}),t-2}createSupportPolygon(t){let n=null,r="";if(this.activeDescriptor==="balance")if(this.boundingBox&&this.boundingBox.visible)n=this.boundingBox,r="box";else if(this.boundingSphere&&this.boundingSphere.visible)n=this.boundingSphere,r="sphere";else if(this.boundingEllipsoid&&this.boundingEllipsoid.visible)n=this.boundingEllipsoid,r="ellipsoid";else{const a=this.createBoundingBox();n=a,r="box",a.visible=!1}else{const a=this.createBoundingBox();n=a,r="box",a.visible=!1}if(!n)return null;let i=[];if(r==="box"){const a=n,o=new Y;a.geometry.computeBoundingBox(),a.geometry.boundingBox.getSize(o),o.multiply(a.scale);const s=o.x/2,l=o.z/2;i=[new Y(a.position.x-s,t,a.position.z-l),new Y(a.position.x+s,t,a.position.z-l),new Y(a.position.x+s,t,a.position.z+l),new Y(a.position.x-s,t,a.position.z+l)]}else if(r==="sphere"){const a=n,o=a.scale.x,s=12;for(let l=0;l<s;l++){const u=l/s*Math.PI*2,c=a.position.x+Math.cos(u)*o,h=a.position.z+Math.sin(u)*o;i.push(new Y(c,t,h))}}else if(r==="ellipsoid"){const a=n,o=a.scale.x,s=a.scale.z,l=16;for(let u=0;u<l;u++){const c=u/l*Math.PI*2,h=a.position.x+Math.cos(c)*o,f=a.position.z+Math.sin(c)*s;i.push(new Y(h,t,f))}}return i}pointInSupportPolygon(t,n){let r=!1;for(let i=0,a=n.length-1;i<n.length;a=i++){const o=n[i].x,s=n[i].z,l=n[a].x,u=n[a].z;s>t.z!=u>t.z&&t.x<(l-o)*(t.z-s)/(u-s)+o&&(r=!r)}return r}createBalanceVisualization(t,n,r,i){const a=new Go;new Ci().setFromPoints(r);const s=[...r];r.length>0&&s.push(r[0].clone());const l=new Ci().setFromPoints(s),u=new Am({color:this.isBalanced?65280:16711680,linewidth:2});this.supportPolygon=new mx(l,u),a.add(this.supportPolygon);const c=new ou(3,16,16),h=new dl({color:this.isBalanced?65280:16711680,transparent:!0,opacity:.7});this.projectedCoM=new bi(c,h),this.projectedCoM.position.copy(n),a.add(this.projectedCoM);const f=[t,n],d=new Ci().setFromPoints(f),p=new Am({color:16777215,transparent:!0,opacity:.5}),v=new mx(d,p);a.add(v);const g=this.isBalanced?"BALANCED (1)":"UNBALANCED (0)";console.log(`Balance status: ${g} (CoM projection ${this.isBalanced?"inside":"outside"} support polygon)`);const m=10,_=new Av(m,m,m),y=new dl({color:this.isBalanced?65280:16711680,transparent:!0,opacity:.7});return this.balanceIndicator=new bi(_,y),this.balanceIndicator.position.set(t.x,t.y+50,t.z),a.add(this.balanceIndicator),this.descriptorsGroup.add(a),a}updateBalance(){this.activeDescriptor==="balance"&&this.createBalance()}initDistanceTracking(){this.distanceTracker&&this.descriptorsGroup.remove(this.distanceTracker),this.distanceTracker=new Go,this.descriptorsGroup.add(this.distanceTracker),this.pathPoints=[],this.pathColors=[],this.pathSpeeds=[],this.totalDistance=0,this.lastTrackedPosition=null,this.lastTrackedTime=performance.now()/1e3,this.distanceTrackingActive=!0,this.markerDistance=10,this.nextMarkerAt=this.markerDistance,this.lastAnimationTime=0;const t=this.findGroundLevel(),n=yr(),r=this.jointIndex[n]||0;if(!this.sphereMeshes.children[r])return console.error(`Selected joint ${n} not found for distance tracking`),null;const i=new Y;this.sphereMeshes.children[r].getWorldPosition(i),this.descriptorsGroup.parent.worldToLocal(i),i.y=t,this.lastTrackedPosition=i.clone(),this.pathPoints.push(i.clone()),this.pathSpeeds.push(0),this.pathColors.push(this.getColorFromSpeed(0));const a=300,o=new tS(a,a),s=new dl({color:15790320,transparent:!0,opacity:.2,side:yl,depthWrite:!1}),l=new bi(o,s);return l.rotation.x=Math.PI/2,l.position.y=t+.1,l.name="groundReferencePlane",this.distanceTracker.add(l),this.createDistanceInfoPanel(n,t),this.createPathVisualization(),this.distanceTracker}createDistanceInfoPanel(t,n){this.removeExistingHTMLPanel();const r=document.createElement("div");r.id="distance-tracker-hud",r.style.position="fixed",r.style.top="20px",r.style.right="auto",r.style.left="150px",r.style.padding="5px",r.style.backgroundColor="rgba(0, 0, 0, 0.7)",r.style.color="white",r.style.fontFamily="Arial, sans-serif",r.style.fontSize="14px",r.style.borderRadius="5px",r.style.zIndex="1000",r.style.textAlign="left",r.style.width="200px",r.style.border="1px solid rgba(0, 100, 200, 0.8)",r.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.5)",r.style.cursor="move",r.innerHTML=`
			<div style="background-color: rgba(0, 100, 200, 0.8); padding: 4px; border-radius: 4px 4px 0 0; text-align: center; font-weight: bold; cursor: move;" class="distance-tracker-header">
				Distance: ${t}
			</div>
			<div id="distance-value" style="padding: 4px; font-size: 16px;">
				Total: 0.00 units
			</div>
			<div id="speed-value" style="padding: 4px; color: rgb(100, 200, 255);">
				Speed: 0.00 units/s
			</div>
			<div style="padding: 4px; font-size: 11px;">
				Speed:
				<div style="width: 100%; height: 10px; background: linear-gradient(to right, blue, green, red);"></div>
			</div>
		`,document.body.appendChild(r),this.distanceDisplay=r,this.distanceValueElement=document.getElementById("distance-value"),this.speedValueElement=document.getElementById("speed-value"),this.makeDistancePanelDraggable(r)}makeDistancePanelDraggable(t){let n=0,r=0,i=0,a=0;const o=t.querySelector(".distance-tracker-header")||t;o.onmousedown=s;function s(c){c=c||window.event,c.preventDefault(),i=c.clientX,a=c.clientY,document.onmouseup=u,document.onmousemove=l}function l(c){c=c||window.event,c.preventDefault(),n=i-c.clientX,r=a-c.clientY,i=c.clientX,a=c.clientY,t.style.top=t.offsetTop-r+"px",t.style.left=t.offsetLeft-n+"px"}function u(){document.onmouseup=null,document.onmousemove=null}}removeExistingHTMLPanel(){const t=document.getElementById("distance-tracker-hud");t&&t.parentNode.removeChild(t)}roundRect(t,n,r,i,a,o){typeof o=="number"?o={tl:o,tr:o,br:o,bl:o}:o={tl:0,tr:0,br:0,bl:0,...o},t.beginPath(),t.moveTo(n+o.tl,r),t.lineTo(n+i-o.tr,r),t.quadraticCurveTo(n+i,r,n+i,r+o.tr),t.lineTo(n+i,r+a-o.br),t.quadraticCurveTo(n+i,r+a,n+i-o.br,r+a),t.lineTo(n+o.bl,r+a),t.quadraticCurveTo(n,r+a,n,r+a-o.bl),t.lineTo(n,r+o.tl),t.quadraticCurveTo(n,r,n+o.tl,r),t.closePath()}createPathVisualization(){const t=this.distanceTracker.getObjectByName("pathLine");t&&this.distanceTracker.remove(t);const n=new Go;if(n.name="pathLine",this.distanceTracker.add(n),!(this.pathPoints.length<2)){for(let r=1;r<this.pathPoints.length;r++){const i=new Ci().setFromPoints([this.pathPoints[r-1],this.pathPoints[r]]),a=new Am({color:this.pathColors[r-1],linewidth:3}),o=new mx(i,a);n.add(o)}this.createDistanceMarkers(n)}}createDistanceMarkers(t){const n=this.distanceTracker.getObjectByName("distanceMarkers");n&&this.distanceTracker.remove(n);const r=new Go;r.name="distanceMarkers",this.distanceTracker.add(r);let i=this.markerDistance,a=0;for(let o=1;o<this.pathPoints.length;o++){const s=this.pathPoints[o-1],l=this.pathPoints[o],u=s.distanceTo(l);if(a+u>=i){const c=(i-a)/u,h=new Y().lerpVectors(s,l,c),f=new NU(1,16),d=new dl({color:16776960,side:yl}),p=new bi(f,d);p.position.copy(h),p.rotation.x=-Math.PI/2,r.add(p),this.createDistanceLabel(r,h.clone(),i),i+=this.markerDistance}a+=u}}createDistanceLabel(t,n,r){const i=document.createElement("canvas");i.width=64,i.height=32;const a=i.getContext("2d");a.fillStyle="rgba(0, 0, 0, 0.7)",this.roundRect(a,0,0,i.width,i.height,5),a.fill(),a.font="bold 16px Arial",a.fillStyle="white",a.textAlign="center",a.fillText(`${r.toFixed(0)}`,i.width/2,i.height/2+5);const o=new u9t(i),s=new Qst({map:o,transparent:!0}),l=new a9t(s);l.position.copy(n),l.position.y+=3,l.scale.set(6,3,1),t.add(l)}getColorFromSpeed(t){const n=[{speed:0,color:new Dn(255)},{speed:20,color:new Dn(65280)},{speed:50,color:new Dn(16711680)}];for(let r=0;r<n.length-1;r++)if(t<=n[r+1].speed){const i=(t-n[r].speed)/(n[r+1].speed-n[r].speed);return new Dn().lerpColors(n[r].color,n[r+1].color,i)}return n[n.length-1].color}updateDistanceTracking(){if(!this.distanceTrackingActive||!this.distanceTracker)return;const t=yr(),n=this.jointIndex[t]||0;if(!this.sphereMeshes.children[n])return;const r=this.mixer?this.mixer.time:0;if(this.lastAnimationTime>0&&r<this.lastAnimationTime&&this.lastAnimationTime-r>.5){console.log("Animation loop detected - resetting distance tracking"),this.resetDistanceTracking();return}this.lastAnimationTime=r;const i=performance.now()/1e3,a=i-this.lastTrackedTime,o=new Y;this.sphereMeshes.children[n].getWorldPosition(o),this.descriptorsGroup.parent.worldToLocal(o);const s=this.findGroundLevel();if(o.y=s,this.lastTrackedPosition&&a>0){const l=new Y(this.lastTrackedPosition.x,0,this.lastTrackedPosition.z),u=new Y(o.x,0,o.z),c=l.distanceTo(u),h=c/a;c>.5&&(this.pathPoints.push(o.clone()),this.pathSpeeds.push(h),this.pathColors.push(this.getColorFromSpeed(h)),this.totalDistance+=c,this.lastTrackedPosition=o.clone(),this.lastTrackedTime=i,this.createPathVisualization(),this.updateDistanceInfoPanel(h))}}updateDistanceInfoPanel(t){if(this.distanceValueElement&&this.speedValueElement){this.distanceValueElement.textContent=`Total: ${this.totalDistance.toFixed(2)} units`,this.speedValueElement.textContent=`Speed: ${t.toFixed(2)} units/s`;let n="rgb(100, 200, 255)";t>=30?n="rgb(255, 100, 100)":t>=10&&(n="rgb(100, 255, 100)"),this.speedValueElement.style.color=n}}resetDistanceTracking(){this.pathPoints=[],this.pathColors=[],this.pathSpeeds=[],this.totalDistance=0,this.lastTrackedPosition=null,this.lastTrackedTime=performance.now()/1e3,this.nextMarkerAt=this.markerDistance,this.distanceTrackingActive&&this.distanceTracker&&this.initDistanceTracking()}}const[YP,K9t]=rt(0);async function Z9t(){let e=!1,t=!1;const n=new H9t("threePanel");KNt(n),await n.onWindowResize();let r=[];const i=async()=>{console.log("Reloading skeleton viewers..."),HA("Hips"),WA("Hips"),r.forEach((l,u)=>{l.sphereMeshes&&(Array.isArray(l.sphereMeshes)?l.sphereMeshes.forEach(c=>n.scene.remove(c)):n.scene.remove(l.sphereMeshes)),l.lineMeshes&&(Array.isArray(l.lineMeshes)?l.lineMeshes.forEach(c=>n.scene.remove(c)):n.scene.remove(l.lineMeshes)),l.newParent&&(l.newParent.traverse(c=>{c.geometry&&c.geometry.dispose(),c.material&&(Array.isArray(c.material)?c.material.forEach(h=>h.dispose()):c.material.dispose())}),l.newParent.parent&&l.newParent.parent.remove(l.newParent),l.newParent=null)}),console.log(" Old skeleton removed successfully!"),r=[];const s=Hb().filter(l=>l.fileName&&l.fileName.trim()!=="");for(const l of s){const u=new q9t(n.scene);u.skeletonPath=l.fileName,console.log(`Loading skeleton: ${l.fileName}`),await u.loadSkeleton(l.fileName),u.label=l.label[l.label.length-1],u.plotLabel=l.label,r.push(u)}console.log("Skeleton viewers reloaded:",r),ZNt(r),console.log("joints and values: ",yr(),a3())};Srt(!0);function a(){let s=0;r.forEach(l=>{const u=l.getAnimationDuration();console.log(`Current viewer duration: ${u}`),s=Math.max(s,u)}),console.log("Final maximum animation duration:",s),ANt(s)}function o(){zNt(t7t(r[0].boneHierarchy)),WA(av()[0]),HA(r[0].boneHierarchy[0].name),console.log("setSelectedJointsetSelectedJoint: ",yr(),av()[0],r[0].boneHierarchy[0])}n.animate=function(){requestAnimationFrame(()=>this.animate()),this.renderer.clear(),this.stats.update();const s=this.clock.getDelta();e&&(K9t(r.filter(l=>l.mixer).length),YP()===r.length&&r.forEach(l=>{l.getAnimationDuration()})),YP()===r.length&&YP()>0&&r.forEach(l=>{l.update(s),e&&(a(),e=!1),l.getAnimationDuration()===_rt()&&xrt(l.action.time)}),t&&r.length>0&&r[0].boneHierarchy.length>0&&(o(),console.log("run Initialiaze PLOTs"),IC(!0),r.forEach(l=>{l.mixer.setTime(0),l.mixer.timeScale=0,l.addListeners()}),t=!1,$A(!0)),this.gpuPanel.startQuery(),this.renderer.render(this.scene,this.camera),this.gpuPanel.endQuery(),this.controls.update()},n.animate(),Bt(async()=>{console.log("Detected change in skeletonsArray: ",Hb()),await i(),e=!0,t=!0})}async function J9t(e,t){console.log("Clearing and loading new skeleton: ",e),Hb().length+1}async function Q9t(e,t){await J9t(e)}function t7t(e){return e.map(t=>{const n=t.depth;return`${"-".repeat(n*1)}${t.name}`})}async function IC(e=!1){Pi().forEach(n=>{n.mixer.timeScale=1}),await t(),bM(0,ez()),b5t(0),Pi().forEach(n=>{n.mixer.timeScale=0}),qNt()||Srt(!0);async function t(){console.log("PreparePlotsData");const n=[],r=[],i=[],a=[],o=[],s=[],l=[];Pi().forEach((u,c)=>{const[h,f,d,p,v,g]=u.getTimeSeries("Hips");console.log("check skeleton:");const m=u.plotLabel||`Viewer ${c+1}`;l.push(m),r3()===!1?(n.push([...h]),r.push([...f]),i.push([...d])):(n.push([...p]),r.push([...v]),i.push([...g])),i3()===!1?(a.push([...h]),o.push([...f]),s.push([...d])):(a.push([...p]),o.push([...v]),s.push([...g])),h.length=0,f.length=0,d.length=0,p.length=0,v.length=0,g.length=0}),r3()===!1?VA("Position"):VA("Angle"),i3()===!1?GA("Position"):GA("Angle"),CNt([...n]),ENt([...r]),DNt([...i]),INt([...a]),LNt([...o]),PNt([...s]),console.log("Labels for all viewers:",l),n.length=0,r.length=0,i.length=0,a.length=0,o.length=0,s.length=0,l.length=0,console.log("Memory freed for arrays.")}}function e7t(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function olt(e={}){const{strict:t=!0,hookName:n="useContext",providerName:r="Provider",errorMessage:i}=e,a=hr(void 0);function o(){var l;const s=Ln(a);if(!s&&t){const u=new Error(i??e7t(n,r));throw u.name="ContextError",(l=Error.captureStackTrace)==null||l.call(Error,u,o),u}return s}return[a.Provider,o,a]}function n7t(e){return new Proxy({},{get(){return e}})}var UU=()=>e=>Array.from(new Set(e)),r7t=/[A-Z]/g,i7t=/^ms-/,qP={};function a7t(e){return"-"+e.toLowerCase()}function o7t(e){if(qP.hasOwnProperty(e))return qP[e];var t=e.replace(r7t,a7t);return qP[e]=i7t.test(t)?"-"+t:t}const i1=Symbol("store-raw"),Ou=Symbol("store-node"),Is=Symbol("store-has"),slt=Symbol("store-self");function llt(e){let t=e[Ri];if(!t&&(Object.defineProperty(e,Ri,{value:t=new Proxy(e,l7t)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,a=n.length;i<a;i++){const o=n[i];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function uh(e){let t;return e!=null&&typeof e=="object"&&(e[Ri]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function nd(e,t=new Set){let n,r,i,a;if(n=e!=null&&e[i1])return n;if(!uh(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,s=e.length;o<s;o++)i=e[o],(r=nd(i,t))!==i&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let l=0,u=o.length;l<u;l++)a=o[l],!s[a].get&&(i=e[a],(r=nd(i,t))!==i&&(e[a]=r))}return e}function Uy(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Cv(e,t,n){if(e[t])return e[t];const[r,i]=rt(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function s7t(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Ri||t===Ou||(delete n.value,delete n.writable,n.get=()=>e[Ri][t]),n}function VU(e){eb()&&Cv(Uy(e,Ou),slt)()}function ult(e){return VU(e),Reflect.ownKeys(e)}const l7t={get(e,t,n){if(t===i1)return e;if(t===Ri)return n;if(t===ty)return VU(e),n;const r=Uy(e,Ou),i=r[t];let a=i?i():e[t];if(t===Ou||t===Is||t==="__proto__")return a;if(!i){const o=Object.getOwnPropertyDescriptor(e,t);eb()&&(typeof a!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(a=Cv(r,t,a)())}return uh(a)?llt(a):a},has(e,t){return t===i1||t===Ri||t===ty||t===Ou||t===Is||t==="__proto__"?!0:(eb()&&Cv(Uy(e,Is),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:ult,getOwnPropertyDescriptor:s7t};function so(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],a=e.length;n===void 0?(delete e[t],e[Is]&&e[Is][t]&&i!==void 0&&e[Is][t].$()):(e[t]=n,e[Is]&&e[Is][t]&&i===void 0&&e[Is][t].$());let o=Uy(e,Ou),s;if((s=Cv(o,t,i))&&s.$(()=>n),Array.isArray(e)&&e.length!==a){for(let l=e.length;l<a;l++)(s=o[l])&&s.$();(s=Cv(o,"length",a))&&s.$(e.length)}(s=o[slt])&&s.$()}function clt(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];so(e,i,t[i])}}function u7t(e,t){if(typeof t=="function"&&(t=t(e)),t=nd(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&so(e,n,i)}so(e,"length",r)}else clt(e,t)}function yx(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const o=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)yx(e,[r[l]].concat(t),n);return}else if(s&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&yx(e,[l].concat(t),n);return}else if(s&&o==="object"){const{from:l=0,to:u=e.length-1,by:c=1}=r;for(let h=l;h<=u;h+=c)yx(e,[h].concat(t),n);return}else if(t.length>1){yx(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let a=t[0];typeof a=="function"&&(a=a(i,n),a===i)||r===void 0&&a==null||(a=nd(a),r===void 0||uh(i)&&uh(a)&&!Array.isArray(a)?clt(i,a):so(e,r,a))}function hlt(...[e,t]){const n=nd(e||{}),r=Array.isArray(n),i=llt(n);function a(...o){li(()=>{r&&o.length===1?u7t(n,o[0]):yx(n,o)})}return[i,a]}function c7t(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||n.set||!n.configurable||t===Ri||t===Ou||(delete n.value,delete n.writable,n.get=()=>e[Ri][t],n.set=r=>e[Ri][t]=r),n}const h7t={get(e,t,n){if(t===i1)return e;if(t===Ri)return n;if(t===ty)return VU(e),n;const r=Uy(e,Ou),i=r[t];let a=i?i():e[t];if(t===Ou||t===Is||t==="__proto__")return a;if(!i){const o=Object.getOwnPropertyDescriptor(e,t),s=typeof a=="function";if(eb()&&(!s||e.hasOwnProperty(t))&&!(o&&o.get))a=Cv(r,t,a)();else if(a!=null&&s&&a===Array.prototype[t])return(...l)=>li(()=>Array.prototype[t].apply(n,l))}return uh(a)?flt(a):a},has(e,t){return t===i1||t===Ri||t===ty||t===Ou||t===Is||t==="__proto__"?!0:(eb()&&Cv(Uy(e,Is),t)(),t in e)},set(e,t,n){return li(()=>so(e,t,nd(n))),!0},deleteProperty(e,t){return li(()=>so(e,t,void 0,!0)),!0},ownKeys:ult,getOwnPropertyDescriptor:c7t};function flt(e){let t=e[Ri];if(!t){Object.defineProperty(e,Ri,{value:t=new Proxy(e,h7t)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e),i=Object.getPrototypeOf(e),a=e!==null&&typeof e=="object"&&!Array.isArray(e)&&i!==Object.prototype;if(a){const o=Object.getOwnPropertyDescriptors(i);n.push(...Object.keys(o)),Object.assign(r,o)}for(let o=0,s=n.length;o<s;o++){const l=n[o];if(!(a&&l==="constructor")){if(r[l].get){const u=r[l].get.bind(t);Object.defineProperty(e,l,{get:u,configurable:!0})}if(r[l].set){const u=r[l].set;Object.defineProperty(e,l,{set:h=>li(()=>u.call(t,h)),configurable:!0})}}}}return t}function p2(e,t){const n=nd(e||{});return flt(n)}const G3=Symbol("store-root");function cm(e,t,n,r,i){const a=t[n];if(e===a)return;const o=Array.isArray(e);if(n!==G3&&(!uh(e)||!uh(a)||o!==Array.isArray(a)||i&&e[i]!==a[i])){so(t,n,e);return}if(o){if(e.length&&a.length&&(!r||i&&e[0]&&e[0][i]!=null)){let u,c,h,f,d,p,v,g;for(h=0,f=Math.min(a.length,e.length);h<f&&(a[h]===e[h]||i&&a[h]&&e[h]&&a[h][i]===e[h][i]);h++)cm(e[h],a,h,r,i);const m=new Array(e.length),_=new Map;for(f=a.length-1,d=e.length-1;f>=h&&d>=h&&(a[f]===e[d]||i&&a[h]&&e[h]&&a[f][i]===e[d][i]);f--,d--)m[d]=a[f];if(h>d||h>f){for(c=h;c<=d;c++)so(a,c,e[c]);for(;c<e.length;c++)so(a,c,m[c]),cm(e[c],a,c,r,i);a.length>e.length&&so(a,"length",e.length);return}for(v=new Array(d+1),c=d;c>=h;c--)p=e[c],g=i&&p?p[i]:p,u=_.get(g),v[c]=u===void 0?-1:u,_.set(g,c);for(u=h;u<=f;u++)p=a[u],g=i&&p?p[i]:p,c=_.get(g),c!==void 0&&c!==-1&&(m[c]=a[u],c=v[c],_.set(g,c));for(c=h;c<e.length;c++)c in m?(so(a,c,m[c]),cm(e[c],a,c,r,i)):so(a,c,e[c])}else for(let u=0,c=e.length;u<c;u++)cm(e[u],a,u,r,i);a.length>e.length&&so(a,"length",e.length);return}const s=Object.keys(e);for(let u=0,c=s.length;u<c;u++)cm(e[s[u]],a,s[u],r,i);const l=Object.keys(a);for(let u=0,c=l.length;u<c;u++)e[l[u]]===void 0&&so(a,l[u],void 0)}function f7t(e,t={}){const{merge:n,key:r="id"}=t,i=nd(e);return a=>{if(!uh(a)||!uh(i))return i;const o=cm(i,{[G3]:a},G3,n,r);return o===void 0?a:o}}function TT(){return!0}var d7t={get(e,t,n){return t===Ri?n:e.get(t)},has(e,t){return e.has(t)},set:TT,deleteProperty:TT,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:TT,deleteProperty:TT}},ownKeys(e){return e.keys()}},H3=e=>typeof e=="function"&&!e.length?e():e;function dj(e){return(...t)=>{for(const n of e)n&&n(...t)}}var p7t=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g;function pj(e){const t={};let n;for(;n=p7t.exec(e);)t[n[1]]=n[2];return t}function v7t(e,t){if(typeof e=="object"&&typeof t=="object")return{...e,...t};if(typeof e=="string"&&typeof t=="string")return`${e};${t}`;const n=typeof e=="object"?e:pj(e),r=typeof t=="object"?t:pj(t);return{...n,...r}}var KP=(e,t,n)=>{let r;for(const i of e){const a=H3(i)[t];r?a&&(r=n(r,a)):r=a}return r};function v2(...e){if(e.length===1)return e[0];const t={};for(const r of e){const i=H3(r);for(const a in i)if(a[0]==="o"&&a[1]==="n"&&a[2]){const o=i[a],s=a.toLowerCase(),l=typeof o=="function"?o:Array.isArray(o)?o.length===1?o[0]:o[0].bind(void 0,o[1]):void 0;l?t[s]?t[s].push(l):t[s]=[l]:delete t[s]}}const n=G(...e);return new Proxy({get(r){if(typeof r!="string")return Reflect.get(n,r);if(r==="style")return KP(e,"style",v7t);if(r==="ref"){const i=[];for(const a of e){const o=H3(a)[r];typeof o=="function"&&i.push(o)}return dj(i)}if(r[0]==="o"&&r[1]==="n"&&r[2]){const i=t[r.toLowerCase()];return i?dj(i):Reflect.get(n,r)}return r==="class"||r==="className"?KP(e,r,(i,a)=>`${i} ${a}`):r==="classList"?KP(e,r,(i,a)=>({...i,...a})):Reflect.get(n,r)},has(r){return Reflect.has(n,r)},keys(){return Object.keys(n)}},d7t)}var g7t=e=>Array.isArray(e),m7t=e=>!(e==null||typeof e!="object"||g7t(e)),y7t=e=>typeof e=="number"&&!Number.isNaN(e),dlt=e=>typeof e=="string",_7t=e=>e.startsWith("--")?e:o7t(e);function x7t(e){let t={};for(const n in e){const r=e[n];!dlt(r)&&!y7t(r)||(t[_7t(n)]=r)}return t}var vj={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"};function b7t(e){return e in vj?vj[e]:e}var S7t=n7t(e=>{const t={};for(const n in e){const r=e[n];if(n==="style"&&m7t(r)){t.style=x7t(r);continue}if(n==="children"){dlt(r)&&(t.textContent=r);continue}t[b7t(n)]=r}return t});function w7t(e,t){const{actions:n,context:r}=t??{},[i,a]=hlt(e.getState());return ki(()=>{const o=e.subscribe(s=>{a(f7t(s))});Pe(()=>{o()})}),Bt(()=>{const o=typeof r=="function"?r():r;e.setContext(o)}),Bt(()=>{e.setOptions({actions:n})}),i}function T7t(e,t){const{state:n,context:r}=t??{},i=(()=>{const a=typeof e=="function"?e():e,o=typeof r=="function"?r():r;return o&&a.setContext(o),a})();return ki(()=>{i.start(n),Pe(()=>{i.stop()})}),i}function M7t(e,t){const n=T7t(e,t);return[w7t(n,t),n.send,n]}const GU=()=>(e,t)=>Yt(e,t),ZP=e=>n=>{const[r,i]=Yt(n,["as"]);return O(ry,G({get component(){return r.as||e}},i))};function A7t(){const e=new Map;return new Proxy(ZP,{apply(t,n,r){return ZP(r[0])},get(t,n){const r=n;return e.has(r)||e.set(r,ZP(r)),e.get(r)}})}const HU=A7t(),C7t=Symbol(),gj=Object.getPrototypeOf,W3=new WeakMap,E7t=e=>e&&(W3.has(e)?W3.get(e):gj(e)===Object.prototype||gj(e)===Array.prototype),D7t=e=>E7t(e)&&e[C7t]||null,mj=(e,t=!0)=>{W3.set(e,t)};var JP=e=>typeof e=="object"&&e!==null,Cp=new WeakMap,_x=new WeakSet,I7t=(e=Object.is,t=(u,c)=>new Proxy(u,c),n=u=>JP(u)&&!_x.has(u)&&(Array.isArray(u)||!(Symbol.iterator in u))&&!(u instanceof WeakMap)&&!(u instanceof WeakSet)&&!(u instanceof Error)&&!(u instanceof Number)&&!(u instanceof Date)&&!(u instanceof String)&&!(u instanceof RegExp)&&!(u instanceof ArrayBuffer),r=u=>{switch(u.status){case"fulfilled":return u.value;case"rejected":throw u.reason;default:throw u}},i=new WeakMap,a=(u,c,h=r)=>{const f=i.get(u);if((f==null?void 0:f[0])===c)return f[1];const d=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u));return mj(d,!0),i.set(u,[c,d]),Reflect.ownKeys(u).forEach(p=>{const v=Reflect.get(u,p);_x.has(v)?(mj(v,!1),d[p]=v):v instanceof Promise?Object.defineProperty(d,p,{get(){return h(v)}}):Cp.has(v)?d[p]=Cm(v,h):d[p]=v}),Object.freeze(d)},o=new WeakMap,s=[1,1],l=u=>{if(!JP(u))throw new Error("object required");const c=o.get(u);if(c)return c;let h=s[0];const f=new Set,d=(T,M=++s[0])=>{h!==M&&(h=M,f.forEach(C=>C(T,M)))};let p=s[1];const v=(T=++s[1])=>(p!==T&&!f.size&&(p=T,m.forEach(([M])=>{const C=M[1](T);C>h&&(h=C)})),h),g=T=>(M,C)=>{const E=[...M];E[1]=[T,...E[1]],d(E,C)},m=new Map,_=(T,M)=>{if(f.size){const C=M[3](g(T));m.set(T,[M,C])}else m.set(T,[M])},y=T=>{var C;const M=m.get(T);M&&(m.delete(T),(C=M[1])==null||C.call(M))},x=T=>(f.add(T),f.size===1&&m.forEach(([C,E],D)=>{const I=C[3](g(D));m.set(D,[C,I])}),()=>{f.delete(T),f.size===0&&m.forEach(([C,E],D)=>{E&&(E(),m.set(D,[C]))})}),S=Array.isArray(u)?[]:Object.create(Object.getPrototypeOf(u)),w=t(S,{deleteProperty(T,M){const C=Reflect.get(T,M);y(M);const E=Reflect.deleteProperty(T,M);return E&&d(["delete",[M],C]),E},set(T,M,C,E){var P;const D=Reflect.has(T,M),I=Reflect.get(T,M,E);if(D&&(e(I,C)||o.has(C)&&e(I,o.get(C))))return!0;y(M),JP(C)&&(C=D7t(C)||C);let L=C;if(!((P=Object.getOwnPropertyDescriptor(T,M))!=null&&P.set))if(C instanceof Promise)C.then(B=>{C.status="fulfilled",C.value=B,d(["resolve",[M],B])}).catch(B=>{C.status="rejected",C.reason=B,d(["reject",[M],B])});else{!Cp.has(C)&&n(C)&&(L=WU(C));const B=!_x.has(L)&&Cp.get(L);B&&_(M,B)}return Reflect.set(T,M,L,E),d(["set",[M],C,I]),!0}});o.set(u,w);const A=[S,v,a,x];return Cp.set(w,A),Reflect.ownKeys(u).forEach(T=>{const M=Object.getOwnPropertyDescriptor(u,T);M.get||M.set?Object.defineProperty(S,T,M):w[T]=u[T]}),w})=>[l,Cp,_x,e,t,n,r,i,a,o,s],[L7t]=I7t();function WU(e={}){return L7t(e)}function yj(e,t,n){const r=Cp.get(e);let i;const a=[],o=r[3];let s=!1;const u=o(c=>{if(a.push(c),n){t(a.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,s&&t(a.splice(0))}))});return s=!0,()=>{s=!1,u()}}function Cm(e,t){const n=Cp.get(e),[r,i,a]=n;return a(r,i(),t)}function _j(e){return _x.add(e),e}function P7t(e,t){Object.keys(t).forEach(i=>{if(Object.getOwnPropertyDescriptor(e,i))throw new Error("object property already defined");const a=t[i],{get:o,set:s}=typeof a=="function"?{get:a}:a,l={};l.get=()=>o(Cm(r)),s&&(l.set=u=>s(r,u)),Object.defineProperty(e,i,l)});const r=WU(e);return r}function xj(e,t,n){typeof n.value=="object"&&(n.value=Em(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Em(e){if(typeof e!="object")return e;var t=0,n,r,i,a=Object.prototype.toString.call(e);if(a==="[object Object]"?i=Object.create(e.__proto__||null):a==="[object Array]"?i=Array(e.length):a==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Em(o))})):a==="[object Map]"?(i=new Map,e.forEach(function(o,s){i.set(Em(s),Em(o))})):a==="[object Date]"?i=new Date(+e):a==="[object RegExp]"?i=new RegExp(e.source,e.flags):a==="[object DataView]"?i=new e.constructor(Em(e.buffer)):a==="[object ArrayBuffer]"?i=e.slice(0):a.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)xj(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||xj(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}var R7t=Object.defineProperty,O7t=(e,t,n)=>t in e?R7t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,me=(e,t,n)=>(O7t(e,typeof t!="symbol"?t+"":t,n),n);function N7t(e){for(;e.length>0;)e.pop();return e}var bj=(e,...t)=>(typeof e=="function"?e(...t):e)??void 0,Dc=e=>e,B7t=()=>{},Sj=(()=>{let e=0;return()=>(e++,e.toString(36))})(),LC=e=>Array.isArray(e),qx=e=>!(e==null||typeof e!="object"||LC(e)),k7t=e=>typeof e=="number"&&!Number.isNaN(e),Rc=e=>typeof e=="string",$3=e=>typeof e=="function",F7t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function PC(e){if(!z7t(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const i=e[r];i!==void 0&&(n[r]=PC(i))}return n}var z7t=e=>e&&typeof e=="object"&&e.constructor===Object;function QP(...e){const t=e.length===1?e[0]:e[1],n=e.length===2?e[0]:!0}function wM(...e){const t=e.length===1?e[0]:e[1],n=e.length===2?e[0]:!0}function plt(e,...t){for(const n of t){const r=PC(n);for(const i in r)qx(n[i])?(e[i]||(e[i]={}),plt(e[i],n[i])):e[i]=n[i]}return e}function wj(e){return Em(e)}function ol(e){return Rc(e)?{type:e}:e}function uf(e){return e?LC(e)?e.slice():[e]:[]}function vlt(e){return qx(e)&&e.predicate!=null}var U7t=()=>!0;function glt(e,t){return e=e??U7t,(n,r,i)=>{if(Rc(e)){const a=t[e];return $3(a)?a(n,r,i):a}return vlt(e)?e.predicate(t)(n,r,i):e==null?void 0:e(n,r,i)}}function tR(e,t){return(n,r,i)=>vlt(e)?e.predicate(t)(n,r,i):e}function V7t(e){var a,o;const t=e.computed??Dc({}),n=e.context??Dc({}),r=e.initial?(o=(a=e.states)==null?void 0:a[e.initial])==null?void 0:o.tags:[],i=WU({value:e.initial??"",previousValue:"",event:Dc({}),previousEvent:Dc({}),context:P7t(n,t),done:!1,tags:r??[],hasTag(s){return this.tags.includes(s)},matches(...s){return s.includes(this.value)},can(s){return Dc(this).nextEvents.includes(s)},get nextEvents(){var u,c;const s=((c=(u=e.states)==null?void 0:u[this.value])==null?void 0:c.on)??{},l=(e==null?void 0:e.on)??{};return Object.keys({...s,...l})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return Dc(i)}function W_(e,t){return(n,r)=>{if(k7t(e))return e;if($3(e))return e(n,r);if(Rc(e)){const i=Number.parseFloat(e);if(!Number.isNaN(i))return i;if(t){const a=t==null?void 0:t[e];return wM(a==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${e}\`. It doesn't exist in \`options.delays\``),$3(a)?a(n,r):a}}}}function G7t(e){return Rc(e)?{target:e}:e}function H7t(e,t){return(n,r,i)=>uf(e).map(G7t).find(a=>glt(a.guard,t)(n,r,i)??a.target??a.actions)}var W7t=class{constructor(e,t){var r,i,a,o,s,l;me(this,"status","Not Started"),me(this,"state"),me(this,"initialState"),me(this,"initialContext"),me(this,"id"),me(this,"type","machine"),me(this,"activityEvents",new Map),me(this,"delayedEvents",new Map),me(this,"stateListeners",new Set),me(this,"doneListeners",new Set),me(this,"contextWatchers",new Set),me(this,"removeStateListener",B7t),me(this,"parent"),me(this,"children",new Map),me(this,"guardMap"),me(this,"actionMap"),me(this,"delayMap"),me(this,"activityMap"),me(this,"sync"),me(this,"options"),me(this,"config"),me(this,"start",u=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=yj(this.state,()=>{this.stateListeners.forEach(v=>{v(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(ol("machine.start"),uf(this.config.activities),"machine.start"),this.executeActions(this.config.entry,ol("machine.start"));const c=ol("machine.init"),h=qx(u)?u.value:u,f=qx(u)?u.context:void 0;f&&this.setContext(f);const d={target:h??this.config.initial},p=this.getNextStateInfo(d,c);return this.initialState=p,this.performStateChangeEffects(this.state.value,p,c),this}),me(this,"setupContextWatchers",()=>{const{watch:u}=this.config;if(!u)return;let c=Cm(this.state.context);const h=yj(this.state.context,()=>{var d;const f=Cm(this.state.context);for(const[p,v]of Object.entries(u))(((d=this.options.compareFns)==null?void 0:d[p])??Object.is)(c[p],f[p])||this.executeActions(v,this.state.event);c=f});this.contextWatchers.add(h)}),me(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,ol("machine.stop")),this.executeActions(this.config.exit,ol("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),me(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),me(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(u=>u()),this.contextWatchers.clear()}),me(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(u=>{u.forEach(c=>c())}),this.delayedEvents.clear()}),me(this,"stopActivities",u=>{var c,h;u?((c=this.activityEvents.get(u))==null||c.forEach(f=>f()),(h=this.activityEvents.get(u))==null||h.clear(),this.activityEvents.delete(u)):(this.activityEvents.forEach(f=>{f.forEach(d=>d()),f.clear()}),this.activityEvents.clear())}),me(this,"sendChild",(u,c)=>{const h=ol(u),f=bj(c,this.contextSnapshot),d=this.children.get(f);d||wM(`[@zag-js/core] Cannot send '${h.type}' event to unknown child`),d.send(h)}),me(this,"stopChild",u=>{this.children.has(u)||wM(`[@zag-js/core > stop-child] Cannot stop unknown child ${u}`),this.children.get(u).stop(),this.children.delete(u)}),me(this,"removeChild",u=>{this.children.delete(u)}),me(this,"stopChildren",()=>{this.children.forEach(u=>u.stop()),this.children.clear()}),me(this,"setParent",u=>{this.parent=u}),me(this,"spawn",(u,c)=>{const h=bj(u);return c&&(h.id=c),h.type="machine.actor",h.setParent(this),this.children.set(h.id,Dc(h)),h.onDone(()=>{this.removeChild(h.id)}).start(),Dc(_j(h))}),me(this,"stopActivity",u=>{var h;if(!this.state.value)return;const c=this.activityEvents.get(this.state.value);(h=c==null?void 0:c.get(u))==null||h(),c==null||c.delete(u)}),me(this,"addActivityCleanup",(u,c,h)=>{var f;u&&(this.activityEvents.has(u)?(f=this.activityEvents.get(u))==null||f.set(c,h):this.activityEvents.set(u,new Map([[c,h]])))}),me(this,"setState",u=>{this.state.previousValue=this.state.value,this.state.value=u;const c=this.getStateNode(u);u==null?N7t(this.state.tags):this.state.tags=uf(c==null?void 0:c.tags)}),me(this,"setContext",u=>{u&&plt(this.state.context,PC(u))}),me(this,"setOptions",u=>{const c=PC(u);this.actionMap={...this.actionMap,...c.actions},this.delayMap={...this.delayMap,...c.delays},this.activityMap={...this.activityMap,...c.activities},this.guardMap={...this.guardMap,...c.guards}}),me(this,"getStateNode",u=>{var c;if(u)return(c=this.config.states)==null?void 0:c[u]}),me(this,"getNextStateInfo",(u,c)=>{const h=this.determineTransition(u,c),f=!(h!=null&&h.target),d=(h==null?void 0:h.target)??this.state.value,p=this.state.value!==d,v=this.getStateNode(d),m={reenter:!f&&!p&&!(h!=null&&h.internal),transition:h,stateNode:v,target:d,changed:p};return this.log("NextState:",`[${c.type}]`,this.state.value,"---->",m.target),m}),me(this,"getAfterActions",(u,c)=>{let h;return{entry:()=>{h=globalThis.setTimeout(()=>{const f=this.getNextStateInfo(u,this.state.event);this.performStateChangeEffects(this.state.value,f,this.state.event)},c)},exit:()=>{globalThis.clearTimeout(h)}}}),me(this,"getDelayedEventActions",u=>{const c=this.getStateNode(u),h=this.state.event;if(!c||!c.after)return;const f=[],d=[];if(LC(c.after)){const p=this.determineTransition(c.after,h);if(!p)return;if(!F7t(p,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(p)}`);const g=W_(p.delay,this.delayMap)(this.contextSnapshot,h),m=this.getAfterActions(p,g);return f.push(m.entry),d.push(m.exit),{entries:f,exits:d}}if(qx(c.after))for(const p in c.after){const v=c.after[p],m=W_(p,this.delayMap)(this.contextSnapshot,h),_=this.getAfterActions(v,m);f.push(_.entry),d.push(_.exit)}return{entries:f,exits:d}}),me(this,"executeActions",(u,c)=>{var f;const h=tR(u,this.guardMap)(this.contextSnapshot,c,this.guardMeta);for(const d of uf(h)){const p=Rc(d)?(f=this.actionMap)==null?void 0:f[d]:d;QP(Rc(d)&&!p,`[@zag-js/core > execute-actions] No implementation found for action: \`${d}\``),p==null||p(this.state.context,c,this.meta)}}),me(this,"executeActivities",(u,c,h)=>{var f;for(const d of c){const p=Rc(d)?(f=this.activityMap)==null?void 0:f[d]:d;if(!p){QP(`[@zag-js/core > execute-activity] No implementation found for activity: \`${d}\``);continue}const v=p(this.state.context,u,this.meta);if(v){const g=Rc(d)?d:d.name||Sj();this.addActivityCleanup(h??this.state.value,g,v)}}}),me(this,"createEveryActivities",(u,c)=>{if(u)if(LC(u)){const h=uf(u).find(v=>{const g=v.delay,_=W_(g,this.delayMap)(this.contextSnapshot,this.state.event);return glt(v.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??_!=null});if(!h)return;const d=W_(h.delay,this.delayMap)(this.contextSnapshot,this.state.event);c(()=>{const v=globalThis.setInterval(()=>{this.executeActions(h.actions,this.state.event)},d);return()=>{globalThis.clearInterval(v)}})}else for(const h in u){const f=u==null?void 0:u[h],p=W_(h,this.delayMap)(this.contextSnapshot,this.state.event);c(()=>{const g=globalThis.setInterval(()=>{this.executeActions(f,this.state.event)},p);return()=>{globalThis.clearInterval(g)}})}}),me(this,"setEvent",u=>{this.state.previousEvent=this.state.event,this.state.event=_j(ol(u))}),me(this,"performExitEffects",(u,c)=>{const h=this.state.value;if(h==="")return;const f=u?this.getStateNode(u):void 0;this.stopActivities(h);const d=tR(f==null?void 0:f.exit,this.guardMap)(this.contextSnapshot,c,this.guardMeta),p=uf(d),v=this.delayedEvents.get(h);v&&p.push(...v),this.executeActions(p,c)}),me(this,"performEntryEffects",(u,c)=>{const h=this.getStateNode(u),f=uf(h==null?void 0:h.activities);this.createEveryActivities(h==null?void 0:h.every,g=>{f.unshift(g)}),f.length>0&&this.executeActivities(c,f);const d=tR(h==null?void 0:h.entry,this.guardMap)(this.contextSnapshot,c,this.guardMeta),p=uf(d),v=this.getDelayedEventActions(u);h!=null&&h.after&&v&&(this.delayedEvents.set(u,v==null?void 0:v.exits),p.push(...v.entries)),this.executeActions(p,c),(h==null?void 0:h.type)==="final"&&(this.state.done=!0,this.doneListeners.forEach(g=>{g(this.stateSnapshot)}),this.stop())}),me(this,"performTransitionEffects",(u,c)=>{const h=this.determineTransition(u,c);this.executeActions(h==null?void 0:h.actions,c)}),me(this,"performStateChangeEffects",(u,c,h)=>{this.setEvent(h);const f=c.changed||c.reenter;f&&this.performExitEffects(u,h),this.performTransitionEffects(c.transition,h),this.setState(c.target),f&&this.performEntryEffects(c.target,h)}),me(this,"determineTransition",(u,c)=>{const h=H7t(u,this.guardMap);return h==null?void 0:h(this.contextSnapshot,c,this.guardMeta)}),me(this,"sendParent",u=>{var h;this.parent||wM("[@zag-js/core > send-parent] Cannot send event to an unknown parent");const c=ol(u);(h=this.parent)==null||h.send(c)}),me(this,"log",(...u)=>{}),me(this,"send",u=>{const c=ol(u);this.transition(this.state.value,c)}),me(this,"transition",(u,c)=>{var v,g;const h=Rc(u)?this.getStateNode(u):u==null?void 0:u.stateNode,f=ol(c);if(!h&&!this.config.on){const m=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${u}, \`event\`: ${f.type}`;QP(m);return}const d=((v=h==null?void 0:h.on)==null?void 0:v[f.type])??((g=this.config.on)==null?void 0:g[f.type]),p=this.getNextStateInfo(d,f);return this.performStateChangeEffects(this.state.value,p,f),p.stateNode}),me(this,"subscribe",u=>(this.stateListeners.add(u),this.status==="Running"&&u(this.stateSnapshot),()=>{this.stateListeners.delete(u)})),me(this,"onDone",u=>(this.doneListeners.add(u),this)),me(this,"onTransition",u=>(this.stateListeners.add(u),this.status==="Running"&&u(this.stateSnapshot),this)),this.config=wj(e),this.options=wj(t??{}),this.id=this.config.id??`machine-${Sj()}`,this.guardMap=((r=this.options)==null?void 0:r.guards)??{},this.actionMap=((i=this.options)==null?void 0:i.actions)??{},this.delayMap=((a=this.options)==null?void 0:a.delays)??{},this.activityMap=((o=this.options)==null?void 0:o.activities)??{},this.sync=((s=this.options)==null?void 0:s.sync)??!1,this.state=V7t(this.config),this.initialContext=Cm(this.state.context);const n=ol("machine.created");this.executeActions((l=this.config)==null?void 0:l.created,n)}get stateSnapshot(){return Dc(Cm(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return e.stateSnapshot},get initialContext(){return e.initialContext},get initialState(){var t;return((t=e.initialState)==null?void 0:t.target)??""}}}get meta(){var e;return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:((e=this.initialState)==null?void 0:e.target)??"",getState:()=>this.stateSnapshot,getAction:t=>this.actionMap[t],getGuard:t=>this.guardMap[t]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},$7t=(e,t)=>new W7t(e,t);const X7t=e=>typeof e=="function",j7t=(e,...t)=>X7t(e)?e(...t):e;var TM=(e,t=[])=>({parts:(...n)=>{if(Y7t(t))return TM(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>TM(e,[...t,...n]),rename:n=>TM(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${Zg(e)}"][data-part="${Zg(r)}"]`,`& [data-scope="${Zg(e)}"][data-part="${Zg(r)}"]`].join(", "),attrs:{"data-scope":Zg(e),"data-part":Zg(r)}}}),{})}),Zg=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Y7t=e=>e.length===0,Tj=e=>e?"":void 0,q7t=e=>e.nodeType===Node.DOCUMENT_NODE,K7t=e=>e!=null&&e===e.window;function Z7t(e){return q7t(e)?e:K7t(e)?e.document:(e==null?void 0:e.ownerDocument)??document}var J7t=()=>typeof document<"u";function Q7t(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}var tXt=e=>J7t()&&e.test(Q7t()),mlt=()=>tXt(/iP(hone|ad|od)|iOS/);function eXt(e,t){return Array.from((e==null?void 0:e.querySelectorAll(t))??[])}function nXt(e){const t=new Set;function n(r){const i=globalThis.requestAnimationFrame(r);t.add(()=>globalThis.cancelAnimationFrame(i))}return n(()=>n(e)),function(){t.forEach(i=>i())}}function X3(e){const t=globalThis.requestAnimationFrame(e);return()=>{globalThis.cancelAnimationFrame(t)}}function rXt(e){const t={getRootNode:n=>{var r;return((r=n.getRootNode)==null?void 0:r.call(n))??document},getDoc:n=>Z7t(t.getRootNode(n)),getWin:n=>t.getDoc(n).defaultView??window,getActiveElement:n=>t.getDoc(n).activeElement,isActiveElement:(n,r)=>r===t.getActiveElement(n),getById:(n,r)=>t.getRootNode(n).getElementById(r),setValue:(n,r)=>{if(n==null||r==null)return;const i=r.toString();n.value!==i&&(n.value=r.toString())}};return{...t,...e}}var Dm="default",j3="",MM=new WeakMap;function iXt(e={}){const{target:t,doc:n}=e,r=n??document,i=r.documentElement;return mlt()?(Dm==="default"&&(j3=i.style.webkitUserSelect,i.style.webkitUserSelect="none"),Dm="disabled"):t&&(MM.set(t,t.style.userSelect),t.style.userSelect="none"),()=>aXt({target:t,doc:r})}function aXt(e={}){const{target:t,doc:n}=e,i=(n??document).documentElement;if(mlt()){if(Dm!=="disabled")return;Dm="restoring",setTimeout(()=>{nXt(()=>{Dm==="restoring"&&(i.style.webkitUserSelect==="none"&&(i.style.webkitUserSelect=j3||""),j3="",Dm="default")})},300)}else if(t&&MM.has(t)){const a=MM.get(t);t.style.userSelect==="none"&&(t.style.userSelect=a??""),t.getAttribute("style")===""&&t.removeAttribute("style"),MM.delete(t)}}function oXt(e={}){const{defer:t,target:n,...r}=e,i=t?X3:o=>o(),a=[];return a.push(i(()=>{const o=typeof n=="function"?n():n;a.push(iXt({...r,target:o}))})),()=>{a.forEach(o=>o==null?void 0:o())}}var MT=(e,t,n,r)=>{const i=typeof e=="function"?e():e;return i==null||i.addEventListener(t,n,r),()=>{i==null||i.removeEventListener(t,n,r)}},sXt={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Mj={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function lXt(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let{key:i}=e;return i=sXt[i]??i,n==="rtl"&&r==="horizontal"&&i in Mj&&(i=Mj[i]),i}function uXt(e,t="client"){const n=e.touches[0]||e.changedTouches[0];return{x:n[`${t}X`],y:n[`${t}Y`]}}function cXt(e,t="client"){return{x:e[`${t}X`],y:e[`${t}Y`]}}var hXt=e=>"touches"in e&&e.touches.length>0;function fXt(e,t="client"){return hXt(e)?uXt(e,t):cXt(e,t)}var dXt=new Set(["PageUp","PageDown"]),pXt=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]);function vXt(e){return e.ctrlKey||e.metaKey?.1:dXt.has(e.key)||e.shiftKey&&pXt.has(e.key)?10:1}function Aj(e){return Math.max(0,Math.min(1,e))}function gXt(e,t){const{left:n,top:r,width:i,height:a}=t.getBoundingClientRect(),o={x:e.x-n,y:e.y-r},s={x:Aj(o.x/i),y:Aj(o.y/a)};function l(u={}){const{dir:c="ltr",orientation:h="horizontal",inverted:f}=u,d=typeof f=="object"?f.x:f,p=typeof f=="object"?f.y:f;return h==="horizontal"?c==="rtl"||d?1-s.x:s.x:p?1-s.y:s.y}return{offset:o,percent:s,getPercentValue:l}}function mXt(e,t){const{onPointerMove:n,onPointerUp:r}=t,a=[MT(e,"pointermove",o=>{const s=fXt(o),l=Math.sqrt(s.x**2+s.y**2),u=o.pointerType==="touch"?10:5;if(!(l<u)){if(o.pointerType==="mouse"&&o.button===0){r();return}n({point:s,event:o})}},!1),MT(e,"pointerup",r,!1),MT(e,"pointercancel",r,!1),MT(e,"contextmenu",r,!1),oXt({doc:e})];return()=>{a.forEach(o=>o())}}function ylt(e){if(!yXt(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const i=e[r];i!==void 0&&(n[r]=ylt(i))}return n}var yXt=e=>e&&typeof e=="object"&&e.constructor===Object;const[Ose,_Xt]=olt({hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1}),xXt=["top","right","bottom","left"],rd=Math.min,Xo=Math.max,RC=Math.round,AT=Math.floor,id=e=>({x:e,y:e}),bXt={left:"right",right:"left",bottom:"top",top:"bottom"},SXt={start:"end",end:"start"};function Y3(e,t,n){return Xo(e,rd(t,n))}function Yv(e,t){return typeof e=="function"?e(t):e}function ad(e){return e.split("-")[0]}function U0(e){return e.split("-")[1]}function _lt(e){return e==="x"?"y":"x"}function $U(e){return e==="y"?"height":"width"}function eS(e){return["top","bottom"].includes(ad(e))?"y":"x"}function XU(e){return _lt(eS(e))}function wXt(e,t,n){n===void 0&&(n=!1);const r=U0(e),i=XU(e),a=$U(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=OC(o)),[o,OC(o)]}function TXt(e){const t=OC(e);return[q3(e),t,q3(t)]}function q3(e){return e.replace(/start|end/g,t=>SXt[t])}function MXt(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}function AXt(e,t,n,r){const i=U0(e);let a=MXt(ad(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(q3)))),a}function OC(e){return e.replace(/left|right|bottom|top/g,t=>bXt[t])}function CXt(e){return{top:0,right:0,bottom:0,left:0,...e}}function xlt(e){return typeof e!="number"?CXt(e):{top:e,right:e,bottom:e,left:e}}function NC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Cj(e,t,n){let{reference:r,floating:i}=e;const a=eS(t),o=XU(t),s=$U(o),l=ad(t),u=a==="y",c=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2;let d;switch(l){case"top":d={x:c,y:r.y-i.height};break;case"bottom":d={x:c,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:h};break;case"left":d={x:r.x-i.width,y:h};break;default:d={x:r.x,y:r.y}}switch(U0(t)){case"start":d[o]-=f*(n&&u?-1:1);break;case"end":d[o]+=f*(n&&u?-1:1);break}return d}const EXt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,s=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:h}=Cj(u,r,l),f=r,d={},p=0;for(let v=0;v<s.length;v++){const{name:g,fn:m}=s[v],{x:_,y,data:x,reset:S}=await m({x:c,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:d,rects:u,platform:o,elements:{reference:e,floating:t}});c=_??c,h=y??h,d={...d,[g]:{...d[g],...x}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:h}=Cj(u,f,l)),v=-1)}return{x:c,y:h,placement:f,strategy:i,middlewareData:d}};async function a1(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:f=!1,padding:d=0}=Yv(t,e),p=xlt(d),g=s[f?h==="floating"?"reference":"floating":h],m=NC(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(g)))==null||n?g:g.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),_=h==="floating"?{...o.floating,x:r,y:i}:o.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),x=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},S=NC(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:_,offsetParent:y,strategy:l}):_);return{top:(m.top-S.top+p.top)/x.y,bottom:(S.bottom-m.bottom+p.bottom)/x.y,left:(m.left-S.left+p.left)/x.x,right:(S.right-m.right+p.right)/x.x}}const DXt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:l}=t,{element:u,padding:c=0}=Yv(e,t)||{};if(u==null)return{};const h=xlt(c),f={x:n,y:r},d=XU(i),p=$U(d),v=await o.getDimensions(u),g=d==="y",m=g?"top":"left",_=g?"bottom":"right",y=g?"clientHeight":"clientWidth",x=a.reference[p]+a.reference[d]-f[d]-a.floating[p],S=f[d]-a.reference[d],b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let w=b?b[y]:0;(!w||!await(o.isElement==null?void 0:o.isElement(b)))&&(w=s.floating[y]||a.floating[p]);const A=x/2-S/2,T=w/2-v[p]/2-1,M=rd(h[m],T),C=rd(h[_],T),E=M,D=w-v[p]-C,I=w/2-v[p]/2+A,L=Y3(E,I,D),P=!l.arrow&&U0(i)!=null&&I!==L&&a.reference[p]/2-(I<E?M:C)-v[p]/2<0,B=P?I<E?I-E:I-D:0;return{[d]:f[d]+B,data:{[d]:L,centerOffset:I-L-B,...P&&{alignmentOffset:B}},reset:P}}}),IXt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...g}=Yv(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const m=ad(i),_=ad(s)===s,y=await(l.isRTL==null?void 0:l.isRTL(u.floating)),x=f||(_||!v?[OC(s)]:TXt(s));!f&&p!=="none"&&x.push(...AXt(s,v,p,y));const S=[s,...x],b=await a1(t,g),w=[];let A=((r=a.flip)==null?void 0:r.overflows)||[];if(c&&w.push(b[m]),h){const E=wXt(i,o,y);w.push(b[E[0]],b[E[1]])}if(A=[...A,{placement:i,overflows:w}],!w.every(E=>E<=0)){var T,M;const E=(((T=a.flip)==null?void 0:T.index)||0)+1,D=S[E];if(D)return{data:{index:E,overflows:A},reset:{placement:D}};let I=(M=A.filter(L=>L.overflows[0]<=0).sort((L,P)=>L.overflows[1]-P.overflows[1])[0])==null?void 0:M.placement;if(!I)switch(d){case"bestFit":{var C;const L=(C=A.map(P=>[P.placement,P.overflows.filter(B=>B>0).reduce((B,N)=>B+N,0)]).sort((P,B)=>P[1]-B[1])[0])==null?void 0:C[0];L&&(I=L);break}case"initialPlacement":I=s;break}if(i!==I)return{reset:{placement:I}}}return{}}}};function Ej(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Dj(e){return xXt.some(t=>e[t]>=0)}const LXt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Yv(e,t);switch(r){case"referenceHidden":{const a=await a1(t,{...i,elementContext:"reference"}),o=Ej(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Dj(o)}}}case"escaped":{const a=await a1(t,{...i,altBoundary:!0}),o=Ej(a,n.floating);return{data:{escapedOffsets:o,escaped:Dj(o)}}}default:return{}}}}};async function PXt(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ad(n),s=U0(n),l=eS(n)==="y",u=["left","top"].includes(o)?-1:1,c=a&&l?-1:1,h=Yv(t,e);let{mainAxis:f,crossAxis:d,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...h};return s&&typeof p=="number"&&(d=s==="end"?p*-1:p),l?{x:d*c,y:f*u}:{x:f*u,y:d*c}}const RXt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:s}=t,l=await PXt(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:a+l.y,data:{...l,placement:o}}}}},OXt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:g=>{let{x:m,y:_}=g;return{x:m,y:_}}},...l}=Yv(e,t),u={x:n,y:r},c=await a1(t,l),h=eS(ad(i)),f=_lt(h);let d=u[f],p=u[h];if(a){const g=f==="y"?"top":"left",m=f==="y"?"bottom":"right",_=d+c[g],y=d-c[m];d=Y3(_,d,y)}if(o){const g=h==="y"?"top":"left",m=h==="y"?"bottom":"right",_=p+c[g],y=p-c[m];p=Y3(_,p,y)}const v=s.fn({...t,[f]:d,[h]:p});return{...v,data:{x:v.x-n,y:v.y-r}}}}},NXt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:a}=t,{apply:o=()=>{},...s}=Yv(e,t),l=await a1(t,s),u=ad(n),c=U0(n),h=eS(n)==="y",{width:f,height:d}=r.floating;let p,v;u==="top"||u==="bottom"?(p=u,v=c===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(v=u,p=c==="end"?"top":"bottom");const g=d-l[p],m=f-l[v],_=!t.middlewareData.shift;let y=g,x=m;if(h){const b=f-l.left-l.right;x=c||_?rd(m,b):b}else{const b=d-l.top-l.bottom;y=c||_?rd(g,b):b}if(_&&!c){const b=Xo(l.left,0),w=Xo(l.right,0),A=Xo(l.top,0),T=Xo(l.bottom,0);h?x=f-2*(b!==0||w!==0?b+w:Xo(l.left,l.right)):y=d-2*(A!==0||T!==0?A+T:Xo(l.top,l.bottom))}await o({...t,availableWidth:x,availableHeight:y});const S=await i.getDimensions(a.floating);return f!==S.width||d!==S.height?{reset:{rects:!0}}:{}}}};function od(e){return blt(e)?(e.nodeName||"").toLowerCase():"#document"}function Zo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dh(e){var t;return(t=(blt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function blt(e){return e instanceof Node||e instanceof Zo(e).Node}function ch(e){return e instanceof Element||e instanceof Zo(e).Element}function ju(e){return e instanceof HTMLElement||e instanceof Zo(e).HTMLElement}function Ij(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zo(e).ShadowRoot}function nS(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ws(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function BXt(e){return["table","td","th"].includes(od(e))}function jU(e){const t=YU(),n=Ws(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function kXt(e){let t=Vy(e);for(;ju(t)&&!g2(t);){if(jU(t))return t;t=Vy(t)}return null}function YU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function g2(e){return["html","body","#document"].includes(od(e))}function Ws(e){return Zo(e).getComputedStyle(e)}function m2(e){return ch(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Vy(e){if(od(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ij(e)&&e.host||Dh(e);return Ij(t)?t.host:t}function Slt(e){const t=Vy(e);return g2(t)?e.ownerDocument?e.ownerDocument.body:e.body:ju(t)&&nS(t)?t:Slt(t)}function o1(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Slt(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=Zo(i);return a?t.concat(o,o.visualViewport||[],nS(i)?i:[],o.frameElement&&n?o1(o.frameElement):[]):t.concat(i,o1(i,[],n))}function wlt(e){const t=Ws(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ju(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=RC(n)!==a||RC(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function qU(e){return ch(e)?e:e.contextElement}function jm(e){const t=qU(e);if(!ju(t))return id(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=wlt(t);let o=(a?RC(n.width):n.width)/r,s=(a?RC(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const FXt=id(0);function Tlt(e){const t=Zo(e);return!YU()||!t.visualViewport?FXt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function zXt(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zo(e)?!1:t}function Ev(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=qU(e);let o=id(1);t&&(r?ch(r)&&(o=jm(r)):o=jm(e));const s=zXt(a,n,r)?Tlt(a):id(0);let l=(i.left+s.x)/o.x,u=(i.top+s.y)/o.y,c=i.width/o.x,h=i.height/o.y;if(a){const f=Zo(a),d=r&&ch(r)?Zo(r):r;let p=f,v=p.frameElement;for(;v&&r&&d!==p;){const g=jm(v),m=v.getBoundingClientRect(),_=Ws(v),y=m.left+(v.clientLeft+parseFloat(_.paddingLeft))*g.x,x=m.top+(v.clientTop+parseFloat(_.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,h*=g.y,l+=y,u+=x,p=Zo(v),v=p.frameElement}}return NC({width:c,height:h,x:l,y:u})}const UXt=[":popover-open",":modal"];function Mlt(e){return UXt.some(t=>{try{return e.matches(t)}catch{return!1}})}function VXt(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=Dh(r),s=t?Mlt(t.floating):!1;if(r===o||s&&a)return n;let l={scrollLeft:0,scrollTop:0},u=id(1);const c=id(0),h=ju(r);if((h||!h&&!a)&&((od(r)!=="body"||nS(o))&&(l=m2(r)),ju(r))){const f=Ev(r);u=jm(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function GXt(e){return Array.from(e.getClientRects())}function Alt(e){return Ev(Dh(e)).left+m2(e).scrollLeft}function HXt(e){const t=Dh(e),n=m2(e),r=e.ownerDocument.body,i=Xo(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Xo(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Alt(e);const s=-n.scrollTop;return Ws(r).direction==="rtl"&&(o+=Xo(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}function WXt(e,t){const n=Zo(e),r=Dh(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;const u=YU();(!u||u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s,y:l}}function $Xt(e,t){const n=Ev(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=ju(e)?jm(e):id(1),o=e.clientWidth*a.x,s=e.clientHeight*a.y,l=i*a.x,u=r*a.y;return{width:o,height:s,x:l,y:u}}function Lj(e,t,n){let r;if(t==="viewport")r=WXt(e,n);else if(t==="document")r=HXt(Dh(e));else if(ch(t))r=$Xt(t,n);else{const i=Tlt(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return NC(r)}function Clt(e,t){const n=Vy(e);return n===t||!ch(n)||g2(n)?!1:Ws(n).position==="fixed"||Clt(n,t)}function XXt(e,t){const n=t.get(e);if(n)return n;let r=o1(e,[],!1).filter(s=>ch(s)&&od(s)!=="body"),i=null;const a=Ws(e).position==="fixed";let o=a?Vy(e):e;for(;ch(o)&&!g2(o);){const s=Ws(o),l=jU(o);!l&&s.position==="fixed"&&(i=null),(a?!l&&!i:!l&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||nS(o)&&!l&&Clt(e,o))?r=r.filter(c=>c!==o):i=s,o=Vy(o)}return t.set(e,r),r}function jXt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?XXt(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((u,c)=>{const h=Lj(t,c,i);return u.top=Xo(h.top,u.top),u.right=rd(h.right,u.right),u.bottom=rd(h.bottom,u.bottom),u.left=Xo(h.left,u.left),u},Lj(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YXt(e){const{width:t,height:n}=wlt(e);return{width:t,height:n}}function qXt(e,t,n){const r=ju(t),i=Dh(t),a=n==="fixed",o=Ev(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=id(0);if(r||!r&&!a)if((od(t)!=="body"||nS(i))&&(s=m2(t)),r){const h=Ev(t,!0,a,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=Alt(i));const u=o.left+s.scrollLeft-l.x,c=o.top+s.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function Pj(e,t){return!ju(e)||Ws(e).position==="fixed"?null:t?t(e):e.offsetParent}function Elt(e,t){const n=Zo(e);if(!ju(e)||Mlt(e))return n;let r=Pj(e,t);for(;r&&BXt(r)&&Ws(r).position==="static";)r=Pj(r,t);return r&&(od(r)==="html"||od(r)==="body"&&Ws(r).position==="static"&&!jU(r))?n:r||kXt(e)||n}const KXt=async function(e){const t=this.getOffsetParent||Elt,n=this.getDimensions;return{reference:qXt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function ZXt(e){return Ws(e).direction==="rtl"}const Dlt={convertOffsetParentRelativeRectToViewportRelativeRect:VXt,getDocumentElement:Dh,getClippingRect:jXt,getOffsetParent:Elt,getElementRects:KXt,getClientRects:GXt,getDimensions:YXt,getScale:jm,isElement:ch,isRTL:ZXt};function JXt(e,t){let n=null,r;const i=Dh(e);function a(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:u,top:c,width:h,height:f}=e.getBoundingClientRect();if(s||t(),!h||!f)return;const d=AT(c),p=AT(i.clientWidth-(u+h)),v=AT(i.clientHeight-(c+f)),g=AT(u),_={rootMargin:-d+"px "+-p+"px "+-v+"px "+-g+"px",threshold:Xo(0,rd(1,l))||1};let y=!0;function x(S){const b=S[0].intersectionRatio;if(b!==l){if(!y)return o();b?o(!1,b):r=setTimeout(()=>{o(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(x,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,_)}n.observe(e)}return o(!0),a}function QXt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=qU(e),c=i||a?[...u?o1(u):[],...o1(t)]:[];c.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),a&&m.addEventListener("resize",n)});const h=u&&s?JXt(u,n):null;let f=-1,d=null;o&&(d=new ResizeObserver(m=>{let[_]=m;_&&_.target===u&&d&&(d.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=d)==null||y.observe(t)})),n()}),u&&!l&&d.observe(u),d.observe(t));let p,v=l?Ev(e):null;l&&g();function g(){const m=Ev(e);v&&(m.x!==v.x||m.y!==v.y||m.width!==v.width||m.height!==v.height)&&n(),v=m,p=requestAnimationFrame(g)}return n(),()=>{var m;c.forEach(_=>{i&&_.removeEventListener("scroll",n),a&&_.removeEventListener("resize",n)}),h==null||h(),(m=d)==null||m.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const tjt=OXt,ejt=IXt,njt=NXt,rjt=LXt,ijt=DXt,ajt=(e,t,n)=>{const r=new Map,i={platform:Dlt,...n},a={...i.platform,_c:r};return EXt(e,t,{...i,platform:a})};let eR=new Map,K3=!1;try{K3=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let BC=!1;try{BC=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const Ilt={degree:{narrow:{default:"","ja-JP":" ","zh-TW":"","sl-SI":" "}}};class ojt{format(t){let n="";if(!K3&&this.options.signDisplay!=null?n=ljt(this.numberFormatter,this.options.signDisplay,t):n=this.numberFormatter.format(t),this.options.style==="unit"&&!BC){var r;let{unit:i,unitDisplay:a="short",locale:o}=this.resolvedOptions();if(!i)return n;let s=(r=Ilt[i])===null||r===void 0?void 0:r[a];n+=s[o]||s.default}return n}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,n);if(n<t)throw new RangeError("End date must be >= start date");return`${this.format(t)}  ${this.format(n)}`}formatRangeToParts(t,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,n);if(n<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),i=this.numberFormatter.formatToParts(n);return[...r.map(a=>({...a,source:"startRange"})),{type:"literal",value:"  ",source:"shared"},...i.map(a=>({...a,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!K3&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!BC&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,n={}){this.numberFormatter=sjt(t,n),this.options=n}}function sjt(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${n}`),t.style==="unit"&&!BC){var r;let{unit:o,unitDisplay:s="short"}=t;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=Ilt[o])===null||r===void 0)&&r[s]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${s}`);t={...t,style:"decimal"}}let i=e+(t?Object.entries(t).sort((o,s)=>o[0]<s[0]?-1:1).join():"");if(eR.has(i))return eR.get(i);let a=new Intl.NumberFormat(e,t);return eR.set(i,a),a}function ljt(e,t,n){if(t==="auto")return e.format(n);if(t==="never")return e.format(Math.abs(n));{let r=!1;if(t==="always"?r=n>0||Object.is(n,0):t==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=e.format(-n),a=e.format(n),o=i.replace(a,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(a,"!!!").replace(o,"+").replace("!!!",a)}else return e.format(n)}}var ujt=TM("splitter").parts("root","panel","resizeTrigger"),nR=ujt.build(),Kn=rXt({getRootId:e=>{var t;return((t=e.ids)==null?void 0:t.root)??`splitter:${e.id}`},getResizeTriggerId:(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.resizeTrigger)==null?void 0:r.call(n,t))??`splitter:${e.id}:splitter:${t}`},getLabelId:e=>{var t;return((t=e.ids)==null?void 0:t.label)??`splitter:${e.id}:label`},getPanelId:(e,t)=>{var n,r;return((r=(n=e.ids)==null?void 0:n.panel)==null?void 0:r.call(n,t))??`splitter:${e.id}:panel:${t}`},globalCursorId:e=>`splitter:${e.id}:global-cursor`,getRootEl:e=>Kn.getById(e,Kn.getRootId(e)),getResizeTriggerEl:(e,t)=>Kn.getById(e,Kn.getResizeTriggerId(e,t)),getPanelEl:(e,t)=>Kn.getById(e,Kn.getPanelId(e,t)),getCursor(e){const t=e.isHorizontal;let n=t?"col-resize":"row-resize";return e.activeResizeState.isAtMin&&(n=t?"e-resize":"s-resize"),e.activeResizeState.isAtMax&&(n=t?"w-resize":"n-resize"),n},getPanelStyle(e,t){var r;return{flexBasis:0,flexGrow:((r=e.panels.find(i=>i.id===t))==null?void 0:r.size)??"0",flexShrink:1,overflow:"hidden"}},getActiveHandleEl(e){const t=e.activeResizeId;if(t!=null)return Kn.getById(e,Kn.getResizeTriggerId(e,t))},getResizeTriggerEls(e){const t=CSS.escape(Kn.getRootId(e));return eXt(Kn.getRootEl(e),`[role=separator][data-ownedby='${t}']`)},setupGlobalCursor(e){const t=Kn.getById(e,Kn.globalCursorId(e)),n=`* { cursor: ${Kn.getCursor(e)} !important; }`;if(t)t.textContent=n;else{const r=Kn.getDoc(e).createElement("style");r.id=Kn.globalCursorId(e),r.textContent=n,Kn.getDoc(e).head.appendChild(r)}},removeGlobalCursor(e){var t;(t=Kn.getById(e,Kn.globalCursorId(e)))==null||t.remove()}});function Rj(e,t){if(Math.floor(t)>100)throw new Error(`Total ${e} of panels cannot be greater than 100`)}function cjt(e){let t=0,n=0,r=0;const i=e.size.map(l=>{const u=l.minSize??0,c=l.maxSize??100;return r+=u,l.size==null?t++:n+=l.size,{...l,minSize:u,maxSize:c}});Rj("minSize",r),Rj("size",n);let a=0,o=0;return i.map(l=>{let u=a;if(l.size!=null)return a+=l.size,o=l.size-l.minSize,{...l,start:u,end:a,remainingSize:o};const c=(100-n)/t;return a+=c,o=c-l.minSize,{...l,size:c,start:u,end:a,remainingSize:o}})}function KU(e,t=e.activeResizeId){const[n,r]=(t==null?void 0:t.split(":"))??[];if(!n||!r)return;const i=e.previousPanels.findIndex(l=>l.id===n),a=e.previousPanels.findIndex(l=>l.id===r);if(i===-1||a===-1)return;const o=e.previousPanels[i],s=e.previousPanels[a];return{before:{...o,index:i},after:{...s,index:a}}}function kC(e,t=e.activeResizeId){const n=KU(e,t);if(!n)return;const{before:r,after:i}=n;return{min:Math.max(r.start+r.minSize,i.end-i.maxSize),max:Math.min(i.end-i.minSize,r.maxSize+r.start)}}function Jg(e,t){const n=kC(e,t),r=KU(e,t);if(!n||!r)return;const{before:i,after:a}=r,o=Math.abs(i.start-n.min),s=a.size+(i.size-o),l=Math.abs(i.start-n.max),u=a.size-(l-i.size);return{before:{index:i.index,min:o,max:l,isAtMin:o===i.size,isAtMax:l===i.size,up(c){return Math.min(i.size+c,l)},down(c){return Math.max(i.size-c,o)}},after:{index:a.index,min:s,max:u,isAtMin:s===a.size,isAtMax:u===a.size,up(c){return Math.min(a.size+c,s)},down(c){return Math.max(a.size-c,u)}}}}function Oj(e,t,n){return Math.min(Math.max(e,t),n)}function hjt(e,t,n){const r=e.context.isHorizontal,i=e.hasTag("focus"),a=e.matches("dragging"),o=e.context.panels;function s(l){const{id:u,disabled:c}=l,f=u.split(":").map(p=>Kn.getPanelId(e.context,p)),d=kC(e.context,u);return{isDisabled:!!c,isFocused:e.context.activeResizeId===u&&i,panelIds:f,min:d==null?void 0:d.min,max:d==null?void 0:d.max,value:0}}return{isFocused:i,isDragging:a,getResizeTriggerState:s,bounds:kC(e.context),setToMinSize(l){const u=o.find(c=>c.id===l);t({type:"SET_PANEL_SIZE",id:l,size:u==null?void 0:u.minSize,src:"setToMinSize"})},setToMaxSize(l){const u=o.find(c=>c.id===l);t({type:"SET_PANEL_SIZE",id:l,size:u==null?void 0:u.maxSize,src:"setToMaxSize"})},setSize(l,u){t({type:"SET_PANEL_SIZE",id:l,size:u})},rootProps:n.element({...nR.root.attrs,"data-orientation":e.context.orientation,id:Kn.getRootId(e.context),dir:e.context.dir,style:{display:"flex",flexDirection:r?"row":"column",height:"100%",width:"100%",overflow:"hidden"}}),getPanelProps(l){const{id:u}=l;return n.element({...nR.panel.attrs,dir:e.context.dir,id:Kn.getPanelId(e.context,u),"data-ownedby":Kn.getRootId(e.context),style:Kn.getPanelStyle(e.context,u)})},getResizeTriggerProps(l){const{id:u,disabled:c,step:h=1}=l,f=s(l);return n.element({...nR.resizeTrigger.attrs,dir:e.context.dir,id:Kn.getResizeTriggerId(e.context,u),role:"separator","data-ownedby":Kn.getRootId(e.context),tabIndex:c?void 0:0,"aria-valuenow":f.value,"aria-valuemin":f.min,"aria-valuemax":f.max,"data-orientation":e.context.orientation,"aria-orientation":e.context.orientation,"aria-controls":f.panelIds.join(" "),"data-focus":Tj(f.isFocused),"data-disabled":Tj(c),style:{touchAction:"none",userSelect:"none",flex:"0 0 auto",pointerEvents:a&&!f.isFocused?"none":void 0,cursor:r?"col-resize":"row-resize",[r?"minHeight":"minWidth"]:"0"},onPointerDown(d){if(c){d.preventDefault();return}t({type:"POINTER_DOWN",id:u}),d.preventDefault(),d.stopPropagation()},onPointerOver(){c||t({type:"POINTER_OVER",id:u})},onPointerLeave(){c||t({type:"POINTER_LEAVE",id:u})},onBlur(){t("BLUR")},onFocus(){t({type:"FOCUS",id:u})},onDoubleClick(){c||t({type:"DOUBLE_CLICK",id:u})},onKeyDown(d){if(c)return;const p=vXt(d)*h,v={Enter(){t("ENTER")},ArrowUp(){t({type:"ARROW_UP",step:p})},ArrowDown(){t({type:"ARROW_DOWN",step:p})},ArrowLeft(){t({type:"ARROW_LEFT",step:p})},ArrowRight(){t({type:"ARROW_RIGHT",step:p})},Home(){t("HOME")},End(){t("END")}},g=lXt(d,e.context),m=v[g];m&&(m(d),d.preventDefault())}})}}}function fjt(e){const t=ylt(e);return $7t({id:"splitter",initial:"idle",context:{orientation:"horizontal",activeResizeId:null,previousPanels:[],size:[],initialSize:[],activeResizeState:{isAtMin:!1,isAtMax:!1},...t},created:["setPreviousPanels","setInitialSize"],watch:{size:["setActiveResizeState"]},computed:{isHorizontal:n=>n.orientation==="horizontal",panels:n=>cjt(n)},on:{SET_PANEL_SIZE:{actions:"setPanelSize"}},states:{idle:{entry:["clearActiveHandleId"],on:{POINTER_OVER:{target:"hover:temp",actions:["setActiveHandleId"]},FOCUS:{target:"focused",actions:["setActiveHandleId"]},DOUBLE_CLICK:{actions:["resetStartPanel","setPreviousPanels"]}}},"hover:temp":{after:{HOVER_DELAY:"hover"},on:{POINTER_DOWN:{target:"dragging",actions:["setActiveHandleId"]},POINTER_LEAVE:"idle"}},hover:{tags:["focus"],on:{POINTER_DOWN:"dragging",POINTER_LEAVE:"idle"}},focused:{tags:["focus"],on:{BLUR:"idle",POINTER_DOWN:{target:"dragging",actions:["setActiveHandleId"]},ARROW_LEFT:{guard:"isHorizontal",actions:["shrinkStartPanel","setPreviousPanels"]},ARROW_RIGHT:{guard:"isHorizontal",actions:["expandStartPanel","setPreviousPanels"]},ARROW_UP:{guard:"isVertical",actions:["shrinkStartPanel","setPreviousPanels"]},ARROW_DOWN:{guard:"isVertical",actions:["expandStartPanel","setPreviousPanels"]},ENTER:[{guard:"isStartPanelAtMax",actions:["setStartPanelToMin","setPreviousPanels"]},{actions:["setStartPanelToMax","setPreviousPanels"]}],HOME:{actions:["setStartPanelToMin","setPreviousPanels"]},END:{actions:["setStartPanelToMax","setPreviousPanels"]}}},dragging:{tags:["focus"],entry:"focusResizeHandle",activities:["trackPointerMove"],on:{POINTER_MOVE:{actions:["setPointerValue","setGlobalCursor"]},POINTER_UP:{target:"focused",actions:["invokeOnResizeEnd","setPreviousPanels","clearGlobalCursor","blurResizeHandle"]}}}}},{activities:{trackPointerMove:(n,r,{send:i})=>{const a=Kn.getDoc(n);return mXt(a,{onPointerMove(o){i({type:"POINTER_MOVE",point:o.point})},onPointerUp(){i("POINTER_UP")}})}},guards:{isStartPanelAtMin:n=>n.activeResizeState.isAtMin,isStartPanelAtMax:n=>n.activeResizeState.isAtMax,isHorizontal:n=>n.isHorizontal,isVertical:n=>!n.isHorizontal},delays:{HOVER_DELAY:250},actions:{setGlobalCursor(n){Kn.setupGlobalCursor(n)},clearGlobalCursor(n){Kn.removeGlobalCursor(n)},invokeOnResize(n){var r;(r=n.onSizeChange)==null||r.call(n,{size:Array.from(n.size),activeHandleId:n.activeResizeId})},invokeOnResizeEnd(n){var r;(r=n.onSizeChangeEnd)==null||r.call(n,{size:Array.from(n.size),activeHandleId:n.activeResizeId})},setActiveHandleId(n,r){n.activeResizeId=r.id},clearActiveHandleId(n){n.activeResizeId=null},setInitialSize(n){n.initialSize=n.panels.slice().map(r=>({id:r.id,size:r.size}))},setPanelSize(n,r){const{id:i,size:a}=r;n.size=n.size.map(o=>{const s=Oj(a,o.minSize??0,o.maxSize??100);return o.id===i?{...o,size:s}:o})},setStartPanelToMin(n){const r=Jg(n);if(!r)return;const{before:i,after:a}=r;n.size[i.index].size=i.min,n.size[a.index].size=a.min},setStartPanelToMax(n){const r=Jg(n);if(!r)return;const{before:i,after:a}=r;n.size[i.index].size=i.max,n.size[a.index].size=a.max},expandStartPanel(n,r){const i=Jg(n);if(!i)return;const{before:a,after:o}=i;n.size[a.index].size=a.up(r.step),n.size[o.index].size=o.down(r.step)},shrinkStartPanel(n,r){const i=Jg(n);if(!i)return;const{before:a,after:o}=i;n.size[a.index].size=a.down(r.step),n.size[o.index].size=o.up(r.step)},resetStartPanel(n,r){const i=Jg(n,r.id);if(!i)return;const{before:a,after:o}=i;n.size[a.index].size=n.initialSize[a.index].size,n.size[o.index].size=n.initialSize[o.index].size},focusResizeHandle(n){X3(()=>{var r;(r=Kn.getActiveHandleEl(n))==null||r.focus({preventScroll:!0})})},blurResizeHandle(n){X3(()=>{var r;(r=Kn.getActiveHandleEl(n))==null||r.blur()})},setPreviousPanels(n){n.previousPanels=n.panels.slice()},setActiveResizeState(n){const r=Jg(n);if(!r)return;const{before:i}=r;n.activeResizeState={isAtMin:i.isAtMin,isAtMax:i.isAtMax}},setPointerValue(n,r){const i=KU(n),a=kC(n);if(!i||!a)return;const o=Kn.getRootEl(n);if(!o)return;let u=gXt(r.point,o).getPercentValue({dir:n.dir,orientation:n.orientation})*100;n.activeResizeState={isAtMin:u<a.min,isAtMax:u>a.max},u=Oj(u,a.min,a.max);const{before:c,after:h}=i,f=u-c.end;n.size[c.index].size=c.size+f,n.size[h.index].size=h.size-f}}})}UU()(["dir","getRootNode","id","ids","onSizeChange","onSizeChangeEnd","orientation","size"]);UU()(["id","snapSize"]);UU()(["disabled","id","step"]);const[djt,Llt]=olt({hookName:"useSplitterContext",providerName:"<SplitterProvider />"}),$c=e=>{const[t,n]=GU()(e,["id","snapSize"]),r=Llt(),i=v2(()=>r().getPanelProps(t),n);return O(HU.div,i)},s1=e=>{const t=Llt(),[n,r]=GU()(e,["disabled","id","step"]),i=v2(()=>t().getResizeTriggerProps(n),r);return O(HU.button,i)},pjt=e=>{const t=_Xt(),n=v2({id:Ys(),getRootNode:t},e),[r,i]=M7t(fjt(n),{context:n});return mt(()=>hjt(r,i,S7t))},y2=e=>{const[t,n]=GU()(e,["dir","getRootNode","id","ids","onSizeChange","onSizeChangeEnd","orientation","size"]),r=pjt(t),i=()=>j7t(n.children,r),a=v2(()=>r().rootProps,n);return O(djt,{value:r,get children(){return O(HU.div,G(a,{get children(){return i()}}))}})};function vjt(e){return(...t)=>{for(const n of e)n&&n(...t)}}var _t=e=>typeof e=="function"&&!e.length?e():e,Nj=e=>Array.isArray(e)?e:e?[e]:[];function gjt(e,...t){return typeof e=="function"?e(...t):e}var mjt=Pe;function yjt(e,t,n,r){return e.addEventListener(t,n,r),mjt(e.removeEventListener.bind(e,t,n,r))}function _jt(e,t,n,r){const i=()=>{Nj(_t(e)).forEach(a=>{a&&Nj(_t(t)).forEach(o=>yjt(a,o,n,r))})};typeof e=="function"?Bt(i):pr(i)}var rR=Symbol("fallback");function Bj(e){for(const t of e)t.dispose()}function xjt(e,t,n,r={}){const i=new Map;return Pe(()=>Bj(i.values())),()=>{const o=e()||[];return o[ty],$e(()=>{var c,h;if(!o.length)return Bj(i.values()),i.clear(),r.fallback?[Yp(d=>(i.set(rR,{dispose:d}),r.fallback()))]:[];const s=new Array(o.length),l=i.get(rR);if(!i.size||l){l==null||l.dispose(),i.delete(rR);for(let f=0;f<o.length;f++){const d=o[f],p=t(d,f);a(s,d,f,p)}return s}const u=new Set(i.keys());for(let f=0;f<o.length;f++){const d=o[f],p=t(d,f);u.delete(p);const v=i.get(p);v?(s[f]=v.mapped,(c=v.setIndex)==null||c.call(v,f),v.setItem(()=>d)):a(s,d,f,p)}for(const f of u)(h=i.get(f))==null||h.dispose(),i.delete(f);return s})};function a(o,s,l,u){Yp(c=>{const[h,f]=rt(s),d={setItem:f,dispose:c};if(n.length>1){const[p,v]=rt(l);d.setIndex=v,d.mapped=n(h,p)}else d.mapped=n(h);i.set(u,d),o[l]=d.mapped})}}function bjt(e){const{by:t}=e;return mt(xjt(()=>e.each,typeof t=="function"?t:n=>n[t],e.children,"fallback"in e?{fallback:()=>e.fallback}:void 0))}function ci(...e){return vjt(e)}function Sjt(e,t,n=-1){return n in e?[...e.slice(0,n),t,...e.slice(n)]:[...e,t]}function kj(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function wjt(e){return typeof e=="number"}function hm(e){return Object.prototype.toString.call(e)==="[object String]"}function V0(e){return typeof e=="function"}function bd(e){return t=>`${e()}-${t}`}function Ef(e,t){return e?e===t||e.contains(t):!1}function xx(e,t=!1){const{activeElement:n}=Yu(e);if(!(n!=null&&n.nodeName))return null;if(Plt(n)&&n.contentDocument)return xx(n.contentDocument.body,t);if(t){const r=n.getAttribute("aria-activedescendant");if(r){const i=Yu(n).getElementById(r);if(i)return i}}return n}function Tjt(e){return Yu(e).defaultView||window}function Yu(e){return e?e.ownerDocument||e:document}function Plt(e){return e.tagName==="IFRAME"}var _2=(e=>(e.Escape="Escape",e.Enter="Enter",e.Tab="Tab",e.Space=" ",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e))(_2||{});function Rlt(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)==null?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function ZU(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)==null?void 0:t.platform)||window.navigator.platform):!1}function rS(){return ZU(/^Mac/i)}function Mjt(){return ZU(/^iPhone/i)}function Ajt(){return ZU(/^iPad/i)||rS()&&navigator.maxTouchPoints>1}function Cjt(){return Mjt()||Ajt()}function Ejt(){return rS()||Cjt()}function Djt(){return Rlt(/AppleWebKit/i)&&!Ijt()}function Ijt(){return Rlt(/Chrome/i)}function In(e,t){return t&&(V0(t)?t(e):t[0](t[1],e)),e==null?void 0:e.defaultPrevented}function Ls(e){return t=>{for(const n of e)In(t,n)}}function Ljt(e){return rS()?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey}function co(e){if(e)if(Pjt())e.focus({preventScroll:!0});else{const t=Rjt(e);e.focus(),Ojt(t)}}var CT=null;function Pjt(){if(CT==null){CT=!1;try{document.createElement("div").focus({get preventScroll(){return CT=!0,!0}})}catch{}}return CT}function Rjt(e){let t=e.parentNode;const n=[],r=document.scrollingElement||document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function Ojt(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}var Olt=["input:not([type='hidden']):not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","[tabindex]","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]:not([contenteditable='false'])"],Njt=[...Olt,'[tabindex]:not([tabindex="-1"]):not([disabled])'],JU=Olt.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])",Bjt=Njt.join(':not([hidden]):not([tabindex="-1"]),');function Nlt(e,t){const r=Array.from(e.querySelectorAll(JU)).filter(Fj);return t&&Fj(e)&&r.unshift(e),r.forEach((i,a)=>{if(Plt(i)&&i.contentDocument){const o=i.contentDocument.body,s=Nlt(o,!1);r.splice(a,1,...s)}}),r}function Fj(e){return Blt(e)&&!kjt(e)}function Blt(e){return e.matches(JU)&&QU(e)}function kjt(e){return parseInt(e.getAttribute("tabindex")||"0",10)<0}function QU(e,t){return e.nodeName!=="#comment"&&Fjt(e)&&zjt(e,t)&&(!e.parentElement||QU(e.parentElement,e))}function Fjt(e){if(!(e instanceof HTMLElement)&&!(e instanceof SVGElement))return!1;const{display:t,visibility:n}=e.style;let r=t!=="none"&&n!=="hidden"&&n!=="collapse";if(r){if(!e.ownerDocument.defaultView)return r;const{getComputedStyle:i}=e.ownerDocument.defaultView,{display:a,visibility:o}=i(e);r=a!=="none"&&o!=="hidden"&&o!=="collapse"}return r}function zjt(e,t){return!e.hasAttribute("hidden")&&(e.nodeName==="DETAILS"&&t&&t.nodeName!=="SUMMARY"?e.hasAttribute("open"):!0)}function Ujt(e,t,n){const r=t!=null&&t.tabbable?Bjt:JU,i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var o;return(o=t==null?void 0:t.from)!=null&&o.contains(a)?NodeFilter.FILTER_REJECT:a.matches(r)&&QU(a)&&!n&&(!(t!=null&&t.accept)||t.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return t!=null&&t.from&&(i.currentNode=t.from),i}function Vjt(){}function klt(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}function iR(e,t,n,r){const i=(e-(isNaN(t)?0:t))%r;let a=Math.abs(i)*2>=r?e+Math.sign(i)*(r-Math.abs(i)):e-i;isNaN(t)?!isNaN(n)&&a>n&&(a=Math.floor(n/r)*r):a<t?a=t:!isNaN(n)&&a>n&&(a=t+Math.floor((n-t)/r)*r);const o=r.toString(),s=o.indexOf("."),l=s>=0?o.length-s:0;if(l>0){const u=Math.pow(10,l);a=Math.round(a*u)/u}return a}function Bn(e,t){return G(e,t)}var $_=new Map,zj=new Set;function Uj(){if(typeof window>"u")return;const e=n=>{if(!n.target)return;let r=$_.get(n.target);r||(r=new Set,$_.set(n.target,r),n.target.addEventListener("transitioncancel",t)),r.add(n.propertyName)},t=n=>{if(!n.target)return;const r=$_.get(n.target);if(r&&(r.delete(n.propertyName),r.size===0&&(n.target.removeEventListener("transitioncancel",t),$_.delete(n.target)),$_.size===0)){for(const i of zj)i();zj.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?Uj():document.addEventListener("DOMContentLoaded",Uj));function Vj(e,t){const n=Gj(e,t,"left"),r=Gj(e,t,"top"),i=t.offsetWidth,a=t.offsetHeight;let o=e.scrollLeft,s=e.scrollTop;const l=o+e.offsetWidth,u=s+e.offsetHeight;n<=o?o=n:n+i>l&&(o+=n+i-l),r<=s?s=r:r+a>u&&(s+=r+a-u),e.scrollLeft=o,e.scrollTop=s}function Gj(e,t,n){const r=n==="left"?"offsetLeft":"offsetTop";let i=0;for(;t.offsetParent&&(i+=t[r],t.offsetParent!==e);){if(t.offsetParent.contains(e)){i-=e[r];break}t=t.offsetParent}return i}var iS={border:"0",clip:"rect(0 0 0 0)","clip-path":"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:"0",position:"absolute",width:"1px","white-space":"nowrap"};function tV(e){var o;const[t,n]=rt((o=e.defaultValue)==null?void 0:o.call(e)),r=mt(()=>{var s;return((s=e.value)==null?void 0:s.call(e))!==void 0}),i=mt(()=>{var s;return r()?(s=e.value)==null?void 0:s.call(e):t()});return[i,s=>{$e(()=>{var u;const l=gjt(s,i());return Object.is(l,i())||(r()||n(l),(u=e.onChange)==null||u.call(e,l)),l})}]}function Flt(e){const[t,n]=tV(e);return[()=>t()??!1,n]}function zlt(e){const[t,n]=tV(e);return[()=>t()??[],n]}var Ult=hr();function Gjt(){return Ln(Ult)}function Hjt(){const e=Gjt();if(e===void 0)throw new Error("[kobalte]: `useDomCollectionContext` must be used within a `DomCollectionProvider` component");return e}function Vlt(e,t){return!!(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING)}function Wjt(e,t){var i;const n=t.ref();if(!n)return-1;let r=e.length;if(!r)return-1;for(;r--;){const a=(i=e[r])==null?void 0:i.ref();if(a&&Vlt(a,n))return r+1}return 0}function $jt(e){const t=e.map((r,i)=>[i,r]);let n=!1;return t.sort(([r,i],[a,o])=>{const s=i.ref(),l=o.ref();return s===l||!s||!l?0:Vlt(s,l)?(r>a&&(n=!0),-1):(r<a&&(n=!0),1)}),n?t.map(([r,i])=>i):e}function Glt(e,t){const n=$jt(e);e!==n&&t(n)}function Xjt(e){var i,a;const t=e[0],n=(i=e[e.length-1])==null?void 0:i.ref();let r=(a=t==null?void 0:t.ref())==null?void 0:a.parentElement;for(;r;){if(n&&r.contains(n))return r;r=r.parentElement}return Yu(r).body}function jjt(e,t){Bt(()=>{const n=setTimeout(()=>{Glt(e(),t)});Pe(()=>clearTimeout(n))})}function Yjt(e,t){if(typeof IntersectionObserver!="function"){jjt(e,t);return}let n=[];Bt(()=>{const r=()=>{const o=!!n.length;n=e(),o&&Glt(e(),t)},i=Xjt(e()),a=new IntersectionObserver(r,{root:i});for(const o of e()){const s=o.ref();s&&a.observe(s)}Pe(()=>a.disconnect())})}function qjt(e={}){const[t,n]=zlt({value:()=>_t(e.items),onChange:a=>{var o;return(o=e.onItemsChange)==null?void 0:o.call(e,a)}});Yjt(t,n);const r=a=>(n(o=>{const s=Wjt(o,a);return Sjt(o,a,s)}),()=>{n(o=>{const s=o.filter(l=>l.ref()!==a.ref());return o.length===s.length?o:s})});return{DomCollectionProvider:a=>O(Ult.Provider,{value:{registerItem:r},get children(){return a.children}})}}function Kjt(e){const t=Hjt(),n=Bn({shouldRegisterItem:!0},e);Bt(()=>{if(!n.shouldRegisterItem)return;const r=t.registerItem(n.getItem());Pe(r)})}function Hlt(e){let t=e.startIndex??0;const n=e.startLevel??0,r=[],i=l=>{if(l==null)return"";const u=e.getKey??"key",c=hm(u)?l[u]:u(l);return c!=null?String(c):""},a=l=>{if(l==null)return"";const u=e.getTextValue??"textValue",c=hm(u)?l[u]:u(l);return c!=null?String(c):""},o=l=>{if(l==null)return!1;const u=e.getDisabled??"disabled";return(hm(u)?l[u]:u(l))??!1},s=l=>{var u;if(l!=null)return hm(e.getSectionChildren)?l[e.getSectionChildren]:(u=e.getSectionChildren)==null?void 0:u.call(e,l)};for(const l of e.dataSource){if(hm(l)||wjt(l)){r.push({type:"item",rawValue:l,key:String(l),textValue:String(l),disabled:o(l),level:n,index:t}),t++;continue}if(s(l)!=null){r.push({type:"section",rawValue:l,key:"",textValue:"",disabled:!1,level:n,index:t}),t++;const u=s(l)??[];if(u.length>0){const c=Hlt({dataSource:u,getKey:e.getKey,getTextValue:e.getTextValue,getDisabled:e.getDisabled,getSectionChildren:e.getSectionChildren,startIndex:t,startLevel:n+1});r.push(...c),t+=c.length}}else r.push({type:"item",rawValue:l,key:i(l),textValue:a(l),disabled:o(l),level:n,index:t}),t++}return r}function Zjt(e,t=[]){return mt(()=>{const n=Hlt({dataSource:_t(e.dataSource),getKey:_t(e.getKey),getTextValue:_t(e.getTextValue),getDisabled:_t(e.getDisabled),getSectionChildren:_t(e.getSectionChildren)});for(let r=0;r<t.length;r++)t[r]();return e.factory(n)})}var Jjt=new Set(["Avst","Arab","Armi","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Qjt=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function tYt(e){if(Intl.Locale){const n=new Intl.Locale(e).maximize().script??"";return Jjt.has(n)}const t=e.split("-")[0];return Qjt.has(t)}function eYt(e){return tYt(e)?"rtl":"ltr"}function Wlt(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:eYt(e)}}var Z3=Wlt(),bx=new Set;function Hj(){Z3=Wlt();for(const e of bx)e(Z3)}function nYt(){const[e,t]=rt(Z3),n=mt(()=>e());return ki(()=>{bx.size===0&&window.addEventListener("languagechange",Hj),bx.add(t),Pe(()=>{bx.delete(t),bx.size===0&&window.removeEventListener("languagechange",Hj)})}),{locale:()=>n().locale,direction:()=>n().direction}}var rYt=hr();function aS(){const e=nYt();return Ln(rYt)||e}var aR=new Map;function $lt(e){const{locale:t}=aS(),n=mt(()=>t()+(e?Object.entries(e).sort((r,i)=>r[0]<i[0]?-1:1).join():""));return mt(()=>{const r=n();let i;return aR.has(r)&&(i=aR.get(r)),i||(i=new Intl.Collator(t(),e),aR.set(r,i)),i})}function iYt(e){const{locale:t}=aS();return mt(()=>new ojt(t(),_t(e)))}var hu=class Xlt extends Set{constructor(n,r,i){super(n);_i(this,"anchorKey");_i(this,"currentKey");n instanceof Xlt?(this.anchorKey=r||n.anchorKey,this.currentKey=i||n.currentKey):(this.anchorKey=r,this.currentKey=i)}};function aYt(e){const[t,n]=tV(e);return[()=>t()??new hu,n]}function jlt(e){return Ejt()?e.altKey:e.ctrlKey}function fm(e){return rS()?e.metaKey:e.ctrlKey}function Wj(e){return new hu(e)}function Ylt(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function oYt(e){const t=Bn({selectionMode:"none",selectionBehavior:"toggle"},e),[n,r]=rt(!1),[i,a]=rt(),o=mt(()=>{const v=_t(t.selectedKeys);return v!=null?Wj(v):v}),s=mt(()=>{const v=_t(t.defaultSelectedKeys);return v!=null?Wj(v):new hu}),[l,u]=aYt({value:o,defaultValue:s,onChange:v=>{var g;return(g=t.onSelectionChange)==null?void 0:g.call(t,v)}}),[c,h]=rt(_t(t.selectionBehavior)),f=()=>_t(t.selectionMode),d=()=>_t(t.disallowEmptySelection)??!1,p=v=>{(_t(t.allowDuplicateSelectionEvents)||!Ylt(v,l()))&&u(v)};return Bt(()=>{const v=l();_t(t.selectionBehavior)==="replace"&&c()==="toggle"&&typeof v=="object"&&v.size===0&&h("replace")}),Bt(()=>{h(_t(t.selectionBehavior)??"toggle")}),{selectionMode:f,disallowEmptySelection:d,selectionBehavior:c,setSelectionBehavior:h,isFocused:n,setFocused:r,focusedKey:i,setFocusedKey:a,selectedKeys:l,setSelectedKeys:p}}function qlt(e){const[t,n]=rt(""),[r,i]=rt(-1);return{typeSelectHandlers:{onKeyDown:o=>{var f;if(_t(e.isDisabled))return;const s=_t(e.keyboardDelegate),l=_t(e.selectionManager);if(!s.getKeyForSearch)return;const u=sYt(o.key);if(!u||o.ctrlKey||o.metaKey)return;u===" "&&t().trim().length>0&&(o.preventDefault(),o.stopPropagation());let c=n(d=>d+u),h=s.getKeyForSearch(c,l.focusedKey())??s.getKeyForSearch(c);h==null&&lYt(c)&&(c=c[0],h=s.getKeyForSearch(c,l.focusedKey())??s.getKeyForSearch(c)),h!=null&&(l.setFocusedKey(h),(f=e.onTypeSelect)==null||f.call(e,h)),clearTimeout(r()),i(window.setTimeout(()=>n(""),500))}}}}function sYt(e){return e.length===1||!/^[A-Z]/i.test(e)?e:""}function lYt(e){return e.split("").every(t=>t===e[0])}function uYt(e,t,n){const i=G({selectOnFocus:()=>_t(e.selectionManager).selectionBehavior()==="replace"},e),a=()=>(n==null?void 0:n())??t(),{direction:o}=aS();let s={top:0,left:0};_jt(()=>_t(i.isVirtualized)?void 0:a(),"scroll",()=>{const v=a();v&&(s={top:v.scrollTop,left:v.scrollLeft})});const{typeSelectHandlers:l}=qlt({isDisabled:()=>_t(i.disallowTypeAhead),keyboardDelegate:()=>_t(i.keyboardDelegate),selectionManager:()=>_t(i.selectionManager)}),u=v=>{var w,A,T,M,C,E,D,I;In(v,l.onKeyDown),v.altKey&&v.key==="Tab"&&v.preventDefault();const g=t();if(!(g!=null&&g.contains(v.target)))return;const m=_t(i.selectionManager),_=_t(i.selectOnFocus),y=L=>{L!=null&&(m.setFocusedKey(L),v.shiftKey&&m.selectionMode()==="multiple"?m.extendSelection(L):_&&!jlt(v)&&m.replaceSelection(L))},x=_t(i.keyboardDelegate),S=_t(i.shouldFocusWrap),b=m.focusedKey();switch(v.key){case"ArrowDown":{if(x.getKeyBelow){v.preventDefault();let L;b!=null?L=x.getKeyBelow(b):L=(w=x.getFirstKey)==null?void 0:w.call(x),L==null&&S&&(L=(A=x.getFirstKey)==null?void 0:A.call(x,b)),y(L)}break}case"ArrowUp":{if(x.getKeyAbove){v.preventDefault();let L;b!=null?L=x.getKeyAbove(b):L=(T=x.getLastKey)==null?void 0:T.call(x),L==null&&S&&(L=(M=x.getLastKey)==null?void 0:M.call(x,b)),y(L)}break}case"ArrowLeft":{if(x.getKeyLeftOf){v.preventDefault();const L=o()==="rtl";let P;b!=null?P=x.getKeyLeftOf(b):P=L?(C=x.getFirstKey)==null?void 0:C.call(x):(E=x.getLastKey)==null?void 0:E.call(x),y(P)}break}case"ArrowRight":{if(x.getKeyRightOf){v.preventDefault();const L=o()==="rtl";let P;b!=null?P=x.getKeyRightOf(b):P=L?(D=x.getLastKey)==null?void 0:D.call(x):(I=x.getFirstKey)==null?void 0:I.call(x),y(P)}break}case"Home":if(x.getFirstKey){v.preventDefault();const L=x.getFirstKey(b,fm(v));L!=null&&(m.setFocusedKey(L),fm(v)&&v.shiftKey&&m.selectionMode()==="multiple"?m.extendSelection(L):_&&m.replaceSelection(L))}break;case"End":if(x.getLastKey){v.preventDefault();const L=x.getLastKey(b,fm(v));L!=null&&(m.setFocusedKey(L),fm(v)&&v.shiftKey&&m.selectionMode()==="multiple"?m.extendSelection(L):_&&m.replaceSelection(L))}break;case"PageDown":if(x.getKeyPageBelow&&b!=null){v.preventDefault();const L=x.getKeyPageBelow(b);y(L)}break;case"PageUp":if(x.getKeyPageAbove&&b!=null){v.preventDefault();const L=x.getKeyPageAbove(b);y(L)}break;case"a":fm(v)&&m.selectionMode()==="multiple"&&_t(i.disallowSelectAll)!==!0&&(v.preventDefault(),m.selectAll());break;case"Escape":v.defaultPrevented||(v.preventDefault(),_t(i.disallowEmptySelection)||m.clearSelection());break;case"Tab":if(!_t(i.allowsTabNavigation)){if(v.shiftKey)g.focus();else{const L=Ujt(g,{tabbable:!0});let P,B;do B=L.lastChild(),B&&(P=B);while(B);P&&!P.contains(document.activeElement)&&co(P)}break}}},c=v=>{var y,x;const g=_t(i.selectionManager),m=_t(i.keyboardDelegate),_=_t(i.selectOnFocus);if(g.isFocused()){v.currentTarget.contains(v.target)||g.setFocused(!1);return}if(v.currentTarget.contains(v.target)){if(g.setFocused(!0),g.focusedKey()==null){const S=w=>{w!=null&&(g.setFocusedKey(w),_&&g.replaceSelection(w))},b=v.relatedTarget;b&&v.currentTarget.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING?S(g.lastSelectedKey()??((y=m.getLastKey)==null?void 0:y.call(m))):S(g.firstSelectedKey()??((x=m.getFirstKey)==null?void 0:x.call(m)))}else if(!_t(i.isVirtualized)){const S=a();if(S){S.scrollTop=s.top,S.scrollLeft=s.left;const b=S.querySelector(`[data-key="${g.focusedKey()}"]`);b&&(co(b),Vj(S,b))}}}},h=v=>{const g=_t(i.selectionManager);v.currentTarget.contains(v.relatedTarget)||g.setFocused(!1)},f=v=>{a()===v.target&&v.preventDefault()},d=()=>{var S,b;const v=_t(i.autoFocus);if(!v)return;const g=_t(i.selectionManager),m=_t(i.keyboardDelegate);let _;v==="first"&&(_=(S=m.getFirstKey)==null?void 0:S.call(m)),v==="last"&&(_=(b=m.getLastKey)==null?void 0:b.call(m));const y=g.selectedKeys();y.size&&(_=y.values().next().value),g.setFocused(!0),g.setFocusedKey(_);const x=t();x&&_==null&&!_t(i.shouldUseVirtualFocus)&&co(x)};return ki(()=>{i.deferAutoFocus?setTimeout(d,0):d()}),Bt(la([a,()=>_t(i.isVirtualized),()=>_t(i.selectionManager).focusedKey()],v=>{var y;const[g,m,_]=v;if(m)_&&((y=i.scrollToKey)==null||y.call(i,_));else if(_&&g){const x=g.querySelector(`[data-key="${_}"]`);x&&Vj(g,x)}})),{tabIndex:mt(()=>{if(!_t(i.shouldUseVirtualFocus))return _t(i.selectionManager).focusedKey()==null?0:-1}),onKeyDown:u,onMouseDown:f,onFocusIn:c,onFocusOut:h}}function cYt(e,t){const n=()=>_t(e.selectionManager),r=()=>_t(e.key),i=()=>_t(e.shouldUseVirtualFocus),a=_=>{n().selectionMode()!=="none"&&(n().selectionMode()==="single"?n().isSelected(r())&&!n().disallowEmptySelection()?n().toggleSelection(r()):n().replaceSelection(r()):_!=null&&_.shiftKey?n().extendSelection(r()):n().selectionBehavior()==="toggle"||fm(_)||"pointerType"in _&&_.pointerType==="touch"?n().toggleSelection(r()):n().replaceSelection(r()))},o=()=>n().isSelected(r()),s=()=>_t(e.disabled)||n().isDisabled(r()),l=()=>!s()&&n().canSelectItem(r());let u=null;const c=_=>{l()&&(u=_.pointerType,_.pointerType==="mouse"&&_.button===0&&!_t(e.shouldSelectOnPressUp)&&a(_))},h=_=>{l()&&_.pointerType==="mouse"&&_.button===0&&_t(e.shouldSelectOnPressUp)&&_t(e.allowsDifferentPressOrigin)&&a(_)},f=_=>{l()&&(_t(e.shouldSelectOnPressUp)&&!_t(e.allowsDifferentPressOrigin)||u!=="mouse")&&a(_)},d=_=>{!l()||!["Enter"," "].includes(_.key)||(jlt(_)?n().toggleSelection(r()):a(_))},p=_=>{s()&&_.preventDefault()},v=_=>{const y=t();i()||s()||!y||_.target===y&&n().setFocusedKey(r())},g=mt(()=>{if(!(i()||s()))return r()===n().focusedKey()?0:-1}),m=mt(()=>_t(e.virtualized)?void 0:r());return Bt(la([t,r,i,()=>n().focusedKey(),()=>n().isFocused()],([_,y,x,S,b])=>{_&&y===S&&b&&!x&&document.activeElement!==_&&(e.focus?e.focus():co(_))})),{isSelected:o,isDisabled:s,allowsSelection:l,tabIndex:g,dataKey:m,onPointerDown:c,onPointerUp:h,onClick:f,onKeyDown:d,onMouseDown:p,onFocus:v}}var hYt=class{constructor(e,t){_i(this,"collection");_i(this,"state");this.collection=e,this.state=t}selectionMode(){return this.state.selectionMode()}disallowEmptySelection(){return this.state.disallowEmptySelection()}selectionBehavior(){return this.state.selectionBehavior()}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}isFocused(){return this.state.isFocused()}setFocused(e){this.state.setFocused(e)}focusedKey(){return this.state.focusedKey()}setFocusedKey(e){(e==null||this.collection().getItem(e))&&this.state.setFocusedKey(e)}selectedKeys(){return this.state.selectedKeys()}isSelected(e){if(this.state.selectionMode()==="none")return!1;const t=this.getKey(e);return t==null?!1:this.state.selectedKeys().has(t)}isEmpty(){return this.state.selectedKeys().size===0}isSelectAll(){if(this.isEmpty())return!1;const e=this.state.selectedKeys();return this.getAllSelectableKeys().every(t=>e.has(t))}firstSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=(n==null?void 0:n.index)!=null&&(e==null?void 0:e.index)!=null&&n.index<e.index;(!e||r)&&(e=n)}return e==null?void 0:e.key}lastSelectedKey(){let e;for(const t of this.state.selectedKeys()){const n=this.collection().getItem(t),r=(n==null?void 0:n.index)!=null&&(e==null?void 0:e.index)!=null&&n.index>e.index;(!e||r)&&(e=n)}return e==null?void 0:e.key}extendSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=this.state.selectedKeys(),r=n.anchorKey||t,i=new hu(n,r,t);for(const a of this.getKeyRange(r,n.currentKey||t))i.delete(a);for(const a of this.getKeyRange(t,r))this.canSelectItem(a)&&i.add(a);this.state.setSelectedKeys(i)}getKeyRange(e,t){const n=this.collection().getItem(e),r=this.collection().getItem(t);return n&&r?n.index!=null&&r.index!=null&&n.index<=r.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){const n=[];let r=e;for(;r!=null;){const i=this.collection().getItem(r);if(i&&i.type==="item"&&n.push(r),r===t)return n;r=this.collection().getKeyAfter(r)}return[]}getKey(e){const t=this.collection().getItem(e);return t?!t||t.type!=="item"?null:t.key:e}toggleSelection(e){if(this.selectionMode()==="none")return;if(this.selectionMode()==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}const t=this.getKey(e);if(t==null)return;const n=new hu(this.state.selectedKeys());n.has(t)?n.delete(t):this.canSelectItem(t)&&(n.add(t),n.anchorKey=t,n.currentKey=t),!(this.disallowEmptySelection()&&n.size===0)&&this.state.setSelectedKeys(n)}replaceSelection(e){if(this.selectionMode()==="none")return;const t=this.getKey(e);if(t==null)return;const n=this.canSelectItem(t)?new hu([t],t,t):new hu;this.state.setSelectedKeys(n)}setSelectedKeys(e){if(this.selectionMode()==="none")return;const t=new hu;for(const n of e){const r=this.getKey(n);if(r!=null&&(t.add(r),this.selectionMode()==="single"))break}this.state.setSelectedKeys(t)}selectAll(){this.selectionMode()==="multiple"&&this.state.setSelectedKeys(new Set(this.getAllSelectableKeys()))}clearSelection(){const e=this.state.selectedKeys();!this.disallowEmptySelection()&&e.size>0&&this.state.setSelectedKeys(new hu)}toggleSelectAll(){this.isSelectAll()?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode()!=="none"&&(this.selectionMode()==="single"?this.isSelected(e)&&!this.disallowEmptySelection()?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior()==="toggle"||t&&t.pointerType==="touch"?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys())return!0;const t=this.selectedKeys();if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;for(const n of t)if(!e.has(n))return!1;return!0}canSelectItem(e){if(this.state.selectionMode()==="none")return!1;const t=this.collection().getItem(e);return t!=null&&!t.disabled}isDisabled(e){const t=this.collection().getItem(e);return!t||t.disabled}getAllSelectableKeys(){const e=[];return(n=>{for(;n!=null;){if(this.canSelectItem(n)){const r=this.collection().getItem(n);if(!r)continue;r.type==="item"&&e.push(n)}n=this.collection().getKeyAfter(n)}})(this.collection().getFirstKey()),e}},$j=class{constructor(e){_i(this,"keyMap",new Map);_i(this,"iterable");_i(this,"firstKey");_i(this,"lastKey");this.iterable=e;for(const r of e)this.keyMap.set(r.key,r);if(this.keyMap.size===0)return;let t,n=0;for(const[r,i]of this.keyMap)t?(t.nextKey=r,i.prevKey=t.key):(this.firstKey=r,i.prevKey=void 0),i.type==="item"&&(i.index=n++),t=i,t.nextKey=void 0;this.lastKey=t.key}*[Symbol.iterator](){yield*this.iterable}getSize(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){var t;return(t=this.keyMap.get(e))==null?void 0:t.prevKey}getKeyAfter(e){var t;return(t=this.keyMap.get(e))==null?void 0:t.nextKey}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}};function Klt(e){const t=oYt(e),r=Zjt({dataSource:()=>_t(e.dataSource),getKey:()=>_t(e.getKey),getTextValue:()=>_t(e.getTextValue),getDisabled:()=>_t(e.getDisabled),getSectionChildren:()=>_t(e.getSectionChildren),factory:a=>e.filter?new $j(e.filter(a)):new $j(a)},[()=>e.filter]),i=new hYt(r,t);return mB(()=>{const a=t.focusedKey();a!=null&&!r().getItem(a)&&t.setFocusedKey(void 0)}),{collection:r,selectionManager:()=>i}}function eV(e){const[t,n]=rt();let r={},i=e(),a="none";const[o,s]=fYt(e()?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Bt(la(o,l=>{const u=ET(r);a=l==="mounted"?u:"none"})),Bt(la(e,l=>{if(i===l)return;const u=ET(r);l?s("MOUNT"):(r==null?void 0:r.display)==="none"?s("UNMOUNT"):s(i&&a!==u?"ANIMATION_OUT":"UNMOUNT"),i=l})),Bt(la(t,l=>{if(l){const u=h=>{const d=ET(r).includes(h.animationName);h.target===l&&d&&s("ANIMATION_END")},c=h=>{h.target===l&&(a=ET(r))};l.addEventListener("animationstart",c),l.addEventListener("animationcancel",u),l.addEventListener("animationend",u),Pe(()=>{l.removeEventListener("animationstart",c),l.removeEventListener("animationcancel",u),l.removeEventListener("animationend",u)})}else s("ANIMATION_END")})),{isPresent:()=>["mounted","unmountSuspended"].includes(o()),setRef:l=>{l&&(r=getComputedStyle(l)),n(l)}}}function ET(e){return(e==null?void 0:e.animationName)||"none"}function fYt(e,t){const n=(o,s)=>t[o][s]??o,[r,i]=rt(e);return[r,o=>{i(s=>n(s,o))}]}function qn(e){const[t,n]=Yt(e,["as"]);if(!t.as)throw new Error("[kobalte]: Polymorphic is missing the required `as` prop.");return O(ry,G({get component(){return t.as}},n))}var dYt=Object.defineProperty,Ih=(e,t)=>{for(var n in t)dYt(e,n,{get:t[n],enumerable:!0})};function Eu(e){return t=>(e(t),()=>e(void 0))}function nV(e,t){const[n,r]=rt(Xj(t==null?void 0:t()));return Bt(()=>{var i;r(((i=e())==null?void 0:i.tagName.toLowerCase())||Xj(t==null?void 0:t()))}),n}function Xj(e){return hm(e)?e:void 0}var x2=["id","name","validationState","required","disabled","readOnly"];function b2(e){const t=`form-control-${Ys()}`,n=Bn({id:t},e),[r,i]=rt(),[a,o]=rt(),[s,l]=rt(),[u,c]=rt(),h=(v,g,m)=>{const _=m!=null||r()!=null;return[m,r(),_&&g!=null?v:void 0].filter(Boolean).join(" ")||void 0},f=v=>[s(),u(),v].filter(Boolean).join(" ")||void 0,d=mt(()=>({"data-valid":_t(n.validationState)==="valid"?"":void 0,"data-invalid":_t(n.validationState)==="invalid"?"":void 0,"data-required":_t(n.required)?"":void 0,"data-disabled":_t(n.disabled)?"":void 0,"data-readonly":_t(n.readOnly)?"":void 0}));return{formControlContext:{name:()=>_t(n.name)??_t(n.id),dataset:d,validationState:()=>_t(n.validationState),isRequired:()=>_t(n.required),isDisabled:()=>_t(n.disabled),isReadOnly:()=>_t(n.readOnly),labelId:r,fieldId:a,descriptionId:s,errorMessageId:u,getAriaLabelledBy:h,getAriaDescribedBy:f,generateId:bd(()=>_t(n.id)),registerLabel:Eu(i),registerField:Eu(o),registerDescription:Eu(l),registerErrorMessage:Eu(c)}}}var oS=hr();function Lo(){const e=Ln(oS);if(e===void 0)throw new Error("[kobalte]: `useFormControlContext` must be used within a `FormControlContext.Provider` component");return e}function G0(e){const t=Lo(),n=Bn({id:t.generateId("description")},e);return Bt(()=>Pe(t.registerDescription(n.id))),O(qn,G({as:"div"},()=>t.dataset(),n))}function H0(e){const t=Lo(),n=Bn({id:t.generateId("error-message")},e),[r,i]=Yt(n,["forceMount"]),a=()=>t.validationState()==="invalid";return Bt(()=>{a()&&Pe(t.registerErrorMessage(i.id))}),O(Xe,{get when(){return r.forceMount||a()},get children(){return O(qn,G({as:"div"},()=>t.dataset(),i))}})}function sS(e){let t;const n=Lo(),r=Bn({id:n.generateId("label")},e),[i,a]=Yt(r,["ref"]),o=nV(()=>t,()=>"label");return Bt(()=>Pe(n.registerLabel(a.id))),O(qn,G({as:"label",ref(s){var l=ci(u=>t=u,i.ref);typeof l=="function"&&l(s)},get for(){return mt(()=>o()==="label")()?n.fieldId():void 0}},()=>n.dataset(),a))}var lS=["id","aria-label","aria-labelledby","aria-describedby"];function uS(e){const t=Lo(),n=Bn({id:t.generateId("field")},e);return Bt(()=>Pe(t.registerField(_t(n.id)))),{fieldProps:{id:()=>_t(n.id),ariaLabel:()=>_t(n["aria-label"]),ariaLabelledBy:()=>t.getAriaLabelledBy(_t(n.id),_t(n["aria-label"]),_t(n["aria-labelledby"])),ariaDescribedBy:()=>t.getAriaDescribedBy(_t(n["aria-describedby"]))}}}function S2(e,t){Bt(la(e,n=>{if(n==null)return;const r=pYt(n);r!=null&&(r.addEventListener("reset",t,{passive:!0}),Pe(()=>{r.removeEventListener("reset",t)}))}))}function pYt(e){return vYt(e)?e.form:e.closest("form")}function vYt(e){return e.matches("textarea, input, select, button")}var FC="data-kb-top-layer",Zlt,J3=!1,hh=[];function l1(e){return hh.findIndex(t=>t.node===e)}function gYt(e){return hh[l1(e)]}function mYt(e){return hh[hh.length-1].node===e}function Jlt(){return hh.filter(e=>e.isPointerBlocking)}function yYt(){return[...Jlt()].slice(-1)[0]}function rV(){return Jlt().length>0}function Qlt(e){var n;const t=l1((n=yYt())==null?void 0:n.node);return l1(e)<t}function _Yt(e){hh.push(e)}function xYt(e){const t=l1(e);t<0||hh.splice(t,1)}function bYt(){for(const{node:e}of hh)e.style.pointerEvents=Qlt(e)?"none":"auto"}function SYt(e){if(rV()&&!J3){const t=Yu(e);Zlt=document.body.style.pointerEvents,t.body.style.pointerEvents="none",J3=!0}}function wYt(e){if(rV())return;const t=Yu(e);t.body.style.pointerEvents=Zlt,t.body.style.length===0&&t.body.removeAttribute("style"),J3=!1}var Fo={layers:hh,isTopMostLayer:mYt,hasPointerBlockingLayer:rV,isBelowPointerBlockingLayer:Qlt,addLayer:_Yt,removeLayer:xYt,indexOf:l1,find:gYt,assignPointerEventToLayers:bYt,disableBodyPointerEvents:SYt,restoreBodyPointerEvents:wYt},TYt={};Ih(TYt,{Button:()=>CYt,Root:()=>cS});var MYt=["button","color","file","image","reset","submit"];function AYt(e){const t=e.tagName.toLowerCase();return t==="button"?!0:t==="input"&&e.type?MYt.indexOf(e.type)!==-1:!1}function cS(e){let t;const n=Bn({type:"button"},e),[r,i]=Yt(n,["ref","type","disabled"]),a=nV(()=>t,()=>"button"),o=mt(()=>{const u=a();return u==null?!1:AYt({tagName:u,type:r.type})}),s=mt(()=>a()==="input"),l=mt(()=>a()==="a"&&(t==null?void 0:t.getAttribute("href"))!=null);return O(qn,G({as:"button",ref(u){var c=ci(h=>t=h,r.ref);typeof c=="function"&&c(u)},get type(){return o()||s()?r.type:void 0},get role(){return!o()&&!l()?"button":void 0},get tabIndex(){return!o()&&!l()&&!r.disabled?0:void 0},get disabled(){return o()||s()?r.disabled:void 0},get"aria-disabled"(){return!o()&&!s()&&r.disabled?!0:void 0},get"data-disabled"(){return r.disabled?"":void 0}},i))}var CYt=cS;function iV(e={}){const[t,n]=Flt({value:()=>_t(e.isSelected),defaultValue:()=>!!_t(e.defaultIsSelected),onChange:a=>{var o;return(o=e.onSelectedChange)==null?void 0:o.call(e,a)}});return{isSelected:t,setIsSelected:a=>{!_t(e.isReadOnly)&&!_t(e.isDisabled)&&n(a)},toggle:()=>{!_t(e.isReadOnly)&&!_t(e.isDisabled)&&n(!t())}}}var AM={};Ih(AM,{Root:()=>tut,ToggleButton:()=>DYt});function tut(e){const[t,n]=Yt(e,["children","pressed","defaultPressed","onChange","onClick"]),r=iV({isSelected:()=>t.pressed,defaultIsSelected:()=>t.defaultPressed,onSelectedChange:a=>{var o;return(o=t.onChange)==null?void 0:o.call(t,a)},isDisabled:()=>n.disabled});return O(cS,G({get"aria-pressed"(){return r.isSelected()},get"data-pressed"(){return r.isSelected()?"":void 0},onClick:a=>{In(a,t.onClick),r.toggle()}},n,{get children(){return O(EYt,{get state(){return{pressed:r.isSelected}},get children(){return t.children}})}}))}function EYt(e){const t=Er(()=>{const n=e.children;return V0(n)?n(e.state):n});return mt(t)}var DYt=tut,IYt=ee('<svg display=block viewBox="0 0 30 30"><g><path fill=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z></path><path stroke=none d=M23,27.8c1.1,1.2,3.4,2.2,5,2.2h2H0h2c1.7,0,3.9-1,5-2.2l6.6-7.2c0.7-0.8,2-0.8,2.7,0L23,27.8L23,27.8z>'),aV=hr();function oV(){const e=Ln(aV);if(e===void 0)throw new Error("[kobalte]: `usePopperContext` must be used within a `Popper` component");return e}var Q3=30,jj=Q3/2,LYt={top:180,right:-90,bottom:0,left:90};function sV(e){const t=oV(),n=Bn({size:Q3},e),[r,i]=Yt(n,["ref","style","size"]),a=()=>t.currentPlacement().split("-")[0],o=PYt(t.contentRef),s=()=>{var f;return((f=o())==null?void 0:f.getPropertyValue("background-color"))||"none"},l=()=>{var f;return((f=o())==null?void 0:f.getPropertyValue(`border-${a()}-color`))||"none"},u=()=>{var f;return((f=o())==null?void 0:f.getPropertyValue(`border-${a()}-width`))||"0px"},c=()=>parseInt(u())*2*(Q3/r.size),h=()=>`rotate(${LYt[a()]} ${jj} ${jj})`;return O(qn,G({as:"div",ref(f){var d=ci(t.setArrowRef,r.ref);typeof d=="function"&&d(f)},"aria-hidden":"true",get style(){return{position:"absolute","font-size":`${r.size}px`,width:"1em",height:"1em","pointer-events":"none",fill:s(),stroke:l(),"stroke-width":c(),...r.style}}},i,{get children(){var f=IYt(),d=f.firstChild,p=d.firstChild;return p.nextSibling,pr(()=>uv(d,"transform",h())),f}}))}function PYt(e){const[t,n]=rt();return Bt(()=>{const r=e();r&&n(Tjt(r).getComputedStyle(r))}),t}function RYt(e){const t=oV(),[n,r]=Yt(e,["ref","style"]);return O(qn,G({as:"div",ref(i){var a=ci(t.setPositionerRef,n.ref);typeof a=="function"&&a(i)},"data-popper-positioner":"",get style(){return{position:"absolute",top:0,left:0,"min-width":"max-content",...n.style}}},r))}function Yj(e){const{x:t=0,y:n=0,width:r=0,height:i=0}=e??{};if(typeof DOMRect=="function")return new DOMRect(t,n,r,i);const a={x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:n+i,left:t};return{...a,toJSON:()=>a}}function OYt(e,t){return{contextElement:e,getBoundingClientRect:()=>{const r=t(e);return r?Yj(r):e?e.getBoundingClientRect():Yj()}}}function NYt(e){return/^(?:top|bottom|left|right)(?:-(?:start|end))?$/.test(e)}var BYt={top:"bottom",right:"left",bottom:"top",left:"right"};function kYt(e,t){const[n,r]=e.split("-"),i=BYt[n];return r?n==="left"||n==="right"?`${i} ${r==="start"?"top":"bottom"}`:r==="start"?`${i} ${t==="rtl"?"right":"left"}`:`${i} ${t==="rtl"?"left":"right"}`:`${i} center`}function FYt(e){const t=Bn({getAnchorRect:f=>f==null?void 0:f.getBoundingClientRect(),placement:"bottom",gutter:0,shift:0,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,hideWhenDetached:!1,detachedPadding:0,arrowPadding:4,overflowPadding:8},e),[n,r]=rt(),[i,a]=rt(),[o,s]=rt(t.placement),l=()=>{var f;return OYt((f=t.anchorRef)==null?void 0:f.call(t),t.getAnchorRect)},{direction:u}=aS();async function c(){var b,w;const f=l(),d=n(),p=i();if(!f||!d)return;const v=((p==null?void 0:p.clientHeight)||0)/2,g=typeof t.gutter=="number"?t.gutter+v:t.gutter??v;d.style.setProperty("--kb-popper-content-overflow-padding",`${t.overflowPadding}px`),f.getBoundingClientRect();const m=[RXt(({placement:A})=>{const T=!!A.split("-")[1];return{mainAxis:g,crossAxis:T?void 0:t.shift,alignmentAxis:t.shift}})];if(t.flip!==!1){const A=typeof t.flip=="string"?t.flip.split(" "):void 0;if(A!==void 0&&!A.every(NYt))throw new Error("`flip` expects a spaced-delimited list of placements");m.push(ejt({padding:t.overflowPadding,fallbackPlacements:A}))}(t.slide||t.overlap)&&m.push(tjt({mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding})),m.push(njt({padding:t.overflowPadding,apply({availableWidth:A,availableHeight:T,rects:M}){const C=Math.round(M.reference.width);A=Math.floor(A),T=Math.floor(T),d.style.setProperty("--kb-popper-anchor-width",`${C}px`),d.style.setProperty("--kb-popper-content-available-width",`${A}px`),d.style.setProperty("--kb-popper-content-available-height",`${T}px`),t.sameWidth&&(d.style.width=`${C}px`),t.fitViewport&&(d.style.maxWidth=`${A}px`,d.style.maxHeight=`${T}px`)}})),t.hideWhenDetached&&m.push(rjt({padding:t.detachedPadding})),p&&m.push(ijt({element:p,padding:t.arrowPadding}));const _=await ajt(f,d,{placement:t.placement,strategy:"absolute",middleware:m,platform:{...Dlt,isRTL:()=>u()==="rtl"}});if(s(_.placement),(b=t.onCurrentPlacementChange)==null||b.call(t,_.placement),!d)return;d.style.setProperty("--kb-popper-content-transform-origin",kYt(_.placement,u()));const y=Math.round(_.x),x=Math.round(_.y);let S;if(t.hideWhenDetached&&(S=(w=_.middlewareData.hide)!=null&&w.referenceHidden?"hidden":"visible"),Object.assign(d.style,{top:"0",left:"0",transform:`translate3d(${y}px, ${x}px, 0)`,visibility:S}),p&&_.middlewareData.arrow){const{x:A,y:T}=_.middlewareData.arrow,M=_.placement.split("-")[0];Object.assign(p.style,{left:A!=null?`${A}px`:"",top:T!=null?`${T}px`:"",[M]:"100%"})}}Bt(()=>{const f=l(),d=n();if(!f||!d)return;const p=QXt(f,d,c,{elementResize:typeof ResizeObserver=="function"});Pe(p)}),Bt(()=>{var p;const f=n(),d=(p=t.contentRef)==null?void 0:p.call(t);!f||!d||queueMicrotask(()=>{f.style.zIndex=getComputedStyle(d).zIndex})});const h={currentPlacement:o,contentRef:()=>{var f;return(f=t.contentRef)==null?void 0:f.call(t)},setPositionerRef:r,setArrowRef:a};return O(aV.Provider,{value:h,get children(){return t.children}})}var eut=Object.assign(FYt,{Arrow:sV,Context:aV,usePopperContext:oV,Positioner:RYt});function zYt(e){const t=n=>{var r;n.key===_2.Escape&&((r=e.onEscapeKeyDown)==null||r.call(e,n))};Bt(()=>{var r;if(_t(e.isDisabled))return;const n=((r=e.ownerDocument)==null?void 0:r.call(e))??Yu();n.addEventListener("keydown",t),Pe(()=>{n.removeEventListener("keydown",t)})})}var qj="interactOutside.pointerDownOutside",Kj="interactOutside.focusOutside";function UYt(e,t){let n,r=Vjt;const i=()=>Yu(t()),a=h=>{var f;return(f=e.onPointerDownOutside)==null?void 0:f.call(e,h)},o=h=>{var f;return(f=e.onFocusOutside)==null?void 0:f.call(e,h)},s=h=>{var f;return(f=e.onInteractOutside)==null?void 0:f.call(e,h)},l=h=>{var d;const f=h.target;return!(f instanceof HTMLElement)||f.closest(`[${FC}]`)||!Ef(i(),f)||Ef(t(),f)?!1:!((d=e.shouldExcludeElement)!=null&&d.call(e,f))},u=h=>{function f(){const d=t(),p=h.target;if(!d||!p||!l(h))return;const v=Ls([a,s]);p.addEventListener(qj,v,{once:!0});const g=new CustomEvent(qj,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,isContextMenu:h.button===2||Ljt(h)&&h.button===0}});p.dispatchEvent(g)}h.pointerType==="touch"?(i().removeEventListener("click",f),r=f,i().addEventListener("click",f,{once:!0})):f()},c=h=>{const f=t(),d=h.target;if(!f||!d||!l(h))return;const p=Ls([o,s]);d.addEventListener(Kj,p,{once:!0});const v=new CustomEvent(Kj,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,isContextMenu:!1}});d.dispatchEvent(v)};Bt(()=>{_t(e.isDisabled)||(n=window.setTimeout(()=>{i().addEventListener("pointerdown",u,!0)},0),i().addEventListener("focusin",c,!0),Pe(()=>{window.clearTimeout(n),i().removeEventListener("click",r),i().removeEventListener("pointerdown",u,!0),i().removeEventListener("focusin",c,!0)}))})}var nut=hr();function VYt(){return Ln(nut)}function GYt(e){let t;const n=VYt(),[r,i]=Yt(e,["ref","disableOutsidePointerEvents","excludedElements","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","bypassTopMostLayerCheck"]),a=new Set([]),o=h=>{a.add(h);const f=n==null?void 0:n.registerNestedLayer(h);return()=>{a.delete(h),f==null||f()}};UYt({shouldExcludeElement:h=>{var f;return t?((f=r.excludedElements)==null?void 0:f.some(d=>Ef(d(),h)))||[...a].some(d=>Ef(d,h)):!1},onPointerDownOutside:h=>{var f,d,p;!t||Fo.isBelowPointerBlockingLayer(t)||!r.bypassTopMostLayerCheck&&!Fo.isTopMostLayer(t)||((f=r.onPointerDownOutside)==null||f.call(r,h),(d=r.onInteractOutside)==null||d.call(r,h),h.defaultPrevented||(p=r.onDismiss)==null||p.call(r))},onFocusOutside:h=>{var f,d,p;(f=r.onFocusOutside)==null||f.call(r,h),(d=r.onInteractOutside)==null||d.call(r,h),h.defaultPrevented||(p=r.onDismiss)==null||p.call(r)}},()=>t),zYt({ownerDocument:()=>Yu(t),onEscapeKeyDown:h=>{var f;!t||!Fo.isTopMostLayer(t)||((f=r.onEscapeKeyDown)==null||f.call(r,h),!h.defaultPrevented&&r.onDismiss&&(h.preventDefault(),r.onDismiss()))}}),ki(()=>{if(!t)return;Fo.addLayer({node:t,isPointerBlocking:r.disableOutsidePointerEvents,dismiss:r.onDismiss});const h=n==null?void 0:n.registerNestedLayer(t);Fo.assignPointerEventToLayers(),Fo.disableBodyPointerEvents(t),Pe(()=>{t&&(Fo.removeLayer(t),h==null||h(),Fo.assignPointerEventToLayers(),Fo.restoreBodyPointerEvents(t))})}),Bt(la([()=>t,()=>r.disableOutsidePointerEvents],([h,f])=>{if(!h)return;const d=Fo.find(h);d&&d.isPointerBlocking!==f&&(d.isPointerBlocking=f,Fo.assignPointerEventToLayers()),f&&Fo.disableBodyPointerEvents(h),Pe(()=>{Fo.restoreBodyPointerEvents(h)})},{defer:!0}));const c={registerNestedLayer:o};return O(nut.Provider,{value:c,get children(){return O(qn,G({as:"div",ref(h){var f=ci(d=>t=d,r.ref);typeof f=="function"&&f(h)}},i))}})}function rut(e={}){const[t,n]=Flt({value:()=>_t(e.open),defaultValue:()=>!!_t(e.defaultOpen),onChange:o=>{var s;return(s=e.onOpenChange)==null?void 0:s.call(e,o)}}),r=()=>{n(!0)},i=()=>{n(!1)};return{isOpen:t,setIsOpen:n,open:r,close:i,toggle:()=>{t()?i():r()}}}var HYt=ee("<option>"),WYt=ee("<div aria-hidden=true><input type=text><select tabindex=-1><option>");function $Yt(e){let t;const[n,r]=Yt(e,["ref","onChange","collection","selectionManager","isOpen","isMultiple","isVirtualized","focusTrigger"]),i=Lo(),[a,o]=rt(!1),s=l=>{const u=n.collection.getItem(l);return O(Xe,{get when(){return(u==null?void 0:u.type)==="item"},get children(){var c=HYt();return c.value=l,le(c,()=>u==null?void 0:u.textValue),pr(()=>c.selected=n.selectionManager.isSelected(l)),c}})};return Bt(la(()=>n.selectionManager.selectedKeys(),(l,u)=>{u&&Ylt(l,u)||(o(!0),t==null||t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t==null||t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0})))},{defer:!0})),(()=>{var l=WYt(),u=l.firstChild,c=u.nextSibling;c.firstChild,u.addEventListener("focus",()=>n.focusTrigger()),u.style.setProperty("font-size","16px"),c.addEventListener("change",f=>{In(f,n.onChange),a()||n.selectionManager.setSelectedKeys(new Set([f.target.value])),o(!1)});var h=ci(f=>t=f,n.ref);return typeof h=="function"&&ny(h,c),Bv(c,G({get multiple(){return n.isMultiple},get name(){return i.name()},get required(){return i.isRequired()},get disabled(){return i.isDisabled()},get size(){return n.collection.getSize()},get value(){return n.selectionManager.firstSelectedKey()??""}},r),!1,!0),le(c,O(Xe,{get when(){return n.isVirtualized},get fallback(){return O(RM,{get each(){return[...n.collection.getKeys()]},children:s})},get children(){return O(RM,{get each(){return[...n.selectionManager.selectedKeys()]},children:s})}}),null),pr(f=>{var d=iS,p=n.selectionManager.isFocused()||n.isOpen?-1:0,v=i.isRequired(),g=i.isDisabled(),m=i.isReadOnly();return f.e=ey(l,d,f.e),p!==f.t&&uv(u,"tabindex",f.t=p),v!==f.a&&(u.required=f.a=v),g!==f.o&&(u.disabled=f.o=g),m!==f.i&&(u.readOnly=f.i=m),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()}var Zj=new WeakMap;function XYt(e){let t=Zj.get(e);if(t!=null)return t;t=0;for(const n of e)n.type==="item"&&t++;return Zj.set(e,t),t}var iut=class{constructor(e,t,n){_i(this,"collection");_i(this,"ref");_i(this,"collator");this.collection=e,this.ref=t,this.collator=n}getKeyBelow(e){let t=this.collection().getKeyAfter(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyAfter(t)}}getKeyAbove(e){let t=this.collection().getKeyBefore(e);for(;t!=null;){const n=this.collection().getItem(t);if(n&&n.type==="item"&&!n.disabled)return t;t=this.collection().getKeyBefore(t)}}getFirstKey(){let e=this.collection().getFirstKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyAfter(e)}}getLastKey(){let e=this.collection().getLastKey();for(;e!=null;){const t=this.collection().getItem(e);if(t&&t.type==="item"&&!t.disabled)return e;e=this.collection().getKeyBefore(e)}}getItem(e){var t,n;return((n=(t=this.ref)==null?void 0:t.call(this))==null?void 0:n.querySelector(`[data-key="${e}"]`))??null}getKeyPageAbove(e){var a;const t=(a=this.ref)==null?void 0:a.call(this);let n=this.getItem(e);if(!t||!n)return;const r=Math.max(0,n.offsetTop+n.offsetHeight-t.offsetHeight);let i=e;for(;i&&n&&n.offsetTop>r;)i=this.getKeyAbove(i),n=i!=null?this.getItem(i):null;return i}getKeyPageBelow(e){var a;const t=(a=this.ref)==null?void 0:a.call(this);let n=this.getItem(e);if(!t||!n)return;const r=Math.min(t.scrollHeight,n.offsetTop-n.offsetHeight+t.offsetHeight);let i=e;for(;i&&n&&n.offsetTop<r;)i=this.getKeyBelow(i),n=i!=null?this.getItem(i):null;return i}getKeyForSearch(e,t){var i;const n=(i=this.collator)==null?void 0:i.call(this);if(!n)return;let r=t!=null?this.getKeyBelow(t):this.getFirstKey();for(;r!=null;){const a=this.collection().getItem(r);if(a){const o=a.textValue.slice(0,e.length);if(a.textValue&&n.compare(o,e)===0)return r}r=this.getKeyBelow(r)}}};function jYt(e,t,n){const r=$lt({usage:"search",sensitivity:"base"}),i=mt(()=>{const a=_t(e.keyboardDelegate);return a||new iut(e.collection,t,r)});return uYt({selectionManager:()=>_t(e.selectionManager),keyboardDelegate:i,autoFocus:()=>_t(e.autoFocus),deferAutoFocus:()=>_t(e.deferAutoFocus),shouldFocusWrap:()=>_t(e.shouldFocusWrap),disallowEmptySelection:()=>_t(e.disallowEmptySelection),selectOnFocus:()=>_t(e.selectOnFocus),disallowTypeAhead:()=>_t(e.disallowTypeAhead),shouldUseVirtualFocus:()=>_t(e.shouldUseVirtualFocus),allowsTabNavigation:()=>_t(e.allowsTabNavigation),isVirtualized:()=>_t(e.isVirtualized),scrollToKey:a=>{var o;return(o=_t(e.scrollToKey))==null?void 0:o(a)}},t,n)}var YYt={};Ih(YYt,{Item:()=>w2,ItemDescription:()=>T2,ItemIndicator:()=>M2,ItemLabel:()=>A2,Listbox:()=>KYt,Root:()=>uV,Section:()=>C2});var aut=hr();function qYt(){const e=Ln(aut);if(e===void 0)throw new Error("[kobalte]: `useListboxContext` must be used within a `Listbox` component");return e}var out=hr();function lV(){const e=Ln(out);if(e===void 0)throw new Error("[kobalte]: `useListboxItemContext` must be used within a `Listbox.Item` component");return e}function w2(e){let t;const n=qYt(),r=`${n.generateId("item")}-${Ys()}`,i=Bn({id:r},e),[a,o]=Yt(i,["ref","item","aria-label","aria-labelledby","aria-describedby","onPointerMove","onPointerDown","onPointerUp","onClick","onKeyDown","onMouseDown","onFocus"]),[s,l]=rt(),[u,c]=rt(),h=()=>n.listState().selectionManager(),f=()=>h().focusedKey()===a.item.key,d=cYt({key:()=>a.item.key,selectionManager:h,shouldSelectOnPressUp:n.shouldSelectOnPressUp,allowsDifferentPressOrigin:()=>n.shouldSelectOnPressUp()&&n.shouldFocusOnHover(),shouldUseVirtualFocus:n.shouldUseVirtualFocus,disabled:()=>a.item.disabled},()=>t),p=()=>{if(h().selectionMode()!=="none")return d.isSelected()},v=mt(()=>!(rS()&&Djt())),g=()=>v()?a["aria-label"]:void 0,m=()=>v()?s():void 0,_=()=>v()?u():void 0,y=()=>{var T;if(!n.isVirtualized())return;const A=(T=n.listState().collection().getItem(a.item.key))==null?void 0:T.index;return A!=null?A+1:void 0},x=()=>{if(n.isVirtualized())return XYt(n.listState().collection())},S=A=>{In(A,a.onPointerMove),A.pointerType==="mouse"&&!d.isDisabled()&&n.shouldFocusOnHover()&&(co(A.currentTarget),h().setFocused(!0),h().setFocusedKey(a.item.key))},b=mt(()=>({"data-disabled":d.isDisabled()?"":void 0,"data-selected":d.isSelected()?"":void 0,"data-highlighted":f()?"":void 0})),w={isSelected:d.isSelected,dataset:b,generateId:bd(()=>o.id),registerLabelId:Eu(l),registerDescriptionId:Eu(c)};return O(out.Provider,{value:w,get children(){return O(qn,G({as:"li",ref(A){var T=ci(M=>t=M,a.ref);typeof T=="function"&&T(A)},role:"option",get tabIndex(){return d.tabIndex()},get"aria-disabled"(){return d.isDisabled()},get"aria-selected"(){return p()},get"aria-label"(){return g()},get"aria-labelledby"(){return m()},get"aria-describedby"(){return _()},get"aria-posinset"(){return y()},get"aria-setsize"(){return x()},get"data-key"(){return d.dataKey()},get onPointerDown(){return Ls([a.onPointerDown,d.onPointerDown])},get onPointerUp(){return Ls([a.onPointerUp,d.onPointerUp])},get onClick(){return Ls([a.onClick,d.onClick])},get onKeyDown(){return Ls([a.onKeyDown,d.onKeyDown])},get onMouseDown(){return Ls([a.onMouseDown,d.onMouseDown])},get onFocus(){return Ls([a.onFocus,d.onFocus])},onPointerMove:S},b,o))}})}function T2(e){const t=lV(),n=Bn({id:t.generateId("description")},e);return Bt(()=>Pe(t.registerDescriptionId(n.id))),O(qn,G({as:"div"},()=>t.dataset(),n))}function M2(e){const t=lV(),n=Bn({id:t.generateId("indicator")},e),[r,i]=Yt(n,["forceMount"]);return O(Xe,{get when(){return r.forceMount||t.isSelected()},get children(){return O(qn,G({as:"div","aria-hidden":"true"},()=>t.dataset(),i))}})}function A2(e){const t=lV(),n=Bn({id:t.generateId("label")},e);return Bt(()=>Pe(t.registerLabelId(n.id))),O(qn,G({as:"div"},()=>t.dataset(),n))}function uV(e){let t;const n=`listbox-${Ys()}`,r=Bn({id:n,selectionMode:"single",virtualized:!1},e),[i,a]=Yt(r,["ref","children","renderItem","renderSection","value","defaultValue","onChange","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","state","keyboardDelegate","autoFocus","selectionMode","shouldFocusWrap","shouldUseVirtualFocus","shouldSelectOnPressUp","shouldFocusOnHover","allowDuplicateSelectionEvents","disallowEmptySelection","selectionBehavior","selectOnFocus","disallowTypeAhead","allowsTabNavigation","virtualized","scrollToItem","scrollRef","onKeyDown","onMouseDown","onFocusIn","onFocusOut"]),o=mt(()=>i.state?i.state:Klt({selectedKeys:()=>i.value,defaultSelectedKeys:()=>i.defaultValue,onSelectionChange:i.onChange,allowDuplicateSelectionEvents:()=>_t(i.allowDuplicateSelectionEvents),disallowEmptySelection:()=>_t(i.disallowEmptySelection),selectionBehavior:()=>_t(i.selectionBehavior),selectionMode:()=>_t(i.selectionMode),dataSource:()=>i.options??[],getKey:()=>i.optionValue,getTextValue:()=>i.optionTextValue,getDisabled:()=>i.optionDisabled,getSectionChildren:()=>i.optionGroupChildren})),s=jYt({selectionManager:()=>o().selectionManager(),collection:()=>o().collection(),autoFocus:()=>_t(i.autoFocus),shouldFocusWrap:()=>_t(i.shouldFocusWrap),keyboardDelegate:()=>i.keyboardDelegate,disallowEmptySelection:()=>_t(i.disallowEmptySelection),selectOnFocus:()=>_t(i.selectOnFocus),disallowTypeAhead:()=>_t(i.disallowTypeAhead),shouldUseVirtualFocus:()=>_t(i.shouldUseVirtualFocus),allowsTabNavigation:()=>_t(i.allowsTabNavigation),isVirtualized:()=>i.virtualized,scrollToKey:()=>i.scrollToItem},()=>t,()=>{var u;return(u=i.scrollRef)==null?void 0:u.call(i)}),l={listState:o,generateId:bd(()=>a.id),shouldUseVirtualFocus:()=>r.shouldUseVirtualFocus,shouldSelectOnPressUp:()=>r.shouldSelectOnPressUp,shouldFocusOnHover:()=>r.shouldFocusOnHover,isVirtualized:()=>i.virtualized};return O(aut.Provider,{value:l,get children(){return O(qn,G({as:"ul",ref(u){var c=ci(h=>t=h,i.ref);typeof c=="function"&&c(u)},role:"listbox",get tabIndex(){return s.tabIndex()},get"aria-multiselectable"(){return o().selectionManager().selectionMode()==="multiple"?!0:void 0},get onKeyDown(){return Ls([i.onKeyDown,s.onKeyDown])},get onMouseDown(){return Ls([i.onMouseDown,s.onMouseDown])},get onFocusIn(){return Ls([i.onFocusIn,s.onFocusIn])},get onFocusOut(){return Ls([i.onFocusOut,s.onFocusOut])}},a,{get children(){return O(Xe,{get when(){return!i.virtualized},get fallback(){var u;return(u=i.children)==null?void 0:u.call(i,o().collection)},get children(){return O(bjt,{get each(){return[...o().collection()]},by:"key",children:u=>O(Cq,{get children(){return[O(Mx,{get when(){return u().type==="section"},get children(){var c;return(c=i.renderSection)==null?void 0:c.call(i,u())}}),O(Mx,{get when(){return u().type==="item"},get children(){var c;return(c=i.renderItem)==null?void 0:c.call(i,u())}})]}})})}})}}))}})}function C2(e){return O(qn,G({as:"li",role:"presentation"},e))}var KYt=Object.assign(uV,{Item:w2,ItemDescription:T2,ItemIndicator:M2,ItemLabel:A2,Section:C2}),oR="focusScope.autoFocusOnMount",sR="focusScope.autoFocusOnUnmount",Jj={bubbles:!1,cancelable:!0},Qj={stack:[],active(){return this.stack[0]},add(e){var t;e!==this.active()&&((t=this.active())==null||t.pause()),this.stack=kj(this.stack,e),this.stack.unshift(e)},remove(e){var t;this.stack=kj(this.stack,e),(t=this.active())==null||t.resume()}};function ZYt(e,t){const[n,r]=rt(!1),i={pause(){r(!0)},resume(){r(!1)}};let a=null;const o=p=>{var v;return(v=e.onMountAutoFocus)==null?void 0:v.call(e,p)},s=p=>{var v;return(v=e.onUnmountAutoFocus)==null?void 0:v.call(e,p)},l=()=>Yu(t()),u=()=>{const p=l().createElement("span");return p.setAttribute("data-focus-trap",""),p.tabIndex=0,Object.assign(p.style,iS),p},c=()=>{const p=t();return p?Nlt(p,!0).filter(v=>!v.hasAttribute("data-focus-trap")):[]},h=()=>{const p=c();return p.length>0?p[0]:null},f=()=>{const p=c();return p.length>0?p[p.length-1]:null},d=()=>{const p=t();if(!p)return!1;const v=xx(p);return!v||Ef(p,v)?!1:Blt(v)};Bt(()=>{const p=t();if(!p)return;Qj.add(i);const v=xx(p);if(!Ef(p,v)){const m=new CustomEvent(oR,Jj);p.addEventListener(oR,o),p.dispatchEvent(m),m.defaultPrevented||setTimeout(()=>{co(h()),xx(p)===v&&co(p)},0)}Pe(()=>{p.removeEventListener(oR,o),setTimeout(()=>{const m=new CustomEvent(sR,Jj);d()&&m.preventDefault(),p.addEventListener(sR,s),p.dispatchEvent(m),m.defaultPrevented||co(v??l().body),p.removeEventListener(sR,s),Qj.remove(i)},0)})}),Bt(()=>{const p=t();if(!p||!_t(e.trapFocus)||n())return;const v=m=>{const _=m.target;_!=null&&_.closest(`[${FC}]`)||(Ef(p,_)?a=_:co(a))},g=m=>{const y=m.relatedTarget??xx(p);y!=null&&y.closest(`[${FC}]`)||Ef(p,y)||co(a)};l().addEventListener("focusin",v),l().addEventListener("focusout",g),Pe(()=>{l().removeEventListener("focusin",v),l().removeEventListener("focusout",g)})}),Bt(()=>{const p=t();if(!p||!_t(e.trapFocus)||n())return;const v=u();p.insertAdjacentElement("afterbegin",v);const g=u();p.insertAdjacentElement("beforeend",g);function m(y){const x=h(),S=f();y.relatedTarget===x?co(S):co(x)}v.addEventListener("focusin",m),g.addEventListener("focusin",m);const _=new MutationObserver(y=>{for(const x of y)x.previousSibling===g&&(g.remove(),p.insertAdjacentElement("beforeend",g)),x.nextSibling===v&&(v.remove(),p.insertAdjacentElement("afterbegin",v))});_.observe(p,{childList:!0,subtree:!1}),Pe(()=>{v.removeEventListener("focusin",m),g.removeEventListener("focusin",m),v.remove(),g.remove(),_.disconnect()})})}var JYt="data-live-announcer";function QYt(e){Bt(()=>{_t(e.isDisabled)||Pe(tqt(_t(e.targets),_t(e.root)))})}var X_=new WeakMap,hs=[];function tqt(e,t=document.body){const n=new Set(e),r=new Set,i=l=>{for(const f of l.querySelectorAll(`[${JYt}], [${FC}]`))n.add(f);const u=f=>{if(n.has(f)||f.parentElement&&r.has(f.parentElement)&&f.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(const d of n)if(f.contains(d))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},c=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode:u}),h=u(l);if(h===NodeFilter.FILTER_ACCEPT&&a(l),h!==NodeFilter.FILTER_REJECT){let f=c.nextNode();for(;f!=null;)a(f),f=c.nextNode()}},a=l=>{const u=X_.get(l)??0;l.getAttribute("aria-hidden")==="true"&&u===0||(u===0&&l.setAttribute("aria-hidden","true"),r.add(l),X_.set(l,u+1))};hs.length&&hs[hs.length-1].disconnect(),i(t);const o=new MutationObserver(l=>{for(const u of l)if(!(u.type!=="childList"||u.addedNodes.length===0)&&![...n,...r].some(c=>c.contains(u.target))){for(const c of u.removedNodes)c instanceof Element&&(n.delete(c),r.delete(c));for(const c of u.addedNodes)(c instanceof HTMLElement||c instanceof SVGElement)&&(c.dataset.liveAnnouncer==="true"||c.dataset.reactAriaTopLayer==="true")?n.add(c):c instanceof Element&&i(c)}});o.observe(t,{childList:!0,subtree:!0});const s={observe(){o.observe(t,{childList:!0,subtree:!0})},disconnect(){o.disconnect()}};return hs.push(s),()=>{o.disconnect();for(const l of r){const u=X_.get(l);if(u==null)return;u===1?(l.removeAttribute("aria-hidden"),X_.delete(l)):X_.set(l,u-1)}s===hs[hs.length-1]?(hs.pop(),hs.length&&hs[hs.length-1].observe()):hs.splice(hs.indexOf(s),1)}}var pl=e=>typeof e=="function"?e():e,DT=new Map,eqt=e=>{Bt(()=>{const t=pl(e.style)??{},n=pl(e.properties)??[],r={};for(const a in t)r[a]=e.element.style[a];const i=DT.get(e.key);i?i.activeCount++:DT.set(e.key,{activeCount:1,originalStyles:r,properties:n.map(a=>a.key)}),Object.assign(e.element.style,e.style);for(const a of n)e.element.style.setProperty(a.key,a.value);Pe(()=>{var o;const a=DT.get(e.key);if(a){if(a.activeCount!==1){a.activeCount--;return}DT.delete(e.key);for(const[s,l]of Object.entries(a.originalStyles))e.element.style[s]=l;for(const s of a.properties)e.element.style.removeProperty(s);e.element.style.length===0&&e.element.removeAttribute("style"),(o=e.cleanup)==null||o.call(e)}})})},tY=eqt,nqt=(e,t)=>{switch(t){case"x":return[e.clientWidth,e.scrollLeft,e.scrollWidth];case"y":return[e.clientHeight,e.scrollTop,e.scrollHeight]}},rqt=(e,t)=>{const n=getComputedStyle(e),r=t==="x"?n.overflowX:n.overflowY;return r==="auto"||r==="scroll"||e.tagName==="HTML"&&r==="visible"},iqt=(e,t,n)=>{const r=t==="x"&&window.getComputedStyle(e).direction==="rtl"?-1:1;let i=e,a=0,o=0,s=!1;do{const[l,u,c]=nqt(i,t),h=c-l-r*u;(u!==0||h!==0)&&rqt(i,t)&&(a+=h,o+=u),i===(n??document.documentElement)?s=!0:i=i._$host??i.parentElement}while(i&&!s);return[a,o]},[eY,nY]=rt([]),aqt=e=>eY().indexOf(e)===eY().length-1,oqt=e=>{const t=G({element:null,enabled:!0,hideScrollbar:!0,preventScrollbarShift:!0,preventScrollbarShiftMode:"padding",allowPinchZoom:!1},e),n=Ys();let r=[0,0],i=null,a=null;Bt(()=>{pl(t.enabled)&&(nY(u=>[...u,n]),Pe(()=>{nY(u=>u.filter(c=>c!==n))}))}),Bt(()=>{if(!pl(t.enabled)||!pl(t.hideScrollbar))return;const{body:u}=document,c=window.innerWidth-u.offsetWidth;if(tY({key:"prevent-scroll-overflow",element:u,style:{overflow:"hidden"}}),pl(t.preventScrollbarShift)){const h={},f=[];c>0&&(pl(t.preventScrollbarShiftMode)==="padding"?h.paddingRight=`calc(${window.getComputedStyle(u).paddingRight} + ${c}px)`:h.marginRight=`calc(${window.getComputedStyle(u).marginRight} + ${c}px)`,f.push({key:"--scrollbar-width",value:`${c}px`}));const d=window.scrollY,p=window.scrollX;tY({key:"prevent-scroll-scrollbar",element:u,style:h,properties:f,cleanup:()=>{c>0&&window.scrollTo(p,d)}})}}),Bt(()=>{!aqt(n)||!pl(t.enabled)||(document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchstart",o,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),Pe(()=>{document.removeEventListener("wheel",s),document.removeEventListener("touchstart",o),document.removeEventListener("touchmove",l)}))});const o=u=>{r=rY(u),i=null,a=null},s=u=>{const c=u.target,h=pl(t.element),f=sqt(u),d=Math.abs(f[0])>Math.abs(f[1])?"x":"y",p=d==="x"?f[0]:f[1],v=iY(c,d,p,h);let g;h&&tB(h,c)?g=!v:g=!0,g&&u.cancelable&&u.preventDefault()},l=u=>{const c=pl(t.element),h=u.target;let f;if(u.touches.length===2)f=!pl(t.allowPinchZoom);else{if(i==null||a===null){const d=rY(u).map((v,g)=>r[g]-v),p=Math.abs(d[0])>Math.abs(d[1])?"x":"y";i=p,a=p==="x"?d[0]:d[1]}if(h.type==="range")f=!1;else{const d=iY(h,i,a,c);c&&tB(c,h)?f=!d:f=!0}}f&&u.cancelable&&u.preventDefault()}},sqt=e=>[e.deltaX,e.deltaY],rY=e=>e.changedTouches[0]?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0],iY=(e,t,n,r)=>{const i=r&&tB(r,e),[a,o]=iqt(e,t,i?r:void 0);return!(n>0&&Math.abs(a)<=1||n<0&&Math.abs(o)<1)},tB=(e,t)=>{if(e.contains(t))return!0;let n=t;for(;n;){if(n===e)return!0;n=n._$host??n.parentElement}return!1},lqt=oqt,uqt=lqt,$r={};Ih($r,{Arrow:()=>sV,Content:()=>lut,Description:()=>G0,ErrorMessage:()=>H0,HiddenSelect:()=>uut,Icon:()=>cut,Item:()=>w2,ItemDescription:()=>T2,ItemIndicator:()=>M2,ItemLabel:()=>A2,Label:()=>hut,Listbox:()=>fut,Portal:()=>dut,Root:()=>put,Section:()=>C2,Select:()=>fqt,Trigger:()=>vut,Value:()=>gut});var sut=hr();function Sd(){const e=Ln(sut);if(e===void 0)throw new Error("[kobalte]: `useSelectContext` must be used within a `Select` component");return e}function lut(e){let t;const n=Sd(),[r,i]=Yt(e,["ref","style","onCloseAutoFocus","onFocusOutside"]),a=s=>{n.close()},o=s=>{var l;(l=r.onFocusOutside)==null||l.call(r,s),n.isOpen()&&n.isModal()&&s.preventDefault()};return QYt({isDisabled:()=>!(n.isOpen()&&n.isModal()),targets:()=>t?[t]:[]}),uqt({element:()=>t??null,enabled:()=>n.isOpen()&&n.preventScroll()}),ZYt({trapFocus:()=>n.isOpen()&&n.isModal(),onMountAutoFocus:s=>{s.preventDefault()},onUnmountAutoFocus:s=>{var l;(l=r.onCloseAutoFocus)==null||l.call(r,s),s.defaultPrevented||(co(n.triggerRef()),s.preventDefault())}},()=>t),O(Xe,{get when(){return n.contentPresence.isPresent()},get children(){return O(eut.Positioner,{get children(){return O(GYt,G({ref(s){var l=ci(u=>{n.setContentRef(u),n.contentPresence.setRef(u),t=u},r.ref);typeof l=="function"&&l(s)},get disableOutsidePointerEvents(){return mt(()=>!!n.isModal())()&&n.isOpen()},get excludedElements(){return[n.triggerRef]},get style(){return{"--kb-select-content-transform-origin":"var(--kb-popper-content-transform-origin)",position:"relative",...r.style}},onEscapeKeyDown:a,onFocusOutside:o,get onDismiss(){return n.close}},()=>n.dataset(),i))}})}})}function uut(e){const t=Sd();return O($Yt,G({get collection(){return t.listState().collection()},get selectionManager(){return t.listState().selectionManager()},get isOpen(){return t.isOpen()},get isMultiple(){return t.isMultiple()},get isVirtualized(){return t.isVirtualized()},focusTrigger:()=>{var n;return(n=t.triggerRef())==null?void 0:n.focus()}},e))}function cut(e){const t=Sd(),n=Bn({children:""},e);return O(qn,G({as:"span","aria-hidden":"true"},()=>t.dataset(),n))}function hut(e){const t=Sd(),[n,r]=Yt(e,["onClick"]);return O(sS,G({as:"span",onClick:a=>{var o;In(a,n.onClick),t.isDisabled()||(o=t.triggerRef())==null||o.focus()}},r))}function fut(e){const t=Sd(),n=Bn({id:t.generateId("listbox")},e),[r,i]=Yt(n,["ref","id","onKeyDown"]);return Bt(()=>Pe(t.registerListboxId(r.id))),O(uV,G({ref(o){var s=ci(t.setListboxRef,r.ref);typeof s=="function"&&s(o)},get id(){return r.id},get state(){return t.listState()},get virtualized(){return t.isVirtualized()},get autoFocus(){return t.autoFocus()},shouldSelectOnPressUp:!0,shouldFocusOnHover:!0,get shouldFocusWrap(){return t.shouldFocusWrap()},get disallowTypeAhead(){return t.disallowTypeAhead()},get"aria-labelledby"(){return t.listboxAriaLabelledBy()},get renderItem(){return t.renderItem},get renderSection(){return t.renderSection},onKeyDown:o=>{In(o,r.onKeyDown),o.key==="Escape"&&o.preventDefault()}},i))}function dut(e){const t=Sd();return O(Xe,{get when(){return t.contentPresence.isPresent()},get children(){return O(Iq,e)}})}function cqt(e){const t=`select-${Ys()}`,n=Bn({id:t,selectionMode:"single",disallowEmptySelection:!1,closeOnSelection:e.selectionMode==="single",allowDuplicateSelectionEvents:!0,gutter:8,sameWidth:!0,modal:!1},e),[r,i,a,o]=Yt(n,["itemComponent","sectionComponent","open","defaultOpen","onOpenChange","value","defaultValue","onChange","placeholder","options","optionValue","optionTextValue","optionDisabled","optionGroupChildren","keyboardDelegate","allowDuplicateSelectionEvents","disallowEmptySelection","closeOnSelection","disallowTypeAhead","shouldFocusWrap","selectionBehavior","selectionMode","virtualized","modal","preventScroll","forceMount"],["getAnchorRect","placement","gutter","shift","flip","slide","overlap","sameWidth","fitViewport","hideWhenDetached","detachedPadding","arrowPadding","overflowPadding"],x2),[s,l]=rt(),[u,c]=rt(),[h,f]=rt(),[d,p]=rt(),[v,g]=rt(),[m,_]=rt(),[y,x]=rt(),[S,b]=rt(!0),w=tt=>{const et=r.optionValue;return et==null?String(tt):String(V0(et)?et(tt):tt[et])},A=mt(()=>{const tt=r.optionGroupChildren;return tt==null?r.options:r.options.flatMap(et=>et[tt]??et)}),T=mt(()=>A().map(tt=>w(tt))),M=tt=>[...tt].map(et=>A().find(xt=>w(xt)===et)).filter(et=>et!=null),C=rut({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:tt=>{var et;return(et=r.onOpenChange)==null?void 0:et.call(r,tt)}}),E=Klt({selectedKeys:()=>r.value!=null?r.value.map(w):r.value,defaultSelectedKeys:()=>r.defaultValue!=null?r.defaultValue.map(w):r.defaultValue,onSelectionChange:tt=>{var et;(et=r.onChange)==null||et.call(r,M(tt)),r.closeOnSelection&&N()},allowDuplicateSelectionEvents:()=>_t(r.allowDuplicateSelectionEvents),disallowEmptySelection:()=>_t(r.disallowEmptySelection),selectionBehavior:()=>_t(r.selectionBehavior),selectionMode:()=>r.selectionMode,dataSource:()=>r.options??[],getKey:()=>r.optionValue,getTextValue:()=>r.optionTextValue,getDisabled:()=>r.optionDisabled,getSectionChildren:()=>r.optionGroupChildren}),D=mt(()=>M(E.selectionManager().selectedKeys())),I=tt=>{E.selectionManager().toggleSelection(w(tt))},L=eV(()=>r.forceMount||C.isOpen()),P=()=>{const tt=m();tt&&co(tt)},B=tt=>{if(r.options.length<=0)return;b(tt),C.open();let et=E.selectionManager().firstSelectedKey();et==null&&(tt==="first"?et=E.collection().getFirstKey():tt==="last"&&(et=E.collection().getLastKey())),P(),E.selectionManager().setFocused(!0),E.selectionManager().setFocusedKey(et)},N=()=>{C.close(),E.selectionManager().setFocused(!1),E.selectionManager().setFocusedKey(void 0)},k=tt=>{C.isOpen()?N():B(tt)},{formControlContext:U}=b2(a);S2(d,()=>{const tt=r.defaultValue?[...r.defaultValue].map(w):new hu;E.selectionManager().setSelectedKeys(tt)});const Z=$lt({usage:"search",sensitivity:"base"}),nt=mt(()=>{const tt=_t(r.keyboardDelegate);return tt||new iut(E.collection,void 0,Z)}),ct=tt=>{var et;return(et=r.itemComponent)==null?void 0:et.call(r,{item:tt})},K=tt=>{var et;return(et=r.sectionComponent)==null?void 0:et.call(r,{section:tt})};Bt(la([T],([tt])=>{const xt=[...E.selectionManager().selectedKeys()].filter(St=>tt.includes(St));E.selectionManager().setSelectedKeys(xt)},{defer:!0}));const $=mt(()=>({"data-expanded":C.isOpen()?"":void 0,"data-closed":C.isOpen()?void 0:""})),ot={dataset:$,isOpen:C.isOpen,isDisabled:()=>U.isDisabled()??!1,isMultiple:()=>_t(r.selectionMode)==="multiple",isVirtualized:()=>r.virtualized??!1,isModal:()=>r.modal??!1,preventScroll:()=>r.preventScroll??ot.isModal(),disallowTypeAhead:()=>r.disallowTypeAhead??!1,shouldFocusWrap:()=>r.shouldFocusWrap??!1,selectedOptions:D,contentPresence:L,autoFocus:S,triggerRef:d,listState:()=>E,keyboardDelegate:nt,triggerId:s,valueId:u,listboxId:h,listboxAriaLabelledBy:y,setListboxAriaLabelledBy:x,setTriggerRef:p,setContentRef:g,setListboxRef:_,open:B,close:N,toggle:k,placeholder:()=>r.placeholder,renderItem:ct,renderSection:K,removeOptionFromSelection:I,generateId:bd(()=>_t(a.id)),registerTriggerId:Eu(l),registerValueId:Eu(c),registerListboxId:Eu(f)};return O(oS.Provider,{value:U,get children(){return O(sut.Provider,{value:ot,get children(){return O(eut,G({anchorRef:d,contentRef:v},i,{get children(){return O(qn,G({as:"div",role:"group",get id(){return _t(a.id)}},()=>U.dataset(),$,o))}}))}})}})}function put(e){const[t,n]=Yt(e,["value","defaultValue","onChange","multiple"]),r=mt(()=>t.value!=null?t.multiple?t.value:[t.value]:t.value),i=mt(()=>t.defaultValue!=null?t.multiple?t.defaultValue:[t.defaultValue]:t.defaultValue);return O(cqt,G({get value(){return r()},get defaultValue(){return i()},onChange:o=>{var s,l;t.multiple?(s=t.onChange)==null||s.call(t,o):(l=t.onChange)==null||l.call(t,o[0]??null)},get selectionMode(){return t.multiple?"multiple":"single"}},n))}function vut(e){const t=Lo(),n=Sd(),r=Bn({id:n.generateId("trigger")},e),[i,a,o]=Yt(r,["ref","disabled","onPointerDown","onClick","onKeyDown","onFocus","onBlur"],lS),s=()=>n.listState().selectionManager(),l=()=>n.keyboardDelegate(),u=()=>i.disabled||n.isDisabled(),{fieldProps:c}=uS(a),{typeSelectHandlers:h}=qlt({keyboardDelegate:l,selectionManager:s,onTypeSelect:_=>s().select(_)}),f=()=>[n.listboxAriaLabelledBy(),n.valueId()].filter(Boolean).join(" ")||void 0,d=_=>{In(_,i.onPointerDown),_.currentTarget.dataset.pointerType=_.pointerType,!u()&&_.pointerType!=="touch"&&_.button===0&&(_.preventDefault(),n.toggle(!0))},p=_=>{In(_,i.onClick),!u()&&_.currentTarget.dataset.pointerType==="touch"&&n.toggle(!0)},v=_=>{var y,x,S,b,w,A,T,M;if(In(_,i.onKeyDown),!u())switch(In(_,h.onKeyDown),_.key){case"Enter":case" ":case"ArrowDown":_.stopPropagation(),_.preventDefault(),n.toggle("first");break;case"ArrowUp":_.stopPropagation(),_.preventDefault(),n.toggle("last");break;case"ArrowLeft":{if(_.preventDefault(),n.isMultiple())return;const C=s().firstSelectedKey(),E=C!=null?(x=(y=l()).getKeyAbove)==null?void 0:x.call(y,C):(b=(S=l()).getFirstKey)==null?void 0:b.call(S);E!=null&&s().select(E);break}case"ArrowRight":{if(_.preventDefault(),n.isMultiple())return;const C=s().firstSelectedKey(),E=C!=null?(A=(w=l()).getKeyBelow)==null?void 0:A.call(w,C):(M=(T=l()).getFirstKey)==null?void 0:M.call(T);E!=null&&s().select(E);break}}},g=_=>{In(_,i.onFocus),!s().isFocused()&&s().setFocused(!0)},m=_=>{In(_,i.onBlur),!n.isOpen()&&s().setFocused(!1)};return Bt(()=>Pe(n.registerTriggerId(c.id()))),Bt(()=>{n.setListboxAriaLabelledBy([c.ariaLabelledBy(),c.ariaLabel()&&!c.ariaLabelledBy()?c.id():null].filter(Boolean).join(" ")||void 0)}),O(cS,G({ref(_){var y=ci(n.setTriggerRef,i.ref);typeof y=="function"&&y(_)},get id(){return c.id()},get disabled(){return u()},"aria-haspopup":"listbox",get"aria-expanded"(){return n.isOpen()},get"aria-controls"(){return mt(()=>!!n.isOpen())()?n.listboxId():void 0},get"aria-label"(){return c.ariaLabel()},get"aria-labelledby"(){return f()},get"aria-describedby"(){return c.ariaDescribedBy()},onPointerDown:d,onClick:p,onKeyDown:v,onFocus:g,onBlur:m},()=>n.dataset(),()=>t.dataset(),o))}function gut(e){const t=Lo(),n=Sd(),r=Bn({id:n.generateId("value")},e),[i,a]=Yt(r,["id","children"]),o=()=>n.listState().selectionManager(),s=()=>{const l=o().selectedKeys();return l.size===1&&l.has("")?!0:o().isEmpty()};return Bt(()=>Pe(n.registerValueId(i.id))),O(qn,G({as:"span",get id(){return i.id},get"data-placeholder-shown"(){return s()?"":void 0}},()=>t.dataset(),a,{get children(){return O(Xe,{get when(){return!s()},get fallback(){return n.placeholder()},get children(){return O(hqt,{state:{selectedOption:()=>n.selectedOptions()[0],selectedOptions:()=>n.selectedOptions(),remove:l=>n.removeOptionFromSelection(l),clear:()=>o().clearSelection()},get children(){return i.children}})}})}}))}function hqt(e){const t=Er(()=>{const n=e.children;return V0(n)?n(e.state):n});return mt(t)}var fqt=Object.assign(put,{Arrow:sV,Content:lut,Description:G0,ErrorMessage:H0,HiddenSelect:uut,Icon:cut,Item:w2,ItemDescription:T2,ItemIndicator:M2,ItemLabel:A2,Label:hut,Listbox:fut,Portal:dut,Section:C2,Trigger:vut,Value:gut}),dqt=ee("<input type=range>"),cf={};Ih(cf,{Description:()=>G0,ErrorMessage:()=>H0,Fill:()=>yut,Input:()=>but,Label:()=>sS,Root:()=>Sut,Slider:()=>_qt,Thumb:()=>_ut,Track:()=>wut,ValueLabel:()=>Tut});var mut=hr();function hS(){const e=Ln(mut);if(e===void 0)throw new Error("[kobalte]: `useSliderContext` must be used within a `Slider.Root` component");return e}function yut(e){const t=hS(),[n,r]=Yt(e,["style"]),i=()=>t.state.values().map(s=>t.state.getValuePercent(s)*100),a=()=>t.state.values().length>1?Math.min(...i()):0,o=()=>100-Math.max(...i());return O(qn,G({as:"div",get style(){return{[t.startEdge()]:`${a()}%`,[t.endEdge()]:`${o()}%`,...n.style}}},()=>t.dataset(),r))}function _ut(e){let t;const n=hS(),r=Bn({id:n.generateId(`thumb-${Ys()}`)},e),[i,a,o]=Yt(r,["ref","style","onKeyDown","onPointerDown","onPointerMove","onPointerUp","onFocus","onBlur"],lS),{fieldProps:s}=uS(a);Kjt({getItem:()=>({ref:()=>t,disabled:n.state.isDisabled(),key:s.id(),textValue:"",type:"item"})});const l=()=>t?n.thumbs().findIndex(y=>y.ref()===t):-1,u=()=>n.state.getThumbValue(l()),c=()=>n.state.getThumbPercent(l()),h=()=>n.state.orientation()==="vertical"?"translateY(50%)":"translateX(-50%)";let f=0;const d=y=>{In(y,i.onKeyDown),n.onStepKeyDown(y,l())},p=y=>{var S;In(y,i.onPointerDown);const x=y.currentTarget;y.preventDefault(),y.stopPropagation(),x.setPointerCapture(y.pointerId),x.focus(),f=n.state.orientation()==="horizontal"?y.clientX:y.clientY,u()!==void 0&&((S=n.onSlideStart)==null||S.call(n,l(),u()))},v=y=>{var S;if(y.stopPropagation(),In(y,i.onPointerMove),y.currentTarget.hasPointerCapture(y.pointerId)){const b={deltaX:y.clientX-f,deltaY:y.clientY-f};(S=n.onSlideMove)==null||S.call(n,b),f=n.state.orientation()==="horizontal"?y.clientX:y.clientY}},g=y=>{var S;y.stopPropagation(),In(y,i.onPointerUp);const x=y.currentTarget;x.hasPointerCapture(y.pointerId)&&(x.releasePointerCapture(y.pointerId),(S=n.onSlideEnd)==null||S.call(n))},m=y=>{In(y,i.onFocus),n.state.setFocusedThumb(l())},_=y=>{In(y,i.onBlur),n.state.setFocusedThumb(void 0)};return ki(()=>{n.state.setThumbEditable(l(),!n.state.isDisabled())}),O(xut.Provider,{value:{index:l},get children(){return O(qn,G({as:"span",ref(y){var x=ci(S=>t=S,i.ref);typeof x=="function"&&x(y)},role:"slider",get id(){return s.id()},get tabIndex(){return n.state.isDisabled()?void 0:0},get style(){return{display:u()===void 0?"none":void 0,position:"absolute",[n.startEdge()]:`calc(${c()*100}%)`,transform:h(),"touch-action":"none",...i.style}},get"aria-valuetext"(){return n.state.getThumbValueLabel(l())},get"aria-valuemin"(){return n.minValue()},get"aria-valuenow"(){return u()},get"aria-valuemax"(){return n.maxValue()},get"aria-orientation"(){return n.state.orientation()},get"aria-label"(){return s.ariaLabel()},get"aria-labelledby"(){return s.ariaLabelledBy()},get"aria-describedby"(){return s.ariaDescribedBy()},onKeyDown:d,onPointerDown:p,onPointerMove:v,onPointerUp:g,onFocus:m,onBlur:_},()=>n.dataset(),o))}})}var xut=hr();function pqt(){const e=Ln(xut);if(e===void 0)throw new Error("[kobalte]: `useThumbContext` must be used within a `Slider.Thumb` component");return e}function but(e){const t=Lo(),n=hS(),r=pqt(),i=Bn({id:n.generateId("input")},e),[a,o,s]=Yt(i,["style","onChange"],lS),{fieldProps:l}=uS(o),[u,c]=rt(""),h=f=>{In(f,a.onChange);const d=f.target;n.state.setThumbValue(r.index(),parseFloat(d.value)),d.value=String(n.state.values()[r.index()])??""};return Bt(()=>{c(r.index()===-1?"":n.state.getThumbValueLabel(r.index()))}),(()=>{var f=dqt();return f.addEventListener("change",h),Bv(f,G({get id(){return l.id()},get name(){return t.name()},get tabIndex(){return n.state.isDisabled()?void 0:-1},get min(){return n.state.getThumbMinValue(r.index())},get max(){return n.state.getThumbMaxValue(r.index())},get step(){return n.state.step()},get value(){return n.state.values()[r.index()]},get required(){return t.isRequired()},get disabled(){return t.isDisabled()},get readonly(){return t.isReadOnly()},get style(){return{...iS,...a.style}},get"aria-orientation"(){return n.state.orientation()},get"aria-valuetext"(){return u()},get"aria-label"(){return l.ariaLabel()},get"aria-labelledby"(){return l.ariaLabelledBy()},get"aria-describedby"(){return l.ariaDescribedBy()},get"aria-invalid"(){return t.validationState()==="invalid"||void 0},get"aria-required"(){return t.isRequired()||void 0},get"aria-disabled"(){return t.isDisabled()||void 0},get"aria-readonly"(){return t.isReadOnly()||void 0}},()=>n.dataset(),s),!1,!1),f})()}function eB(e,t,n){const r=[...e];return r[n]=t,r.sort((i,a)=>i-a)}function vqt(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n),i=n.indexOf(r);return t<e[i]?i:n.lastIndexOf(r)}function gqt(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function nB(e,t){if(t>0){const n=gqt(e);return Math.min(...n)>=t}return!0}function mqt(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Qg(e){e.preventDefault(),e.stopPropagation()}function yqt(e){let t=!1;const n=Bn({minValue:()=>0,maxValue:()=>100,step:()=>1,minStepsBetweenThumbs:()=>0,orientation:()=>"horizontal",isDisabled:()=>!1},e),r=mt(()=>{let E=(n.maxValue()-n.minValue())/10;return E=iR(E,0,E+n.step(),n.step()),Math.max(E,n.step())}),i=mt(()=>n.defaultValue()??[n.minValue()]),[a,o]=zlt({value:()=>n.value(),defaultValue:i,onChange:E=>{var D;return(D=n.onChange)==null?void 0:D.call(n,E)}}),[s,l]=rt(new Array(a().length).fill(!1)),[u,c]=rt(new Array(a().length).fill(!1)),[h,f]=rt(void 0),d=()=>{o(i())},p=E=>(E-n.minValue())/(n.maxValue()-n.minValue()),v=E=>E===0?e.minValue():a()[E-1]+e.minStepsBetweenThumbs()*e.step(),g=E=>E===a().length-1?e.maxValue():a()[E+1]-e.minStepsBetweenThumbs()*e.step(),m=E=>u()[E],_=E=>{c(D=>(D[E]=!0,D))},y=(E,D)=>{if(n.isDisabled()||!m(E))return;const I=iR(D,v(E),g(E),n.step()),L=eB(a(),I,E);nB(L,n.minStepsBetweenThumbs()*n.step())&&o(P=>[...aY(P,E,I)])},x=(E,D)=>{var L;if(n.isDisabled()||!m(E))return;const I=s()[E];l(P=>[...aY(P,E,D)]),I&&!s().some(Boolean)&&((L=n.onChangeEnd)==null||L.call(n,a()))},S=E=>n.numberFormatter.format(E),b=(E,D)=>{y(E,A(D))},w=E=>Math.round((E-n.minValue())/n.step())*n.step()+n.minValue(),A=E=>{const D=E*(n.maxValue()-n.minValue())+n.minValue();return klt(w(D),n.minValue(),n.maxValue())},T=(E,D)=>{const I=a()[E]+D,L=eB(a(),I,E);nB(L,n.minStepsBetweenThumbs()*n.step())&&y(E,iR(I,n.minValue(),n.maxValue(),n.step()))};return{values:a,getThumbValue:E=>a()[E],setThumbValue:y,setThumbPercent:b,isThumbDragging:E=>s()[E],setThumbDragging:x,focusedThumb:h,setFocusedThumb:E=>{var D;E===void 0&&t&&(t=!1,(D=n.onChangeEnd)==null||D.call(n,a())),f(E)},getThumbPercent:E=>p(a()[E]),getValuePercent:p,getThumbValueLabel:E=>S(a()[E]),getFormattedValue:S,getThumbMinValue:v,getThumbMaxValue:g,getPercentValue:A,isThumbEditable:m,setThumbEditable:_,incrementThumb:(E,D=1)=>{t=!0,T(E,Math.max(D,e.step()))},decrementThumb:(E,D=1)=>{t=!0,T(E,-Math.max(D,e.step()))},step:n.step,pageSize:r,orientation:n.orientation,isDisabled:n.isDisabled,setValues:o,resetValues:d}}function aY(e,t,n){return e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)]}function Sut(e){let t;const n=`slider-${Ys()}`,r=Bn({id:n,minValue:0,maxValue:100,step:1,minStepsBetweenThumbs:0,orientation:"horizontal",disabled:!1,inverted:!1,getValueLabel:L=>L.values.join(", ")},e),[i,a,o]=Yt(r,["ref","value","defaultValue","onChange","onChangeEnd","inverted","minValue","maxValue","step","minStepsBetweenThumbs","getValueLabel","orientation"],x2),{formControlContext:s}=b2(a),l=iYt(()=>({style:"decimal"})),{direction:u}=aS(),c=yqt({value:()=>i.value,defaultValue:()=>i.defaultValue??[i.minValue],maxValue:()=>i.maxValue,minValue:()=>i.minValue,minStepsBetweenThumbs:()=>i.minStepsBetweenThumbs,isDisabled:()=>s.isDisabled()??!1,orientation:()=>i.orientation,step:()=>i.step,numberFormatter:l(),onChange:i.onChange,onChangeEnd:i.onChangeEnd}),[h,f]=rt([]),{DomCollectionProvider:d}=qjt({items:h,onItemsChange:f});S2(()=>t,()=>c.resetValues());const p=()=>u()==="ltr",v=()=>p()&&!i.inverted||!p()&&i.inverted,g=()=>!i.inverted,m=()=>c.orientation()==="vertical",_=mt(()=>({...s.dataset(),"data-orientation":i.orientation})),[y,x]=rt();let S=null;const b=(L,P)=>{c.setFocusedThumb(L),c.setThumbDragging(L,!0),c.setThumbValue(L,P),S=null},w=({deltaX:L,deltaY:P})=>{var K;const B=c.focusedThumb();if(B===void 0)return;const{width:N,height:k}=y().getBoundingClientRect(),U=m()?k:N;S===null&&(S=c.getThumbPercent(c.focusedThumb())*U);let Z=m()?P:L;(!m()&&i.inverted||m()&&g())&&(Z=-Z),S+=Z;const nt=klt(S/U,0,1),ct=eB(c.values(),S,B);nB(ct,i.minStepsBetweenThumbs*c.step())&&(c.setThumbPercent(c.focusedThumb(),nt),(K=i.onChange)==null||K.call(i,c.values()))},A=()=>{const L=c.focusedThumb();L!==void 0&&(c.setThumbDragging(L,!1),h()[L].ref().focus())},T=L=>{const P=c.focusedThumb();!s.isDisabled()&&P!==void 0&&(Qg(L),c.setThumbValue(P,c.getThumbMinValue(P)))},M=L=>{const P=c.focusedThumb();!s.isDisabled()&&P!==void 0&&(Qg(L),c.setThumbValue(P,c.getThumbMaxValue(P)))},C=(L,P)=>{if(!s.isDisabled())switch(L.key){case"Left":case"ArrowLeft":case"Down":case"ArrowDown":Qg(L),p()?c.decrementThumb(P,L.shiftKey?c.pageSize():c.step()):c.incrementThumb(P,L.shiftKey?c.pageSize():c.step());break;case"Right":case"ArrowRight":case"Up":case"ArrowUp":Qg(L),p()?c.incrementThumb(P,L.shiftKey?c.pageSize():c.step()):c.decrementThumb(P,L.shiftKey?c.pageSize():c.step());break;case"Home":T(L);break;case"End":M(L);break;case"PageUp":Qg(L),c.incrementThumb(P,c.pageSize());break;case"PageDown":Qg(L),c.decrementThumb(P,c.pageSize());break}},E=mt(()=>m()?g()?"bottom":"top":v()?"left":"right"),D=mt(()=>m()?g()?"top":"bottom":v()?"right":"left"),I={dataset:_,state:c,thumbs:h,setThumbs:f,onSlideStart:b,onSlideMove:w,onSlideEnd:A,onStepKeyDown:C,isSlidingFromLeft:v,isSlidingFromBottom:g,trackRef:y,minValue:()=>i.minValue,maxValue:()=>i.maxValue,inverted:()=>i.inverted,startEdge:E,endEdge:D,registerTrack:L=>x(L),generateId:bd(()=>_t(a.id)),getValueLabel:i.getValueLabel};return O(d,{get children(){return O(oS.Provider,{value:s,get children(){return O(mut.Provider,{value:I,get children(){return O(qn,G({as:"div",ref(L){var P=ci(B=>t=B,i.ref);typeof P=="function"&&P(L)},role:"group",get id(){return _t(a.id)}},_,o))}})}})}})}function wut(e){const t=hS(),[n,r]=Yt(e,["onPointerDown","onPointerMove","onPointerUp"]),[i,a]=rt();function o(h){const f=i()||t.trackRef().getBoundingClientRect(),d=[0,t.state.orientation()==="vertical"?f.height:f.width];let p=t.isSlidingFromLeft()?[t.minValue(),t.maxValue()]:[t.maxValue(),t.minValue()];t.state.orientation()==="vertical"&&(p=t.isSlidingFromBottom()?[t.maxValue(),t.minValue()]:[t.minValue(),t.maxValue()]);const v=mqt(d,p);return a(f),v(h-(t.state.orientation()==="vertical"?f.top:f.left))}let s=0;return O(qn,G({as:"div",ref(h){var f=ci(t.registerTrack,e.ref);typeof f=="function"&&f(h)},onPointerDown:h=>{var v;In(h,n.onPointerDown),h.target.setPointerCapture(h.pointerId),h.preventDefault();const d=o(t.state.orientation()==="horizontal"?h.clientX:h.clientY);s=t.state.orientation()==="horizontal"?h.clientX:h.clientY;const p=vqt(t.state.values(),d);(v=t.onSlideStart)==null||v.call(t,p,d)},onPointerMove:h=>{var d;In(h,n.onPointerMove),h.target.hasPointerCapture(h.pointerId)&&((d=t.onSlideMove)==null||d.call(t,{deltaX:h.clientX-s,deltaY:h.clientY-s}),s=t.state.orientation()==="horizontal"?h.clientX:h.clientY)},onPointerUp:h=>{var d;In(h,n.onPointerUp);const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),a(void 0),(d=t.onSlideEnd)==null||d.call(t))}},()=>t.dataset(),r))}function Tut(e){const t=hS();return O(qn,G({as:"div"},()=>t.dataset(),e,{get children(){var n;return(n=t.getValueLabel)==null?void 0:n.call(t,{values:t.state.values(),max:t.maxValue(),min:t.minValue()})}}))}var _qt=Object.assign(Sut,{Description:G0,ErrorMessage:H0,Fill:yut,Input:but,Label:sS,Thumb:_ut,Track:wut,ValueLabel:Tut}),xc={};Ih(xc,{Control:()=>Aut,Description:()=>Cut,ErrorMessage:()=>Eut,Input:()=>Dut,Label:()=>Iut,Root:()=>Lut,Switch:()=>bqt,Thumb:()=>Put});var Mut=hr();function W0(){const e=Ln(Mut);if(e===void 0)throw new Error("[kobalte]: `useSwitchContext` must be used within a `Switch` component");return e}function Aut(e){const t=Lo(),n=W0(),r=Bn({id:n.generateId("control")},e),[i,a]=Yt(r,["onClick","onKeyDown"]);return O(qn,G({as:"div",onClick:l=>{var u;In(l,i.onClick),n.toggle(),(u=n.inputRef())==null||u.focus()},onKeyDown:l=>{var u;In(l,i.onKeyDown),l.key===_2.Space&&(n.toggle(),(u=n.inputRef())==null||u.focus())}},()=>t.dataset(),()=>n.dataset(),a))}function Cut(e){const t=W0();return O(G0,G(()=>t.dataset(),e))}function Eut(e){const t=W0();return O(H0,G(()=>t.dataset(),e))}function Dut(e){const t=Lo(),n=W0(),r=Bn({id:n.generateId("input")},e),[i,a,o]=Yt(r,["ref","style","onChange","onFocus","onBlur"],lS),{fieldProps:s}=uS(a);return O(qn,G({as:"input",ref(h){var f=ci(n.setInputRef,i.ref);typeof f=="function"&&f(h)},type:"checkbox",role:"switch",get id(){return s.id()},get name(){return t.name()},get value(){return n.value()},get checked(){return n.checked()},get required(){return t.isRequired()},get disabled(){return t.isDisabled()},get readonly(){return t.isReadOnly()},get style(){return{...iS,...i.style}},get"aria-checked"(){return n.checked()},get"aria-label"(){return s.ariaLabel()},get"aria-labelledby"(){return s.ariaLabelledBy()},get"aria-describedby"(){return s.ariaDescribedBy()},get"aria-invalid"(){return t.validationState()==="invalid"||void 0},get"aria-required"(){return t.isRequired()||void 0},get"aria-disabled"(){return t.isDisabled()||void 0},get"aria-readonly"(){return t.isReadOnly()||void 0},onChange:h=>{In(h,i.onChange),h.stopPropagation();const f=h.target;n.setIsChecked(f.checked),f.checked=n.checked()},onFocus:h=>{In(h,i.onFocus),n.setIsFocused(!0)},onBlur:h=>{In(h,i.onBlur),n.setIsFocused(!1)}},()=>t.dataset(),()=>n.dataset(),o))}function Iut(e){const t=W0();return O(sS,G(()=>t.dataset(),e))}function Lut(e){let t;const n=`switch-${Ys()}`,r=Bn({value:"on",id:n},e),[i,a,o]=Yt(r,["ref","children","value","checked","defaultChecked","onChange","onPointerDown"],x2),[s,l]=rt(),[u,c]=rt(!1),{formControlContext:h}=b2(a),f=iV({isSelected:()=>i.checked,defaultIsSelected:()=>i.defaultChecked,onSelectedChange:g=>{var m;return(m=i.onChange)==null?void 0:m.call(i,g)},isDisabled:()=>h.isDisabled(),isReadOnly:()=>h.isReadOnly()});S2(()=>t,()=>f.setIsSelected(i.defaultChecked??!1));const d=g=>{In(g,i.onPointerDown),u()&&g.preventDefault()},p=mt(()=>({"data-checked":f.isSelected()?"":void 0})),v={value:()=>i.value,dataset:p,checked:()=>f.isSelected(),inputRef:s,generateId:bd(()=>_t(a.id)),toggle:()=>f.toggle(),setIsChecked:g=>f.setIsSelected(g),setIsFocused:c,setInputRef:l};return O(oS.Provider,{value:h,get children(){return O(Mut.Provider,{value:v,get children(){return O(qn,G({as:"div",ref(g){var m=ci(_=>t=_,i.ref);typeof m=="function"&&m(g)},role:"group",get id(){return _t(a.id)},onPointerDown:d},()=>h.dataset(),p,o,{get children(){return O(xqt,{state:v,get children(){return i.children}})}}))}})}})}function xqt(e){const t=Er(()=>{const n=e.children;return V0(n)?n(e.state):n});return mt(t)}function Put(e){const t=Lo(),n=W0(),r=Bn({id:n.generateId("thumb")},e);return O(qn,G({as:"div"},()=>t.dataset(),()=>n.dataset(),r))}var bqt=Object.assign(Lut,{Control:Aut,Description:Cut,ErrorMessage:Eut,Input:Dut,Label:Iut,Thumb:Put}),Sqt={};Ih(Sqt,{Root:()=>Rut,Separator:()=>Out});function Rut(e){let t;const n=Bn({orientation:"horizontal"},e),[r,i]=Yt(n,["ref","orientation"]),a=nV(()=>t,()=>"hr");return O(qn,G({as:"hr",ref(o){var s=ci(l=>t=l,r.ref);typeof s=="function"&&s(o)},get role(){return a()!=="hr"?"separator":void 0},get"aria-orientation"(){return r.orientation==="vertical"?"vertical":void 0},get"data-orientation"(){return r.orientation}},i))}var Out=Rut,Nu={};Ih(Nu,{Collapsible:()=>CM,Content:()=>kut,Root:()=>Fut,Trigger:()=>zut});var Nut=hr();function But(){const e=Ln(Nut);if(e===void 0)throw new Error("[kobalte]: `useCollapsibleContext` must be used within a `Collapsible.Root` component");return e}function kut(e){let t;const n=But(),r=Bn({id:n.generateId("content")},e),[i,a]=Yt(r,["ref","id","style"]),o=eV(()=>n.shouldMount()),[s,l]=rt(0),[u,c]=rt(0);let f=n.isOpen()||o.isPresent(),d;return ki(()=>{const p=requestAnimationFrame(()=>{f=!1});Pe(()=>{cancelAnimationFrame(p)})}),Bt(la([()=>o.isPresent()],()=>{if(!t)return;d=d||{transitionDuration:t.style.transitionDuration,animationName:t.style.animationName},t.style.transitionDuration="0s",t.style.animationName="none";const p=t.getBoundingClientRect();l(p.height),c(p.width),f||(t.style.transitionDuration=d.transitionDuration,t.style.animationName=d.animationName)})),Bt(()=>Pe(n.registerContentId(i.id))),O(Xe,{get when(){return o.isPresent()},get children(){return O(qn,G({as:"div",ref(p){var v=ci(g=>{o.setRef(g),t=g},i.ref);typeof v=="function"&&v(p)},get id(){return i.id},get style(){return{"--kb-collapsible-content-height":s()?`${s()}px`:void 0,"--kb-collapsible-content-width":u()?`${u()}px`:void 0,...i.style}}},()=>n.dataset(),a))}})}function Fut(e){const t=`collapsible-${Ys()}`,n=Bn({id:t},e),[r,i]=Yt(n,["open","defaultOpen","onOpenChange","disabled","forceMount"]),[a,o]=rt(),s=rut({open:()=>r.open,defaultOpen:()=>r.defaultOpen,onOpenChange:c=>{var h;return(h=r.onOpenChange)==null?void 0:h.call(r,c)}}),l=mt(()=>({"data-expanded":s.isOpen()?"":void 0,"data-closed":s.isOpen()?void 0:"","data-disabled":r.disabled?"":void 0})),u={dataset:l,isOpen:s.isOpen,disabled:()=>r.disabled??!1,shouldMount:()=>r.forceMount||s.isOpen(),contentId:a,toggle:s.toggle,generateId:bd(()=>i.id),registerContentId:Eu(o)};return O(Nut.Provider,{value:u,get children(){return O(qn,G({as:"div"},l,i))}})}function zut(e){const t=But(),[n,r]=Yt(e,["onClick"]);return O(cS,G({get"aria-expanded"(){return t.isOpen()},get"aria-controls"(){return mt(()=>!!t.isOpen())()?t.contentId():void 0},get disabled(){return t.disabled()},onClick:a=>{In(a,n.onClick),t.toggle()}},()=>t.dataset(),r))}var CM=Object.assign(Fut,{Content:kut,Trigger:zut}),wqt={};Ih(wqt,{Checkbox:()=>Ho,Control:()=>Vut,Description:()=>Gut,ErrorMessage:()=>Hut,Indicator:()=>Wut,Input:()=>$ut,Label:()=>Xut,Root:()=>jut});var Uut=hr();function $0(){const e=Ln(Uut);if(e===void 0)throw new Error("[kobalte]: `useCheckboxContext` must be used within a `Checkbox` component");return e}function Vut(e){const t=Lo(),n=$0(),r=Bn({id:n.generateId("control")},e),[i,a]=Yt(r,["onClick","onKeyDown"]);return O(qn,G({as:"div",onClick:l=>{var u;In(l,i.onClick),n.toggle(),(u=n.inputRef())==null||u.focus()},onKeyDown:l=>{var u;In(l,i.onKeyDown),l.key===_2.Space&&(n.toggle(),(u=n.inputRef())==null||u.focus())}},()=>t.dataset(),()=>n.dataset(),a))}function Gut(e){const t=$0();return O(G0,G(()=>t.dataset(),e))}function Hut(e){const t=$0();return O(H0,G(()=>t.dataset(),e))}function Wut(e){const t=Lo(),n=$0(),r=Bn({id:n.generateId("indicator")},e),[i,a]=Yt(r,["ref","forceMount"]),o=eV(()=>i.forceMount||n.indeterminate()||n.checked());return O(Xe,{get when(){return o.isPresent()},get children(){return O(qn,G({as:"div",ref(s){var l=ci(o.setRef,i.ref);typeof l=="function"&&l(s)}},()=>t.dataset(),()=>n.dataset(),a))}})}function $ut(e){let t;const n=Lo(),r=$0(),i=Bn({id:r.generateId("input")},e),[a,o,s]=Yt(i,["ref","style","onChange","onFocus","onBlur"],lS),{fieldProps:l}=uS(o),[u,c]=rt(!1),h=p=>{if(In(p,a.onChange),p.stopPropagation(),!u()){const v=p.target;r.setIsChecked(v.checked),v.checked=r.checked()}c(!1)},f=p=>{In(p,a.onFocus),r.setIsFocused(!0)},d=p=>{In(p,a.onBlur),r.setIsFocused(!1)};return Bt(la([()=>r.checked(),()=>r.value()],()=>{c(!0),t==null||t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t==null||t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},{defer:!0})),Bt(la([()=>t,()=>r.indeterminate(),()=>r.checked()],([p,v])=>{p&&(p.indeterminate=v)})),O(qn,G({as:"input",ref(p){var v=ci(g=>{r.setInputRef(g),t=g},a.ref);typeof v=="function"&&v(p)},type:"checkbox",get id(){return l.id()},get name(){return n.name()},get value(){return r.value()},get checked(){return r.checked()},get required(){return n.isRequired()},get disabled(){return n.isDisabled()},get readonly(){return n.isReadOnly()},get style(){return{...iS,...a.style}},get"aria-label"(){return l.ariaLabel()},get"aria-labelledby"(){return l.ariaLabelledBy()},get"aria-describedby"(){return l.ariaDescribedBy()},get"aria-invalid"(){return n.validationState()==="invalid"||void 0},get"aria-required"(){return n.isRequired()},get"aria-disabled"(){return n.isDisabled()},get"aria-readonly"(){return n.isReadOnly()},onChange:h,onFocus:f,onBlur:d},()=>n.dataset(),()=>r.dataset(),s))}function Xut(e){const t=$0();return O(sS,G(()=>t.dataset(),e))}function jut(e){let t;const n=`checkbox-${Ys()}`,r=Bn({value:"on",id:n},e),[i,a,o]=Yt(r,["ref","children","value","checked","defaultChecked","indeterminate","onChange","onPointerDown"],x2),[s,l]=rt(),[u,c]=rt(!1),{formControlContext:h}=b2(a),f=iV({isSelected:()=>i.checked,defaultIsSelected:()=>i.defaultChecked,onSelectedChange:g=>{var m;return(m=i.onChange)==null?void 0:m.call(i,g)},isDisabled:()=>h.isDisabled(),isReadOnly:()=>h.isReadOnly()});S2(()=>t,()=>f.setIsSelected(i.defaultChecked??!1));const d=g=>{In(g,i.onPointerDown),u()&&g.preventDefault()},p=mt(()=>({"data-checked":f.isSelected()?"":void 0,"data-indeterminate":i.indeterminate?"":void 0})),v={value:()=>i.value,dataset:p,checked:()=>f.isSelected(),indeterminate:()=>i.indeterminate??!1,inputRef:s,generateId:bd(()=>_t(a.id)),toggle:()=>f.toggle(),setIsChecked:g=>f.setIsSelected(g),setIsFocused:c,setInputRef:l};return O(oS.Provider,{value:h,get children(){return O(Uut.Provider,{value:v,get children(){return O(qn,G({as:"div",ref(g){var m=ci(_=>t=_,i.ref);typeof m=="function"&&m(g)},role:"group",get id(){return _t(a.id)},onPointerDown:d},()=>h.dataset(),p,o,{get children(){return O(Tqt,{state:v,get children(){return i.children}})}}))}})}})}function Tqt(e){const t=Er(()=>{const n=e.children;return V0(n)?n(e.state):n});return mt(t)}var Ho=Object.assign(jut,{Control:Vut,Description:Gut,ErrorMessage:Hut,Indicator:Wut,Input:$ut,Label:Xut}),Mqt=ee("<span>Analysis "),Aqt=ee("<div class=collapsible__content-text><div style=display:flex;flex-direction:column;margin-top:10px;margin-bottom:10px;><div>");function Cqt(){const[e,t]=rt("");return O(Nu.Root,{defaultOpen:!0,class:"collapsible",onOpenChange:n=>{t(n?"":"")},get children(){return[O(Nu.Trigger,{class:"collapsible__trigger",get children(){var n=Mqt();return n.firstChild,le(n,e,null),n}}),O(Nu.Content,{class:"collapsible__content",get children(){return Aqt()}})]}})}var Eqt=ee('<div style="background-color:#f5f5f5;border:1px solid #ddd;border-radius:5px;padding:12px;font-size:14px;line-height:1.4;">'),Dqt=ee("<h4 style=margin-top:0;margin-bottom:8px;font-size:16px;color:#333;>What is <!>?"),lR=ee("<p style=margin-top:0;margin-bottom:10px;>"),Iqt=ee("<h4 style=margin-top:12px;margin-bottom:8px;font-size:16px;color:#333;>How is it calculated?"),Lqt=ee("<h4 style=margin-top:12px;margin-bottom:8px;font-size:16px;color:#333;>To which motion quality it is related?"),Pqt=ee("<h4 style=margin-top:12px;margin-bottom:8px;font-size:16px;color:#333;>How it can be interpreted?"),Rqt=ee("<p style=margin-top:0;margin-bottom:10px;white-space:pre-line;>"),Oqt=ee("<h4 style=margin-top:12px;margin-bottom:8px;font-size:16px;color:#333;>Measurement unit"),Nqt=ee("<p style=margin-top:0;margin-bottom:0;>"),Bqt=ee("<p style=margin:0;color:#666;>Select a metric to see information about it.");function kqt(){const e=m3t();return(()=>{var t=Eqt();return le(t,(()=>{var n=mt(()=>!!e.title);return()=>n()?[(()=>{var r=Dqt(),i=r.firstChild,a=i.nextSibling;return a.nextSibling,le(r,()=>e.title,a),r})(),(()=>{var r=lR();return le(r,()=>e.description),r})(),Iqt(),(()=>{var r=lR();return le(r,()=>e.calculation),r})(),Lqt(),(()=>{var r=lR();return le(r,()=>e.quality),r})(),Pqt(),(()=>{var r=Rqt();return le(r,()=>e.interpretation),r})(),Oqt(),(()=>{var r=Nqt();return le(r,()=>e.unit),r})()]:Bqt()})()),t})()}var Fqt=ee("<div><div><select><option value=speed>Speed</option><option value=acceleration>Acceleration</option><option value=jerk>Jerk</option></select></div><div>");function Yut(){let e;ki(()=>{if(!gp()&&e){const i=_k(e);w9(i),n(i)}const r=new ResizeObserver(()=>t());e&&r.observe(e),window.addEventListener("resize",t),Pe(()=>{e&&r.unobserve(e),r.disconnect()})}),Pe(()=>{window.removeEventListener("resize",t);const r=gp();r&&(r.dispose(),w9(null))});const t=()=>{const r=gp();r&&e&&r.resize()};function n(r){const i=yr(),a=$L(),o=b9(),s=S9(),l=T9(),u=M9(),c=A9(),h=C9(),f=E9();if(a==="speed"&&(!(o!=null&&o.length)||!(s!=null&&s.length))||a==="acceleration"&&(!(l!=null&&l.length)||!(u!=null&&u.length)||!(c!=null&&c.length)||!(h!=null&&h.length))||a==="jerk"&&!(f!=null&&f.length))return;r.clear();let d=[],p="";switch(a){case"speed":d=s,p="Speed (units/s)";break;case"acceleration":d=h,p="Acceleration (units/s)";break;case"jerk":d=f,p="Jerk (units/s)";break}const v={title:{text:a==="speed"?`Movement Speed Analysis - ${i}`:a==="acceleration"?`Movement Acceleration Analysis - ${i}`:`Movement Jerk Analysis - ${i}`,left:"center",top:10},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:a==="speed"?["2D Speed (XZ Plane)","3D Speed"]:a==="acceleration"?["X Acceleration","Y Acceleration","Z Acceleration","Acceleration Magnitude"]:["Jerk"],top:30},grid:{left:"5%",right:"5%",bottom:"10%",top:"25%",containLabel:!0},dataZoom:[{type:"inside",xAxisIndex:0},{type:"slider",xAxisIndex:0,bottom:10}],xAxis:{type:"category",data:Array.from({length:d.length},(g,m)=>m),name:"Frame"},yAxis:{type:"value",name:p},series:a==="speed"?[{name:"2D Speed (XZ Plane)",type:"line",data:o,smooth:!0,lineStyle:{color:"#145e9f"}},{name:"3D Speed",type:"line",data:s,smooth:!0,lineStyle:{color:"#ff4d4f"}}]:a==="acceleration"?[{name:"X Acceleration",type:"line",data:l,smooth:!0,lineStyle:{color:"#ff4444"}},{name:"Y Acceleration",type:"line",data:u,smooth:!0,lineStyle:{color:"#44ff44"}},{name:"Z Acceleration",type:"line",data:c,smooth:!0,lineStyle:{color:"#4444ff"}},{name:"Acceleration Magnitude",type:"line",data:h,smooth:!0,lineStyle:{color:"#dba21c"}}]:[{name:"Jerk",type:"line",data:f,smooth:!0,lineStyle:{color:"#dba21c"}}]};r.setOption(v,!0)}return Bt(()=>{yr();const r=gp();r&&n(r)}),Bt(()=>{$L();const r=gp();r&&n(r)}),Bt(()=>{const r=b9();S9();const i=T9();M9(),A9(),C9(),E9();const a=gp();a&&(r!=null&&r.length||i!=null&&i.length)&&n(a)}),(()=>{var r=Fqt(),i=r.firstChild,a=i.firstChild,o=i.nextSibling;r.style.setProperty("width","100%"),r.style.setProperty("height","100%"),r.style.setProperty("position","relative"),i.style.setProperty("position","absolute"),i.style.setProperty("top","10px"),i.style.setProperty("right","10px"),i.style.setProperty("z-index","1"),a.addEventListener("change",l=>Mrt(l.target.value)),a.style.setProperty("padding","4px 8px"),a.style.setProperty("border-radius","4px"),a.style.setProperty("border","1px solid #ccc"),a.style.setProperty("background-color","white"),a.style.setProperty("font-size","14px"),a.style.setProperty("cursor","pointer");var s=e;return typeof s=="function"?ny(s,o):e=o,o.style.setProperty("width","100%"),o.style.setProperty("height","calc(100% - 20px)"),o.style.setProperty("margin-top","20px"),pr(()=>a.value=$L()),r})()}var zqt=ee("<div style=height:300px;width:100%;>"),Uqt=ee("<div style=padding:15px;text-align:center;background:#f5f5f5;><p>Spatial analysis is displayed on the 3D model view.</p><p style=font-size:12px;color:#666;margin-top:5px;>Note: For the Distance Covered metric, a draggable popup will appear in the scene."),Vqt=ee("<div style=padding:15px;text-align:center;background:#f5f5f5;><p>Geometrical analysis is displayed on the 3D model view."),Gqt=ee("<div style=padding:15px;text-align:center;background:#f5f5f5;><p>Select a metric to see analysis."),Hqt=ee('<div style="border:1px solid #ddd;border-radius:5px;overflow:hidden;">');function Wqt(){const[e,t]=rt("none");return Bt(()=>{const n=hM(),r=fM(),i=dM();t(i!=="none"?"temporal":r!=="none"?"spatial":n!=="none"?"geometrical":"none")}),(()=>{var n=Hqt();return le(n,O(Xe,{get when(){return mt(()=>e()==="temporal")()&&Trt()},get children(){var r=zqt();return le(r,O(Yut,{})),r}}),null),le(n,O(Xe,{get when(){return e()==="spatial"},get children(){return Uqt()}}),null),le(n,O(Xe,{get when(){return e()==="geometrical"},get children(){return Vqt()}}),null),le(n,O(Xe,{get when(){return e()==="none"},get children(){return Gqt()}}),null),n})()}var $qt=ee("<span>Motion Analysis "),Xqt=ee('<div style=margin-top:20px;display:flex;flex-direction:column;gap:15px;><div style=display:flex;justify-content:space-between;align-items:center;><h3 style=margin:0;font-size:16px;color:#333;>Metric Information</h3></div><h3 style="margin:10px 0 5px;font-size:16px;color:#333;">Analysis'),jqt=ee('<div class=collapsible__content-text><div style=display:flex;flex-direction:column;gap:15px;><div><h3 style=margin-bottom:5px;font-size:16px;color:#333;>Spatial Metrics</h3><select style="width:100%;padding:5px;border-radius:4px;border:1px solid #ccc;"></select></div><div><h3 style=margin-bottom:5px;font-size:16px;color:#333;>Temporal Metrics</h3><select style="width:100%;padding:5px;border-radius:4px;border:1px solid #ccc;"></select></div><div><h3 style=margin-bottom:5px;font-size:16px;color:#333;>Geometrical Metrics</h3><select style="width:100%;padding:5px;border-radius:4px;border:1px solid #ccc;">'),uR=ee("<option>");function Yqt(){const[e,t]=rt(""),n=[{value:"none",label:"None"},{value:"box",label:"Bounding Box"},{value:"sphere",label:"Bounding Sphere"},{value:"ellipsoid",label:"Bounding Ellipsoid"},{value:"com",label:"Center of Mass (CoM)"},{value:"balance",label:"Balance"}],r=[{value:"none",label:"None"},{value:"distance",label:"Distance Covered"}],i=[{value:"none",label:"None"},{value:"speed",label:"Speed/Velocity"},{value:"acceleration",label:"Acceleration"},{value:"jerk",label:"Jerk"}],a=l=>{const u=l.target.value;d3t(u),Pi().forEach(c=>{c.setActiveDescriptor(u)}),ss(u==="box"?{title:"Bounding Box",description:"The minimal rectangular parallelepiped (or cuboid) that completely encloses all the points representing the body's joints.",calculation:"By finding the minimum and maximum coordinates of the body in each spatial dimension (x, y, and z).",quality:'Bounding box quantifies the "spread" or spatial extent of the body corresponding to the "expansiveness" or "contraction" of motion that is associated to motion styles such as expressivity (expanded = dramatic etc.)',interpretation:`> Big Bounding Box: an open, expansive posture and dynamic, expressive movement.
> Small Bounding Box: a contracted, controlled posture and potentially a subtler, less extroverted movement style.`,unit:"Cubic meter/centimeter"}:u==="sphere"?{title:"Bounding Sphere",description:"The smallest sphere that completely encloses all the points representing the body's joints.",calculation:"By determining the center of the sphere and the radius that encompasses all joint positions.",quality:"The bounding sphere relates to the overall spatial occupancy of the body and can indicate the expansiveness of movement.",interpretation:`> Large Sphere Radius: indicates expanded, outreaching movements.
> Small Sphere Radius: indicates contained, centralized movements.`,unit:"Cubic meter/centimeter"}:u==="ellipsoid"?{title:"Bounding Ellipsoid",description:"A more form-fitting enclosure than a sphere or box that better approximates the body's shape.",calculation:"By calculating principal axes and dimensions of an ellipsoid that best fits the joint positions.",quality:"The bounding ellipsoid provides information about directional extension of the body in space.",interpretation:`> Elongated Ellipsoid: indicates a stretched-out posture in specific directions.
> Spherical Ellipsoid: suggests a balanced extension in all directions.`,unit:"Cubic meter/centimeter"}:u==="com"?{title:"Center of Mass (CoM)",description:"The weighted average position of all parts of the body.",calculation:"By computing a weighted average of joint positions, with weights proportional to the mass of body segments.",quality:"The CoM trajectory provides insights into balance, stability, and overall movement efficiency.",interpretation:`> Stable CoM: indicates controlled, balanced movement.
> Dynamic CoM: suggests expressive, potentially less stable movement.`,unit:"Meters/centimeters (position coordinates)"}:u==="balance"?{title:"Balance",description:"A measure of postural stability based on the relationship between the center of mass and the base of support.",calculation:"By analyzing the projection of the CoM relative to the support polygon formed by the feet.",quality:"Balance relates to stability, control, and the potential for movement initiation.",interpretation:`> High Balance Value: indicates stable, controlled posture.
> Low Balance Value: suggests dynamic, potentially unstable posture ready for movement.`,unit:"Normalized ratio (0-1) or percentage"}:{title:"",description:"",calculation:"",quality:"",interpretation:"",unit:""})},o=l=>{const u=l.target.value;p3t(u),Pi().forEach(c=>{if(c.setActiveDescriptor(u),u==="none"){const h=document.getElementById("distance-tracker-hud");h&&h.parentNode.removeChild(h)}}),ss(u==="distance"?{title:"Distance Covered",description:"The total path length traveled by a joint or the center of mass during the motion sequence.",calculation:"By summing the Euclidean distances between consecutive positions of the tracked point over time.",quality:"Distance covered relates to the overall motion quantity and spatial exploration of the performer.",interpretation:`> Large Distance: indicates extensive movement with high mobility.
> Small Distance: suggests contained, economical movement with limited spatial exploration.`,unit:"Meters/centimeters"}:{title:"",description:"",calculation:"",quality:"",interpretation:"",unit:""})},s=l=>{const u=l.target.value;v3t(u),Mrt(u),ss(u==="speed"?{title:"Speed/Velocity",description:"The rate of change of position with respect to time, indicating how fast the body or a joint is moving.",calculation:"First derivative of position with respect to time: v = position/time",quality:"Speed relates to the tempo and dynamics of movement, indicating energy and urgency.",interpretation:`> High Speed: suggests energetic, possibly urgent or expressive movement.
> Low Speed: indicates controlled, deliberate, or restrained movement.`,unit:"Meters/centimeters per second"}:u==="acceleration"?{title:"Acceleration",description:"The rate of change of velocity with respect to time, indicating how quickly speed changes.",calculation:"Second derivative of position with respect to time: a = velocity/time",quality:"Acceleration provides insights into movement dynamics, effort, and expressiveness.",interpretation:`> High Acceleration: indicates forceful, dynamic movement with rapid changes.
> Low Acceleration: suggests smooth, continuous movement with gradual transitions.`,unit:"Meters/centimeters per second squared"}:u==="jerk"?{title:"Jerk",description:"The rate of change of acceleration with respect to time, indicating the smoothness of movement.",calculation:"Third derivative of position with respect to time: j = acceleration/time",quality:"Jerk relates to movement quality, particularly smoothness and control.",interpretation:`> Low Jerk: indicates smooth, well-controlled movement.
> High Jerk: suggests abrupt, potentially less controlled or more expressive movement.`,unit:"Meters/centimeters per second cubed"}:{title:"",description:"",calculation:"",quality:"",interpretation:"",unit:""})};return Bt(()=>{a({target:{value:hM()}})}),Bt(()=>{o({target:{value:fM()}})}),Bt(()=>{s({target:{value:dM()}})}),O(CM,{defaultOpen:!0,class:"collapsible",onOpenChange:l=>{t(l?"":"")},get children(){return[O(CM.Trigger,{class:"collapsible__trigger",get children(){var l=$qt();return l.firstChild,le(l,e,null),l}}),O(CM.Content,{class:"collapsible__content",get children(){var l=jqt(),u=l.firstChild,c=u.firstChild,h=c.firstChild,f=h.nextSibling,d=c.nextSibling,p=d.firstChild,v=p.nextSibling,g=d.nextSibling,m=g.firstChild,_=m.nextSibling;return f.addEventListener("change",o),le(f,()=>r.map(y=>(()=>{var x=uR();return le(x,()=>y.label),pr(()=>x.value=y.value),x})())),v.addEventListener("change",s),le(v,()=>i.map(y=>(()=>{var x=uR();return le(x,()=>y.label),pr(()=>x.value=y.value),x})())),_.addEventListener("change",a),le(_,()=>n.map(y=>(()=>{var x=uR();return le(x,()=>y.label),pr(()=>x.value=y.value),x})())),le(l,O(Xe,{get when(){return hM()!=="none"||fM()!=="none"||dM()!=="none"},get children(){var y=Xqt(),x=y.firstChild;x.firstChild;var S=x.nextSibling;return le(x,O(Ho,{class:"checkbox",get checked(){return D9()},onChange:b=>{g3t(b)},get children(){return[O(Ho.Input,{class:"checkbox__input"}),O(Ho.Control,{class:"checkbox__control",get children(){return O(Ho.Indicator,{children:""})}})]}}),null),le(y,O(Xe,{get when(){return D9()},get children(){return O(kqt,{})}}),S),le(y,O(Wqt,{}),null),y}}),null),pr(()=>f.value=fM()),pr(()=>v.value=dM()),pr(()=>_.value=hM()),l}})]}})}function Mr(e){const[t,n]=rt(e);return{get:t,set:n}}function qqt({initialValues:e={},validateOn:t="submit",revalidateOn:n="input",validate:r}={}){const i=Mr([]),a=Mr([]),o=Mr(),s=Mr(0),l=Mr(!1),u=Mr(!1),c=Mr(!1),h=Mr(!1),f=Mr(!1),d=Mr(!1),p=Mr({});return{internal:{initialValues:e,validate:r,validateOn:t,revalidateOn:n,fieldNames:i,fieldArrayNames:a,element:o,submitCount:s,submitting:l,submitted:u,validating:c,touched:h,dirty:f,invalid:d,response:p,fields:{},fieldArrays:{},validators:new Set},get element(){return o.get()},get submitCount(){return s.get()},get submitting(){return l.get()},get submitted(){return u.get()},get validating(){return c.get()},get touched(){return h.get()},get dirty(){return f.get()},get invalid(){return d.get()},get response(){return p.get()}}}function Kqt(e){const t=qqt(e);return[t,{Form:n=>hKt(G({of:t},n)),Field:n=>lKt(G({of:t},n)),FieldArray:n=>uKt(G({of:t},n))}]}function oY(e,t,n){const{checked:r,files:i,options:a,value:o,valueAsDate:s,valueAsNumber:l}=e;return $e(()=>!n||n==="string"?o:n==="string[]"?a?[...a].filter(u=>u.selected&&!u.disabled).map(u=>u.value):r?[...t.value.get()||[],o]:(t.value.get()||[]).filter(u=>u!==o):n==="number"?l:n==="boolean"?r:n==="File"&&i?i[0]:n==="File[]"&&i?[...i]:n==="Date"&&s?s:t.value.get())}function cV(e){return[...Object.values(e.internal.fields),...Object.values(e.internal.fieldArrays)]}function zl(e,t){return e.internal.fieldArrays[t]}function Xc(e,t){return+t.replace(`${e}.`,"").split(".")[0]}function qut(e,t){E2(e,!1).forEach(n=>{const r=$e(zl(e,n).items.get).length-1;t.filter(i=>i.startsWith(`${n}.`)&&Xc(n,i)>r).forEach(i=>{t.splice(t.indexOf(i),1)})})}function E2(e,t=!0){const n=[...$e(e.internal.fieldArrayNames.get)];return t&&qut(e,n),n}function Kut(e,t){const n=zl(e,t);return n?$e(()=>({startItems:n.startItems.get(),items:n.items.get(),error:n.error.get(),touched:n.touched.get(),dirty:n.dirty.get()})):void 0}function hV(e,t=!0){const n=[...$e(e.internal.fieldNames.get)];return t&&qut(e,n),n}function fh(e,t){return e.internal.fields[t]}function Zut(e,t){const n=fh(e,t);return n?$e(()=>({startValue:n.startValue.get(),value:n.value.get(),error:n.error.get(),touched:n.touched.get(),dirty:n.dirty.get()})):void 0}function fV(e,t,n){return $e(()=>{const r=hV(e,n),i=E2(e,n);return typeof t=="string"||Array.isArray(t)?(typeof t=="string"?[t]:t).reduce((a,o)=>{const[s,l]=a;return i.includes(o)?(i.forEach(u=>{u.startsWith(o)&&l.add(u)}),r.forEach(u=>{u.startsWith(o)&&s.add(u)})):s.add(o),a},[new Set,new Set]).map(a=>[...a]):[r,i]})}function dV(e,t){return(typeof e!="string"&&!Array.isArray(e)?e:t)||{}}function zC(e,t){return e.split(".").reduce((n,r)=>n==null?void 0:n[r],t)}let Zqt=0;function X0(){return Zqt++}function Jqt(e,t){const n=r=>r instanceof Blob?r.size:r;return Array.isArray(e)&&Array.isArray(t)?e.map(n).join()!==t.map(n).join():e instanceof Date&&t instanceof Date?e.getTime()!==t.getTime():Number.isNaN(e)&&Number.isNaN(t)?!1:e!==t}function Jut(e,t){$e(()=>e.internal.dirty.set(t||cV(e).some(n=>n.active.get()&&n.dirty.get())))}function Qqt(e,t){$e(()=>{const n=Jqt(t.startValue.get(),t.value.get());n!==t.dirty.get()&&li(()=>{t.dirty.set(n),Jut(e,n)})})}function pV(e,t,n,{on:r,shouldFocus:i=!1}){$e(()=>{const a=t.validateOn??e.internal.validateOn,o=t.revalidateOn??e.internal.revalidateOn;r.includes((a==="submit"?e.internal.submitted.get():t.error.get())?o:a)&&ict(e,n,{shouldFocus:i})})}function cR(e,t,n,r,i,a){li(()=>{t.value.set(o=>t.transform.reduce((s,l)=>l(s,r),a??o)),t.touched.set(!0),e.internal.touched.set(!0),Qqt(e,t),pV(e,t,n,{on:i})})}function Qut(e,t){var n;if(!zl(e,t)){const r=((n=zC(t,e.internal.initialValues))==null?void 0:n.map(()=>X0()))||[],i=Mr(r),a=Mr(r),o=Mr(r),s=Mr(""),l=Mr(!1),u=Mr(!1),c=Mr(!1);e.internal.fieldArrays[t]={initialItems:i,startItems:a,items:o,error:s,active:l,touched:u,dirty:c,validate:[],validateOn:void 0,revalidateOn:void 0,consumers:new Set},e.internal.fieldArrayNames.set(h=>[...h,t])}return zl(e,t)}function tct(e,t){if(!fh(e,t)){const n=zC(t,e.internal.initialValues),r=Mr([]),i=Mr(n),a=Mr(n),o=Mr(n),s=Mr(""),l=Mr(!1),u=Mr(!1),c=Mr(!1);e.internal.fields[t]={elements:r,initialValue:i,startValue:a,value:o,error:s,active:l,touched:u,dirty:c,validate:[],validateOn:void 0,revalidateOn:void 0,transform:[],consumers:new Set},e.internal.fieldNames.set(h=>[...h,t])}return fh(e,t)}function tKt(e,t,{shouldActive:n=!0}){const r=Object.entries(t).reduce((i,[a,o])=>([fh(e,a),zl(e,a)].every(s=>!s||n&&!$e(s.active.get))&&i.push(o),i),[]).join(" ");r&&e.internal.response.set({status:"error",message:r})}function vV(e,t,n){const r=Qut(e,t);r.startItems.set(n.startItems),r.items.set(n.items),r.error.set(n.error),r.touched.set(n.touched),r.dirty.set(n.dirty)}function gV(e,t,n){const r=tct(e,t);r.startValue.set(()=>n.startValue),r.value.set(()=>n.value),r.error.set(n.error),r.touched.set(n.touched),r.dirty.set(n.dirty)}function eKt(e,t,{at:n,value:r}){li(()=>{const i=(a,o)=>{Object.entries(o).forEach(([s,l])=>{const u=`${a}.${s}`;if((!l||typeof l!="object"||Array.isArray(l)||l instanceof Date||l instanceof Blob)&&gV(e,u,{startValue:l,value:l,error:"",touched:!1,dirty:!1}),Array.isArray(l)){const c=l.map(()=>X0());vV(e,u,{startItems:[...c],items:c,error:"",touched:!1,dirty:!1})}l&&typeof l=="object"&&i(u,l)})};i(t,{[n]:r})})}function UC(e){return(t,n)=>Xc(e,t)-Xc(e,n)}function nKt(e,t){$e(()=>{const n=t.startItems.get().join()!==t.items.get().join();n!==t.dirty.get()&&li(()=>{t.dirty.set(n),Jut(e,n)})})}function ect(e,t){$e(()=>{e.internal.invalid.set(t||cV(e).some(n=>n.active.get()&&n.error.get()))})}function rB(e){let t=!1,n=!1,r=!1;$e(()=>{for(const i of cV(e))if(i.active.get()&&(i.touched.get()&&(t=!0),i.dirty.get()&&(n=!0),i.error.get()&&(r=!0)),t&&n&&r)break}),li(()=>{e.internal.touched.set(t),e.internal.dirty.set(n),e.internal.invalid.set(r)})}function nct(e,t){$e(()=>{var n,r;return(r=(n=fh(e,t))==null?void 0:n.elements.get()[0])==null?void 0:r.focus()})}function rKt(e,t,n,{shouldActive:r=!0,shouldTouched:i=!1,shouldDirty:a=!1,shouldFocus:o=!!n}={}){li(()=>{$e(()=>{for(const s of[fh(e,t),zl(e,t)])s&&(!r||s.active.get())&&(!i||s.touched.get())&&(!a||s.dirty.get())&&(s.error.set(n),n&&"value"in s&&o&&nct(e,t))}),ect(e,!!n)})}function rct(e,t,n){const[r,i]=fV(e,t),{shouldActive:a=!0,shouldTouched:o=!1,shouldDirty:s=!1,shouldValid:l=!1}=dV(t,n);return typeof t!="string"&&!Array.isArray(t)?e.internal.fieldNames.get():i.forEach(u=>zl(e,u).items.get()),r.reduce((u,c)=>{const h=fh(e,c);return(!a||h.active.get())&&(!o||h.touched.get())&&(!s||h.dirty.get())&&(!l||!h.error.get())&&(typeof t=="string"?c.replace(`${t}.`,""):c).split(".").reduce((f,d,p,v)=>f[d]=p===v.length-1?h.value.get():typeof f[d]=="object"&&f[d]||(isNaN(+v[p+1])?{}:[]),u),u},typeof t=="string"?[]:{})}function iKt(e,t,n){const r=zl(e,t);r&&($e(()=>{const i=r.items.get().length,{at:a=i,value:o}=n;a>=0&&a<=i&&li(()=>{if(a<i){const s=u=>u.startsWith(`${t}.`)&&Xc(t,u)>=a,l=(u,c)=>u.replace(`${t}.${c}`,`${t}.${c+1}`);hV(e).filter(s).sort(UC(t)).reverse().forEach(u=>{gV(e,l(u,Xc(t,u)),Zut(e,u))}),E2(e).filter(s).sort(UC(t)).reverse().forEach(u=>{vV(e,l(u,Xc(t,u)),Kut(e,u))})}eKt(e,t,{at:a,value:o}),r.items.set(s=>{const l=[...s];return l.splice(a,0,X0()),l}),r.touched.set(!0),e.internal.touched.set(!0),r.dirty.set(!0),e.internal.dirty.set(!0)})}),setTimeout(()=>pV(e,r,t,{on:["touched","input"]}),250))}function aKt(e,t,{at:n}){const r=zl(e,t);r&&$e(()=>{const i=r.items.get().length-1;if(n>=0&&n<=i){const a=s=>s.startsWith(`${t}.`)&&Xc(t,s)>n,o=(s,l)=>s.replace(`${t}.${l}`,`${t}.${l-1}`);li(()=>{hV(e).filter(a).sort(UC(t)).forEach(s=>{gV(e,o(s,Xc(t,s)),Zut(e,s))}),E2(e).filter(a).sort(UC(t)).forEach(s=>{vV(e,o(s,Xc(t,s)),Kut(e,s))}),r.items.set(s=>{const l=[...s];return l.splice(n,1),l}),r.touched.set(!0),e.internal.touched.set(!0),nKt(e,r),pV(e,r,t,{on:["touched","input"]})})}})}function oKt(e,t,n){const[r,i]=fV(e,t,!1),a=typeof t=="string"&&r.length===1,o=!a&&!Array.isArray(t),s=dV(t,n),{initialValue:l,initialValues:u,keepResponse:c=!1,keepSubmitCount:h=!1,keepSubmitted:f=!1,keepValues:d=!1,keepDirtyValues:p=!1,keepItems:v=!1,keepDirtyItems:g=!1,keepErrors:m=!1,keepTouched:_=!1,keepDirty:y=!1}=s;li(()=>$e(()=>{r.forEach(x=>{const S=fh(e,x);(a?"initialValue"in s:u)&&S.initialValue.set(()=>a?l:zC(x,u));const b=p&&S.dirty.get();!d&&!b&&(S.startValue.set(S.initialValue.get),S.value.set(S.initialValue.get),S.elements.get().forEach(w=>{w.type==="file"&&(w.value="")})),_||S.touched.set(!1),!y&&!d&&!b&&S.dirty.set(!1),m||S.error.set("")}),i.forEach(x=>{var w;const S=zl(e,x),b=g&&S.dirty.get();!v&&!b&&(u&&S.initialItems.set(((w=zC(x,u))==null?void 0:w.map(()=>X0()))||[]),S.startItems.set([...S.initialItems.get()]),S.items.set([...S.initialItems.get()])),_||S.touched.set(!1),!y&&!v&&!b&&S.dirty.set(!1),m||S.error.set("")}),o&&(c||e.internal.response.set({}),h||e.internal.submitCount.set(0),f||e.internal.submitted.set(!1)),rB(e)}))}function sKt(e,t,{duration:n}={}){e.internal.response.set(t),n&&setTimeout(()=>{$e(e.internal.response.get)===t&&e.internal.response.set({})},n)}async function ict(e,t,n){const[r,i]=fV(e,t),{shouldActive:a=!0,shouldFocus:o=!0}=dV(t,n),s=X0();e.internal.validators.add(s),e.internal.validating.set(!0);const l=e.internal.validate?await e.internal.validate($e(()=>rct(e,{shouldActive:a}))):{};let u=typeof t!="string"&&!Array.isArray(t)?!Object.keys(l).length:!0;const[c]=await Promise.all([Promise.all(r.map(async h=>{const f=fh(e,h);if(!a||$e(f.active.get)){let d;for(const v of f.validate)if(d=await v($e(f.value.get)),d)break;const p=d||l[h]||"";return p&&(u=!1),f.error.set(p),p?h:null}})),Promise.all(i.map(async h=>{const f=zl(e,h);if(!a||$e(f.active.get)){let d="";for(const v of f.validate)if(d=await v($e(f.items.get)),d)break;const p=d||l[h]||"";p&&(u=!1),f.error.set(p)}}))]);return li(()=>{if(tKt(e,l,{shouldActive:a}),o){const h=c.find(f=>f);h&&nct(e,h)}ect(e,!u),e.internal.validators.delete(s),e.internal.validators.size||e.internal.validating.set(!1)}),u}function act({of:e,name:t,getStore:n,validate:r,validateOn:i,revalidateOn:a,transform:o,keepActive:s=!1,keepState:l=!0}){Bt(()=>{const u=n();u.validate=r?Array.isArray(r)?r:[r]:[],u.validateOn=i,u.revalidateOn=a,"transform"in u&&(u.transform=o?Array.isArray(o)?o:[o]:[]);const c=X0();u.consumers.add(c),$e(u.active.get)||li(()=>{u.active.set(!0),rB(e)}),Pe(()=>setTimeout(()=>{u.consumers.delete(c),li(()=>{!s&&!u.consumers.size&&(u.active.set(!1),l?rB(e):oKt(e,t))}),"elements"in u&&u.elements.set(h=>h.filter(f=>f.isConnected))}))})}function lKt(e){const t=mt(()=>tct(e.of,e.name));return act(G({getStore:t},e)),mt(()=>e.children({get name(){return e.name},get value(){return t().value.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}},{get name(){return e.name},get autofocus(){return!!t().error.get()},ref(n){t().elements.set(r=>[...r,n]),Bt(()=>{if(n.type!=="radio"&&t().startValue.get()===void 0&&$e(t().value.get)===void 0){const r=oY(n,t(),e.type);t().startValue.set(()=>r),t().value.set(()=>r)}})},onInput(n){cR(e.of,t(),e.name,n,["touched","input"],oY(n.currentTarget,t(),e.type))},onChange(n){cR(e.of,t(),e.name,n,["change"])},onBlur(n){cR(e.of,t(),e.name,n,["touched","blur"])}}))}function uKt(e){const t=mt(()=>Qut(e.of,e.name));return act(G({getStore:t},e)),mt(()=>e.children({get name(){return e.name},get items(){return t().items.get()},get error(){return t().error.get()},get active(){return t().active.get()},get touched(){return t().touched.get()},get dirty(){return t().dirty.get()}}))}class sY extends Error{constructor(n,r){super(typeof n=="string"?n:"");_i(this,"name","FormError");_i(this,"errors");this.errors=typeof n=="string"?r||{}:n}}var cKt=ee("<form novalidate>");function hKt(e){const[,t,n]=Yt(e,["of"],["keepResponse","shouldActive","shouldTouched","shouldDirty","shouldFocus"]);return(()=>{var r=cKt(),i=e.of.internal.element.set;return typeof i=="function"?ny(i,r):e.of.internal.element.set=r,Bv(r,G(n,{onSubmit:async a=>{a.preventDefault();const{of:o,onSubmit:s,responseDuration:l}=e;li(()=>{t.keepResponse||o.internal.response.set({}),o.internal.submitCount.set(u=>u+1),o.internal.submitted.set(!0),o.internal.submitting.set(!0)});try{await ict(o,t)&&await(s==null?void 0:s(rct(o,t),a))}catch(u){li(()=>{u instanceof sY&&Object.entries(u.errors).forEach(([c,h])=>{h&&rKt(o,c,h,{...t,shouldFocus:!1})}),(!(u instanceof sY)||u.message)&&sKt(o,{status:"error",message:(u==null?void 0:u.message)||"An unknown error has occurred."},{duration:l})})}finally{o.internal.submitting.set(!1)}}}),!1,!1),r})()}function fKt(){const e=["GBBSS01G03R01.bvh","GBBSS01G03R02.bvh","GBBSS01G03R03.bvh","GBBSS01G03R04.bvh","GBBSS01G03R05.bvh","MCEAS02G01R01.bvh","MCEAS02G01R02.bvh","MCEAS02G01R03.bvh","PLNS01P02R05.bvh","PLNS02P03R02.bvh","S4P07R1.bvh","S4P07R2.bvh","S4P07R3.bvh","SWMLS01G01R01.bvh","SWMLS01G01R02.bvh","Test_Bending.bvh","Test_Glassblowing.bvh","Train_Bending.bvh","Train_Glassblowing.bvh","TV_S01P01R13.bvh","TVBS01P01R02.bvh","TVBS01P02R07.bvh","TVBS01P03R09.bvh"];return O($r.Root,{get defaultValue(){return e3t()?"MCEAS02G01R03.bvh":" "},options:e,allowDuplicateSelectionEvents:!1,disallowEmptySelection:!0,onChange:async t=>{const n="bvh2/"+t;Q9t(n),o3(n),console.log("Selected Skeleton File: ",t,cM())},placeholder:"Select a BVH file...",itemComponent:t=>O($r.Item,{get item(){return t.item},class:"select__item",get children(){return[O($r.ItemLabel,{get children(){return t.item.rawValue}}),O($r.ItemIndicator,{class:"select__item-indicator"})]}}),get children(){return[O($r.Trigger,{class:"select__trigger","aria-label":"Fruit",get children(){return[O($r.Value,{class:"select__value",children:t=>t.selectedOption()}),O($r.Icon,{class:"select__icon"})]}}),O($r.Description,{id:"BVHSelectLabel",children:"Choose file."}),O($r.Portal,{get children(){return O($r.Content,{class:"select__content",get children(){return O($r.Listbox,{class:"select__listbox"})}})}})]}})}var dKt=ee("<button type=button>Add Option"),pKt=ee("<div><div class=toolbarDescription>Skeleton </div><button type=button>Delete Option"),vKt=ee("<div class=toolbarDescription>Select File from Repository:"),gKt=ee("<div>"),mKt=ee("<div class=toolbarDescription style=margin-bottom:0;margin-top:-20px;padding:0;>or"),yKt=ee("<div class=upload-container><label class=custom-file-upload>Upload File</label><input type=file><span class=file-info>");const _Kt={options:["Option 1"]};function xKt(){const[e,{Field:t,FieldArray:n}]=Kqt({initialValues:_Kt});let r=!1,i=null,a=!0;Bt(()=>{cM(),a?a=!1:r=!0});async function o(l,u,c){const h=URL.createObjectURL(l),f=u.split("\\"),d=f[f.length-1];console.log(h),d.endsWith(".bvh")?(m9(p=>({...p,[c]:d})),o3(h)):m9(p=>({...p,[c]:"Please upload a .bvh file only!"}))}function s(l,u){if(!l||l===i){console.log("No change detected in selected BVH.");return}i=l,console.log("Selected BVH updated reactively:",l);const c=[...Hb()],h=`Skeleton ${u}`,f=c.filter(p=>p.fileName&&p.fileName.trim()!==""),d=f.findIndex(p=>p.label===h);d!==-1?f[d].fileName=l:f.push({label:h,fileName:l}),x9(f),console.log("Updated skeletons array:",f)}return ki(()=>{s("bvh2/MCEAS02G01R03.bvh",1),o3("bvh2/MCEAS02G01R03.bvh"),n3t(!1)}),O(n,{name:"options",children:l=>[O(RM,{get each(){return l.items},children:(u,c)=>(()=>{var h=pKt(),f=h.firstChild;f.firstChild;var d=f.nextSibling;return le(f,()=>c()+1,null),le(h,O(t,{get name(){return`${l.name}.${c()}`},children:(p,v)=>[vKt(),(()=>{var g=gKt();return g.$$click=()=>{console.log("Clicked on Skeleton:",c()+1),r&&s(cM(),c()+1),r=!1},le(g,O(fKt,v)),g})(),mKt(),(()=>{var g=yKt(),m=g.firstChild,_=m.nextSibling,y=_.nextSibling;return _.addEventListener("change",async x=>{console.log("Clicked2 on Skeleton:",c()+1),console.log("check target: ",x.target.files[0],x.target.value),await o(x.target.files[0],x.target.value,c()),r&&s(cM(),c()+1),r=!1}),le(y,()=>VNt()[c()]??"No file uploaded yet"),pr(x=>{var S=`file-upload-${c()}`,b=`file-upload-${c()}`;return S!==x.e&&uv(m,"for",x.e=S),b!==x.t&&uv(_,"id",x.t=b),x},{e:void 0,t:void 0}),g})()]}),d),d.$$click=()=>{const p=Hb().filter((v,g)=>g!==c());x9(p),aKt(e,l.name,{at:c()})},h})()}),(()=>{var u=dKt();return u.$$click=()=>{iKt(e,l.name,{value:""}),s("",l.items.length)},u})()]})}xB(["click"]);var bKt=ee("<span>Load MoCap Recording "),SKt=ee("<div class=collapsible__content-text>");function wKt(){const[e,t]=rt("");return O(Nu.Root,{defaultOpen:!0,class:"collapsible",onOpenChange:n=>{t(n?"":"")},get children(){return[O(Nu.Trigger,{class:"collapsible__trigger",get children(){var n=bKt();return n.firstChild,le(n,e,null),n}}),O(Nu.Content,{class:"collapsible__content",get children(){var n=SKt();return le(n,O(xKt,{})),n}})]}})}function lY(e){return typeof e!="string"?(console.error("Expected a string but received:",e),""):(console.log("great joint choice: ",e),[e].map(t=>t.replace(/[^a-zA-Z0-9_\s]/g,"")))}function TKt(){return ki(()=>{YNt(!0)}),Bt(async()=>{a3()}),O($r.Root,{get defaultValue(){return av()[0]},get value(){return a3()},allowDuplicateSelectionEvents:!1,disallowEmptySelection:!0,get options(){return av()},onChange:async e=>{e===null?console.log("Choose Again!!!!"):(console.log("newValues joint: ",e),WA(e),Pi().forEach(t=>{t.sphereMeshes.children[t.jointIndex[yr()]].material.color.set(1334943)}),HA(lY(e)[0]),Pi().forEach(t=>{t.sphereMeshes.children[t.jointIndex[yr()]].material.color.set("red")}),await IC())},placeholder:"Select joint...",itemComponent:e=>O($r.Item,{get item(){return e.item},class:"select__item",get children(){return[O($r.ItemLabel,{get children(){return e.item.rawValue}}),O($r.ItemIndicator,{class:"select__item-indicator"})]}}),get children(){return[O($r.Trigger,{class:"select__trigger","aria-label":"Fruit",get children(){return[O($r.Value,{class:"select__value",children:e=>{var t,n;return(t=e.selectedOption)!=null&&t.call(e)?lY((n=e.selectedOption)==null?void 0:n.call(e)):null}}),O($r.Icon,{class:"select__icon"})]}}),O($r.Description,{id:"jointSelectLabel",children:"Select Joint to Plot."}),O($r.Portal,{get children(){return O($r.Content,{class:"select__content",get children(){return O($r.Listbox,{class:"select__listbox"})}})}})]}})}var MKt=ee("<div class=SliderLabel>");const AKt=()=>{function e(i,a){let o=!1;return function(){o||(i.apply(this,arguments),o=!0,setTimeout(()=>{o=!1},a))}}const t=60,n=e(()=>{x5t(Cc(),ez())},1e3/t),r=e(()=>{S5t(Cc())},1e3/t);return Bt(()=>{Cc(),JNt()&&(n(),setTimeout(function(){r()},1))}),O(cf.Root,{id:"SliderBasic",class:"SliderRoot",get value(){return[Cc()]},onChange:i=>{Pi(),Pi().forEach(a=>{a.setAnimationTime(i[0])}),xrt(i[0]),$A(!0)},get maxValue(){return _rt()},step:.011,getValueLabel:()=>`${Math.round(Cc()*90)}`,get children(){return[(()=>{var i=MKt();return le(i,O(cf.Label,{children:"frame: "}),null),le(i,O(cf.ValueLabel,{get children(){return[mt(()=>Math.round(Cc()*90))," frames"]}}),null),i})(),O(cf.Track,{class:"SliderTrack",get children(){return[O(cf.Fill,{class:"SliderRange"}),O(cf.Thumb,{class:"SliderThumb",get children(){return O(cf.Input,{})}})]}})]}})};function j0(){const e=Vb(),t=Gb(),n=gp(),r=wrt();e&&e.resize(),t&&t.resize(),n&&n.resize(),r&&r.resize(),s3().onWindowResize(),w5t(),document.activeElement instanceof HTMLElement&&document.activeElement.blur()}var CKt=ee("<span>Visualization Controls "),EKt=ee('<div class=collapsible__content-text><div class=grid-container><div class="grid-item full-width"style=margin-bottom:20px;></div><div class=grid-item><button class=player_buttons id=previousButton title="Previous Frame"><span class=material-symbols-outlined>navigate_before</span></button></div><div class=grid-item><button class=player_buttons id=playButton title="Play Animation"><span class=material-symbols-outlined>play_arrow</span></button></div><div class=grid-item><button class=player_buttons id=stopButton title="Pause Animation"><span class=material-symbols-outlined>pause</span></button></div><div class=grid-item><button class=player_buttons id=nextButton title="Next Frame"><span class=material-symbols-outlined>navigate_next</span></button></div></div><div class=toolbarDescription style=margin-bottom:10px;margin-top:30px> Adjust Plot Parameters: </div><div class=plot-mode-grid><div class="plot-options-section top-left"> </div><div class="plot-options-section top-center">Positions / Angles</div><div class="plot-options-section top-right">activate/ <br>deactivate</div><div class="plot-type-section center-left">2D Plot:</div><div class="plot-switch-section center-center"></div><div class="plot-mode-section center-right"></div><div class="plot-type-section bottom-left">3D Plot:</div><div class="plot-switch-section bottom-center"></div><div class="plot-mode-section bottom-right">');function DKt(e){const t={info:"Sending 3D plot mode from iframe",userData:e};window.parent.postMessage(t,"http://localhost"),console.log("Message sent to parent window:",t)}function IKt(){const[e,t]=rt(""),[n,r]=rt(!0),[i,a]=rt(!0);async function o(){let s=!1;n()&&!i()?(rp(0),P_(0),rp(100),P_(0),s=!0):n()&&i()?(rp(0),P_(0),rp(50),P_(50),s=!0):!n()&&i()&&(rp(0),rp(0),rp(0),P_(100),s=!0),s?(Fw(0),zw(0),Fw(50),zw(50)):(Fw(0),zw(0),Fw(100),zw(0)),setTimeout(()=>{j0()},1)}return O(Nu.Root,{defaultOpen:!0,class:"collapsible",onOpenChange:s=>{t(s?"":"")},get children(){return[O(Nu.Trigger,{class:"collapsible__trigger",id:"CollapsibleVisControls",get children(){var s=CKt();return s.firstChild,le(s,e,null),s}}),O(Nu.Content,{class:"collapsible__content",get children(){var s=EKt(),l=s.firstChild,u=l.firstChild,c=u.nextSibling,h=c.nextSibling,f=h.firstChild,d=h.nextSibling,p=d.firstChild,v=l.nextSibling,g=v.nextSibling,m=g.firstChild,_=m.nextSibling,y=_.nextSibling,x=y.nextSibling,S=x.nextSibling,b=S.nextSibling,w=b.nextSibling,A=w.nextSibling,T=A.nextSibling;return le(s,(()=>{var M=mt(()=>!!UNt());return()=>M()&&O(TKt,{})})(),l),le(u,O(AKt,{})),f.$$click=()=>{Pi().forEach(M=>{M.play()})},p.$$click=()=>{Pi().forEach(M=>{M.stop()})},le(s,O(Out,{class:"separator"}),v),le(S,O(xc.Root,{class:"switch",get checked(){return r3()},onChange:async M=>{RNt(M),VA(M?"Angle":"Position"),await IC()},get children(){return[O(xc.Input,{class:"switch__input"}),O(xc.Control,{class:"switch__control",get children(){return O(xc.Thumb,{class:"switch__thumb"})}})]}})),le(b,O(Ho,{class:"checkbox",get checked(){return n()},onChange:async M=>{r(M),await o()},get children(){return[O(Ho.Input,{class:"checkbox__input"}),O(Ho.Control,{class:"checkbox__control",get children(){return O(Ho.Indicator,{children:""})}})]}})),le(A,O(xc.Root,{class:"switch",get checked(){return i3()},onChange:async M=>{ONt(M),GA(M?"Angle":"Position"),await IC(),DKt({plotMode:M})},get children(){return[O(xc.Input,{class:"switch__input"}),O(xc.Control,{class:"switch__control",get children(){return O(xc.Thumb,{class:"switch__thumb"})}})]}})),le(T,O(Ho,{class:"checkbox",get checked(){return i()},onChange:async M=>{a(M),await o()},get children(){return[O(Ho.Input,{class:"checkbox__input"}),O(Ho.Control,{class:"checkbox__control",get children(){return O(Ho.Indicator,{children:""})}})]}})),s}})]}})}xB(["click"]);var LKt=ee("<div>");function PKt(){const[e,t]=rt(!0),[n,r]=rt(!1),[i,a]=rt(!1);return(()=>{var o=LKt();return le(o,O(AM.Root,{class:"toggle-button","aria-label":"X",get pressed(){return e()},onClick:()=>{t(!0),r(!1),a(!1),bM(Cc(),"x"),WL("x")},children:"X"}),null),le(o,O(AM.Root,{class:"toggle-button","aria-label":"Y",get pressed(){return n()},onClick:()=>{t(!1),r(!0),a(!1),bM(Cc(),"y"),WL("y")},children:"Y"}),null),le(o,O(AM.Root,{class:"toggle-button","aria-label":"Z",get pressed(){return i()},onClick:()=>{t(!1),r(!1),a(!0),bM(Cc(),"z"),WL("z")},children:"Z"}),null),o})()}var RKt=ee("<div class=plotTitle id=plotTitle>2D <span class=selectedRowColor></span> Trajectory of <span class=selectedRowColor></span> on <span class=selectedRowColor></span>-Axis"),OKt=ee("<div id=plotPanel_2D>"),NKt=ee("<div class=plotTitle id=plotTitle3D>3D <span class=selectedRowColor></span> Trajectory of <span class=selectedRowColor>"),BKt=ee("<div id=plotPanel_3D>"),kKt=ee("<div class=plotTitle id=plotTitleSpeed>Speed Analysis of  <span class=selectedRowColor>");function FKt(e){return e==="x"?"X":e==="y"?"Y":e==="z"?"Z":e}const zKt=()=>O(y2,{onSizeChangeEnd:()=>{j0()},size:[{id:"nested2-a",size:33},{id:"nested2-b",size:33},{id:"nested2-c",size:34}],style:{height:"100%"},get children(){return[O($c,{id:"nested2-a",style:{height:"100%"},get children(){return[(()=>{var e=RKt(),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling,a=i.nextSibling,o=a.nextSibling;return le(n,brt),le(i,yr),le(o,()=>FKt(ez())),e})(),O(PKt,{}),(()=>{var e=OKt();return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})()]}}),O(s1,{id:"nested2-a:nested2-b",class:"plotSplitter"}),O($c,{id:"nested2-b",style:{height:"100%"},get children(){return[(()=>{var e=NKt(),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,i=r.nextSibling;return le(n,NNt),le(i,yr),e})(),(()=>{var e=BKt();return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})()]}}),mt(()=>mt(()=>!!Trt())()&&[O(s1,{id:"nested2-b:nested2-c",class:"plotSplitter"}),O($c,{id:"nested2-c",style:{height:"100%"},get children(){return[(()=>{var e=kKt(),t=e.firstChild,n=t.nextSibling;return le(n,yr),e})(),O(Yut,{})]}})])]}});var UKt=ee("<div class=plotTitle id=skeletonTitle>3D Skeleton Visualization "),VKt=ee("<div id=threePanel>"),GKt=ee("<div id=tooltip>Tooltip");const HKt=()=>O(y2,{orientation:"vertical",onSizeChangeEnd:()=>{j0()},get size(){return[{id:"nested-a",size:WNt()},{id:"nested-b",size:$Nt()}]},get children(){return[O($c,{id:"nested-a",get children(){return[UKt(),(()=>{var e=VKt();return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e})(),(()=>{var e=GKt();return e.style.setProperty("position","absolute"),e.style.setProperty("display","none"),e.style.setProperty("background","white"),e.style.setProperty("border","1px solid black"),e.style.setProperty("padding","5px"),e.style.setProperty("z-index","100"),e})()]}}),O(s1,{id:"nested-a:nested-b",class:"horizontalSplitter"}),O($c,{id:"nested-b",get children(){return O(zKt,{})}})]}});var WKt=ee("<div>");const $Kt=()=>{function e(){j0()}const t={width:"100% ",height:"100%",flex:1,overflow:"auto"};return rt("ATT-RGOM"),O(y2,{get size(){return[{id:"main-panel",size:GNt()},{id:"dex_analysis-panel",size:HNt()}]},onSizeChangeEnd:()=>{e()},get children(){return[O($c,{id:"main-panel",get children(){var n=WKt();return ey(n,t),le(n,O(HKt,{})),n}}),O(s1,{id:"main-panel:dex_analysis-panel",class:"mainVericalSplitter"}),O($c,{id:"dex_analysis-panel"})]}})};var XKt=ee("<div id=threelogs><button id=resetAllButton class=buttonCoef style=margin-top:20px;>export BVH");const jKt=()=>{function e(){j0()}return O(y2,{size:[{id:"viewer-panel",size:14},{id:"control-panel",size:86}],onSizeChangeEnd:async t=>{e(),console.log(t.size[0].size)},get children(){return[O($c,{id:"viewer-panel",get children(){var t=XKt(),n=t.firstChild;return t.style.setProperty("overflow","auto"),t.style.setProperty("height","100%"),le(t,O(wKt,{}),n),le(t,O(IKt,{}),n),le(t,O(Yqt,{}),n),le(t,O(Cqt,{}),n),t}}),O(s1,{id:"viewer-panel:control-panel",class:"mainVericalSplitter"}),O($c,{id:"control-panel",get children(){return O($Kt,{})}})]}})};function mV(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function YKt(e){e=e.substr(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Dv(e){if(typeof e!="string")return e;if(e.charAt(0)==="#")return Dv(YKt(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error("MUI: Unsupported `%s` color.\nThe following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color(). "+e);const r=e.substring(t+1,e.length-1);let i,a;if(n==="color"){if(i=r.split(" "),a=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].substr(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a)===-1)throw new Error("MUI: unsupported `%s` color space.\nThe following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020. "+a)}else i=r.split(",");return{type:n,values:i.map(o=>parseFloat(o)),colorSpace:a}}function D2(e){const{type:t,colorSpace:n}=e,{values:r}=e;let i;return t.indexOf("rgb")!==-1?i=r.map((a,o)=>o<3?parseInt(a.toString(),10):a).join(","):t.indexOf("hsl")!==-1&&(i=r.map((a,o)=>o===1||o===2?`${a}%`:a).join(",")),t.indexOf("color")!==-1?i=`${n} ${r.join(" ")}`:i=`${r.join(", ")}`,`${t}(${i})`}function qKt(e){const t=Dv(e),{values:n}=t,r=n[0],i=n[1]/100,a=n[2]/100,o=i*Math.min(a,1-a),s=(c,h=(c+r/30)%12)=>a-o*Math.max(Math.min(h-3,9-h,1),-1);let l="rgb";const u=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return t.type==="hsla"&&(l+="a",u.push(n[3])),D2({type:l,values:u})}function iB(e){const{type:t,values:n}=Dv(e);let r=t==="hsl"?Dv(qKt(e)).values:n;return r=r.map(i=>(t!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*r[0]+.7152*r[1]+.0722*r[2]).toFixed(3))}function KKt(e,t){const n=iB(e),r=iB(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function un(e,t){let{type:n,values:r}=Dv(e);return t=mV(t),(n==="rgb"||n==="hsl")&&(n+="a"),n==="color"?r[3]=`/${t}`:r[3]=t,D2({type:n,values:r})}function Iv(e,t){const n=Dv(e);if(t=mV(t),n.type.indexOf("hsl")!==-1)n.values[2]*=1-t;else if(n.type.indexOf("rgb")!==-1||n.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)n.values[r]*=1-t;return D2(n)}function Lv(e,t){const n=Dv(e);if(t=mV(t),n.type.indexOf("hsl")!==-1)n.values[2]+=(100-n.values[2])*t;else if(n.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)n.values[r]+=(255-n.values[r])*t;else if(n.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)n.values[r]+=(1-n.values[r])*t;return D2(n)}function uY(e,t=.15){return iB(e)>.5?Iv(e,t):Lv(e,t)}const ZKt={xs:0,sm:600,md:900,lg:1200,xl:1536};function Gy(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const a=r.breakpoints;return t.reduce((o,s,l)=>(o={...o,...a.up(a.keys[l],n(t[l]))},o),{})}if(typeof t=="object"){const a=r.breakpoints;return Object.keys(t).reduce((s,l)=>{if(Object.keys(a.values||ZKt).indexOf(l)!==-1)s={...s,...a.up(l,n(t[l],l))};else{const u=l;s[u]=t[u]}return s},{})}return n(t)}function JKt(e,t){const n={};if(typeof e!="object")return n;const r=Object.keys(t);return Array.isArray(e)?r.forEach((i,a)=>{a<e.length&&(n[i]=!0)}):r.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function sv(e){const t=e.values,n=e.base||JKt(t,e.breakpoints||{}),r=Object.keys(n);if(r.length===0)return e.values;let i;return r.reduce((a,o,s)=>(Array.isArray(t)?(a[o]=t[s]!=null?t[s]:t[i],i=s):typeof t=="number"?a[o]=t:(a[o]=t[o]!=null?t[o]:t[i],i=o),a),{})}const QKt={cleanupStyles:!0},tZt=hr(QKt),Pv={black:"#000",white:"#fff"},Ym={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},qm={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Km={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Zm={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Jm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Kx={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},eZt={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Sx(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function nZt(e,t){for(const n of t){const r=e[n];delete e[n],e[n]=r}}function qv(e,t,n={clone:!0}){const r=n.clone?{...e}:e,i=n.sortKeys?[]:void 0;return Sx(e)&&Sx(t)&&(Object.keys(t).forEach(a=>{if(a==="__proto__")return;i&&i.push(a);let o,s;Sx(o=t[a])&&a in e&&Sx(s=e[a])?r[a]=qv(s,o,n):o!==void 0&&(r[a]=o)}),i&&nZt(r,i)),r}function aB(e){if(Array.isArray(e)){const t=[];for(const n of e)t.push(aB(n));return t}else if(Sx(e)){const t={};for(const n in e)n!=="__proto__"&&(t[n]=aB(e[n]));return t}else return e}function fS(e,...t){for(const n of t)qv(e,aB(n),{clone:!1});return e}const rZt=()=>({text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Pv.white,default:Pv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}),iZt={primary:{main:Km[700],light:Km[400],dark:Km[800]},secondary:{main:qm[500],light:qm[300],dark:qm[700]},error:{main:Ym[700],light:Ym[400],dark:Ym[800]},info:{main:Zm[700],light:Zm[800],dark:Zm[900]},success:{main:Jm[800],light:Jm[500],dark:Jm[900]},warning:{main:"#ED6C02",light:Kx[500],dark:Kx[900]}},aZt=()=>({text:{primary:Pv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Pv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}),oZt={primary:{main:Km[200],light:Km[50],dark:Km[400]},secondary:{main:qm[200],light:qm[50],dark:qm[400]},error:{main:Ym[500],light:Ym[300],dark:Ym[700]},info:{main:Zm[400],light:Zm[300],dark:Zm[700]},success:{main:Jm[400],light:Jm[300],dark:Jm[700]},warning:{main:Kx[400],light:Kx[300],dark:Kx[700]}},sZt={light:rZt,dark:aZt};function oct(e,t){return KKt(e,Pv.white)>=t?Pv.white:"rgba(0, 0, 0, 0.87)"}function cY(e,t,n,r){const i=typeof r=="number"?r:r.light,a=typeof r=="number"?r*1.5:r.dark;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Lv(e.main,i):t==="dark"&&(e.dark=Iv(e.main,a)))}function lZt(e){const t={...e.color},n=e.mainShade??500;return!e.color.main&&e.color[n]&&(t.main=e.color[n]),cY(t,"light",e.lightShade??300,e.tonalOffset),cY(t,"dark",e.darkShade??700,e.tonalOffset),t.contrastText||(t.contrastText=oct(t.main,e.contrastThreshold)),t}const uZt=()=>({mode:"light",tonalOffset:.2,contrastThreshold:3,grey:eZt,common:Pv});function cZt(e){const t=["error","info","primary","secondary","success","warning"],n=uZt(),r={...fS({},n,sZt[(e==null?void 0:e.mode)??n.mode](),e),isColorName(a){return t.includes(a)},getColorObject(a){return r[a]},getColor(a){return r.mode==="light"?r[a].light:r[a].dark},augmentColor(a){return lZt({...a,tonalOffset:r.tonalOffset,contrastThreshold:r.contrastThreshold})},getContrastText(a){return oct(a,r.contrastThreshold)}},i=a=>r.mode==="light"?iZt[a]:oZt[a];return r.primary=r.augmentColor({color:r.primary||i("primary")}),r.secondary=r.augmentColor({color:r.secondary||i("secondary"),mainShade:"A400",lightShade:"A200",darkShade:"A700"}),r.error=r.augmentColor({color:r.error||i("error")}),r.warning=r.augmentColor({color:r.warning||i("warning")}),r.info=r.augmentColor({color:r.info||i("info")}),r.success=r.augmentColor({color:r.success||i("success")}),r}const hZt={};function fZt(e){return{...fS({},hZt,e??{})}}function dZt(e,t=void 0,n={}){return{toolbar:{minHeight:56,[`${e.up("xs")} and (orientation: landscape)`]:{minHeight:48},[e.up("sm")]:{minHeight:64}},...n}}const hR={},pZt=.2,vZt=.14,gZt=.12;function kr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${pZt})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${vZt})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${gZt})`].join(",")}const mZt=[()=>"none",()=>kr(0,2,1,-1,0,1,1,0,0,1,3,0),()=>kr(0,3,1,-2,0,2,2,0,0,1,5,0),()=>kr(0,3,3,-2,0,3,4,0,0,1,8,0),()=>kr(0,2,4,-1,0,4,5,0,0,1,10,0),()=>kr(0,3,5,-1,0,5,8,0,0,1,14,0),()=>kr(0,3,5,-1,0,6,10,0,0,1,18,0),()=>kr(0,4,5,-2,0,7,10,1,0,2,16,1),()=>kr(0,5,5,-3,0,8,10,1,0,3,14,2),()=>kr(0,5,6,-3,0,9,12,1,0,3,16,2),()=>kr(0,6,6,-3,0,10,14,1,0,4,18,3),()=>kr(0,6,7,-4,0,11,15,1,0,4,20,3),()=>kr(0,7,8,-4,0,12,17,2,0,5,22,4),()=>kr(0,7,8,-4,0,13,19,2,0,5,24,4),()=>kr(0,7,9,-4,0,14,21,2,0,5,26,4),()=>kr(0,8,9,-5,0,15,22,2,0,6,28,5),()=>kr(0,8,10,-5,0,16,24,2,0,6,30,5),()=>kr(0,8,11,-5,0,17,26,2,0,6,32,5),()=>kr(0,9,11,-5,0,18,28,2,0,7,34,6),()=>kr(0,9,12,-6,0,19,29,2,0,7,36,6),()=>kr(0,10,13,-6,0,20,31,3,0,8,38,7),()=>kr(0,10,13,-6,0,21,33,3,0,8,40,7),()=>kr(0,10,14,-6,0,22,35,3,0,8,42,7),()=>kr(0,11,14,-7,0,23,36,3,0,9,44,8),()=>kr(0,11,15,-7,0,24,38,3,0,9,46,8)];function yZt(){return new Proxy([],{get:(e,t)=>typeof t!="string"||isNaN(Number(t))?e[t]:t in hR?hR[t]:hR[t]=mZt[t]()})}const _Zt={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},xZt={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hY(e){return`${Math.round(e)}ms`}function bZt(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function SZt(e){const t={..._Zt,...e.easing},n={...xZt,...e.duration};return{getAutoHeightDuration:bZt,create:(i=["all"],a={})=>{const{duration:o=n.standard,easing:s=t.easeInOut,delay:l=0,...u}=a;return(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:hY(o)} ${s} ${typeof l=="string"?l:hY(l)}`).join(",")},...e,easing:t,duration:n}}const zo={light:300,regular:400,medium:500,bold:700},IT={fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontSize:14,htmlFontSize:16,h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},subtitle1:{},subtitle2:{},body1:{},body2:{},button:{},caption:{},overline:{},fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,fontWeightBold:700};function wZt(e){return Math.round(e*1e5)/1e5}function Uo(e,t,n,r,i,a){return{fontFamily:e.fontFamily,fontWeight:t,fontSize:e.pxToRem(n),lineHeight:`${r}`,letterSpacing:`${wZt(i/n)}em`,...a?{textTransform:"uppercase"}:{}}}function TZt(e={}){const t={fontFamily:e.fontFamily??IT.fontFamily,fontSize:e.fontSize??IT.fontSize,htmlFontSize:(e==null?void 0:e.htmlFontSize)??IT.htmlFontSize,pxToRem:n=>{const r=t.fontSize/14;return`${n/t.htmlFontSize*r}rem`}};return fS(t,{h1:Uo(t,zo.light,96,1.167,-1.5),h2:Uo(t,zo.light,60,1.2,-.5),h3:Uo(t,zo.regular,48,1.167,0),h4:Uo(t,zo.regular,34,1.235,.25),h5:Uo(t,zo.regular,24,1.334,0),h6:Uo(t,zo.medium,20,1.6,.15),subtitle1:Uo(t,zo.regular,16,1.75,.15),subtitle2:Uo(t,zo.medium,14,1.57,.1),body1:Uo(t,zo.regular,16,1.5,.15),body2:Uo(t,zo.regular,14,1.43,.15),button:Uo(t,zo.medium,14,1.75,.4,!0),caption:Uo(t,zo.regular,12,1.66,.4),overline:Uo(t,zo.regular,12,2.66,1,!0)},IT,e)}const MZt={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function AZt(e){return{...fS({},MZt,e)}}function fR(e,t,n="px"){let r;if(e==="up")r=`(min-width:${t}${n})`;else if(e==="down")r=`(max-width:${t}${n})`;else if(e==="between"){const[i,a]=t;r=`(max-width:${i}${n}) and (min-width:${a}${n})`}else throw new Error(`Invalid comparator: ${e}`);return`@media ${r}`}const CZt={columns:12,keys:["xs","sm","md","lg","xl"],values:{xs:0,sm:600,md:900,lg:1200,xl:1536},unit:"px"};function sct(e){const t={...CZt,...e??{},up:(n,r)=>{const i=fR("up",t.resolve(n));return r?{[i]:r}:i},down:(n,r)=>{const i=fR("down",t.resolve(n));return r?{[i]:r}:i},between:(n,r)=>{const i=fR("between",[t.resolve(n[0]),t.resolve(n[1])]);return r?{[i]:r}:i},resolve:n=>typeof n=="number"?n:t.values[n]};return t}function lct(e){return typeof e=="function"?e:(...n)=>n.map(r=>typeof r=="number"?`${r*(e??8)}px`:r).join(" ")}const EZt={borderRadius:4};function uct(e){return{...fS({},EZt,e)}}function DZt(e={}){const t={direction:"ltr",...e};function n(r,i){const a=e[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!0,...typeof a=="function"?{get:a}:{value:i({[r]:a})}})}return n("breakpoints",r=>sct(r.breakpoints)),n("components",r=>fZt(r.components)),n("palette",r=>cZt(r.palette)),n("shape",r=>uct(r.shape)),n("spacing",r=>lct(r.spacing)),n("typography",r=>TZt(r.typography)),n("shadows",()=>yZt()),n("transitions",()=>SZt({})),n("zIndex",r=>AZt(r.zIndex)),n("mixins",()=>dZt(t.breakpoints)),t}function cct(e){let t;return function(){return t||(t=e()),t}}const IZt=cct(DZt);let hct;hct=hr({});const yV=hct;function LZt(e){return{direction:"ltr",shadows:void 0,transitions:void 0,components:void 0,palette:void 0,typography:void 0,zIndex:void 0,mixins:void 0,...e,breakpoints:sct(e==null?void 0:e.breakpoints),shape:uct(e==null?void 0:e.shape),spacing:lct(e==null?void 0:e.spacing)}}const PZt=cct(LZt);function RZt(e){for(const t in e)return!1;return!0}function _V(e=PZt,t=yV){const n=Ln(t);if(RZt(n)&&e)return typeof e=="function"?e():e;if(!n)throw new Error("Theme is not defined");return n}function $i(e=IZt){return _V(e,yV)}function OZt(e){return _V(e,yV)}function NZt(e){var a,o;const t=[],n=typeof e.propDefaults=="function"?e.propDefaults({set:s=>s,inProps:e.props}):e.propDefaults,i=(o=(a=OZt().components)==null?void 0:a[e.name])==null?void 0:o.defaultProps;return n&&t.push(n),i&&t.push(i),t.length?G(...t,e.props):e.props}function BZt(e,t=!1){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}function kZt(e,t){switch(typeof e){case"function":return Object.assign(e,{[Pht]:!0}),$e(()=>e(t));case"string":const n=Eq.has(e),r=BZt(e,n);return Bv(r,t,n),r}}function fct(e,t){const n=mt(e);return mt(()=>kZt(n(),t))}function u1(e){const[t,n]=Yt(e,["$component"]);return fct(()=>t.$component,n)}function FZt(e){const t=e.reduce((n,r)=>("name"in r&&(n[`--${r.name}`]="0"),qv(n,r,{clone:!1,sortKeys:!0}),n),{});return delete t.name,t}function dct(e){return e.startsWith("--")}function zZt(e){return e.startsWith("__")}function pct(e){return/[^a-z-]/i.test(e)&&!dct(e)}function vct(e){return e.startsWith("@global")}function oB(e){return e.startsWith("@media")}function gct(e){return e.startsWith("@keyframes")}function fY(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function dY(e,t,n=[],r={}){const i=e.split(",").map(a=>(a=a.trim(),a.includes("&")?a:`& ${a}`));return VC(t,(n.length?n:[""]).flatMap(a=>i.map(o=>o.replace(/&/g,a).trim())),{...r})}function pY(e,t){if(!t)return fY(e);let n=t.get(e);return n||(t.set(e,n=fY(e)),n)}function VC(e,t=[],n={}){const r=[],i=[];for(let o in e){const s=e[o];if(!zZt(o))if(vct(o))for(const l in s)i.push(...dY(l,s[l],[],n));else if(oB(o))i.push(...VC(s,t,{...n,sublevel:!0}).map(l=>`${o} {
${l}
}`));else if(dct(o))s!=null&&r.push(`${o}: ${s};`);else if(gct(o)){const l=[];for(const u in s)l.push(...VC(s[u],[/^\d+$/.test(u)?`${u}%`:u],{...n,sublevel:!0}));i.push(`${o} {
${l.join(`
`)}
}`)}else if(pct(o))i.push(...dY(o,s,t,n));else if(n.extraProperties&&o in n.extraProperties){const l=n.extraProperties[o](s);for(const u in l){const c=l[u],h=n.onPropertyValue?n.onPropertyValue(u,c):c;h!=null&&r.push(`${pY(u,n.propertyNameCache)}: ${h};`)}}else{o=pY(o,n.propertyNameCache);const l=n.onPropertyValue?n.onPropertyValue(o,s):s;l!=null&&r.push(`${o}: ${l};`)}}const a=o=>{const s="	".repeat(o);return`${s}${r.join(`
${s}`)}`};if(t.length){const o=n.sublevel?"	":"",s=o+t.join(`,
${o}`);return[...r.length?[`${s} {
${a(n.sublevel?2:1)}
${o}}`]:[],...i]}else return[...r.length?[a(0)]:[],...i]}function UZt(e){return e?Array.isArray(e)?e:[e]:[]}function VZt(e){return typeof e=="function"&&(e=e()),e}class GZt{constructor(){_i(this,"ids",new Map);_i(this,"rules",new Map);_i(this,"propertyNames",new Map)}create(t,n,r){let i=this.rules.get(n);if(i)return i;let a=this.ids.get(r);return typeof a=="number"&&(this.ids.set(r,++a),r+=`_${a}`),i=mct(t,n,r),this.save(i,n),i}save(t,n){this.ids.set(t.id,0),this.rules.set(n,t)}delete(t){this.ids.delete(t.id),this.rules.delete(t.rules)}}function mct(e,t,n){return{id:n,name:e,className:`${e}-${n}`,rules:t.replaceAll("$id",`${n}`)}}function HZt(e){var a,o;const t=`${e.name}-$id`,n=UZt(VZt(e.props)),r=(a=e.cache)==null?void 0:a.propertyNames,i=n.map(s=>typeof s=="string"?`.${t} {
${s}
}`:VC(s,[`.${t}`],{extraProperties:e.extraProperties,propertyNameCache:r}).join(`
`)).join(`
`);return((o=e.cache)==null?void 0:o.create(e.name,i,e.componentId))||mct(e.name,i,e.componentId)}function yct(e,t){"styleSheet"in e?e.styleSheet.cssText=t:(e.innerText="",e.appendChild(document.createTextNode(t)))}function WZt(e,t){for(const n in t){const r=t[n];r!==void 0&&(r===null?e.removeAttribute(n):e.setAttribute(n,r))}}function $Zt(e,t){const n=document.createElement("style");return n.type="text/css",t&&WZt(n,t),yct(n,e),n}function sB(e){let t=Number(e.getAttribute("data-uses"));t++,e.setAttribute("data-uses",t.toString())}const vY="suid-injectFirst";function XZt(e,t,n){Array.isArray(e)&&(e=e.join(`
`));const r=t==null?void 0:t.id,i=document.head||document.getElementsByTagName("head")[0],a=r&&document.getElementById(r);if(a&&a instanceof HTMLStyleElement)return yct(a,e),sB(a),a;{a&&a.remove();const o=$Zt(e,t);if(sB(o),n){let s=i.querySelector(`#${vY}`);s||(s=document.createElement("style"),s.setAttribute("id",vY),i.prepend(s)),i.insertBefore(o,s)}else i.appendChild(o);return o}}function jZt(e,t="css-"){if(typeof e=="string")return document.getElementById(e);const n=[...e.classList].find(r=>r.startsWith(t));if(n)return document.getElementById(n.slice(t.length))}function gY(e,t=!0){let n=Number(e.getAttribute("data-uses"));n--,n<=0?t?e.remove():e.setAttribute("data-uses","0"):e.setAttribute("data-uses",n.toString())}function lt(e){if(typeof e!="string")throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}function xV(e){return mt(()=>(e==null?void 0:e())??`mui-${Ys()}`)}function bV(e,t=166){let n;function r(...i){const a=()=>{e.apply(null,i)};clearTimeout(n),n=setTimeout(a,t)}return r.clear=()=>{clearTimeout(n)},r}function YZt(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}function qu(e){return e&&e.ownerDocument||document}function dh(e){return qu(e).defaultView||window}function I2(){return Math.random().toString(36).substring(2,15).slice(0,8)}let L2=!0,lB=!1,mY;const qZt={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function KZt(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&qZt[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function ZZt(e){e.metaKey||e.altKey||e.ctrlKey||(L2=!0)}function dR(){L2=!1}function JZt(){this.visibilityState==="hidden"&&lB&&(L2=!0)}function QZt(e){e.addEventListener("keydown",ZZt,!0),e.addEventListener("mousedown",dR,!0),e.addEventListener("pointerdown",dR,!0),e.addEventListener("touchstart",dR,!0),e.addEventListener("visibilitychange",JZt,!0)}function tJt(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return L2||KZt(t)}function _ct(){const e=a=>{a!=null&&QZt(a.ownerDocument)},[t,n]=rt(!1);function r(){return t()?(lB=!0,window.clearTimeout(mY),mY=window.setTimeout(()=>{lB=!1},100),n(!1),!0):!1}function i(a){return tJt(a)?(n(!0),!0):!1}return{isFocusVisibleRef:{get current(){return t()}},onFocus:i,onBlur:r,ref:e}}function xct(e,t){const n=t.reduce((i,a)=>(i[a]=e[a],i),{}),r=p2(n);for(const i of t)Bt(a=>(r[i]=a,e[i]),e[i]);return r}function bct(e,t){const n=e.indexOf(">");if(n===-1)throw new Error("Invalid SSR element");const r={end:n},i=e.slice(0,n),a=` ${t}="`,o=i.indexOf(a);if(o!==-1){const s=o+a.length,l=i.slice(s).indexOf('"');if(l!==-1)return{tag:r,attr:{start:s,end:s+l}}}return{tag:r}}function eJt(e,t){const n=bct(e,t);if(n.attr)return e.slice(n.attr.start,n.attr.end)}function nJt(e,t,n){const r=e.t,i=bct(r,t),a=o=>typeof n=="function"?n(o):n;i.attr?e.t=r.slice(0,i.attr.start)+a(r.slice(i.attr.start,i.attr.end))+r.slice(i.attr.end):e.t=r.slice(0,i.tag.end)+` ${t}="${a()}"`+r.slice(i.tag.end)}function Sct(e){return!!e&&typeof e=="object"&&"t"in e&&typeof e.t=="string"&&/^<[a-z]/i.test(e.t.trimStart())}function SV(e){return globalThis.Element&&e instanceof Element}function LT(e){return SV(e)||Sct(e)}function rJt(e,t){if(SV(e))return e.getAttribute(t)??void 0;if(Sct(e))return eJt(e.t,t)}function iJt(e,t){var n;return((n=rJt(e,"class"))==null?void 0:n.split(" ").includes(t))||!1}function pR(e,t){SV(e)?e.classList.add(...t.split(" ")):nJt(e,"class",n=>n?n.split(" ").includes(t)?t:`${n} ${t}`:t)}function c1(e,t){return typeof t.__suid=="string"&&iJt(e,t.toString().slice(1))}const aJt=new GZt;function oJt(e){return e?Array.isArray(e)?e.flat(1/0).filter(t=>!!t):[e]:[]}function sJt(){return I2()}function wct(e){const t=Ln(tZt),[n,r]=rt(""),i=sJt();let a,o=!1;return pr(s=>{var c;const l=e();let u;if(l){const h=FZt(oJt(l));o="@global"in h,u=HZt({name:"css",props:h,cache:aJt,componentId:i}),a=jZt(u.id),a?sB(a):a=XZt(u.rules,{id:u.id,nonce:(c=t.cache)==null?void 0:c.nonce},t.injectFirst),s!=null&&s.styleElement&&gY(s.styleElement)}return typeof(u==null?void 0:u.className)=="string"?r(u.className):r(""),{className:u==null?void 0:u.className,styleElement:a}},void 0),Pe(()=>{a&&gY(a,t.cleanupStyles??o)}),n}function Im(e,t,n={}){for(const r in e){const i=e[r];if(vct(r))n[r]=Im(i,t);else if(oB(r))n[r]=Im(i,t);else if(gct(r)){n[r]={};for(const a in i)n[r][a]=Im(i[a],t)}else if(pct(r))n[r]=Im(i,t);else{const a=t(r,i);if(a)for(const o in a)n[o]=oB(o)?{...n[o],...a[o]}:a[o];else n[r]=i}}return n}const lJt=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","fontWeight","lineHeight","opacity","order","orphans","tabSize","widows","zIndex","zoom","WebkitLineClamp","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function Tct(e,t){if(typeof t=="number")return{[e]:lJt.has(e)?t.toString():`${t}px`}}function uJt(e,t={}){return Im(e,Tct,t)}function h1(e,t,n){if(typeof n!="string")return n;const r=n.split(".");let i=e[t];for(let a=0;a<r.length&&(i=i==null?void 0:i[r[a]],!!i);a++);return i??n}function cJt(e,t){return!t||typeof t!="string"?null:t.split(".").reduce((n,r)=>n&&n[r]?n[r]:null,e)}function Mct(e,t,n,r){const i=cJt(e,t)||n;return typeof i=="number"?a=>typeof a=="string"?a:i*a:Array.isArray(i)?a=>typeof a=="string"?a:i[a]:typeof i=="function"?i:()=>{}}function hJt(e){return Mct(e,"spacing.resolve",8)}const tf={x:["Left","Right"],y:["Top","Bottom"]};function Act(e){return typeof e=="number"?`${e}px`:e}function Cct(e,t){return(n,r)=>t(e,n,r)}function Ut(e,t){return t?(n,r)=>({[e]:t(e,n,r)}):n=>({[e]:n})}function Tx(e){return Ut(e,(t,n)=>Act(n))}function fs(e,t,n){const r=t.map(i=>`${e}${i}`);return n?(i,a)=>r.reduce((o,s)=>(o[s]=n(s,i,a),o),{}):i=>r.reduce((a,o)=>(a[o]=i,a),{})}function fJt(){return{...dJt(),...pJt(),...vJt(),...gJt(),...mJt(),...yJt(),..._Jt(),...bJt(),...xJt()}}function dJt(){return{displayPrint:Cct("displayPrint",(e,t)=>({"@media print":{display:t}})),displayRaw:Ut("display"),overflow:Ut("overflow"),textOverflow:Ut("textOverflow"),visibility:Ut("visibility"),whiteSpace:Ut("whiteSpace")}}function pJt(){return{flexBasis:Ut("flexBasis"),flexDirection:Ut("flexDirection"),flexWrap:Ut("flexWrap"),justifyContent:Ut("justifyContent"),alignItems:Ut("alignItems"),alignContent:Ut("alignContent"),order:Ut("order"),flex:Ut("flex"),flexGrow:Ut("flexGrow"),flexShrink:Ut("flexShrink"),alignSelf:Ut("alignSelf"),justifyItems:Ut("justifyItems"),justifySelf:Ut("justifySelf")}}function vJt(){const e=(t,n,r)=>Mct(r,"spacing",8)(n);return{gap:Ut("gap",e),columnGap:Ut("columnGap",e),rowGap:Ut("rowGap",e),gridColumn:Ut("gridColumn"),gridRow:Ut("gridRow"),gridAutoFlow:Ut("gridAutoFlow"),gridAutoColumns:Ut("gridAutoColumns"),gridAutoRows:Ut("gridAutoRows"),gridTemplateColumns:Ut("gridTemplateColumns"),gridTemplateRows:Ut("gridTemplateRows"),gridTemplateAreas:Ut("gridTemplateAreas"),gridArea:Ut("gridArea")}}function gJt(){return{position:Ut("position"),zIndex:Ut("zIndex",(e,t,n)=>{var r;return((r=n.zIndex)==null?void 0:r[e])??t}),top:Tx("top"),right:Tx("right"),bottom:Tx("bottom"),left:Tx("left")}}function mJt(){const e=(t,n,r)=>h1(r,"palette",n);return{color:Ut("color",e),bgcolor:Ut("backgroundColor",e),backgroundColor:Ut("backgroundColor",e)}}function yJt(){const e=(t,n,r)=>(t==="maxWidth"&&(n=r.breakpoints.values[t]??n),typeof n=="number"&&(n=n>0&&n<=1?`${n*100}%`:`${n}px`),n);return{width:Ut("width",e),maxWidth:Ut("maxWidth",e),minWidth:Ut("minWidth",e),height:Ut("height",e),maxHeight:Ut("maxHeight",e),minHeight:Ut("minHeight",e),boxSizing:Ut("boxSizing",e)}}function _Jt(){const e=(n,r)=>typeof r=="number"?`${r}px solid`:r,t=(n,r,i)=>h1(i,"palette",r);return{border:Ut("border",e),borderTop:Ut("borderTop",e),borderRight:Ut("borderRight",e),borderBottom:Ut("borderBottom",e),borderLeft:Ut("borderLeft",e),borderColor:Ut("borderColor",t),borderTopColor:Ut("borderTopColor",t),borderRightColor:Ut("borderRightColor",t),borderBottomColor:Ut("borderBottomColor",t),borderLeftColor:Ut("borderLeftColor",t),borderRadius:Ut("borderRadius",(n,r,i)=>typeof r=="number"?`${i.shape.borderRadius*r}px`:r)}}function xJt(){const e=(t,n,r)=>h1(r,"typography",n);return{typography:Cct("typography",(t,n,r)=>h1(r,"typography",n)),fontFamily:Ut("fontFamily",e),fontSize:Ut("fontSize",(t,n,r)=>Act(e(t,n,r))),fontStyle:Ut("fontStyle",e),fontWeight:Ut("fontWeight",e),letterSpacing:Tx("letterSpacing"),lineHeight:Ut("lineHeight"),textAlign:Ut("textAlign"),textTransform:Ut("textTransform")}}function bJt(){const e=(r,i,a)=>a.spacing(i),t="margin",n="padding";return{m:Ut(t,e),mt:Ut("marginTop",e),mr:Ut("marginRight",e),mb:Ut("marginBottom",e),ml:Ut("marginLeft",e),mx:fs(t,tf.x,e),my:fs(t,tf.y,e),margin:Ut(t,e),marginTop:Ut("marginTop",e),marginRight:Ut("marginRight",e),marginBottom:Ut("marginBottom",e),marginLeft:Ut("marginLeft",e),marginX:fs(t,tf.x,e),marginY:fs(t,tf.y,e),marginInline:fs(t,["Inline","InlineStart"],e),marginInlineStart:Ut("marginInlineStart",e),marginInlineEnd:Ut("marginInlineEnd",e),marginBlock:fs(t,["BlockStart","BlockEnd"],e),marginBlockStart:Ut("marginBlockStart",e),marginBlockEnd:Ut("marginBlockEnd",e),p:Ut(n,e),pt:Ut("paddingTop",e),pr:Ut("paddingRight",e),pb:Ut("paddingBottom",e),pl:Ut("paddingLeft",e),px:fs(n,tf.x,e),py:fs(n,tf.y,e),padding:Ut(n,e),paddingTop:Ut("paddingTop",e),paddingRight:Ut("paddingRight",e),paddingBottom:Ut("paddingBottom",e),paddingLeft:Ut("paddingLeft",e),paddingX:fs(n,tf.x,e),paddingY:fs(n,tf.y,e),paddingInline:fs(n,["Inline","InlineStart"],e),paddingInlineStart:Ut("paddingInlineStart",e),paddingInlineEnd:Ut("paddingInlineEnd",e),paddingBlock:fs(n,["BlockStart","BlockEnd"],e),paddingBlockStart:Ut("paddingBlockStart",e),paddingBlockEnd:Ut("paddingBlockEnd",e)}}const wV=fJt(),SJt=Object.keys(wV);function wJt(e,t,n){return wV[e](t,n)}function yY(e,t,n){return e in wV?wJt(e,t,n):Tct(e,t)}function TJt(e,t){return Im(e,(n,r)=>{if(typeof r=="function"&&(r=r(t)),r==null)return r;if(typeof r=="object"){const i={};for(const a of t.breakpoints.keys)i[t.breakpoints.up(a)]={};return Object.assign(i,Gy({theme:t},r,a=>yY(n,a,t)??{[n]:a}))}else return yY(n,r,t)})}function Ect(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Ect(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ot(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Ect(e))&&(r&&(r+=" "),r+=t);return r}function dS(e,...t){return e}const TV=["ownerState","theme","sx","as"];function MJt(e,t,n,r){return mt(()=>{const i=e(),a=r.ownerState;return n.reduce((o,s)=>{let l;return typeof s=="function"?l=s({ownerState:a,theme:i,get sx(){return r.sx},get as(){return r.as},props:r}):s&&(l=s),l&&o.push(uJt(l,{name:t,__resolved:!0})),o},[])})}function Dct(e,t){e.__suid=t}function _Y(e){if(typeof e=="function")return e.__suid}function Ict(e){return function(n,r={}){let i,a;if(r.name){const s=r.slot||"Root";a=i=`${r.name}-${s.slice(0,1).toLowerCase()+s.slice(1)}`}else a=`styled-${I2()}`,i="css";const o=_Y(n);return function(...s){function l(u){let c;const h=()=>{const y=u.theme;return y||c||(c=e&&e.onUseTheme?e.onUseTheme():_V())},[,f]=Yt(u,r.skipProps||TV),d=MJt(h,i,s,u),p=()=>{const y=u.sx;return y?Array.isArray(y)?y:[y]:[]},v=()=>{if(o)return n;const y=u.as;return y||n},g=o?()=>o:mt(()=>_Y(v())),m=r.skipSx?()=>d():()=>{const y=h();return[...d(),...p().map(x=>x.__resolved?x:TJt(x,y))]},_=wct(()=>g()?void 0:m());return fct(v,G(f,{get children(){return u.children},get component(){return g()?u.component:null},get as(){return o?u.as:void 0},get sx(){return g()?m():void 0},get ownerState(){return g()==="system"?u.ownerState:void 0},get class(){return Ot([...new Set([u.class,a,_()])])}}))}return Dct(l,"system"),a&&(l.toString=()=>`.${a}`),l}}}const Po=[...TV,"classes"],vt=Ict({onUseTheme:()=>$i()});function Lct(e,t,n){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((a,o)=>(o&&(n&&n[o]&&a.push(n[o]),a.push(t(o))),a),[]).join(" ")}),r}const Pct=Symbol("solid-inspect");let uB=!1;function xY(e){try{uB=!0;const t=e();return Array.isArray(t)?t:[t]}finally{uB=!1}}function AJt(e){function t(n){return uB?{Component:t,props:n,$INSPECT:Pct}:e(n)}return Object.defineProperty(t,"name",{value:e.name}),t.toString=e.toString,t}function Hy(e,t){return!!e&&e.$INSPECT===Pct&&(!t||e.Component===t)}function cB(e){if(typeof e=="function"&&!e.length)return cB(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=cB(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function P2(e){const t=mt(()=>xY(e)),n=mt(()=>xY(()=>cB(t())));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Pt(){return function(e){function t(s){const l=!!e.slotClasses,u=()=>{if(!e.slotClasses)throw new Error("'slotClasses' option is not defined");if(!e.utilityClass)throw new Error("'utilityClass' option is not defined");return Lct(e.slotClasses(s),e.utilityClass,s.classes??"")},c=p2({});return l&&mB(()=>{const h=u();li(()=>{for(const f in h)c[f]=h[f]})}),c}function n(s){const[l,u]=Yt(s,e.selfPropNames);return{allProps:s,props:l,otherProps:u}}function r(s){return NZt({propDefaults:s.propDefaults||e.propDefaults,props:s.props,name:e.name})}function i(s){const l=r({props:s});return n(l)}function a(s,l=!0){return s=AJt(s),s.toString=()=>`.${e.name}-root`,l&&Dct(s,"base"),s}function o(s){const l=a(function(c){const{allProps:h,otherProps:f,props:d}=i(c),p=e.autoCallUseClasses??!0?t(h):{};return s({allProps:h,otherProps:f,props:d,classes:p})});return Object.defineProperty(l,"name",{value:s.name}),l}return{name:e.name,selfPropNames:e.selfPropNames,component:o,defineComponent:a,useClasses:t,useThemeProps:r,useProps:i,splitInProps:n}}}function Rct(e){const[t,n,r]=Yt(e,SJt,["sx"]);return[()=>{const a=n.sx;return a?Array.isArray(a)?[t,...a]:G(t,a):t},r]}function MV(e){const[t,n]=Rct(e);return G(n,{get sx(){return t()}})}const CJt=Ict(),Oct=CJt("div",{name:"MuiBox",slot:"Root",skipProps:[...TV,"component"]})(),Nct=function(t){return t=MV(t),O(Oct,G(t,{get as(){return t.as??t.component}}))};Nct.toString=Oct.toString;const EJt=Pt()({name:"MuiBox",selfPropNames:[],utilityClass:e=>`MuiBox-${e}`,slotClasses:()=>({root:["root"]})}),DJt=EJt.component(function({otherProps:t,classes:n}){const r=$i();return O(Nct,G({theme:r},t,{get class(){return Ot(n.root,t.class)}}))});var IJt=ee("<span>");const LJt=Pt()({name:"MuiRipple",selfPropNames:["class","classes","pulsate","rippleX","rippleY","rippleSize","in","onExited","timeout"]}),PJt=LJt.component(function({props:t,otherProps:n}){const[r,i]=rt(!1),a=()=>Ot(t.class,t.classes.ripple,t.classes.rippleVisible,t.classes.ripplePulsate&&{[t.classes.ripplePulsate]:t.pulsate}),o=()=>({width:`${t.rippleSize}px`,height:`${t.rippleSize}px`,top:`${-(t.rippleSize/2)+t.rippleY}px`,left:`${-(t.rippleSize/2)+t.rippleX}px`}),s=()=>Ot(t.classes.child,t.classes.childLeaving&&{[t.classes.childLeaving]:r()},t.classes.childPulsate&&{[t.classes.childPulsate]:t.pulsate});Bt(()=>{!t.in&&!r()&&i(!0)});let l;return Bt(()=>{!t.in&&t.onExited&&(clearTimeout(l),l=window.setTimeout(t.onExited,t.timeout))}),Pe(()=>clearTimeout(l)),O(DJt,{as:"span",get class(){return a()},get style(){return o()},get sx(){return n.sx},get children(){var u=IJt();return pr(()=>YC(u,s())),u}})}),bY=e=>e,RJt=()=>{let e=bY;return{configure(t){e=t},generate(t){return e(t)},reset(){e=bY}}},OJt=RJt(),NJt={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function Zt(e,t){return NJt[t]||`${OJt.generate(e)}-${t}`}function qt(e,t){const n={};return t.forEach(r=>{n[r]=Zt(e,r)}),n}const xs=qt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);function yi(e){const t=n=>{if(t.ref=t.current=n,typeof e=="function"){const r=e();typeof r=="function"&&r(n)}else typeof(e==null?void 0:e.ref)=="function"&&e.ref(n)};return t}function ic(e){return yi(e)}const BJt=Pt()({name:"MuiTouchRipple",selfPropNames:["center","classes","ref"]}),hB=550,kJt=80,FJt=vt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),zJt=vt(PJt,{name:"MuiTouchRipple",slot:"Ripple"})(({theme:e})=>({position:"absolute","@keyframes animation-enter-$id":{0:{transform:"scale(0)",opacity:.1},100:{transform:"scale(1)",opacity:.3}},"@keyframes animation-exit-$id":{0:{opacity:1},100:{opacity:0}},"@keyframes animation-pulsate-$id":{0:{transform:"scale(1)"},50:{transform:"scale(0.92)"},100:{transform:"scale(1)"}},[`&.${xs.rippleVisible}`]:{opacity:"0.3",transform:"scale(1)",animationName:"animation-enter-$id",animationDuration:`${hB}ms`,animationTimingFunction:e.transitions.easing.easeInOut},[`&.${xs.ripplePulsate}`]:{animationDuration:`${e.transitions.duration.shorter}ms`},[`& .${xs.child}`]:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},[`& .${xs.childLeaving}`]:{opacity:0,animationName:"animation-exit-$id",animationDuration:`${hB}ms`,animationTimingFunction:`${e.transitions.easing.easeInOut}`},[`& .${xs.childPulsate}`]:{position:"absolute",left:"0px",top:0,animationName:"animation-pulsate-$id",animationDuration:"2500ms",animationTimingFunction:`${e.transitions.easing.easeInOut}`,animationIterationCount:"infinite",animationDelay:"200ms"}})),UJt=BJt.defineComponent(function(t){const n=G({classes:{}},t),[,r]=Yt(n,["center","classes","ref"]);let i=0;const[a,o]=rt([]),s=p2({});let l,u=!1,c,h;const f=ic();Pe(()=>{c&&clearTimeout(c)}),Bt(()=>{a(),l&&(l(),l=void 0)});const d=_=>{const y=i++;s[y]=!0,o(x=>[...x,{id:y,params:_}]),l=_.cb},p=(_,y={pulsate:!1,center:n.center},x)=>{if(y=G(y,{center:y.center||y.pulsate}),_.type==="mousedown"&&u){u=!1;return}_.type==="touchstart"&&(u=!0);const S=f.ref?f.ref.getBoundingClientRect():{width:0,height:0,left:0,top:0};let b,w,A;if(y.center||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)b=Math.round(S.width/2),w=Math.round(S.height/2);else{const{clientX:T,clientY:M}=_.touches?_.touches[0]:_;b=Math.round(T-S.left),w=Math.round(M-S.top)}if(y.center)A=Math.sqrt((2*S.width**2+S.height**2)/3),A%2===0&&(A+=1);else{const T=Math.max(Math.abs((f.ref?f.ref.clientWidth:0)-b),b)*2+2,M=Math.max(Math.abs((f.ref?f.ref.clientHeight:0)-w),w)*2+2;A=Math.sqrt(T**2+M**2)}_.touches?h||(h=()=>{d({pulsate:y.pulsate,rippleX:b,rippleY:w,rippleSize:A,cb:x})},c=setTimeout(()=>{h&&(h(),h=void 0)},kJt)):d({pulsate:y.pulsate,rippleX:b,rippleY:w,rippleSize:A,cb:x})},v=()=>p({},{pulsate:!0}),g=(_,y)=>{if(clearTimeout(c),_.type==="touchend"&&h){h(),h=void 0,c=setTimeout(()=>{g(_,y)});return}for(const x in s)s[x]=!1;h=void 0,l=y},m={pulsate:v,start:p,stop:g};return typeof n.ref=="function"&&n.ref(m),O(FJt,G({get class(){return Ot(n.classes.root,xs.root,r.class)},ref:f},r,{get children(){return O(RM,{get each(){return a()},children:_=>O(zJt,{get in(){return s[_.id]},onExited:()=>{o(y=>y.filter(x=>x.id!==_.id)),delete s[_.id]},get classes(){return{ripple:Ot(n.classes.ripple,xs.ripple),rippleVisible:Ot(n.classes.rippleVisible,xs.rippleVisible),ripplePulsate:Ot(n.classes.ripplePulsate,xs.ripplePulsate),child:Ot(n.classes.child,xs.child),childLeaving:Ot(n.classes.childLeaving,xs.childLeaving),childPulsate:Ot(n.classes.childPulsate,xs.childPulsate)}},timeout:hB,get pulsate(){return _.params.pulsate},get rippleX(){return _.params.rippleX},get rippleY(){return _.params.rippleY},get rippleSize(){return _.params.rippleSize}})})}}))});function VJt(e){return Zt("MuiButtonBase",e)}const GJt=qt("MuiButtonBase",["root","disabled","focusVisible"]),vR=Pt()({name:"MuiButtonBase",selfPropNames:["LinkComponent","TouchRippleProps","action","centerRipple","children","classes","disableRipple","disableRipple","disableTouchRipple","disabled","focusRipple","focusVisibleClassName","onFocusVisible","tabIndex","touchRippleRef"],autoCallUseClasses:!1,utilityClass:VJt,slotClasses:e=>({root:["root",e.disabled&&"disabled",e.focusVisible&&"focusVisible"]})}),HJt=vt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${GJt.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),$s=vR.defineComponent(function(t){var B,N;const n=$i(),r=G({component:"button",LinkComponent:"a",tabIndex:0},(N=(B=n.components)==null?void 0:B[vR.name])==null?void 0:N.defaultProps,t),i=yi(t),a=yi(()=>r.touchRippleRef),o=_ct();let s=!1;const[l,u]=rt(!1),[c,h]=rt(!1),[,f]=Yt(r,["LinkComponent","TouchRippleProps","action","centerRipple","children","classes","disableRipple","disableRipple","disableTouchRipple","disabled","focusRipple","focusVisibleClassName","onFocusVisible","tabIndex","touchRippleRef"]),d={get classes(){return r.classes},get disabled(){return r.disabled||!1},get focusVisible(){return l()}},p=vR.useClasses(d);ki(()=>{h(!0)}),Bt(()=>{r.disabled&&l()&&u(!1)}),Bt(()=>{l()&&r.focusRipple&&!r.disableRipple&&a.ref.pulsate()});function v(k,U,Z=r.disableTouchRipple){return nt=>(typeof U=="function"&&U(nt),!Z&&a.ref&&a.ref[k](nt),!0)}const g=v("start",r.onMouseDown),m=v("stop",r.onContextMenu),_=v("stop",r.onDragLeave),y=v("stop",r.onMouseUp),x=v("stop",k=>{l()&&k.preventDefault(),typeof r.onMouseLeave=="function"&&r.onMouseLeave(k)}),S=v("start",r.onTouchStart),b=v("stop",r.onTouchEnd),w=v("stop",r.onTouchMove),A=v("stop",k=>{o.onBlur(k),o.isFocusVisibleRef.current===!1&&u(!1),typeof r.onFocusOut=="function"&&r.onFocusOut(k)},!1),T=k=>{i.ref||(i.ref=k.currentTarget),o.onFocus(k),o.isFocusVisibleRef.current===!0&&(u(!0),r.onFocusVisible&&r.onFocusVisible(k)),typeof r.onFocusIn=="function"&&r.onFocusIn(k)},M=()=>r.component&&r.component!=="button"&&!(i.ref.tagName==="A"&&i.ref.hasAttribute("href")),C=k=>{r.focusRipple&&!s&&l()&&a.ref&&k.key===" "&&(s=!0,a.ref.stop(k,()=>{a.ref.start(k)})),k.target===k.currentTarget&&M()&&k.key===" "&&k.preventDefault(),typeof r.onKeyDown=="function"&&r.onKeyDown(k),k.target===k.currentTarget&&M()&&k.key==="Enter"&&!r.disabled&&(k.preventDefault(),typeof r.onClick=="function"&&r.onClick(k))},E=k=>{r.focusRipple&&k.key===" "&&a.ref&&l()&&!k.defaultPrevented&&(s=!1,a.ref.stop(k,()=>{a.ref.pulsate(k)})),typeof r.onKeyUp=="function"&&r.onKeyUp(k),typeof r.onClick=="function"&&k.target===k.currentTarget&&M()&&k.key===" "&&!k.defaultPrevented&&r.onClick(k)},D=mt(()=>{let k=r.component;return k==="button"&&(r.href||r.to)&&(k=r.LinkComponent),k}),I=()=>D()==="button",L=()=>c()&&!r.disableRipple&&!r.disabled,P=r.TouchRippleProps;return O(HJt,G({get type(){return I()?r.type===void 0?"button":r.type:void 0},get disabled(){return I()?r.disabled:void 0},get role(){return!I()&&r.href&&!r.to?"button":void 0},get"aria-disabled"(){return!I()&&r.disabled?!0:void 0}},f,{get class(){return Ot(p.root,r.class)},ownerState:d,onFocusOut:A,get onClick(){return r.onClick},onContextMenu:m,onFocusIn:T,onKeyDown:C,onKeyUp:E,onMouseDown:g,onMouseLeave:x,onMouseUp:y,onDragLeave:_,onTouchEnd:b,onTouchMove:w,onTouchStart:S,ref:i,get tabIndex(){return r.disabled?-1:r.tabIndex},get as(){return D()},get children(){return[mt(()=>r.children),O(Xe,{get when(){return L()},get children(){return O(UJt,G({ref:k=>{a(k)},get center(){return r.centerRipple}},P))}})]}}))});function WJt(e){return Zt("MuiIconButton",e)}const $Jt=qt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),XJt=Pt()({name:"MuiIconButton",selfPropNames:["children","classes","color","disableFocusRipple","disabled","edge","size"],propDefaults:({set:e})=>e({edge:!1,color:"default",disabled:!1,disableFocusRipple:!1,size:"medium"}),utilityClass:WJt,slotClasses:e=>({root:["root",e.disabled&&"disabled",e.color!=="default"&&`color${lt(e.color)}`,e.edge&&`edge${lt(e.edge)}`,`size${lt(e.size)}`]})}),jJt=vt($s,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${lt(n.color)}`],n.edge&&t[`edge${lt(n.edge)}`],t[`size${lt(n.size)}`]]}})(({theme:e,ownerState:t})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),...!t.disableRipple&&{"&:hover":{backgroundColor:un(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},...t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},...t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}}),({theme:e,ownerState:t})=>({...t.color==="inherit"&&{color:"inherit"},...t.color!=="inherit"&&t.color!=="default"&&{color:e.palette[t.color].main,...!t.disableRipple&&{"&:hover":{backgroundColor:un(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}},...t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},...t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},[`&.${$Jt.disabled}`]:{backgroundColor:"transparent",color:e.palette.action.disabled}})),YJt=XJt.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(jJt,G({get class(){return Ot(n.root,r.class)},centerRipple:!0,get focusRipple(){return!i.disableFocusRipple},get disabled(){return i.disabled},ownerState:t},r,{get children(){return i.children}}))});function qJt(e){return Zt("MuiPaper",e)}qt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const KJt=Pt()({name:"MuiPaper",selfPropNames:["children","classes","elevation","square","variant"],propDefaults:({set:e})=>e({component:"div",elevation:1,square:!1,variant:"elevation"}),utilityClass:qJt,slotClasses:e=>({root:["root",e.variant,!e.square&&"rounded",e.variant==="elevation"&&`elevation${e.elevation}`]})}),SY=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Number((t/100).toFixed(2))},ZJt=vt("div",{name:"MuiPaper",slot:"Root"})(({theme:e,ownerState:t})=>({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow"),...!t.square&&{borderRadius:e.shape.borderRadius},...t.variant==="outlined"&&{border:`1px solid ${e.palette.divider}`},...t.variant==="elevation"&&{boxShadow:e.shadows[t.elevation],...e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${un("#fff",SY(t.elevation))}, ${un("#fff",SY(t.elevation))})`}}})),Lh=KJt.component(function({allProps:t,props:n,otherProps:r,classes:i}){return O(ZJt,G(r,{ownerState:t,get class(){return Ot(i.root,t.class)},get children(){return n.children}}))}),AV=hr();function JJt(e){return Zt("MuiSvgIcon",e)}qt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var QJt=ee("<title>");const tQt=Pt()({name:"MuiSvgIcon",selfPropNames:["children","classes","color","fontSize","htmlColor","inheritViewBox","shapeRendering","titleAccess","viewBox"],propDefaults:({set:e})=>{const t=Ln(AV);return e({component:"svg",color:"inherit",get fontSize(){return(t==null?void 0:t.fontSize)??"medium"},inheritViewBox:!1,viewBox:"0 0 24 24"})},utilityClass:JJt,slotClasses:e=>({root:["root",e.color!=="inherit"&&`color${lt(e.color)}`,`fontSize${lt(e.fontSize)}`]})}),eQt=vt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${lt(n.color)}`],t[`fontSize${lt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,i,a,o,s,l,u,c,h,f,d,p,v,g,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(a=(n=e.transitions)==null?void 0:n.create)==null?void 0:a.call(n,"fill",{duration:(i=(r=e.transitions)==null?void 0:r.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=(o=e.typography)==null?void 0:o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem",medium:((u=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:u.call(l,24))||"1.5rem",large:((h=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:h.call(c,35))||"2.1875"}[t.fontSize],color:((d=(f=e.palette)==null?void 0:f[t.color])==null?void 0:d.main)??{action:(v=(p=e.palette)==null?void 0:p.action)==null?void 0:v.active,disabled:(m=(g=e.palette)==null?void 0:g.action)==null?void 0:m.disabled,inherit:void 0}[t.color]}}),nQt=tQt.component(function({allProps:t,props:n,otherProps:r,classes:i}){return O(eQt,G({get"aria-hidden"(){return n.titleAccess?void 0:!0},get role(){return n.titleAccess?"img":void 0},get viewBox(){return n.inheritViewBox?void 0:n.viewBox}},{focusable:"false"},{get color(){return n.htmlColor}},r,{get class(){return Ot(i.root,r.class)},ownerState:t,get children(){return[mt(()=>n.children),O(Xe,{get when(){return n.titleAccess},children:a=>(()=>{var o=QJt();return le(o,a),o})()})]}}))});function Ro(e,t){return r=>O(nQt,G({"data-testid":`${t}Icon`},r,{get children(){return e()}}))}var rQt=ee('<svg><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></svg>',!1,!0);const iQt=Ro(()=>rQt(),"Close");var aQt=ee('<svg><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></svg>',!1,!0);const oQt=Ro(()=>aQt(),"ErrorOutline");var sQt=ee('<svg><path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"></svg>',!1,!0);const lQt=Ro(()=>sQt(),"InfoOutlined");var uQt=ee('<svg><path d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"></svg>',!1,!0);const cQt=Ro(()=>uQt(),"ReportProblemOutlined");var hQt=ee('<svg><path d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"></svg>',!1,!0);const fQt=Ro(()=>hQt(),"SuccessOutlined");function dQt(e){return Zt("MuiAlert",e)}const wY=qt("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),pQt=Pt()({name:"MuiAlert",selfPropNames:["action","classes","closeText","color","icon","iconMapping","onClose","role","severity","variant"],utilityClass:dQt,slotClasses:e=>({root:["root",`${e.variant}${lt(e.color||e.severity)}`,`${e.variant}`],icon:["icon"],message:["message"],action:["action"]}),propDefaults:({set:e})=>e({closeText:"Close",role:"alert",severity:"success",variant:"standard"})}),vQt=vt(Lh,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${lt(n.color||n.severity)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?Iv:Lv,r=e.palette.mode==="light"?Lv:Iv,i=t.color||t.severity;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",...i&&t.variant==="standard"&&{color:n(e.palette[i].light,.6),backgroundColor:r(e.palette[i].light,.9),[`& .${wY.icon}`]:{color:e.palette.mode==="dark"?e.palette[i].main:e.palette[i].light}},...i&&t.variant==="outlined"&&{color:n(e.palette[i].light,.6),border:`1px solid ${e.palette[i].light}`,[`& .${wY.icon}`]:{color:e.palette.mode==="dark"?e.palette[i].main:e.palette[i].light}},...i&&t.variant==="filled"&&{color:"#fff",fontWeight:e.typography.fontWeightMedium,backgroundColor:e.palette.mode==="dark"?e.palette[i].dark:e.palette[i].main}}}),gQt=vt("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),mQt=vt("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),TY=vt("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),gR={success:()=>O(fQt,{fontSize:"inherit"}),warning:()=>O(cQt,{fontSize:"inherit"}),error:()=>O(oQt,{fontSize:"inherit"}),info:()=>O(lQt,{fontSize:"inherit"})};pQt.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=mt(()=>i.icon),o=mt(()=>i.action);return O(vQt,G({get role(){return i.role},elevation:0,ownerState:t,get class(){return Ot(n.root,r.class)}},r,{get children(){return[O(Xe,{get when(){return a()!==!1},get children(){return O(gQt,{ownerState:t,get class(){return n.icon},get children(){var s,l,u;return a()||((l=(s=i.iconMapping)==null?void 0:s[i.severity])==null?void 0:l.call(s))||((u=gR[i.severity])==null?void 0:u.call(gR))}})}}),O(mQt,{ownerState:t,get class(){return n.message},get children(){return r.children}}),O(Xe,{get when(){return o()},get children(){return O(TY,{get class(){return n.action},get children(){return o()}})}}),O(Xe,{get when(){return!o()&&i.onClose},get children(){return O(TY,{ownerState:t,get class(){return n.action},get children(){return O(YJt,{size:"small",get"aria-label"(){return i.closeText},get title(){return i.closeText},color:"inherit",get onClick(){return i.onClose},get children(){return O(iQt,{fontSize:"small"})}})}})}})]}}))});function yQt(e){return Zt("MuiTypography",e)}qt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const mR=Pt()({name:"MuiTypography",selfPropNames:["align","children","classes","gutterBottom","noWrap","paragraph","variant","variantMapping"],utilityClass:yQt,slotClasses:e=>({root:["root",e.variant,e.align!=="inherit"&&`align${lt(e.align)}`,e.gutterBottom&&"gutterBottom",e.noWrap&&"noWrap",e.paragraph&&"paragraph"]})}),_Qt=vt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${lt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>({margin:0,color:t.color,...t.variant&&e.typography[t.variant],...t.align!=="inherit"&&{textAlign:t.align},...t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},...t.gutterBottom&&{marginBottom:"0.35em"},...t.paragraph&&{marginBottom:16}})),MY={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},xQt={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bQt=e=>xQt[e]||e,Sa=mR.defineComponent(function(t){var h,f;const r=(f=(h=$i().components)==null?void 0:h[mR.name])==null?void 0:f.defaultProps,i=()=>bQt(t.color??(r==null?void 0:r.color)),[a,o]=Rct(G({align:"inherit",variant:"body1",variantMapping:MY},r,t,{get color(){return i()}})),[,s]=Yt(o,["align","class","component","gutterBottom","noWrap","paragraph","variant","variantMapping"]),l={get classes(){return o.classes},get align(){return o.align},get color(){return i()},get gutterBottom(){return o.gutterBottom||!1},get noWrap(){return o.noWrap||!1},get paragraph(){return o.paragraph||!1},get variant(){return o.variant}},u=()=>o.component||(o.paragraph?"p":o.variantMapping[o.variant]||MY[o.variant])||"span",c=mR.useClasses(l);return O(_Qt,G({get as(){return u()},get sx(){return a()},ownerState:l,get class(){return Ot(c.root,o.class)}},s))});function SQt(e){return Zt("MuiAlertTitle",e)}qt("MuiAlertTitle",["root"]);const wQt=Pt()({name:"MuiAlertTitle",selfPropNames:["children","classes"],propDefaults:({set:e})=>e({component:"div"}),utilityClass:SQt,slotClasses:()=>({root:["root"]})}),TQt=vt(Sa,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2}));wQt.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(TQt,G({gutterBottom:!0},r,{ownerState:t,get class(){return Ot(n.root,r.class)},get children(){return i.children}}))});function MQt(e){return Zt("MuiAppBar",e)}qt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const AQt=Pt()({name:"MuiAppBar",selfPropNames:["classes","color","enableColorOnDark","position"],utilityClass:MQt,propDefaults:({set:e})=>e({component:"header",color:"primary",enableColorOnDark:!1,position:"fixed"}),slotClasses:e=>({root:["root",`color${lt(e.color)}`,`position${lt(e.position)}`]})}),CQt=vt(Lh,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>[t.root,t[`position${lt(e.ownerState.position)}`],t[`color${lt(e.ownerState.color)}`]]})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,...t.position==="fixed"&&{position:"fixed",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},...t.position==="absolute"&&{position:"absolute",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},...t.position==="sticky"&&{position:"sticky",zIndex:e.zIndex.appBar,top:0,left:"auto",right:0},...t.position==="static"&&{position:"static"},...t.position==="relative"&&{position:"relative"},...t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},...t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},...t.color==="inherit"&&{color:"inherit"},...e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:void 0,color:void 0},...t.color==="transparent"&&{backgroundColor:"transparent",color:"inherit",...e.palette.mode==="dark"&&{backgroundImage:"none"}}}});AQt.component(function({allProps:t,classes:n,props:r,otherProps:i}){return O(CQt,G({square:!0,ownerState:t,elevation:4,get class(){return Ot(n.root,{"mui-fixed":r.position==="fixed"},i.class)}},i))});var EQt=ee('<svg><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></svg>',!1,!0);const DQt=Ro(()=>EQt(),"Person");function IQt(e){return Zt("MuiAvatar",e)}qt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const yR=Pt()({name:"MuiAvatar",selfPropNames:["alt","children","classes","imgProps","sizes","src","srcSet","variant"],utilityClass:IQt,slotClasses:e=>({root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]})}),LQt=vt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",...t.variant==="rounded"&&{borderRadius:e.shape.borderRadius},...t.variant==="square"&&{borderRadius:0},...t.colorDefault&&{color:e.palette.background.default,backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}})),PQt=vt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:"10000"}),RQt=vt(DQt,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function OQt(e){let t=!0;const[n,r]=rt(!1);return Pe(()=>{t=!1}),Bt(la(()=>[e.crossOrigin,e.referrerPolicy,e.src,e.srcSet],()=>{if(!e.src&&!e.srcSet)return;r(!1);const i=new Image;i.onload=()=>{t&&r("loaded")},i.onerror=()=>{t&&r("error")},i.crossOrigin=e.crossOrigin,i.referrerPolicy=e.referrerPolicy,i.src=e.src,e.srcSet&&(i.srcset=e.srcSet)})),n}yR.defineComponent(function(t){const n=yR.useThemeProps({props:t}),[,r]=Yt(n,["alt","children","class","component","imgProps","sizes","src","srcSet","variant"]),i=G({component:"div",variant:"circular"},n),a=OQt(G(()=>n.imgProps||{},{get src(){return n.src},get srcSet(){return n.srcSet}})),o=()=>n.src||n.srcSet,s=()=>o()&&a()!=="error",l=G(n,{get colorDefault(){return!s()},get component(){return i.component},get variant(){return i.variant}}),u=yR.useClasses(l),c=()=>{if(s())return O(PQt,G({get alt(){return n.alt},get src(){return n.src},get srcSet(){return n.srcSet},get sizes(){return n.sizes},ownerState:l,get class(){return u.img}},()=>n.imgProps||{}));const h=n.children;return h??(o()&&n.alt?n.alt[0]:O(RQt,{get class(){return u.fallback}}))};return O(LQt,G({get as(){return i.component},ownerState:l,get class(){return Ot(u.root,n.class)}},r,{get children(){return c()}}))});const CV=e=>e.scrollTop;function Wy(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??(typeof n=="number"?n:typeof n=="string"?0:n[t.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:i.transitionDelay}}function Bct(e){return typeof e=="number"?{exit:e,enter:e,appear:e}:{exit:(e==null?void 0:e.exit)||0,enter:(e==null?void 0:e.enter)||0,appear:(e==null?void 0:e.appear)??(e==null?void 0:e.enter)??0}}function EV(e){const t=G({in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0},e),n=mt(()=>Bct(t.timeout));let r;t.in?t.appear?r="exited":r="entered":t.unmountOnExit||t.mountOnEnter?r="unmounted":r="exited";const[i,a]=rt(r);let o,s,l=!0;function u(h,f){const d=()=>setTimeout(f,h);let p,v=!1;const g=()=>{v=!0,p&&clearTimeout(p)};return t.addEndListener?t.addEndListener(()=>{v||(p=d())}):p=d(),g}const c=mt(la(()=>[i()],()=>{var d,p,v,g;const h=i(),f=h!=="unmounted"?t.children(h):void 0;return l?(l=!1,f):(h==="entering"?((d=t.onEntering)==null||d.call(t),s&&(s(),s=void 0),o=u(n().enter,()=>a("entered"))):h==="entered"?(p=t.onEntered)==null||p.call(t):h==="exiting"?((v=t.onExiting)==null||v.call(t),o&&(o(),o=void 0),s=u(n().exit,()=>a("exited"))):h==="exited"&&((g=t.onExited)==null||g.call(t)),f)}));return Bt(h=>(t.in?($e(()=>{var f;return(f=t.onEnter)==null?void 0:f.call(t)}),a("entering")):h||($e(()=>{var f;return(f=t.onExit)==null?void 0:f.call(t)}),a("exiting")),!1),!0),Pe(()=>{o==null||o(),s==null||s()}),c()}const R2=hr(),kct=Pt()({name:"MuiFader",selfPropNames:["appear","children","easing","in","timeout"],propDefaults:({set:e})=>{const t=$i();return e({appear:!0,get timeout(){return{enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen}}})}}),NQt=kct.selfPropNames,Fct=kct.component(function({props:t,otherProps:n}){const r=$i(),i=ic(t),a=mt(()=>Bct(t.timeout)),o=Er(()=>t.children),s=Ln(R2);return O(EV,G({get in(){return t.in??(s==null?void 0:s.in)},get appear(){return t.appear},get timeout(){return t.timeout}},n,{ref:i,onEnter:()=>{var c,h;const l=o();CV(l);const u=Wy({style:n.style,timeout:a(),easing:t.easing},{mode:"enter"});l.style.transition=r.transitions.create("opacity",u),(c=n.onEnter)==null||c.call(n),(h=s==null?void 0:s.onEnter)==null||h.call(s)},onExit:()=>{var c;const l=o(),u=Wy({style:n.style,timeout:a(),easing:t.easing},{mode:"enter"});l.style.transition=r.transitions.create("opacity",u),(c=n.onExit)==null||c.call(n)},onExited:()=>{var l,u;(l=n.onExited)==null||l.call(n),(u=s==null?void 0:s.onExited)==null||u.call(s)},children:l=>{const u=o();return l==="exited"&&!t.in?u.style.visibility="hidden":u.style.removeProperty("visibility"),l==="entering"||l==="entered"?u.style.opacity="1":u.style.opacity="0",u}}))});function ph(e){return typeof e=="string"}function BQt(e){return Zt("MuiBackdrop",e)}qt("MuiBackdrop",["root","invisible"]);const kQt=Pt()({name:"BackdropUnstyled",selfPropNames:["children","classes","components","componentsProps","invisible"],propDefaults:({set:e})=>e({component:"div",components:{},componentsProps:{},invisible:!1}),utilityClass:BQt,slotClasses:e=>({root:["root",e.invisible&&"invisible"]})}),FQt=kQt.component(function({props:t,otherProps:n,allProps:r,classes:i}){const a=()=>t.components.Root||n.component,o=()=>t.componentsProps.root||{};return O(u1,G({"aria-hidden":!0},o,n,()=>!ph(a())&&{ownerState:r},{get $component(){return a()},get class(){return Ot(i.root,o().class,n.class)},get children(){return t.children}}))}),zQt=Pt()({name:"MuiBackdrop",selfPropNames:["classes","open","transitionDuration"],propDefaults:({set:e})=>e({open:!1,component:"div"})}),UQt=vt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",...e.invisible&&{backgroundColor:"transparent"}})),zct=zQt.component(function({props:t,otherProps:n}){const[r,i]=Yt(n,NQt);return O(Fct,G({get in(){return t.open},get timeout(){return t.transitionDuration}},r,{get children(){return O(FQt,G(i,{get class(){return n.class},get invisible(){return n.invisible},get components(){return{Root:UQt,...n.components}},get componentsProps(){var a,o,s;return{root:{...(a=n.componentsProps)==null?void 0:a.root,...(!((o=n.components)!=null&&o.Root)||!ph((s=n.components)==null?void 0:s.Root))&&{}}}},get classes(){return t.classes},get children(){return n.children}}))}}))});function AY(e,t,n){const r=G(()=>t().ownerState||{},n);return G(t,{get ownerState(){if(!ph(e()))return r}})}function Uct(e){return Zt("MuiBadge",e)}const VQt=qt("MuiBadge",["root","badge","dot","standard","anchorOriginTopLeft","anchorOriginTopRight","anchorOriginBottomLeft","anchorOriginBottomRight","invisible"]);function Vct(e){return mt(()=>e.invisible===!1&&(e.badgeContent===0&&!e.showZero||e.badgeContent==null&&e.variant!=="dot")?!0:e.invisible)}function GQt(e){const t=G({anchorOrigin:{vertical:"top",horizontal:"right"},invisible:!1,max:99,showZero:!1,variant:"standard"},e),n=xct(t,["anchorOrigin","badgeContent","max","variant"]),r=Vct(t),i=G(()=>r()?n:t),a=()=>{if(i.variant!=="dot")return i.badgeContent&&Number(i.badgeContent)>i.max?`${i.max}+`:i.badgeContent};return G(i,{get invisible(){return r()},get displayValue(){return a()}})}const CY=Pt()({name:"MuiBadgeUnstyled",autoCallUseClasses:!1,selfPropNames:["anchorOrigin","badgeContent","children","classes","components","components","componentsProps","invisible","max","showZero","variant"],propDefaults:({set:e})=>e({anchorOrigin:{vertical:"top",horizontal:"right"},components:{},componentsProps:{},max:99,showZero:!1,variant:"standard",invisible:!1}),utilityClass:Uct,slotClasses:e=>({root:["root"],badge:["badge",e.variant,`anchorOrigin${lt(e.anchorOrigin.vertical)}${lt(e.anchorOrigin.horizontal)}`,e.invisible&&"invisible"]})}),HQt=CY.component(function({allProps:t,otherProps:n,props:r}){const i=GQt(t),a=G(t,i),o=()=>n.component||r.components.Root||"span",s=AY(o,()=>G(n,r.componentsProps.root||{}),a),l=()=>r.components.Badge||"span",u=AY(l,()=>r.componentsProps.badge||{},a),c=CY.useClasses(a);return O(ry,G(s,n,{get component(){return o()},get class(){return Ot(c.root,s.class,n.class)},get children(){return[mt(()=>r.children),O(ry,G(u,{get component(){return l()},get class(){return Ot(c.badge,u.class)},get children(){return i.displayValue}}))]}}))}),ef=Object.assign({},VQt,qt("MuiBadge",["colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"])),EY=Pt()({name:"MuiBadge",selfPropNames:["classes","color","overlap","variant"],propDefaults:({set:e})=>e({anchorOrigin:{vertical:"top",horizontal:"right"},component:"span",components:{},componentsProps:{},overlap:"rectangular",color:"default",invisible:!1,showZero:!1,variant:"standard",max:99}),autoCallUseClasses:!1,utilityClass:Uct,slotClasses:e=>({badge:[`anchorOrigin${lt(e.anchorOrigin.vertical)}${lt(e.anchorOrigin.horizontal)}${lt(e.overlap)}`,`overlap${lt(e.overlap)}`,e.color!=="default"&&`color${lt(e.color)}`]})}),_R=10,xR=4,DY=e=>!e||!ph(e),WQt=vt("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),$Qt=vt("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${lt(n.anchorOrigin.vertical)}${lt(n.anchorOrigin.horizontal)}${lt(n.overlap)}`],n.color!=="default"&&t[`color${lt(n.color)}`],n.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:_R*2,lineHeight:1,padding:"0 6px",height:_R*2,borderRadius:_R,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),...t.color!=="default"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},...t.variant==="dot"&&{borderRadius:xR,height:xR*2,minWidth:xR*2,padding:0},...t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},...t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},...t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},...t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},...t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},...t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},...t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},...t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ef.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},...t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}));EY.component(function({allProps:t,otherProps:n,props:r}){const[,i]=Yt(n,["component"]),a=xct(t,["anchorOrigin","color","overlap"]),o=Vct(t),s=G(()=>o()?a:t),l=G(t,{get invisible(){return o()}}),u=EY.useClasses(l),c=G({Root:WQt,Badge:$Qt},()=>n.components),h=G(()=>{var p;return((p=n.componentsProps.root)==null?void 0:p.ownerState)||{}},{get color(){return s.color},get overlap(){return s.overlap}}),f=G(()=>{var p;return((p=n.componentsProps.badge)==null?void 0:p.ownerState)||{}},{get color(){return s.color},get overlap(){return s.overlap}}),d={root:G(()=>n.componentsProps.root||{},()=>DY(n.components.Root)&&{as:n.component,ownerState:h}),badge:G(()=>n.componentsProps.badge||{},()=>DY(n.components.Badge)&&{ownerState:f})};return O(HQt,G({get variant(){return r.variant}},i,{components:c,componentsProps:d,classes:u}))});const Gct=hr({onChange:()=>()=>{},showLabels:()=>!1,selectedValue:()=>{},getIndex:()=>0});function XQt(e){return Zt("MuiBottomNavigation",e)}qt("MuiBottomNavigation",["root"]);const bR=Pt()({name:"MuiBottomNavigation",selfPropNames:["children","classes","onChange","showLabels","value"],utilityClass:XQt,slotClasses:()=>({root:["root"]})}),jQt=vt("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:e.palette.background.paper}));bR.defineComponent(function(t){const n=yi(t),r=bR.useThemeProps({props:t}),[,i]=Yt(r,["children","class","component","onChange","showLabels","value"]),a=G({component:"div",showLabels:!1},r),o=G(r,{get component(){return a.component},get showLabels(){return a.showLabels}}),s=bR.useClasses(o);let l;return O(jQt,G({get as(){return a.component},get class(){return Ot(s.root,r.class)},ref:n,ownerState:o},i,{get children(){return O(Gct.Provider,{get value(){return{showLabels:mt(()=>r.showLabels),selectedValue:mt(()=>r.value),onChange:mt(()=>r.onChange),getIndex:u=>l.toArray().indexOf(u)}},get children(){return(l=Er(()=>r.children))()}})}}))});function YQt(e){return Zt("MuiBottomNavigationAction",e)}const Hct=qt("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),SR=Pt()({name:"MuiBottomNavigationAction",selfPropNames:["children","classes","icon","label","showLabel","value"],utilityClass:YQt,slotClasses:e=>({root:["root",!e.showLabel&&!e.selected&&"iconOnly",e.selected&&"selected"],label:["label",!e.showLabel&&!e.selected&&"iconOnly",e.selected&&"selected"]})}),qQt=vt($s,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(({theme:e,ownerState:t})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"6px 12px 8px",minWidth:80,maxWidth:168,color:e.palette.text.secondary,flexDirection:"column",flex:"1",...!t.showLabel&&!t.selected&&{paddingTop:16},[`&.${Hct.selected}`]:{paddingTop:6,color:e.palette.primary.main}})),KQt=vt("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e,ownerState:t})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",...!t.showLabel&&!t.selected&&{opacity:0,transitionDelay:"0s"},[`&.${Hct.selected}`]:{fontSize:e.typography.pxToRem(14)}}));SR.defineComponent(function(t){const n=yi(t),r=SR.useThemeProps({props:t}),[,i]=Yt(r,["class","icon","label","onClick","showLabel","value"]),a=Ln(Gct),[o,s]=rt();ki(()=>s(n.current));const l=mt(()=>{if(r.value!==void 0)return r.value;if(o()!==void 0)return a.getIndex(o())}),u=f=>{const d=a.onChange();typeof d=="function"&&d(f,l()),typeof r.onClick=="function"&&r.onClick(f)},c=G(r,{get selected(){return a.selectedValue()===l()},get showLabel(){return r.showLabel??a.showLabels()}}),h=SR.useClasses(c);return O(qQt,G({ref:n,get class(){return Ot(h.root,r.class)},focusRipple:!0,onClick:u,ownerState:c},i,{get children(){return[mt(()=>r.icon),O(KQt,{get class(){return h.label},ownerState:c,get children(){return r.label}})]}}))});var ZQt=ee('<svg><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></svg>',!1,!0);const JQt=Ro(()=>ZQt(),"MoreHoriz");var QQt=ee("<li>");const tte=vt($s)(({theme:e})=>({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`,...e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},borderRadius:2,"&:hover, &:focus":{...e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}},"&:active":{boxShadow:e.shadows[0],...e.palette.mode==="light"?{backgroundColor:uY(e.palette.grey[200],.12)}:{backgroundColor:uY(e.palette.grey[600],.12)}}})),ete=vt(JQt)({width:24,height:16});function nte(e){return(()=>{var t=QQt();return le(t,O(tte,G({focusRipple:!0},e,{ownerState:e,get children(){return O(ete,{ownerState:e})}}))),t})()}function rte(e){return Zt("MuiBreadcrumbs",e)}const ite=qt("MuiBreadcrumbs",["root","ol","li","separator"]);var ate=ee("<li>");const ote=Pt()({name:"MuiBreadcrumbs",propDefaults:({set:e})=>e({component:"nav",expandText:"Show path",itemsAfterCollapse:1,itemsBeforeCollapse:1,maxItems:8,separator:"/"}),selfPropNames:["children","classes","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],utilityClass:rte,slotClasses:()=>({root:["root"],li:["li"],ol:["ol"],separator:["separator"]})}),ste=vt(Sa,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${ite.li}`]:t.li},t.root]})({}),lte=vt("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),ute=vt("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function cte(e,t,n,r){return e.reduce((i,a,o)=>(o<e.length-1?i=i.concat(a,O(ute,{as:"div","aria-hidden":!0,class:t,ownerState:r,children:n})):i.push(a),i),[])}ote.component(function({allProps:t,classes:n,otherProps:r,props:i}){const[a,o]=rt(!1),s=ic(),l=G(t,{get expanded(){return a()}}),u=()=>{o(!0);const d=s.ref.querySelector("a[href],button,[tabindex]");d&&d.focus()},c=d=>i.itemsBeforeCollapse+i.itemsAfterCollapse>=d.length?d:[...d.slice(0,i.itemsBeforeCollapse),O(nte,{get"aria-label"(){return i.expandText},onClick:u}),...d.slice(d.length-i.itemsAfterCollapse,d.length)],h=Er(()=>i.children),f=mt(()=>{const d=h();return(Array.isArray(d)?d:[d]).filter(v=>(v??!1)!==!1).map(v=>(()=>{var g=ate();return le(g,v),pr(()=>YC(g,n.li)),g})())});return O(ste,G({color:"text.secondary"},r,{get class(){return Ot(n.root,r.class)},ownerState:l,get children(){return O(lte,{get class(){return n.ol},ownerState:l,ref:s,get children(){return cte(a()||i.maxItems&&f().length<=i.maxItems?f():c(f()),n.separator,i.separator,l)}})}}))});const DV=hr({});function hte(e){return Zt("MuiButton",e)}const PT=qt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),fte=Pt()({name:"MuiButton",selfPropNames:["children","classes","color","disableElevation","disableFocusRipple","disabled","endIcon","fullWidth","href","size","startIcon","variant"],propDefaults:({set:e})=>{const t=Ln(DV);return e({get color(){return t.color??"primary"},component:"button",get disabled(){return t.disabled??!1},get disableElevation(){return t.disableElevation??!1},get disableFocusRipple(){return t.disableFocusRipple??!1},get fullWidth(){return t.fullWidth??!1},get size(){return t.size??"medium"},get variant(){return t.variant??"text"}})},utilityClass:hte,slotClasses:e=>({root:["root",e.variant,`${e.variant}${lt(e.color)}`,`size${lt(e.size)}`,`${e.variant}Size${lt(e.size)}`,e.color==="inherit"&&"colorInherit",e.disableElevation&&"disableElevation",e.fullWidth&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${lt(e.size)}`],endIcon:["endIcon",`iconSize${lt(e.size)}`]})}),Wct=e=>({...e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},...e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},...e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}}),dte=vt($s,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${lt(n.color)}`],t[`size${lt(n.size)}`],t[`${n.variant}Size${lt(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>({...e.typography.button,minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:un(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},...t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:un(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},...t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${e.palette[t.color].main}`,backgroundColor:un(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},...t.variant==="contained"&&{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]}},...t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:e.palette[t.color].dark,"@media (hover: none)":{backgroundColor:e.palette[t.color].main}}},"&:active":{...t.variant==="contained"&&{boxShadow:e.shadows[8]}},[`&.${PT.focusVisible}`]:{...t.variant==="contained"&&{boxShadow:e.shadows[6]}},[`&.${PT.disabled}`]:{color:e.palette.action.disabled,...t.variant==="outlined"&&{border:`1px solid ${e.palette.action.disabledBackground}`},...t.variant==="outlined"&&t.color==="secondary"&&{border:`1px solid ${e.palette.action.disabled}`},...t.variant==="contained"&&{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},...t.variant==="text"&&{padding:"6px 8px"},...t.variant==="text"&&t.color!=="inherit"&&{color:e.palette[t.color].main},...t.variant==="outlined"&&{padding:"5px 15px",border:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},...t.variant==="outlined"&&t.color!=="inherit"&&{color:e.palette[t.color].main,border:`1px solid ${un(e.palette[t.color].main,.5)}`},...t.variant==="contained"&&{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2]},...t.variant==="contained"&&t.color!=="inherit"&&{color:e.palette[t.color].contrastText,backgroundColor:e.palette[t.color].main},...t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},...t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},...t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},...t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},...t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},...t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},...t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},...t.fullWidth&&{width:"100%"}}),({ownerState:e})=>({...e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${PT.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${PT.disabled}`]:{boxShadow:"none"}}})),pte=vt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${lt(n.size)}`]]}})(({ownerState:e})=>({display:"inherit",marginRight:8,marginLeft:-4,...e.size==="small"&&{marginLeft:-2},...Wct(e)})),vte=vt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${lt(n.size)}`]]}})(({ownerState:e})=>({display:"inherit",marginRight:-4,marginLeft:8,...e.size==="small"&&{marginRight:-2},...Wct(e)}));fte.component(function({allProps:t,otherProps:n,props:r,classes:i}){const a=Ln(DV),o=Er(()=>r.startIcon),s=Er(()=>r.endIcon);return O(dte,G({ownerState:t,get class(){return Ot(i.root,n.class,a.class)},get disabled(){return r.disabled},get focusRipple(){return!r.disableFocusRipple},get focusVisibleClassName(){var l;return Ot((l=r.classes)==null?void 0:l.focusVisible,n.focusVisibleClassName)},get type(){return n.type},get href(){return r.href}},n,{get classes(){return r.classes},get children(){return[O(Xe,{get when(){return o()},children:l=>O(pte,{get class(){return i.startIcon},ownerState:t,get children(){return l()}})}),mt(()=>r.children),O(Xe,{get when(){return s()},children:l=>O(vte,{get class(){return i.endIcon},ownerState:t,get children(){return l()}})})]}}))});function gte(e){return Zt("MuiButtonGroup",e)}const nf=qt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),mte=Pt()({name:"MuiButtonGroup",selfPropNames:["children","classes","color","disableElevation","disableFocusRipple","disableRipple","disabled","fullWidth","orientation","size","variant"],propDefaults:({set:e})=>e({color:"primary",component:"div",disabled:!1,disableElevation:!1,disableFocusRipple:!1,disableRipple:!1,fullWidth:!1,orientation:"horizontal",size:"medium",variant:"outlined"}),utilityClass:gte,slotClasses:e=>({root:["root",e.variant,e.orientation==="vertical"&&"vertical",e.fullWidth&&"fullWidth",e.disableElevation&&"disableElevation"],grouped:["grouped",`grouped${lt(e.orientation)}`,`grouped${lt(e.variant)}`,`grouped${lt(e.variant)}${lt(e.orientation)}`,`grouped${lt(e.variant)}${lt(e.color)}`,e.disabled&&"disabled"]})}),yte=vt("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${nf.grouped}`]:t.grouped},{[`& .${nf.grouped}`]:t[`grouped${lt(n.orientation)}`]},{[`& .${nf.grouped}`]:t[`grouped${lt(n.variant)}`]},{[`& .${nf.grouped}`]:t[`grouped${lt(n.variant)}${lt(n.orientation)}`]},{[`& .${nf.grouped}`]:t[`grouped${lt(n.variant)}${lt(n.color)}`]},t.root,t[n.variant],n.disableElevation===!0&&t.disableElevation,n.fullWidth&&t.fullWidth,n.orientation==="vertical"&&t.vertical]}})(({theme:e,ownerState:t})=>({display:"inline-flex",borderRadius:e.shape.borderRadius,...t.variant==="contained"&&{boxShadow:e.shadows[2]},...t.disableElevation&&{boxShadow:"none"},...t.fullWidth&&{width:"100%"},...t.orientation==="vertical"&&{flexDirection:"column"},[`& .${nf.grouped}`]:{minWidth:40,"&:not(:first-of-type)":{...t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},...t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},...t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},...t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1}},"&:not(:last-of-type)":{...t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},...t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},...t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},...t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},...t.variant==="text"&&t.color!=="inherit"&&{borderColor:un(e.palette[t.color].main,.5)},...t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},...t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},...t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${e.palette.grey[400]}`,[`&.${nf.disabled}`]:{borderRight:`1px solid ${e.palette.action.disabled}`}},...t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${e.palette.grey[400]}`,[`&.${nf.disabled}`]:{borderBottom:`1px solid ${e.palette.action.disabled}`}},...t.variant==="contained"&&t.color!=="inherit"&&{borderColor:e.palette[t.color].dark},"&:hover":{...t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},...t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"}}},"&:hover":{...t.variant==="contained"&&{boxShadow:"none"}},...t.variant==="contained"&&{boxShadow:"none"}}}));mte.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=()=>({class:n.grouped,color:i.color,disabled:i.disabled,disableElevation:i.disableElevation,disableFocusRipple:i.disableFocusRipple,disableRipple:i.disableRipple,fullWidth:i.fullWidth,size:i.size,variant:i.variant});return O(yte,G({get as(){return r.component},role:"group",get class(){return Ot(n.root,r.class)},ownerState:t},r,{get children(){return O(DV.Provider,{get value(){return a()},get children(){return i.children}})}}))});function _te(e){return Zt("MuiCard",e)}qt("MuiCard",["root"]);const xte=Pt()({name:"MuiCard",selfPropNames:["classes","raised"],utilityClass:_te,propDefaults:({set:e})=>e({component:Lh,raised:!1}),slotClasses:()=>({root:["root"]})}),bte=vt(Lh,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"}));xte.component(function({props:t,otherProps:n,classes:r}){return O(bte,G({get elevation(){return t.raised?8:void 0},get class(){return Ot(r.root,n.class)}},n))});function Ste(e){return Zt("MuiCardActionArea",e)}const wR=qt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),wte=Pt()({name:"MuiCardActionArea",selfPropNames:["classes","focusVisibleClassName"],utilityClass:Ste,slotClasses:()=>({root:["root"],focusHighlight:["focusHighlight"],focusVisible:["focusVisible"]})}),Tte=vt($s,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",textAlign:"inherit",width:"100%",[`&:hover .${wR.focusHighlight}`]:{opacity:e.palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${wR.focusVisible} .${wR.focusHighlight}`]:{opacity:e.palette.action.focusOpacity}})),Mte=vt("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}));wte.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(Tte,G(r,{get class(){return Ot(n.root,r.class)},get focusVisibleClassName(){return Ot(i.focusVisibleClassName,n.focusVisible)},ownerState:t,get children(){return[mt(()=>r.children),O(Mte,{get class(){return n.focusHighlight},ownerState:t})]}}))});function Ate(e){return Zt("MuiCardActions",e)}qt("MuiCardActions",["root","spacing"]);const Cte=Pt()({name:"MuiActions",selfPropNames:["children","classes","disableSpacing"],propDefaults:({set:e})=>e({disableSpacing:!1}),utilityClass:Ate,slotClasses:e=>({root:["root",!e.disableSpacing&&"spacing"]})}),Ete=vt("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>({display:"flex",alignItems:"center",padding:8,...!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}}));Cte.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(Ete,G(r,{get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return i.children}}))});function Dte(e){return Zt("MuiCardContent",e)}qt("MuiCardContent",["root"]);const Ite=Pt()({name:"MuiContent",selfPropNames:["children","classes"],propDefaults:({set:e})=>e({component:"div"}),utilityClass:Dte,slotClasses:()=>({root:["root"]})}),Lte=vt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}}));Ite.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(Lte,G(r,{ownerState:t,get class(){return Ot(n.root,r.class)},get children(){return i.children}}))});function Pte(e){return Zt("MuiCardHeader",e)}const IY=qt("MuiCardHeader",["root","avatar","action","content","title","subheader"]),Rte=Pt()({name:"MuiCardHeader",selfPropNames:["action","avatar","classes","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],propDefaults:({set:e})=>e({component:"div",disableTypography:!1}),utilityClass:Pte,slotClasses:()=>({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]})}),Ote=vt("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>({[`& .${IY.title}`]:t.title,[`& .${IY.subheader}`]:t.subheader,...t.root})})({display:"flex",alignItems:"center",padding:16}),Nte=vt("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Bte=vt("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),kte=vt("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"});Rte.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=Er(()=>i.avatar),o=()=>O(Xe,{get when(){return!!a()},get children(){return O(Nte,{get class(){return n.avatar},ownerState:t,get children(){return a()}})}}),s=()=>{const c=Er(()=>i.title);return O(Xe,{get when(){return c()!==void 0&&!c1(c(),Sa)&&!i.disableTypography},get fallback(){return c()},get children(){return O(Sa,G({get variant(){return a()?"body2":"h5"},get class(){return n.title},component:"span",sx:{display:"block"}},()=>i.titleTypographyProps,{get children(){return c()}}))}})},l=()=>{const c=Er(()=>i.subheader);return O(Xe,{get when(){return c()!==void 0&&!c1(c(),Sa)&&!i.disableTypography},get fallback(){return c()},get children(){return O(Sa,G({get variant(){return a()?"body2":"body1"},get class(){return n.subheader},component:"span",sx:{display:"block",color:"text.secondary"}},()=>i.subheaderTypographyProps,{get children(){return c()}}))}})},u=()=>{const c=Er(()=>i.action);return O(Xe,{get when(){return!!c()},get children(){return O(Bte,{get class(){return n.action},ownerState:t,get children(){return c()}})}})};return O(Ote,G(r,{get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return[O(o,{}),O(kte,{get class(){return n.content},ownerState:t,get children(){return[O(s,{}),O(l,{})]}}),O(u,{})]}}))});function Fte(e){return Zt("MuiCardMedia",e)}qt("MuiCardMedia",["root","media","img"]);const zte=Pt()({name:"MuiCardMedia",selfPropNames:["children","classes","image","src"],utilityClass:Fte,propDefaults:({set:e})=>e({component:"div"}),slotClasses:e=>({root:["root",e.isMediaComponent&&"media",e.isImageComponent&&"img"]})}),Ute=vt("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})(({ownerState:e})=>({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",...e.isMediaComponent&&{width:"100%"},...e.isImageComponent&&{objectFit:"cover"}})),Vte=["video","audio","picture","iframe","img"],Gte=["picture","img"];zte.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=mt(()=>Vte.indexOf(r.component)!==-1),o=()=>!a()&&i.image?G({get"background-image"(){return`url("${i.image}")`}},typeof r.style=="object"&&r.style?r.style:{}):r.style,s=G(t,{get isMediaComponent(){return a()},get isImageComponent(){return Gte.indexOf(r.component)!==-1}}),l=dS(Ute,"div","img");return O(l,G({get role(){return!a()&&i.image?"img":void 0}},r,{get as(){return r.component||r.as},get class(){return Ot(n.root,r.class)},get style(){return o()},ownerState:s,get src(){return a()?i.image||i.src:void 0},get children(){return i.children}}))});const O2=hr();function Gl(){return Ln(O2)}const IV=hr();function Hte(){return Ln(IV)}function f1(e){const t=e.controlled()!==void 0,[n,r]=rt(e.default()),i=mt(()=>t?e.controlled():n());return t&&Bt(()=>{r(()=>i())}),[i,o=>{t||r(o)}]}function Wte(e){return Zt("PrivateSwitchBase",e)}qt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const LY=Pt()({name:"MuiSwitchBase",selfPropNames:["autoFocus","checked","checkedIcon","classes","defaultChecked","disableFocusRipple","disableRipple","disabled","edge","icon","id","inputProps","inputRef","name","onChange","readOnly","required","tabIndex","type","value"],autoCallUseClasses:!1,propDefaults:({set:e})=>e({disableFocusRipple:!1,edge:!1}),utilityClass:Wte,slotClasses:e=>({root:["root",!!e.checked&&"checked",!!e.disabled&&"disabled",e.edge&&`edge${lt(e.edge)}`],input:["input"]})}),$te=vt($s)(({ownerState:e})=>({padding:9,borderRadius:"50%",...e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},...e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}})),Xte=vt("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),LV=LY.component(function({allProps:t,otherProps:n,props:r}){const i=Hte(),[a,o]=f1({controlled:()=>r.checked??(i==null?void 0:i.checked),default:()=>!!r.defaultChecked,name:"SwitchBase",state:"checked"}),s=Gl(),l=()=>typeof(i==null?void 0:i.disabled)<"u"?i.disabled:s&&typeof r.disabled>"u"?s.disabled:r.disabled;Bt(()=>{i&&i.setDisabled(!!l())});const u=()=>r.type==="checkbox"||r.type==="radio",c=G(t,{get checked(){return a()},get disabled(){return l()}}),h=LY.useClasses(c),f=yi(()=>r.inputRef),d=()=>r.value??(i==null?void 0:i.value);return Bt(()=>{typeof r.defaultChecked=="boolean"&&(f.ref.defaultChecked=r.defaultChecked)}),Bt(()=>{const p=a();typeof p=="boolean"&&(f.ref.checked=p)}),O($te,G(n,{component:"span",get class(){return Ot(h.root,n.class)},centerRipple:!0,get focusRipple(){return!r.disableFocusRipple},get disabled(){return l()},tabIndex:null,role:void 0,onFocus:p=>{var v;typeof n.onFocus=="function"&&n.onFocus(p),(v=s==null?void 0:s.onFocus)==null||v.call(s)},onBlur:p=>{var v;typeof n.onBlur=="function"&&n.onBlur(p),(v=s==null?void 0:s.onBlur)==null||v.call(s)},ownerState:c,get children(){return[O(Xte,G({as:"input",get autofocus(){return r.autoFocus},get class(){return h.input},get disabled(){return l()},get id(){return u()?r.id:void 0},get name(){return r.name??(i==null?void 0:i.name)},onClick:p=>{var g;if(p.defaultPrevented)return;const v=p.currentTarget.checked;p.currentTarget.checked=!v,o(v),typeof r.onChange=="function"?r.onChange(p,v):(g=i==null?void 0:i.onChange)==null||g.call(i,p,v),typeof n.onClick=="function"&&n.onClick(p)},get readOnly(){return r.readOnly},ref:p=>{var v;f(p),r.inputRef||(v=i==null?void 0:i.inputRef)==null||v.call(i,p)},get required(){return r.required},ownerState:c,get tabIndex(){return r.tabIndex},get type(){return r.type},get value(){return d()}},()=>r.inputProps||{})),mt(()=>a()?r.checkedIcon:r.icon),mt(()=>n.children)]}}))});var jte=ee('<svg><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></svg>',!1,!0);const Yte=Ro(()=>jte(),"CheckBox");var qte=ee('<svg><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></svg>',!1,!0);const Kte=Ro(()=>qte(),"CheckBoxOutlineBlank");var Zte=ee('<svg><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"></svg>',!1,!0);const Jte=Ro(()=>Zte(),"IndeterminateCheckBox");function Qte(e){return Zt("MuiCheckbox",e)}const TR=qt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),tee=Pt()({name:"MuiCheckbox",propDefaults:({set:e})=>e({color:"primary",indeterminate:!1,size:"medium",checkedIcon:()=>O(Yte,{}),icon:()=>O(Kte,{}),indeterminateIcon:()=>O(Jte,{})}),selfPropNames:["checked","checkedIcon","classes","color","disableRipple","disabled","icon","id","indeterminate","indeterminateIcon","inputProps","inputRef","onChange","required","size","value"],utilityClass:Qte,slotClasses:e=>({root:["root",e.indeterminate&&"indeterminate",`color${lt(e.color)}`]})}),eee=vt(LV,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,n.color!=="default"&&t[`color${lt(n.color)}`]]}})(({theme:e,ownerState:t})=>({color:e.palette.text.secondary,...!t.disableRipple&&{"&:hover":{backgroundColor:un(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},...t.color!=="default"&&{[`&.${TR.checked}, &.${TR.indeterminate}`]:{color:e.palette[t.color].main},[`&.${TR.disabled}`]:{color:e.palette.action.disabled}}}));tee.component(function({allProps:t,classes:n,props:r}){const i=()=>r.indeterminate?r.indeterminateIcon:r.icon,a=()=>r.indeterminate?r.indeterminateIcon:r.checkedIcon,[,o]=Yt(t,["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"]),s=G(()=>r.classes||{},n);return O(AV.Provider,{value:{get fontSize(){return r.size}},get children(){return O(eee,G({type:"checkbox"},o,{classes:s,get inputProps(){return{"data-indeterminate":r.indeterminate,...r.inputProps||{}}},get icon(){return i()},get checkedIcon(){return a()},ownerState:t}))}})});var nee=ee('<svg><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"></svg>',!1,!0);const ree=Ro(()=>nee(),"Cancel");function iee(e){return Zt("MuiChip",e)}const zn=qt("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),aee=Pt()({name:"MuiChip",propDefaults:({set:e})=>e({color:"default",disabled:!1,size:"medium",variant:"filled"}),selfPropNames:["avatar","children","classes","clickable","color","deleteIcon","disabled","icon","label","onDelete","size","variant"],utilityClass:iee,slotClasses:e=>({root:["root",e.variant,e.disabled&&"disabled",`size${lt(e.size)}`,`color${lt(e.color)}`,!!e.clickable&&"clickable",!!e.clickable&&`clickableColor${lt(e.color)}`,!!e.onDelete&&"deletable",!!e.onDelete&&`deletableColor${lt(e.color)}`,`${e.variant}${lt(e.color)}`],label:["label",`label${lt(e.size)}`],avatar:["avatar",`avatar${lt(e.size)}`,`avatarColor${lt(e.color)}`],icon:["icon",`icon${lt(e.size)}`,`iconColor${lt(e.color)}`],deleteIcon:["deleteIcon",`deleteIcon${lt(e.size)}`,`deleteIconColor${lt(e.color)}`,`deleteIconOutlinedColor${lt(e.color)}`]})}),oee=vt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,clickable:i,onDelete:a,size:o,variant:s}=n;return[{[`& .${zn.avatar}`]:t.avatar},{[`& .${zn.avatar}`]:t[`avatar${lt(o)}`]},{[`& .${zn.avatar}`]:t[`avatarColor${lt(r)}`]},{[`& .${zn.icon}`]:t.icon},{[`& .${zn.icon}`]:t[`icon${lt(o)}`]},{[`& .${zn.icon}`]:t[`iconColor${lt(r)}`]},{[`& .${zn.deleteIcon}`]:t.deleteIcon},{[`& .${zn.deleteIcon}`]:t[`deleteIcon${lt(o)}`]},{[`& .${zn.deleteIcon}`]:t[`deleteIconColor${lt(r)}`]},{[`& .${zn.deleteIcon}`]:t[`deleteIconOutlinedColor${lt(r)}`]},t.root,t[`size${lt(o)}`],t[`color${lt(r)}`],i&&t.clickable,i&&r!=="default"&&t[`clickableColor${lt(r)})`],a&&t.deletable,a&&r!=="default"&&t[`deletableColor${lt(r)}`],t[s],s==="outlined"&&t[`outlined${lt(r)}`]]}})(({theme:e,ownerState:t})=>{const n=un(e.palette.text.primary,.26);return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.text.primary,backgroundColor:e.palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${zn.disabled}`]:{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"},[`& .${zn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)},[`& .${zn.avatarColorPrimary}`]:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark},[`& .${zn.avatarColorSecondary}`]:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark},[`& .${zn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${zn.icon}`]:{color:e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6,...t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},...t.color!=="default"&&{color:"inherit"}},"--xxxxx":`& .${zn.deleteIcon}`,[`& .${zn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:un(n,.4)},...t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},...t.color!=="default"&&{color:un(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:e.palette[t.color].contrastText}}},...t.size==="small"&&{height:24},...t.color!=="default"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},...t.onDelete&&{[`&.${zn.focusVisible}`]:{backgroundColor:un(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},...t.onDelete&&t.color!=="default"&&{[`&.${zn.focusVisible}`]:{backgroundColor:e.palette[t.color].dark}}}},({theme:e,ownerState:t})=>({...t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:un(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${zn.focusVisible}`]:{backgroundColor:un(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:e.shadows[1]}},...t.clickable&&t.color!=="default"&&{[`&:hover, &.${zn.focusVisible}`]:{backgroundColor:e.palette[t.color].dark}}}),({theme:e,ownerState:t})=>({...t.variant==="outlined"&&{backgroundColor:"transparent",border:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${zn.clickable}:hover`]:{backgroundColor:e.palette.action.hover},[`&.${zn.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`& .${zn.avatar}`]:{marginLeft:4},[`& .${zn.avatarSmall}`]:{marginLeft:2},[`& .${zn.icon}`]:{marginLeft:4},[`& .${zn.iconSmall}`]:{marginLeft:2},[`& .${zn.deleteIcon}`]:{marginRight:5},[`& .${zn.deleteIconSmall}`]:{marginRight:3}},...t.variant==="outlined"&&t.color!=="default"&&{color:e.palette[t.color].main,border:`1px solid ${un(e.palette[t.color].main,.7)}`,[`&.${zn.clickable}:hover`]:{backgroundColor:un(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${zn.focusVisible}`]:{backgroundColor:un(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${zn.deleteIcon}`]:{color:un(e.palette[t.color].main,.7),"&:hover, &:active":{color:e.palette[t.color].main}}}})),see=vt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${lt(r)}`]]}})(({ownerState:e})=>({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",...e.size==="small"&&{paddingLeft:8,paddingRight:8}}));function PY(e){return e.key==="Backspace"||e.key==="Delete"}aee.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=ic(r),o=x=>{var S;x.stopPropagation(),(S=i.onDelete)==null||S.call(i)},s=x=>{x.currentTarget===x.target&&PY(x)&&x.preventDefault(),typeof r.onKeyDown=="function"&&r.onKeyDown(x)},l=x=>{x.currentTarget===x.target&&(i.onDelete&&PY(x)?i.onDelete():x.key==="Escape"&&a.ref&&a.ref.blur()),typeof r.onKeyUp=="function"&&r.onKeyUp(x)},u=()=>i.clickable!==!1&&r.onClick?!0:!!i.clickable,c=()=>u()||i.onDelete?$s:r.component||"div",h=mt(()=>c()===$s?{component:r.component||"div",...i.onDelete&&{disableRipple:!0}}:{}),f=Er(()=>i.deleteIcon),d=Er(()=>i.avatar),p=Er(()=>i.icon),v=()=>(pr(()=>{const x=f();LT(x)&&pR(x,n.deleteIcon)}),ki(()=>{const x=f();(x instanceof SVGElement||x instanceof HTMLElement)&&(x.onclick=o)}),O(Xe,{get when(){return i.onDelete},get children(){return O(Xe,{get when(){return LT(f())},get fallback(){return O(ree,{get class(){return n.deleteIcon},onClick:o})},get children(){return f()}})}})),g=()=>(pr(()=>{const x=d();LT(x)&&pR(x,n.avatar)}),mt(d)),m=()=>(pr(()=>{const x=p();LT(x)&&pR(x,n.icon)}),mt(p));Bt(()=>{});const _=dS(oee,"input","div");return O(_,G({get as(){return c()},get class(){return Ot(n.root,r.class)},get disabled(){return u()&&i.disabled?!0:void 0},get onClick(){return r.onClick},onKeyDown:s,onKeyUp:l,ref:a,ownerState:{get color(){return i.color},get disabled(){return i.disabled},get size(){return i.size},get variant(){return i.variant},get onDelete(){return!!i.onDelete},get clickable(){return u()}}},h,r,{get children(){return[O(Xe,{get when(){return d()},get fallback(){return O(m,{})},get children(){return O(g,{})}}),O(see,{get class(){return Ot(n.label)},ownerState:t,get children(){return i.label}}),O(v,{})]}}))});function lee(e){return Zt("MuiCircularProgress",e)}qt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const uee=Pt()({name:"MuiCircularProgress",propDefaults:({set:e})=>e({color:"primary",disableShrink:!1,size:40,thickness:3.6,value:0,variant:"indeterminate"}),selfPropNames:["classes","color","disableShrink","size","thickness","value","variant"],utilityClass:lee,slotClasses:e=>({root:["root",e.variant,`color${lt(e.color)}`],svg:["svg"],circle:["circle",`circle${lt(e.variant)}`,e.disableShrink&&"circleDisableShrink"]})}),rf=44,GC=I2(),cee=vt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${lt(n.color)}`]]}})(({ownerState:e,theme:t})=>({width:e.size,height:e.size,...e.variant==="determinate"&&{transform:"rotate(-90deg)"},display:"inline-block",...e.variant==="determinate"&&{transition:t.transitions.create("transform")},...e.color!=="inherit"&&{color:t.palette[e.color].main}}),({ownerState:e})=>e.variant==="indeterminate"&&{[`@keyframes circular-rotate-${GC}`]:{0:{transform:"rotate(0deg)"},100:{transform:"rotate(360deg)"}},animation:`circular-rotate-${GC} 1.4s linear infinite`}),hee=vt("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),fee=vt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${lt(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>({stroke:"currentColor",...e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},...e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&{[`@keyframes circular-dash-${GC}`]:{0:{strokeDasharray:"1px, 200px",strokeDashoffset:0},50:{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},100:{strokeDasharray:"100px, 200px",strokeDashoffset:"-125px"}},animation:`circular-dash-${GC} 1.4s ease-in-out infinite`}),dee=uee.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=()=>{if(i.variant!=="determinate")return{};const s=2*Math.PI*((rf-i.thickness)/2);return{strokeDasharray:s.toFixed(3),strokeDashoffset:`${((100-i.value)/100*s).toFixed(3)}px`}};return O(cee,G({get class(){return Ot(n.root,r.class)},ownerState:t,role:"progressbar"},()=>i.variant!=="determinate"?{}:{"aria-valuenow":Math.round(i.value)},r,{get children(){return O(hee,{get class(){return n.svg},ownerState:t,viewBox:`${rf/2} ${rf/2} ${rf} ${rf}`,get children(){return O(fee,{get class(){return n.circle},get sx(){return a()},ownerState:t,cx:rf,cy:rf,get r(){return(rf-i.thickness)/2},fill:"none",get"stroke-width"(){return i.thickness}})}})}}))});function pee(e){return Zt("MuiContainer",e)}qt("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);const vee=Pt()({name:"MuiContainer",selfPropNames:["children","classes","disableGutters","fixed","maxWidth"],propDefaults:({set:e})=>e({component:"div",disableGutters:!1,fixed:!1,maxWidth:"lg"}),utilityClass:pee,slotClasses:e=>({root:["root",e.maxWidth&&`maxWidth${lt(String(e.maxWidth))}`,e.fixed&&"fixed",e.disableGutters&&"disableGutters"]})}),gee=vt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${lt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}})(({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((n,r)=>{const i=e.breakpoints.values[r];return i!==0&&(n[e.breakpoints.up(r)]={maxWidth:`${i}${e.breakpoints.unit}`}),n},{}),({theme:e,ownerState:t})=>({...t.maxWidth==="xs"&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&t.maxWidth!=="xs"&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}));vee.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(gee,G(r,{get as(){return r.component},ownerState:t,get class(){return Ot(n.root,r.class)},get children(){return i.children}}))});const mee=Pt()({name:"MuiGlobalStyles",selfPropNames:["styles"]}),$ct=mee.component(function({props:t}){return wct(()=>({"@global":t.styles||{}})),[]}),yee=Pt()({name:"MuiCssBaseline",selfPropNames:["children","enableColorScheme"],propDefaults:({set:e})=>e({enableColorScheme:!1})}),_ee=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&{colorScheme:e.palette.mode}}),xee=e=>({color:e.palette.text.primary,...e.typography.body1,backgroundColor:e.palette.background.default,"@media print":{backgroundColor:e.palette.common.white}}),bee=(e,t=!1)=>({html:_ee(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...xee(e),"&::backdrop":{backgroundColor:e.palette.background.default}}});yee.component(function({props:t}){const n=$i();return O($ct,{get styles(){return bee(n,t.enableColorScheme)}})});function Xct(e){const t=()=>e.container??document.body;return O(Xe,{get when(){return!e.disablePortal},get fallback(){return e.children},get children(){return O(Iq,{get mount(){return t()},get children(){return e.children}})}})}function See(e){const t=qu(e);return t.body===e?dh(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Zx(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function RY(e){return parseInt(dh(e).getComputedStyle(e).paddingRight,10)||0}function OY(e,t,n=[],r){const i=[t,...n],a=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(e.children,o=>{i.indexOf(o)===-1&&a.indexOf(o.tagName)===-1&&Zx(o,r)})}function MR(e,t){let n=-1;return e.some((r,i)=>t(r)?(n=i,!0):!1),n}function wee(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(See(r)){const l=YZt(qu(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${RY(r)+l}px`;const u=qu(r).querySelectorAll(".mui-fixed");[].forEach.call(u,c=>{n.push({value:c.style.paddingRight,property:"padding-right",el:c}),c.style.paddingRight=`${RY(c)+l}px`})}const a=r.parentElement,o=dh(r),s=(a==null?void 0:a.nodeName)==="HTML"&&o.getComputedStyle(a).overflowY==="scroll"?a:r;n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:a,el:o,property:s})=>{a?o.style.setProperty(s,a):o.style.removeProperty(s)})}}function Tee(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class Mee{constructor(){_i(this,"containers");_i(this,"modals");this.modals=[],this.containers=[]}add(t,n){let r=this.modals.findIndex(o=>o.ref===t.ref);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),Zx(t.ref,!1);const i=Tee(n);OY(n,t.ref,i,!0);const a=MR(this.containers,o=>o.container===n);return a!==-1?(this.containers[a].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),r)}mount(t,n){const r=MR(this.containers,a=>!!a.modals.find(o=>o.ref===t.ref)),i=this.containers[r];i.restore||(i.restore=wee(i,n))}remove(t){const n=this.modals.findIndex(a=>a.ref===t.ref);if(n===-1)return n;const r=MR(this.containers,a=>!!a.modals.find(o=>o.ref===t.ref)),i=this.containers[r];if(i.modals.splice(i.modals.findIndex(a=>a.ref===t.ref),1),this.modals.splice(n,1),i.modals.length===0)i.restore&&i.restore(),Zx(t.ref,!0),OY(i.container,t.ref,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const a=i.modals[i.modals.length-1];Zx(a.ref,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1].ref===t.ref}}function Aee(e){return Zt("MuiModal",e)}qt("MuiModal",["root","hidden"]);const Cee=Pt()({name:"ModalUnstyled",propDefaults:({set:e})=>e({closeAfterTransition:!1,component:"div",components:{},componentsProps:{},disableAutoFocus:!1,disableEnforceFocus:!1,disableEscapeKeyDown:!1,disablePortal:!1,disableRestoreFocus:!1,disableScrollLock:!1,hideBackdrop:!1,keepMounted:!1,open:!1}),selfPropNames:["BackdropComponent","BackdropProps","children","classes","closeAfterTransition","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","open","transition"],utilityClass:Aee,slotClasses:e=>({root:["root",!e.open&&e.exited&&"hidden"]})});function Eee(e){return typeof e=="function"?e():e}const Dee=new Mee,Iee=Cee.component(function({allProps:t,otherProps:n,classes:r,props:i}){const a=ic(n),o=Dee,s=()=>qu(a.ref),[l,u]=rt(!0),c=()=>{o.mount(a,{disableScrollLock:i.disableScrollLock}),a.ref.scrollTop=0},h=()=>{const y=Eee(i.container)||s().body;o.add(a,y),a.ref&&c()},f=()=>o.isTopModal(a),d=()=>o.remove(a);Pe(d),Bt(y=>(y?(i.open&&h(),i.open&&f()?c():a.ref&&Zx(a.ref,!0)):i.open?h():(!i.transition||!i.closeAfterTransition)&&d(),!1),!0);const p=y=>{var x,S;y.target===y.currentTarget&&((x=i.onBackdropClick)==null||x.call(i,y),(S=i.onClose)==null||S.call(i,y,"backdropClick"))},v=y=>{var x,S;typeof n.onKeyDown=="function"&&((x=n.onKeyDown)==null||x.call(n,y)),!(y.key!=="Escape"||!f())&&(i.disableEscapeKeyDown||(y.stopPropagation(),(S=i.onClose)==null||S.call(i,y,"escapeKeyDown")))},g=()=>i.components.Root||n.component,m=()=>i.componentsProps.root||{},_=()=>!i.keepMounted&&!i.open&&(!i.transition||l());return O(R2.Provider,{value:{get in(){return!!i.transition&&i.open},onEnter:()=>{i.transition&&u(!1)},onExited:()=>{i.transition&&(u(!0),i.closeAfterTransition&&d())}},get children(){return O(Xe,{get when(){return!_()},get children(){return O(Xct,{get container(){return i.container},get disablePortal(){return i.disablePortal},get children(){return O(ry,G(n,{get component(){return g()},role:"presentation"},m,()=>!ph(g())&&{ownerState:t},{onKeyDown:v,get class(){return Ot(r.root,m().class,n.class)},ref:a,get children(){return[O(Xe,{get when(){return!i.hideBackdrop&&!!i.BackdropComponent},get children(){return O(ry,G({get component(){return i.BackdropComponent},get open(){return i.open},onClick:p},()=>i.BackdropProps??{}))}}),mt(()=>i.children)]}}))}})}})}})}),NY=Pt()({name:"MuiModal",selfPropNames:["BackdropComponent","BackdropProps"]}),Lee=vt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>({position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0,...!t.open&&t.exited&&{visibility:"hidden"}})),Pee=vt(zct,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),PV=NY.defineComponent(function(t){const n=NY.useThemeProps({props:t}),[,r]=Yt(n,["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"]),i=G({BackdropComponent:Pee,closeAfterTransition:!1,components:{},componentsProps:{},disableAutoFocus:!1,disableEnforceFocus:!1,disableEscapeKeyDown:!1,disablePortal:!1,disableRestoreFocus:!1,disableScrollLock:!1,hideBackdrop:!1,keepMounted:!1},n),[a]=rt(!0),o={get closeAfterTransition(){return i.closeAfterTransition},get disableAutoFocus(){return i.disableAutoFocus},get disableEnforceFocus(){return i.disableEnforceFocus},get disableEscapeKeyDown(){return i.disableEscapeKeyDown},get disablePortal(){return i.disablePortal},get disableRestoreFocus(){return i.disableRestoreFocus},get disableScrollLock(){return i.disableScrollLock},get hideBackdrop(){return i.hideBackdrop},get keepMounted(){return i.keepMounted}},s=G(n,o,{get exited(){return a()}});return O(Iee,G({get components(){return G({Root:Lee},()=>i.components)},componentsProps:{get root(){return G(()=>i.componentsProps.root||{},()=>(!i.components.Root||!ph(i.components.Root))&&{get ownerState(){var l;return((l=i.componentsProps.root)==null?void 0:l.ownerState)||{}}}||{})}},get BackdropComponent(){return i.BackdropComponent}},r,{get classes(){return s.classes}},o,{get children(){return n.children}}))}),jct=hr({});function Ree(e){return Zt("MuiDialog",e)}const AR=qt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),CR=Pt()({name:"MuiDialog",selfPropNames:["aria-describedby","aria-labelledby","children","classes","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],utilityClass:Ree,slotClasses:e=>({root:["root"],container:["container",`scroll${lt(e.scroll)}`],paper:["paper",`paperScroll${lt(e.scroll)}`,`paperWidth${lt(String(e.maxWidth))}`,e.fullWidth&&"paperFullWidth",e.fullScreen&&"paperFullScreen"]})}),Oee=vt(zct,{name:"MuiDialog",slot:"Backdrop"})({zIndex:-1}),Nee=vt(PV,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Bee=vt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${lt(n.scroll)}`]]}})(({ownerState:e})=>({height:"100%","@media print":{height:"auto"},outline:0,...e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},...e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}})),kee=vt(Lh,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${lt(n.scroll)}`],t[`paperWidth${lt(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},...t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},...t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},...!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},...t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${AR.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},...t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${AR.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},...t.fullWidth&&{width:"calc(100% - 64px)"},...t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${AR.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}));CR.defineComponent(function(t){const n=yi(t),r=CR.useThemeProps({props:t}),i=$i(),a={get enter(){return i.transitions.duration.enteringScreen},get exit(){return i.transitions.duration.leavingScreen}},[,o]=Yt(r,["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","class","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"]),s=G({disableEscapeKeyDown:!1,fullScreen:!1,fullWidth:!1,maxWidth:"sm",PaperComponent:Lh,PaperProps:{},scroll:"paper",TransitionComponent:Fct,transitionDuration:a},r),l=s,u=CR.useClasses(l);let c=null;const h=v=>{c=v.target===v.currentTarget},f=v=>{c&&(c=null,r.onBackdropClick&&r.onBackdropClick(v),r.onClose&&r.onClose(v,"backdropClick"))},d=xV(()=>r["aria-labelledby"]),p={get titleId(){return d()}};return O(Nee,G({get class(){return Ot(u.root,r.class)},get BackdropProps(){return G({get transitionDuration(){return s.transitionDuration},get as(){return r.BackdropComponent}},()=>r.BackdropProps)},closeAfterTransition:!0,BackdropComponent:Oee,get disableEscapeKeyDown(){return s.disableEscapeKeyDown},get onClose(){return r.onClose},get open(){return r.open},ref:n,onClick:f,ownerState:l},o,{get children(){return O(s.TransitionComponent,G({appear:!0,get in(){return r.open},get timeout(){return s.transitionDuration}},()=>r.TransitionProps,{get children(){return O(Bee,{get class(){return Ot(u.container)},onMouseDown:h,ownerState:l,get children(){return O(kee,G({get component(){return s.PaperComponent},elevation:24,role:"dialog",get"aria-describedby"(){return r["aria-describedby"]},get"aria-labelledby"(){return d()}},()=>s.PaperProps,{get class(){return Ot(u.paper,s.PaperProps.class)},ownerState:l,get children(){return O(jct.Provider,{value:p,get children(){return r.children}})}}))}})}}))}}))});function Fee(e){return Zt("MuiDialogActions",e)}qt("MuiDialogActions",["root","spacing"]);const ER=Pt()({name:"MuiDialogActions",selfPropNames:["children","classes","disableSpacing"],utilityClass:Fee,slotClasses:e=>({root:["root",!e.disableSpacing&&"spacing"]})}),zee=vt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",...!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}}}));ER.defineComponent(function(t){const n=ER.useThemeProps({props:t}),[,r]=Yt(n,["class","disableSpacing"]),a=G({disableSpacing:!1},n),o=ER.useClasses(a);return O(zee,G({get class(){return Ot(o.root,n.class)},ownerState:a},r))});function Uee(e){return Zt("MuiDialogTitle",e)}const Vee=qt("MuiDialogTitle",["root"]);function Gee(e){return Zt("MuiDialogContent",e)}qt("MuiDialogContent",["root","dividers"]);const DR=Pt()({name:"MuiDialogContent",selfPropNames:["children","classes","dividers"],utilityClass:Gee,slotClasses:e=>({root:["root",e.dividers&&"dividers"]})}),Hee=vt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",...t.dividers?{padding:"16px 24px",borderTop:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`}:{[`.${Vee.root} + &`]:{paddingTop:0}}}));DR.defineComponent(function(t){const n=DR.useThemeProps({props:t}),[,r]=Yt(n,["class","dividers"]),i=G({dividers:!1},n),a=G(n,{get dividers(){return i.dividers}}),o=DR.useClasses(a);return O(Hee,G({get class(){return Ot(o.root,n.class)},ownerState:a},r))});function Wee(e){return Zt("MuiDialogContentText",e)}qt("MuiDialogContentText",["root"]);const IR=Pt()({name:"MuiDialogContentText",selfPropNames:["classes"],utilityClass:Wee,slotClasses:()=>({root:["root"]})}),$ee=vt(Sa,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({});IR.defineComponent(function(t){const n=yi(t),r=IR.useThemeProps({props:t}),[,i]=Yt(r,["children"]),a=IR.useClasses(i);return O($ee,G({variant:"body1",color:"text.secondary",ref:n,ownerState:i},r,{get component(){return r.component??"p"},classes:a}))});const LR=Pt()({name:"MuiDialogTitle",selfPropNames:["children","classes"],utilityClass:Uee,slotClasses:()=>({root:["root"]})}),Xee=vt(Sa,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"});LR.defineComponent(function(t){const n=LR.useThemeProps({props:t}),[,r]=Yt(n,["class","id"]),i=n,a=LR.useClasses(i),o=Ln(jct),s=()=>o.titleId??n.id;return O(Xee,G({get class(){return Ot(a.root,n.class)},ownerState:i,variant:"h6",get id(){return s()}},r,{get component(){return n.component??"h2"}}))});function jee(e){return Zt("MuiDivider",e)}const BY=qt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Yee=Pt()({name:"MuiDivider",selfPropNames:["absolute","children","classes","flexItem","light","orientation","textAlign","variant"],propDefaults:({set:e,inProps:t})=>e({absolute:!1,get component(){return t.children?"div":"hr"},flexItem:!1,light:!1,orientation:"horizontal",get role(){return t.component!=="hr"?"separator":void 0},textAlign:"center",variant:"fullWidth"}),utilityClass:jee,slotClasses:e=>({root:["root",e.absolute&&"absolute",e.variant,e.light&&"light",e.orientation==="vertical"&&"vertical",e.flexItem&&"flexItem",!!e.children&&"withChildren",!!e.children&&e.orientation==="vertical"&&"withChildrenVertical",e.textAlign==="right"&&e.orientation!=="vertical"&&"textAlignRight",e.textAlign==="left"&&e.orientation!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",e.orientation==="vertical"&&"wrapperVertical"]})}),qee=vt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:e.palette.divider,borderBottomWidth:"thin",...t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},...t.light&&{borderColor:un(e.palette.divider,.08)},...t.variant==="inset"&&{marginLeft:72},...t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},...t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},...t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},...t.flexItem&&{alignSelf:"stretch",height:"auto"}}),({theme:e,ownerState:t})=>({...t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${e.palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}}),({theme:e,ownerState:t})=>({...t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${e.palette.divider}`,transform:"translateX(0%)"}}}),({ownerState:e})=>({...e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},...e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}}})),Kee=vt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,...t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}));Yee.component(function({allProps:t,otherProps:n,classes:r}){const i=dS(qee,"div","hr");return O(i,G({get role(){return t.role},get as(){return n.component}},n,{ownerState:t,get class(){return Ot(r.root,t.class)},get children(){return O(Xe,{get when(){return t.children},children:a=>O(Kee,{get class(){return r.wrapper},ownerState:t,get children(){return a()}})})}}))});const Zee=Pt()({name:"MuiSlide",selfPropNames:["appear","children","container","direction","easing","in","timeout"],propDefaults:({set:e})=>{const t=$i();return e({appear:!0,direction:"down",get easing(){return{enter:t.transitions.easing.easeOut,exit:t.transitions.easing.sharp}},get timeout(){return{enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen}}})}});function Jee(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),a=dh(t),o=a.getComputedStyle(t),s=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform");let l=0,u=0;if(s&&s!=="none"&&typeof s=="string"){const c=s.split("(")[1].split(")")[0].split(",");l=parseInt(c[4],10),u=parseInt(c[5],10)}return e==="left"?i?`translateX(${i.right+l-r.left}px)`:`translateX(${a.innerWidth+l-r.left}px)`:e==="right"?i?`translateX(-${r.right-i.left-l}px)`:`translateX(-${r.left+r.width-l}px)`:e==="up"?i?`translateY(${i.bottom+u-r.top}px)`:`translateY(${a.innerHeight+u-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-u}px)`:`translateY(-${r.top+r.height-u}px)`}function Qee(e){return typeof e=="function"?e():e}function RT(e,t,n){const r=Qee(n),i=Jee(e,t,r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const tne=Zee.component(function({props:t,otherProps:n}){const r=$i(),i=Er(()=>t.children),a=Ln(R2);let o=[];return Bt(s=>{if(s&&(o=o.filter(c=>c!==s),s()),t.in||RT(t.direction,i(),t.container),t.in||t.direction==="down"||t.direction==="right")return;const l=bV(()=>{RT(t.direction,i(),t.container)}),u=dh(i());return u.addEventListener("resize",l),()=>{l.clear(),u.removeEventListener("resize",l)}}),Pe(()=>{for(const s of o)s()}),O(EV,G({get in(){return t.in},get appear(){return t.appear},get timeout(){return t.timeout}},n,{onEnter:()=>{var l,u;const s=i();RT(t.direction,s,t.container),CV(s),(l=n.onEnter)==null||l.call(n),(u=a==null?void 0:a.onEnter)==null||u.call(a)},onEntering:()=>{const s=i(),l=Wy({timeout:t.timeout,style:{},easing:t.easing},{mode:"enter"});s.style.webkitTransition=r.transitions.create("-webkit-transform",{...l}),s.style.transition=r.transitions.create("transform",{...l}),s.style.webkitTransform="none",s.style.transform="none"},onExit:()=>{var u;const s=i(),l=Wy({timeout:t.timeout,style:{},easing:t.easing},{mode:"exit"});s.style.webkitTransition=r.transitions.create("-webkit-transform",l),s.style.transition=r.transitions.create("transform",l),RT(t.direction,s,t.container),(u=n.onExit)==null||u.call(n)},onExited:()=>{var l,u;const s=i();s.style.webkitTransition="",s.style.transition="",(l=n.onExited)==null||l.call(n),(u=a==null?void 0:a.onExited)==null||u.call(a)},children:s=>{const l=i();return s==="exited"&&!t.in?l.style.visibility="hidden":l.style.removeProperty("visibility"),l}}))});function ene(e){return Zt("MuiDrawer",e)}qt("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const nne=Pt()({name:"MuiDrawer",selfPropNames:["ModalProps","PaperProps","anchor","children","classes","elevation","onClose","open","transitionDuration","variant"],utilityClass:ene,slotClasses:e=>({root:["root"],docked:[(e.variant==="permanent"||e.variant==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${lt(e.anchor)}`,e.variant!=="temporary"&&`paperAnchorDocked${lt(e.anchor)}`]}),propDefaults:({set:e})=>{const t=$i();return e({component:"div",anchor:"left",elevation:16,hideBackdrop:!1,ModalProps:{},open:!1,PaperProps:{},get transitionDuration(){return{enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen}},variant:"temporary"})}}),rne=vt(PV,{name:"MuiDrawer",slot:"Root"})(({theme:e})=>({zIndex:e.zIndex.drawer})),kY=vt("div",{skipProps:Po,name:"MuiDrawer",slot:"Docked"})({flex:"0 0 auto"}),ine=vt(Lh,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${lt(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${lt(n.anchor)}`]]}})(({theme:e,ownerState:t})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,...t.anchor==="left"&&{left:0},...t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},...t.anchor==="right"&&{right:0},...t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},...t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${e.palette.divider}`},...t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${e.palette.divider}`},...t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${e.palette.divider}`},...t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${e.palette.divider}`}})),Yct={left:"right",right:"left",top:"down",bottom:"up"};function ane(e){return["left","right"].indexOf(e)!==-1}function one(e,t){return e.direction==="rtl"&&ane(t)?Yct[t]:t}nne.component(function({allProps:t,props:n,otherProps:r,classes:i}){const[a,o]=rt(!1),s=ic(r),l=$i(),u=Er(()=>n.children);ki(()=>o(!0));function c(){return O(ine,G({get elevation(){return n.variant==="temporary"?n.elevation:0},square:!0},()=>n.PaperProps,{get class(){return Ot(i.paper,n.PaperProps.class)},ownerState:t,get children(){return u()}}))}function h(){const f=one(l,n.anchor);return O(tne,G({get in(){return n.open},get direction(){return Yct[f]},get timeout(){return n.transitionDuration},get appear(){return a()}},()=>n.SlideProps??{},{get children(){return O(c,{})}}))}return O(Cq,{get children(){return[O(Mx,{get when(){return n.variant==="permanent"},get children(){return O(kY,G(r,{get class(){return Ot(i.root,i.docked,r.class)},ownerState:t,ref:s,get children(){return O(c,{})}}))}}),O(Mx,{get when(){return n.variant==="persistent"},get children(){return O(kY,G(r,{get class(){return Ot(i.root,i.docked,r.class)},ownerState:t,ref:s,get children(){return O(h,{})}}))}}),mt(()=>O(Mx,{get when(){return n.variant==="temporary"},get children(){return O(rne,G({get BackdropProps(){return{...r.BackdropProps??{},...n.ModalProps.BackdropProps??{},transitionDuration:n.transitionDuration}},get class(){return Ot(i.root,i.modal,r.class)},get open(){return n.open},ownerState:t,get onClose(){return n.onClose},get hideBackdrop(){return r.hideBackdrop},ref:s},r??{},()=>n.ModalProps??{},{transition:!0,get children(){return O(h,{})}}))}}))]}})});function sne(e){return Zt("MuiFab",e)}const FY=qt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),PR=Pt()({name:"MuiFab",selfPropNames:["children","classes","color","disabled","disableFocusRipple","disableRipple","href","size","variant"],utilityClass:sne,slotClasses:e=>({root:["root",e.variant,`size${lt(e.size)}`,e.color==="inherit"?"colorInherit":e.color]})}),lne=vt($s,{name:"MuiFab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${lt(n.size)}`],n.color==="inherit"&&t.colorInherit,t[lt(n.size)],t[n.color]]}})(({theme:e,ownerState:t})=>({...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},textDecoration:"none"},[`&.${FY.focusVisible}`]:{boxShadow:e.shadows[6]},[`&.${FY.disabled}`]:{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground},...t.size==="small"&&{width:40,height:40},...t.size==="medium"&&{width:48,height:48},...t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},...t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},...t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},...t.color==="inherit"&&{color:"inherit"}}),({theme:e,ownerState:t})=>({...t.color!=="inherit"&&t.color!=="default"&&e.palette[t.color]!=null&&{color:e.palette[t.color].contrastText,backgroundColor:e.palette[t.color].main,"&:hover":{backgroundColor:e.palette[t.color].dark,"@media (hover: none)":{backgroundColor:e.palette[t.color].main}}}}));PR.defineComponent(function(t){const n=PR.useThemeProps({props:t}),[,r]=Yt(n,["children","class","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"]),i=G({color:"default",component:"button",disabled:!1,disableFocusRipple:!1,size:"large",variant:"circular"},n),a=G(n,{get color(){return i.color},get component(){return i.component},get disabled(){return i.disabled},get disableFocusRipple(){return i.disableFocusRipple},get size(){return i.size},get variant(){return i.variant}}),o=PR.useClasses(a);return O(lne,G({get class(){return Ot(o.root,n.class)},get component(){return i.component},get disabled(){return i.disabled},get focusRipple(){return!i.disableFocusRipple},get focusVisibleClassName(){return Ot(n.focusVisibleClassName)},ownerState:a},r,{get children(){return n.children}}))});function Ph(e){const t=()=>e.states.reduce((r,i)=>(r[i]=e.props[i],e.muiFormControl&&typeof e.props[i]>"u"&&(r[i]=e.muiFormControl[i]),r),{}),n=p2({});return mB(()=>{const r=t();li(()=>{for(const a in r)n[a]!==r[a]&&(n[a]=r[a]);const i=Object.keys(r);for(const a in n)i.includes(a)||delete n[a]})}),n}function une(e){return Zt("MuiInputBase",e)}const $y=qt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);function zY(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function qct(e,t=!1){return e&&(zY(e.value)&&e.value!==""||t&&zY(e.defaultValue)&&e.defaultValue!=="")}function cne(e){let t;Pe(()=>t==null?void 0:t()),Bt(n=>(n&&(t=void 0,n==null||n()),t=e()))}var hne=ee("<textarea>"),fne=ee("<textarea aria-hidden readonly tabindex=-1>");const dne=Pt()({name:"MuiTextareaAutosize",selfPropNames:["ref","maxRows","minRows"]});function OT(e,t){return parseInt(e[t],10)||0}const pne={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},vne=dne.defineComponent(function(e){const t=yi(e),[,n]=Yt(e,["maxRows","minRows","style","value"]),r=G({minRows:1},e);let i;const a={current:0},[o,s]=rt({}),l=()=>{const h=t.current,d=dh(h).getComputedStyle(h);if(d.width==="0px")return;i.style.width=d.width,i.value=h.value||e.placeholder||"x",i.value.slice(-1)===`
`&&(i.value+=" ");const p=d.boxSizing,v=OT(d,"paddingBottom")+OT(d,"paddingTop"),g=OT(d,"borderBottomWidth")+OT(d,"borderTopWidth"),m=i.scrollHeight;i.value="x";const _=i.scrollHeight;let y=m;r.minRows&&(y=Math.max(Number(r.minRows)*_,y)),e.maxRows&&(y=Math.min(Number(e.maxRows)*_,y)),y=Math.max(y,_);const x=y+(p==="border-box"?v+g:0),S=Math.abs(y-m)<=1;s(b=>a.current<20&&(x>0&&Math.abs((b.outerHeightStyle||0)-x)>1||b.overflow!==S)?(a.current+=1,{overflow:S,outerHeightStyle:x}):b)};cne(()=>{l();const h=bV(()=>{a.current=0,l()}),f=dh(t.current);f.addEventListener("resize",h);let d;return typeof ResizeObserver<"u"&&(d=new ResizeObserver(h),d.observe(t.current)),()=>{h.clear(),f.removeEventListener("resize",h),d&&d.disconnect()}}),Bt(la(()=>[e.value],()=>{a.current=0,l()}));const u=G({get height(){return`${o().outerHeightStyle}px`},get overflow(){return o().overflow?"hidden":null}},()=>e.style),c=G(pne.shadow,()=>e.style,{padding:0});return[(()=>{var h=hne();return ny(t,h),Bv(h,G({get rows(){return r.minRows}},n),!1,!1),pr(f=>ey(h,u,f)),h})(),(()=>{var h=fne(),f=i;return typeof f=="function"?ny(f,h):i=h,pr(d=>{var p=e.class,v=c;return p!==d.e&&YC(h,d.e=p),d.t=ey(h,v,d.t),d},{e:void 0,t:void 0}),h})()]},!1),UY=Pt()({name:"MuiInputBase",propDefaults:({set:e})=>e({components:{},componentsProps:{},fullWidth:!1,inputComponent:"input",inputProps:{},multiline:!1,type:"text",disableInjectingGlobalStyles:!1}),selfPropNames:["aria-describedby","autoComplete","autoFocus","classes","color","components","componentsProps","defaultValue","disableInjectingGlobalStyles","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","required","rows","size","startAdornment","type","value"],utilityClass:une,autoCallUseClasses:!1,slotClasses:e=>({root:["root",`color${lt(e.color)}`,!!e.disabled&&"disabled",!!e.error&&"error",!!e.fullWidth&&"fullWidth",e.focused&&"focused",!!e.formControl&&"formControl",e.size==="small"&&"sizeSmall",e.multiline&&"multiline",!!e.startAdornment&&"adornedStart",!!e.endAdornment&&"adornedEnd",!!e.hiddenLabel&&"hiddenLabel"],input:["input",!!e.disabled&&"disabled",e.type==="search"&&"inputTypeSearch",e.multiline&&"inputMultiline",e.size==="small"&&"inputSizeSmall",!!e.hiddenLabel&&"inputHiddenLabel",!!e.startAdornment&&"inputAdornedStart",!!e.endAdornment&&"inputAdornedEnd"]})}),N2=(e,t)=>{const n=e.ownerState;return[t.root,!!n.formControl&&t.formControl,!!n.startAdornment&&t.adornedStart,!!n.endAdornment&&t.adornedEnd,!!n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${lt(n.color)}`],!!n.fullWidth&&t.fullWidth,!!n.hiddenLabel&&t.hiddenLabel]},B2=(e,t)=>{const n=e.ownerState;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,!!n.startAdornment&&t.inputAdornedStart,!!n.endAdornment&&t.inputAdornedEnd,!!n.hiddenLabel&&t.inputHiddenLabel]},k2=vt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:N2})(({theme:e,ownerState:t})=>({...e.typography.body1,color:e.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${$y.disabled}`]:{color:e.palette.text.disabled,cursor:"default"},...t.multiline&&{padding:"4px 0 5px",...t.size==="small"&&{paddingTop:1}},...t.fullWidth&&{width:"100%"}})),F2=vt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:B2})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r={color:"currentColor",opacity:n?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},a={opacity:n?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${$y.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${$y.disabled}`]:{opacity:1,WebkitTextFillColor:e.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"},...t.size==="small"&&{paddingTop:1},...t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},...t.type==="search"&&{MozAppearance:"textfield"}}}),gne=()=>O($ct,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),mne=new Set(["text","search","password","tel","url"]),RV=UY.component(function({allProps:t,otherProps:n,props:r}){const i=()=>r.inputProps.value!=null?r.inputProps.value:r.value,a=(i()??null)!==null,o=()=>f.ref.type==="date"||f.ref.type==="number",s=()=>f.ref.nodeName==="TEXTAREA"||!f.ref.type||mne.has(f.ref.type),[l,u]=f1({controlled:()=>i(),default:()=>r.defaultValue,name:"InputBase"}),c=l(),h=()=>typeof A()=="string"?c:l(),f=yi({ref:k=>{typeof r.inputRef=="function"&&r.inputRef(k)}});let d,p=!1;ki(()=>{const k=f.ref instanceof HTMLElement;a&&k&&f.ref.addEventListener("blur",()=>{o()&&f.ref.setAttribute("value",l()??"")}),f.ref.addEventListener("input",U=>{const Z=f.ref.value;if(k&&(d=f.ref.selectionStart??Z.length),p=!1,typeof r.inputProps.onChange=="function"&&r.inputProps.onChange(U),u(Z),typeof r.onChange=="function"&&r.onChange(U,Z),a&&!p){const nt=k?l():l()??"";f.ref.value!==nt&&(f.ref.value=nt)}})}),Bt(k=>{const U=f.ref;if(a||k){p=!0;const Z=l();if(!(U instanceof HTMLElement))Z!==U.value&&(U.value=Z);else if((typeof Z=="string"||typeof Z=="number")&&(U instanceof HTMLTextAreaElement?U.innerText=Z:o()||U.setAttribute("value",Z),Z!==U.value&&(U.value=Z),s())){const ct=d??Z.length;U.selectionStart!==ct&&U.setSelectionRange(ct,ct)}}return!1},!0);const[v,g]=rt(!1),m=Gl(),_=Ph({props:t,muiFormControl:m,states:["color","disabled","error","hiddenLabel","size","required","filled"]}),y=G(_,{get focused(){return m?m.focused:v()}});Bt(()=>{var k;!m&&r.disabled&&v()&&(g(!1),typeof r.onBlur=="function"&&((k=r.onBlur)==null||k.call(r,null)))});const x=()=>m&&m.onFilled,S=()=>m&&m.onEmpty,b=k=>{var U,Z;qct(k)?(U=x())==null||U():(Z=S())==null||Z()};pr(()=>{a&&b({value:l()})}),ki(()=>{b(f.ref)});const w=()=>r.multiline&&r.inputComponent==="input",A=()=>w()?vne:r.inputComponent,T=mt(()=>{let k=r.inputProps;return w()&&(r.rows?k={type:void 0,minRows:r.rows,maxRows:r.rows,...k}:k={type:void 0,maxRows:r.maxRows,minRows:r.minRows,...k}),G(k,()=>r.componentsProps.input||{})});Bt(()=>{m==null||m.setAdornedStart(!!r.startAdornment)});const M=G(t,{get color(){return y.color||"primary"},get disabled(){return y.disabled},get error(){return y.error},get focused(){return y.focused},get formControl(){return m},get hiddenLabel(){return y.hiddenLabel},get size(){return y.size}}),C=UY.useClasses(M),E=()=>r.components.Root||k2,D=()=>r.componentsProps.root||{},I=()=>r.components.Input||F2,L=G(M,()=>D().ownerState||{}),P=G(M,()=>T().ownerState||{}),B=G(y,{get startAdornment(){return r.startAdornment}}),N=mt(()=>{var k;return(k=r.renderSuffix)==null?void 0:k.call(r,B)});return[mt(()=>mt(()=>!r.disableInjectingGlobalStyles)()&&gne()),O(u1,G(D,n,{get $component(){return E()}},()=>!ph(E())&&{ownerState:L},{onClick:k=>{f.ref&&k.currentTarget===k.target&&f.ref.focus(),typeof n.onClick=="function"&&n.onClick(k)},get class(){return Ot(C.root,D().class,n.class)},get children(){return[mt(()=>r.startAdornment),O(O2.Provider,{value:void 0,get children(){return O(u1,G({get $component(){return I()},ownerState:M,get"aria-invalid"(){return y.error},get"aria-describedby"(){return r["aria-describedby"]},get autocomplete(){return r.autoComplete},get autofocus(){return r.autoFocus},get disabled(){return y.disabled},get id(){return r.id},onAnimationStart:k=>{b(k.animationName==="mui-auto-fill-cancel"?f.ref:{value:"x"})},get name(){return r.name},get placeholder(){return r.placeholder},get readOnly(){return r.readOnly},get required(){return y.required},get value(){return h()}},()=>({rows:r.rows}),{get onKeyDown(){return r.onKeyDown},get onKeyUp(){return r.onKeyUp},get type(){return r.type}},T,()=>!ph(I())&&{as:A(),ownerState:P},{ref:f,get class(){return Ot(C.input,T().class)},onBlur:k=>{var U;(U=r.onBlur)==null||U.call(r,k),typeof r.inputProps.onBlur=="function"&&r.inputProps.onBlur(k),m&&m.onBlur?m.onBlur():g(!1)},onInput:k=>{if(!a){const U=k.target||f.ref;if(U==null)throw new Error("MUI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://mui.com/r/input-component-ref-interface for more info.");b({value:U.value})}},onFocus:k=>{if(y.disabled){k.stopPropagation();return}typeof r.onFocus=="function"&&r.onFocus(k),typeof r.inputProps.onFocus=="function"&&r.inputProps.onFocus(k),m&&m.onFocus?m.onFocus():g(!0)}}))}}),mt(()=>r.endAdornment),mt(()=>N())]}}))]});function yne(e){return Zt("MuiFilledInput",e)}const tm={...$y,...qt("MuiFilledInput",["root","underline","input"])},_ne=Pt()({name:"MuiFilledInput",propDefaults:({set:e})=>e({components:{},fullWidth:!1,inputComponent:"input",multiline:!1,type:"text",hiddenLabel:!1}),selfPropNames:["classes","disableUnderline","hiddenLabel"],utilityClass:yne,slotClasses:e=>({root:["root",!e.disableUnderline&&"underline"],input:["input"]})}),xne=vt(k2,{name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...N2(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=n?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return{position:"relative",backgroundColor:i,borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:n?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:i}},[`&.${tm.focused}`]:{backgroundColor:i},[`&.${tm.disabled}`]:{backgroundColor:n?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"},...!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${e.palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${tm.focused}:after`]:{transform:"scaleX(1)"},[`&.${tm.error}:after`]:{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${tm.disabled}):before`]:{borderBottom:`1px solid ${e.palette.text.primary}`},[`&.${tm.disabled}:before`]:{borderBottomStyle:"dotted"}},...t.startAdornment&&{paddingLeft:12},...t.endAdornment&&{paddingRight:12},...t.multiline&&{padding:"25px 12px 8px",...t.size==="small"&&{paddingTop:21,paddingBottom:4},...t.hiddenLabel&&{paddingTop:16,paddingBottom:17}}}}),bne=vt(F2,{name:"MuiFilledInput",slot:"Input",overridesResolver:B2})(({theme:e,ownerState:t})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},...t.size==="small"&&{paddingTop:21,paddingBottom:4},...t.hiddenLabel&&{paddingTop:16,paddingBottom:17},...t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},...t.startAdornment&&{paddingLeft:0},...t.endAdornment&&{paddingRight:0},...t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}})),Kct=_ne.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=mt(()=>{const s={root:{ownerState:t},input:{ownerState:t}};return r.componentsProps?qv(r.componentsProps,s):s}),o=G(()=>i.classes||{},n);return O(RV,G(r,{get components(){return{Root:xne,Input:bne,...r.components||{}}},get componentsProps(){return a()},classes:o}))});function Sne(e){return Zt("MuiFormControl",e)}qt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const wne=Pt()({name:"MuiFormControl",selfPropNames:["children","classes","color","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],propDefaults:({set:e})=>e({color:"primary",component:"div",disabled:!1,error:!1,fullWidth:!1,hiddenLabel:!1,margin:"none",required:!1,size:"medium",variant:"outlined"}),utilityClass:Sne,slotClasses:e=>({root:["root",e.margin!=="none"&&`margin${lt(e.margin)}`,e.fullWidth&&"fullWidth"]})}),Tne=vt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${lt(e.margin)}`],...e.fullWidth&&t.fullWidth})})(({ownerState:e})=>({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",...e.margin==="normal"&&{marginTop:16,marginBottom:8},...e.margin==="dense"&&{marginTop:8,marginBottom:4},...e.fullWidth&&{width:"100%"}})),Mne=wne.component(function({allProps:t,classes:n,otherProps:r,props:i}){const[a,o]=rt(!1),[s,l]=rt(!1),[u,c]=rt(!1);Bt(()=>{i.disabled&&u()&&c(!1)});const h=()=>i.focused!==void 0&&!i.disabled?i.focused:u();return O(O2.Provider,{value:{get adornedStart(){return a()},setAdornedStart:o,get margin(){return i.margin},get color(){return i.color},get disabled(){return i.disabled},get error(){return i.error},get filled(){return s()},get focused(){return h()},get fullWidth(){return i.fullWidth},get hiddenLabel(){return i.hiddenLabel},get size(){return i.size},onBlur:()=>{c(!1)},onEmpty:()=>{l(!1)},onFilled:()=>{l(!0)},onFocus:()=>{c(!0)},registerEffect:void 0,get required(){return i.required},get variant(){return i.variant}},get children(){return O(Tne,G(r,{ownerState:t,get class(){return Ot(n.root,r.class)},get children(){return i.children}}))}})});function Ane(e){return Zt("MuiFormControlLabel",e)}const NT=qt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),VY=Pt()({name:"MuiFormControlLabel",propDefaults:({set:e})=>e({componentsProps:{},labelPlacement:"end"}),selfPropNames:["checked","classes","componentsProps","control","disableTypography","disabled","inputRef","label","labelPlacement","name","onChange","value"],autoCallUseClasses:!1,utilityClass:Ane,slotClasses:e=>({root:["root",!!e.disabled&&"disabled",`labelPlacement${lt(e.labelPlacement)}`,!!e.error&&"error"],label:["label",!!e.disabled&&"disabled"]})}),Cne=vt("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${NT.label}`]:t.label},t.root,t[`labelPlacement${lt(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${NT.disabled}`]:{cursor:"default"},...t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},...t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},...t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},[`& .${NT.label}`]:{[`&.${NT.disabled}`]:{color:e.palette.text.disabled}}}));VY.component(function({allProps:t,otherProps:n,props:r}){const i=Gl(),[a]=Yt(r,["checked","name","onChange","value","inputRef","disabled"]),[o,s]=rt(r.disabled),l=G(a,{setDisabled:d=>s(d)}),u=Ph({props:t,muiFormControl:i,states:["error"]}),c=G(t,{get error(){return u.error},get disabled(){return o()}}),h=VY.useClasses(c),f=()=>{const d=Er(()=>r.label);return O(Xe,{get when(){return c1(d(),Sa)||r.disableTypography},get fallback(){return O(Sa,G({component:"span",get class(){return h.label}},()=>r.componentsProps.typography,{get children(){return d()}}))},get children(){return d()}})};return O(IV.Provider,{value:l,get children(){return O(Cne,G(n,{get class(){return Ot(h.root,n.class)},ownerState:c,get children(){return[mt(()=>r.control),O(f,{})]}}))}})});function Ene(e){return Zt("MuiFormGroup",e)}qt("MuiFormGroup",["root","row","error"]);const Dne=Pt()({name:"MuiFormGroup",propDefaults:({set:e})=>e({row:!1}),selfPropNames:["children","classes","row"],utilityClass:Ene,slotClasses:e=>({root:["root",e.row&&"row",!!e.error&&"error"]})}),Ine=vt("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>({display:"flex",flexDirection:"column",flexWrap:"wrap",...e.row&&{flexDirection:"row"}})),Lne=Dne.component(function({props:t,allProps:n,classes:r,otherProps:i}){const a=Gl(),o=Ph({props:n,muiFormControl:a,states:["error"]}),s=G(n,{get error(){return o.error}});return O(Ine,G(i,{get class(){return Ot(r.root,i.class)},ownerState:s,get children(){return t.children}}))});function Pne(e){return Zt("MuiFormHelperText",e)}const GY=qt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var Rne=ee("<span class=notranslate>&#8203;");const HY=Pt()({name:"MuiFormHelperText",propDefaults:({set:e})=>e({component:"p"}),selfPropNames:["children","classes","disabled","error","filled","focused","margin","required","variant"],utilityClass:Pne,autoCallUseClasses:!1,slotClasses:e=>({root:["root",!!e.disabled&&"disabled",!!e.error&&"error",!!e.size&&`size${lt(e.size)}`,e.contained&&"contained",!!e.focused&&"focused",!!e.filled&&"filled",!!e.required&&"required"]})}),One=vt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${lt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>({color:e.palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${GY.disabled}`]:{color:e.palette.text.disabled},[`&.${GY.error}`]:{color:e.palette.error.main},...t.size==="small"&&{marginTop:4},...t.contained&&{marginLeft:14,marginRight:14}})),Nne=HY.component(function({allProps:t,otherProps:n,props:r}){const i=Gl(),a=Ph({props:t,muiFormControl:i,states:["variant","size","disabled","error","filled","focused","required"]}),o=G(t,{get contained(){return a.variant==="filled"||a.variant==="outlined"},get variant(){return a.variant},get size(){return a.size},get disabled(){return a.disabled},get error(){return a.error},get filled(){return a.filled},get focused(){return a.focused},get required(){return a.required}}),s=HY.useClasses(o),l=Er(()=>r.children);return O(One,G(n,{get as(){return n.component},ownerState:o,get class(){return Ot(s.root,n.class)},get children(){return mt(()=>l()===" ")()?Rne():l()}}))});function Bne(e){return Zt("MuiFormLabel",e)}const Jx=qt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),WY=Pt()({name:"MuiFormLabel",propDefaults:({set:e})=>e({component:"label"}),selfPropNames:["children","classes","color","disabled","error","filled","focused","required"],autoCallUseClasses:!1,utilityClass:Bne,slotClasses:e=>({root:["root",`color${lt(e.color)}`,!!e.disabled&&"disabled",!!e.error&&"error",!!e.filled&&"filled",!!e.focused&&"focused",!!e.required&&"required"],asterisk:["asterisk",!!e.error&&"error"]})}),kne=vt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(({theme:e,ownerState:t})=>({color:e.palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Jx.focused}`]:{color:e.palette[t.color].main},[`&.${Jx.disabled}`]:{color:e.palette.text.disabled},[`&.${Jx.error}`]:{color:e.palette.error.main}})),Fne=vt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Jx.error}`]:{color:e.palette.error.main}})),zne=WY.component(function({allProps:t,otherProps:n,props:r}){const i=Gl(),a=Ph({props:t,muiFormControl:i,states:["color","required","focused","disabled","error","filled"]}),o=G(t,{get color(){return a.color||"primary"},get disabled(){return a.disabled},get error(){return a.error},get filled(){return a.filled},get focused(){return a.focused},get required(){return a.required}}),s=WY.useClasses(o);return O(kne,G(n,{get as(){return n.component},ownerState:o,get class(){return Ot(s.root,n.class)},get children(){return[mt(()=>r.children),O(Xe,{get when(){return a.required},get children(){return O(Fne,{ownerState:o,"aria-hidden":!0,get class(){return s.asterisk},get children(){return["","*"]}})}})]}}))}),Zct=hr();function Une(e){return Zt("MuiGrid",e)}const Vne=[0,1,2,3,4,5,6,7,8,9,10],Gne=["column-reverse","column","row-reverse","row"],Hne=["nowrap","wrap-reverse","wrap"],j_=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],OV=qt("MuiGrid",["root","container","item","zeroMinWidth",...Vne.map(e=>`spacing-xs-${e}`),...Gne.map(e=>`direction-xs-${e}`),...Hne.map(e=>`wrap-xs-${e}`),...j_.map(e=>`grid-xs-${e}`),...j_.map(e=>`grid-sm-${e}`),...j_.map(e=>`grid-md-${e}`),...j_.map(e=>`grid-lg-${e}`),...j_.map(e=>`grid-xl-${e}`)]),Wne=Pt()({name:"MuiGrid",selfPropNames:["children","classes","columnSpacing","columns","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"],propDefaults:({set:e,inProps:t})=>{const n=Ln(Zct);return e({get columns(){return t.columns||n||12},component:"div",container:!1,direction:"row",item:!1,lg:!1,md:!1,sm:!1,spacing:0,wrap:"wrap",xl:!1,xs:!1,zeroMinWidth:!1,get rowSpacing(){return t.rowSpacing??t.spacing??0},get columnSpacing(){return t.columnSpacing??t.spacing??0}})},utilityClass:Une,slotClasses:e=>({root:["root",e.container&&"container",e.item&&"item",e.zeroMinWidth&&"zeroMinWidth",...Jct(e.spacing,e.container),e.direction!=="row"&&`direction-xs-${String(e.direction)}`,e.wrap!=="wrap"&&`wrap-xs-${String(e.wrap)}`,e.xs!==!1&&`grid-xs-${String(e.xs)}`,e.sm!==!1&&`grid-sm-${String(e.sm)}`,e.md!==!1&&`grid-md-${String(e.md)}`,e.lg!==!1&&`grid-lg-${String(e.lg)}`,e.xl!==!1&&`grid-xl-${String(e.xl)}`]})});function Qm(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function $ne(e){const{theme:t,ownerState:n}=e;let r;return t.breakpoints.keys.reduce((i,a)=>{let o={};if(n[a]&&(r=n[a]),!r)return i;if(r===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(r==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=sv({values:n.columns,breakpoints:t.breakpoints.values}),l=typeof s=="object"?s[a]:s;if(l==null)return i;const u=`${Math.round(r/l*1e8)/1e6}%`;let c={};if(n.container&&n.item&&n.columnSpacing!==0){const h=t.spacing(n.columnSpacing);if(h!=="0px"){const f=`calc(${u} + ${Qm(h)})`;c={flexBasis:f,maxWidth:f}}}o={flexBasis:u,flexGrow:0,maxWidth:u,...c}}return t.breakpoints.values[a]===0?Object.assign(i,o):i={...i,[t.breakpoints.up(a)]:o},i},{})}function Xne(e){const{theme:t,ownerState:n}=e,r=sv({values:n.direction,breakpoints:t.breakpoints.values});return Gy({theme:t},r,i=>{let a={flexDirection:i};return i.indexOf("column")===0&&(a={...a,[`& > .${OV.item}`]:{maxWidth:"none"}}),a})}function jne(e){const{theme:t,ownerState:n}=e,{container:r,rowSpacing:i}=n;let a={};if(r&&i!==0){const o=sv({values:i,breakpoints:t.breakpoints.values});a=Gy({theme:t},o,s=>{const l=t.spacing(s);return l!=="0px"?{marginTop:`-${Qm(l)}`,[`& > .${OV.item}`]:{paddingTop:Qm(l)}}:{}})}return a}function Yne(e){const{theme:t,ownerState:n}=e,{container:r,columnSpacing:i}=n;let a={};if(r&&i!==0){const o=sv({values:i,breakpoints:t.breakpoints.values});a=Gy({theme:t},o,s=>{const l=t.spacing(s);return l!=="0px"?{width:`calc(100% + ${Qm(l)})`,marginLeft:`-${Qm(l)}`,[`& > .${OV.item}`]:{paddingLeft:Qm(l)}}:{}})}return a}function Jct(e,t,n={}){if(!t||!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]||`spacing-xs-${String(e)}`];if(typeof e=="string"||Array.isArray(e))return[];const r=e.xs,i=e.sm,a=e.md,o=e.lg,s=e.xl;return[Number(r)>0&&(n[`spacing-xs-${String(r)}`]||`spacing-xs-${String(r)}`),Number(i)>0&&(n[`spacing-sm-${String(i)}`]||`spacing-sm-${String(i)}`),Number(a)>0&&(n[`spacing-md-${String(a)}`]||`spacing-md-${String(a)}`),Number(o)>0&&(n[`spacing-lg-${String(o)}`]||`spacing-lg-${String(o)}`),Number(s)>0&&(n[`spacing-xl-${String(s)}`]||`spacing-xl-${String(s)}`)]}const qne=vt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{container:n,direction:r,item:i,lg:a,md:o,sm:s,spacing:l,wrap:u,xl:c,xs:h,zeroMinWidth:f}=e.ownerState;return[t.root,n&&t.container,i&&t.item,f&&t.zeroMinWidth,...Jct(l,n,t),r!=="row"&&t[`direction-xs-${String(r)}`],u!=="wrap"&&t[`wrap-xs-${String(u)}`],h!==!1&&t[`grid-xs-${String(h)}`],s!==!1&&t[`grid-sm-${String(s)}`],o!==!1&&t[`grid-md-${String(o)}`],a!==!1&&t[`grid-lg-${String(a)}`],c!==!1&&t[`grid-xl-${String(c)}`]]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),Xne,jne,Yne,$ne);Wne.component(function({allProps:t,props:n,otherProps:r,classes:i}){r=MV(r);const a=()=>O(qne,G({ownerState:t},r,{get class(){return Ot(i.root,r.class)},get children(){return n.children}}));return O(Xe,{get when(){return n.columns!==12},get fallback(){return O(a,{})},get children(){return O(Zct.Provider,{get value(){return n.columns},get children(){return O(a,{})}})}})});const Kne=Pt()({name:"MuiGrow",propDefaults:({set:e})=>e({appear:!0,timeout:"auto"}),selfPropNames:["appear","children","easing","in","ref","timeout"]});function fB(e){return`scale(${e}, ${e**2})`}const Zne={entering:{opacity:1,transform:fB(1)},entered:{opacity:1,transform:"none"}},Jne=Kne.component(function({props:t,otherProps:n}){const r={current:void 0},i=$i(),a=Er(()=>t.children);let o;return Pe(()=>o&&clearTimeout(o)),O(EV,G(n,{get appear(){return t.appear},get in(){return t.in},onEnter:()=>{var f;const s=a();CV(s);const{duration:l,delay:u,easing:c}=Wy({style:n.style,timeout:t.timeout,easing:t.easing},{mode:"enter"});let h;t.timeout==="auto"?(h=i.transitions.getAutoHeightDuration(s.clientHeight),r.current=h):h=l,s.style.transition=[i.transitions.create("opacity",{duration:h,delay:u}),i.transitions.create("transform",{duration:Number(h)*.666,delay:u,easing:c})].join(","),(f=n.onEnter)==null||f.call(n)},onExit:()=>{var f;const s=a(),{duration:l,delay:u,easing:c}=Wy({style:n.style,timeout:t.timeout,easing:t.easing},{mode:"exit"});let h;t.timeout==="auto"?(h=i.transitions.getAutoHeightDuration(s.clientHeight),r.current=h):h=l,s.style.transition=[i.transitions.create("opacity",{duration:h,delay:u}),i.transitions.create("transform",{duration:Number(h)*.666,delay:u||Number(h)*.333,easing:c})].join(","),s.style.opacity="0",s.style.transform=fB(.75),(f=n.onExit)==null||f.call(n)},addEndListener:s=>{t.timeout==="auto"&&(o=setTimeout(s,r.current||0)),n.addEndListener&&n.addEndListener(s)},get timeout(){return t.timeout==="auto"?void 0:t.timeout},children:s=>{const l=a();l.style.opacity="0",l.style.transform=fB(.75),s==="exited"&&!t.in?l.style.visibility="hidden":l.style.removeProperty("visibility");const u={...Zne[s]||{},...n.style||{}};for(const c in u){const h=u[c];h===void 0?l.style.removeProperty(c):l.style[c]=h}return l}}))});function Qne(e){return Zt("MuiIcon",e)}qt("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const tre=Pt()({name:"MuiIcon",selfPropNames:["baseClassName","children","classes","color","fontSize"],propDefaults:({set:e})=>e({baseClassName:"material-icons",color:"inherit",component:"span",fontSize:"medium"}),utilityClass:Qne,slotClasses:e=>({root:["root",e.color!=="inherit"&&`color${lt(e.color)}`,`fontSize${lt(e.fontSize)}`]})}),ere=vt("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${lt(n.color)}`],t[`fontSize${lt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:e.palette.primary.main,secondary:e.palette.secondary.main,info:e.palette.info.main,success:e.palette.success.main,warning:e.palette.warning.main,action:e.palette.action.active,error:e.palette.error.main,disabled:e.palette.action.disabled,inherit:void 0}[t.color]}));tre.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(ere,G({get class(){return Ot(i.baseClassName,"notranslate",n.root,r.class)},ownerState:t,"aria-hidden":!0,get children(){return i.children}},r))});function nre(e){return Zt("MuiInput",e)}const BT={...$y,...qt("MuiInput",["root","underline","input"])},rre=Pt()({name:"MuiInput",propDefaults:({set:e})=>e({components:{},fullWidth:!1,inputComponent:"input",multiline:!1,type:"text"}),selfPropNames:["classes","disableUnderline"],utilityClass:nre,slotClasses:e=>({root:["root",!e.disableUnderline&&"underline"],input:["input"]})}),ire=vt(k2,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...N2(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{const r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{position:"relative",...t.formControl&&{"label + &":{marginTop:16}},...!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${e.palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${BT.focused}:after`]:{transform:"scaleX(1)"},[`&.${BT.error}:after`]:{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${BT.disabled}):before`]:{borderBottom:`2px solid ${e.palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${BT.disabled}:before`]:{borderBottomStyle:"dotted"}}}}),are=vt(F2,{name:"MuiInput",slot:"Input",overridesResolver:B2})({}),z2=rre.component(function({classes:t,otherProps:n,props:r}){const i=mt(()=>{const s={root:{ownerState:{disableUnderline:r.disableUnderline}}};return n.componentsProps?qv(n.componentsProps,s):s}),a=G(t,()=>r.classes||{});return O(RV,G(n,{get components(){return{Root:ire,Input:are,...n.components||{}}},get componentsProps(){return i()},classes:a}))});function ore(e){return Zt("MuiInputAdornment",e)}const $Y=qt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var sre=ee("<span class=notranslate>&#8203;");const RR=Pt()({name:"MuiInputAdornment",selfPropNames:["classes","children","disablePointerEvents","disableTypography","position","variant"],utilityClass:ore,slotClasses:e=>({root:["root",e.disablePointerEvents&&"disablePointerEvents",e.position&&`position${lt(e.position)}`,e.variant,e.hiddenLabel&&"hiddenLabel",e.size&&`size${lt(e.size)}`]})}),lre=vt("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${lt(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]}})(({theme:e,ownerState:t})=>({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:e.palette.action.active,...t.variant==="filled"&&{[`&.${$Y.positionStart}&:not(.${$Y.hiddenLabel})`]:{marginTop:16}},...t.position==="start"&&{marginRight:8},...t.position==="end"&&{marginLeft:8},...t.disablePointerEvents===!0&&{pointerEvents:"none"}}));RR.defineComponent(function(t){const n=yi(t),r=RR.useThemeProps({props:t}),[,i]=Yt(r,["children","class","component","disablePointerEvents","disableTypography","position","variant"]),a=G({component:"div",disablePointerEvents:!1,disableTypography:!1},r),o=Gl(),s=()=>{let h=r.variant;return h&&(o!=null&&o.variant),o&&!h&&(h=o.variant),h},l={get hiddenLabel(){return o==null?void 0:o.hiddenLabel},get size(){return o==null?void 0:o.size},get disablePointerEvents(){return a.disablePointerEvents},get position(){return r.position},get variant(){return s()}},u=RR.useClasses(l);function c(h){const f=Er(()=>h.children);return O(Xe,{get when(){return typeof f()=="string"&&!h.disableTypography},get fallback(){return[mt(()=>mt(()=>h.position==="start")()?sre():null),mt(()=>h.children)]},get children(){return O(Sa,{color:"text.secondary",get children(){return f()}})}})}return O(O2.Provider,{value:void 0,get children(){return O(lre,G({get as(){return a.component},ownerState:l,get class(){return Ot(u.root,r.class)},ref:n},i,{get children(){return O(c,{get position(){return r.position},get disableTypography(){return a.disableTypography},get children(){return r.children}})}}))}})});function ure(e){return Zt("MuiInputLabel",e)}qt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const XY=Pt()({name:"MuiInputLabel",propDefaults:({set:e})=>e({disableAnimation:!1}),selfPropNames:["children","classes","color","disableAnimation","disabled","error","focused","margin","required","shrink","variant"],autoCallUseClasses:!1,utilityClass:ure,slotClasses:e=>({root:["root",!!e.formControl&&"formControl",!e.disableAnimation&&"animated",!!e.shrink&&"shrink",e.size==="small"&&"sizeSmall",!!e.variant&&e.variant],asterisk:[!!e.required&&"asterisk"]})}),cre=vt(zne,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Jx.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",...t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},...t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},...t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},...!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},...t.variant==="filled"&&{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)",...t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},...t.shrink&&{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)",...t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"}}},...t.variant==="outlined"&&{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)",...t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},...t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}}})),hre=XY.component(function({allProps:t,props:n}){const r=Gl(),[,i]=Yt(t,["disableAnimation","margin","shrink","variant"]),a=()=>{let c=n.shrink;return typeof c>"u"&&r&&(c=r.filled||r.focused||r.adornedStart),c},o=Ph({props:t,muiFormControl:r,states:["size","variant","required"]}),s=G(t,{get formControl(){return r},get shrink(){return a()},get size(){return o.size},get variant(){return o.variant},get required(){return o.required}}),l=XY.useClasses(s),u=G(l,()=>n.classes||{});return O(cre,G(i,{get"data-shrink"(){return a()},ownerState:s,classes:u}))});function fre(e){return Zt("MuiLinearProgress",e)}qt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const dre=Pt()({name:"MuiLinearProgress",propDefaults:({set:e})=>e({color:"primary",variant:"indeterminate"}),selfPropNames:["classes","color","value","valueBuffer","variant"],utilityClass:fre,slotClasses:e=>({root:["root",`color${lt(e.color)}`,e.variant],dashed:["dashed",`dashedColor${lt(e.color)}`],bar1:["bar",`barColor${lt(e.color)}`,(e.variant==="indeterminate"||e.variant==="query")&&"bar1Indeterminate",e.variant==="determinate"&&"bar1Determinate",e.variant==="buffer"&&"bar1Buffer"],bar2:["bar",e.variant!=="buffer"&&`barColor${lt(e.color)}`,e.variant==="buffer"&&`color${lt(e.color)}`,(e.variant==="indeterminate"||e.variant==="query")&&"bar2Indeterminate",e.variant==="buffer"&&"bar2Buffer"]})}),dB=4,Xy=I2(),NV=(e,t)=>t==="inherit"?"currentColor":e.palette.mode==="light"?Lv(e.palette[t].main,.62):Iv(e.palette[t].main,.5),pre=vt("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${lt(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:NV(t,e.color),...e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},...e.variant==="buffer"&&{backgroundColor:"transparent"},...e.variant==="query"&&{transform:"rotate(180deg)"}})),vre=vt("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${lt(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=NV(t,e.color);return{position:"absolute",marginTop:0,height:"100%",width:"100%",...e.color==="inherit"&&{opacity:.3},backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"}},{[`@keyframes buffer-${Xy}`]:{0:{opacity:1,backgroundPosition:"0 -23px"},60:{opacity:0,backgroundPosition:"0 -23px"},100:{opacity:1,backgroundPosition:"-200px -23px"}},animation:`buffer-${Xy} 3s infinite linear`}),gre=vt("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${lt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":t.palette[e.color].main,...e.variant==="determinate"&&{transition:`transform .${dB}s linear`},...e.variant==="buffer"&&{zIndex:1,transition:`transform .${dB}s linear`}}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&{[`@keyframes indeterminate1-${Xy}`]:{0:{left:"-35%",right:"100%"},60:{left:"100%",right:"-90%"},100:{left:"100%",right:"-90%"}},width:"auto",animation:`indeterminate1-${Xy} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}),mre=vt("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${lt(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",...e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":t.palette[e.color].main},...e.color==="inherit"&&{opacity:.3},...e.variant==="buffer"&&{backgroundColor:NV(t,e.color),transition:`transform .${dB}s linear`}}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&{[`@keyframes indeterminate2-${Xy}`]:{0:{left:"-200%",right:"100%"},60:{left:"107%",right:"-8%"},100:{left:"107%",right:"-8%"}},width:"auto",animation:`indeterminate2-${Xy} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`});dre.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=$i(),o=ic(r),[s,l]=rt({}),[u,c]=rt({});Bt(()=>{if((i.variant==="determinate"||i.variant==="buffer")&&i.value!==void 0){o.ref.ariaValueNow=Math.round(i.value).toString(),o.ref.ariaValueMin="0",o.ref.ariaValueMax="100";let f=i.value-100;a.direction==="rtl"&&(f=-f),l({transform:`translateX(${f}%)`})}}),Bt(()=>{if(i.variant==="buffer"&&i.valueBuffer!==void 0){let f=(i.valueBuffer||0)-100;a.direction==="rtl"&&(f=-f),c({transform:`translateX(${f}%)`})}});const h=dS(pre,"span","div");return O(h,G({role:"progressbar"},r,{ref:o,get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return[O(Xe,{get when(){return i.variant==="buffer"},get children(){return O(vre,{get class(){return n.dashed},ownerState:t})}}),O(gre,{get class(){return n.bar1},ownerState:t,get style(){return s()}}),O(Xe,{get when(){return i.variant!=="determinate"},get children(){return O(mre,{get class(){return n.bar2},ownerState:t,get style(){return u()}})}})]}}))});function yre(e){return Zt("MuiLink",e)}const _re=qt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),jY=Pt()({name:"MuiLink",autoCallUseClasses:!1,selfPropNames:["TypographyClasses","children","classes","color","underline","variant"],propDefaults:({set:e})=>e({color:"primary",component:"a",underline:"always",variant:"inherit"}),utilityClass:yre,slotClasses:e=>({root:["root",`underline${lt(e.underline)}`,e.component==="button"&&"button",e.focusVisible&&"focusVisible"]})}),xre={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bre=e=>xre[e]||e,Sre=vt(Sa,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${lt(n.underline)}`],n.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>{const n=h1(e,"palette",bre(t.color))||t.color;return{...t.underline==="none"&&{textDecoration:"none"},...t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},...t.underline==="always"&&{textDecoration:"underline",textDecorationColor:n!=="inherit"?un(n,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},...t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_re.focusVisible}`]:{outline:"auto"}}}});jY.component(function({allProps:t,otherProps:n,props:r}){const i=_ct(),[a,o]=rt(!1),s=G(t,{get focusVisible(){return a()}}),l=jY.useClasses(s);return O(Sre,G({get class(){return Ot(l.root,n.class)},get classes(){return r.TypographyClasses},get color(){return r.color},onBlur:u=>{i.onBlur(u),i.isFocusVisibleRef.current===!1&&o(!1),typeof n.onBlur=="function"&&n.onBlur(u)},onFocus:u=>{i.onFocus(u),i.isFocusVisibleRef.current===!0&&o(!0),typeof n.onFocus=="function"&&n.onFocus(u)},ownerState:t,get variant(){return r.variant}},n,{get component(){return n.component},get children(){return r.children}}))});const Rv=hr({dense:!1});function pS(){return Ln(Rv)}function wre(e){return Zt("MuiList",e)}qt("MuiList",["root","padding","dense","subheader"]);const Tre=Pt()({name:"MuiList",selfPropNames:["children","classes","dense","disablePadding","subheader"],propDefaults:({set:e})=>e({component:"ul",dense:!1,disablePadding:!1}),utilityClass:wre,slotClasses:e=>({root:["root",!e.disablePadding&&"padding",e.dense&&"dense",!!e.subheader&&"subheader"]})}),Mre=vt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>({listStyle:"none",margin:0,padding:0,position:"relative",...!e.disablePadding&&{paddingTop:8,paddingBottom:8},...e.subheader&&{paddingTop:0}})),Are=Tre.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(Rv.Provider,{value:{get dense(){return i.dense}},get children(){return O(Mre,G(r,{get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return[mt(()=>i.subheader),mt(()=>i.children)]}}))}})});function Cre(e){return Zt("MuiListItemButton",e)}const dm=qt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),OR=Pt()({name:"MuiListItemButton",selfPropNames:["alignItems","autoFocus","children","classes","dense","disableGutters","disabled","divider","selected"],propDefaults:({set:e})=>e({alignItems:"center",autoFocus:!1,component:"div",dense:!1,disableGutters:!1,divider:!1,selected:!1,disabled:!1}),utilityClass:Cre,slotClasses:e=>({root:["root",e.dense&&"dense",!e.disableGutters&&"gutters",e.divider&&"divider",e.disabled&&"disabled",e.alignItems==="flex-start"&&"alignItemsFlexStart",e.selected&&"selected"]})}),Ere=vt($s,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiListItemButton",slot:"Root",overridesResolver:(e,t)=>[t.root,e.ownerState.dense&&t.dense,e.ownerState.alignItems==="flex-start"&&t.alignItemsFlexStart,e.ownerState.divider&&t.divider,!e.ownerState.disableGutters&&t.gutters]})(({theme:e,ownerState:t})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${dm.selected}`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${dm.focusVisible}`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${dm.selected}:hover`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${dm.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${dm.disabled}`]:{opacity:e.palette.action.disabledOpacity},...t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},...t.alignItems==="flex-start"&&{alignItems:"flex-start"},...!t.disableGutters&&{paddingLeft:16,paddingRight:16},...t.dense&&{paddingTop:4,paddingBottom:4}}));OR.defineComponent(function(t){var c,h;const n=$i(),r=G({alignItems:"center",component:"div"},(h=(c=n.components)==null?void 0:c[OR.name])==null?void 0:h.defaultProps,t),[,i]=Yt(r,["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected"]),a=pS(),o={get dense(){return r.dense||a.dense||!1},get alignItems(){return r.alignItems},get disableGutters(){return r.disableGutters}},s=ic(t);Bt(()=>{r.autoFocus&&s.ref&&s.ref.focus()});const l={get classes(){return r.classes},get disabled(){return r.disabled||!1},get alignItems(){return r.alignItems},get dense(){return o.dense},get disableGutters(){return r.disableGutters||!1},get divider(){return r.divider||!1},get selected(){return r.selected||!1}},u=OR.useClasses(l);return O(Rv.Provider,{value:o,get children(){return O(Ere,G({ref:s,get component(){return r.component},get focusVisibleClassName(){var f;return Ot((f=r.classes)==null?void 0:f.focusVisible,r.focusVisibleClassName)},ownerState:l},i,{classes:u,get children(){return t.children}}))}})});function Dre(e){return Zt("MuiListItemSecondaryAction",e)}qt("MuiListItemSecondaryAction",["root","disableGutters"]);const YY=Pt()({name:"MuiListItemSecondaryAction",selfPropNames:["alignItems","children","classes"],autoCallUseClasses:!1,utilityClass:Dre,slotClasses:e=>({root:["root",e.disableGutters&&"disableGutters"]})}),Ire=vt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",...e.disableGutters&&{right:0}})),Lre=YY.component(function({allProps:t,otherProps:n,props:r}){const i=pS(),a=G({get disableGutters(){return!!i.disableGutters}},t),o=YY.useClasses(a);return O(Ire,G(n,{get class(){return Ot(o.root,n.class)},ownerState:a,get children(){return r.children}}))});function Pre(e){return Zt("MuiListItem",e)}const qY=qt("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),NR=Pt()({name:"MuiListItem",selfPropNames:["alignItems","autoFocus","children","classes","components","componentsProps","dense","disableGutters","disablePadding","divider","secondaryAction"],utilityClass:Pre,slotClasses:e=>({root:["root",e.dense&&"dense",!e.disableGutters&&"gutters",!e.disablePadding&&"padding",e.divider&&"divider",e.alignItems==="flex-start"&&"alignItemsFlexStart"],container:["container"]})}),KY=vt("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button]}})(({theme:e,ownerState:t})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",...!t.disablePadding&&{paddingTop:8,paddingBottom:8,...t.dense&&{paddingTop:4,paddingBottom:4},...!t.disableGutters&&{paddingLeft:16,paddingRight:16},...!!t.secondaryAction&&{paddingRight:48}},...!!t.secondaryAction&&{[`& > .${dm.root}`]:{paddingRight:48}},[`&.${qY.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${qY.disabled}`]:{opacity:e.palette.action.disabledOpacity},...t.alignItems==="flex-start"&&{alignItems:"flex-start"},...t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"}}));NR.defineComponent(function(t){var f,d;const n=$i(),r=G({alignItems:"center",components:{},componentsProps:{}},(d=(f=n.components)==null?void 0:f[NR.name])==null?void 0:d.defaultProps,t),i=Ln(Rv),a={get dense(){return r.dense||i.dense||!1},get alignItems(){return r.alignItems},get disableGutters(){return r.disableGutters}},o=ic(t);Bt(()=>{t.autoFocus&&o.ref&&o.ref.focus()});const s=r.componentsProps.root,l=r.components.Root||KY,u=G({get classes(){return r.classes},get alignItems(){return r.alignItems},get dense(){return a.dense},get disableGutters(){return r.disableGutters||!1},get disablePadding(){return r.disablePadding||!1},get divider(){return r.divider||!1}},ph(l)||s==null?void 0:s.ownerState),c=NR.useClasses(u),[,h]=Yt(t,["alignItems","autoFocus","children","class","component","components","componentsProps","dense","disableGutters","disablePadding","divider","secondaryAction"]);return O(Rv.Provider,{value:a,get children(){return O(KY,G({get as(){return r.component||"li"}},s,{ref:o,ownerState:u,get class(){return Ot(c.root,s==null?void 0:s.class,t.class)}},h,{get children(){return[mt(()=>t.children),O(Xe,{get when(){return t.secondaryAction},children:p=>O(Lre,{get children(){return p()}})})]}}))}})});function Rre(e){return Zt("MuiListItemAvatar",e)}qt("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Ore=Pt()({name:"MuiListItemAvatar",selfPropNames:["alignItems","children","classes"],propDefaults:({set:e})=>e({component:"div"}),utilityClass:Rre,slotClasses:e=>({root:["root",e.alignItems==="flex-start"&&"alignItemsFlexStart"]})}),Nre=vt("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:e})=>({minWidth:56,flexShrink:0,...e.alignItems==="flex-start"&&{marginTop:8}}));Ore.component(function({allProps:t,classes:n,otherProps:r}){const i=pS(),a=G({get alignItems(){return i.alignItems}},t);return O(Nre,G(r,{ownerState:a,get class(){return Ot(n.root,r.class)},get children(){return t.children}}))});function Bre(e){return Zt("MuiListItemIcon",e)}const ZY=qt("MuiListItemIcon",["root","alignItemsFlexStart"]),kre=Pt()({name:"MuiListItemIcon",selfPropNames:["alignItems","children","classes"],propDefaults:({set:e})=>e({component:"div"}),utilityClass:Bre,slotClasses:e=>({root:["root",e.alignItems==="flex-start"&&"alignItemsFlexStart"]})}),Fre=vt("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>({minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex",...t.alignItems==="flex-start"&&{marginTop:8}}));kre.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=pS(),o=G({get alignItems(){return a.alignItems}},t);return O(Fre,G(r,{get class(){return Ot(n.root,r.class)},ownerState:o,get children(){return i.children}}))});function zre(e){return Zt("MuiListItemText",e)}const HC=qt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),BR=Pt()({name:"MuiListItemText",selfPropNames:["children","classes","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],utilityClass:zre,slotClasses:e=>({root:["root",e.inset&&"inset",e.dense&&"dense",!!e.primary&&!!e.secondary&&"multiline"],primary:["primary"],secondary:["secondary"]})}),Ure=vt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${HC.primary}`]:t.primary},{[`& .${HC.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,...e.primary&&e.secondary&&{marginTop:6,marginBottom:6},...e.inset&&{paddingLeft:56}}));BR.defineComponent(function(t){var d,p;const n=$i(),r=pS(),i=G((p=(d=n.components)==null?void 0:d[BR.name])==null?void 0:p.defaultProps,t),a=mt(()=>i.primary),o=mt(()=>i.secondary),s={get classes(){return i.classes},get inset(){return i.inset||!1},get primary(){return!!a()},get secondary(){return!!o()},get dense(){return r.dense}},l=BR.useClasses(s),[,u]=Yt(i,["children","classes","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),c=v=>v!=null,h=()=>{const v=Er(()=>a()??i.children),g=i.primaryTypographyProps;return O(Xe,{get when(){return c(v())&&!c1(v(),Sa)&&!i.disableTypography},get fallback(){return v()},get children(){return O(Sa,G({get variant(){return r.dense?"body2":"body1"},get class(){return l.primary},component:"span",display:"block"},g,{get children(){return v()}}))}})},f=()=>{const v=i.secondaryTypographyProps;return O(Xe,{get when(){return c(o())&&!c1(o(),Sa)&&!i.disableTypography},get fallback(){return o()},get children(){return O(Sa,G({variant:"body2",get class(){return l.secondary},sx:{display:"block",color:"text.secondary"}},v,{get component(){return(v==null?void 0:v.component)??"p"},get children(){return o()}}))}})};return O(Ure,G(u,{get class(){return Ot(l.root,u.class)},ownerState:s,get children(){return[O(h,{}),O(f,{})]}}))});function Vre(e){return Zt("MuiListSubheader",e)}qt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const Gre=Pt()({name:"MuiListSubheader",selfPropNames:["children","classes","color","disableGutters","disableSticky","inset"],propDefaults:({set:e})=>e({color:"default",component:"li",disableGutters:!1,disableSticky:!1,inset:!1}),utilityClass:Vre,slotClasses:e=>({root:["root",e.color!=="default"&&`color${lt(e.color)}`,!e.disableGutters&&"gutters",e.inset&&"inset",!e.disableSticky&&"sticky"]})}),Hre=vt("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${lt(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:e.palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),...t.color==="primary"&&{color:e.palette.primary.main},...t.color==="inherit"&&{color:"inherit"},...!t.disableGutters&&{paddingLeft:16,paddingRight:16},...t.inset&&{paddingLeft:72},...!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:e.palette.background.paper}}));Gre.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(Hre,G(r,{get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return i.children}}))});const Wre=Pt()({name:"MuiMenuList",selfPropNames:["autoFocus","autoFocusItem","children","disabledItemsFocusable","disableListWrap","variant"]});function kR(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?void 0:e.firstChild}function JY(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?void 0:e.lastChild}function Qct(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent??""),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Y_(e,t,n,r,i,a){let o=!1,s=i(e,t,t?n:!1);for(;s;){if(s===e.firstChild){if(o)return!1;o=!0}const l=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!Qct(s,a)||l)s=i(e,s,n);else return s.focus(),!0}return!1}const $re=Wre.defineComponent(function(t){const n=yi(t),[,r]=Yt(t,["autoFocus","autoFocusItem","children","class","disabledItemsFocusable","disableListWrap","onKeyDown","variant"]),i=G({autoFocus:!1,autoFocusItem:!1,disabledItemsFocusable:!1,disableListWrap:!1,variant:"selectedMenu"},t),a={keys:[],repeating:!0,previousKeyMatched:!0,lastTime:0};Bt(()=>{i.autoFocus&&n.current.focus()},[i.autoFocus]);const o=c=>{const h=n.current,f=c.key,d=qu(h).activeElement;if(f==="ArrowDown")c.preventDefault(),Y_(h,d,i.disableListWrap,i.disabledItemsFocusable,kR);else if(f==="ArrowUp")c.preventDefault(),Y_(h,d,i.disableListWrap,i.disabledItemsFocusable,JY);else if(f==="Home")c.preventDefault(),Y_(h,void 0,i.disableListWrap,i.disabledItemsFocusable,kR);else if(f==="End")c.preventDefault(),Y_(h,void 0,i.disableListWrap,i.disabledItemsFocusable,JY);else if(f.length===1){const p=f.toLowerCase(),v=performance.now();a.keys.length>0&&(v-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&p!==a.keys[0]&&(a.repeating=!1)),a.lastTime=v,a.keys.push(p);const g=d&&!a.repeating&&Qct(d,a);a.previousKeyMatched&&(g||Y_(h,d,!1,i.disabledItemsFocusable,kR,a))?c.preventDefault():a.previousKeyMatched=!1}typeof t.onKeyDown=="function"&&t.onKeyDown(c)},s=P2(()=>t.children),l=mt(()=>{let c=-1,h=0;for(const f of s())Hy(f)&&(f.props.disabled||(i.variant==="selectedMenu"&&f.props.selected||c===-1)&&(c=h)),h++;return c}),u=_B(s,(c,h)=>Hy(c)?O(c.Component,G(c.props,{get autoFocus(){if(h()===l()&&i.autoFocusItem)return!0},get tabIndex(){if(c.props.tabIndex===void 0&&h()===l()&&i.variant)return 0}})):c);return O(Are,G({role:"menu",ref:n,get class(){return t.class},onKeyDown:o,get tabIndex(){return i.autoFocus?0:-1}},r,{get children(){return u()}}))});function Xre(e){return Zt("MuiPopover",e)}qt("MuiPopover",["root","paper"]);const FR=Pt()({name:"MuiPopover",selfPropNames:["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","container","elevation","marginThreshold","onClose","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"],utilityClass:Xre,slotClasses:()=>({root:["root"],paper:["paper"]})});function QY(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function tq(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function eq(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function kT(e){return typeof e=="function"?e():e}const jre=vt(PV,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yre=vt(Lh,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),qre=FR.defineComponent(function(t){const n=FR.useThemeProps({props:t}),[,r]=Yt(n,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","class","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),i=G({anchorOrigin:{vertical:"top",horizontal:"left"},anchorReference:"anchorEl",elevation:8,marginThreshold:16,PaperProps:{},transformOrigin:{vertical:"top",horizontal:"left"},TransitionComponent:Jne,transitionDuration:"auto"},n),[,a]=Yt(G(()=>n.TransitionProps||{}),["onEntering"]),o=yi(()=>i.PaperProps.ref),s=G(n,{get anchorOrigin(){return i.anchorOrigin},get anchorReference(){return i.anchorReference},get elevation(){return i.elevation},get marginThreshold(){return i.marginThreshold},get PaperProps(){return i.PaperProps},get transformOrigin(){return i.transformOrigin},get TransitionComponent(){return i.TransitionComponent},get transitionDuration(){return i.transitionDuration},TransitionProps:a}),l=FR.useClasses(s),u=()=>{if(i.anchorReference==="anchorPosition")return n.anchorPosition;const y=kT(n.anchorEl),S=(y&&y.nodeType===1?y:qu(o.current).body).getBoundingClientRect();return{top:S.top+QY(S,i.anchorOrigin.vertical),left:S.left+tq(S,i.anchorOrigin.horizontal)}},c=y=>({vertical:QY(y,i.transformOrigin.vertical),horizontal:tq(y,i.transformOrigin.horizontal)}),h=y=>{const x={width:y.offsetWidth,height:y.offsetHeight},S=c(x);if(i.anchorReference==="none")return{top:null,left:null,transformOrigin:eq(S)};const b=u();let w=b.top-S.vertical,A=b.left-S.horizontal;const T=w+x.height,M=A+x.width,C=dh(kT(n.anchorEl)),E=C.innerHeight-i.marginThreshold,D=C.innerWidth-i.marginThreshold;if(w<i.marginThreshold){const I=w-i.marginThreshold;w-=I,S.vertical+=I}else if(T>E){const I=T-E;w-=I,S.vertical+=I}if(A<i.marginThreshold){const I=A-i.marginThreshold;A-=I,S.horizontal+=I}else if(M>D){const I=M-D;A-=I,S.horizontal+=I}return{top:`${Math.round(w)}px`,left:`${Math.round(A)}px`,transformOrigin:eq(S)}},f=()=>{const y=o.current;if(!y)return;const x=h(y);x.top!==null&&(y.style.top=x.top),x.left!==null&&(y.style.left=x.left),y.style.transformOrigin=x.transformOrigin},d=()=>{var y,x;(y=n.TransitionProps)!=null&&y.onEntering&&((x=n.TransitionProps)==null||x.onEntering()),f()};Bt(()=>{n.open&&f()}),typeof n.action=="function"&&n.action({updatePosition:()=>{n.open&&f()}});let p,v,g;Bt(la(()=>[n.anchorEl,n.open,f],()=>{if(v==null||v(),!n.open)return;const y=kT(n.anchorEl),x=dh(y);p=bV(()=>f()),v=()=>{p&&(p.clear(),x.removeEventListener("resize",p),p=void 0),g&&(g.disconnect(),g=void 0)},y&&globalThis.ResizeObserver&&(g=new ResizeObserver(()=>f()),g.observe(y)),x.addEventListener("resize",p)})),Pe(()=>v==null?void 0:v());const m=()=>{let y=i.transitionDuration;return i.transitionDuration==="auto"&&!i.TransitionComponent.muiSupportAuto&&(y=void 0),y},_=()=>n.container||(n.anchorEl?qu(kT(n.anchorEl)).body:void 0);return O(jre,G({BackdropProps:{invisible:!0},get class(){return Ot(l.root,n.class)},get container(){return _()},get open(){return n.open},ownerState:s},r,{get children(){return O(i.TransitionComponent,G({appear:!0,get in(){return n.open},onEntering:d,get timeout(){return m()}},a,{get children(){return O(Yre,G({get elevation(){return i.elevation}},()=>i.PaperProps,{ref:o,get class(){return Ot(l.paper,i.PaperProps.class)},get children(){return n.children}}))}}))}}))});function Kre(e){return Zt("MuiMenu",e)}qt("MuiMenu",["root","paper","list"]);const zR=Pt()({name:"MuiMenu",selfPropNames:["anchorEl","autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","open","PopoverClasses","transitionDuration","TransitionProps","variant"],utilityClass:Kre,slotClasses:()=>({root:["root"],paper:["paper"],list:["list"]})}),Zre={vertical:"top",horizontal:"right"},Jre={vertical:"top",horizontal:"left"},Qre=vt(qre,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),tie=vt(Lh,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),eie=vt($re,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),nie=zR.defineComponent(function(t){const n=yi(t),r=zR.useThemeProps({props:t}),[,i]=Yt(r,["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"]),a=G({autoFocus:!0,disableAutoFocusItem:!1,MenuListProps:{},PaperProps:{},transitionDuration:"auto",variant:"selectedMenu"},r),[,o]=Yt(G(()=>r.TransitionProps||{}),["onEntering"]),s=$i(),l=()=>s.direction==="rtl",u=G(a,{TransitionProps:o}),c=zR.useClasses(u),h=()=>a.autoFocus&&!a.disableAutoFocusItem&&r.open,f=()=>{var _,y;(_=r.TransitionProps)!=null&&_.onEntering&&((y=r.TransitionProps)==null||y.onEntering())},d=_=>{_.key==="Tab"&&(_.preventDefault(),r.onClose&&r.onClose(_,"tabKeyDown"))},p=P2(()=>r.children),v=()=>{let _=-1,y=0;for(const x of p())Hy(x)&&(x.props.disabled||(a.variant==="selectedMenu"&&x.props.selected||_===-1)&&(_=y)),y++;return _},g=G({component:tie},()=>a.PaperProps,{classes:G(()=>a.PaperProps.classes,{get root(){return c.paper}})}),m=G({onEntering:f},o);return O(Qre,G({get classes(){return r.PopoverClasses},get onClose(){return r.onClose},anchorOrigin:{vertical:"bottom",get horizontal(){return l()?"right":"left"}},get transformOrigin(){return l()?Zre:Jre},PaperProps:g,get class(){return c.root},get open(){return r.open},ref:n,get transitionDuration(){return a.transitionDuration},TransitionProps:m,ownerState:u},i,{get children(){return O(eie,G({onKeyDown:d,get autoFocus(){return mt(()=>!!a.autoFocus)()&&(v()===-1||a.disableAutoFocusItem)},get autoFocusItem(){return h()},get variant(){return a.variant}},()=>a.MenuListProps,{get class(){return Ot(c.list,a.MenuListProps.class)},get children(){return p()}}))}}))});function rie(e){return Zt("MuiMenuItem",e)}const q_=qt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),UR=Pt()({name:"MuiMenuItem",selfPropNames:["autoFocus","classes","dense","disabled","disableGutters","divider","selected"],utilityClass:rie,slotClasses:e=>({root:["root",e.dense&&"dense",e.disabled&&"disabled",!e.disableGutters&&"gutters",e.divider&&"divider",e.selected&&"selected"]})}),iie=vt($s,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(({theme:e,ownerState:t})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap",...!t.disableGutters&&{paddingLeft:16,paddingRight:16},...t.divider&&{borderBottom:`1px solid ${e.palette.divider}`,backgroundClip:"padding-box"},"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${q_.selected}`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${q_.focusVisible}`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${q_.selected}:hover`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${q_.focusVisible}`]:{backgroundColor:e.palette.action.focus},[`&.${q_.disabled}`]:{opacity:e.palette.action.disabledOpacity},[`& + .${BY.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${BY.inset}`]:{marginLeft:52},[`& .${HC.root}`]:{marginTop:0,marginBottom:0},[`& .${HC.inset}`]:{paddingLeft:36},[`& .${ZY.root}`]:{minWidth:36},...!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},...t.dense&&{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${ZY.root} svg`]:{fontSize:"1.25rem"}}})),aie=UR.defineComponent(function(t){const n=yi(t),r=UR.useThemeProps({props:t}),[,i]=Yt(r,["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"]),a=G({autoFocus:!1,component:"li",dense:!1,divider:!1,disableGutters:!1,role:"menuitem"},r),o=Ln(Rv),s={get dense(){return a.dense||o.dense||!1},get disableGutters(){return a.disableGutters}};Bt(()=>{a.autoFocus&&n.current&&$e(()=>n.current.focus())});const l=G(r,{get dense(){return s.dense},get divider(){return a.divider},get disableGutters(){return a.disableGutters}}),u=UR.useClasses(r),c=()=>{if(!r.disabled)return r.tabIndex!==void 0?r.tabIndex:-1};return O(Rv.Provider,{value:s,get children(){return O(iie,G({ref:n,get role(){return a.role},get tabIndex(){return c()},get component(){return a.component},get focusVisibleClassName(){var h;return Ot((h=l.classes)==null?void 0:h.focusVisible,r.focusVisibleClassName)}},i,{ownerState:l,classes:u}))}})});var oie=ee('<svg><path d="M7 10l5 5 5-5z"></svg>',!1,!0);const tht=Ro(()=>oie(),"ArrowDropDown");function eht(e){return Zt("MuiNativeSelect",e)}const BV=qt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),sie=e=>{const t={select:["select",e.variant,e.disabled&&"disabled",e.multiple&&"multiple"],icon:["icon",e.variant&&`icon${lt(e.variant)}`,e.open&&"iconOpen",e.disabled&&"disabled"]};return Lct(t,eht,e.classes)},nht=({ownerState:e,theme:t})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},[`&.${BV.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:t.palette.background.paper},"&&&":{paddingRight:24,minWidth:16},...e.variant==="filled"&&{"&&&":{paddingRight:32}},...e.variant==="outlined"&&{borderRadius:t.shape.borderRadius,"&:focus":{borderRadius:t.shape.borderRadius},"&&&":{paddingRight:32}}}),lie=vt("select",{name:"MuiNativeSelect",slot:"Select",skipProps:Po,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],{[`&.${BV.multiple}`]:t.multiple}]}})(nht),rht=({ownerState:e,theme:t})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:t.palette.action.active,[`&.${BV.disabled}`]:{color:t.palette.action.disabled},...e.open&&{transform:"rotate(180deg)"},...e.variant==="filled"&&{right:7},...e.variant==="outlined"&&{right:7}}),uie=vt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${lt(n.variant)}`],n.open&&t.iconOpen]}})(rht),iht=function(t){const[,n]=Yt(t,["class","disabled","IconComponent","inputRef","variant"]),r=G({variant:"standard"},t),i=G(t,{get disabled(){return t.disabled},get variant(){return r.variant}}),a=sie(i);return[O(lie,G({ownerState:i,get class(){return Ot(a.select,t.class)},get disabled(){return t.disabled}},n)),O(Xe,{get when(){return!t.multiple},get children(){return O(uie,{get as(){return t.IconComponent},ownerState:i,get class(){return a.icon}})}})]},VR=Pt()({name:"MuiNativeSelect",selfPropNames:["children","classes","IconComponent","input","inputProps","onChange","value","variant"],utilityClass:eht,slotClasses:()=>({root:["root"]})}),nq=()=>O(z2,{});VR.defineComponent(function(t){const n=VR.useThemeProps({props:t}),[,r]=Yt(n,["class","children","classes","IconComponent","input","inputProps","variant"]),i=G({classes:{},IconComponent:tht,input:nq},n);if(i.input!==nq)throw new Error("NativeSelect 'input' custom property is not supported.");const a=Gl(),o=Ph({props:n,muiFormControl:a,states:["variant"]}),s=G(n,{get classes(){return i.classes}}),l=VR.useClasses(s),[,u]=Yt(i.classes,["root"]),c=G({get children(){return n.children},classes:u,get IconComponent(){return i.IconComponent},get variant(){return o.variant},type:void 0},()=>n.inputProps||{});return O(z2,G({inputComponent:iht,inputProps:c},r,{get class(){return Ot(l.root,n.class)}}))});var cie=ee("<span>"),hie=ee("<span class=notranslate>&#8203;");const fie=Pt()({name:"MuiNotchedOutline",selfPropNames:["disabled","error","focused","label","notched"]}),die=vt("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),pie=vt("legend")(({ownerState:e,theme:t})=>({float:"unset",...!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},...e.withLabel&&{display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"},...e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})}}})),vie=fie.component(function({allProps:t,otherProps:n,props:r}){const i=()=>r.label!=null&&r.label!=="",a=G(t,{get withLabel(){return i()}});return O(die,G(n,{"aria-hidden":!0,get class(){return n.class},ownerState:a,get children(){return O(pie,{ownerState:a,get children(){return O(Xe,{get when(){return i()},get fallback(){return hie()},get children(){var o=cie();return le(o,()=>r.label),o}})}})}}))});function gie(e){return Zt("MuiOutlinedInput",e)}const af={...$y,...qt("MuiOutlinedInput",["root","notchedOutline","input"])},mie=Pt()({name:"MuiOutlinedInput",propDefaults:({set:e})=>e({components:{},fullWidth:!1,inputComponent:"input",multiline:!1,type:"text"}),selfPropNames:["classes","label","notched"],utilityClass:gie,slotClasses:()=>({root:["root"],notchedOutline:["notchedOutline"],input:["input"]})}),yie=vt(k2,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiOutlinedInput",slot:"Root",overridesResolver:N2})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:e.shape.borderRadius,[`&:hover .${af.notchedOutline}`]:{borderColor:e.palette.text.primary},"@media (hover: none)":{[`&:hover .${af.notchedOutline}`]:{borderColor:n}},[`&.${af.focused} .${af.notchedOutline}`]:{borderColor:e.palette[t.color].main,borderWidth:2},[`&.${af.error} .${af.notchedOutline}`]:{borderColor:e.palette.error.main},[`&.${af.disabled} .${af.notchedOutline}`]:{borderColor:e.palette.action.disabled},...t.startAdornment&&{paddingLeft:14},...t.endAdornment&&{paddingRight:14},...t.multiline&&{padding:"16.5px 14px",...t.size==="small"&&{padding:"8.5px 14px"}}}}),_ie=vt(vie,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>({borderColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"})),xie=vt(F2,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:B2})(({theme:e,ownerState:t})=>({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"},...t.size==="small"&&{padding:"8.5px 14px"},...t.multiline&&{padding:0},...t.startAdornment&&{paddingLeft:0},...t.endAdornment&&{paddingRight:0}})),aht=mie.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=Gl(),o=Ph({props:t,muiFormControl:a,states:["required"]}),s=mt(()=>{const u=i.label;return u!=null&&u!==""&&o.required?[u,"","*"]:u}),l=G(n,()=>i.classes||{},{notchedOutline:null});return O(RV,G({renderSuffix:u=>O(_ie,{get class(){return n.notchedOutline},get label(){return s()},get notched(){return mt(()=>typeof i.notched<"u")()?i.notched:!!(u.startAdornment||u.filled||u.focused)}})},r,{get components(){return{Root:yie,Input:xie,...r.components||{}}},classes:l}))});var So="top",Xs="bottom",js="right",wo="left",kV="auto",vS=[So,Xs,js,wo],jy="start",d1="end",bie="clippingParents",oht="viewport",K_="popper",Sie="reference",rq=vS.reduce(function(e,t){return e.concat([t+"-"+jy,t+"-"+d1])},[]),sht=[].concat(vS,[kV]).reduce(function(e,t){return e.concat([t,t+"-"+jy,t+"-"+d1])},[]),wie="beforeRead",Tie="read",Mie="afterRead",Aie="beforeMain",Cie="main",Eie="afterMain",Die="beforeWrite",Iie="write",Lie="afterWrite",Pie=[wie,Tie,Mie,Aie,Cie,Eie,Die,Iie,Lie];function Ku(e){return e?(e.nodeName||"").toLowerCase():null}function Qo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ov(e){var t=Qo(e).Element;return e instanceof t||e instanceof Element}function Us(e){var t=Qo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function FV(e){if(typeof ShadowRoot>"u")return!1;var t=Qo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Rie(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},a=t.elements[n];!Us(a)||!Ku(a)||(Object.assign(a.style,r),Object.keys(i).forEach(function(o){var s=i[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function Oie(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],a=t.attributes[r]||{},o=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=o.reduce(function(l,u){return l[u]="",l},{});!Us(i)||!Ku(i)||(Object.assign(i.style,s),Object.keys(a).forEach(function(l){i.removeAttribute(l)}))})}}const Nie={name:"applyStyles",enabled:!0,phase:"write",fn:Rie,effect:Oie,requires:["computeStyles"]};function Bu(e){return e.split("-")[0]}var lv=Math.max,WC=Math.min,Yy=Math.round;function pB(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lht(){return!/^((?!chrome|android).)*safari/i.test(pB())}function qy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&Us(e)&&(i=e.offsetWidth>0&&Yy(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Yy(r.height)/e.offsetHeight||1);var o=Ov(e)?Qo(e):window,s=o.visualViewport,l=!lht()&&n,u=(r.left+(l&&s?s.offsetLeft:0))/i,c=(r.top+(l&&s?s.offsetTop:0))/a,h=r.width/i,f=r.height/a;return{width:h,height:f,top:c,right:u+h,bottom:c+f,left:u,x:u,y:c}}function zV(e){var t=qy(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function uht(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&FV(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vh(e){return Qo(e).getComputedStyle(e)}function Bie(e){return["table","td","th"].indexOf(Ku(e))>=0}function wd(e){return((Ov(e)?e.ownerDocument:e.document)||window.document).documentElement}function U2(e){return Ku(e)==="html"?e:e.assignedSlot||e.parentNode||(FV(e)?e.host:null)||wd(e)}function iq(e){return!Us(e)||vh(e).position==="fixed"?null:e.offsetParent}function kie(e){var t=/firefox/i.test(pB()),n=/Trident/i.test(pB());if(n&&Us(e)){var r=vh(e);if(r.position==="fixed")return null}var i=U2(e);for(FV(i)&&(i=i.host);Us(i)&&["html","body"].indexOf(Ku(i))<0;){var a=vh(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function gS(e){for(var t=Qo(e),n=iq(e);n&&Bie(n)&&vh(n).position==="static";)n=iq(n);return n&&(Ku(n)==="html"||Ku(n)==="body"&&vh(n).position==="static")?t:n||kie(e)||t}function UV(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qx(e,t,n){return lv(e,WC(t,n))}function Fie(e,t,n){var r=Qx(e,t,n);return r>n?n:r}function cht(){return{top:0,right:0,bottom:0,left:0}}function hht(e){return Object.assign({},cht(),e)}function fht(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var zie=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,hht(typeof t!="number"?t:fht(t,vS))};function Uie(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=Bu(n.placement),l=UV(s),u=[wo,js].indexOf(s)>=0,c=u?"height":"width";if(!(!a||!o)){var h=zie(i.padding,n),f=zV(a),d=l==="y"?So:wo,p=l==="y"?Xs:js,v=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],g=o[l]-n.rects.reference[l],m=gS(a),_=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,y=v/2-g/2,x=h[d],S=_-f[c]-h[p],b=_/2-f[c]/2+y,w=Qx(x,b,S),A=l;n.modifiersData[r]=(t={},t[A]=w,t.centerOffset=w-b,t)}}function Vie(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||uht(t.elements.popper,i)&&(t.elements.arrow=i))}const Gie={name:"arrow",enabled:!0,phase:"main",fn:Uie,effect:Vie,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ky(e){return e.split("-")[1]}var Hie={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wie(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:Yy(n*i)/i||0,y:Yy(r*i)/i||0}}function aq(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,h=e.isFixed,f=o.x,d=f===void 0?0:f,p=o.y,v=p===void 0?0:p,g=typeof c=="function"?c({x:d,y:v}):{x:d,y:v};d=g.x,v=g.y;var m=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),y=wo,x=So,S=window;if(u){var b=gS(n),w="clientHeight",A="clientWidth";if(b===Qo(n)&&(b=wd(n),vh(b).position!=="static"&&s==="absolute"&&(w="scrollHeight",A="scrollWidth")),b=b,i===So||(i===wo||i===js)&&a===d1){x=Xs;var T=h&&b===S&&S.visualViewport?S.visualViewport.height:b[w];v-=T-r.height,v*=l?1:-1}if(i===wo||(i===So||i===Xs)&&a===d1){y=js;var M=h&&b===S&&S.visualViewport?S.visualViewport.width:b[A];d-=M-r.width,d*=l?1:-1}}var C=Object.assign({position:s},u&&Hie),E=c===!0?Wie({x:d,y:v},Qo(n)):{x:d,y:v};if(d=E.x,v=E.y,l){var D;return Object.assign({},C,(D={},D[x]=_?"0":"",D[y]=m?"0":"",D.transform=(S.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",D))}return Object.assign({},C,(t={},t[x]=_?v+"px":"",t[y]=m?d+"px":"",t.transform="",t))}function $ie(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,s=n.roundOffsets,l=s===void 0?!0:s,u={placement:Bu(t.placement),variation:Ky(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,aq(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,aq(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Xie={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:$ie,data:{}};var FT={passive:!0};function jie(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=i===void 0?!0:i,o=r.resize,s=o===void 0?!0:o,l=Qo(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&u.forEach(function(c){c.addEventListener("scroll",n.update,FT)}),s&&l.addEventListener("resize",n.update,FT),function(){a&&u.forEach(function(c){c.removeEventListener("scroll",n.update,FT)}),s&&l.removeEventListener("resize",n.update,FT)}}const Yie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jie,data:{}};var qie={left:"right",right:"left",bottom:"top",top:"bottom"};function EM(e){return e.replace(/left|right|bottom|top/g,function(t){return qie[t]})}var Kie={start:"end",end:"start"};function oq(e){return e.replace(/start|end/g,function(t){return Kie[t]})}function VV(e){var t=Qo(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function GV(e){return qy(wd(e)).left+VV(e).scrollLeft}function Zie(e,t){var n=Qo(e),r=wd(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,l=0;if(i){a=i.width,o=i.height;var u=lht();(u||!u&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:a,height:o,x:s+GV(e),y:l}}function Jie(e){var t,n=wd(e),r=VV(e),i=(t=e.ownerDocument)==null?void 0:t.body,a=lv(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=lv(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+GV(e),l=-r.scrollTop;return vh(i||n).direction==="rtl"&&(s+=lv(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function HV(e){var t=vh(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function dht(e){return["html","body","#document"].indexOf(Ku(e))>=0?e.ownerDocument.body:Us(e)&&HV(e)?e:dht(U2(e))}function tb(e,t){var n;t===void 0&&(t=[]);var r=dht(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),a=Qo(r),o=i?[a].concat(a.visualViewport||[],HV(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(tb(U2(o)))}function vB(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Qie(e,t){var n=qy(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function sq(e,t,n){return t===oht?vB(Zie(e,n)):Ov(t)?Qie(t,n):vB(Jie(wd(e)))}function tae(e){var t=tb(U2(e)),n=["absolute","fixed"].indexOf(vh(e).position)>=0,r=n&&Us(e)?gS(e):e;return Ov(r)?t.filter(function(i){return Ov(i)&&uht(i,r)&&Ku(i)!=="body"}):[]}function eae(e,t,n,r){var i=t==="clippingParents"?tae(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce(function(l,u){var c=sq(e,u,r);return l.top=lv(c.top,l.top),l.right=WC(c.right,l.right),l.bottom=WC(c.bottom,l.bottom),l.left=lv(c.left,l.left),l},sq(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function pht(e){var t=e.reference,n=e.element,r=e.placement,i=r?Bu(r):null,a=r?Ky(r):null,o=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(i){case So:l={x:o,y:t.y-n.height};break;case Xs:l={x:o,y:t.y+t.height};break;case js:l={x:t.x+t.width,y:s};break;case wo:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var u=i?UV(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(a){case jy:l[u]=l[u]-(t[c]/2-n[c]/2);break;case d1:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function p1(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,a=n.strategy,o=a===void 0?e.strategy:a,s=n.boundary,l=s===void 0?bie:s,u=n.rootBoundary,c=u===void 0?oht:u,h=n.elementContext,f=h===void 0?K_:h,d=n.altBoundary,p=d===void 0?!1:d,v=n.padding,g=v===void 0?0:v,m=hht(typeof g!="number"?g:fht(g,vS)),_=f===K_?Sie:K_,y=e.rects.popper,x=e.elements[p?_:f],S=eae(Ov(x)?x:x.contextElement||wd(e.elements.popper),l,c,o),b=qy(e.elements.reference),w=pht({reference:b,element:y,strategy:"absolute",placement:i}),A=vB(Object.assign({},y,w)),T=f===K_?A:b,M={top:S.top-T.top+m.top,bottom:T.bottom-S.bottom+m.bottom,left:S.left-T.left+m.left,right:T.right-S.right+m.right},C=e.modifiersData.offset;if(f===K_&&C){var E=C[i];Object.keys(M).forEach(function(D){var I=[js,Xs].indexOf(D)>=0?1:-1,L=[So,Xs].indexOf(D)>=0?"y":"x";M[D]+=E[L]*I})}return M}function nae(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?sht:l,c=Ky(r),h=c?s?rq:rq.filter(function(p){return Ky(p)===c}):vS,f=h.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=h);var d=f.reduce(function(p,v){return p[v]=p1(e,{placement:v,boundary:i,rootBoundary:a,padding:o})[Bu(v)],p},{});return Object.keys(d).sort(function(p,v){return d[p]-d[v]})}function rae(e){if(Bu(e)===kV)return[];var t=EM(e);return[oq(e),t,oq(t)]}function iae(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,h=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,v=n.allowedAutoPlacements,g=t.options.placement,m=Bu(g),_=m===g,y=l||(_||!p?[EM(g)]:rae(g)),x=[g].concat(y).reduce(function(K,$){return K.concat(Bu($)===kV?nae(t,{placement:$,boundary:c,rootBoundary:h,padding:u,flipVariations:p,allowedAutoPlacements:v}):$)},[]),S=t.rects.reference,b=t.rects.popper,w=new Map,A=!0,T=x[0],M=0;M<x.length;M++){var C=x[M],E=Bu(C),D=Ky(C)===jy,I=[So,Xs].indexOf(E)>=0,L=I?"width":"height",P=p1(t,{placement:C,boundary:c,rootBoundary:h,altBoundary:f,padding:u}),B=I?D?js:wo:D?Xs:So;S[L]>b[L]&&(B=EM(B));var N=EM(B),k=[];if(a&&k.push(P[E]<=0),s&&k.push(P[B]<=0,P[N]<=0),k.every(function(K){return K})){T=C,A=!1;break}w.set(C,k)}if(A)for(var U=p?3:1,Z=function($){var ot=x.find(function(tt){var et=w.get(tt);if(et)return et.slice(0,$).every(function(xt){return xt})});if(ot)return T=ot,"break"},nt=U;nt>0;nt--){var ct=Z(nt);if(ct==="break")break}t.placement!==T&&(t.modifiersData[r]._skip=!0,t.placement=T,t.reset=!0)}}const aae={name:"flip",enabled:!0,phase:"main",fn:iae,requiresIfExists:["offset"],data:{_skip:!1}};function lq(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function uq(e){return[So,js,Xs,wo].some(function(t){return e[t]>=0})}function oae(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=p1(t,{elementContext:"reference"}),s=p1(t,{altBoundary:!0}),l=lq(o,r),u=lq(s,i,a),c=uq(l),h=uq(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}const sae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oae};function lae(e,t,n){var r=Bu(e),i=[wo,So].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[wo,js].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}function uae(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=i===void 0?[0,0]:i,o=sht.reduce(function(c,h){return c[h]=lae(h,t.rects,a),c},{}),s=o[t.placement],l=s.x,u=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=o}const cae={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uae};function hae(e){var t=e.state,n=e.name;t.modifiersData[n]=pht({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const fae={name:"popperOffsets",enabled:!0,phase:"read",fn:hae,data:{}};function dae(e){return e==="x"?"y":"x"}function pae(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=i===void 0?!0:i,o=n.altAxis,s=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,h=n.padding,f=n.tether,d=f===void 0?!0:f,p=n.tetherOffset,v=p===void 0?0:p,g=p1(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),m=Bu(t.placement),_=Ky(t.placement),y=!_,x=UV(m),S=dae(x),b=t.modifiersData.popperOffsets,w=t.rects.reference,A=t.rects.popper,T=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,M=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(b){if(a){var D,I=x==="y"?So:wo,L=x==="y"?Xs:js,P=x==="y"?"height":"width",B=b[x],N=B+g[I],k=B-g[L],U=d?-A[P]/2:0,Z=_===jy?w[P]:A[P],nt=_===jy?-A[P]:-w[P],ct=t.elements.arrow,K=d&&ct?zV(ct):{width:0,height:0},$=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:cht(),ot=$[I],tt=$[L],et=Qx(0,w[P],K[P]),xt=y?w[P]/2-U-et-ot-M.mainAxis:Z-et-ot-M.mainAxis,St=y?-w[P]/2+U+et+tt+M.mainAxis:nt+et+tt+M.mainAxis,X=t.elements.arrow&&gS(t.elements.arrow),Ct=X?x==="y"?X.clientTop||0:X.clientLeft||0:0,It=(D=C==null?void 0:C[x])!=null?D:0,Jt=B+xt-It-Ct,Gt=B+St-It,ve=Qx(d?WC(N,Jt):N,B,d?lv(k,Gt):k);b[x]=ve,E[x]=ve-B}if(s){var W,F=x==="x"?So:wo,st=x==="x"?Xs:js,bt=b[S],At=S==="y"?"height":"width",Et=bt+g[F],be=bt-g[st],j=[So,wo].indexOf(m)!==-1,zt=(W=C==null?void 0:C[S])!=null?W:0,ie=j?Et:bt-w[At]-A[At]-zt+M.altAxis,Rt=j?bt+w[At]+A[At]-zt-M.altAxis:be,re=d&&j?Fie(ie,bt,Rt):Qx(d?ie:Et,bt,d?Rt:be);b[S]=re,E[S]=re-bt}t.modifiersData[r]=E}}const vae={name:"preventOverflow",enabled:!0,phase:"main",fn:pae,requiresIfExists:["offset"]};function gae(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function mae(e){return e===Qo(e)||!Us(e)?VV(e):gae(e)}function yae(e){var t=e.getBoundingClientRect(),n=Yy(t.width)/e.offsetWidth||1,r=Yy(t.height)/e.offsetHeight||1;return n!==1||r!==1}function _ae(e,t,n){n===void 0&&(n=!1);var r=Us(t),i=Us(t)&&yae(t),a=wd(t),o=qy(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ku(t)!=="body"||HV(a))&&(s=mae(t)),Us(t)?(l=qy(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=GV(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function xae(e){var t=new Map,n=new Set,r=[];e.forEach(function(a){t.set(a.name,a)});function i(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&i(l)}}),r.push(a)}return e.forEach(function(a){n.has(a.name)||i(a)}),r}function bae(e){var t=xae(e);return Pie.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Sae(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function wae(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var cq={placement:"bottom",modifiers:[],strategy:"absolute"};function hq(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Tae(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,a=i===void 0?cq:i;return function(s,l,u){u===void 0&&(u=a);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},cq,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},h=[],f=!1,d={state:c,setOptions:function(m){var _=typeof m=="function"?m(c.options):m;v(),c.options=Object.assign({},a,c.options,_),c.scrollParents={reference:Ov(s)?tb(s):s.contextElement?tb(s.contextElement):[],popper:tb(l)};var y=bae(wae([].concat(r,c.options.modifiers)));return c.orderedModifiers=y.filter(function(x){return x.enabled}),p(),d.update()},forceUpdate:function(){if(!f){var m=c.elements,_=m.reference,y=m.popper;if(hq(_,y)){c.rects={reference:_ae(_,gS(y),c.options.strategy==="fixed"),popper:zV(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var S=c.orderedModifiers[x],b=S.fn,w=S.options,A=w===void 0?{}:w,T=S.name;typeof b=="function"&&(c=b({state:c,options:A,name:T,instance:d})||c)}}}},update:Sae(function(){return new Promise(function(g){d.forceUpdate(),g(c)})}),destroy:function(){v(),f=!0}};if(!hq(s,l))return d;d.setOptions(u).then(function(g){!f&&u.onFirstUpdate&&u.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var m=g.name,_=g.options,y=_===void 0?{}:_,x=g.effect;if(typeof x=="function"){var S=x({state:c,name:m,instance:d,options:y}),b=function(){};h.push(S||b)}})}function v(){h.forEach(function(g){return g()}),h=[]}return d}}var Mae=[Yie,fae,Xie,Nie,cae,aae,vae,Gie,sae],Aae=Tae({defaultModifiers:Mae}),Cae=ee("<div role=tooltip>");const Eae=Pt()({name:"MuiPopperUnstyled",selfPropNames:["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","ref","transition"],propDefaults:({set:e})=>e({direction:"ltr",disablePortal:!1,keepMounted:!1,placement:"bottom",transition:!1,popperOptions:{}})});function Dae(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function gB(e){return typeof e=="function"?e():e}const Iae=function(t){const[n,r]=Yt(t,["anchorEl","children","direction","disablePortal","modifiers","open","TransitionProps","placement","popperOptions","popperRef"]),i=Dae(n.placement,n.direction),[a,o]=rt(i);let s=[];const l=ic(),u=yi();Bt(h=>{if(h&&(s=s.filter(v=>v!==h),h()),!n.anchorEl||!n.open)return;gB(n.anchorEl);let f=[{name:"preventOverflow",options:{altBoundary:n.disablePortal}},{name:"flip",options:{altBoundary:n.disablePortal}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:v})=>{o(v.placement)}}];n.modifiers!=null&&(f=f.concat(n.modifiers)),n.popperOptions&&n.popperOptions.modifiers!=null&&(f=f.concat(n.popperOptions.modifiers));const d=Aae(gB(n.anchorEl),l.ref,{placement:i,...n.popperOptions,modifiers:f});u(d);const p=()=>{d.destroy(),u(null)};return s.push(p),p}),ki(()=>{u.ref&&u.ref.forceUpdate()});const c=mt(()=>({placement:a(),TransitionProps:n.TransitionProps}));return(()=>{var h=Cae();return ny(l,h),Bv(h,r,!1,!0),le(h,(()=>{var f=mt(()=>typeof n.children=="function");return()=>f()?n.children(c()):n.children})()),h})()},Lae=Eae.component(function({otherProps:t,props:n}){const[r,i]=rt(!0),a=mt(()=>!n.keepMounted&&!n.open&&(!n.transition||r())),o=mt(()=>n.container||(n.anchorEl?qu(gB(n.anchorEl)).body:void 0));return O(R2.Provider,{value:{get in(){return n.transition&&n.open},onEnter:()=>{n.transition&&i(!1)},onExited:()=>{n.transition&&i(!0)}},get children(){return O(Xe,{get when(){return!a()},get children(){return O(Xct,{get disablePortal(){return n.disablePortal},get container(){return o()},get children(){return O(Iae,G({get anchorEl(){return n.anchorEl},get direction(){return n.direction},get disablePortal(){return n.disablePortal},get modifiers(){return n.modifiers},get open(){return mt(()=>!!n.transition)()?!r():n.open},get placement(){return n.placement},get popperOptions(){return n.popperOptions},get popperRef(){return n.popperRef}},t,{get style(){return{top:0,left:0,display:!n.open&&n.keepMounted&&(!n.transition||r())?"none":null,...t.style&&typeof t.style!="string"?t.style:{}}},get children(){return n.children}}))}})}})}})}),Pae=Pt()({name:"MuiPopper",selfPropNames:[]});Pae.component(function({otherProps:t}){const n=$i();return O(Lae,G({get direction(){return n==null?void 0:n.direction}},t))});const vht=hr(void 0);function Rae(){return Ln(vht)}var Oae=ee('<svg><path d="M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"></svg>',!1,!0);const Nae=Ro(()=>Oae(),"RadioButtonChecked");var Bae=ee('<svg><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></svg>',!1,!0);const kae=Ro(()=>Bae(),"RadioButtonUnchecked"),Fae=vt("span")({position:"relative",display:"flex"}),zae=vt(kae)({transform:"scale(1)"}),Uae=vt(Nae)(({theme:e,ownerState:t})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),...t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}));function WV(e){const t=G({checked:!1,classes:{}},e);return O(Fae,{get class(){return t.classes.root},ownerState:t,get children(){return[O(zae,{get fontSize(){return e.fontSize},get class(){return t.classes.background},ownerState:t}),O(Uae,{get fontSize(){return e.fontSize},get class(){return t.classes.dot},ownerState:t})]}})}function Vae(e){return Zt("MuiRadio",e)}const fq=qt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]),Gae=Pt()({name:"MuiRadio",propDefaults:({set:e})=>e({checkedIcon:ght,color:"primary",icon:mht,size:"medium"}),selfPropNames:["checkedIcon","classes","color","disabled","icon","size"],utilityClass:Vae,slotClasses:e=>({root:["root",`color${lt(e.color)}`]})}),Hae=vt(LV,{skipProps:Po.filter(e=>e!=="classes"),name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>[t.root,t[`color${lt(e.ownerState.color)}`]]})(({theme:e,ownerState:t})=>({color:e.palette.text.secondary,"&:hover":{backgroundColor:un(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},...t.color!=="default"&&{[`&.${fq.checked}`]:{color:e.palette[t.color].main}},[`&.${fq.disabled}`]:{color:e.palette.action.disabled}}));function Wae(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const ght=()=>O(WV,{checked:!0}),mht=()=>O(WV,{});Gae.component(function({classes:t,allProps:n,otherProps:r,props:i}){const a=Rae(),o=Ln(IV),s=()=>r.name??(o==null?void 0:o.name)??(a==null?void 0:a.name),l=()=>r.value??(o==null?void 0:o.value),u=()=>r.checked??(o==null?void 0:o.checked)??Wae(a==null?void 0:a.value,l()),c=()=>i.checkedIcon===ght&&i.icon===mht;return O(AV.Provider,{value:{get fontSize(){return i.size}},get children(){return O(Hae,G({type:"radio"},r,{ownerState:n,classes:t,get name(){return s()},get value(){return l()},get checked(){return u()},onChange:(h,f)=>{var d,p,v;(d=r.onChange)==null||d.call(r,h,f),(p=o==null?void 0:o.onChange)==null||p.call(o,h,f),(v=a==null?void 0:a.onChange)==null||v.call(a,h,f)}},()=>c()?{get children(){return O(WV,{get checked(){return u()}})},get icon(){return[]},get checkedIcon(){return[]}}:{get icon(){return i.icon},get checkedIcon(){return i.checkedIcon}}))}})});const $ae=Pt()({name:"MuiRadioGroup",selfPropNames:["defaultValue","name","onChange","value"]});$ae.component(function({props:t,otherProps:n}){const r=yi(),[i,a]=f1({controlled:()=>t.value,default:()=>t.defaultValue,name:"RadioGroup"}),o=xV(()=>t.name);return O(vht.Provider,{value:{get name(){return o()},onChange(s){a(s.target.value),t.onChange&&t.onChange(s,s.target.value)},get value(){return i()}},get children(){return O(Lne,G({role:"radiogroup",ref:r},n,{get children(){return n.children}}))}})});function Xae(e){return Zt("MuiSelect",e)}const zT=qt("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]);var jae=ee("<span class=notranslate>&#8203;");const dq=Pt()({name:"MuiSelectInput",selfPropNames:["autoFocus","autoWidth","defaultOpen","disabled","IconComponent","inputRef","MenuProps","multiple","name","native","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","value","variant"],utilityClass:Xae,slotClasses:e=>({select:["select",e.variant,e.disabled&&"disabled",e.multiple&&"multiple"],icon:["icon",`icon${lt(e.variant)}`,e.open&&"iconOpen",e.disabled&&"disabled"],nativeInput:["nativeInput"]})}),Yae=vt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${zT.select}`]:t.select},{[`&.${zT.select}`]:t[n.variant]},{[`&.${zT.multiple}`]:t.multiple}]}})(nht,{[`&.${zT.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),qae=vt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${lt(n.variant)}`],n.open&&t.iconOpen]}})(rht),Kae=vt("input",{skipProps:Po,name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function UT(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Zae(e){return e==null||typeof e=="string"&&!e.trim()}const Jae=dq.defineComponent(function(t){const n=yi(t),[,r]=Yt(t,["ref","sx","aria-describedby","aria-label","autoFocus","autoWidth","children","class","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"]),i=G({MenuProps:{},SelectDisplayProps:{},variant:"standard"},t),[a,o]=f1({controlled:()=>t.value,default:()=>t.defaultValue,name:"Select"}),[s,l]=f1({controlled:()=>t.open,default:()=>t.defaultOpen,name:"Select"}),u=yi(),c=yi(),[h,f]=rt(null),d=t.open!=null,[p,v]=rt(null),g=$=>{c.current=$,f($)},m={nodeName:"INPUT",get node(){return u.current},addEventListener($,ot){if($!=="input")throw new Error(`Invalid event name: ${$}`);u.current.addEventListener($,ot)},get value(){return a()},set value($){o($)},focus(){u.current.focus()}};Bt(la(()=>[h(),t.autoWidth],()=>{t.defaultOpen&&s()&&h()&&!d&&(v(t.autoWidth?null:h().clientWidth),c.current.focus())})),Bt(()=>{t.autoFocus&&c.current.focus()});let _;Bt(()=>{if(!t.labelId)return;const $=qu(c.current).getElementById(t.labelId);$&&(_&&$.removeEventListener("click",_),_=()=>{getSelection().isCollapsed&&c.current.focus()},$.addEventListener("click",_))});const y=($,ot)=>{$||c.current.focus(),$?t.onOpen&&t.onOpen(ot):t.onClose&&t.onClose(ot),d||(v(t.autoWidth?null:h().clientWidth),l($))},x=$=>{t.disabled||t.readOnly||$.button===0&&($.preventDefault(),c.current.focus(),y(!0,$))},S=$=>{y(!1,$)},b=P2(()=>t.children),w=$=>{const ot=a();if(t.multiple){if(!Array.isArray(ot))throw new Error("MUI: The `value` prop must be an array when using the `Select` component with `multiple`.");return ot.some(tt=>UT(tt,$.props.value))}else return UT(ot,$.props.value)},A=_B(b,$=>{if(Hy($,aie)){I(et=>[...et,$.props]),Pe(()=>I(et=>et.filter(xt=>xt!==$.props)));const ot=mt(()=>w($)),tt=G($.props,{get"aria-selected"(){return ot()},onClick:et=>T(et,tt,$.props),onKeyUp:et=>{et.key===" "&&et.preventDefault(),typeof $.props.onKeyUp=="function"&&$.props.onKeyUp(et)},role:"option",get selected(){return ot()},value:void 0,"data-value":$.props.value});return O($.Component,tt)}else return Hy($)?O($.Component,$.props):$}),T=($,ot,tt)=>{let et;const xt={props:ot},St=t.multiple;if($.currentTarget.hasAttribute("tabindex")){if(St){et=Array.isArray(a())?a().slice():[];const X=a().indexOf(xt.props.value);X===-1?et.push(xt.props.value):et.splice(X,1)}else et=xt.props.value;if(typeof tt.onClick=="function"&&tt.onClick($),a()!==et){const X=new CustomEvent("input");Object.defineProperty(X,"target",{writable:!1,value:{name:ot.name,get value(){return et},set value(Ct){m.value=Ct}}}),u.current.dispatchEvent(X),o(et),typeof ot.onChange=="function"&&ot.onChange(X,X.target)}St||y(!1,$)}},M=$=>{t.readOnly||[" ","ArrowUp","ArrowDown","Enter"].indexOf($.key)!==-1&&($.preventDefault(),y(!0,$))},C=()=>h()!==null&&!!s(),E=$=>{!C()&&t.onBlur&&(Object.defineProperty($,"target",{writable:!0,value:{value:a(),name:t.name}}),t.onBlur($))},[D,I]=hlt([]),L=()=>{const $=a();if(qct({value:$})||t.displayEmpty){if(t.renderValue)return t.renderValue($);if(t.multiple){const ot=[];for(const tt of D){if(!Array.isArray($))throw new Error("MUI: The `value` prop must be an array when using the `Select` component with `multiple`.");$.some(et=>UT(et,tt.value))&&ot.push(tt.children)}return ot.reduce((tt,et,xt)=>(tt.push(et),xt<ot.length-1&&tt.push(", "),tt),[])}else for(const ot of D)if(UT($,ot.value))return ot.children}},P=()=>{let $=p();return!t.autoWidth&&d&&h()&&($=h().clientWidth),$},B=G(()=>i.MenuProps.PaperProps,{style:G({get"min-width"(){const $=P();return typeof $=="number"?`${$}px`:void 0}},()=>i.MenuProps.PaperProps!=null?i.MenuProps.PaperProps.style:null)}),N=G({get"aria-labelledby"(){return t.labelId},role:"listbox",disableListWrap:!0},()=>i.MenuProps.MenuListProps),k=()=>typeof t.tabIndex<"u"?t.tabIndex:t.disabled?void 0:0,U=()=>i.SelectDisplayProps.id||(t.name?`mui-component-select-${t.name}`:void 0),Z=G(t,{get variant(){return i.variant},get value(){return a()},get open(){return C()}}),nt=dq.useClasses(Z),ct=()=>{const $=a();return Array.isArray($)?$.join(","):$},K=()=>{const $=L();return Zae($)?jae():$};return[O(Yae,G({ref:g,get tabIndex(){return k()},role:"button",get"aria-disabled"(){return t.disabled?"true":void 0},get"aria-expanded"(){return C()?"true":"false"},"aria-haspopup":"listbox",get"aria-label"(){return t["aria-label"]},get"aria-labelledby"(){return[t.labelId,U()].filter(Boolean).join(" ")||void 0},get"aria-describedby"(){return t["aria-describedby"]},onKeyDown:M,onMouseDown:x,onBlur:E,get onFocus(){return t.onFocus}},()=>i.SelectDisplayProps,{ownerState:Z,get sx(){return t.sx},get class(){return Ot(nt.select,t.class,i.SelectDisplayProps.class)},get id(){return U()},get children(){return K()}})),O(Kae,G({get value(){return ct()},get"data-value"(){return ct()},get name(){return t.name},"aria-hidden":!0,ref:$=>{u($),typeof t.inputRef=="function"&&t.inputRef(m),n(m)},get onChange(){return t.onChange},tabIndex:-1,get disabled(){return t.disabled},get class(){return nt.nativeInput},get autofocus(){return t.autoFocus},ownerState:Z},r)),O(qae,{get as(){return t.IconComponent},get class(){return nt.icon},ownerState:Z}),O(nie,G({get id(){return`menu-${t.name||""}`},get anchorEl(){return h()},get open(){return C()},onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},()=>i.MenuProps,{MenuListProps:N,PaperProps:B,get children(){return A()}}))]}),GR=Pt()({name:"MuiSelect",selfPropNames:["autoWidth","children","classes","defaultOpen","defaultValue","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onChange","onClose","onOpen","open","renderValue","SelectDisplayProps","value","variant"]}),$V={name:"MuiSelect",overridesResolver:(e,t)=>t.root,skipProps:[...Po,"variant"],slot:"Root"},Qae=vt(z2,$V)({}),toe=vt(aht,$V)({}),eoe=vt(Kct,$V)({});GR.defineComponent(function(t){const n=GR.useThemeProps({props:t}),[,r]=Yt(n,["autoWidth","children","classes","class","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"]),i=G({autoWidth:!1,classes:{},defaultOpen:!1,displayEmpty:!1,IconComponent:tht,multiple:!1,native:!1,variant:"outlined"},n),a=()=>i.native?iht:Jae,o=Gl(),s=Ph({props:n,muiFormControl:o,states:["variant"]}),l=()=>s.variant||i.variant,u=P2(()=>n.input),c=()=>{const[v]=u();if(v){if(Hy(v))return v;throw new Error("Invalid component")}},h=()=>{var v;return((v=c())==null?void 0:v.Component)||{standard:Qae,outlined:toe,filled:eoe}[l()]},f=G(n,{get variant(){return l()},get classes(){return i.classes}}),d=GR.useClasses(f),p=G({get children(){return n.children},get IconComponent(){return i.IconComponent},get variant(){return l()},type:void 0,get multiple(){return i.multiple}},()=>i.native?{id:n.id}:{autoWidth:i.autoWidth,defaultOpen:i.defaultOpen,displayEmpty:i.displayEmpty,labelId:n.labelId,MenuProps:n.MenuProps,onClose:n.onClose,onOpen:n.onOpen,open:n.open,renderValue:n.renderValue,SelectDisplayProps:{id:n.id,...n.SelectDisplayProps}},()=>n.inputProps,{get classes(){return n.inputProps?qv(d,n.inputProps.classes):d}},()=>{var v,g;return(g=(v=c())==null?void 0:v.props)==null?void 0:g.inputProps});return O(u1,G({get $component(){return h()}},()=>{var v;return(v=c())==null?void 0:v.props},{get inputComponent(){return a()},inputProps:p,get notched(){return n.multiple&&n.native&&l()==="outlined"?!0:void 0},get label(){return!c()&&l()==="outlined"?n.label:void 0},get class(){return n.class},get variant(){return l()}},r))});function noe(e){var t;return((t=String(e).match(/[\d.\-+]*\s*(.*)/))==null?void 0:t[1])||""}function roe(e){return parseFloat(e.toString())}function ioe(e){return Zt("suidSkeleton",e)}qt("suidSkeleton",["root","text","rectangular","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const aoe=Pt()({name:"MuiSkeleton",selfPropNames:["animation","children","classes","height","variant","width"],propDefaults:({set:e})=>e({animation:"pulse",component:"span",variant:"text"}),utilityClass:ioe,slotClasses:e=>({root:["root",e.variant,e.animation,e.hasChildren&&"withChildren",e.hasChildren&&!e.width&&"fitContent",e.hasChildren&&!e.height&&"heightAuto"]})}),ooe=vt("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const n=noe(e.shape.borderRadius)||"px",r=roe(e.shape.borderRadius);return{display:"block",backgroundColor:un(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",...t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},...t.variant==="circular"&&{borderRadius:"50%"},...t.hasChildren&&{"& > *":{visibility:"hidden"}},...t.hasChildren&&!t.width&&{maxWidth:"fit-content"},...t.hasChildren&&!t.height&&{height:"auto"}}},({ownerState:e})=>e.animation==="pulse"&&{"@keyframes pulse-animation-$id":{0:{opacity:1},50:{opacity:.4},100:{opacity:1}},animation:"pulse-animation-$id 1.5s ease-in-out 0.5s infinite"},({ownerState:e,theme:t})=>e.animation==="wave"&&{position:"relative",overflow:"hidden","@keyframes wave-animation-$id":{0:{transform:"translateX(-100%)"},50:{transform:"translateX(100%)"},100:{transform:"translateX(100%)"}},"-webkit-mask-image":"-webkit-radial-gradient(white, black);","&::after":{animation:"wave-animation-$id 1.6s linear 0.5s infinite",background:`linear-gradient(90deg, transparent, ${t.palette.action.hover}, transparent)`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}});aoe.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=()=>typeof i.children>"u"?!1:Array.isArray(i.children)?!!i.children.length:!0,o=G(t,{get hasChildren(){return a()}});return O(ooe,G(r,{get class(){return Ot(n.root,r.class)},ownerState:o,get sx(){return{width:i.width,height:i.height,...r.sx||{}}}}))});function soe(e,...t){return t.reduce((n,r,i)=>qv(n,r,{clone:!!i,sortKeys:!0}),e)}const loe=Pt()({name:"MuiStack",selfPropNames:["children","direction","divider","spacing"],propDefaults:({set:e})=>e({component:"div",direction:"column",spacing:0})});function uoe(e,t){const n=(Array.isArray(e)?e:[e]).filter(Boolean);return n.reduce((r,i,a)=>(r.push(i),a<n.length-1&&r.push(t()),r),[])}const coe=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],hoe=vt("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>[t.root]})(({theme:e,ownerState:t})=>{let n={display:"flex",...Gy({theme:e},sv({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r}))};if(t.spacing){const r=hJt(e),i=e.breakpoints.keys.reduce((l,u)=>((t.spacing[u]!=null||t.direction[u]!=null)&&(l[u]=!0),l),{}),a=sv({values:t.direction,base:i}),o=sv({values:t.spacing,base:i});n=soe(n,Gy({theme:e},o,(l,u)=>({"& > :not(style) + :not(style)":{margin:0,[`margin${coe(u?a[u]:t.direction)}`]:r(l)}})))}return n});loe.component(function({allProps:t,otherProps:n,props:r}){return n=MV(n),O(hoe,G({get as(){return n.component},ownerState:t},n,{get children(){return O(Xe,{get when(){return r.divider},get fallback(){return r.children},get children(){return uoe(r.children,()=>r.divider)}})}}))});function foe(e){return Zt("MuiSwitch",e)}const Oa=qt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),doe=Pt()({name:"MuiSwitch",selfPropNames:["checkedIcon","classes","color","disabled","icon","size","value"],propDefaults:({set:e})=>e({color:"primary",size:"medium"}),utilityClass:foe,slotClasses:e=>({root:["root",!!e.edge&&`edge${lt(e.edge)}`,`size${lt(e.size)}`],switchBase:["switchBase",`color${lt(e.color)}`,!!e.checked&&"checked",!!e.disabled&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]})}),poe=vt("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${lt(n.edge)}`],t[`size${lt(n.size)}`]]}})(({ownerState:e})=>({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},...e.edge==="start"&&{marginLeft:-8},...e.edge==="end"&&{marginRight:-8},...e.size==="small"&&{width:40,height:24,padding:7,[`& .${Oa.thumb}`]:{width:16,height:16},[`& .${Oa.switchBase}`]:{padding:4,[`&.${Oa.checked}`]:{transform:"translateX(16px)"}}}})),voe=vt(LV,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${Oa.input}`]:t.input},n.color!=="default"&&t[`color${lt(n.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300],transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Oa.checked}`]:{transform:"translateX(20px)"},[`&.${Oa.disabled}`]:{color:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]},[`&.${Oa.checked} + .${Oa.track}`]:{opacity:.5},[`&.${Oa.disabled} + .${Oa.track}`]:{opacity:e.palette.mode==="light"?.12:.2},[`& .${Oa.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>({"&:hover":{backgroundColor:un(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},...t.color!=="default"&&{[`&.${Oa.checked}`]:{color:e.palette[t.color].main,"&:hover":{backgroundColor:un(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Oa.disabled}`]:{color:e.palette.mode==="light"?Lv(e.palette[t.color].main,.62):Iv(e.palette[t.color].main,.55)}},[`&.${Oa.checked} + .${Oa.track}`]:{backgroundColor:e.palette[t.color].main}}})),goe=vt("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.palette.mode==="light"?e.palette.common.black:e.palette.common.white,opacity:e.palette.mode==="light"?.38:.3})),moe=vt("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}));doe.component(function({allProps:t,props:n,classes:r,otherProps:i}){const a=()=>O(moe,{get class(){return r.thumb},ownerState:t}),o=G(r,{get root(){return r.switchBase}}),[,s]=Yt(i,["sx"]),l=G(s,{get checkedIcon(){return n.checkedIcon||a},get disabled(){return n.disabled},get icon(){return n.icon||a},get value(){return n.value}});return O(poe,{get class(){return Ot(r.root,i.class)},get sx(){return i.sx},ownerState:t,get children(){return[O(voe,G({type:"checkbox",ownerState:t},l,{classes:o})),O(goe,{get class(){return r.track},ownerState:t})]}})});const yht=hr();function yoe(e){return Zt("MuiTable",e)}qt("MuiTable",["root","stickyHeader"]);const _oe=Pt()({name:"MuiTable",propDefaults:({set:e})=>e({component:_ht,padding:"normal",size:"medium",stickyHeader:!1}),selfPropNames:["children","classes","padding","size","stickyHeader"],utilityClass:yoe,slotClasses:e=>({root:["root",e.stickyHeader&&"stickyHeader"]})}),xoe=vt("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>[t.root,e.ownerState.stickyHeader&&t.stickyHeader]})(({theme:e,ownerState:t})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"},...t.stickyHeader&&{borderCollapse:"separate"}})),_ht="table";_oe.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(yht.Provider,{value:{get padding(){return i.padding},get size(){return i.size},get stickyHeader(){return i.stickyHeader}},get children(){return O(xoe,G({get role(){return t.component===_ht?null:"table"}},r,{get class(){return Ot(n.root,r.class)},ownerState:t,get children(){return i.children}}))}})});const mS=hr();function boe(e){return Zt("MuiTableBody",e)}qt("MuiTableBody",["root"]);const Soe=Pt()({name:"MuiTableBody",propDefaults:({set:e})=>e({component:xht}),selfPropNames:["children","classes"],utilityClass:boe,slotClasses:()=>({root:["root"]})}),woe=vt("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),xht="tbody";Soe.component(function({allProps:t,classes:n,props:r,otherProps:i}){return O(mS.Provider,{value:{variant:"body"},get children(){return O(woe,G({get role(){return i.component===xht?null:"rowgroup"}},i,{get class(){return Ot(n.root,i.class)},ownerState:t,get children(){return r.children}}))}})});function Toe(e){return Zt("MuiTableCell",e)}const Moe=qt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),pq=Pt()({name:"MuiTableCell",propDefaults:({set:e})=>e({align:"inherit"}),selfPropNames:["align","children","classes","component","padding","scope","size","sortDirection","variant"],autoCallUseClasses:!1,utilityClass:Toe,slotClasses:e=>({root:["root",e.variant,e.stickyHeader&&"stickyHeader",e.align!=="inherit"&&`align${lt(e.align)}`,e.padding!=="normal"&&`padding${lt(e.padding)}`,`size${lt(e.size)}`]})}),Aoe=vt("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>[t.root,t[e.ownerState.variant],t[`size${lt(e.ownerState.size)}`],e.ownerState.padding!=="normal"&&t[`padding${lt(e.ownerState.padding)}`],e.ownerState.align!=="inherit"&&t[`align${lt(e.ownerState.align)}`],e.ownerState.stickyHeader&&t.stickyHeader]})(({theme:e,ownerState:t})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:`1px solid
    ${e.palette.mode==="light"?Lv(un(e.palette.divider,1),.88):Iv(un(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,...t.variant==="head"&&{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},...t.variant==="body"&&{color:e.palette.text.primary},...t.variant==="footer"&&{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},...t.size==="small"&&{padding:"6px 16px",[`&.${Moe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},...t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},...t.padding==="none"&&{padding:0},...t.align==="left"&&{textAlign:"left"},...t.align==="center"&&{textAlign:"center"},...t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},...t.align==="justify"&&{textAlign:"justify"},...t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:e.palette.background.default}}));pq.component(function({otherProps:t,allProps:n,props:r}){const i=Ln(yht),a=Ln(mS),o=()=>a&&a.variant==="head",s=()=>n.component||o()?"th":"td",l=()=>!r.scope&&o()?"col":r.scope,u=()=>r.variant||a&&a.variant,c=()=>r.sortDirection?r.sortDirection==="asc"?"ascending":"descending":void 0,h=G(n,{get component(){return s()},get padding(){return r.padding||(i&&i.padding?i.padding:"normal")},get size(){return r.size||(i&&i.size?i.size:"medium")},get sortDirection(){return r.sortDirection},get stickyHeader(){return u()==="head"&&i&&i.stickyHeader},get variant(){return u()}}),f=pq.useClasses(h),d=dS(Aoe,"th");return O(d,G({get as(){return r.component},get scope(){return l()},get"aria-sort"(){return c()}},t,{get class(){return Ot(f.root,t.class)},ownerState:h,get children(){return r.children}}))});function Coe(e){return Zt("MuiTableContainer",e)}qt("MuiTableContainer",["root"]);const Eoe=Pt()({name:"MuiTableContainer",propDefaults:({set:e})=>e({component:"div"}),selfPropNames:["children","classes"],utilityClass:Coe,slotClasses:()=>({root:["root"]})}),Doe=vt("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"});Eoe.component(function({classes:t,allProps:n,props:r,otherProps:i}){return O(Doe,G(i,{get class(){return Ot(t.root,i.class)},ownerState:n,get children(){return r.children}}))});function Ioe(e){return Zt("MuiTableFooter",e)}qt("MuiTableFooter",["root"]);const HR=Pt()({name:"MuiTableFooter",selfPropNames:["children","classes"],utilityClass:Ioe,slotClasses:()=>({root:["root"]})}),Loe=vt("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),Poe={variant:"footer"},vq="tfoot";HR.defineComponent(function(t){const n=HR.useThemeProps({props:t}),[,r]=Yt(n,["class","component"]),i=G({component:vq},n),a=G(n,{get component(){return i.component}}),o=HR.useClasses(a);return O(mS.Provider,{value:Poe,get children(){return O(Loe,G({get as(){return i.component},get class(){return Ot(o.root,n.class)},get role(){return i.component===vq?null:"rowgroup"},ownerState:a},r))}})});function Roe(e){return Zt("MuiTableHead",e)}qt("MuiTableHead",["root"]);const Ooe=Pt()({name:"MuiTableHead",propDefaults:({set:e})=>e({component:bht}),selfPropNames:["children","classes"],utilityClass:Roe,slotClasses:()=>({root:["root"]})}),Noe=vt("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Boe={variant:"head"},bht="thead";Ooe.component(function({classes:t,allProps:n,otherProps:r,props:i}){return O(mS.Provider,{value:Boe,get children(){return O(Noe,G({get role(){return r.component===bht?null:"rowgroup"}},r,{get class(){return Ot(t.root,r.class)},ownerState:n,get children(){return i.children}}))}})});function koe(e){return Zt("MuiTableRow",e)}const gq=qt("MuiTableRow",["root","selected","hover","head","footer"]),Foe=Pt()({name:"MuiTableRow",propDefaults:({set:e})=>e({component:Sht,hover:!1,selected:!1}),selfPropNames:["children","classes","hover","selected"],utilityClass:koe,slotClasses:e=>({root:["root",e.selected&&"selected",e.hover&&"hover",e.head&&"head",e.footer&&"footer"]})}),zoe=vt("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>[t.root,e.ownerState.head&&t.head,e.ownerState.footer&&t.footer]})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${gq.hover}:hover`]:{backgroundColor:e.palette.action.hover},[`&.${gq.selected}`]:{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:un(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),Sht="tr";Foe.component(function({classes:t,allProps:n,otherProps:r,props:i}){const a=Ln(mS),o=G(n,{get head(){return a&&a.variant==="head"},get footer(){return a&&a.variant==="footer"}});return O(zoe,G({get role(){return r.component===Sht?null:"row"}},r,{get class(){return Ot(t.root,r.class)},ownerState:o,get children(){return i.children}}))});function Uoe(e){return Zt("MuiTextField",e)}qt("MuiTextField",["root"]);const Voe=Pt()({name:"MuiTextField",propDefaults:({set:e})=>e({autoFocus:!1,color:"primary",disabled:!1,error:!1,fullWidth:!1,multiline:!1,required:!1,select:!1,variant:"outlined"}),selfPropNames:["FormHelperTextProps","InputLabelProps","InputProps","autoComplete","autoFocus","children","classes","color","defaultValue","disabled","error","fullWidth","helperText","id","inputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","size","type","value","variant"],utilityClass:Uoe,slotClasses:()=>({root:["root"]})}),Goe={standard:z2,filled:Kct,outlined:aht},Hoe=vt(Mne,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({});Voe.component(function({allProps:t,classes:n,otherProps:r,props:i}){const a=xV(()=>i.id),o=()=>i.helperText&&a()?`${a()}-helper-text`:void 0,s=()=>i.label&&a()?`${a()}-label`:void 0,l=()=>Goe[i.variant],u=()=>O(u1,G({get $component(){return l()},get"aria-describedby"(){return o()},get autoComplete(){return i.autoComplete},get autoFocus(){return i.autoFocus},get defaultValue(){return i.defaultValue},get fullWidth(){return i.fullWidth},get multiline(){return i.multiline},get name(){return i.name},get rows(){return i.rows},get maxRows(){return i.maxRows},get minRows(){return i.minRows},get type(){return i.type},get value(){return i.value},get id(){return a()},get inputRef(){return i.inputRef},get onBlur(){return i.onBlur},get onChange(){return i.onChange},get onFocus(){return i.onFocus},get placeholder(){return i.placeholder},get inputProps(){return i.inputProps},get size(){return i.size},get notched(){return i.variant==="outlined"&&i.InputLabelProps&&typeof i.InputLabelProps.shrink<"u"?i.InputLabelProps.shrink:void 0},get label(){return i.variant==="outlined"?i.label:void 0}},()=>i.InputProps||{})),c=()=>{const f=i.label;return f!=null&&f!==""&&O(hre,G({get for(){return a()},get id(){return s()}},()=>i.InputLabelProps||{},{children:f}))},h=()=>{const f=i.helperText;if(f)return O(Nne,G({get id(){return o()}},()=>i.FormHelperTextProps||{},{children:f}))};return O(Hoe,G({get class(){return Ot(n.root,r.class)},get disabled(){return i.disabled},get error(){return i.error},get fullWidth(){return i.fullWidth},get required(){return i.required},get color(){return i.color},get variant(){return i.variant},get size(){return i.size},ownerState:t},r,{get children(){return[mt(()=>c()),mt(()=>u()),mt(()=>h())]}}))});const XV=hr({});function Woe(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function $oe(e){return Zt("MuiToggleButton",e)}const mq=qt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),yq=Pt()({name:"MuiToggleButton",selfPropNames:["children","classes","color","disableFocusRipple","disabled","fullWidth","onChange","onClick","selected","size","value"],propDefaults:({set:e})=>{const t=Ln(XV);return e({get color(){return t.color??"standard"},get disabled(){return t.disabled??!1},disableFocusRipple:!1,fullWidth:!1,get size(){return t.size??"medium"}})},autoCallUseClasses:!1,utilityClass:$oe,slotClasses:e=>({root:["root",!!e.selected&&"selected",e.disabled&&"disabled",e.fullWidth&&"fullWidth",`size${lt(e.size)}`,e.color]})}),Xoe=vt($s,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${lt(n.size)}`]]}})(({theme:e,ownerState:t})=>{const n=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main;return{...e.typography.button,borderRadius:e.shape.borderRadius,padding:11,border:`1px solid ${e.palette.divider}`,color:e.palette.action.active,...t.fullWidth&&{width:"100%"},[`&.${mq.disabled}`]:{color:e.palette.action.disabled,border:`1px solid ${e.palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:un(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${mq.selected}`]:{color:n,backgroundColor:un(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:un(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:un(n,e.palette.action.selectedOpacity)}}},...t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},...t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)}}});yq.component(function({allProps:t,otherProps:n,props:r}){const i=Ln(XV),a=G(t,{get selected(){return t.selected||Woe(r.value,i.value)},get fullWidth(){return i.fullWidth},get onChange(){return i.onChange}}),o=yq.useClasses(a);return O(Xoe,G({get class(){return Ot(i.class,o.root,n.class)},get disabled(){return a.disabled},get focusRipple(){return!r.disableFocusRipple},onClick:s=>{typeof r.onClick=="function"&&(r.onClick(s,r.value),s.defaultPrevented)||typeof a.onChange=="function"&&a.onChange(s,r.value)},get onChange(){return a.onChange},get value(){return r.value},ownerState:a,get"aria-pressed"(){return a.selected}},n,{get component(){return n.component},get children(){return r.children}}))});function joe(e){return Zt("MuiToggleButtonGroup",e)}const mc=qt("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),Yoe=Pt()({name:"MuiToggleButtonGroup",selfPropNames:["children","classes","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],propDefaults:({set:e})=>e({color:"standard",disabled:!1,exclusive:!1,fullWidth:!1,orientation:"horizontal",size:"medium"}),utilityClass:joe,slotClasses:e=>({root:["root",e.orientation==="vertical"&&"vertical",e.fullWidth&&"fullWidth"],grouped:["grouped",`grouped${lt(e.orientation)}`,e.disabled&&"disabled"]})}),qoe=vt("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${mc.grouped}`]:t.grouped},{[`& .${mc.grouped}`]:t[`grouped${lt(n.orientation)}`]},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>({display:"inline-flex",borderRadius:t.shape.borderRadius,...e.orientation==="vertical"&&{flexDirection:"column"},...e.fullWidth&&{width:"100%"},[`& .${mc.grouped}`]:{...e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${mc.selected} + .${mc.grouped}.${mc.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${mc.selected} + .${mc.grouped}.${mc.selected}`]:{borderTop:0,marginTop:0}}}}));Yoe.component(function({allProps:t,classes:n,otherProps:r,props:i}){return O(XV.Provider,{value:{get class(){return n.grouped},get value(){return i.value},get size(){return i.size},get fullWidth(){return i.fullWidth},get color(){return i.color},get disabled(){return i.disabled},onChange:(a,o)=>{if(i.onChange){if(i.exclusive){i.onChange(a,i.value===o?null:o);return}}else return;const s=i.value,l=s&&s.indexOf(o);let u;s&&l>=0?(u=s.slice(),u.splice(l,1)):u=s?s.concat(o):[o],i.onChange(a,u)}},get children(){return O(qoe,G({role:"group",get class(){return Ot(n.root,r.class)},ownerState:t},r,{get children(){return i.children}}))}})});function Koe(e){return Zt("MuiToolbar",e)}qt("MuiToolbar",["root","gutters","regular","dense"]);const Zoe=Pt()({name:"MuiToolbar",selfPropNames:["children","classes","disableGutters","variant"],propDefaults:({set:e})=>e({component:"div",disableGutters:!1,variant:"regular"}),utilityClass:Koe,slotClasses:e=>({root:["root",!e.disableGutters&&"gutters",e.variant]})}),Joe=vt("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},...t.variant==="dense"&&{minHeight:48}}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar);Zoe.component(function({allProps:t,props:n,classes:r,otherProps:i}){return O(Joe,G(i,{get as(){return i.component},get class(){return Ot(r.root,i.class)},ownerState:t,get children(){return n.children}}))});var Qoe=ee("<div class=loadingScreen><div style=display:flex;justify-content:center;align-items:center;width:100vh;height:100vh;>");function tse(){return(()=>{var e=Qoe(),t=e.firstChild;return le(t,O(dee,{disableShrink:!0,sx:{color:"#145e9f",height:"30%",width:"30%"}})),e})()}var ese=ee("<div id=mainContainer><div class=mainPage></div><footer class=footer><div class=footer-content id=footer><p> 2024 Dimitris Makrygiannis | MINES PARIS - PSL, Centre for Robotics</p><p>All rights reserved.");function nse(){XNt(!1),ki(async()=>{await wht(),await Z9t()});const e={width:"100% ",height:"100%",flex:1,overflow:"auto"};return(()=>{var t=ese(),n=t.firstChild;return le(t,(()=>{var r=mt(()=>!jNt());return()=>r()&&O(tse,{})})(),n),ey(n,e),le(n,O(jKt,{})),t})()}const wht=()=>{const e=document.getElementById("mainContainer");if(2.014>=window.innerWidth/window.innerHeight){y9(window.innerWidth/1920);const t=1/Ms()*100,n=(100-t)/2;_9(n),Ms()>1?e.style.transform=`scale(${Ms()}) translate(${n}%,0%)`:e.style.transform=`scale(${Ms()}) translate(${n}%,${n}%)`,e.style.width=`${t}svw`,e.style.height=`${t}svh`,console.log("mikrotero")}else{let t=function(i){return i*2.0146904512067154};y9(t(window.innerHeight)/1920);const n=1/Ms()*100,r=(100-n)/2;_9(r),e.style.transform=`scale(${Ms()}) translate(${r}%,${r}%)`,e.style.width=`${n}svw`,e.style.height=`${n}svh`,console.log("megalyetero",t(e.clientHeight))}};function rse(){const e=()=>{j0(),wht()};return ki(()=>{window.addEventListener("resize",e),window.addEventListener("message",function(t){if(t.origin!=="http://localhost"){console.log("wronggg: ",t.origin);return}const n=t.data;console.log("EventData: ",n),n.name?console.log("User's name received:",n.name):console.log("No user name received.")},!1),document.addEventListener("resize",e),document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("msfullscreenchange",e)}),Pe(()=>{window.removeEventListener("resize",e)}),O(nse,{})}const ise=document.getElementById("root");Qht(()=>O(rse,{}),ise);
